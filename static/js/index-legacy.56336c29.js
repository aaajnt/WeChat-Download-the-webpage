(function(){var e={15883:function(e,t,i){"use strict";i.d(t,{Z:function(){return j}});i(26699),i(68309),i(32023);var n=function(){var e,t=this,i=t._self._c;t._self._setupProxy;return i("div",{class:{"sign-up":t.isSignUping,"doc-container":t.isDoc},attrs:{id:"app"}},[t.isSignUping?t._e():i("HeaderBar",{attrs:{avatar:t.avatar,isLogin:t.isLogin}}),null!==(e=t.$router.currentRoute.meta)&&void 0!==e&&e.showSideBar?i("mp-layout",{class:t.navigationIsNarrow?"layout__navigation-is-narrow":"layout__navigation-is-wide",scopedSlots:t._u([{key:"aside",fn:function(){return[i("mp-navigation",{ref:"nagivation",staticClass:"main-navigation",attrs:{defaultOpenIndex:t.defaultOpenIndex,"critical-flod":1500},on:{resize:t.handleNavigationResize}},[i("mp-navigation-item",{attrs:{icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-redpacket.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-redpacket-filled.png",active:["detail","covers","make","invoiceSuccess","pay","paySuccess","submitSuccess","revokeSuccess","refundSuccess","statistics"].includes(t.$router.currentRoute.name),href:"#/covers"}},[t._v(" 我的红包封面 ")]),i("mp-navigation-sub",{ref:"navSub1",class:["navigation-sub",{"show-red-point":t.showQuotaRedPoint}],attrs:{icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-order.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-order-filled.png",title:"订单/发放记录",index:t.orderMenuIndex}},t._l(t.orderMenu,(function(e){return i("mp-navigation-item",{key:e.routerName,attrs:{active:t.$router.currentRoute.name===e.routerName||e.active&&e.active.includes(t.$router.currentRoute.name),href:"#/".concat(e.routerName)}},[t._v(t._s(e.name)+" "),"封面兑换卡"===e.name&&t.showQuotaRedPoint?i("span",{staticClass:"sub-red-dot"}):t._e()])})),1),i("mp-navigation-item",{attrs:{icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-member.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-member-filled.png",active:"administrator"===t.$router.currentRoute.name,href:"#/administrator"}},[t._v(" 成员管理 ")]),i(t.OpenInvoiceSwitch?"mp-navigation-sub":"mp-navigation-item",{ref:"navSub2",tag:"component",class:t.OpenInvoiceSwitch?"navigation-sub":"navigation-disabled",attrs:{title:"发票管理",index:"invoiceManage",icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-invoice.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-invoice-filled.png"}},[i("mp-navigation-item",{attrs:{active:1===+t.$route.query.nav,href:"#/invoice_manage?nav=1"}},[t._v("开发票")]),i("mp-navigation-item",{attrs:{active:2===+t.$route.query.nav,href:"#/invoice_manage?nav=2"}},[t._v("开票记录")])],1)],1)]},proxy:!0}],null,!1,140340741)},[i("router-view",{staticClass:"app-body"}),t.noFooter?t._e():i("TheFooter",{staticClass:"layout-footer"})],1):[i("router-view",{staticClass:"app-body"}),t.noFooter?t._e():i("TheFooter")],i("FixWidget")],2)},a=[],r=i(80543),o=i(81448),s=i(63442),c=(i(69600),i(21249),i(69826),i(41539),i(57658),i(20144)),l=i(57582),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"header-bar-wrapper"},[t("div",{staticClass:"header-placeholder",style:{height:"".concat(e.headerBarHeight,"px")}}),t("div",{ref:"headerBar",staticClass:"header-bar-wrap",class:{"is-index":e.isIndex}},[t("div",{staticClass:"header-bar"},[t("div",{staticClass:"brand",on:{click:function(t){return e.goto("covers")}}},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:e.LogoImg}})]),t("div",{staticClass:"name"},[e._v("微信红包封面开放平台")])]),t("div",{staticClass:"navigator"},[t("div",{staticClass:"menu-list"},[t("div",{staticClass:"menu-item",class:{active:"case"===e.routerName},on:{click:function(t){return e.goto("case","_blank")}}},[e._v("优秀案例")]),t("div",{staticClass:"menu-item",class:{active:"doc"===e.routerName},on:{click:function(t){return e.goto("questionAnswer","_blank")}}},[e._v("帮助中心")]),t("div",{staticClass:"menu-item",class:{active:"notice"===e.routerName},on:{click:function(t){return e.goto("notice","_blank")}}},[e._v(" 公告 "),e.hasNewNotice?t("div",{staticClass:"new-tag"},[t("img",{attrs:{src:i(38036)}})]):e._e()])]),e.isLogin?[t("mp-popover",{staticClass:"user-menu-popover",attrs:{trigger:"hover",width:116},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",{staticClass:"user"},[t("img",{staticClass:"avatar",attrs:{src:e.avatar||e.defaultAvatar}}),t("account-label")],1)]},proxy:!0}],null,!1,249095123)},[t("div",{staticClass:"user-menu-list"},[t("div",{staticClass:"user-menu-item",on:{click:e.logout}},[e._v("退出登录")])])])]:[t("div",{staticClass:"login",class:{active:"login"===e.routerName},on:{click:e.login}},[e._v("登录")]),t("div",{staticClass:"signup",on:{click:e.signup}},[e._v("注册")])]],2)])])])},d=[],p=(i(74916),i(64765),i(92222),i(20629)),v=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"AccountLabel-Component"},[t("div",{class:["nickname",{bottom:e.label}]},[e._v(" "+e._s(e.nickname)+" "),t("div",{class:["arrow-down",{"move-left":e.redPointOpacity}]},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]),e.label?t("span",{staticClass:"account-type"},[e._v(e._s(e.label))]):e._e()])},m=[],f=(0,p._p)("user"),h=f.mapGetters,g=c.ZP.extend({components:{},data:function(){return{redPointOpacity:!1}},computed:(0,s.Z)((0,s.Z)({},h(["accountType"])),{},{label:function(){var e=this.accountType,t={0:"",1:"公众号",2:"视频号"};return t[e]||""},nickname:function(){return l.U6.user.nickname}}),methods:{}}),y=g,b=i(1001),w=(0,b.Z)(y,v,m,!1,null,"cfa18488",null),C=w.exports,_=i(85880),x=i(18205),I=new _.ZP,k=(0,p._p)("user"),T=k.mapGetters,S=c.ZP.extend({name:"HeaderBar",components:{AccountLabel:C},data:function(){return{LogoImg:x.is.logo,headerBarHeight:0}},props:{isLogin:Boolean,avatar:String},computed:(0,s.Z)((0,s.Z)({},T(["showQuotaRedPoint"])),{},{routerName:function(){return this.$route.name},isIndex:function(){return"index"===this.$route.name},hasNewNotice:function(){return l.PJ.hasNewNotice},OpenInvoiceSwitch:function(){return l.U6.auth.OpenInvoiceSwitch}}),created:function(){l.PJ.getNoticeList()},mounted:function(){this.getHeaderBarHeight()},methods:{getHeaderBarHeight:function(){var e=this.$refs.headerBar;e&&(this.headerBarHeight=e.scrollHeight)},goto:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("questionAnswer"!==e){n.next=4;break}return a=i.$router.resolve({name:"doc",query:{page:"introduce"}}),window.open(a.href,"_blank"),n.abrupt("return");case 4:if("covers"===e&&I.baseActionReport({actionType:"9",authorId:l.U6.user.authorId}),i.$route.name===e){n.next=11;break}if("_blank"!==t){n.next=10;break}return o=i.$router.resolve({name:e}),window.open(o.href,"_blank"),n.abrupt("return");case 10:i.$router.push({name:e});case 11:case"end":return n.stop()}}),n)})))()},gotoIndex:function(){if("index"!==this.$route.name)return this.$router.push({name:"index"})},login:function(){"login"!==this.$route.name&&this.$router.push({name:"login"})},signup:function(){var e=window.location,t=e.origin,i=e.pathname,n=e.search,a="".concat(t).concat(i).concat(n,"#/signup/sign_should_know");window.open(a,"_blank")},logout:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.U6.logout();case 2:"index"!==e.$route.name&&e.$router.push({name:"index"});case 3:case"end":return t.stop()}}),t)})))()}}}),A=S,D=(0,b.Z)(A,u,d,!1,null,"adb6e020",null),P=D.exports,Z=i(19786),U=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},E=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"FixWidget-Component"},[t("div",{staticClass:"widget-item"},[t("i",{staticClass:"icon-qrcode"}),e._v(" 封面助手 "),t("div",{staticClass:"widget-hover"},[t("div",{staticClass:"info-item gzh-info"},[t("img",{staticClass:"qrcode-img",attrs:{src:i(96611)}}),t("div",{staticClass:"info-item-name"},[e._v("微信红包封面")]),t("div",{staticClass:"info-item-desc"},[e._v("了解平台动态")])]),t("div",{staticClass:"info-item miniapp-info"},[t("img",{staticClass:"miniapp-qrcode-img",attrs:{src:i(21637)}}),t("div",{staticClass:"info-item-name"},[e._v("微信红包封面助手")]),t("div",{staticClass:"info-item-desc"},[t("div",[e._v("随时发放封面")]),t("div",[e._v("了解发放数据")])])])])]),t("div",{staticClass:"widget-item",attrs:{id:"qidian-kf"}},[t("i",{staticClass:"icon-kf"}),e._v("客服")])])}],R=c.ZP.extend({components:{},data:function(){return{}},computed:{routeName:function(){return this.$route.name||""}},methods:{}}),M=R,L=(0,b.Z)(M,U,E,!1,null,"2ee50e6b",null),F=L.exports,N=(0,p._p)("user"),O=N.mapGetters,B=c.ZP.extend({name:"app",components:{HeaderBar:P,TheFooter:Z.Z,FixWidget:F},data:function(){return{defaultOpenIndex:[],orderMenu:[{routerName:"orders",name:"我的订单",active:["order"]},{routerName:"receiveobjects",name:"发放记录"},{routerName:"exchange",name:"封面兑换卡"}],navigationIsNarrow:!1}},computed:(0,s.Z)((0,s.Z)({},O(["showQuotaRedPoint"])),{},{orderMenuIndex:function(){var e=this.orderMenu.map((function(e){return e.routerName})).join("_");return e},OpenInvoiceSwitch:function(){return l.U6.auth.OpenInvoiceSwitch},isLogin:function(){return!(!l.U6.user||!l.U6.user.authorId)},isSignUping:function(){return this.$route.path.indexOf("signup")>-1},isDoc:function(){return this.$route.path.indexOf("/doc")>-1},isIndex:function(){return"index"===this.$route.name},noFooter:function(){return"doc"===this.$route.name||"make"===this.$route.name},avatar:function(){return l.U6.user.headImgUrl}}),watch:{$route:{handler:function(){this.handleRouteChange()},immediate:!0}},mounted:function(){var e=this;setTimeout((function(){return e.initNav()}),50)},methods:{initNav:function(){return(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:0,t=document.querySelector(".weui-desktop-menu__sub__link"),t&&!t.classList.contains("weui-desktop-menu__sub-unfold")&&(null===t||void 0===t||t.click());case 3:case"end":return e.stop()}}),e)})))()},handleNavigationResize:function(e){this.navigationIsNarrow="narrowNavigation"===e.currentNavigationWidth},handleDefaultOpenIndex:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p,v;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=null===(i=e.$refs)||void 0===i?void 0:i.navSub1,l=null===(n=e.$refs)||void 0===n?void 0:n.navSub2,u=[],d=e.$router.currentRoute.name,p=e.orderMenu.find((function(e){var t;return e.routerName===d||(null===e||void 0===e||null===(t=e.active)||void 0===t?void 0:t.includes(d))})),v="invoiceManage"===d,p&&u.push(e.orderMenuIndex),v&&u.push("invoiceManage"),e.defaultOpenIndex=u,t.next=11,e.$nextTick();case 11:null===c||void 0===c||null===(a=c.isInitOpen)||void 0===a||a.call(c),null===l||void 0===l||null===(o=l.isInitOpen)||void 0===o||o.call(l),null!==(s=e.$refs.nagivation)&&void 0!==s&&s.isNarrow||(!p||null!==c&&void 0!==c&&c.isShowSubNav||null===c||void 0===c||c.switchSubNav(),!v||null!==l&&void 0!==l&&l.isShowSubNav||null===l||void 0===l||l.switchSubNav());case 14:case"end":return t.stop()}}),t)})))()},handleRouteChange:function(){this.handleDefaultOpenIndex()}}}),q=B,Q=(0,b.Z)(q,n,a,!1,null,null,null),j=Q.exports},86610:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{attrs:{width:620,trigger:"hover",position:e.position},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{top:"1px",position:"relative"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"leading-normal",staticStyle:{color:"#9a9a9a"}},[t("div",{staticClass:"pop-title mb-2"},[e._v("开启「封面推广」后，封面可同时通过以下方式发放，加速封面传播：")]),e.isQuotaGift?e._e():t("div",{staticClass:"pop-content mb-2"},[t("div",{staticClass:"font-medium"},[e._v("1、借助用户分享行为裂变发放")]),t("div",[t("span",{staticClass:"mr-1 text-xl font-medium"},[e._v("·")]),e._v("领取封面时，用户可将封面领取链接直接分享到微信聊天中。")]),t("img",{staticStyle:{width:"380px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f31553df-fa10-4b32-8fdf-29050881e548/intro1.jpg"}}),t("div",[t("span",{staticClass:"mr-1 text-xl font-medium"},[e._v("·")]),e._v("使用封面发红包时，红包接收方也可领取同款封面。")]),t("img",{staticStyle:{width:"380px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f31553df-fa10-4b32-8fdf-29050881e548/intro2.jpg"}})]),t("div",{staticClass:"pop-content"},[t("div",{staticClass:"font-medium"},[e.isQuotaGift?e._e():t("span",[e._v("2、")]),e._v(" 在「封面专区」中展示并发放（微信手机端的「封面专区」功能灰度中） ")]),t("div",{staticClass:"mt-1"},[e._v("被灰度的微信用户打开任一聊天> 点击「发红包 > 红包封面 >领封面」后，可以看到并领取你的封面。")]),t("img",{staticStyle:{width:"380px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/8ea1c391-1141-4c60-95b7-f2b8dbacfa11/intro3.jpg"}})])])]},proxy:!0}])})},a=[],r=i(20144),o=(0,r.aZ)({props:{isQuotaGift:{type:Boolean,default:!1},position:{type:String,default:"left-center"}}}),s=o,c=i(1001),l=(0,c.Z)(s,n,a,!1,null,null,null),u=l.exports},58534:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-receive-img",class:{"widget-cover-receive-img":e.widgetCoverSrc}},[e.dynamicSrc?[t("pag-display",{attrs:{url:e.dynamicSrc,autoplay:!0,loop:!0,showType:"preview",name:"order",autoInit:!0}}),t("img",{class:1===e.dynamicType?"open-mask":"dynamic-widget-open-mask",attrs:{src:e.openIconActive}})]:e.openSrc?[t("img",{class:e.widgetCoverSrc?"widgetcover-img receive-img":"receive-img",attrs:{src:e.openSrc}})]:e.widgetCoverSrc?[t("img",{staticClass:"receive-img widgetcover-img",attrs:{src:e.widgetCoverSrc}}),t("img",{staticClass:"widget-open-mask",attrs:{src:e.openIconActive}})]:[e.src?t("img",{staticClass:"receive-img",attrs:{src:e.src}}):e._e(),t("img",{staticClass:"open-mask",attrs:{src:e.openIconActive}})]],2)},a=[],r=(i(9653),i(18205)),o=i(20144),s=i(28687),c=o.ZP.extend({name:"CoverReceiveImg",components:{PagDisplay:s.Z},props:{src:String,openSrc:String,widgetCoverSrc:String,dynamicSrc:String,dynamicType:Number},data:function(){return{openIconActive:r.is.open_icon_active}}}),l=c,u=i(1001),d=(0,u.Z)(l,n,a,!1,null,"74aacd25",null),p=d.exports},84595:function(e,t,i){"use strict";i.d(t,{Z:function(){return M}});var n=function(){var e,t,i=this,n=i._self._c;i._self._setupProxy;return n("div",[n("mp-form",{ref:"heatForm",attrs:{"label-width":117,rules:i.formRule,model:i.heatedMaterial}},[n("mp-form-item",{attrs:{prop:"tagName"},scopedSlots:i._u([{key:"label",fn:function(){return[n("div",{staticClass:"form-label mt-2",staticStyle:{display:"flex","align-items":"center"}},[n("span",{},[i._v("封面主题")]),n("mp-popover",{staticClass:"fission-popover",attrs:{width:395,position:"up-left",trigger:"hover"},scopedSlots:i._u([{key:"target",fn:function(){return[n("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"1px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"r"},[n("div",[i._v("封面主题是封面专区的分类关键词，便于用户快速筛选。选择主题后，封面将同时展示在全部列表及对应的封面主题中。")]),n("img",{staticStyle:{width:"255px","margin-top":"16px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f724e641-9b6d-463d-9c48-f61868e3814d/1.png"}})])]},proxy:!0}])})],1)]},proxy:!0}])},[n("mp-dropdown",{attrs:{type:"default",options:i.heatedOption,disabled:3===i.heatedMaterial.type,placeholder:"请选择主题"},model:{value:i.heatedMaterial.tagName,callback:function(e){i.$set(i.heatedMaterial,"tagName",e)},expression:"heatedMaterial.tagName"}})],1),n("mp-form-item",{scopedSlots:i._u([{key:"label",fn:function(){return[n("div",{staticClass:"form-label",staticStyle:{top:"2px",position:"relative",display:"flex"}},[n("span",{},[i._v("封面来源")]),n("mp-popover",{staticClass:"fission-popover",attrs:{width:400,position:"up-left",trigger:"hover"},scopedSlots:i._u([{key:"target",fn:function(){return[n("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"1px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"r"},[n("div",[i._v("封面专区中的封面都将展示封面来源，用户可通过该来源前往了解你的视频号或公众号。")]),n("img",{staticStyle:{width:"363px","margin-top":"16px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f724e641-9b6d-463d-9c48-f61868e3814d/2.png"}})])]},proxy:!0}])})],1)]},proxy:!0}])},[n("mp-radio-group",{staticClass:"radio-group",model:{value:i.heatedMaterial.jumpType,callback:function(e){i.$set(i.heatedMaterial,"jumpType",e)},expression:"heatedMaterial.jumpType"}},[n("mp-radio",{attrs:{value:2,disabled:2!==(null===(e=i.heatedMaterial)||void 0===e?void 0:e.type)}},[n("span",[i._v("公众号")])]),n("mp-radio",{attrs:{value:4,disabled:2!==(null===(t=i.heatedMaterial)||void 0===t?void 0:t.type)}},[n("span",[i._v("视频号")])])],1)],1),n("mp-form-item",{attrs:{prop:"heatedSource"},scopedSlots:i._u([{key:"label",fn:function(){return[n("div",{staticClass:"form-label mt-2"},[n("span",{},[i._v(i._s(2===i.heatedMaterial.jumpType?"公众号":"视频号"))])])]},proxy:!0}])},[2===i.heatedMaterial.type?[n("mp-button",{attrs:{type:"default"},on:{click:function(e){return i.addCoverSource(!0)}}},[i._v(i._s(i.heatedMaterial.username?"修改":"添加"))]),i.heatedMaterial.username?n("div",{staticClass:"action-wrap"},[i.heatedMaterial.username||i.heatedMaterial.nickname?n("div",{staticClass:"action-info"},[n("div",{staticClass:"action-info_content"},[n("img",{staticClass:"avatar avatar2",attrs:{src:i.heatedMaterial.headImgUrl}}),n("div",{staticClass:"name"},[i._v(i._s(i.heatedMaterial.nickname))])]),i.showAuthQrcode?n("div",{staticClass:"action-info_authstatus"},[i.authorizeSuccess?n("span",[i._v("(已授权)")]):[n("span",[i._v("(未授权)")]),n("a",{staticClass:"btn-auth-dialog",on:{click:function(e){return e.preventDefault(),i.addCoverSource(!1)}}},[i._v("打开授权码")])]],2):i._e(),n("mp-icon",{attrs:{icon:"xmark_regular",width:16,height:16},nativeOn:{click:function(e){return i.deleteEnter.apply(null,arguments)}}})],1):i._e()]):i._e(),i.authorizeWaiting&&i.heatedMaterial.username?n("div",{staticClass:"auth-tips"},[i._v("未授权无法设置封面推广")]):i._e()]:[n("div",{staticClass:"action-wrap action-wrap_fixed"},[i.afterHeat||3!==i.heatedMaterial.type?i._e():n("mp-button",{attrs:{type:"default",disabled:""}},[i._v("修改")]),i.heatedMaterial.nickname?n("div",{staticClass:"action-wrap"},[n("div",{staticClass:"action-info"},[n("div",{staticClass:"action-info_content"},[n("img",{staticClass:"avatar avatar2",attrs:{src:i.heatedMaterial.headImgUrl}}),n("div",{staticClass:"name"},[i._v(i._s(i.heatedMaterial.nickname))])])])]):i._e()],1),0===i.heatedMaterial.type?n("div",{staticClass:"auth-tips"},[i._v("封面来源默认为封面故事跳转的视频号/公众号")]):i._e(),1===i.heatedMaterial.type?n("div",{staticClass:"auth-tips"},[i._v("用奖励兑换卡发放的封面，封面来源默认为注册视频号")]):i._e()]],2),i.afterHeat&&3===i.heatedMaterial.type?n("div",{staticClass:"auth-tips",staticStyle:{display:"flex","align-items":"center"}},[i._v(" 当前封面已在推广中，暂不支持修改封面主题和来源。 "),n("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:280},scopedSlots:i._u([{key:"target",fn:function(){return[n("mp-icon",{staticStyle:{position:"relative",top:"2.5px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[i._v("推广期间，同一款封面仅可使用一个主题及来源。")]},proxy:!0}],null,!1,3769717937)})],1):i._e()],1),n("searchJumpDialog",{attrs:{hideAuthQrcode:i.hideAuthQrcode,orderId:i.cover.orderId,jumpInfo:i.heatedMaterial},on:{submit:i.handleJumpSubmit},model:{value:i.showSearchJumpDialog,callback:function(e){i.showSearchJumpDialog=e},expression:"showSearchJumpDialog"}})],1)},a=[],r=i(94605),o=i(80543),s=i(81448),c=i(63442),l=(i(21703),i(69826),i(41539),i(92222),i(21249),i(57658),i(82526),i(41817),i(74916),i(64765),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"添加".concat(e.searchTypeInfo.title),value:e.value,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[!e.hadSearchResult||e.showAuthQrcode&&!e.hideAuthQrcode?e._e():t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.hadSearchResult||e.showError||!e.info.username,loading:e.submitLoading},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1)],1)]},proxy:!0}])},[t("div",{staticClass:"dialog-body"},[!e.hideAuthQrcode&&e.showAuthQrcode?t("div",{staticClass:"qrcode-wrap"},[t("div",{staticClass:"topTitle"},[e._v(e._s(e.topTitle))]),t("div",{staticClass:"qrcode",class:{showMask:1!==e.status,border:!e.authQrcode}},[t("img",{staticClass:"qrq",attrs:{src:"https://res.wx.qq.com/t/fed_upload/b7d329b5-c8e2-434c-b0d5-cb3b52809c30/1.png",alt:""}}),e.authQrcode?t("img",{attrs:{src:e.authQrcode}}):e._e(),t("div",{staticClass:"mask",on:{click:e.genAuthQrcode}},[e.isFailed||e.isExpired?t("svg-icon",{staticClass:"reload-icon",class:{"reload-loading":e.fetchLoading},attrs:{name:"reload"}}):e.isSuccess?t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}}):e._e()],1)]),t("div",{staticClass:"second-tips"},[e._v("有效期为12小时")]),e.isFailed||e.isExpired?t("div",{staticClass:"title"},[t("mp-icon",{staticClass:"fail-icon",attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300"}}),t("span",[e._v("二维码过期，请刷新重试")])],1):e._e()]):[t("mp-input",{attrs:{placeholder:"输入".concat(e.searchTypeInfo.description),clearable:""},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap",class:{"default-height":!e.hadSearchResult}},[e.hadSearchResult?t("div",{staticClass:"result-list"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList},on:{"radio-change":e.handleRadioChange}})],1):t("div",{staticClass:"tip"},[e.showError?[t("span",{staticClass:"error"},[e._v(" 请输入正确的"+e._s(e.searchTypeInfo.description))])]:e._e()],2)])]],2)])}),u=[],d=(i(2707),i(57327),i(47042),i(20144)),p=i(34225),v=i(57582),m=i(20629),f=i(40628),h=i(70898),g=new p.ZP,y=(0,m._p)("user"),b=y.mapGetters,w=(0,m._p)("auth"),C=w.mapGetters,_=w.mapState,x=(0,d.aZ)({name:"SearchJumpDialog",components:{JumpInfoList:h.Z},data:function(){return{querying:"",query:"",info:{},jumpInfoList:[],showError:!1,submitLoading:!1,authInfo:{authQrcode:""},genQrcodeLoading:!1,timer:0,fetchLoading:!1,successTimer:0}},props:{value:Boolean,mode:{type:String,default:"add"},jumpInfo:{type:Object,default:function(){return{}}},orderId:String,hideAuthQrcode:Boolean},computed:(0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},C({showAuthQrcode:"showAuthQrcode",actionAuthInfoStatus:"actionAuthInfoStatus",authorizeSuccess:"authorizeSuccess"})),_({actionAuthInfo:function(e){return e.actionAuthInfo}})),b(["principalAccountType"])),{},{authQrcode:function(){var e;return null===(e=this.actionAuthInfo)||void 0===e?void 0:e.qrcodeBase64},status:function(){var e;return null===(e=this.actionAuthInfo)||void 0===e?void 0:e.status},isFailed:function(){return this.status===f.WX.ACTION_QRCODE_INVAILID},isExpired:function(){return this.status===f.WX.ACTION_QRCODE_EXPIRED},isSuccess:function(){return this.status===f.WX.ACTION_QRCODE_COMFIRMED},topTitle:function(){var e=4===this.jumpInfo.actionType?"绑定的微信":"管理员的微信";return"「".concat(this.jumpInfo.nickname||"-","」").concat(e,"扫码授权后可添加")},hadSearchResult:function(){return!!this.jumpInfoList.length&&!this.showError},titleText:function(){var e=this;return"add"===e.mode?"添加":"选择"},accountType:function(){return v.U6.user.accountType},searchTypeInfo:function(){var e,t={2:"公众号微信号/帐号原始ID",4:"视频号名称/绑定的微信号"},i=null===(e=this.jumpInfo)||void 0===e?void 0:e.jumpType;return{title:f.pK[i],description:t[i]}},qrcodeAction:function(){var e,t=null===(e=this.jumpInfo)||void 0===e?void 0:e.jumpType;return t===f.Us.MPAccount?{actionType:this.jumpInfo.jumpType,mpAccountDetail:{appName:this.info.username}}:t===f.Us.FinderProfile?{actionType:this.jumpInfo.jumpType,finderProfileDetail:{queryString:this.query,username:this.info.username}}:{}}}),mounted:function(){document.addEventListener("keydown",this.handleEnterKeyDown)},beforeDestroy:function(){document.removeEventListener("keydown",this.handleEnterKeyDown)},watch:{value:function(e){e||this.clear()},authorizeSuccess:function(e){var t=this;e&&this.value&&(this.successTimer=window.setTimeout((function(){t.closeDialog()}),1e3))}},methods:{handleRadioChange:function(e){this.info=this.$set(this,"info",e)},handleEnterKeyDown:function(e){var t="undefined"!=typeof event?window.event:e,i=this;if(t&&13==t.keyCode&&i.value)return t.preventDefault(),t.stopPropagation(),i.search(),!1},clear:function(){this.info={},this.jumpInfoList=[],this.showError=!1,this.query="",this.querying=""},closeDialog:function(){this.clear(),this.$emit("input",!1)},search:function(){var e=this;return(0,s.Z)((0,o.Z)().mark((function t(){var i,n;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.querying){t.next=2;break}return t.abrupt("return");case 2:if(e.showError=!1,e.jumpInfo.jumpType!==f.Us.FinderProfile){t.next=11;break}return e.info={},t.next=7,g.storyGetFinderInfo(e.querying);case 7:i=t.sent,i&&0===i.baseResponse.ret?(e.jumpInfoList=i.jumpInfoList.filter((function(e){return!(!e.headImgUrl&&e.scene===p.DS.finder)})).sort((function(t,i){var n,a,r,o;return t.isSameBody===i.isSameBody?t.nickname===i.nickname?0:(null===(n=t.nickname)||void 0===n?void 0:n.toLocaleLowerCase())===(null===(a=e.querying)||void 0===a?void 0:a.toLocaleLowerCase())?-1:(null===(r=i.nickname)||void 0===r?void 0:r.toLocaleLowerCase())===(null===(o=e.querying)||void 0===o?void 0:o.toLocaleLowerCase())?1:0:t.isSameBody?-1:1})),e.jumpInfoList.length>1&&e.jumpInfoList.every((function(t){return t.username===e.jumpInfoList[0].username}))&&(e.jumpInfoList=e.jumpInfoList.slice(0,1)),e.query=e.querying,e.showError=!i.jumpInfoList.length):e.showError=!0,t.next=15;break;case 11:return t.next=13,g.storyGetBizInfo(e.querying,1);case 13:n=t.sent,n&&0===n.baseResponse.ret?(e.query=e.querying,e.info=n,e.jumpInfoList=[n],e.showError=!1):(e.info={},e.showError=!0);case 15:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return(0,s.Z)((0,o.Z)().mark((function t(){var i;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object.assign({},e.info,{username:e.info.username,appName:e.query,query:e.query,queryString:e.query}),console.log(e.info),e.submitLoading=!0,e.$emit("submit",i),t.prev=4,t.next=7,v.Cn.genActionAuthQrcode({action:e.qrcodeAction,order_id:e.orderId||"",vm:e});case 7:e.actionAuthInfoStatus===f.WX.ACTION_QRCODE_AUTOCONFIRMED&&e.closeDialog();case 8:return t.prev=8,e.submitLoading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[4,,8,11]])})))()},genAuthQrcode:function(){var e=this;return(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.fetchLoading){t.next=2;break}return t.abrupt("return");case 2:return e.fetchLoading=!0,t.prev=3,t.next=6,v.Cn.genActionAuthQrcode({action:e.qrcodeAction,order_id:e.orderId||"",vm:e});case 6:return t.prev=6,e.fetchLoading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})))()}}}),I=x,k=i(1001),T=(0,k.Z)(I,l,u,!1,null,"9ccf48c4",null),S=T.exports,A=new p.ZP,D=(0,m._p)("auth"),P=D.mapGetters,Z=D.mapState,U=d.ZP.extend({name:"HeatReceiveObject",components:{searchJumpDialog:S},props:{cover:{type:Object,default:null},isQuotaGift:{type:Boolean,default:!1},afterHeat:{type:Boolean,default:!1}},data:function(){var e=this;return{heatedMaterial:{tagName:null,jumpType:2,username:"",headImgUrl:"",nickname:"",type:2},tagName:null,showSearchJumpDialog:!1,hideAuthQrcode:!1,heatedOption:[],formRule:{heatedSource:[{validator:function(t,i,n){var a,r,o=e;null!==(a=o.heatedMaterial)&&void 0!==a&&a.username&&2!==o.heatedMaterial.type?n():null!==(r=o.heatedMaterial)&&void 0!==r&&r.username?o.authorizeSuccess||n(new Error("封面来源未授权")):n(new Error("请设置封面来源")),n()}}]}}},computed:(0,c.Z)((0,c.Z)({},P({authorizeSuccess:"authorizeSuccess",authorizeWaiting:"authorizeWaiting",showAuthQrcode:"showAuthQrcode",actionAuthInfoStatus:"actionAuthInfoStatus"})),Z({actionAuthInfo:"actionAuthInfo"})),watch:{cover:{immediate:!0,handler:function(e){var t=this;return(0,s.Z)((0,o.Z)().mark((function i(){var n,a,r,s,c,l,u,d,p,m,f,h,g,y,b,w;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.packetMaterial,a=e.coverSetCommInfo,null===a||void 0===a||!a.jumpType){i.next=9;break}return r=a.jumpType,s=a.jumpAppname,c=a.jumpText,l=a.tagName,i.next=5,t.getCoverSetCommHeadImage(r,s,c);case 5:u=i.sent,t.heatedMaterial={tagName:l,username:s,headImgUrl:u||"",nickname:c,jumpType:r,type:3},i.next=28;break;case 9:if(null===n||void 0===n||null===(d=n.actionList)||void 0===d||!d.length){i.next=23;break}if(p=n.actionList[0],m=p.actionType,f=p.mpAccountDetail,h=p.finderProfileDetail,2!==m||null===f||void 0===f||!f.appName){i.next=17;break}return i.next=15,A.storyGetBizInfo(f.appName,1);case 15:g=i.sent,g&&(t.heatedMaterial={tagName:t.heatedMaterial.tagName,username:f.appName,headImgUrl:g.headImgUrl,nickname:g.nickname,jumpType:2,type:0});case 17:if(4!==m||null===h||void 0===h||!h.queryString){i.next=23;break}return i.next=20,A.storyGetFinderInfo(h.queryString);case 20:y=i.sent,b=null===y||void 0===y?void 0:y.jumpInfoList.find((function(e){return e.username===h.username})),b&&(t.heatedMaterial={tagName:t.heatedMaterial.tagName,username:h.username||"",headImgUrl:b.headImgUrl,nickname:b.nickname,jumpType:4,type:0});case 23:if(t.heatedMaterial.username||!t.isQuotaGift){i.next=28;break}return i.next=26,v.U6.getUserFinderInfo();case 26:w=i.sent,w&&(t.heatedMaterial={tagName:t.heatedMaterial.tagName,username:w.username,headImgUrl:w.headImgUrl,nickname:w.nickname,jumpType:4,type:1});case 28:case"end":return i.stop()}}),i)})))()}},"heatedMaterial.jumpType":function(){2===this.heatedMaterial.type&&this.clearAction()},authorizeSuccess:{handler:function(e){var t=this;return(0,s.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=3;break}return i.next=3,t.$refs.heatForm.validateField("heatedSource");case 3:case"end":return i.stop()}}),i)})))()}}},mounted:function(){this.getCoverSetTabList()},beforeDestroy:function(){v.Cn.CLEAR_ACTION_AUTH_INFO()},methods:{getCoverSetCommHeadImage:function(e,t,i){return(0,s.Z)((0,o.Z)().mark((function n(){var a,r,s;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(2!==e){n.next=5;break}return n.next=3,A.storyGetBizInfo(t,1);case 3:return a=n.sent,n.abrupt("return",(null===a||void 0===a?void 0:a.headImgUrl)||"");case 5:if(4!==e){n.next=11;break}return n.next=8,A.storyGetFinderInfo(i);case 8:return r=n.sent,s=null===r||void 0===r?void 0:r.jumpInfoList.find((function(e){return e.username===t})),n.abrupt("return",(null===s||void 0===s?void 0:s.headImgUrl)||"");case 11:return n.abrupt("return","");case 12:case"end":return n.stop()}}),n)})))()},validate:function(){var e=this;return(0,s.Z)((0,o.Z)().mark((function t(){var i,n;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.heatForm.validate();case 2:if(i=t.sent,i.valid){t.next=5;break}return t.abrupt("return",!1);case 5:return n=e.heatedMaterial,t.abrupt("return",{tagName:n.tagName||"",jumpAppname:n.username,jumpText:n.nickname,jumpType:n.jumpType,jumpPath:""});case 7:case"end":return t.stop()}}),t)})))()},getCoverSetTabList:function(){var e=this;return(0,s.Z)((0,o.Z)().mark((function t(){var i,n,a;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.heatedOption.length){t.next=8;break}return t.next=3,A.coverSetTabList();case 3:i=t.sent,n=[],null!==i&&void 0!==i&&i.infos&&(n=(a=n).concat.apply(a,(0,r.Z)(i.infos.map((function(e){return{value:e.tagName,label:e.tagName}}))))),n.push({label:"其他",value:""}),e.heatedOption=n;case 8:case"end":return t.stop()}}),t)})))()},addCoverSource:function(e){e&&(this.hideAuthQrcode=!0),this.showSearchJumpDialog=!0},handleJumpSubmit:function(e){var t=this;return(0,s.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.hideAuthQrcode=!1,t.heatedMaterial=(0,c.Z)((0,c.Z)({},t.heatedMaterial),{},{username:e.username,nickname:e.nickname,headImgUrl:e.headImgUrl}),i.next=4,t.$refs.heatForm.validateField("heatedSource");case 4:case"end":return i.stop()}}),i)})))()},deleteEnter:function(){this.clearAction()},clearAction:function(){this.heatedMaterial=(0,c.Z)((0,c.Z)({},this.heatedMaterial),{},{username:"",nickname:"",headImgUrl:""}),this.$store.commit("auth/CLEAR_ACTION_AUTH_INFO")}}}),E=U,R=(0,k.Z)(E,n,a,!1,null,"441b4b96",null),M=R.exports},80903:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});var n=function(){var e=this,t=e._self._c;return t("i",{staticClass:"icon-info"})},a=[],r={name:"icon-info",components:{},data:function(){return{}},computed:{},methods:{}},o=r,s=i(1001),c=(0,s.Z)(o,n,a,!1,null,"ca003b3a",null),l=c.exports},70898:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"jump-info-list"},[t("mp-radio-group",{on:{change:e.change},model:{value:e.selectedUsername,callback:function(t){e.selectedUsername=t},expression:"selectedUsername"}},e._l(e.jumpInfoList,(function(i){return t("mp-radio",{key:i.username,class:["jump-info-item",{active:i.username===e.selectedUsername}],attrs:{value:i.username}},[t("a-row",{attrs:{type:"flex",align:"middle"}},[t("img",{staticClass:"avatar",attrs:{src:i.headImgUrl||e.defaultAvatar,alt:""}}),t("div",{staticClass:"name"},[e._v(e._s(i.nickname))])])],1)})),1)],1)},a=[],r=i(80543),o=i(81448),s=(i(69826),i(41539),i(20144)),c=s.ZP.extend({components:{},props:{jumpInfoList:{type:Array,default:function(){return[]}}},data:function(){return{selectedUsername:""}},computed:{},watch:{jumpInfoList:{handler:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$forceUpdate();case 2:1===e.length&&(t.selectedUsername=e[0].username,t.change(e[0].username));case 3:case"end":return i.stop()}}),i)})))()},immediate:!0}},methods:{change:function(e){var t=this.jumpInfoList.find((function(t){return t.username===e}));this.$emit("radio-change",t)}}}),l=c,u=i(1001),d=(0,u.Z)(l,n,a,!1,null,"32a9215a",null),p=d.exports},17252:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});i(68309);var n=function(){var e=this,t=e._self._c;return t("i",{staticClass:"inline-block",class:"icon-".concat(e.name)})},a=[],r={name:"MaskIcon",components:{},props:{name:String},data:function(){return{}},computed:{},methods:{}},o=r,s=i(1001),c=(0,s.Z)(o,n,a,!1,null,"15ae6334",null),l=c.exports},46074:function(e,t,i){"use strict";i.d(t,{R:function(){return n},Z:function(){return d}});var n,a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"qrcode-wrap"},[t("div",{staticClass:"qrcode",class:{showMask:0!==e.status,border:!e.qrcodeUrl}},[e.qrcodeUrl?t("img",{attrs:{src:e.qrcodeUrl}}):e._e(),t("div",{staticClass:"mask",on:{click:e.handleClickMask}},[e.isFailed||e.isExpired?t("svg-icon",{staticClass:"reload-icon",attrs:{name:"reload"}}):t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}})],1)]),t("div",{staticClass:"title"},[e.isFailed?t("mp-icon",{staticClass:"fail-icon",attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300"}}):e._e(),t("span",{domProps:{innerHTML:e._s(e.title)}})],1),e.tip?t("div",{staticClass:"tip",domProps:{innerHTML:e._s(e.tip)}}):e._e()])},r=[],o=(i(9653),i(20144));(function(e){e[e["normal"]=0]="normal",e[e["success"]=1]="success",e[e["fail"]=2]="fail",e[e["expired"]=3]="expired"})(n||(n={}));var s=o.ZP.extend({name:"Qrcode",props:{qrcodeUrl:String,status:Number,normalText:String,failTip:String,failText:String,expiredText:String,expiredTip:String,successText:String},computed:{isFailed:function(){return this.status===n.fail},isExpired:function(){return this.status===n.fail||this.status===n.expired},title:function(){var e=this.status;return e===n.normal?this.normalText:e===n.fail?this.failText:e===n.success?this.successText:e===n.expired?this.expiredText||"二维码过期，请刷新重试":""},tip:function(){var e=this.status;return e===n.fail?this.failTip:e===n.expired?this.expiredTip||"二维码每小时更新":""}},methods:{handleClickMask:function(){var e=this.isFailed,t=this.isExpired;(e||t)&&this.$emit("reload")}}}),c=s,l=i(1001),u=(0,l.Z)(c,a,r,!1,null,"6a3511ce",null),d=u.exports},28687:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"pagDisplay",staticClass:"component_pag-player",attrs:{"data-url":e.url}},[t("canvas",{ref:"canvas",attrs:{id:e.canvasId,width:e.width,height:e.height}})])},a=[],r=i(80543),o=i(81448),s=(i(9653),i(68309),i(38862),i(56977),i(41539),i(92222),i(20144)),c=i(72045),l=i(1330),u=i(63296),d=i(99453),p=i(52117),v=s.ZP.extend({components:{},props:{name:{type:String,default:"pag"},width:Number,height:Number,url:String,autoplay:Boolean,loop:Boolean,showType:String,autoInit:Boolean,onlyShow:Boolean,destroyAfterInit:Boolean},data:function(){return{canvasId:(0,c.Z)(),pagView:null,pagDuration:0,startTime:0,playTime:0,currentTime:0,version:0}},computed:{status:function(){var e;return null!==(e=this.pagView)&&void 0!==e&&e.isPlaying?"play":"pause"}},watch:{autoInit:{handler:function(e){e&&(console.log("【PagDisplay】".concat(this.name)),this.initPag())},immediate:!0},url:{handler:function(e){e&&!this.autoInit&&"preview"!==this.showType&&this.initPag()},immediate:!0}},beforeDestroy:function(){this.destroy()},methods:{getContainer:function(){return this.$el},togglePlay:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;i<this.startTime&&(null===(t=this.pagView)||void 0===t||t.setProgress(i/this.pagDuration));if(n&&(this.playTime=n),this.startTime=i,null!==(e=this.pagView)&&void 0!==e&&e.isPlaying)this.pause();else{var a;if(this.currentTime<this.startTime||this.currentTime>=this.startTime+this.playTime)null===(a=this.pagView)||void 0===a||a.setProgress(this.startTime/this.pagDuration);this.play()}},play:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("【PagDisplay】开始play"),e.pagView){t.next=4;break}return t.next=4,e.initPag();case 4:null===(i=e.pagView)||void 0===i||i.play();case 5:case"end":return t.stop()}}),t)})))()},pause:function(){var e;null===(e=this.pagView)||void 0===e||e.pause()},destroy:function(){if(this.pagView){console.log("【PagDisplay】".concat(this.name," destroy"));try{var e;null===(e=this.pagView)||void 0===e||e.destroy(),this.pagView=null,this.$emit("destroy")}catch(i){(0,p.H)("pagDestroy error",JSON.stringify({name:this.name,msg:i.message,err:i}))}var t=this.$refs.pagDisplay;t instanceof HTMLElement&&(console.log("【PagDisplay】".concat(this.name," clear canvas")),t.innerHTML="")}},initCanvas:function(){var e=this.$refs.pagDisplay;if(e instanceof HTMLElement){e.innerHTML="";var t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t.id=this.canvasId,e.appendChild(t),t}},listenAnimationStart:function(){console.log("【PagDisplay】",this.name,"start"),this.$emit("playing")},listenAnimationUpdate:function(e){this.currentTime=Number((e.getProgress()*e.duration()/1e6).toFixed(2))||0,this.playTime>0&&!this.autoplay&&this.currentTime>=this.startTime+this.playTime&&this.pause(),this.$emit("timeupdate",{currentTime:this.currentTime})},listenAnimationEnd:function(){console.log("【PagDisplay】",this.name,"ended"),this.$emit("ended")},listenAnimationPause:function(){console.log("【PagDisplay】",this.name,"pause"),this.$emit("pause")},initWorkPag:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.version,console.log("【PagDisplay】".concat(e.name," invoke initWorkPag")),t.next=4,(0,d.Oz)();case 4:return n=t.sent,a=e.initCanvas(),t.next=8,fetch(e.url).then((function(e){return e.arrayBuffer()}));case 8:return o=t.sent,i<e.version&&(0,p.H)("pag url 更新，废弃",JSON.stringify({name:e.name})),console.log("【PagDisplay】".concat(e.name," initWorkPag get Buffer")),t.prev=11,t.next=14,u.ru.load(n,o);case 14:return s=t.sent,console.log("【PagDisplay】".concat(e.name," initWorkPag load finish")),t.next=18,u.kG.init(s,a,{useCanvas2D:!0});case 18:return c=t.sent,e.$emit("ready"),console.log("【PagDisplay】".concat(e.name," initWorkPag ready")),t.abrupt("return",c);case 24:t.prev=24,t.t0=t["catch"](11),(0,p.H)("initWorkPag Error",JSON.stringify({name:e.name,url:e.url}));case 27:case"end":return t.stop()}}),t,null,[[11,24]])})))()},initOriginPag:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.version,console.log("【PagDisplay】".concat(e.name," invoke initOriginPag")),t.next=4,(0,d.sV)();case 4:return a=t.sent,t.next=7,(0,l.W)({locateFile:a}).then(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(a){var o,s,c,l,u,d,v,m,f,h;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.url).then((function(e){return e.arrayBuffer()}));case 2:return o=t.sent,i<e.version&&(0,p.H)("pag url 更新，废弃",JSON.stringify({name:e.name})),t.next=6,a.PAGFile.load(o);case 6:if(s=t.sent,c=e.initCanvas(),console.log("【PagDisplay】","".concat(e.name," init canvas")),c){t.next=11;break}return t.abrupt("return");case 11:return l=s.width(),u=s.height(),c.width=l,c.height=u,t.next=17,a.PAGView.init(s,c);case 17:if(n=t.sent,console.log("【PagDisplay】","".concat(e.name," init finish"),"version: ".concat(i)),e.$emit("ready"),!n){t.next=35;break}return e.pagView=n,t.next=24,null===(d=n)||void 0===d?void 0:d.duration();case 24:if(h=t.sent,e.pagDuration=Number((h/1e6).toFixed(2)),console.log("【PagDisplay】","".concat(e.name," get duration ").concat(e.pagDuration,"，原始duration: ").concat(h)),null===(v=n)||void 0===v||v.addListener("onAnimationStart",e.listenAnimationStart),null===(m=n)||void 0===m||m.addListener("onAnimationUpdate",e.listenAnimationUpdate),null===(f=n)||void 0===f||f.addListener("onAnimationPause",e.listenAnimationPause),n.addListener("onAnimationEnd",e.listenAnimationEnd),e.loop&&e.pagView.setRepeatCount(0),console.log("【PagDisplay】",e.name,"autoplay状态",e.autoplay),e.autoplay&&e.pagView.play(),e.destroyAfterInit){console.log("【PagDisplay】".concat(e.name," destroyAfterInit"));try{n.destroy(),e.pagView=null}catch(r){console.error("destroyAfterInit destroy error",r)}}case 35:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){throw(0,p.H)("PagDisplay PAGInit Error",JSON.stringify({errMsg:null===e||void 0===e?void 0:e.message})),e}));case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()},initPag:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url){t.next=3;break}return console.log("without pag url"),t.abrupt("return");case 3:if(e.destroy(),e.version+=1,!e.onlyShow){t.next=11;break}return t.next=8,e.initWorkPag();case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,e.initOriginPag();case 13:i=t.sent;case 14:e.pagView=i,e.loop&&(null===(n=e.pagView)||void 0===n||n.setRepeatCount(0)),e.autoplay&&(null===(a=e.pagView)||void 0===a||a.play());case 17:case"end":return t.stop()}}),t)})))()}}}),m=v,f=i(1001),h=(0,f.Z)(m,n,a,!1,null,null,null),g=h.exports},52794:function(e,t,i){"use strict";i.d(t,{Z:function(){return b}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a",{attrs:{href:"javascript:;"},on:{click:e.downloadReceiveObject}},[e._v("下载"+e._s(e.genTypeText))])},a=[],r=i(80543),o=i(81448),s=(i(41539),i(78783),i(33948),i(60285),i(41637),i(34225)),c=i(85880),l=i(52117),u=i(57582),d=i(40628),p=i(27484),v=i.n(p),m=i(20144),f=m.ZP.extend({components:{},props:{cover:Object,order:Object},data:function(){return{loadingText:"下载中",isLoading:!1}},computed:{banDownload:function(){return u.U6.banDownload},genTypeText:function(){return d.FP[this.order.genType]}},methods:{downloadZipFromObjectUrl:function(e){var t=this,i=this,n=function(){if(200===this.status){i.isLoading=!1;var e=document.createElement("a");e.href=window.URL.createObjectURL(this.response);var t=v()().format("YYYY_MM_DD_HH_mm");e.download="".concat(t,"_二维码（一人领取）.zip"),e.click()}},a=function(e){t.isLoading=!0;var i=Math.floor(e.loaded/e.total*100)+"%";t.loadingText="下载中(".concat(i,")")},r=function(){(0,l.H)("downloadZipFromObjectUrl download error");var t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href",e),t.click()};c.bL.downloadAjax(e,{onload:n,onprogress:a,onerror:r})},downloadReceiveObject:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,c,l,u,p;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.banDownload){t.next=2;break}return t.abrupt("return");case 2:if(i=e.order,n=i.totalGenCount,a=i.genType,o=i.receiveType,c=i.objectUrl,l=i.fissionObject,u=n,l&&(p=l.totalGenCount,u=n-p),!(u>1&&a===d.B6.qrcode&&o===d.T.oneToOne)){t.next=8;break}return e.downloadZipFromObjectUrl(c),t.abrupt("return");case 8:if(!e.order.mergeId){t.next=13;break}return t.next=11,s.yQ.downloadMergeReceiveObject(e.order);case 11:t.next=15;break;case 13:return t.next=15,s.yQ.downloadReceiveObject(e.cover.orderId,e.order);case 15:case"end":return t.stop()}}),t)})))()}}}),h=f,g=i(1001),y=(0,g.Z)(h,n,a,!1,null,"bec4e760",null),b=y.exports},5202:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});i(74916),i(15306);var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"build-dialog",attrs:{title:1==e.generateImage?"生成海报":"预览海报",value:e.value,width:732},on:{"visible-change":e.handleVisibleChange}},[e.posterLoading?t("div",{staticClass:"build-loadding-wrapper content"},[t("div",{staticClass:"weui-desktop-loading"})]):[t("div",{staticClass:"content"},[t("div",{ref:"buildDialog",staticClass:"build-all-wrap"},[t("img",{staticClass:"back",attrs:{src:i(64427)}}),t("div",{staticClass:"build-content",class:[{safari:e.safari,"build-content-widget":e.isWidgetCover}]},[t("div",{staticClass:"build-tips"},[e._v("送你一个微信红包封面，")]),t("div",{staticClass:"build-tips-line"}),1==e.generateImage?[t("div",{staticClass:"build-tips"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.tips1,expression:"tips1"}],staticStyle:{"margin-left":"-2px"},attrs:{placeholder:e.tipsPlaceholder},domProps:{value:e.tips1},on:{input:function(t){t.target.composing||(e.tips1=t.target.value)}}}),t("span",{class:e.tips1.length>12?"red build-input-tips":"build-input-tips"},[e._v(e._s(e.tips1.length)+"/12")])]),t("div",{staticClass:"build-tips-line-bule",staticStyle:{"margin-bottom":"24px"}})]:e._e(),2==e.generateImage?[t("div",{staticClass:"build-tips",staticStyle:{margin:"6px 0 5px"}},[e._v(" "+e._s(e.tips1)+" ")]),t("div",{staticClass:"build-tips-line",staticStyle:{"margin-bottom":"24px"}})]:e._e(),t("div",{staticClass:"flex justify-center"},[t("div",{staticClass:"build-content-img"},[e.GenerateImageUrl?t("img",{class:{"build-content-img-1":!e.isWidgetCover},attrs:{src:e.GenerateImageUrl}}):e._e(),e.isWidgetCover?e._e():t("img",{staticClass:"open-mask",attrs:{src:e.crop0_1}})])]),1==e.generateImage?[t("div",{staticClass:"build-tip2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.tips2,expression:"tips2"}],attrs:{placeholder:e.compuCoverInfo&&e.compuCoverInfo.packetName},domProps:{value:e.tips2},on:{input:function(t){t.target.composing||(e.tips2=t.target.value)}}}),t("span",{class:e.tips2.length>8?"red":""},[e._v(e._s(e.tips2.length)+"/8")])])]:e._e(),2==e.generateImage?[t("div",{staticClass:"build-tip2-build"},[t("span",[e._v(e._s(e.tips2))])])]:e._e()],2),t("img",{staticClass:"build-content-b",attrs:{src:"https://res.wx.qq.com/a/fed_upload/1f5a9780-dfbf-438f-8bb9-c137e03509ab/3X.png"}}),t("div",{staticClass:"qr-wrap"},[e.GenerateImageQrUrl?t("img",{staticClass:"qr",attrs:{src:e.GenerateImageQrUrl.replace("http://","https://")}}):e._e(),t("p",{staticClass:"qr-tips"},[e._v("长按领取")])])])]),t("div",{staticClass:"footer"},[1===e.generateImage?[t("mp-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.preventDefault(),e.generateImageData.apply(null,arguments)}}},[e._v("编辑完成")])]:e._e(),2===e.generateImage?[t("mp-button",{staticClass:"cancel",attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.generateImage=1}}},[e._v("重新编辑")]),t("mp-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.preventDefault(),e.generateImageData.apply(null,arguments)}}},[e._v("下载")])]:e._e()],2)]],2)},a=[],r=i(80543),o=i(81448),s=(i(77601),i(73210),i(20144)),c=i(46926),l=i.n(c),u=i(34225),d=i(72909),p=i(18205),v=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),m=s.ZP.extend({components:{},props:{value:Boolean,cover:Object,order:Object},data:function(){return{crop0_1:p.is.crop0_1,safari:v,GenerateImageUrl:"",GenerateImageQrUrl:"",generateImage:0,tips1:"",tipsPlaceholder:"祝你新春快乐，万事如意！",tips2:"",posterLoading:!1,coverInfo:null}},computed:{isWidgetCover:function(){var e,t,i;return!(null===(e=this.compuCoverInfo)||void 0===e||null===(t=e.packetMaterial)||void 0===t||null===(i=t.syntheticWidgetImage)||void 0===i||!i.mediaUrl)},compuCoverInfo:function(){return this.coverInfo||this.cover}},methods:{handleVisibleChange:function(e){e?this.generatePoster():(this.coverInfo=null,this.$emit("input",!1))},getCoverInfo:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.yQ.getCover(e.order.orderId);case 2:i=t.sent,0===(null===i||void 0===i?void 0:i.baseResponse.ret)&&(e.coverInfo=i.order);case 4:case"end":return t.stop()}}),t)})))()},generatePoster:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,p,v;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.posterLoading=!0,e.cover){t.next=4;break}return t.next=4,e.getCoverInfo();case 4:return s=e.order,c=s.objectId?s.objectId:null===s||void 0===s||null===(i=s.childObject[0])||void 0===i?void 0:i.objectId,e.tips1="",e.tips2="",l=e.compuCoverInfo,p=(e.isWidgetCover?null===(n=l.packetMaterial)||void 0===n||null===(a=n.openImage)||void 0===a?void 0:a.mediaUrl:null===(o=l.packetMaterial.sourceImage)||void 0===o?void 0:o.mediaUrl)||"",p=p.replace("http://","https://"),t.prev=11,t.next=14,(0,d.bi)(p,0,0,"image/png","生成海报");case 14:return e.GenerateImageUrl=t.sent,t.next=17,u.yQ.coverGetShareMsgQrCode(l.orderId,c);case 17:v=t.sent,v&&0===v.baseResponse.ret&&(e.GenerateImageQrUrl=v.image),e.generateImage=1;case 20:return t.prev=20,e.posterLoading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[11,,20,23]])})))()},generateImageData:function(){var e=this,t=("-"!=this.order.receiveBeginTimeText?this.order.receiveBeginTimeText.replace(/\//gi,"_").replace(" ","_").replace(":","_"):this.order.genTime.replace(/\//gi,"_").replace(" ","_").replace(":","_"))+"_"+this.order.genTypeText.replace("二维码","二维码海报")+".png";if(1==this.generateImage)if(this.tips1.length>12||this.tips2.length>8)this.errorTip("字数超过限制");else{var i;if(0==this.tips1.trim().length&&(this.tips1=this.tipsPlaceholder),0==this.tips2.trim().length)this.tips2=null===(i=this.compuCoverInfo)||void 0===i?void 0:i.packetName;this.generateImage=2}else{var n=3,a=this.$refs.buildDialog;l().toPng(a,{height:a.offsetHeight*n,style:{transform:"scale(".concat(n,")"),"transform-origin":"top left","font-weight":"300","font-size":"8px","border-radius ":"5px",position:"absolute",left:0,top:0,margin:0},width:a.offsetWidth*n}).then((function(i){var n=document.createElement("a");n.download=t,n.innerText=t,n.href=i,n.click(),e.$tipsSuc("请在浏览器文件下载管理中查看"),window.setTimeout((function(){return e.$tipsHide()}),3e3)}))}}}}),f=m,h=i(1001),g=(0,h.Z)(f,n,a,!1,null,"5ea531a5",null),y=g.exports},37068:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return!e.hasRecallPermission||e.isCanRecall||e.disabledRecall||1===e.order.heatStatus||!e.isDetail&&!e.order.childObject.length?t("mp-popover",{staticClass:"popover-auto-width",attrs:{position:"up-right",trigger:"click"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticStyle:{display:"flex"}},[t("mp-icon",{attrs:{icon:"dot_3_regular",width:16,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[e.hasRecallPermission?e.isCanRecall?t("mp-popover",{attrs:{title:"回收剩余未领取的红包封面",value:e.curRefundVisible===e.order.key},on:{hide:function(t){e.curRefundVisible=-1},show:function(t){e.curRefundVisible=e.order.key}},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"recall-btn"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"content"},[t("div",{staticClass:"text"},[e._v("回收后已发放的未领取封面的材料将失效，确定要回收吗？")])])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"recall-footer"},[t("mp-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){e.curRefundVisible=-1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",size:"mini",loading:e.isLoading},on:{click:e.recall}},[e._v("回收")])],1)]},proxy:!0}],null,!1,1399814032)}):e.disabledRecall?t("a",{staticClass:"recall-btn disabled"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])]):e._e():[3!==e.order.status||e.isPayInfoDisabled?e.order.status>3?t("a",{staticClass:"recall-btn disabled"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])]):e._e():t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:"340"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无回收封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticClass:"recall-btn"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])])]},proxy:!0}],null,!1,3824377339)})],1===e.order.heatStatus?t("mp-popover",{attrs:{position:"up-right",type:"msg",title:"停止推广封面",trigger:"click",width:420},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",[e._v("停止推广")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticStyle:{"text-align":"center","line-height":"1.4",color:"rgba(0, 0, 0, 0.5)"}},[e._v("停止推广后，封面将停止通过「裂变」及「封面专区」发放")])]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{attrs:{size:"mini",type:"default"},on:{click:function(t){e.confirmStopHeat=!1}}},[e._v("取消")]),t("mp-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.confirmStopHeat=!1,e.show=!1,e.$emit("stopHeat",e.order)}}},[e._v(" 停止 ")])]},proxy:!0}],null,!1,2509894153),model:{value:e.confirmStopHeat,callback:function(t){e.confirmStopHeat=t},expression:"confirmStopHeat"}}):e._e(),e.isDetail||e.order.childObject.length?e._e():t("div",{on:{click:function(t){return e.$emit("goDetail",e.order)}}},[t("a",[e._v("所属订单详情")])])]},proxy:!0}],null,!1,542677378),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}):e._e()},a=[],r=i(80543),o=i(81448),s=(i(9653),i(41539),i(26699),i(32023),i(54747),i(57658),i(20144)),c=i(34225),l=i(57582),u=i(40628),d=new c.ZP,p=s.ZP.extend({components:{},props:{cover:{type:Object},payInfoStatus:{type:Number},order:{type:Object},mergeDetailList:{type:Array,default:function(){return[]}},isDetail:{type:Boolean,default:!1}},data:function(){return{ReceiveObjectMergeStatus:u.lv,curRefundVisible:-1,isLoading:!1,hasRecallPermission:!0,confirmStopHeat:!1,show:!1}},computed:{serverNowTime:function(){return l.l1.serverNowTime},disabledRecall:function(){return this.recallNum<=0||this.order.mergeStatus>2||this.order.status>3},isCanRecall:function(){return!this.disabledRecall&&(3===this.order.status||this.order.mergeStatus===u.lv.Success)&&!this.isPayInfoDisabled},isPayInfoDisabled:function(){return this.payInfoStatus>6},isMergeObjectRecalled:function(){return!!this.mergeDetailList.length&&this.mergeDetailList.some((function(e){return[u.ST.Recalling,u.ST.Recalled].includes(e.status)}))},recallNum:function(){var e=this;if(this.mergeDetailList.length){var t=0,i=0;return this.mergeDetailList.forEach((function(n){var a=n.referTransactionExpiretime<e.serverNowTime;t+=a?0:n.totalGenCount,i+=n.totalReceiveCount})),t-i}return this.order.totalGenCount-this.order.totalReceiveCount}},mounted:function(){1!=l.U6.user.isSecondary||2&l.U6.user.managerFlag||(this.hasRecallPermission=!1)},methods:{toadmin:function(){this.$router.push({name:"administrator"})},recallSuccess:function(){var e=this;this.$tipsSuc("回收成功"),setTimeout((function(){e.$emit("refreshCover")}),1e3),document.documentElement.click(),window.setTimeout((function(){return e.$tipsHide()}),1500)},recall:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoading=!0,t.prev=1,!e.order.mergeId){t.next=9;break}return t.next=5,d.recall(e.cover.orderId,"",e.order.mergeId);case 5:i=t.sent,0===(null===i||void 0===i?void 0:i.baseResponse.ret)?e.recallSuccess():e.errorTip("回收失败，请重试"),t.next=13;break;case 9:return t.next=11,d.recall(e.cover.orderId,e.order.objectId);case 11:n=t.sent,n&&0===n.baseResponse.ret?e.recallSuccess():e.errorTip("回收失败，请重试");case 13:return t.prev=13,e.isLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,,13,16]])})))()}}}),v=p,m=i(1001),f=(0,m.Z)(v,n,a,!1,null,"3c8ffdd2",null),h=f.exports},75062:function(e,t,i){"use strict";i.d(t,{Z:function(){return f}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"refund-dialog",attrs:{value:e.value,width:732},on:{"visible-change":e.handleVisibleChange}},[t("div",{staticClass:"qr-title"},[e._v("微信扫码赠送给朋友")]),e.translateQrLoading?t("div",{staticClass:"refund-loadding-wrapper content"},[t("div",{staticClass:"weui-desktop-loading"})]):t("div",{staticClass:"content"},[t("div",{staticClass:"refund-content_wrapper"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,status:e.qrcodeStatus,failText:"扫码登录失败，请重新扫码登录"}}),t("div",{staticClass:"qr-leavel"},[e._v("链接剩余可赠送： "+e._s(e.totalGenCount-e.totalReceiveCount)+" / "+e._s(e.totalGenCount)+" 个")])],1)])])},a=[],r=i(80543),o=i(81448),s=(i(57327),i(41539),i(54747),i(46074)),c=i(34225),l=i(57582),u=i(20144),d=u.ZP.extend({components:{Qrcode:s.Z},props:{value:Boolean,cover:Object,order:Object},data:function(){return{showQrDialog:!1,translateQrLoading:!1,qrcodeUrl:"",totalGenCount:0,totalReceiveCount:0,qrcodeStatus:s.R.normal}},computed:{serverNowTime:function(){return l.l1.serverNowTime}},methods:{handleVisibleChange:function(e){e?this.generateQrcode():this.$emit("input",!1)},generateQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,l,u,d,p;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.order,e.translateQrLoading=!0,n.childObject.length?(a=n.childObject.filter((function(t){return t.referTransactionExpiretime>e.serverNowTime})),o=0,l=0,a.forEach((function(e){o+=e.totalGenCount,l+=e.totalReceiveCount})),e.totalGenCount=o,e.totalReceiveCount=l):(e.totalGenCount=n.totalGenCount,e.totalReceiveCount=n.totalReceiveCount),u=n.objectId?n.objectId:null===n||void 0===n||null===(i=n.childObject[0])||void 0===i?void 0:i.objectId,d=e.cover,t.prev=5,t.next=8,c.yQ.coverGetShareMsgQrCode(d.orderId,u);case 8:p=t.sent,p&&0===p.baseResponse.ret&&(e.qrcodeStatus=s.R.normal,e.qrcodeUrl=p.image);case 10:return t.prev=10,e.translateQrLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[5,,10,13]])})))()}}}),p=d,v=i(1001),m=(0,v.Z)(p,n,a,!1,null,"2bddbdc6",null),f=m.exports},89983:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"brand",on:{click:e.gotoIndex}},[e._m(0),t("div",{staticClass:"name"},[e._v("微信红包封面开放平台")])])])},a=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"red-envelope"},[t("img",{attrs:{src:i(27442)}})])}],r=(i(74916),i(15306),i(20144)),o=r.ZP.extend({methods:{gotoIndex:function(){this.$router.replace({name:"index"})}}}),s=o,c=i(1001),l=(0,c.Z)(s,n,a,!1,null,"681024e2",null),u=l.exports},88299:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"error-wrap"},[t("div",{staticClass:"icon-error"}),t("div",{staticClass:"icon-tips"},[e._v("暂未达到个人认证条件")]),t("div",{staticClass:"qrscan-result"},e._l(e.errorRet,(function(i,n){return t("div",{key:n,staticClass:"q flex"},[t("div",{staticClass:"flex__item"},[e._v(e._s(i.condition))]),i.pass?t("div",{staticClass:"yes"}):t("div",{staticClass:"no"})])})),0),t("div",{staticClass:"download-link"},[e._t("default")],2)])},a=[],r=i(20144),o=r.ZP.extend({props:{errorRet:Array}}),s=o,c=i(1001),l=(0,c.Z)(s,n,a,!1,null,"005fdf1b",null),u=l.exports},69692:function(e,t,i){"use strict";i.r(t);var n=i(21797),a=i(19512),r=(i(83785),i(1001)),o=(0,r.Z)(a.Z,n.s,n.x,!1,null,"10793402",null);t["default"]=o.exports},50078:function(e,t,i){"use strict";i.d(t,{$_:function(){return de},A4:function(){return k},Ag:function(){return _},Ai:function(){return J},CD:function(){return o},Cu:function(){return x},DS:function(){return Te},DZ:function(){return he},Dd:function(){return we},Dl:function(){return xe},Dp:function(){return Z},EA:function(){return q},Fc:function(){return ke},Fz:function(){return c},G8:function(){return u},Gv:function(){return Ee},Hc:function(){return Fe},Ii:function(){return Be},Ik:function(){return Ie},J2:function(){return qe},Kk:function(){return ie},N5:function(){return v},Nn:function(){return V},OU:function(){return B},Og:function(){return Ne},PA:function(){return m},PB:function(){return j},PF:function(){return K},Q4:function(){return _e},Q6:function(){return Me},Qc:function(){return te},Rb:function(){return z},SF:function(){return Ue},TV:function(){return G},Ul:function(){return se},Vp:function(){return T},WK:function(){return w},YS:function(){return Le},Yc:function(){return De},Yq:function(){return $},ZD:function(){return ce},ZI:function(){return f},ZN:function(){return U},ZP:function(){return fe},_5:function(){return y},_l:function(){return Ce},a2:function(){return be},aU:function(){return X},c:function(){return H},el:function(){return I},er:function(){return L},f3:function(){return oe},fM:function(){return Y},gm:function(){return P},gq:function(){return Ae},hX:function(){return ue},hn:function(){return Se},iD:function(){return s},jH:function(){return ne},jc:function(){return pe},jl:function(){return R},k:function(){return Oe},kD:function(){return S},ky:function(){return l},lt:function(){return Re},n0:function(){return M},nr:function(){return ge},oS:function(){return ae},oY:function(){return ee},oi:function(){return g},q3:function(){return C},qZ:function(){return A},qk:function(){return D},s4:function(){return re},sG:function(){return ve},sJ:function(){return ye},t8:function(){return E},tm:function(){return me},uL:function(){return Ze},uj:function(){return F},wN:function(){return W},xR:function(){return r},xS:function(){return Q},xz:function(){return p},y1:function(){return h},yE:function(){return O},yF:function(){return N},yc:function(){return b},yx:function(){return le},z3:function(){return d},zh:function(){return Pe}});var n=!0,a=location.origin;n&&(a="/cgi-bin/mmcover-bin");var r="".concat(a,"/coverauth"),o="".concat(a,"/covergetselfinfo"),s="".concat(a,"/coverdetailpage"),c="".concat(a,"/covermainpage"),l="".concat(a,"/covergetstat"),u="".concat(a,"/coverheatreceiveobject"),d="".concat(a,"/covercancelheatreceiveobject"),p="".concat(a,"/covergetcoversettablist"),v="".concat(a,"/covergetloginqrcode"),m="".concat(a,"/covercheckloginqrcode"),f="".concat(a,"/covergetsignupqrcode"),h="".concat(a,"/coverchecksignupqrcode"),g="".concat(a,"/covercheckpersonsignupqrcode"),y="".concat(a,"/coversignup"),b="".concat(a,"/coverpersonsignup"),w="".concat(a,"/coverlogout"),C="".concat(a,"/coversendemail"),_="".concat(a,"/covercheckbizpersonsignupqrcode"),x="".concat(a,"/coverbizpersonsignup"),I="".concat(a,"/covercheckemotionpersonsignupqrcode"),k="".concat(a,"/coveremotionpersonsignup"),T="".concat(a,"/covergenreceiveobject"),S="".concat(a,"/covercombinegenreceiveobject"),A="".concat(a,"/covermodorder"),D="".concat(a,"/coveruploadimage"),P="".concat(a,"/coveruploadfile"),Z="".concat(a,"/coveruploadvideo"),U="".concat(a,"/covergenorderid"),E="".concat(a,"/covergenactionqrcode"),R="".concat(a,"/covercheckactionqrcode"),M="".concat(a,"/covergenpag"),L="".concat(a,"/coverbatchgenpag"),F="".concat(a,"/covergetgenpagresult"),N="".concat(a,"/covergetpreviewqrcode"),O="".concat(a,"/covercheckpreviewqrcode"),B="".concat(a,"/covergettempcoverreceiveobjectdetail"),q="".concat(a,"/covergetbizinfo"),Q="".concat(a,"/covergetfinderjumpinfo"),j="".concat(a,"/covergetfinderobjectlist"),H="".concat(a,"/covergetwxaqrcode"),G="".concat(a,"/covergetsharemsgqrcode"),W="".concat(a,"/covergetemotionjumpinfoqrcode"),z="".concat(a,"/covercheckemotionjumpinfoqrcode"),V="".concat(a,"/coverrecallreceiveobject"),J="".concat(a,"/coverpurchase"),K="".concat(a,"/coverpurchasewithad"),Y="".concat(a,"/covercancelpurchase"),X="".concat(a,"/covergetpurchasestatus"),$="".concat(a,"/coverrefund"),ee="".concat(a,"/covergetpaydetail"),te="".concat(a,"/covergetpayinfolist"),ie="".concat(a,"/coveractivereceiveobject"),ne="".concat(a,"/covergetinvoicedetail"),ae="".concat(a,"/covergetinvoiceinfolist"),re="".concat(a,"/covergetcaninvoiceorderlist"),oe="".concat(a,"/covergetcaninvoiceorderpayinfolist"),se="".concat(a,"/coverinvoicewithpayinfolist"),ce="".concat(a,"/coverinvoice"),le="".concat(a,"/coverdownloadinvoice"),ue="".concat(a,"/coverrecallinvoice"),de="".concat(a,"/covercancelinvoice"),pe="".concat(a,"/covergetreceiveobjectlist"),ve="".concat(a,"/covergetreceiveobjectdetail"),me="".concat(a,"/coverdownloadreceiveobject"),fe="".concat(a,"/coverdownloadmergeobject"),he="".concat(a,"/covergetmergedetail"),ge="".concat(a,"/covergetannouncementindex"),ye="".concat(a,"/covergetannouncementdetail"),be="".concat(a,"/coverdownloadfile"),we="".concat(a,"/coverdownloadnew"),Ce="".concat(a,"/coverkvreport"),_e="".concat(a,"/covergetmanagerpage"),xe="".concat(a,"/coveraddsecondarymanagersearch"),Ie="".concat(a,"/coveraddsecondarymanagerconfirm"),ke="".concat(a,"/coverrecallsecondarymanagerinvite"),Te="".concat(a,"/coverrecallupdatesecondarymanagerflagapply"),Se="".concat(a,"/coverremovesecondarymanager"),Ae="".concat(a,"/coverheartbeat"),De="".concat(a,"/coverupdatesecondarymanagerflag"),Pe="".concat(a,"/covergetquotaobjectlist"),Ze="".concat(a,"/covergetquotaobjectdetail"),Ue="".concat(a,"/covergetcanbuyorderlist"),Ee="".concat(a,"/coverpurchasewithquota"),Re="".concat(a,"/covergenquotaobject"),Me="".concat(a,"/covergetuploadauthkey"),Le="".concat(a,"/coverbatchgetremark"),Fe="".concat(a,"/covergetsingleremark"),Ne="".concat(a,"/coverchangeremark"),Oe="".concat(a,"/coverdeleteremark"),Be="".concat(a,"/coveraddremark"),qe="".concat(a,"/covergetinvoiceaddrlist")},2776:function(e,t,i){"use strict";i.d(t,{Cu:function(){return m},Eu:function(){return u},QV:function(){return d},_B:function(){return c},mj:function(){return l},n3:function(){return o},o0:function(){return s},rZ:function(){return v},yY:function(){return p}});var n,a=i(78255),r=i(40628),o="https://weixinredpacket.wxqcloud.qq.com",s="https://weixinredpacket.wxqcloud.qq.com/red2022/",c=".png,.jpg,.jpeg,.zip,.mp4",l={"-10008":"MP4格式需满足420yuv","-10009":"MP4格式需满足（H.264/AVC）","-12000":"视频帧率不可超过30fps","-12001":"素材时间太长","-12002":"素材不符合规范，请检查图片命名和图片尺寸","-12003":"素材上传失败，请稍后重试","-12004":"视频码率大于3000kbit/s","-12005":"视频像素宽高比非1:1","-12006":"压缩包中有非PNG格式文件，请检查"},u=(n={},(0,a.Z)(n,r.Je.Unknow,r.p0.UNKNOW),(0,a.Z)(n,r.Je.Mp4,r.p0.MP4),(0,a.Z)(n,r.Je.Zip,r.p0.ZIP),(0,a.Z)(n,r.Je.Video,r.p0.MP4),(0,a.Z)(n,r.Je.File,r.p0.ZIP),(0,a.Z)(n,r.Je.Gif,r.p0.GIF),(0,a.Z)(n,r.Je.Image,r.p0.JPEG),(0,a.Z)(n,r.Je.Mov,r.p0.MOV),(0,a.Z)(n,r.Je.Pag,r.p0.PAG),n),d=(r.Je.Pag,r.Je.Mp4,r.Je.Gif,r.Je.Mov,r.Je.Zip,72),p=24,v=24,m=["spring2024_biz","spring2024_emotion"]},60779:function(e,t,i){"use strict";i.a(e,(async function(e,t){try{i(66992),i(88674),i(19601),i(17727),i(68309),i(74916),i(77601),i(26699),i(32023),i(66337);var n=i(20144),a=i(15883),r=i(17925),o=i(57582),s=i(94657),c=i(50871),l=i(55643),u=i(98704),d=i(87142),p=i(97139),v=i(17252),m=i(79033),f=(i(73976),i(52117)),h=(i(47516),i(41757)),g=i(86731),y=(i(99221),i(25815),i(58045),i(29795),i(98271),i(15734),i(76589),i(80903)),b=i(17751),w=i(2776),C=e([g]);g=(C.then?(await C)():C)[0],h.g.initMerlinErrorReport("platform"),n.ZP.config.productionTip=!1,n.ZP.component(v.Z.name,v.Z),n.ZP.component(m.Z.name,m.Z),n.ZP.component(s.ZP.name,s.ZP),n.ZP.component(c.Z.name,c.Z),n.ZP.component(l.Z.name,l.Z),n.ZP.component(u.Z.name,u.Z),n.ZP.component(y.Z.name,y.Z),n.ZP.component(d.Z.name,d.Z),n.ZP.component(p.ZP.name,p.ZP),n.ZP.use(g.ZP),n.ZP.use(b.ZP,{lazyComponent:!0,filter:{webp:function(e,t){if(t.supportWebp){var i=e.src,n=/weixinredpacket.wxqcloud.qq.com/;n.test(i)&&(i.includes("&")?e.src+="&imageMogr2/format/webp":e.src+="?imageMogr2/format/webp")}}}}),n.ZP.prototype.genVersion=0,n.ZP.prototype.genAtmosphereVersion=0,n.ZP.prototype.$isAtmosphereUser=!1,n.ZP.prototype.errorTip=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=arguments.length>2?arguments[2]:void 0;this.$tipsErr(e),window.setTimeout((function(){t.$tipsHide(),"function"===typeof n&&n()}),i)},n.ZP.prototype.COS_ORIGIN=w.n3,n.ZP.prototype.defaultAvatar="https://res.wx.qq.com/t/fed_upload/e42d8041-7868-4a1b-aee8-ee9a8300af2e/defaultavatar.jpg",n.ZP.prototype.pageHost=window.location.host,n.ZP.prototype.designTemplateUrl="https://weixinredpacket.wxqcloud.qq.com/design_template/20230921/v1/%E7%BA%A2%E5%8C%85%E5%B0%81%E9%9D%A2%E8%AE%BE%E8%AE%A1%E6%A8%A1%E6%9D%BF.zip",new n.ZP({render:function(e){return e(a.Z)},router:r.Z,store:o.ZP,mounted:function(){(0,f.H)("pageview")}}).$mount("#app"),t()}catch(_){t(_)}}))},17925:function(e,t,i){"use strict";i.d(t,{Z:function(){return $m}});var n,a,r=i(80543),o=i(81448),s=(i(41539),i(78783),i(33948),i(68309),i(69826),i(20144)),c=i(78345),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-pay-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"购买成功",confirmText:"去发放",showEmotionRainEntry:e.showEmotionRainEntry},on:{confirm:e.gotoCoverDetail},scopedSlots:e._u([{key:"desc",fn:function(){return["time"===e.type?t("div",[e._v(" "+e._s("已成功购买".concat(e.count,"小时的发放时长，可前往查看红包封面详情。"))+" ")]):t("div",{staticClass:"desc"},[t("p",[e._v("已成功购买"+e._s(e.count)+"个红包封面，可直接前往红包封面详情页生成发放材料，")]),t("p",[e._v("或使用微信小程序"),t("MiniappPopover"),t("span",[e._v("发放封面。")])],1)])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"step-block"},[t("NewStep",{attrs:{steps:e.steps,curStep:2}})],1)]},proxy:!0}])})],1)])},u=[],d=(i(74916),i(77601),i(64765),i(57658),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"success-wrap"},[t("div",{staticClass:"icon"},[t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:60,height:60}})],1),t("div",{staticClass:"title"},[e._v(e._s(e.title))]),e.desc?t("div",{staticClass:"desc",domProps:{innerHTML:e._s(e.desc)}}):e._t("desc",(function(){return[e._v(e._s(e.desc))]})),e._t("body"),e.showEmotionRainEntry?[e.isOrganization?t("p",{staticClass:"join-emotion-text"},[e._v("此款红包封面已符合微信表情雨活动参与条件，可以在发放红包封面时选择表情雨发放方式。")]):e._e(),e.isPersonal?t("p",{staticClass:"join-emotion-text"},[e._v(" 此款红包封面已参与微信表情雨活动，将有机会出现在福袋中，被更多的用户领取。相关数据可以在活动结束后查看。 ")]):e._e()]:e._e(),e.showBizInfo?[t("img",{staticClass:"biz-qr",attrs:{src:i(18337)}}),t("div",{staticClass:"biz-text"},[e._v("关注微信公众号")]),t("div",{staticClass:"biz-text"},[e._v("了解平台最新动态")])]:e._e(),e.confirmText?t("mp-button",{staticClass:"button success-btn",on:{click:e.confirm}},[e._v(e._s(e.confirmText))]):e._e()],2)}),p=[],v=i(56980),m=i(57582),f=s.ZP.extend({name:"SuccessResult",props:{confirmText:String,desc:String,title:String,showBizInfo:{type:Boolean,default:!1},showEmotionRainEntry:{type:Boolean,default:!1}},computed:{user:function(){return m.U6.user},isOrganization:function(){var e=this;return e.user.principalType===v.eZ.organization},isPersonal:function(){var e=this;return e.user.principalType===v.eZ.person}},methods:{confirm:function(){this.$emit("confirm")}}}),h=f,g=i(1001),y=(0,g.Z)(h,d,p,!1,null,"d375a4c6",null),b=y.exports,w=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{attrs:{width:152,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"qrcode-content"},[t("img",{staticClass:"qrcode-img",attrs:{src:i(21637)}}),t("div",{staticClass:"qrcode-name"},[e._v("微信红包封面助手")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticStyle:{"font-size":"16px"}},[e._v("「微信红包封面助手」")])]},proxy:!0}])})},C=[],_=s.ZP.extend({components:{},data:function(){return{}},computed:{},methods:{}}),x=_,I=(0,g.Z)(x,w,C,!1,null,"5267e3f4",null),k=I.exports,T=i(69692),S=s.ZP.extend({name:"CoverPaySuccess",data:function(){return{count:"",type:"",steps:[{label:"定制封面"},{label:"封面审核"},{label:"付款下单"},{label:"发放领取"}]}},computed:{showEmotionRainEntry:function(){return/joinEmotionRain=1/.test(location.search)||"1"===this.$route.query.joinEmotionRain}},mounted:function(){this.count=this.$route.query.count,this.type=this.$route.query.type},components:{SuccessResult:b,MiniappPopover:k,NewStep:T["default"]},methods:{gotoCoverDetail:function(){var e=this.$route.query.tid,t=this.$route.query.cid;this.$router.push({name:"detail",query:{id:t}}),this.$router.push({name:"order",query:{tid:e}})}}}),A=S,D=(0,g.Z)(A,l,u,!1,null,"17f4d0bc",null),P=D.exports,Z=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-submit-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"已提交",confirmText:"封面详情"},on:{confirm:e.gotoCoverDetail},scopedSlots:e._u([{key:"desc",fn:function(){return[t("div",{staticClass:"desc-wrapper"},[t("div",{staticClass:"desc"},[e._v(" 审核结果将在3个工作日内通过微信公众号"),t("mp-popover",{attrs:{width:150,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"qrcode-content"},[t("img",{staticClass:"qrcode-img",attrs:{src:i(96611)}}),t("div",{staticClass:"qrcode-name"},[e._v("微信红包封面")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticStyle:{"font-size":"16px"}},[e._v("「微信红包封面」")])]},proxy:!0}])}),e._v(" 和邮件进行通知。 ")],1),t("div",{staticClass:"desc"},[e._v(" 你也可以通过微信小程序 "),t("MiniappPopover"),e._v(" 实时了解封面状态。 ")],1)])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"step-block"},[t("NewStep",{attrs:{steps:e.steps,curStep:1}})],1)]},proxy:!0}])})],1)])},U=[],E=s.ZP.extend({name:"CoverSubmitSuccess",data:function(){return{steps:[{label:"定制封面"},{label:"封面审核"},{label:"付款下单"},{label:"发放领取"}]}},components:{SuccessResult:b,NewStep:T["default"],MiniappPopover:k},methods:{gotoCoverDetail:function(){var e=this.$route.query.cid;this.$router.push({name:"detail",query:{id:e}})}}}),R=E,M=(0,g.Z)(R,Z,U,!1,null,"4f313a20",null),L=M.exports,F=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-wrap"},[0==e.alreadyExists?["scan-qrcode"===e.curProgress?[t("div",{staticClass:"login-card"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:"使用微信扫码登录",status:e.qrcodeStatus,failText:e.failText,failTip:e.loginScanFailReason},on:{reload:e.loadAndCheckQrcode}})],1)]:"choose-identity"===e.curProgress?t("div",{staticClass:"choose-identity"},[t("div",{staticClass:"title"},[e._v("选择登录账号")]),t("mp-radio-group",{staticClass:"account-list-wrap",model:{value:e.choosenAuthorId,callback:function(t){e.choosenAuthorId=t},expression:"choosenAuthorId"}},[t("div",{staticClass:"account-list"},e._l(e.allInfo,(function(i,n){return t("div",{key:n,staticClass:"account-item",class:e.choosenAuthorId==i.authorId?"choose-active":"",on:{click:function(t){return e.setAuthorId(i.authorId)}}},[t("img",{class:"视频号"!=i.typeChinese?"no-radius":"",attrs:{src:i.headImgUrl}}),t("div",{staticClass:"flex-item"},[t("div",{staticClass:"name"},[e._v(e._s(i.nickname+"（"+i.typeChinese+"）"))]),t("div",{staticClass:"status"},[e._v(e._s(0==i.isSecondary?"管理员":"运营者"))])]),t("mp-radio",{attrs:{value:i.authorId}})],1)})),0)]),t("div",{staticClass:"options"},[t("mp-button",{staticClass:"button",attrs:{type:"primary",disabled:!e.choosenAuthorId,loading:e.loading},on:{click:e.login}},[e._v("登录")]),t("a",{staticClass:"reload",on:{click:e.reload}},[e._v("重新扫码")])],1)],1):e._e(),"agree-to-terms"===e.curProgress?[t("term-display",{attrs:{title:"“微信红包封面”定制功能使用条款","hide-brand":"hide-brand"},scopedSlots:e._u([{key:"content",fn:function(){return[t("use-term")]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{attrs:{loading:e.cancelTermLoading},on:{click:e.cancelTerm}},[e._v("取消")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary",loading:e.confirmTermLoading},on:{click:e.confirmTerm}},[e._v("同意")])]},proxy:!0}],null,!1,187860851)})]:e._e()]:[t("div",{staticClass:"choose-identity tc"},[t("div",{staticClass:"icon-tips"}),t("div",{staticClass:"login-tips"},[e._v("以下微信号已登录，不支持多人同时使用")]),t("img",{staticClass:"login-img",attrs:{src:e.headImgUrl||e.defaultAvatar}}),t("div",{staticClass:"login-name"},[e._v(e._s(e.nickname))]),t("div",{staticClass:"options"},[t("a",{staticClass:"reload",on:{click:e.reload}},[e._v("重新扫码")])])])]],2)},N=[],O=(i(92222),i(54747),i(46074)),B=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"term-display-wrap"},[e.hideBrand?e._e():t("div",{staticClass:"brand",on:{click:e.gotoIndex}},[e._m(0),t("div",{staticClass:"name"},[e._v("微信红包封面开放平台")])]),t("div",{staticClass:"title"},[e._v(e._s(e.title))]),t("div",{staticClass:"rule-list"},[t("div",{staticClass:"rule-item"},[t("div",{staticClass:"rule-third-list"},[e._t("content")],2)])]),t("div",{staticClass:"options"},[e._t("bar")],2)])},q=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"red-envelope"},[t("img",{attrs:{src:i(27442)}})])}],Q=(i(15306),s.ZP.extend({props:{title:{type:String},hideBrand:{type:Boolean}},methods:{gotoIndex:function(){this.$router.replace({name:"index"})}}})),j=Q,H=(0,g.Z)(j,B,q,!1,null,"fa32644c",null),G=H.exports,W=i(68724),z=i(85880),V=new z.ZP,J=s.ZP.extend({name:"Login",data:function(){return{qrcodeStatus:O.R.normal,loginScanFailReason:"",curProgress:"scan-qrcode",choosenAuthorId:"",checkInterval:0,allInfo:[],alreadyExists:!1,headImgUrl:"",nickname:"",failText:"扫码登录失败，请重新扫码登录",loading:!1,maxAgreementVersion:0,cancelTermLoading:!1,confirmTermLoading:!1}},computed:{wxInfo:function(){return m.U6.loginData.wxInfo||[]},bizInfo:function(){return m.U6.loginData.bizInfo||[]},finderInfo:function(){return m.U6.loginData.finderInfo||[]},qrcodeUrl:function(){return m.U6.loginData.image},isShowDesc:function(){var e=this.qrcodeStatus;return e===O.R.normal||e===O.R.success},isShowSignUpBtn:function(){var e=this.qrcodeStatus;return e!==O.R.expired}},components:{Qrcode:O.Z,TermDisplay:G,UseTerm:W.Z},mounted:function(){this.checkRelogin(),this.loadAndCheckQrcode()},methods:{checkRelogin:function(){var e=this.$route.query.relogin;if(e){var t=this;t.$tipsErr("登录状态已过期，请重新登录"),window.setTimeout((function(){return t.$tipsHide()}),3e3)}},signUp:function(){var e=window.location,t=e.origin,i=e.pathname,n=e.search,a="".concat(t).concat(i).concat(n,"#/signup/sign_should_know");window.open(a,"_blank")},login:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,m.U6.login(e.choosenAuthorId);case 4:if(i=t.sent,!i||0!==i.baseResponse.ret){t.next=17;break}return t.next=8,m.U6.getUserInfo();case 8:if(n=t.sent,-23!==(null===n||void 0===n?void 0:n.baseResponse.ret)){t.next=13;break}return e.curProgress="agree-to-terms",e.maxAgreementVersion=n.maxAgreementVersion,t.abrupt("return");case 13:V.baseActionReport({actionType:"15",authorId:m.U6.user.authorId}),e.$router.push({name:"covers",params:{fromLogin:"1"}}),t.next=18;break;case 17:i&&1===i.baseResponse.ret?(e.alreadyExists=!0,e.headImgUrl=i.headImgUrl,e.nickname=i.nickname):e.errorTip("登录异常，请稍后重试");case 18:return t.prev=18,e.loading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,,18,21]])})))()},setAuthorId:function(e){this.choosenAuthorId=e},reload:function(){clearInterval(this.checkInterval),this.curProgress="scan-qrcode",this.alreadyExists=!1,this.loadAndCheckQrcode()},checkLoginResult:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.U6.checkLoginQrcode();case 2:if(i=t.sent,i&&1!==i.baseResponse.ret){t.next=5;break}return t.abrupt("return");case 5:2===i.baseResponse.ret?(e.qrcodeStatus=O.R.fail,e.failText="该微信号无可登录的平台账号，请<a href='https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index#/signup/sign_should_know'>注册</a>",e.loginScanFailReason="1.注册账号的企业公众号，需要企业认证在有效期内。</br>2.若公众号更换管理员，需新管理员先登录红包封面平台后其他运营者才可以登录。"):0===i.baseResponse.ret?(e.qrcodeStatus=O.R.success,window.setTimeout((0,o.Z)((0,r.Z)().mark((function t(){var n,a,o,s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=i.bizInfo||[],a=i.finderInfo||[],o=i.wxInfo||[],n.length+a.length+o.length!==1){t.next=11;break}return 1==n.length&&(e.choosenAuthorId=n[0].authorId),1==a.length&&(e.choosenAuthorId=a[0].authorId),1==o.length&&(e.choosenAuthorId=o[0].authorId),t.next=9,e.login();case 9:t.next=18;break;case 11:s=[],e,o&&o.length>0&&o.forEach((function(e){e.typeChinese="内部号",s.push(e)})),n&&n.length>0&&n.forEach((function(e){e.typeChinese="公众号",s.push(e)})),a&&a.length>0&&a.forEach((function(e){e.typeChinese="视频号",s.push(e)})),e.allInfo=s,e.curProgress="choose-identity";case 18:case"end":return t.stop()}}),t)}))),1500)):e.qrcodeStatus=O.R.expired,clearInterval(e.checkInterval);case 7:case"end":return t.stop()}}),t)})))()},loadAndCheckQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.qrcodeStatus=O.R.normal,t.next=3,m.U6.getLoginQrcode();case 3:e.checkInterval=window.setInterval((function(){return e.checkLoginResult()}),1e3);case 4:case"end":return t.stop()}}),t)})))()},confirmTerm:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.confirmTermLoading=!0,t.prev=1,t.next=4,m.U6.getUserInfo({agreement_version:e.maxAgreementVersion});case 4:i=t.sent,0===(null===i||void 0===i?void 0:i.baseResponse.ret)?e.$router.push({name:"covers"}):e.errorTip("登录异常，请稍后重试");case 6:return t.prev=6,e.confirmTermLoading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})))()},cancelTerm:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cancelTermLoading=!0,t.prev=1,t.next=4,m.U6.logout();case 4:return t.prev=4,e.cancelTermLoading=!1,t.finish(4);case 7:if(!(e.allInfo.length>1)){t.next=10;break}return e.curProgress="choose-identity",t.abrupt("return");case 10:e.curProgress="scan-qrcode",e.reload();case 12:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()}},beforeDestroy:function(){clearInterval(this.checkInterval)}}),K=J,Y=(0,g.Z)(K,F,N,!1,null,"06530e01",null),X=Y.exports,$=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-submit-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"退款申请成功",desc:"平台已受理退款申请，将在7个工作日内进行处理。请及时登录平台关注退款进度。",confirmText:"了解详情"},on:{confirm:e.gotoCoverDetail}})],1)])},ee=[],te=s.ZP.extend({name:"CoverSubmitSuccess",components:{SuccessResult:b},methods:{gotoCoverDetail:function(){var e=this.$route.query.cid;this.$router.push({name:"detail",query:{id:e}})}}}),ie=te,ne=(0,g.Z)(ie,$,ee,!1,null,"e679dc38",null),ae=ne.exports,re=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"title"},[e._v("选择购买类型")]),t("div",{staticClass:"pay-type-list"},[t("div",{staticClass:"pay-type-item",class:{active:1===e.type}},[t("div",{staticClass:"item-content",on:{click:function(t){e.type=1}}},[t("svg-icon",{staticClass:"item-icon",attrs:{name:"pay_type_count"}}),t("div",{staticClass:"item-title"},[e._v("按数量购买")]),t("div",{staticClass:"item-desc"},[e._v("适合在六个月有效期内阶段性地发放红包封面。")])],1)]),t("div",{staticClass:"pay-type-item",class:{active:2===e.type}},[t("div",{staticClass:"item-content",on:{click:function(t){e.type=2}}},[t("svg-icon",{staticClass:"item-icon",attrs:{name:"pay_type_time"}}),t("div",{staticClass:"item-title"},[e._v("按发放时长购买")]),t("div",{staticClass:"item-desc"},[e._v("适合在某一时间段内集中且大量地发放红包封面，如新品推广、活动直播、演唱会等场景。")])],1),t("div",{staticClass:"choosen-mask"},[e._v("限时活动")])])]),t("div",{staticClass:"next-step"},[t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.nextStep.apply(null,arguments)}}},[e._v("下一步")])],1),t("mp-dialog",{staticClass:"purchase-dialog",attrs:{title:"购买须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showPurchaseDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handlePurchase.apply(null,arguments)}}},[e._v("下一步")])],1)]},proxy:!0}]),model:{value:e.showPurchaseDialog,callback:function(t){e.showPurchaseDialog=t},expression:"showPurchaseDialog"}},[1===e.type?t("div",{staticClass:"content"},[t("div",{staticClass:"normal-text"},[e._v("1. 红包封面按个数收费，1元/个。若购买N个红包封面，则N个微信用户可领取并使用。")]),t("div",{staticClass:"normal-text"},[e._v("2. 定制方购买后，封面发放有效期为6个月。过期后，剩余封面数量将清零。")]),t("div",{staticClass:"normal-text"},[e._v("3. 微信用户领取后，可在3个月内无限次使用该封面。")])]):e._e(),2===e.type?t("div",{staticClass:"content"},[t("div",{staticClass:"normal-text"},[e._v("1. 红包封面按照发放时长收费，100,000元/小时，对应最多可领取50,000个封面，购买后不支持退款。")]),t("div",{staticClass:"normal-text"},[e._v("2. 定制方购买后，须在6个月内全部发完，过期后无法发放给用户，且未发放的部分不支持退款。")]),t("div",{staticClass:"normal-text"},[e._v("3. 用户领取后，可在3个月内无限次使用该封面，过期后无法使用。")])]):e._e()])],1)},oe=[],se=s.ZP.extend({name:"ChoosePayType",data:function(){return{type:1,showPurchaseDialog:!1}},computed:{cover:function(){return m.l1.cover}},methods:{nextStep:function(){this.showPurchaseDialog=!0},handlePurchase:function(){var e=this,t=1===e.type?"count":"time";e.$router.push({name:"pay",query:{type:t}})}}}),ce=se,le=(0,g.Z)(ce,re,oe,!1,null,"0b9c36d2",null),ue=le.exports,de=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-list"},[t("div",{staticClass:"main-card audit-wrap"},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.title))]),e.isFrozen?t("mp-button",{attrs:{type:"default"},on:{click:e.wantSomeBattle}},[e._v("发起申诉")]):e._e()],1),t("a-table",{staticClass:"audit-table",attrs:{columns:e.columns,dataSource:e.list||[],pagination:!1,locale:{emptyText:"暂无记录"}}})],1)])},pe=[],ve=i(63442),me=(i(21249),i(40628)),fe=s.ZP.extend({name:"CoverAuditInfo",data:function(){return{columns:[{dataIndex:"reason",key:"reason",title:"违规原因"}],list:[],status:0}},mounted:function(){if(this.$route.params.status){var e=this.$route.params.status,t=this.$route.params.auditResult,i=t.itemList.map((function(e,t){var i=(0,ve.Z)({key:t},e);return i}));this.status=e,this.list=i}},computed:{isFrozen:function(){var e=this;return e.status===me.Rf.Frozen},title:function(){return this.status===me.Rf.Rejected?"审核驳回原因":this.status===me.Rf.Frozen?"违规被下架原因":""}},methods:{wantSomeBattle:function(){var e=this;return e.$router.push({name:"doc",query:{page:"right",index:"3"}})}}}),he=fe,ge=(0,g.Z)(he,de,pe,!1,null,"21207004",null),ye=ge.exports,be=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-detail-wrap"},[e.isPageReady&&e.cover.orderId?[t("CoverDetailHeader",{attrs:{cover:e.cover,hasWaitingPayInfo:!!e.waitingPayInfo,leftValidOrderNum:e.leftValidOrderNum,isPrimaryBtnLoading:e.isPrimaryBtnLoading},on:{btnClick:e.handleHeaderBtnClick,checkAdditionalInfo:e.checkAdditionalInfo},scopedSlots:e._u([{key:"tip",fn:function(){return[e.isPublished?t("div",{staticClass:"tip left-expired-time"},[0===e.validPayInfoList.length?t("span",[e._v("该订单的红包封面已被领完")]):1===e.validPayInfoList.length?t("span",[e._v("有效期剩余"+e._s(e.maxExpiredDays)+"天")]):0===e.maxExpiredDays?t("span",[e._v("该订单已超过发放有效期，相应订单的红包封面个数已被清零，微信用户无法领取")]):t("span",[e._v("有效期最多剩余"+e._s(e.maxExpiredDays)+"天，最少剩余"+e._s(e.minExpiredDays)+"天")]),e.validPayInfoList.length?t("mp-popover",{attrs:{position:"up-right",width:460,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"expired-info-wrap"},[e._l(e.validPayInfoList,(function(i,n){return t("div",{key:n,staticClass:"row"},[t("span",[e._v(e._s(i.date))]),t("span",[e._v("订单：发放有效期")]),t("span",[e._v(e._s(i.expired)+" 24:00，")]),t("span",[e._v("剩余")]),t("span",{staticClass:"primary-color"},[e._v(e._s(i.leftDays)+"天")])])})),t("div",{staticClass:"expired-popover-footer",attrs:{type:"flex",align:"middle"}},[t("mp-icon",{attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300",width:40,height:40}}),t("div",{staticClass:"footer"},[t("span",{staticStyle:{"margin-left":"-4px"}},[e._v("发放有效期过后，相应订单的红包封面个数将被")]),t("span",{staticClass:"strong"},[e._v("清零")]),t("span",[e._v("，微信用户")]),t("span",{staticClass:"strong"},[e._v("无法领取")]),t("span",[e._v("。建议在有效期内发放完毕。")])])],1)],2)]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,2177914113)}):e._e()],1):e._e()]},proxy:!0}],null,!1,1634339879)}),e.isShowStatistics?t("CoverDetailStatistics",{staticClass:"mt-5",attrs:{statistics:e.cover.orderStat,jumpStat:e.cover.jumpStat||{},cid:e.cover.orderId}}):e._e(),e.isShowPayInfoList?t("CoverOrderList",{staticClass:"mt-5",attrs:{cover:e.cover}}):e._e(),t("CoverDetailInfo",{staticClass:"mt-5",attrs:{cover:e.cover},on:{btnClick:e.handleHeaderBtnClick}})]:[e._m(0)],t("mp-dialog",{staticClass:"refund-dialog",attrs:{title:"申请退款",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showRefundDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handleRefund.apply(null,arguments)}}},[e._v("申请退款")])],1)]},proxy:!0}]),model:{value:e.showRefundDialog,callback:function(t){e.showRefundDialog=t},expression:"showRefundDialog"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"main-text"},[t("span",[e._v("该封面当前剩余未领取的数量为")]),t("span",{staticClass:"primary-color"},[e._v(e._s(e.cover.canRefundCount))]),t("span",[e._v("个，可退金额为：")])]),t("div",{staticClass:"amount"},[e._v("￥"+e._s(e.canRefundAmount))])])]),t("mp-dialog",{staticClass:"purchase-dialog",attrs:{title:"购买须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showPurchaseDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handlePurchase.apply(null,arguments)}}},[e._v("下一步")])],1)]},proxy:!0}]),model:{value:e.showPurchaseDialog,callback:function(t){e.showPurchaseDialog=t},expression:"showPurchaseDialog"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"normal-text"},[e._v("1. 红包封面按个数收费，1元/个。若购买N个红包封面，则N个微信用户可领取并使用。")]),t("div",{staticClass:"normal-text"},[e._v("2. 定制方购买后，封面发放有效期为6个月。过期后，剩余封面数量将清零。")]),t("div",{staticClass:"normal-text"},[e._v("3. 微信用户领取后，可在3个月内无限次使用该封面。")])])]),1==e.showTestRedDialogFlag?t("mp-dialog",{staticClass:"refund-dialog",attrs:{title:"试用前须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showTestRedDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.showTestRedDialogFlag=2}}},[e._v("下一步")])],1)]},proxy:!0}],null,!1,3196846716),model:{value:e.showTestRedDialog,callback:function(t){e.showTestRedDialog=t},expression:"showTestRedDialog"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"test-tips"},[t("p",[e._v("1.每款红包封面审核通过后，均可获得10个试用封面。")]),t("p",[e._v("2.用户领取试用封面后，可在2小时内无限次使用该封面。")]),t("p",[e._v("3.超过2小时后，试用封面将失效。")])])])]):e._e(),2==e.showTestRedDialogFlag?t("mp-dialog",{staticClass:"refund-dialog",attrs:{title:"试用封面",width:675},model:{value:e.showTestRedDialog,callback:function(t){e.showTestRedDialog=t},expression:"showTestRedDialog"}},[t("div",{staticClass:"content"},[t("Qrcode",{attrs:{qrcodeUrl:e.tempRedQr.objectQrcodeUrl,normalText:"微信扫码领取试用封面",status:e.qrcodeStatus,failText:"扫码登录失败，请重新扫码登录",failTip:e.loginScanFailReason},on:{reload:e.loadAndCheckRedQrcode}}),t("div",{staticClass:"download-link"},[t("a",{on:{click:function(t){return e.saveTempQr(e.tempRedQr.objectQrcodeUrl)}}},[e._v("下载二维码")])]),t("p",{staticClass:"get-count"},[e._v("试用封面剩余可领取："+e._s(e.tempRedQr.leftCnt)+" / "+e._s(e.tempRedQr.totalCnt)+" 个")])],1)]):e._e()],2)},we=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],Ce=(i(38862),i(20629)),_e=i(72909),xe=(i(26699),function(){var e,t,i,n=this,a=n._self._c;n._self._setupProxy;return a("div",{staticClass:"main-card"},[a("div",{staticClass:"cover-detail-header-wrap"},[a("div",{staticClass:"cover-info"},[a("CoverReceiveImg",{staticClass:"receive-img",attrs:{src:n.cover.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":n.widgetCoverUrl,"open-src":null===(e=n.cover.packetMaterial.openImage)||void 0===e?void 0:e.mediaUrl,"dynamic-src":null===(t=n.cover.packetMaterial.coverImageDynamic)||void 0===t?void 0:t.mediaUrl,"cover-type":null===(i=n.cover.packetMaterial)||void 0===i?void 0:i.coverImageDynamicType}}),a("div",{staticClass:"name-and-status"},[a("div",{staticClass:"name"},[n._v(n._s(n.cover.packetName))]),a("div",{staticClass:"status-list"},[n._l(n.statusInfo.statusList,(function(e,t){return a("div",{key:t,staticClass:"status",style:e.style},[n._v(" "+n._s(e.text)+" ")])})),n.statusInfo.additionalInfo?a("a",{staticClass:"desc",on:{click:n.checkAdditionalInfo}},[n._v(n._s(n.statusInfo.additionalInfo))]):n._e()],2)])],1),n.isBlocked?a("div",{staticClass:"right-area"},[a("div",{staticClass:"operate-buttons"},[1===n.blockedStatus&&n.OpenRefundSwitch?a("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:function(e){return n.handleBtnClick(5)}}},[n._v("退款")]):2===n.blockedStatus?[a("div",{staticClass:"non-refundable"},[a("span",[n._v("无法退款")]),a("mp-popover",{attrs:{trigger:"hover"},scopedSlots:n._u([{key:"target",fn:function(){return[a("mp-icon",{attrs:{icon:"info_circle_regular",color:"rgba(0, 0, 0, 0.5)"}})]},proxy:!0}],null,!1,1111573384)},[a("p",[n._v("开发票中无法进行退款，请撤销开票申请，或完成开发票后申请退票，退票完成后，方可申请退款操作。")]),a("p",{staticClass:"to-invoice-list"},[a("a",{on:{click:n.goToInvoiceList}},[n._v("查看开票记录")])])])],1),a("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[n._v("退款")])]:4===n.blockedStatus?[a("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[n._v("退款中")])]:5===n.blockedStatus?[a("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[n._v("已退款")])]:n._e()],2),5===n.blockedStatus?n._t("tip",(function(){return[a("p",{staticStyle:{width:"400px","margin-top":"8px"}},[n._v("提示：退款实际到账时间以银行为准，请关注银行入账通知。若有相关问题，请联系具体银行。")])]})):n._e()],2):a("div",{staticClass:"right-area"},[a("div",{staticClass:"operate-buttons"},[n.statusInfo.defaultBtn?[n.statusInfo.defaultBtn.disabled?a("mp-popover",{attrs:{trigger:"hover"},scopedSlots:n._u([{key:"content",fn:function(){return[a("div",{staticClass:"d"},[a("p",[n._v("orderID："+n._s(n.cover.orderId))]),a("br"),n.isAtmosphereCover?a("p",[n._v("氛围封面暂不支持购买，请联系微信广告侧对接")]):a("p",[a("span",[n._v("集团内部业务购买红包封面，请前往内部虚拟资源领用平台")]),a("a",{attrs:{href:"http://ivr.woa.com",target:"_blank"}},[n._v("（ivr.woa.com）")]),a("span",[n._v("下单购买。")])])])]},proxy:!0},{key:"target",fn:function(){return[a("mp-button",{staticClass:"default-btn",attrs:{type:"default",disabled:!0}},[n._v(n._s(n.statusInfo.defaultBtn.text))])]},proxy:!0}],null,!1,2558662612)}):a("mp-button",{staticClass:"default-btn",on:{click:function(e){return n.handleBtnClick(n.statusInfo.defaultBtn.actionType)}}},[n._v(" "+n._s(n.statusInfo.defaultBtn.text)+" ")])]:n._e(),n.statusInfo.primaryBtn?["发放封面"!=n.statusInfo.primaryBtn.text||n.isCanEdit||n.statusInfo.primaryBtn.disabled?n.statusInfo.primaryBtn.disabled?a("mp-popover",{attrs:{trigger:"hover"},scopedSlots:n._u([{key:"content",fn:function(){var e,t;return[n.isAtmosphereCover&&[2,3].includes(null===(e=n.statusInfo)||void 0===e||null===(t=e.primaryBtn)||void 0===t?void 0:t.actionType)?a("div",{staticClass:"d"},[a("p",[n._v("orderID："+n._s(n.cover.orderId))]),a("br"),a("p",[n._v("氛围封面暂不支持购买，请联系微信广告侧对接")])]):n.statusInfo.primaryBtn.info?a("div",{staticClass:"d"},[a("p",[n._v(n._s(n.statusInfo.primaryBtn.info))])]):a("div",{staticClass:"d"},[a("p",[n._v("orderID："+n._s(n.cover.orderId))]),a("br"),a("p",[a("span",[n._v("集团内部业务购买红包封面，请前往内部虚拟资源领用平台")]),a("a",{attrs:{href:"http://ivr.woa.com",target:"_blank"}},[n._v("（ivr.woa.com）")]),a("span",[n._v("下单购买。")])])])]},proxy:!0},{key:"target",fn:function(){return[a("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[n._v(n._s(n.statusInfo.primaryBtn.text))])]},proxy:!0}],null,!1,860354890)}):a("mp-button",{staticClass:"primary-btn",attrs:{loading:n.isPrimaryBtnLoading,type:"primary"},on:{click:function(e){return n.handleBtnClick(n.statusInfo.primaryBtn.actionType)}}},[n._v(" "+n._s(n.statusInfo.primaryBtn.text)+" ")]):a("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:n._u([{key:"content",fn:function(){return[a("div",[a("span",[n._v("暂无发放封面权限，请前往")]),a("a",{on:{click:n.toadmin}},[n._v("成员管理")]),a("span",[n._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[a("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"}},[n._v("发放封面")])]},proxy:!0}],null,!1,849863091)})]:n._e()],2),n._t("tip")],2)])])}),Ie=[],ke=(i(9653),i(58534)),Te=i(96486),Se=i.n(Te),Ae=i(78255);(function(e){e[e["试用封面"]=0]="试用封面",e[e["撤销审核"]=1]="撤销审核",e[e["购买"]=2]="购买",e[e["再次购买"]=3]="再次购买",e[e["发放封面"]=4]="发放封面",e[e["退款"]=5]="退款",e[e["取消支付"]=6]="取消支付",e[e["支付"]=7]="支付",e[e["申诉"]=8]="申诉",e[e["重新编辑"]=9]="重新编辑"})(a||(a={}));var De,Pe={primaryBtn:{text:a[4],actionType:4},defaultBtn:{text:a[3],actionType:3}},Ze=(n={},(0,Ae.Z)(n,me.Rf.Editing,{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"待提交",style:{color:"#9A9A9A",borderColor:"#9A9A9A"}}]}),(0,Ae.Z)(n,me.Rf.Auditing,{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"审核中",style:{color:"#FA9D3B",borderColor:"#FA9D3B"}}],primaryBtn:{text:a[1],actionType:1}}),(0,Ae.Z)(n,me.Rf.Approved,{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"审核通过",style:{color:"#1AAD19",borderColor:"#1AAD19"}}],primaryBtn:{text:a[2],actionType:2},defaultBtn:{text:a[0],actionType:0}}),(0,Ae.Z)(n,me.Rf.Rejected,{color:"#fa5151",statusList:[{text:"审核驳回",style:{color:"#fa5151",borderColor:"#fa5151"}}],additionalInfo:"查看原因"}),(0,Ae.Z)(n,me.Rf.Published,{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"已上线",style:{color:"#1AAD19",borderColor:"#1AAD19"}}],primaryBtn:{text:a[4],actionType:4},defaultBtn:{text:a[3],actionType:3}}),(0,Ae.Z)(n,me.Rf.Frozen,{color:"#fa5151",statusList:[{text:"违规冻结，暂不可用",style:{color:"#fa5151",borderColor:"#fa5151"}}],additionalInfo:"查看原因",primaryBtn:{text:a[8],actionType:8}}),(0,Ae.Z)(n,me.Rf.Blocked,{color:"#fa5151",statusList:[{text:"违规已下线",style:{color:"#fa5151",borderColor:"#fa5151"}}],primaryBtn:{text:a[5],actionType:5},additionalInfo:"查看原因"}),n),Ue=Ze,Ee=s.ZP.extend({name:"CoverDetailHeader",data:function(){return{isCanEdit:!0}},props:{cover:{type:Object,default:function(){return{}}},hasWaitingPayInfo:Boolean,isPrimaryBtnLoading:Boolean,leftValidOrderNum:Number},components:{CoverReceiveImg:ke.Z},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.U6.getUserInfo();case 2:1!=m.U6.user.isSecondary||1&m.U6.user.managerFlag||(e.isCanEdit=!1);case 3:case"end":return t.stop()}}),t)})))()},computed:{isAtmosphereCover:function(){var e,t,i,n;return!!(null!==(e=this.cover.packetMaterial)&&void 0!==e&&null!==(t=e.atmosphereSource)&&void 0!==t&&t.mediaUrl||null!==(i=this.cover.packetMaterial)&&void 0!==i&&null!==(n=i.bubbleAtmospherePag)&&void 0!==n&&n.mediaUrl)},OpenRefundSwitch:function(){return m.U6.auth.OpenRefundSwitch},isDefaultPayBtnDisabled:function(){var e=this,t=2==e.statusInfo.defaultBtn.actionType||3==e.statusInfo.defaultBtn.actionType;return t&&!e.openPaySwitch},isPrimaryPayBtnDisabled:function(){var e=this,t=2==e.statusInfo.primaryBtn.actionType||3==e.statusInfo.primaryBtn.actionType;return t&&!e.openPaySwitch},openPaySwitch:function(){return m.U6.auth.OpenPaySwitch},isInnerUser:function(){return m.U6.auth.InnerAuthor},isBlocked:function(){var e=this.cover.orderStatus;return e==me.Rf.Blocked},blockedStatus:function(){var e=this.cover.blockedStatus;return e},statusInfo:function(){var e,t,i,n,a,r,o=this.cover.orderStatus,s=Ue,c=s[o];if(this.hasWaitingPayInfo)return c=Object.assign({},c,Pe),0===this.leftValidOrderNum&&(c.primaryBtn.disabled=!0,c.primaryBtn.info="无可发放封面"),c;var l=function(e){return 2===e||3===e};if(null!==(e=c)&&void 0!==e&&e.primaryBtn&&l(c.primaryBtn.actionType)&&this.isInnerUser||this.isAtmosphereCover&&l(null===(t=c)||void 0===t||null===(i=t.primaryBtn)||void 0===i?void 0:i.actionType)?c.primaryBtn.disabled=!0:c&&c.defaultBtn&&(c.primaryBtn.disabled=!1),null!==(n=c)&&void 0!==n&&n.defaultBtn&&l(c.defaultBtn.actionType)&&this.isInnerUser||this.isAtmosphereCover&&l(null===(a=c)||void 0===a||null===(r=a.defaultBtn)||void 0===r?void 0:r.actionType)?c.defaultBtn.disabled=!0:c&&c.defaultBtn&&(c.defaultBtn.disabled=!1),o===me.Rf.Published){if(c=Se().cloneDeep(c),0===this.leftValidOrderNum)return c.primaryBtn.disabled=!0,c.primaryBtn.info="剩余 0 个红包封面可发放，若要继续发放，需要前往订单详情-发放记录里，回收未领取的红包封面",c;c.primaryBtn.disabled=!1}return c||{}},widgetCoverUrl:function(){var e,t,i=this.cover;return null===i||void 0===i||null===(e=i.packetMaterial)||void 0===e||null===(t=e.syntheticWidgetImage)||void 0===t?void 0:t.mediaUrl}},methods:{handleBtnClick:function(e){this.$emit("btnClick",e)},checkAdditionalInfo:function(){this.$emit("checkAdditionalInfo")},goToInvoiceList:function(){this.$router.push({name:"invoiceManage"})},toadmin:function(){this.$router.push({name:"administrator"})}}}),Re=Ee,Me=(0,g.Z)(Re,xe,Ie,!1,null,"1dad46fa",null),Le=Me.exports,Fe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"cover-detail-statitics-wrap"},[t("div",{staticClass:"stat-title"},[t("span",[e._v("发放数据")]),t("a",{staticClass:"more",on:{click:e.routeToMore}},[t("span",[e._v("查看更多数据")])])]),t("div",{staticClass:"stat-desc"},[e._v("实时数据")]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已购买个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalPurchaseCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已发放个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalSendCnt)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalReceiveCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("通过「推广」领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalHeatCnt)))])]),e.statistics.totalPurchaseTime?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("累计购买封面发放时长")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalPurchaseTime)))])]):e._e()]),t("div",{staticClass:"divide"}),t("div",{staticClass:"stat-title"},[e._v("使用数据")]),t("div",{staticClass:"stat-tab-list mt-2"},[t("mp-form",[t("mp-form-item",{attrs:{label:"时间范围"}},[t("mp-radio-group",{staticClass:"mt-2",model:{value:e.statisticsTab,callback:function(t){e.statisticsTab=t},expression:"statisticsTab"}},[t("mp-radio",{attrs:{value:"yesterday"}},[e._v("昨日数据")]),t("mp-radio",{attrs:{value:"total"}},[e._v("累计数据")])],1)],1)],1)],1),t("div",{staticClass:"stat-desc",staticStyle:{"margin-top":"-22px"}},[e._v("数据截止至："+e._s(e.lastDate)+"（每日8点更新）")]),"yesterday"===e.statisticsTab?[t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发封面红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdaySendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆封面红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayReceiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayDetailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayStoryExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发封面红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdaySendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆封面红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayReceivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayDetailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayStoryExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterEmotionproductPv)))]):e._e()]):e._e()])]:e._e(),"total"===e.statisticsTab?t("div",{class:{loading:e.loading}},[e.loading?t("i",{staticClass:"weui-desktop-loading"},[e._v("加载中")]):e._e(),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductPv)))]):e._e()]):e._e()])]):e._e()],2)])},Ne=[],Oe=i(90520),Be=s.ZP.extend({name:"CoverStatitics",data:function(){return{fullStatData:null,statisticsTab:"yesterday",loading:!1}},props:{statistics:{},jumpStat:{},cid:String},computed:{lastDate:function(){var e=this;return Oe("yyyy年MM月dd日",new Date(1e3*e.statistics.statTime))},coverActionTypeText:function(){return!!m.l1.coverActionType&&me.pK[m.l1.coverActionType]},coverActionType:function(){return m.l1.coverActionType},yesterdayStat:function(){var e=this.fullStatData;return e&&e.yesterdayStat?e.yesterdayStat:{}},yesterdayStatItem:function(){var e=this;return e.yesterdayStat.itemList&&e.yesterdayStat.itemList[0]?e.yesterdayStat.itemList[0]:{}},summaryStat:function(){var e=this.fullStatData;return e&&e.summaryStat?e.summaryStat:{}},summaryStatItem:function(){var e=this;return e.summaryStat.itemList&&e.summaryStat.itemList[0]?e.summaryStat.itemList[0]:{}}},watch:{statisticsTab:function(e){"total"!==e||this.fullStatData||this.fetchData()}},methods:{fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,e.cid){t.next=3;break}return t.abrupt("return",e.$router.replace({name:"covers"}));case 3:return t.next=5,m.l1.getFullStat(e.cid);case 5:e.fullStatData=t.sent,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},routeToMore:function(){this.$router.push({name:"statistics",query:{cid:this.cid}})}},filters:{undefineCheck:function(e){return e||"-"}}}),qe=Be,Qe=(0,g.Z)(qe,Fe,Ne,!1,null,"38f17cd6",null),je=Qe.exports,He=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"wrapper",staticClass:"main-card"},[t("div",{staticClass:"cover-detail-main-info-wrap"},[t("div",{staticClass:"info-title justify-right"},[t("span",[e._v("红包封面样式")]),9!=e.cover.orderStatus&&8!=e.cover.orderStatus&&5!=e.cover.orderStatus&&2!=e.cover.orderStatus?[e.isCanEdit?t("mp-button",{staticClass:"preview",on:{click:e.resetBtn}},[e._v("重新编辑")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"preview"},[e._v("重新编辑")])]},proxy:!0}],null,!1,1350798240)})]:e._e()],2),t("div",{staticClass:"preview-button",on:{click:e.handleMobilePreview}},[t("a",[e._v("手机预览整体效果")])]),t("MaterialPictures",{attrs:{material:e.materials,showCoverStory:e.showStory,story:e.story,cover:e.cover,isEdit:!1,coverType:e.coverType}}),e.showStory?[t("div",{staticClass:"story-title"},[e._v("封面故事")]),t("StoryMake",{attrs:{value:e.cover.packetMaterial.storyDetailList,cover:e.cover,storyDesc:e.cover.packetMaterial.storyDescription,isDisplayStatus:!0}})]:e._e(),t("div",{staticClass:"divide-line"}),t("div",{staticClass:"info-title"},[e._v("基本信息")]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("封面ID：")]),t("span",[e._v(e._s(e.$route.query.id))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("材料证明：")]),e.cover.proofMaterial&&e.cover.proofMaterial.mediaName?[t("DownloadLink",{attrs:{url:e.cover.proofMaterial.mediaUrl,name:e.cover.proofMaterial.mediaName,"download-type":"ajax"}},[e._v(" "+e._s(e.cover.proofMaterial.mediaName)+" ")]),t("span",[e._v("（"+e._s(e._f("prettySize")(e.cover.proofMaterial.mediaSize))+"）")])]:[t("span",[e._v("-")])]],2)])],2),t("CoverPreviewDialog",{attrs:{cover:e.cover},model:{value:e.showPreviewQrcodeDialog,callback:function(t){e.showPreviewQrcodeDialog=t},expression:"showPreviewQrcodeDialog"}})],1)},Ge=[],We=(i(47042),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"material-pictures"},[t("div",{staticClass:"preview-wrap"},[e.material?t("div",{ref:"cardList",staticClass:"card-list"},[t("div",{staticClass:"card-wrap card-0 receive"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("receive",0)}}},[2===e.coverType?t("div",{staticClass:"img-wrap"},[t("widget-cover-img",{staticClass:"example-img",attrs:{"cover-url":e.material.receiveImageUrl,"widget-url":e.recWidgetImageUrl||e.coverToolPics.example_6,"bottom-url":e.coverToolPics.hb_bottom_openactive}})],1):t("div",{staticClass:"img-wrap img-wrap-border"},[e.material.receiveImageUrl?t("img",{staticClass:"example-img",attrs:{src:e.material.receiveImageUrl}}):e._e(),t("img",{staticClass:"crop crop0",attrs:{src:e.coverToolPics.crop0}})])]),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("拆红包页")])]),e.material.bubbleImageUrl?t("div",{staticClass:"card-wrap card-1 bubble"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("bubble",1)}}},[t("div",{staticClass:"img-wrap"},[e.senderC2cWidgetImageUrl?t("widget-bubble-img",{staticClass:"crop crop2 widget-bubble-img",attrs:{"bubble-url":e.coverToolPics.crop2,"widget-url":e.senderC2cWidgetImageUrl,"bubble-image-url":e.material.bubbleImageUrl}}):[t("img",{staticClass:"crop2-bg",attrs:{src:e.material.bubbleImageUrl}}),t("img",{staticClass:"crop crop2",attrs:{src:e.coverToolPics.crop2}})],e.cover.brandLogo&&e.cover.brandLogo.mediaUrl?t("img",{staticClass:"packet-brand-logo",class:{"packet-brand-logo_widget":2===e.coverType},attrs:{src:e.cover.brandLogo.mediaUrl}}):t("div",{staticClass:"packet-name-bubble",class:{"packet-name-bubble_widget":2===e.coverType}},[e._v(e._s(e.cover.packetName||"红包封面简称"))])],2)]),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("红包气泡")])]):e._e(),e.material.corpImageUrl?t("div",{staticClass:"card-wrap card-2 corp"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("corp",2)}}},[t("div",{staticClass:"img-wrap border-px mx-auto w-[80px] border border-solid border-opblack_4"},[t("corp-info-preview",{attrs:{corpImageUrl:e.material.corpImageUrl,packetName:e.cover.packetName}})],1)]),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("发红包页")])]):e._e(),e.material.detailImageUrl||e.storyMediaList.length?t("div",{staticClass:"card-wrap card-3 detail"},[e.storyMediaList.length?[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("detail",3)}}},[t("div",{staticClass:"img-wrap"},[t("CoverDetailImg",{staticStyle:{height:"100%","object-fit":"contain","border-radius":"4px"},attrs:{"media-info":e.firstStoryMedia}})],1)]),e._l(e.storyMediaList,(function(i,n){return t("div",{key:n,staticClass:"card-item",style:{left:"".concat(4*(e.storyMediaList.length-(n+1)),"px")}})}))]:e.material.detailImageUrl?[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("detail",3)}}},[t("div",{staticClass:"img-wrap"},[t("CoverDetailImg",{staticStyle:{height:"100%","object-fit":"cover","border-radius":"4px"},attrs:{"pic-url":e.material.detailImageUrl}})],1)])]:e._e(),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("红包详情页")])],2):e._e(),e._l(e.storyMediaList.slice(1),(function(i,n){return t("div",{key:i.mediaUrl,staticClass:"card-wrap detail",class:"card-".concat(3+n+1),staticStyle:{position:"absolute",left:"-9999px"},on:{click:function(t){e.checkBigImg("detail",3+(n+1))}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"img-wrap"},[t("CoverDetailImg",{staticStyle:{width:"100%"},attrs:{mediaInfo:i}})],1)])])}))],2):e._e()]),t("mp-dialog",{attrs:{title:"预览效果",width:600,height:600},model:{value:e.showBigImgDialog,callback:function(t){e.showBigImgDialog=t},expression:"showBigImgDialog"}},[t("div",{ref:"bigImgWrap",staticClass:"big-img-wrap"}),t("div",{staticClass:"control"},[e.showPrev?t("div",{staticClass:"prev-btn",on:{click:e.prevCheckedImg}}):e._e(),e.showNext?t("div",{staticClass:"next-btn",on:{click:e.nextCheckedImg}}):e._e()]),2===e.curCheckedImgIndex?t("div",{staticClass:"crop-tips"},[e._v("微信8.0.28及以上版本支持展示该样式")]):e._e(),e.curCheckedImgIndex>=3?t("div",{staticClass:"detail-img-list"},e._l(e.storyMediaList,(function(i,n){return t("div",{key:i.mediaUrl,staticClass:"detail-thumb-item",class:{active:n+3===e.curCheckedImgIndex},on:{click:function(t){return e.setDetailImgIndex(n)}}},[t("cover-detail-img",{staticClass:"detail-pic",attrs:{"media-info":i}})],1)})),0):e._e()])],1)}),ze=[],Ve=i(34225),Je=i(17693),Ke=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(e.img?"img":"span",{tag:"component",attrs:{src:e.img}})},Ye=[],Xe=(i(30541),i(18205)),$e=s.ZP.extend({components:{},props:{lazy:{type:Boolean,default:!1},bubbleUrl:String,widgetUrl:String,bubbleImageUrl:String,scale:{type:Number,default:1}},data:function(){return{img:"",version:0}},computed:{},mounted:function(){this.generateAlien()},watch:{bubbleUrl:function(){this.generateAlien()},widgetUrl:function(){this.generateAlien()},bubbleImageUrl:function(){this.generateAlien()}},methods:{generateAlien:function(){var e=this;this.version+=1;var t=this.version,i=[{url:this.bubbleUrl,width:510*this.scale,height:187*this.scale,y:42*this.scale},{url:this.widgetUrl,width:340*this.scale,height:272*this.scale,x:162*this.scale}];this.bubbleImageUrl&&i.unshift({url:this.bubbleImageUrl,width:510*this.scale,height:187*this.scale,y:42*this.scale,radius:20*this.scale});var n=new Xe.mc(i,{width:510*this.scale,height:272*this.scale});n.outputImg().then((function(i){t===e.version&&(e.img=i)}))}}}),et=$e,tt=(0,g.Z)(et,Ke,Ye,!1,null,"3fb4ad5e",null),it=tt.exports,nt=function(){var e,t=this,i=t._self._c;t._self._setupProxy;return i("div",{ref:"CoverDetailImg",staticClass:"CoverDetailImg relative overflow-hidden bg-no-repeat",style:t.storyPreviewStyle},[t.loading?i("preview-loading"):t._e(),t.isVideoStory?i("video",{ref:"videoStory",staticClass:"absolute w-full",attrs:{autoplay:t.autoplay,loop:"",muted:"",src:t.mediaInfo.mediaUrl},domProps:{muted:!0}}):t._e(),!t.detailImageDynamicUrl||null!==(e=t.mediaInfo)&&void 0!==e&&e.mediaUrl?t._e():i("div",{staticClass:"absolute w-full",style:{top:"".concat(100*t.detailImgOffsetTop,"%")}},[i("pag-display",{ref:"pagDisplay",staticClass:"pag-display",attrs:{name:"coverdetailpag",url:t.detailImageDynamicUrl,loop:!0,autoInit:t.autoplay,autoplay:t.autoplay,showType:"preview"}})],1),t.detailImgUrl?i(t.img?"img":"span",{tag:"component",staticClass:"z-1 relative h-full w-full object-contain",attrs:{src:t.img,tag:"img"}}):i("img",{staticClass:"w-full",attrs:{src:"https://res.wx.qq.com/t/fed_upload/251341c5-76e5-440f-917b-8172142b296f/example.png"}})],1)},at=[],rt=(i(47941),i(23157),i(57327),i(9938)),ot=i(28687),st=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},ct=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"justify-cente absolute inset-0 z-10 flex items-center",staticStyle:{background:"rgba(246, 248, 249, 0.8)"}},[t("div",{staticClass:"mx-auto text-center"},[t("div",{staticClass:"weui-desktop-loading"}),t("div",{staticClass:"mt-4 text-opblack_1"},[e._v("生成中")])])])}],lt=s.ZP.extend({components:{},data:function(){return{}},computed:{},methods:{}}),ut=lt,dt=(0,g.Z)(ut,st,ct,!1,null,"0c249870",null),pt=dt.exports,vt=(0,Ce._p)("cover"),mt=vt.mapState,ft=1080,ht=2337,gt=1062,yt=1799,bt=s.ZP.extend({components:{PagDisplay:ot.Z,PreviewLoading:pt},props:{loading:Boolean,actionList:{type:Array,default:function(){return[]}},mediaInfo:Object,picUrl:String,scale:{type:Number,default:.5},autoplay:Boolean,detailImageDynamicUrl:String},data:function(){return{img:"",hasStoryBg:Xe.is.detail_page_has_story,version:0,detailImgOffsetTop:-.1335,detailImgHeightPro:.77}},computed:(0,ve.Z)((0,ve.Z)({},mt(["showEditDialog","previewPagReinit"])),{},{storyPreviewStyle:function(){return{"background-image":"url(".concat(this.isVideoStory?this.fuzzyImgUrl:"",")")}},hasStory:function(){var e;return!!this.mediaInfo&&(null===(e=Object.keys(this.mediaInfo))||void 0===e?void 0:e.length)>0},fuzzyImgUrl:function(){var e;return(null===(e=this.mediaInfo)||void 0===e?void 0:e.mediaFuzzyUrl)||""},detailImgUrl:function(){var e,t;return this.picUrl&&!this.hasStory?this.picUrl:(1===(null===(e=this.mediaInfo)||void 0===e?void 0:e.mediaType)?this.mediaInfo.mediaUrl:null===(t=this.mediaInfo)||void 0===t?void 0:t.mediaThumbnailUrl)||""},isVideoStory:function(){var e;return 2===(null===(e=this.mediaInfo)||void 0===e?void 0:e.mediaType)},isPicStory:function(){var e;return 1===(null===(e=this.mediaInfo)||void 0===e?void 0:e.mediaType)},coverFromText:function(){var e=this.actionList[0];return e?4===e.actionType?"视频号 · ".concat(e.nickname):2===e.actionType?"公众号 · ".concat(e.nickname):"":""}}),mounted:function(){this.generateAlien(),this.handleVideoStyle(),this.autoplay&&this.$refs.videoStory instanceof HTMLVideoElement&&(console.log("自动播放"),this.$refs.videoStory.play())},watch:{previewPagReinit:function(e){var t=this.$refs.pagDisplay;e.startsWith("detail")&&this.autoplay&&this.detailImageDynamicUrl&&(console.log("detail pag reinit",e),null===t||void 0===t||t.initPag())},showEditDialog:function(e){var t=this.$refs.pagDisplay;e?null===t||void 0===t||t.destroy():this.autoplay&&(null===t||void 0===t||t.initPag())},autoplay:{handler:function(e){var t=this.$refs.pagDisplay;e?console.log("coverdetailpag isactive"):(this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.pause(),null===t||void 0===t||t.destroy())},immediate:!0},mediaInfo:function(){this.isVideoStory&&this.handleVideoStyle()},detailImgUrl:function(){this.generateAlien()},detailImageDynamicUrl:function(){this.generateAlien()},actionList:function(){this.generateAlien()}},methods:{handleVideoStyle:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isPicStory&&null!==(i=e.mediaInfo)&&void 0!==i&&i.mediaUrl){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,rt.$p)(null===(n=e.mediaInfo)||void 0===n?void 0:n.mediaUrl);case 4:a=t.sent,o=a.width,s=a.height,c=e.$refs.videoStory,l=e.$refs.CoverDetailImg,o>s?(c&&(c.style.top="".concat(gt/2/ht*100,"%"),c.style.width="100%",c.style.transform="translateY(-50%)"),l&&(l.style.backgroundSize="auto ".concat(100*e.detailImgHeightPro,"%"))):(c&&(u=yt*o/s,c.style.top="-13.5%",c.style.width="".concat(u/ft*100,"%"),c.style.left="".concat((ft-u)/2/ft*100,"%")),l&&(l.style.backgroundSize="100% auto"));case 9:case"end":return t.stop()}}),t)})))()},generateAlien:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p,v,m,f,h,g,y,b,w,C,_,x,I;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.detailImgUrl){t.next=2;break}return t.abrupt("return");case 2:return i=ft,n=ft,a=0,o=0,s="-apple-system,system-ui,BlinkMacSystemFont,PingFang SC,SF Pro Text,Helvetica Neue,Helvetica,Hiragino Sans GB,Heiti SC,Arial,Microsoft YaHei UI,Microsoft YaHei,sans-serif",c=e.hasStoryBg,l=Xe.is.detail_page_no_story,t.next=11,(0,_e.t$)(e.detailImgUrl);case 11:if(u=t.sent,d=u.width,p=u.height,v=ft*p/d,!e.fuzzyImgUrl){t.next=22;break}return t.next=17,(0,_e.t$)(e.fuzzyImgUrl);case 17:m=t.sent,n=ht*e.detailImgHeightPro,i=m.width*n/m.height,a=-(i/2-ft/2),o=-.1335*ht;case 22:return f=ft,h=v*e.detailImgOffsetTop,v<f&&(h=(f-v)/2),g=[{url:e.hasStory?c:l,width:ft,height:ht}],e.hasStory||e.detailImageDynamicUrl||g.unshift({url:e.detailImgUrl,x:0,y:h,width:ft,height:v}),e.isPicStory&&g.unshift({url:e.fuzzyImgUrl,x:a,y:o,width:i,height:n},{url:e.detailImgUrl,x:0,y:h,width:ft,height:v}),e.coverFromText&&(y=(0,Xe.mY)("封面来自".concat(e.coverFromText),"38px ".concat(s)),b=(0,Xe.mY)("封面来自","38px ".concat(s)),w=y+8,C=(ft-w)/2,_=C+8+b,g.push({text:"封面来自",x:C,y:1082,style:{color:"rgba(0, 0, 0, 0.3)"},font:"38px ".concat(s)},{text:e.coverFromText,x:_,y:1082,style:{color:"rgba(87, 107, 149, 1)"},font:"38px ".concat(s)})),g=g.filter((function(e){return!!e.url||!!e.text})),x=new Xe.mc(g,{width:ft,height:ht}),t.next=33,x.outputImg();case 33:I=t.sent,e.img=I;case 35:case"end":return t.stop()}}),t)})))()}}}),wt=bt,Ct=(0,g.Z)(wt,nt,at,!1,null,"662b1caf",null),_t=Ct.exports,xt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative h-full w-full"},[e.loading?t("preview-loading",{staticClass:"z-20"}):e._e(),t(e.img?"img":"span",{tag:"component",staticClass:"relative z-10 h-full w-full",attrs:{src:e.img,tag:"img"}}),e.corpLogoDynamicUrl?t("div",{staticClass:"absolute left-[4.1%] top-[30%] h-[9.9%] w-[91.79%]"},[t("pag-display",{ref:"pagDisplay",staticClass:"pag-display",attrs:{active:e.active,name:"corpinfopag",url:e.corpLogoDynamicUrl,autoplay:e.autoplay,loop:!0,autoInit:e.autoplay,showType:"preview"}})],1):e._e()],1)},It=[],kt=i(20296),Tt=i.n(kt),St=function(e){return/^[a-zA-Z0-9]+$/.test(e)},At=(0,Ce._p)("cover"),Dt=At.mapState,Pt=390,Zt=844,Ut=s.ZP.extend({components:{PagDisplay:ot.Z,PreviewLoading:pt},props:{active:Boolean,loading:Boolean,packetName:{type:String,default:"微信"},corpImageUrl:{type:String},corpLogoDynamicUrl:String,autoplay:Boolean,scale:{type:Number,default:2}},data:function(){return{img:"",debounceGenerateAlicen:null}},computed:(0,ve.Z)({},Dt(["showEditDialog","previewPagReinit"])),mounted:function(){this.debounceGenerateAlicen=Tt()(this.generateAlien,500),this.debounceGenerateAlicen()},watch:{previewPagReinit:function(e){var t=this.$refs.pagDisplay;e.startsWith("corp")&&this.autoplay&&this.corpLogoDynamicUrl&&(console.log("corp pag reinit",e),null===t||void 0===t||t.initPag())},showEditDialog:function(e){var t=this.$refs.pagDisplay;e?null===t||void 0===t||t.destroy():this.autoplay&&(null===t||void 0===t||t.initPag())},packetName:function(){this.debounceGenerateAlicen()},corpImageUrl:function(){this.debounceGenerateAlicen()},corpLogoDynamicUrl:function(){this.debounceGenerateAlicen()},autoplay:function(e){var t=this.$refs.pagDisplay;e?console.log("corpinfopag isactive"):null===t||void 0===t||t.destroy()}},methods:{generateAlien:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="https://res.wx.qq.com/t/fed_upload/100a5829-715a-4457-abca-9c88727bae76/default_corp.png",n="-apple-system,system-ui,BlinkMacSystemFont,PingFang SC,SF Pro Text,Helvetica Neue,Helvetica,Hiragino Sans GB,Heiti SC,Arial,Microsoft YaHei UI,Microsoft YaHei,sans-serif",a=e.scale,o=17*a,s=14*a,c=e.corpImageUrl?{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:8,color:"#FFE2B1",shadowColor:"rgba(0, 0, 0, 0.05)"}:{color:"#F0CE6F"},l=[{url:Xe.is.corp_page,width:Pt*a,height:Zt*a},{url:e.corpImageUrl?"https://res.wx.qq.com/t/fed_upload/005a31cf-a4f9-47c2-957d-0c8fbd5b53f5/arrow-gloden.png":"https://res.wx.qq.com/t/fed_upload/fade9f8d-5df3-49aa-bd99-b9ddebf050f3/arrow-gloden.png",width:24*a,height:30*a,x:338*a,y:279*a},{text:"红包封面",x:32*a,y:272*a,style:c,font:"".concat(o,"px ").concat(n)},{text:e.packetName,x:32*a,y:(St(e.packetName)?307:300)*a,style:c,font:"".concat(s,"px ").concat(n)}],e.corpLogoDynamicUrl||l.unshift({url:e.corpImageUrl||i,width:358*a,height:84*a,x:16*a,y:254*a}),u=new Xe.mc(l,{width:Pt*a,height:Zt*a}),t.next=11,u.outputImg();case 11:d=t.sent,e.img=d,e.$emit("update",d);case 14:case"end":return t.stop()}}),t)})))()}}}),Et=Ut,Rt=(0,g.Z)(Et,xt,It,!1,null,"d6ea7fb8",null),Mt=Rt.exports,Lt=(0,Ce._p)("cover"),Ft=Lt.mapState,Nt=s.ZP.extend({name:"MaterialPictures",components:{CoverDetailImg:_t,WidgetCoverImg:Je.Z,WidgetBubbleImg:it,CorpInfoPreview:Mt},data:function(){return{coverToolPics:Xe.is,showBigImgDialog:!1,curCheckedImgIndex:0,curCheckedImgType:"example",jumpName:""}},props:{imgFile:{type:Object,default:function(){return{}}},receiveImg:{type:Object,default:function(){return{}}},corpImg:{type:Object,default:function(){return{}}},bubbleImg:{type:Object,default:function(){return{}}},material:{type:Object||null},showCoverStory:{type:Boolean,default:function(){return!1}},story:{type:Object,default:function(){return{}}},cover:{type:Object,default:function(){return{}}},coverType:{type:Number,default:0}},computed:(0,ve.Z)((0,ve.Z)({},Ft(["actionAuthInfo"])),{},{storyDetailList:function(){return this.cover.packetMaterial.storyDetailList},storyMediaList:function(){return this.storyDetailList.map((function(e){return e.media}))},firstStoryMedia:function(){var e;return null===(e=this.storyMediaList)||void 0===e?void 0:e[0]},showPrev:function(){var e=this;return e.curCheckedImgIndex>0},showNext:function(){var e=this,t=3;return t+=this.storyMediaList.length?this.storyMediaList.length-1:0,e.curCheckedImgIndex<t},jumpAction:function(){var e,t,i=this.cover;return(null===i||void 0===i||null===(e=i.packetMaterial)||void 0===e||null===(t=e.actionList)||void 0===t?void 0:t[0])||this.actionAuthInfo.action||{}},recWidgetImageUrl:function(){var e,t,i;return(null===(e=this.cover)||void 0===e||null===(t=e.packetMaterial)||void 0===t||null===(i=t.recWidgetImage)||void 0===i?void 0:i.mediaUrl)||""},senderC2cWidgetImageUrl:function(){var e,t,i;return(null===(e=this.cover)||void 0===e||null===(t=e.packetMaterial)||void 0===t||null===(i=t.senderC2cWidgetImage)||void 0===i?void 0:i.mediaUrl)||""}}),methods:{checkBigImg:function(e,t){var i,n=this,a=n.$refs.bigImgWrap;if(e.search("example")>-1){var r=document.querySelectorAll(".example-list .source-card");i=r[Number(t)],this.curCheckedImgType="example"}else{var o=n.$refs.cardList;i=o.querySelector(".card-wrap.card-".concat(t)),this.curCheckedImgType="card"}var s="0";"bubble"===e?s="2":"receive"===e?s="1":"corp"===e&&(s="3"),z.bL.baseActionReport({actionType:"4",coverId:n.cover.orderId||"",processType:"1",authorId:m.U6.user.authorId,editType:s}),a.innerHTML="";var c=i.cloneNode(!0);c.style.position="relative",c.style.left=0;var l=c.querySelector(".card");c.innerHTML="",c.appendChild(l),a.appendChild(c),this.curCheckedImgIndex=t,this.showBigImgDialog=!0},prevCheckedImg:function(){this.checkBigImg(this.curCheckedImgType,this.curCheckedImgIndex-1)},nextCheckedImg:function(){this.checkBigImg(this.curCheckedImgType,this.curCheckedImgIndex+1)},setDetailImgIndex:function(e){this.checkBigImg(this.curCheckedImgType,3+e)},getFinderInfo:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.jumpAction.finderProfileDetail.queryString,t.next=3,Ve.yQ.storyGetFinderInfo(i);case 3:n=t.sent,n&&0===n.baseResponse.ret&&(a=n.jumpInfoList.find((function(e){return e.scene===Ve.DS.finder})),a&&(e.jumpName=a.nickname));case 5:case"end":return t.stop()}}),t)})))()},getBizInfo:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ve.yQ.storyGetBizInfo(e.jumpAction.mpAccountDetail.appName.replace("@app",""),1);case 2:i=t.sent,console.log("getBizInfo",i),i&&0===i.baseResponse.ret&&i.nickname&&(e.jumpName=i.nickname);case 5:case"end":return t.stop()}}),t)})))()},getJumpName:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.jumpAction){t.next=2;break}return t.abrupt("return");case 2:if(4!==e.jumpAction.actionType){t.next=7;break}return t.next=5,e.getFinderInfo();case 5:t.next=10;break;case 7:if(2!==e.jumpAction.actionType){t.next=10;break}return t.next=10,e.getBizInfo();case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getJumpName()},watch:{jumpAction:function(){this.getJumpName()}}}),Ot=Nt,Bt=(0,g.Z)(Ot,We,ze,!1,null,"cf62d8e0",null),qt=Bt.exports,Qt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"preview-dialog",attrs:{title:"预览效果",value:e.showPreviewQrcodeDialog},on:{input:e.toggleDialog}},[t("div",{staticClass:"content",class:{"show-mask":2===e.status}},[t("div",{staticClass:"qrcode-wrap"},[e.url?t("img",{staticClass:"qrcode",attrs:{src:e.url}}):e._e(),t("div",{staticClass:"mask",on:{click:e.handleClickMask}},[t("svg-icon",{staticClass:"reload-icon",attrs:{name:"reload"}})],1)]),2!==e.status?[t("div",{staticClass:"tip"},[e._v("使用微信扫码进行预览")])]:[t("div",{staticClass:"tip"},[e._v("二维码过期，请刷新重试")])]],2)])},jt=[],Ht=i(52117),Gt=new z.ZP;(function(e){e[e["init"]=0]="init",e[e["normal"]=1]="normal",e[e["expired"]=2]="expired"})(De||(De={}));var Wt,zt=s.ZP.extend({name:"CoverPreviewDialog",data:function(){return{url:"",showPreviewQrcodeDialog:!1,status:De.init,timer:NaN}},props:{value:{type:Boolean,default:!1},cover:{type:Object,default:function(){return{}}}},watch:{value:function(e){e&&this.handleMobilePreview()}},beforeDestroy:function(){clearTimeout(this.timer)},methods:{handleMobilePreview:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Gt.baseActionReport({actionType:"5",coverId:e.cover.orderId||"",processType:"1",authorId:m.U6.user.authorId,editType:""}),t.prev=1,t.next=4,(new Ve.ZP).getPreviewQrcode(e.cover.packetMaterial,e.cover.packetName,e.cover.brandLogo);case 4:i=t.sent,i&&0===i.baseResponse.ret&&(e.url=i.qrCodeImage,e.showPreviewQrcodeDialog=!0,e.status=De.normal,e.checkPreviewQrcode(i.token),(0,Ht.H)("get_preview_qrcode")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},checkPreviewQrcode:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(new Ve.ZP).checkPreviewQrcode(e);case 3:n=i.sent,0!==n.baseResponse.ret||0===n.remain?t.status=De.expired:t.showPreviewQrcodeDialog&&(t.timer=window.setTimeout((function(){return t.checkPreviewQrcode(e)}),1e3)),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.error(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},handleClickMask:function(){this.handleMobilePreview()},toggleDialog:function(e){this.showPreviewQrcodeDialog=e,this.$emit("input",e)}}}),Vt=zt,Jt=(0,g.Z)(Vt,Qt,jt,!1,null,"6cc4e1fb",null),Kt=Jt.exports,Yt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"story-make-wrap js-story-make mt-2.5"},[e.canAddMoreMedia&&!e.isDisplayStatus?t("div",{staticClass:"upload-opr-wrap row-upload-opr-wrap flex"},[t("a-upload",{attrs:{name:"file",accept:".jpg,.jpeg,.png,.mp4",action:e.uploadUrl,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!1},fileList:e.curUploadFileList,beforeUpload:e.beforeUpload},on:{change:e.handleUploadFileChange}},[t("mp-button",{staticClass:"upload-btn weui-btn_mini_108px mr-4",attrs:{size:"mini",type:"default"},on:{click:function(e){e.preventDefault()}}},[e._v("本地上传")])],1),t("AddFinderMaterial",{attrs:{OfinderInfo:e.OfinderInfo},on:{addFinderMaterial:e.handleAddFinderMaterial}})],1):e._e(),e.isDisplayStatus?e._e():[t("div",{staticClass:"tip"},[e._v("上传素材创建封面故事，最多可上传5个素材，素材格式：")]),e._m(0)],e.isDisplayStatus?t("div",{staticClass:"media-list"},e._l(e.storyMediaList,(function(n,a){return t("div",{key:a,staticClass:"media-item"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg(a)}}},[t("div",{staticClass:"card-inner"},[2===n.mediaType?t("div",{staticClass:"video-bg"},[t("img",{attrs:{src:n.mediaFuzzyUrl}})]):e._e(),t("div",{staticClass:"media"},[1===n.mediaType?t("img",{attrs:{src:n.mediaUrl}}):2===n.mediaType?t("video",{attrs:{src:n.mediaUrl}}):e._e()]),t("div",{staticClass:"preview-mask"},[t("img",{staticClass:"story-bg",attrs:{src:i(94681)}}),t("div",{staticClass:"brand-area"},[e.storyMediaList.length>1?t("div",{staticClass:"indicator-list"},e._l(e.storyMediaList.length,(function(e,i){return t("div",{key:i,staticClass:"indicator-item",class:{active:i===a}})})),0):e._e(),t("div",{staticClass:"story-desc"},[e._v(e._s(e.storyDesc))]),t("div",{staticClass:"brand"},[e.cover.brandLogo&&e.cover.brandLogo.mediaUrl?t("div",{staticClass:"logo"},[t("img",{attrs:{src:e.cover.brandLogo.mediaUrl}})]):e._e(),t("span",{staticClass:"name"},[t("span",[e._v(e._s(e.cover.packetName||"红包封面简称"))]),e.jumpType?[t("span",{staticStyle:{margin:"0 4px"}},[e._v("|")]),3===e.jumpType?t("span",[e._v("进入小程序")]):e._e(),2===e.jumpType?t("span",[e._v("进入公众号")]):e._e(),t("svg-icon",{staticClass:"go-icon",attrs:{name:"arrow"}})]:e._e()],2)])]),2===n.mediaType?t("div",{staticClass:"play-icon-wrap"},[t("svg-icon",{staticClass:"play-icon",attrs:{name:"play"}})],1):e._e()])]),e.isDisplayStatus?e._e():t("div",{staticClass:"order-change",on:{click:function(e){e.stopPropagation()}}},[e.storyMediaList[a-1]?t("div",{staticClass:"left btn",on:{click:function(t){return e.moveBackward(a)}}},[t("svg-icon",{staticClass:"order-icon",attrs:{name:"order"}})],1):e._e(),e.storyMediaList[a+1]?t("div",{staticClass:"right btn",on:{click:function(t){return e.moveForward(a)}}},[t("svg-icon",{staticClass:"order-icon",attrs:{name:"order"}})],1):e._e()]),e.isDisplayStatus?e._e():[t("div",{staticClass:"del",on:{click:function(t){return t.stopPropagation(),e.handleDel(a)}}},[t("img",{attrs:{src:i(6012)}})])]],2),e.isDisplayStatus?e._e():[t("div",{staticClass:"info"},[t("div",{staticClass:"name"},[e._v(e._s(n.mediaName))]),n.mediaSize?t("div",{staticClass:"size"},[e._v("（"+e._s(e._f("prettySize")(n.mediaSize))+"）")]):e._e()])]],2)})),0):e._e(),e.isDisplayStatus?e._e():t("div",{staticClass:"mt-1"},[t("draggable",{staticClass:"mt-4",attrs:{list:e.storyMediaList,handle:".js-draggable"},on:{change:e.checkMove}},[t("transition-group",{staticClass:"flex"},[e._l(e.storyMediaList,(function(i,n){return t("div",{key:i.mediaUrl,staticClass:"mr-3 flex flex-col items-center"},[t("story-item",{attrs:{storyInfo:i},on:{trash:function(t){return e.handleDel(n)}},scopedSlots:e._u([{key:"drag",fn:function(){return[t("div",{staticClass:"js-draggable absolute inset-x-0 bottom-8 top-0 cursor-pointer"})]},proxy:!0},{key:"drag-icon",fn:function(){return[t("div",{staticClass:"js-draggable flex cursor-pointer justify-end pt-2 hover:opacity-50"},[t("mask-icon",{staticClass:"invisible relative h-4 w-[7px] text-opblack_1",attrs:{name:"drag"}})],1)]},proxy:!0}],null,!0)})],1)})),e.isUploading?t("div",{key:"uploading",staticClass:"upload-item flex h-[190px] w-[124px] flex-col items-center justify-center rounded border border-solid border-opblack_4"},[t("i",{staticClass:"weui-desktop-loading"})]):e._e()],2)],1)],1),t("mp-dialog",{attrs:{title:"预览效果",width:600,height:600},model:{value:e.showBigImgDialog,callback:function(t){e.showBigImgDialog=t},expression:"showBigImgDialog"}},[t("div",{ref:"bigImgWrap",staticClass:"big-img-wrap"}),t("div",{staticClass:"control"},[0!==e.curCheckedImgIndex?t("div",{staticClass:"prev-btn",on:{click:e.prevCheckedImg}}):e._e(),e.curCheckedImgIndex!==e.storyMediaList.length-1?t("div",{staticClass:"next-btn",on:{click:e.nextCheckedImg}}):e._e()])]),t("video",{ref:"hiddenVideo",staticStyle:{display:"none"},attrs:{src:e.curUploadingFile.url}})],2)},Xt=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"tip"},[e._v(" 图片：PNG/JPG/JPEG；750x1250像素；文件不超过300KB；"),t("br"),e._v(" 视频：MP4（H.264/AVC）；最长15s；yuv格式为420；视频宽度不低于720像素；宽高比在16:9-3:5之间；码率不高于1600kbit/s；文件不超过10MB。 ")])}],$t=(i(21703),i(60285),i(41637),i(50078)),ei=i(8495),ti=(i(35192),i(40658),["B","kB","MB","GB","TB","PB","EB","ZB","YB"]),ii=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ni=function(e,t){var i=e;return"string"===typeof t?i=e.toLocaleString(t):!0===t&&(i=e.toLocaleString()),i},ai=function(e,t){if(!Number.isFinite(e))throw new TypeError("Expected a finite number, got ".concat((0,ei.Z)(e),": ").concat(e));t=Object.assign({bits:!1},t);var i=t.bits?ii:ti;if(t.signed&&0===e)return" 0 "+i[0];var n=e<0,a=n?"-":t.signed?"+":"";if(n&&(e=-e),e<1){var r=ni(e,t.locale);return a+r+" "+i[0]}var o=Math.min(Math.floor(Math.log10(e)/3),i.length-1);e=Number((e/Math.pow(1e3,o)).toPrecision(3));var s=ni(e,t.locale),c=i[o];return a+s+" "+c},ri=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isFetchingList||e.isFetchingMaterial?t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})]):e._e(),t("div",{staticClass:"add-finder-material-wrap"},[t("mp-button",{staticClass:"upload-btn finder-upload-btn weui-btn_mini_108px",attrs:{size:"mini"},on:{click:function(t){return t.preventDefault(),e.openFinderUploadDialg.apply(null,arguments)}}},[e._v("视频号上传")]),t("SearchFinderDialog2",{on:{submit:e.handleSearchFinderSubmit},model:{value:e.showSearchFinderDialog,callback:function(t){e.showSearchFinderDialog=t},expression:"showSearchFinderDialog"}}),t("mp-dialog",{staticClass:"material-dialog",attrs:{value:e.showFinderMaterialDialog,width:845},on:{close:e.closeFinderMaterialDialog},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"finder-header"},[t("div",{staticClass:"finder-info"},[t("img",{staticClass:"avatar",attrs:{src:e.finderInfo.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.finderInfo.nickname))])]),t("div",{staticClass:"title"},[e._v("选择视频号内容")]),t("div",{staticClass:"desc"},[e._v("可选择时长≤61秒的视频素材，图片素材暂不支持")])])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"dialog-footer"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.backSearchFinderDialog.apply(null,arguments)}}},[e._v("上一步")]),t("mp-button",{attrs:{type:"primary",disabled:e.curChoosenIndex<0},on:{click:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e._v("添加")])],1)]},proxy:!0}])},[t("div",{ref:"materialBody",staticClass:"finder-dialog-body"},e._l(e.list,(function(i,n){return t("div",{key:i.objectId,staticClass:"finder-material-item"},[t("mp-checkbox",{staticClass:"check-box",attrs:{value:e.curChoosenIndex===n},on:{input:function(t){return e.handleChooseMaterial(t,n)}}}),t("div",{staticClass:"finder-img",on:{click:function(t){return e.handlePreviewMaterial(n)}}},[t("img",{staticClass:"thumb-img",attrs:{src:i.thumbUrl}}),t("svg-icon",{staticClass:"play-icon",attrs:{name:"play"}})],1),t("div",{staticClass:"info"},[t("div",{staticClass:"desc"},[e._v(e._s(i.desc))]),t("div",{staticClass:"date"},[e._v(e._s(e._f("toDate")(i.timestamp)))])])],1)})),0),t("FinderPreview",{attrs:{desc:e.previewMaterial.desc,url:e.previewMaterial.videoUrl,finder:e.finderInfo},model:{value:e.showFinderMaterialPreview,callback:function(t){e.showFinderMaterialPreview=t},expression:"showFinderMaterialPreview"}})],1)],1)])},oi=[],si=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"".concat(e.titleText,"视频号"),value:e.value,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"dialog-footer",class:{visible:e.hadSearchResult}},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.hadSearchResult||e.showError||!e.info.username},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("确认")])],1)],1)]},proxy:!0}])},[t("div",{ref:"dialog",staticClass:"dialog-body"},[t("mp-input",{attrs:{placeholder:"输入视频号名称/绑定的微信号",clearable:"clearable"},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap"},[e.hadSearchResult?t("div",{staticClass:"result-list"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList},on:{"radio-change":e.handleRadioChange}})],1):t("div",{staticClass:"tip"},[e.showError?[t("span",{staticClass:"error"},[e._v(e._s("1_1"===e.principalAccountType?"请输入公众号已绑定的视频号名称/绑定的微信号":"请输入该主体下正确的视频号名称/绑定的微信号"))])]:e._e()],2)])],1)])},ci=[],li=(i(2707),i(70898)),ui=new Ve.ZP,di=(0,Ce._p)("user"),pi=di.mapGetters,vi=s.ZP.extend({name:"SearchFinderDialog2",components:{JumpInfoList:li.Z},data:function(){return{querying:"",query:"",info:{},jumpInfoList:[],showError:!1}},props:{value:Boolean,mode:{type:String,default:"search"}},computed:(0,ve.Z)((0,ve.Z)({},pi(["principalAccountType","accountType"])),{},{hadSearchResult:function(){return!!this.jumpInfoList.length&&!this.showError},titleText:function(){var e=this;return"add"===e.mode?"添加":"选择"},accountType:function(){return m.U6.user.accountType}}),mounted:function(){document.addEventListener("keydown",this.handleEnterKeyDown)},beforeDestroy:function(){document.removeEventListener("keydown",this.handleEnterKeyDown)},methods:{handleRadioChange:function(e){this.info=this.$set(this,"info",e)},handleEnterKeyDown:function(e){var t="undefined"!=typeof event?window.event:e,i=this;if(t&&13==t.keyCode&&i.value)return t.preventDefault(),t.stopPropagation(),i.search(),!1},closeDialog:function(){this.showError=!1,this.query="",this.querying="",this.jumpInfoList=[],this.$emit("input",!1)},search:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.querying){t.next=2;break}return t.abrupt("return");case 2:return e.info={},t.next=5,ui.storyGetFinderInfo(e.querying);case 5:i=t.sent,i&&0===i.baseResponse.ret?(n=i.jumpInfoList.filter((function(e){return!(!e.headImgUrl&&e.scene===Ve.DS.finder)})),0!==e.accountType&&(n=i.jumpInfoList.filter((function(e){return e.isSameBody}))),n=n.sort((function(t,i){var n,a,r,o;return t.isSameBody===i.isSameBody?t.nickname===i.nickname?0:(null===(n=t.nickname)||void 0===n?void 0:n.toLocaleLowerCase())===(null===(a=e.querying)||void 0===a?void 0:a.toLocaleLowerCase())?-1:(null===(r=i.nickname)||void 0===r?void 0:r.toLocaleLowerCase())===(null===(o=e.querying)||void 0===o?void 0:o.toLocaleLowerCase())?1:0:t.isSameBody?-1:1})),e.jumpInfoList=n,e.query=e.querying,e.showError=1===i.jumpInfoList.length&&!i.jumpInfoList[0].headImgUrl,e.jumpInfoList.length||0===e.accountType||(e.showError=!0)):e.showError=!0;case 7:case"end":return t.stop()}}),t)})))()},submit:function(){var e=Object.assign({},this.info,{appName:this.query,query:this.query});this.$emit("submit",e),this.closeDialog()}}}),mi=vi,fi=(0,g.Z)(mi,si,ci,!1,null,"7cb5a7d0",null),hi=fi.exports,gi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"post-preview-wrap",class:{active:e.value}},[t("div",{staticClass:"mask",on:{click:e.closeDialog}}),e.value?t("div",{staticClass:"post-preview-content"},[t("span",{staticClass:"close-icon weui-icon-filled-close",on:{click:e.closeDialog}}),t("div",{staticClass:"preview-hd"},[t("div",{staticClass:"left-part"},[t("img",{staticClass:"avatar",attrs:{src:e.finder.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.finder.nickname))])])]),t("div",{staticClass:"preview-bd"},[t("FinderMediaWrap",{attrs:{mediaWidth:414,url:e.url}})],1),t("div",{staticClass:"preview-ft"},[e.desc?t("div",{staticClass:"content-wrap",class:{collapse:e.collapse}},[t("div",{ref:"content",staticClass:"content"},[t("span",[e._v(e._s(e.desc))])]),e.needCollapse?t("div",{staticClass:"collapse"},[t("a",{on:{click:e.toggleCollapse}},[e.collapse?t("span",[e._v("展开")]):t("span",[e._v("收起")])])]):e._e()]):e._e()])]):e._e()])},yi=[],bi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"post-media-wrap"},[t("div",{staticClass:"video-wrap"},[t("video",{ref:"video",staticStyle:{width:"100%",height:"auto"},attrs:{src:e.url,"webkit-playsinline":"true",playsinline:"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x-webkit-airplay":"allow",autoplay:"true",loop:"loop"},domProps:{muted:!1},on:{click:e.handleVideoClick}}),t("div",{staticClass:"progress"},[e.curVideoDuration?t("CommonSlider",{staticClass:"progress-slider",attrs:{max:e.curVideoDuration,step:.01,tooltipVisible:!1,value:e.currentTime},on:{input:e.handleSetVideoTime}}):e._e()],1),e.isVideoPlaying?e._e():t("div",{staticClass:"pause"},[e._v("已暂停")])])])},wi=[],Ci=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"common-slider-wrap"},[t("a-slider",{attrs:{step:e.step,min:e.min,max:e.max,tooltipVisible:e.tooltipVisible,disabled:e.disabled,value:e.value},on:{change:e.handleInput}})],1)},_i=[],xi=s.ZP.extend({props:{step:Number,max:Number,min:Number,tooltipVisible:Boolean,disabled:Boolean,value:Number},methods:{handleInput:function(e){this.$emit("input",e)}}}),Ii=xi,ki=(0,g.Z)(Ii,Ci,_i,!1,null,"35afc364",null),Ti=ki.exports,Si=s.ZP.extend({components:{CommonSlider:Ti},data:function(){return{currentTime:0,isVideoPlaying:!0,curVideoDuration:0}},props:{url:String,mediaWidth:Number},mounted:function(){var e=this.$refs.video;e&&e.addEventListener("timeupdate",this.handleVideoUpdate)},beforeDestroy:function(){var e=this.$refs.video;e&&(e.removeEventListener("timeupdate",this.handleVideoUpdate),e.pause(),delete this.$refs.video)},methods:{handleVideoUpdate:function(e){var t=e.target;this.currentTime=t.currentTime,this.curVideoDuration=t.duration},handleSetVideoTime:function(e){var t=this.$refs.video;t.currentTime=e,this.isVideoPlaying||(t.play(),this.isVideoPlaying=!0)},handleVideoClick:function(){var e=this.$refs.video;this.isVideoPlaying=!this.isVideoPlaying,this.isVideoPlaying?e.play():e.pause()}}}),Ai=Si,Di=(0,g.Z)(Ai,bi,wi,!1,null,"866c4ce6",null),Pi=Di.exports,Zi=s.ZP.extend({components:{FinderMediaWrap:Pi},data:function(){return{needCollapse:!1,collapse:!0}},props:{finder:{type:Object,required:!0},value:Boolean,desc:String,url:String},watch:{value:function(e,t){var i=this;if(!t&&e){var n=this.desc;if(!n)return;this.$nextTick((function(){var e=i.$refs.content;i.needCollapse=e.scrollHeight>e.offsetHeight}))}}},methods:{closeDialog:function(){this.$emit("input",!1),this.needCollapse=!1,this.collapse=!0},toggleCollapse:function(){this.collapse=!this.collapse}}}),Ui=Zi,Ei=(0,g.Z)(Ui,gi,yi,!1,null,"b25a7084",null),Ri=Ei.exports,Mi=new Ve.ZP,Li=i(90520),Fi=s.ZP.extend({name:"AddFinderMaterial",components:{SearchFinderDialog2:hi,FinderPreview:Ri},data:function(){return{showSearchFinderDialog:!1,showFinderMaterialDialog:!1,showFinderMaterialPreview:!1,finderInfo:{},curChoosenIndex:-1,previewMaterial:{},lastBuffer:"",isOver:!1,list:[],isFetchingMaterial:!1,isFetchingList:!1,first:!0}},props:{OfinderInfo:{}},watch:{showFinderMaterialDialog:function(e){var t=this,i=this;e&&this.first&&(this.first=!1,i.$nextTick((function(){var e=i.$refs.materialBody;e.addEventListener("scroll",(function(){var i=e.scrollHeight-e.scrollTop;i-e.clientHeight<50&&!t.isOver&&t.fetchFinderList()}))})))}},methods:{backSearchFinderDialog:function(){this.clearFinder(),this.closeFinderMaterialDialog(),this.showSearchFinderDialog=!0},openFinderUploadDialg:function(){this.showFinderMaterialDialog=!1,this.lastBuffer="",this.list=[],this.curChoosenIndex=-1,this.finderInfo&&this.finderInfo.appName?this.handleSearchFinderSubmit(this.finderInfo):this.showSearchFinderDialog=!0},handleSearchFinderSubmit:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.finderInfo=e,i.next=3,t.fetchFinderList();case 3:t.showFinderMaterialDialog=!0;case 4:case"end":return i.stop()}}),i)})))()},fetchFinderList:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isFetchingList){t.next=2;break}return t.abrupt("return");case 2:return e.isFetchingList=!0,e.isFetchingMaterial=!0,t.prev=4,t.next=7,Mi.storyGetFinderList(e.finderInfo.username,e.lastBuffer);case 7:if(n=t.sent,e.isFetchingMaterial=!1,n&&n.baseResponse&&0===n.baseResponse.ret){t.next=11;break}return t.abrupt("return",e.errorTip("拉取视频号素材失败"));case 11:e.lastBuffer=n.lastBuffer||"",e.isOver=n.isOver,e.list=e.list.concat(n.finderObject||[]),0!==(null===(i=n.finderObject)||void 0===i?void 0:i.length)||n.isOver||(e.isFetchingList=!1,e.fetchFinderList());case 15:return t.prev=15,e.isFetchingList=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,,15,18]])})))()},handleChooseMaterial:function(e,t){e?this.curChoosenIndex=t:this.curChoosenIndex===t&&(this.curChoosenIndex=-1)},handleSubmit:function(){var e=this.list[this.curChoosenIndex];e.OfinderInfo=this.finderInfo,this.$emit("addFinderMaterial",e),this.closeFinderMaterialDialog()},closeFinderMaterialDialog:function(){this.showFinderMaterialDialog=!1,this.lastBuffer="",this.list=[],this.curChoosenIndex=-1},clearFinder:function(){this.finderInfo={}},handlePreviewMaterial:function(e){this.previewMaterial=this.list[e],this.showFinderMaterialPreview=!0}},filters:{toDate:function(e){return Li("yyyy年MM月dd日 hh:mm",new Date(1e3*e))}}}),Ni=Fi,Oi=(0,g.Z)(Ni,ri,oi,!1,null,"6ce8395f",null),Bi=Oi.exports,qi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"MaterialItem w-[122px] select-none"},[t("div",{staticClass:"mb-1 rounded border border-solid border-opblack_4 bg-white px-4 pb-2 pt-6"},[t("div",{staticClass:"box-content flex h-[120px] w-[90px] items-center justify-center",class:e.loading?"py-4":"py-2"},[e.loading?t("div",{staticClass:"flex flex-col items-center"},[t("i",{staticClass:"weui-desktop-loading relative -top-2"}),t("div",{staticClass:"text-opblack_2"},[e._v("上传中")])]):t("img",{staticClass:"pointer-events-none h-full w-full object-contain",attrs:{src:e.picUrl}})]),t("div",{staticClass:"flex",class:e.showEdit?"justify-between":"justify-end"},[t("mask-icon",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],staticClass:"icon-editbtn h-4 w-4 cursor-pointer text-black_1",attrs:{name:"editbtn"},nativeOn:{click:function(t){return e.edit.apply(null,arguments)}}}),t("mp-popover",{staticClass:"text-[0px]",attrs:{trigger:"click",width:300,disabled:e.disabledPopover},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"mb-2 text-center text-sm font-medium"},[e._v(e._s(e.popoverTitle))]),t("div",{staticClass:"text-center text-sm text-opblack_1"},[e._v(e._s(e.popoverContent))])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"flex justify-center"},[t("mp-button",{on:{click:e.closePopover}},[e._v("取消")]),t("mp-button",{attrs:{type:"warn"},nativeOn:{click:function(t){return e.trash.apply(null,arguments)}}},[e._v("删除")])],1)]},proxy:!0},{key:"target",fn:function(){return[t("div",[e.loading?e._e():t("mask-icon",{staticClass:"icon-trash2 relative -right-[3px] h-4 w-4 cursor-pointer text-black_1",class:e.popoverVisible?"visible":"invisible",attrs:{name:"trash2"},nativeOn:{click:function(t){return e.handleClickTrash.apply(null,arguments)}}})],1)]},proxy:!0}]),model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}})],1)]),t("div",{staticClass:"flex justify-center text-xs text-opblack_2"},[e.loading?e._e():t("mask-icon",{staticClass:"mr-0.5 inline-block h-4 w-4 shrink-0",attrs:{name:e.icon}}),t("span",{staticClass:"max-w-[90px] truncate text-center",attrs:{title:e.name}},[e._v(e._s(e.name))])],1)])},Qi=[],ji=s.ZP.extend({components:{},props:{picUrl:String,showEdit:{type:Boolean,default:!1},icon:String,name:{type:String,default:""},popoverTitle:String,popoverContent:String,loading:Boolean},data:function(){return{popoverVisible:!1}},computed:{disabledPopover:function(){return!this.popoverContent&&!this.popoverTitle}},methods:{closePopover:function(){document.documentElement.click()},edit:function(){this.$emit("edit")},trash:function(){this.$emit("trash")},handleClickTrash:function(){this.disabledPopover&&this.trash()}}}),Hi=ji,Gi=(0,g.Z)(Hi,qi,Qi,!1,null,"17616e18",null),Wi=Gi.exports,zi=i(9980),Vi=i.n(zi),Ji=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"StoryItem"},[t("div",{staticClass:"relative mb-1 rounded border border-solid border-opblack_4 bg-white px-4 pb-2"},[e._t("drag"),e._t("drag-icon"),t("div",{staticClass:"flex items-center justify-center py-2"},[t("img",{staticClass:"h-[120px] w-[90px] object-contain",attrs:{src:e.pic}})]),t("div",{staticClass:"flex justify-end"},[t("mask-icon",{staticClass:"icon-trash2 invisible relative -right-[3px] h-4 w-4 cursor-pointer text-opblack_1",attrs:{name:"trash2"},nativeOn:{click:function(t){return e.trash.apply(null,arguments)}}})],1)],2),t("div",{staticClass:"flex justify-center text-xs text-opblack_2"},[t("mask-icon",{staticClass:"mr-0.5 inline-block h-4 w-4 shrink-0",attrs:{name:e.isPicStory?"pic":"video"}}),t("span",{staticClass:"max-w-[90px] truncate",attrs:{title:e.storyInfo.mediaName}},[e._v(e._s(e.storyInfo.mediaName))])],1)])},Ki=[],Yi=s.ZP.extend({components:{},props:{storyInfo:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{pic:function(){return this.isPicStory?this.storyInfo.mediaUrl:this.storyInfo.mediaThumbnailUrl},isPicStory:function(){return 1===this.storyInfo.mediaType}},methods:{trash:function(){this.$emit("trash")}}}),Xi=Yi,$i=(0,g.Z)(Xi,Ji,Ki,!1,null,"1aa8adcd",null),en=$i.exports,tn=(0,Ce._p)("cover"),nn=tn.mapState,an=s.ZP.extend({name:"StoryMake",components:{AddFinderMaterial:Bi,MaterialItem:Wi,draggable:Vi(),StoryItem:en},data:function(){return{maxMediaLength:5,curCheckedImgIndex:0,curCheckImgType:"",curUploadFileList:[],isUploading:!1,curUploadingFile:{},showBigImgDialog:!1,curUploadType:""}},props:{OfinderInfo:{},setOfinderInfo:Function,value:{type:Array,default:function(){return[]}},cover:{type:Object,default:function(){return{}}},storyDesc:String,isDisplayStatus:Boolean},watch:{value:function(){0==this.value.length&&this.setOfinderInfo({})}},computed:(0,ve.Z)((0,ve.Z)({},nn(["actionAuthInfo"])),{},{uploadUrl:function(){return"img"===this.curUploadType?"".concat($t.qk,"?type=story"):$t.Dp},storyMediaList:function(){return this.value.map((function(e){return e.media}))},jumpType:function(){var e,t,i,n,a,r=this.cover;return(null===r||void 0===r||null===(e=r.packetMaterial)||void 0===e||null===(t=e.actionList)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.actionType)||(null===(n=this.actionAuthInfo)||void 0===n||null===(a=n.action)||void 0===a?void 0:a.actionType)},canAddMoreMedia:function(){var e=this,t=e.storyMediaList,i=e.maxMediaLength;return t.length!==i}}),methods:{checkMove:function(e){var t=e.moved,i=t.oldIndex,n=t.newIndex;this.$emit("setStorySort",{oldIndex:i,newIndex:n})},beforeUpload:function(e){var t=this,i=e.type.search("video")>-1;this.curUploadType=i?"video":"img";var n=new FileReader;if(i){var a=new Promise((function(i,n){if(e.size>10485760)return t.errorTip("素材过大"),n(new Error("video is too big"));t.curUploadingFile={url:URL.createObjectURL(e)};var a=t.$refs.hiddenVideo;a.onloadeddata=function(){var e=a.videoWidth,r=a.videoHeight,o=a.duration;if(!e&&!r)return t.errorTip("视频编码格式需为 MP4（H.264/AVC）"),n(new Error("video code is not right"));if(o>16)return t.errorTip("视频时长需不超过或等于15s"),n(new Error("video is wrong length"));var s=e/r;if(s>1.78||s<.5625||e<720)return t.errorTip("视频宽度不可低于720像素，宽高比需在16:9-3:5之间"),n(new Error("video is wrong size"));t.curUploadingFile.width=e,t.curUploadingFile.height=r,i()},a.onerror=function(){if("img"!==t.curUploadType)return t.errorTip("视频编码格式需为 MP4（H.264/AVC）"),n(new Error("video code is not right"))}}));return a}var r=new Promise((function(i,a){if(e.size>307200)return t.errorTip("图片大小不可超过300KB"),a(new Error("img is too big"));n.onload=function(e){var n=new Image,r=e.target.result;n.src=r,t.curUploadingFile={url:r},n.onload=function(){if(750!==n.width||1250!==n.height)return t.errorTip("图片尺寸需为 750*1250 像素"),a(new Error("wrong size"));t.curUploadingFile.width=n.width,t.curUploadingFile.height=n.height,i()}}}));return n.readAsDataURL(e),r},setCurStoryDetail:function(e){this.$emit("setStoryDetail",{detail:e,index:this.storyMediaList.length})},handleDel:function(e){this.$emit("delStoryDetail",e)},handleUploadFileChange:function(e){var t=e.file;this.isUploading=!1;var i=t.type.search("video")>-1;if("uploading"===t.status)this.isUploading=!0;else{if("done"===t.status){var n=t.size,a=t.name,r=t.response,o=-10005,s=-10008;if(r.base_response.ret===o)return this.errorTip("视频码率不能高于1600kbit/s，请重新上传。"),void(this.curUploadFileList=[]);if(r.base_response.ret===s)return this.errorTip("视频yuv格式应为420"),void(this.curUploadFileList=[]);if(-2===r.base_response.ret)return this.errorTip("仅支持PNG/JPG/JPEG格式"),void(this.curUploadFileList=[]);if(-10009===r.base_response.ret)return this.errorTip("视频编码格式需为 MP4（H.264/AVC）"),void(this.curUploadFileList=[]);if(-12005===r.base_response.ret)return this.errorTip("视频像素宽高比非1:1"),(0,Ht.H)("封面视频像素宽高比非1:1"),void(this.curUploadFileList=[]);if(0!==r.base_response.ret)return this.errorTip("封面故事素材上传失败，请重试上传，或联系客服"),void(this.curUploadFileList=[]);var c={mediaSize:n,mediaName:a,mediaType:i?me.Je.Video:me.Je.Image,mediaUrl:r.url||r.video_url,mediaMd5:r.md5||r.video_md5};return i&&(c.mediaThumbnailUrl=r.thumb_url,c.mediaThumbnailMd5=r.thumb_md5,c.mediaFuzzyUrl=r.fuzzy_url,c.mediaFuzzyMd5=r.fuzzy_md5),c.mediaWidth=this.curUploadingFile.width,c.mediaHeight=this.curUploadingFile.height,this.setCurStoryDetail({media:c}),void(this.curUploadFileList=[])}if("error"===t.status)this.errorTip("封面故事素材上传失败，请重试上传，或联系客服。");else if("removed"===t.status)return this.curUploadFileList=[],void this.setCurStoryDetail({media:{}})}this.curUploadFileList=[t]},handleAddFinderMaterial:function(e){e.OfinderInfo&&this.setOfinderInfo(e.OfinderInfo),this.setCurStoryDetail({media:{mediaSize:0,mediaName:"视频号素材.mp4",mediaType:me.Je.Video,mediaUrl:e.videoUrl,mediaMd5:"",mediaThumbnailUrl:e.thumbUrl,mediaThumbnailMd5:"",mediaFuzzyUrl:e.fuzzyThumbUrl,mediaFuzzyMd5:"",mediaWidth:e.width,mediaHeight:e.height},hasBgm:e.hasBgm,exportId:e.exportId})},moveForward:function(e){var t=this.value[e+1];this.$emit("setStoryDetail",{detail:this.value[e],index:e+1}),this.$emit("setStoryDetail",{detail:t,index:e})},moveBackward:function(e){var t=this.value[e-1];this.$emit("setStoryDetail",{detail:this.value[e],index:e-1}),this.$emit("setStoryDetail",{detail:t,index:e})},checkBigImg:function(e){this.curCheckImgType="story";var t=this.$refs.bigImgWrap,i=document.querySelectorAll(".media-list .card"),n=i[e];t.innerHTML="",t.appendChild(n.cloneNode(!0)),this.curCheckedImgIndex=e,this.showBigImgDialog=!0},checkBigDetailImg:function(e){this.curCheckImgType="detail";var t=this.$refs.bigImgWrap,i=document.querySelectorAll(".detail-preview-list .card"),n=i[e];t.innerHTML="",t.appendChild(n.cloneNode(!0)),this.curCheckedImgIndex=e,this.showBigImgDialog=!0},prevCheckedImg:function(){"detail"!==this.curCheckImgType?this.checkBigImg(this.curCheckedImgIndex-1):this.checkBigDetailImg(this.curCheckedImgIndex-1)},nextCheckedImg:function(){"detail"!==this.curCheckImgType?this.checkBigImg(this.curCheckedImgIndex+1):this.checkBigDetailImg(this.curCheckedImgIndex+1)}},filters:{prettySize:function(e){if(e)return ai(e).toUpperCase()}}}),rn=an,on=(0,g.Z)(rn,Yt,Xt,!1,null,"08bc2497",null),sn=on.exports,cn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticStyle:{display:"inline-block"}},[t("a",{on:{click:e.download}},[e._t("default")],2),e.isLoading?[t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"}),t("div",{staticClass:"text"},[e._v(e._s(e.loadingText))])])]:e._e()],2)},ln=[],un=(i(4723),new z.ZP),dn=s.ZP.extend({name:"DownloadLink",props:{url:{type:String,required:!0},name:{type:String,required:!0},downloadType:String},data:function(){return{isLoading:!1,loadingText:""}},methods:{downloadFile:function(){var e=this.name.match(/\.(\w+)$/),t="",i=this.name.replace(/\.(\w+)$/,"");e&&(t=e[1]),un.downloadFile(this.url,i,t)},download:function(){var e=this;if("ajax"===this.downloadType){var t=this,i=function(){if(200===this.status){t.isLoading=!1;var e=document.createElement("a");e.href=window.URL.createObjectURL(this.response),e.download="".concat(t.name),e.click()}},n=function(e){t.isLoading=!0;var i=Math.floor(e.loaded/e.total*100)+"%";t.loadingText="材料下载中(".concat(i,")")},a=function(){(0,Ht.H)("downloadLink error");var t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href",e.url),t.click()};un.downloadAjax(this.url,{onload:i,onprogress:n,onerror:a})}else this.downloadFile()}}}),pn=dn,vn=(0,g.Z)(pn,cn,ln,!1,null,"5e1918f2",null),mn=vn.exports,fn=new z.ZP,hn=s.ZP.extend({name:"CoverDetailMainInfo",data:function(){return{showPreviewQrcodeDialog:!1,showBigImgDialog:!1,bigImgUrl:"",previewQrcoeUrl:"",curPreviewIndex:-1,isCanEdit:!0}},props:{cover:{type:Object,default:function(){return{}}}},components:{MaterialPictures:qt,StoryMake:sn,DownloadLink:mn,CoverPreviewDialog:Kt},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,e.$route.query.showmaininfo&&(fn.baseActionReport({actionType:"13",coverId:e.cover.orderId||"",processType:"",authorId:m.U6.user.authorId,editType:""}),n=e.$refs.wrapper,n.scrollIntoView()),t.next=4,m.U6.getUserInfo();case 4:1!=m.U6.user.isSecondary||8&m.U6.user.managerFlag||(i.isCanEdit=!1);case 5:case"end":return t.stop()}}),t)})))()},computed:{showStory:function(){return!!(this.cover&&this.cover.packetMaterial&&this.cover.packetMaterial.storyDetailList&&this.cover.packetMaterial.storyDetailList.length>0)},story:function(){return this.cover&&this.cover.packetMaterial?{storyTitle:this.cover.packetMaterial.storyTitle,storyDescription:this.cover.packetMaterial.storyDescription}:{}},materials:function(){return(0,_e.GM)(this.cover)},coverType:function(){var e,t,i;return null!==(e=this.cover)&&void 0!==e&&null!==(t=e.packetMaterial)&&void 0!==t&&null!==(i=t.recWidgetImage)&&void 0!==i&&i.mediaUrl?2:1}},methods:{toadmin:function(){this.$router.push({name:"administrator"})},resetBtn:function(e){this.$emit("btnClick",9)},handleMobilePreview:function(){var e=this;e.showPreviewQrcodeDialog=!0}},filters:{prettySize:function(e){return ai(e).toUpperCase()}}}),gn=hn,yn=(0,g.Z)(gn,He,Ge,!1,null,"10e0cfd8",null),bn=yn.exports,wn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"info-title"},[e._v("订单记录")]),e.cover.orderStat.totalPurchaseCount?t("div",{staticClass:"desc"},[e._v("累计购买红包封面数量："+e._s(e.cover.orderStat.totalPurchaseCount)+"个")]):e._e(),e.cover.orderStat.totalPurchaseTime?t("div",{staticClass:"desc"},[e._v("累计购买红包封面发放时长："+e._s(e.cover.orderStat.totalPurchaseTime)+"小时")]):e._e(),t("a-table",{staticClass:"order-table",attrs:{columns:e.columns,dataSource:e.list,pagination:!1,locale:{emptyText:" "}},scopedSlots:e._u([{key:"count",fn:function(i){return[t("span",[e._v(e._s(i.count))]),i.participateEmojirainActivity?t("mp-popover",{attrs:{trigger:"hover",width:548},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"distribution-popover"},[t("EmotionRainTipEntry"),t("EmotionRainDesc2")],1)]},proxy:!0},{key:"target",fn:function(){return[t("Tag",{staticStyle:{"margin-left":"4px","margin-top":"-3px"}},[e._v("限时活动")])]},proxy:!0}],null,!0)}):e._e()]}},{key:"sendToReceive",fn:function(){return[t("div",{staticClass:"send-to-receive"},[e._v(" 已领取/已发放 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("「已领取」数量包含「通过推广领取」数量")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"expiredTitle",fn:function(){return[t("div",{staticClass:"send-to-receive"},[e._v(" 发放与领取有效期 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("有效期截止日当天的24点前均可发放")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"statusText",fn:function(i){return[t("span",{class:{"waiting-pay":"1"==i.status}},[e._v(e._s(i.statusText))])]}},{key:"action",fn:function(i){return[t("div",{staticClass:"detail"},[t("a",{on:{click:function(t){return e.handleToDetail(i)}}},[e._v("订单与发放详情")]),t("Remark",{attrs:{"remark-info":i.remarkInfo,"order-id":e.cover.orderId,"order-status":e.cover.orderStatus}})],1)]}}])}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.payInfoList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{mode:"normal",current:e.curPage,"per-page":e.pageNum,"total-num":e.payInfoList.length},on:{"page-change":e.pageChange}}):e._e()],1),t("GenerateCoverDialog",{attrs:{cover:e.cover,payInfo:e.checkedPayInfoList},on:{refreshCover:e.handleGenCoverRefresh,updateMergeDetail:e.updateMergeDetail,cancel:e.handleGenerateCoverCancel}}),t("MergeResultDialog",{attrs:{"merge-info":e.mergeInfo},model:{value:e.mergeResultDialogVisible,callback:function(t){e.mergeResultDialogVisible=t},expression:"mergeResultDialogVisible"}}),t("mp-dialog",{ref:"payInfoDialog",staticClass:"payinfo-dialog",attrs:{value:e.isShowDialog,width:622},on:{"visible-change":e.handlePayInfoDialogVisibleChange},scopedSlots:e._u([{key:"header",fn:function(){return[t("h4",[e._v("选择可发放封面的订单")])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closePayInfoDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:0===e.checkTransactionIds.length},on:{click:function(t){return t.preventDefault(),e.goToChoosenPayInfo.apply(null,arguments)}}},[e._v("下一步")])],1)]},proxy:!0}])},[t("div",{staticClass:"payinfo-dialog-header-desc"},[e._v(" 支持多个订单合并发放 "),t("mp-popover",{staticClass:"fission-disable-popover",attrs:{trigger:"hover",width:424},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"payinfo-popover-content"},[t("p",{staticClass:"mb-2"},[e._v("合并发放可将同款封面的多个订单，生成一个「多人领取」的发放材料。")]),t("p",{staticClass:"mb-1 font-medium"},[e._v("1. 合并发放如何扣除库存？")]),t("p",{staticClass:"mb-2"},[e._v("生成发放材料及用户领取时，都将优先从有效期更短的订单中扣除库存。")]),t("p",{staticClass:"mb-1 font-medium"},[e._v("2. 如何查看合并发放记录及数据？")]),t("p",{staticClass:"mb-1"},[e._v("方法1：进入任一被合并的订单详情页，找到对应的发放记录，点击「合并发放详情」;")]),t("p",{staticClass:"mb-2"},[e._v("方法2：进入「订单/发放记录」>「发放记录」，找到合并发放记录。")])])]},proxy:!0},{key:"target",fn:function(){return[t("div",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}])}),e.hasSpecialPayInfo||e.orderWithQuotaGift?t("span",{staticClass:"ml-1 inline-block"},[e._v("，奖励兑换卡暂不支持合并发放。")]):e._e()],1),e.countPayInfoList.length?t("div",{staticClass:"content"},[t("a-table",{key:e.tableKey,ref:"countOrderTableRef",staticClass:"order-table",attrs:{columns:e.chooseColumns,dataSource:e.countPayInfoList,pagination:!1,locale:{emptyText:"暂无记录"},"row-key":"transactionId","row-selection":{selectedRowKeys:e.checkTransactionIds,onChange:e.onTransactionIdSelectChange,getCheckboxProps:e.disableOrders,columnTitle:e.columnTitle}},nativeOn:{scroll:function(t){return e.handleOrderTableScroll.apply(null,arguments)}},scopedSlots:e._u([{key:"leftNum",fn:function(i){return[t("span",{staticClass:"left-num"},[e._v(e._s(i.leftNum))])]}},{key:"expired",fn:function(i){return[t("div",{staticClass:"expired"},[t("span",[e._v(e._s(i.expired))]),t("div",[e._v(" 剩余 "),t("span",{staticClass:"left-days"},[e._v(e._s(i.leftDays))]),t("span",[e._v("天")])])])]}}],null,!1,3585609957)})],1):e._e(),e.timePayInfoList.length?t("div",{staticClass:"content"},[t("div",{staticClass:"table-title"},[e._v("按时长购买的订单：")]),t("a-table",{staticClass:"order-table time-table",attrs:{columns:e.chooseTimeColumns,dataSource:e.timePayInfoList,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"expired",fn:function(i){return[t("div",{staticClass:"expired"},[t("span",[e._v(e._s(i.expired)+" 剩余")]),t("span",{staticClass:"left-days"},[e._v(e._s(i.leftDays))]),t("span",[e._v("天")])])]}},{key:"radio",fn:function(i){return[t("mp-checkbox-group",{staticClass:"payinfo-checkboxgroup",model:{value:e.checkTransactionIds,callback:function(t){e.checkTransactionIds=t},expression:"checkTransactionIds"}},[t("mp-checkbox",{attrs:{value:i.transactionId,label:i.transactionId,disabled:+i.leftDays<=0}})],1)]}}],null,!1,3438099172)})],1):e._e()])],1)},Cn=[],_n=(i(32023),i(27484)),xn=i.n(_n),In=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ui-tag"},[e._t("default")],2)},kn=[],Tn={},Sn=(0,g.Z)(Tn,In,kn,!1,null,"3aeeeed8",null),An=Sn.exports,Dn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-desc"},[t("h3",[e._v("该红包封面已参与活动。")]),e.isOrganization?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",{staticClass:"second-text"},[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),t("p",{staticClass:"second-text"},[e._v(" 此红包封面已符合微信表情雨活动参与条件，可以在发放红包封面时选择表情雨发放方式，让红包封面有机会出现在福袋中，被用户领取。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动时间：")]),t("p",{staticClass:"second-text"},[e._v(" 福袋里的红包封面将在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e(),e.isPersonal?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",{staticClass:"second-text"},[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),e._m(0),t("p",{staticClass:"second-text"},[e._v(" 活动中平台赠送的数量与你此次购买的数量成正比，相关数据可以在活动结束后查看。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动时间：")]),t("p",{staticClass:"second-text"},[e._v(" 参加活动的红包封面在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e()],2)},Pn=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"second-text"},[e._v(" 此款红包封面已参与活动，将有机会出现在福袋中，被更多的用户领取。通过福袋领取的红包封面均由平台"),t("span",{staticClass:"emotion-rain-warn"},[e._v("赠送")]),e._v("，不消耗你所购买的数量。 ")])}],Zn=i(90520),Un=i.n(Zn),En=s.ZP.extend({computed:{user:function(){return m.U6.user},isOrganization:function(){var e=this;return e.user.principalType===v.eZ.organization},isPersonal:function(){var e=this;return e.user.principalType===v.eZ.person}},filters:{formatTime:function(e){return Un()("yyyy年MM月dd日",new Date(1e3*e))}}}),Rn=En,Mn=(0,g.Z)(Rn,Dn,Pn,!1,null,"46f31d66",null),Ln=Mn.exports,Fn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-tips"},[t("svg-icon",{staticClass:"emotion-rain-icon",attrs:{name:"emotion-rain"}}),t("span",[e._v("限时活动·微信表情雨")]),e.showDetailEntry?t("a",{on:{click:function(t){return e.$emit("click")}}},[e._v("详情")]):e._e()],1)},Nn=[],On=s.ZP.extend({props:{showDetailEntry:{type:Boolean,default:function(){return!1}}}}),Bn=On,qn=(0,g.Z)(Bn,Fn,Nn,!1,null,"4f56042e",null),Qn=qn.exports,jn=i(57448),Hn=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.showRemarkComponent?t("div",{ref:"domRemark"},[e.curRemarkInfo&&e.curRemarkInfo.remarks.length?t("mp-popover",{class:["remark-popover"],attrs:{trigger:"click",position:"up-right"},on:{show:e.initListScroll,hide:e.handlePopoverHide},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"btn-add-desc"},[e._v("描述("+e._s(e.curRemarkInfo.remarks.length)+")")])]},proxy:!0},{key:"content",fn:function(){return[t("div",[t("h6",{staticClass:"remark-title"},[e._v(" 描述("+e._s(e.curRemarkInfo.remarks.length)+") "),e.showAddBtn?t("a",{staticClass:"btn-add-remark",on:{click:e.showAddDesc}},[e._v("添加")]):e._e()]),e.addDescVisible?t("div",{staticClass:"remark-bar"},[t("RemarkTextarea",{staticClass:"remark-textarea",attrs:{"remark-id":e.curRemarkInfo.remarkId},on:{"cancel-edit":function(t){e.addDescVisible=!1},"edit-success":e.addSuccess}})],1):e._e(),t("div",{ref:"domRemarkList",staticClass:"remark-list"},e._l(e.curRemarkInfo.remarks,(function(i,n){return t("remark-item",{key:i.updateTime,attrs:{"remark-item-info":i,"remark-id":e.curRemarkInfo.remarkId,"has-own-remark":e.curRemarkInfo.hasOwnRemark,myRemarkIndex:e.curRemarkInfo.myRemarkIndex,"editing-id":e.editingId,"last-index":n===e.curRemarkInfo.remarks.length-1},on:{"edit-success":e.handleEditSuccess,"delete-success":e.handleDeleteSuccess,"know-delete":e.handleKnowdelete,"is-editing":e.changeEditingId}})})),1)])]},proxy:!0}],null,!1,397440615),model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}}):t("mp-popover",{class:["remark-popover",{"remark-newadd-popover":!e.popoverVisible}],attrs:{position:"up-right"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"btn-add-desc"},[t("svg-icon",{staticClass:"plus-icon",attrs:{name:"plus-circle"}}),e._v(" 描述 ")],1)]},proxy:!0},{key:"content",fn:function(){return[t("RemarkTextarea",{staticClass:"add-new-textarea",attrs:{title:"添加描述","remark-id":e.curRemarkInfo.remarkId},on:{"cancel-edit":function(t){e.popoverVisible=!1},"edit-success":e.addSuccess}})]},proxy:!0}],null,!1,4060238571),model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}})],1):e._e()},Gn=[],Wn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"RemarkTextarea-Component"},[e.title?t("h6",{staticClass:"add-remark-title"},[e._v(e._s(e.title))]):e._e(),t("mp-input",{attrs:{multi:"",filter:"trim",countable:"",placeholder:"输入描述内容","wrap-class":"remark-textarea",maxlength:e.MAX_LENGTH},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),t("div",{staticClass:"add-bar"},[t("mp-button",{staticClass:"btn-cancel",attrs:{type:"default"},on:{click:e.cancelEdit}},[e._v(" 取消 ")]),t("mp-button",{attrs:{type:"primary",loading:e.addLoading,disabled:e.addBtnDisabled},on:{click:e.addRemark}},[e._v(" "+e._s(e.prevContent?"修改":"添加")+" ")])],1)],1)},zn=[],Vn=i(18159),Jn=new Vn.ZP,Kn=s.ZP.extend({components:{},props:{title:String,remarkId:Object,remarkIndex:Number,prevContent:{type:String,default:""}},data:function(){return{content:this.prevContent,addLoading:!1,MAX_LENGTH:100}},computed:{addBtnDisabled:function(){return 0===this.content.length||this.content.length>this.MAX_LENGTH||this.prevContent===this.content}},created:function(){},methods:{cancelEdit:function(){this.content=this.prevContent,this.$emit("cancel-edit")},addRemark:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.addLoading=!0,t.prev=1,void 0===e.remarkIndex){t.next=8;break}return t.next=5,Jn.coverchangeremark({remarkId:e.remarkId,newRemark:e.content,remarkIndex:e.remarkIndex,changeType:Vn.tk.EDIT});case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,Jn.coveraddremark({remarkId:e.remarkId,remark:e.content});case 10:a=t.sent;case 11:0===(null===(i=a)||void 0===i||null===(n=i.baseResponse)||void 0===n?void 0:n.ret)?e.$emit("edit-success"):e.errorTip("添加失败，请重试");case 12:return t.prev=12,e.addLoading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,,12,15]])})))()}}}),Yn=Kn,Xn=(0,g.Z)(Yn,Wn,zn,!1,null,"0e6d5b91",null),$n=Xn.exports,ea=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"domRemarkItem",staticClass:"remark-item"},[e.remarkItemInfo.hasDeletedByAdmin?t("div",{staticClass:"mask-delete"},[e._v("该描述已被管理员删除")]):e._e(),e.isEditMode?t("remark-textarea",{attrs:{prevContent:e.remarkItemInfo.remark,remarkId:e.remarkId,remarkIndex:e.remarkItemInfo.remarkIndex},on:{"cancel-edit":function(t){e.isEditMode=!1},"edit-success":function(t){return e.$emit("edit-success")}}}):t("div",{class:["remark-display",{"delete-active":e.remarkItemInfo.hasDeletedByAdmin}]},[t("div",{staticClass:"remark-content"},e._l(e.remarkContentArr,(function(i,n){return t("p",{key:n},[e._v(" "+e._s(i)+" ")])})),0),t("div",{staticClass:"remark-detail"},[t("div",{staticClass:"remark-detail__info"},[t("div",{staticClass:"remark-detail__info__authorNickname"},[e._v(" "+e._s(e.remarkItemInfo.authorNickname)+" ")]),t("div",{staticClass:"remark-detail__info__updateTime"},[e._v(" "+e._s(e.updateTime)+" ")])]),t("div",{staticClass:"remark-detail__action"},[e.remarkItemInfo.canChange?t("a",{staticClass:"btn-remark-edit",on:{click:e.editRemark}},[e._v("修改")]):e._e(),e.remarkItemInfo.canDelete?t("mp-popover",{staticClass:"popover-remark-del",attrs:{position:e.lastIndex?"down-right":"up-right"},on:{show:e.emitIsEditing},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"btn-remark-del"},[e._v("删除")])]},proxy:!0},{key:"content",fn:function(){return[t("p",{staticStyle:{"text-align":"center"}},[e._v("删除后无法撤回，删除该描述？")])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.showDeleteDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",size:"mini",loading:e.isDeleteRemarking},on:{click:function(t){return e.deleteRemark(e.remarkId,e.remarkItemInfo.remarkIndex)}}},[e._v("删除")])],1)]},proxy:!0}],null,!1,2604931972),model:{value:e.showDeleteDialog,callback:function(t){e.showDeleteDialog=t},expression:"showDeleteDialog"}}):e._e()],1)])])],1)},ta=[],ia=new Vn.ZP,na=s.ZP.extend({components:{RemarkTextarea:$n},props:{remarkId:Object,hasOwnRemark:Boolean,myRemarkIndex:Number,editingId:Number,lastIndex:Boolean,remarkItemInfo:{type:Object,default:function(){return{remark:"",authorNickname:"",updateTime:0,deleteTime:0,remarkIndex:0,canDelete:!1,canChange:!1,hasDeletedByAdmin:!1}}}},data:function(){return{showDeleteDialog:!1,isDeleteRemarking:!1,isEditMode:!1,hasSendKnowDelete:!1,myEditingId:0}},computed:{updateTime:function(){return xn()(1e3*this.remarkItemInfo.updateTime).format("YYYY/MM/DD HH:mm")},remarkContentArr:function(){var e=this.remarkItemInfo.remark.split("\n");return e}},watch:{editingId:function(e){e!==this.myEditingId&&this.isEditMode&&(this.isEditMode=!1)}},mounted:function(){this.initDeleteListener()},methods:{emitIsEditing:function(){this.myEditingId=+new Date,this.$emit("is-editing",this.myEditingId)},sendKnownDelete:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ia.coverchangeremark({remarkId:e.remarkId,remarkIndex:e.remarkItemInfo.remarkIndex,changeType:Vn.tk.KNOWN_DELETE});case 2:n=t.sent,0===(null===n||void 0===n||null===(i=n.baseResponse)||void 0===i?void 0:i.ret)&&(e.hasSendKnowDelete=!0,e.$emit("know-delete"));case 4:case"end":return t.stop()}}),t)})))()},initDeleteListener:function(){var e=this;if(this.remarkItemInfo.hasDeletedByAdmin){var t=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&e.remarkItemInfo.hasDeletedByAdmin&&!e.hasSendKnowDelete&&(console.log("删除备注可见"),e.sendKnownDelete())}))}),{threshold:.8}),i=this.$refs.domRemarkItem;t.observe(i)}},editSuccess:function(){this.isEditMode=!1,this.$emit("edit-success")},editRemark:function(){this.isEditMode=!0,this.emitIsEditing()},deleteRemark:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i.isDeleteRemarking=!0,n.prev=1,n.next=4,ia.coverdeleteremark({remarkId:e,remarkIndex:t});case 4:o=n.sent,0===(null===o||void 0===o||null===(a=o.baseResponse)||void 0===a?void 0:a.ret)?i.$emit("delete-success"):i.errorTip("删除失败，请重试");case 6:return n.prev=6,i.isDeleteRemarking=!1,n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})))()}}}),aa=na,ra=(0,g.Z)(aa,ea,ta,!1,null,"112927ae",null),oa=ra.exports,sa=new Vn.ZP,ca=new z.ZP,la=s.ZP.extend({props:{remarkInfo:{type:Object,default:function(){return{ret:0,remarkId:{idType:Vn.Xd.ORDER,id:""},remarks:[],hasOwnRemark:!1,myRemarkIndex:-1}}},orderStatus:{type:[String,Number],required:!0},orderId:{type:[String,Number],required:!0}},components:{RemarkItem:oa,RemarkTextarea:$n},data:function(){return{MAX_REMARK_LENGTH:10,addDescVisible:!1,curRemarkInfo:null,fetchLoading:!1,popoverVisible:!1,needFetchOnHide:!1,editingId:0,myEditingId:0}},computed:{showRemarkComponent:function(){return this.curRemarkInfo&&this.curRemarkInfo.remarkId.id},showAddBtn:function(){if(!this.curRemarkInfo)return!1;var e=this.curRemarkInfo,t=e.hasOwnRemark,i=e.remarks;return!t&&!this.addDescVisible&&i.length<this.MAX_REMARK_LENGTH}},watch:{remarkInfo:{handler:function(e){this.curRemarkInfo=e},immediate:!0},isDeleteing:function(){this.addDescVisible=!1},editingId:function(e){e!==this.myEditingId&&(this.addDescVisible=!1)}},created:function(){},methods:{report:function(e){ca.baseActionReport({actionType:e,coverId:this.orderId,processType:this.orderStatus,authorId:m.U6.user.authorId,page:this.remarkInfo.remarkId.idType})},handleEditSuccess:function(){this.fetchRemarkInfo(),this.report("102")},handleDeleteSuccess:function(){this.fetchRemarkInfo(),this.report("103")},changeEditingId:function(e){this.editingId=e},addOverflowY:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:if(i=e.$refs.domRemarkList,i){t.next=5;break}return t.abrupt("return");case 5:n=i.scrollHeight,a=i.offsetHeight,a<n&&i.classList.add("overflow-y");case 8:case"end":return t.stop()}}),t)})))()},initListScroll:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:if(i=e.$refs.domRemarkList,i){t.next=5;break}return t.abrupt("return");case 5:n=i.scrollHeight,a=i.offsetHeight,a<n&&(i.classList.add("overflow-y"),i.classList.add("mark-scroll-bottom"),i.addEventListener("scroll",(function(){i.scrollTop+i.offsetHeight>=i.scrollHeight?i.classList.remove("mark-scroll-bottom"):i.classList.add("mark-scroll-bottom")})));case 8:case"end":return t.stop()}}),t)})))()},handleKnowdelete:function(){this.needFetchOnHide=!0},handlePopoverHide:function(){this.needFetchOnHide&&this.fetchRemarkInfo(),this.addDescVisible=!1},addSuccess:function(){this.addDescVisible=!1,this.fetchRemarkInfo(),this.report("101")},showAddDesc:function(){this.addDescVisible=!0,this.myEditingId=+new Date,this.editingId=this.myEditingId},fetchRemarkInfo:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fetchLoading=!0,t.prev=1,t.next=4,sa.covergetsingleremark({remarkId:e.remarkInfo.remarkId});case 4:n=t.sent,0===(null===n||void 0===n||null===(i=n.baseResponse)||void 0===i?void 0:i.ret)&&(e.curRemarkInfo=n.result,e.addOverflowY(),0===e.curRemarkInfo.remarks.length&&document.body.click());case 6:return t.prev=6,e.fetchLoading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})))()}}}),ua=la,da=(0,g.Z)(ua,Hn,Gn,!1,null,"c9eb5e34",null),pa=da.exports,va=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{ref:"dialog",class:[1==e.principalType?"person-dialog generate-dialog":"generate-dialog"],attrs:{title:"发放红包封面",value:e.isShowDialog,width:584},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"warn"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v(e._s(e.isCombineGen?"上一步":"取消"))]),0===e.distributionType?t("mp-button",{attrs:{type:"primary",loading:e.startGenerateIng},on:{click:function(t){return t.preventDefault(),e.startGenerate.apply(null,arguments)}}},[e._v("确定")]):e._e()],1)]},proxy:!0}])},[e.isBizSpringPayInfo||e.isEmotionPayInfo||e.isQuotaGift?t("div",{staticClass:"-mt-10 pb-8 text-opblack_2"},[e.isBizSpringPayInfo?t("div",[e._v(" 公众号创作者奖励兑换卡，仅支持生成「多人领取的链接」、使用 "),t("a",{attrs:{href:"javascript:;"},on:{click:e.goBizGenerateDoc}},[e._v("公众号「红包封面」组件")]),e._v(" 发放。 ")]):e._e(),e.isEmotionPayInfo?t("div",[e._v(" 表情艺术家奖励兑换卡，仅支持生成「多人领取的链接」、在 "),t("a",{attrs:{href:"javascript:;"},on:{click:e.goEmotionGenreateDoc}},[e._v("表情专辑")]),e._v(" 中发放。 ")]):e._e(),e.isQuotaGift?t("div",[e._v("此奖励兑换卡仅支持通过「封面推广」发放。")]):e._e()]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.distributionType,expression:"distributionType === 0"}]},[t("mp-form",{ref:"genForm",staticClass:"gen-form",attrs:{"label-width":117,model:e.form,rules:e.formRule}},[e.isQuotaGift?e._e():t("mp-form-item",{attrs:{prop:"curGenerateType"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{},[e._v("发放材料")])])]},proxy:!0}],null,!1,685755)},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.form.curGenerateType,callback:function(t){e.$set(e.form,"curGenerateType",t)},expression:"form.curGenerateType"}},[t("mp-radio",{attrs:{value:1,disabled:e.disableGenTypeQRCode}},[e._v("二维码")]),t("mp-radio",{attrs:{value:3,disabled:e.disableGenTypeCdKey}},[e._v("领取序列号")]),t("mp-radio",{attrs:{value:2,disabled:e.disableGenTypeUrl}},[e._v("领取链接")])],1)],1),e.form.curGenerateType?t("mp-form-item",{staticClass:"receive-type-item",attrs:{prop:"curMapType"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{},[e._v("领取方式")])])]},proxy:!0}],null,!1,1382522363)},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.form.curMapType,callback:function(t){e.$set(e.form,"curMapType",t)},expression:"form.curMapType"}},[t("div",[t("mp-popover",{staticClass:"maptype-popover",attrs:{trigger:"hover",width:330,disabled:!e.isCombineGen},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v("合并发放暂不支持「每个发放材料仅一人领取」")])]},proxy:!0},{key:"target",fn:function(){return[t("div",{staticClass:"div"},[t("mp-radio",{class:{"radio-disabled":e.form.needFission},staticStyle:{display:"block","margin-bottom":"10px"},attrs:{value:2,disabled:e.disableReceiveTypeIndividual||e.form.needFission||e.isCombineGen||e.form.isHeat}},[1===e.form.curGenerateType?[t("span",[e._v("每个二维码仅一人领取")]),t("span",{staticClass:"tip"},[e._v("（生成多个二维码）")])]:3===e.form.curGenerateType?[t("span",[e._v("每个序列号仅一人领取")]),t("span",{staticClass:"tip"},[e._v("（生成多个序列号）")])]:2===e.form.curGenerateType?[t("span",[e._v("每个链接仅一人领取")]),t("span",{staticClass:"tip"},[e._v("（生成多个链接）")])]:e._e()],2)],1)]},proxy:!0}],null,!1,3610624841)})],1),t("mp-radio",{attrs:{value:1,disabled:e.disableReceiveTypeShare}},[1===e.form.curGenerateType?[t("span",[e._v("一个二维码可多人领取")]),t("span",{staticClass:"tip"},[e._v("（生成 1 个二维码）")])]:3===e.form.curGenerateType?[t("span",[e._v("一个序列号可多人领取")]),t("span",{staticClass:"tip"},[e._v("（生成 1 个序列号）")])]:2===e.form.curGenerateType?[t("span",[e._v("一个链接可多人领取")]),t("span",{staticClass:"tip"},[e._v("（生成 1 个链接）")])]:e._e()],2)],1)],1):e._e(),t("mp-form-item",{staticClass:"form-item-generateNum",attrs:{prop:"generateNum"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{},[e._v("发放数量")])])]},proxy:!0}])},[t("div",{staticClass:"generate-num"},[t("mp-input",{ref:"generateNumInput",attrs:{placeholder:"请输入可领取的封面数量",disabled:e.disableCustomGenCount,required:!0},on:{input:e.validGenNum},model:{value:e.form.generateNum,callback:function(t){e.$set(e.form,"generateNum",t)},expression:"form.generateNum"}})],1),t("div",{staticClass:"left-num"},[t("span",[e._v("当前剩余红包封面数量")]),t("span",{staticClass:"strong"},[e._v(e._s(e.leftNum))]),t("span",[e._v("个")])])]),e.isQuotaGift?e._e():t("mp-form-item",{staticClass:"receive-type-item btm-border",attrs:{prop:"sendTimeSelect"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{staticStyle:{position:"relative",top:"2px"}},[e._v("生效时间")])])]},proxy:!0}],null,!1,2386264651)},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.form.sendTimeSelect,callback:function(t){e.$set(e.form,"sendTimeSelect",t)},expression:"form.sendTimeSelect"}},[t("mp-radio",{attrs:{value:0}},[t("span",[e._v("立即生效")])]),t("mp-radio",{attrs:{value:1,disabled:e.disabledSetTimer||e.form.isHeat}},[t("span",[e._v("定时生效")])])],1)],1),1==e.form.sendTimeSelect?t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label",staticStyle:{position:"relative",top:"10px"}},[t("span",{},[e._v("设置时间")])])]},proxy:!0}],null,!1,578298835)},[t("div",{staticClass:"time-choice"},[t("div",{staticClass:"time-choice-datepicker"},[t("mp-date-picker",{staticStyle:{"margin-right":"12px"},attrs:{"min-time":e.min},model:{value:e.timeDate,callback:function(t){e.timeDate=t},expression:"timeDate"}}),t("mp-time-picker",{directives:[{name:"show",rawName:"v-show",value:e.showMin,expression:"showMin"}],attrs:{min:e.timeMin,accuracy:"minute",format:"HH:mm"},model:{value:e.timeMinu1,callback:function(t){e.timeMinu1=t},expression:"timeMinu1"}}),t("mp-time-picker",{directives:[{name:"show",rawName:"v-show",value:!e.showMin,expression:"!showMin"}],attrs:{min:e.timeMin2,accuracy:"minute",format:"HH:mm"},model:{value:e.timeMinu2,callback:function(t){e.timeMinu2=t},expression:"timeMinu2"}})],1)])]):e._e(),t("mp-form-item",{attrs:{prop:"heat"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label form-label_optional"},[t("div",{staticStyle:{display:"flex"}},[e._v(" 封面推广 "),t("CoverHeatIntro",{attrs:{"is-quota-gift":e.isQuotaGift}})],1)])]},proxy:!0}])},[t("mp-popover",{staticClass:"maptype-popover",attrs:{trigger:"hover",width:330,disabled:!e.isCombineGen},scopedSlots:e._u([{key:"target",fn:function(){var i;return[t("div",[t("mp-checkbox",{attrs:{disabled:2===e.form.curMapType||1===e.form.sendTimeSelect||e.isQuotaGift||!!e.specifyGroup.length||e.isCombineGen},model:{value:e.form.isHeat,callback:function(t){e.$set(e.form,"isHeat",t)},expression:"form.isHeat"}},[e.isQuotaGift?[e._v("封面通过「封面专区」发放")]:[e._v("封面同时通过「裂变」、「封面专区」发放")]],2),null!==(i=e.cover.coverSetCommInfo)&&void 0!==i&&i.jumpType&&e.form.isHeat?t("div",{staticStyle:{color:"var(--weuiDesktop_Color_OpBlack_1)",display:"flex","align-items":"center","margin-top":"10px"}},[t("span",{staticClass:"mr-1"},[e._v("当前封面已在推广中，暂不支持修改封面主题和来源。")]),t("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticStyle:{position:"relative",top:"2.5px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[e._v("推广期间，同一款封面仅可使用一个主题及来源。")]},proxy:!0}],null,!1,3769717937)})],1):e._e()],1)]},proxy:!0},{key:"content",fn:function(){return[t("div",[e._v("合并发放暂不支持封面推广")])]},proxy:!0}])})],1)],1),e.form.isHeat?t("heatReceiveObject",{ref:"heatSource",attrs:{cover:e.cover,isQuotaGift:e.isQuotaGift}}):e._e(),e.showCustomQrcode?t("mp-form",{staticClass:"whether-custom-qrcode"},[t("mp-form-item",{class:e.specifyGroup.length?"mb-[50px]":"mb-7",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"specify-group-label"},[e._v("发放限制")])]},proxy:!0}],null,!1,2859591218)},[t("mp-checkbox-group",{on:{change:e.handleSpecifyGroupChange},model:{value:e.specifyGroup,callback:function(t){e.specifyGroup=t},expression:"specifyGroup"}},[t("mp-checkbox",{attrs:{label:"发给指定人",disabled:e.form.isHeat||e.disabledSpecifyUsers}})],1)],1),e.specifyGroup.length?[t("mp-form-item",{staticClass:"mb-[50px]",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{staticStyle:{position:"relative",top:"2px"}},[e._v("指定方式")])])]},proxy:!0}],null,!1,1053784469)},[t("mp-radio-group",{staticClass:"radio-group",on:{change:e.handleSpecifyTypeChange},model:{value:e.sendSpecifyType,callback:function(t){e.sendSpecifyType=t},expression:"sendSpecifyType"}},[t("mp-radio",{directives:[{name:"show",rawName:"v-show",value:e.isOnetoallAndLink,expression:"isOnetoallAndLink"}],attrs:{value:0}},[e._v("通过鉴权接口发放")]),t("mp-radio",{directives:[{name:"show",rawName:"v-show",value:e.isBiz,expression:"isBiz"}],attrs:{value:1}},[e._v("上传用户白名单")])],1)],1),1===e.sendSpecifyType?t("mp-form-item",{staticClass:"mb-3",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label-whitemenu"},[t("span",{},[e._v("上传白名单")]),t("mp-popover",{staticClass:"fission-popover",attrs:{width:476,position:"up-left",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("span",[e._v("上传的文件为openid名单，每个openid需通过回车分隔，文件不超过500KB，格式：xxx.txt。")]),t("a",{staticClass:"how",attrs:{href:"https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html",target:"_blank"}},[e._v(" 如何获取openid名单 ")])])]},proxy:!0}],null,!1,3641422933)})],1)]},proxy:!0}],null,!1,2910249912)},[t("mp-form",{ref:"whiteListForm",attrs:{rules:e.formRule}},[t("mp-form-item",{attrs:{prop:"fileList"}},[t("a-upload",{attrs:{name:"file",accept:".txt",action:e.uploadFileUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!0},fileList:e.fileList},on:{change:e.handleSpecifyFileChange}},[t("mp-button",{attrs:{type:"warn"},on:{click:function(e){e.preventDefault()}}},[e.fileList.length?t("span",[e._v("重新上传")]):t("span",[e._v("上传")])])],1)],1),e.showWhiteListUploadError?t("div",{staticClass:"upload-error-tip"},[e._v("上传失败")]):e._e()],1)],1):e._e(),0===e.sendSpecifyType?t("mp-form-item",{staticClass:"mb-3",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label-whitemenu"},[t("span",{},[e._v("添加AppID")]),t("mp-popover",{staticClass:"fission-popover",attrs:{width:476,position:"up-left",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("span",[e._v("输入appid获取发放ctoken（最多10个appid）,小程序开发者通过ctoken和鉴权接口发放给指定用户，")]),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/red-packet-cover/getRedPacketCoverUrl.html",target:"_blank"}},[e._v(" 点击查看具体调用方法 ")]),t("span",[e._v("。")])])]},proxy:!0}],null,!1,2754280835)})],1)]},proxy:!0}],null,!1,1174886651)},[t("div",{staticClass:"appid-action-wrapper"},[t("div",{staticClass:"appid-input-wrapper"},[t("mp-form",{ref:"appListForm",attrs:{rules:e.formRule}},[t("mp-form-item",{staticClass:"mb-3",attrs:{prop:"appidList"}},[t("mp-input",{staticClass:"appid-input",attrs:{placeholder:"输入appid",status:e.appidInputStatus},on:{input:e.handleAppidChange},scopedSlots:e._u([{key:"description",fn:function(){return[e.appidErrMsg?t("p",{staticClass:"appid-error-msg"},[e._v(e._s(e.appidErrMsg))]):e._e()]},proxy:!0}],null,!1,3895731429),model:{value:e.appid,callback:function(t){e.appid=t},expression:"appid"}})],1)],1)],1),t("mp-button",{staticClass:"btn-add-appid",attrs:{disabled:0===e.appid.length,size:"mini"},on:{click:e.addAppid}},[e._v("添加")])],1),t("div",{staticClass:"appid-list-wrapper"},e._l(e.appidList,(function(i){return t("div",{key:i,staticClass:"appid-item",on:{click:function(t){return e.delAppid(i)}}},[t("span",[e._v(e._s(i))]),t("svg-icon",{staticClass:"delete-icon",attrs:{name:"delete2"}})],1)})),0)]):e._e()]:e._e()],2):e._e(),1===e.sendSpecifyType&&e.specifyGroup.length||2===e.form.curMapType?t("div",{class:1==e.principalType?"put-tip person-tip":"put-tip"},[1!=e.principalType?t("span",[e._v("选择「每个发放材料仅一人领取」或「上传用户白名单」将不可在公众号中发放。")]):t("span",[e._v("每个发放材料仅一人领取发放的材料将不可在公众号中发放。")]),t("div",[t("a",{attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=6",target:"_blank"}},[e._v(" 如何在公众号发放封面？ ")])])]):e._e(),1!==e.form.curMapType||e.specifyGroup.length||e.isBizSpringPayInfo||e.isEmotionPayInfo?e._e():t("div",{staticClass:"put-tip"},[e._v(" 在视频号/公众号发放封面，可使用 "),t("a",{attrs:{href:"javascript:;"},on:{click:e.goReceiveComponentTips}},[e._v("「红包封面」组件")]),e._v(" ，保护原始发放材料不外泄。 ")])],1)])},ma=[],fa=(i(33161),i(29254),i(84595)),ha=i(86610),ga=new Ve.ZP,ya=(0,Ce._p)("auth"),ba=(ya.mapGetters,ya.mapState,s.ZP.extend({name:"GenerateCoverDialog",components:{heatReceiveObject:fa.Z,CoverHeatIntro:ha.Z},data:function(){var e=this;return{hideFissionTipsRedDot:!1,hideFissionTipsNewIcon:!1,showFissionPopover:!1,specifyGroup:[],isFission:[],sendSpecifyType:NaN,fileList:[],uploadFileUrl:$t.gm,curWhiteListFile:null,appid:"",appidList:[],appidErrMsg:"",startGenerateIng:!1,timeMin:(new Date).getHours()+":"+(new Date).getMinutes(),timeMin2:"00:00",timeMinu1:(new Date).getHours()+":"+(new Date).getMinutes(),timeMinu2:(new Date).getHours()+":"+(new Date).getMinutes(),timeDate:(new Date).getTime(),showMin:!0,distributionType:0,showBatchCount:!1,min:(new Date).getTime(),appidInputStatus:"normal",form:{generateNum:"",sendTimeSelect:"",needFission:!1,curMapType:"",curGenerateType:"",isHeat:!1},formRule:{curGenerateType:[{required:!0,message:"选择发放方式"}],curMapType:[{required:!0,message:"选择领取方式"}],sendTimeSelect:[{required:!0,message:"选择生效时间"}],generateNum:[{trigger:["change","blur"],validator:function(t,i,n){var a=e;if(a.isShowDialog)return!i||+i<=0||"number"!==typeof+i||!Number.isInteger(+i)||+i>a.leftNum?n(new Error("请输入正确格式的发放数量")):a.form.curGenerateType===me.B6.qrcode&&a.form.curMapType===me.T.oneToOne&&+i>2e4?n(new Error("一次发放的上限为20000个")):(a.form.curGenerateType===me.B6.link||a.form.curGenerateType===me.B6.code)&&a.form.curMapType===me.T.oneToOne&&+i>5e5?n(new Error("一次发放的上限为50万个")):a.form.curMapType===me.T.oneToAll&&+i>1e6?n(new Error("一次发放的上限为100万个")):void n()}}],fileList:[{validator:function(t,i,n){var a=e;if(a.specifyGroup.length&&1===a.sendSpecifyType&&!a.fileList.length)return n(new Error("请上传用户白名单"));n()}}],appidList:[{trigger:["blur"],validator:function(t,i,n){var a=e;if(a.specifyGroup.length&&0===a.sendSpecifyType&&!a.appidList.length)return n(new Error("请添加appid"));n()}}]},timer:void 0,showWhiteListUploadError:!1}},props:{cover:{type:Object,default:function(){return{}}},payInfo:{type:[Object,Array],default:function(){return{}}}},computed:{isBizSpringPayInfo:function(){var e="";return e=Array.isArray(this.payInfo)&&this.payInfo[0]?this.payInfo[0].fromQuotaId:this.payInfo.fromQuotaId,/spring(\d+)_biz/.test(e)},isEmotionPayInfo:function(){var e="";return e=Array.isArray(this.payInfo)&&this.payInfo[0]?this.payInfo[0].fromQuotaId:this.payInfo.fromQuotaId,/spring(\d+)_emotion/.test(e)},disableGenTypeQRCode:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_GenType_QRCode)},disableGenTypeUrl:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_GenType_Url)},disableGenTypeCdKey:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_GenType_CdKey)},disableGenTypeFission:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_GenType_Fission)},disableReceiveTypeIndividual:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_ReceiveType_Individual)},disableReceiveTypeShare:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_ReceiveType_Share)},disableCustomGenCount:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_Custom_GenCount)},disabledSetTimer:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_Set_Timer)},disabledSpecifyUsers:function(){return!!(this.payInfo.permissionFlag&jn.A5.Disable_Specify_Users)},isCombineGen:function(){return Array.isArray(this.payInfo)&&this.payInfo.length>1},isShowDialog:function(){return m.l1.showReceiveMaterialDialog},showCustomQrcode:function(){var e=this.form,t=e.curGenerateType,i=e.curMapType,n=2===t&&1===i;return this.isBiz||n},isSpecifyDone:function(){var e=this.specifyGroup,t=this.sendSpecifyType,i=this.fileList,n=this.appidList,a=this.isOnetoallAndLink;return!e.length||(!a&&i.length>0||(1===t&&i.length>0||0===t&&n.length>0))},principalType:function(){return m.U6.user.principalType},accountType:function(){return m.U6.user.accountType},isOrganization:function(){return this.principalType===v.eZ.organization},isBiz:function(){return 1===this.accountType},leftNum:function(){var e,t=this.payInfo;if(Array.isArray(t)){var i=0;return t.forEach((function(e){var t;i+=(null===e||void 0===e||null===(t=e.payStat)||void 0===t?void 0:t.remainingGenCoverCount)||0})),i}return(null===t||void 0===t||null===(e=t.payStat)||void 0===e?void 0:e.remainingGenCoverCount)||0},isEmotionRainOpen:function(){return m.U6.user.emojiRainInfo&&m.U6.user.emojiRainInfo.activityOpen},isOnetoallAndLink:function(){var e=this.form,t=e.curGenerateType,i=e.curMapType;return 2===t&&1===i},isQuotaGift:function(){var e;return Array.isArray(this.payInfo)?null===(e=this.payInfo[0])||void 0===e?void 0:e.isQuotaGift:this.payInfo.isQuotaGift}},watch:{isQuotaGift:{immediate:!0,handler:function(e){this.form.isHeat=!!e}},"form.curGenerateType":{handler:function(e,t){this.handleFissionCheckBoxShow(t)}},isShowDialog:{handler:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:e&&(t.setDialogTop(),t.disableCustomGenCount&&(t.form.generateNum=t.leftNum));case 1:case"end":return i.stop()}}),i)})))()},immediate:!0},isOnetoallAndLink:function(e){this.sendSpecifyType=e?0:1},timeDate:function(){var e=this;(new Date).toDateString()==new Date(e.timeDate).toDateString()?e.showMin=!0:e.showMin=!1}},beforeDestroy:function(){clearTimeout(this.timer)},methods:{goBizGenerateDoc:function(){window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=6","_blank")},goEmotionGenreateDoc:function(){window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=8","_blank")},goReceiveComponentTips:function(){this.isBiz?this.goBizGenerateDoc():window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=5","_blank")},handleFissionPopoverHide:function(){this.form.needFission&&(localStorage.setItem("hideFissionTipsNewIcon","1"),this.initFissionTips())},handleFissionCheckBoxShow:function(e){if(!e){var t=localStorage.getItem("fissionCheckboxShowNum")||0;if(Number(t)<3){var i=Number(t)+1;localStorage.setItem("fissionCheckboxShowNum","".concat(i))}else Number(t)>=3&&!this.hideFissionTipsRedDot&&(localStorage.setItem("hideFissionTipsRedDot","1"),this.initFissionTips())}},initFissionTips:function(){var e=localStorage.getItem("hideFissionTipsRedDot");this.hideFissionTipsRedDot=!!e;var t=localStorage.getItem("hideFissionTipsNewIcon");this.hideFissionTipsNewIcon=!!t},closeDialog:function(e){this.$emit("cancel",e),m.l1.toggleReceiveDialog(),this.resetForm(),this.$nextTick((function(){document.body.style.overflow="visible"}))},setDialogTop:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:if(i=e.$refs.dialog,!i){t.next=10;break}return n=i.$el.querySelector(".weui-desktop-dialog"),t.next=7,e.$nextTick();case 7:a=40,o=n.getBoundingClientRect().top-a,n.style.top="".concat(o,"px");case 10:case"end":return t.stop()}}),t)})))()},resetForm:function(){var e=this;this.setDistributionType(0),this.$refs.genForm.resetFields(),window.setTimeout((function(){e.$refs.generateNumInput.handleClear()}),500),this.clearSpecifyForm(),this.clearFissionForm()},handleFissionCheckboxChange:function(e){var t=this;if(e.length){if(this.form.needFission=!0,!this.hideFissionTipsRedDot){this.showFissionPopover=!0,localStorage.setItem("hideFissionTipsRedDot","1"),this.initFissionTips();var i=function e(i){var n=t.$refs.fissionPopoverRef;if(null!==n&&void 0!==n&&n.$el&&i.target){var a=null===n||void 0===n?void 0:n.$el;a.contains(i.target)||(t.showFissionPopover=!1,window.removeEventListener("click",e))}};window.addEventListener("click",i)}}else this.clearFissionForm()},handleSpecifyGroupChange:function(e){e.length||this.clearSpecifyForm()},handleSpecifyTypeChange:function(){this.appid="",this.appidErrMsg=""},clearFissionForm:function(){var e=this;this.isFission=[],this.form.needFission=!1,this.form.isHeat=!1,this.isQuotaGift&&this.$nextTick((function(){e.form.isHeat=!0}))},clearSpecifyForm:function(){this.specifyGroup=[],this.sendSpecifyType=NaN,this.appid="",this.appidErrMsg="",this.fileList.length=0,this.appidList.length=0,this.curWhiteListFile=null,this.showWhiteListUploadError=!1},handleAppidChange:function(e){0===e.length&&(this.appidErrMsg="",this.appidInputStatus="normal")},addAppid:function(){var e=this.appidList,t=this.appid;return 10===e.length?(this.appidErrMsg="最多添加10个appid",void(this.appidInputStatus="warn")):e.includes(t)?(this.appidErrMsg="appid已添加",void(this.appidInputStatus="warn")):(this.appidErrMsg="",this.appidInputStatus="normal",this.appidList.push(this.appid),void(this.appid=""))},delAppid:function(e){this.appidList=this.appidList.filter((function(t){return t!==e}))},handleSpecifyFileChange:function(e){var t=e.file,i=this.$refs.whiteListForm;"done"===t.status?t.response&&0!==t.response.base_response.ret?(this.showWhiteListUploadError=!0,(0,Ht.H)("upload_whitelist_error","ret=".concat(t.response.base_response.ret," fileSize=").concat(t.size)),this.curWhiteListFile=null,this.fileList=[],i.validateField("fileList")):(this.showWhiteListUploadError=!1,this.curWhiteListFile={mediaType:me.Je.File,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},t.fileSize=ai(t.size).toUpperCase(),t.name="".concat(t.name,"（").concat(t.fileSize,"）"),i.validateField("fileList")):"removed"===t.status?(this.fileList=[],this.curWhiteListFile=null,this.showWhiteListUploadError=!1):(this.fileList=[t],this.showWhiteListUploadError=!1)},checkReceiveMaterial:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isCombineGen){t.next=2;break}return t.abrupt("return");case 2:return n=e.cover,a=e.payInfo,t.next=6,m.l1.getCoverReceiveObjectList({orderId:n.orderId,transactionId:a.transactionId});case 6:o=e.cover.receiveObjectList||[],!0===(null===o||void 0===o||null===(i=o[0])||void 0===i?void 0:i.status)&&(e.timer=window.setTimeout((function(){e.checkReceiveMaterial()}),1e3));case 8:case"end":return t.stop()}}),t)})))()},startGenerate:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p,v,m,f,h,g,y,b,w,C;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.isHeat){t.next=4;break}t.t0=!1,t.next=7;break;case 4:return t.next=6,e.$refs.heatSource.validate();case 6:t.t0=t.sent;case 7:return n=t.t0,t.next=10,e.$refs.genForm.validate();case 10:if(a=t.sent,!((null===a||void 0===a||null===(i=a.invalidFields)||void 0===i?void 0:i.length)>0)){t.next=13;break}return t.abrupt("return");case 13:if(o=e.$refs.whiteListForm,!o){t.next=20;break}return t.next=17,o.validate();case 17:if(c=t.sent,!((null===c||void 0===c||null===(s=c.invalidFields)||void 0===s?void 0:s.length)>0)){t.next=20;break}return t.abrupt("return");case 20:if(l=e.$refs.appListForm,!l){t.next=27;break}return t.next=24,l.validate();case 24:if(d=t.sent,!((null===d||void 0===d||null===(u=d.invalidFields)||void 0===u?void 0:u.length)>0)){t.next=27;break}return t.abrupt("return");case 27:if(!e.form.needFission||2!==e.form.curMapType){t.next=29;break}return t.abrupt("return",e.errorTip("发放材料仅一人领取无法裂变，请选择其他发放方式"));case 29:if(!e.form.isHeat||n){t.next=31;break}return t.abrupt("return");case 31:if(p=e,v=e.cover,m=0,1!=e.form.sendTimeSelect){t.next=47;break}if(1!=e.showMin){t.next=41;break}if(e.timeMinu1){t.next=38;break}return t.abrupt("return",e.errorTip("请选择定时生效时间"));case 38:f=e.timeMinu1,t.next=44;break;case 41:if(e.timeMinu2){t.next=43;break}return t.abrupt("return",e.errorTip("请选择定时生效时间"));case 43:f=e.timeMinu2;case 44:h=parseInt(f.split(":")[0]),g=parseInt(f.split(":")[1]),m=new Date(e.timeDate).setHours(h,g,0,0);case 47:if(e.startGenerateIng=!0,y={},b={receive_type:e.form.curMapType||1,gen_type:e.form.curGenerateType||2,total_gen_count:+e.form.generateNum,refer_transaction_id:e.payInfo.transactionId,receive_begin_time:Math.floor(m/1e3),distribution_type:e.distributionType,white_list_file:e.curWhiteListFile,need_fission:e.form.isHeat,is_heat:e.form.isHeat},!e.isCombineGen){t.next=66;break}return delete b.refer_transaction_id,b.transaction_id_list=e.payInfo.map((function(e){return e.transactionId})),t.next=55,ga.combineGenReceiveMaterial(v.orderId,b,1,e.appidList,n);case 55:if(y=t.sent,(0,Ht.H)("合并发放",JSON.stringify(b)),-2!==y.baseResponse.ret||!y.transactionIdDefault){t.next=64;break}return b.refer_transaction_id=y.transactionIdDefault,delete b.transaction_id_list,t.next=62,ga.genReceiveMaterial(v.orderId,b,1,e.appidList,n);case 62:y=t.sent,(0,Ht.H)("只用了一个订单",JSON.stringify(b));case 64:t.next=69;break;case 66:return t.next=68,ga.genReceiveMaterial(v.orderId,b,1,e.appidList,n);case 68:y=t.sent;case 69:if(!y||0!==y.baseResponse.ret){t.next=79;break}if(e.checkReceiveMaterial(),e.closeDialog({isGenSucc:!0}),e.$emit("refreshCover"),e.$nextTick((function(){e.$tipsSuc("发放成功"),window.setTimeout((function(){e.$tipsHide(),e.startGenerateIng=!1}),3e3)})),!e.isCombineGen||!b.refer_transaction_id){t.next=76;break}return t.abrupt("return",e.$router.push({name:"order",query:{tid:b.refer_transaction_id}}));case 76:e.isCombineGen&&(w=y.resultList,C=y.mergeId,e.$emit("updateMergeDetail",{mergeDetail:w,mergeId:C,orderId:v.orderId})),t.next=83;break;case 79:e.startGenerateIng=!1,p.$tipsErr("生成失败"),(0,Ht.H)("生成订单失败",JSON.stringify(b)),window.setTimeout((function(){return p.$tipsHide()}),3e3);case 83:case"end":return t.stop()}}),t)})))()},validGenNum:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.$refs.genForm,i.validateField("generateNum");case 2:case"end":return t.stop()}}),t)})))()},setDistributionType:function(e){this.distributionType=e},handleEmotionRainGuide:function(){var e="";e=this.isBiz?"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_org":"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_personal",window.open(e,"_blank")}}})),wa=ba,Ca=(0,g.Z)(wa,va,ma,!1,null,"45ace5b7",null),_a=Ca.exports,xa=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"mp-dialog",attrs:{value:e.value,title:"",width:600},on:{"visible-change":e.handleVisibleChange,close:e.close}},[t("div",{staticClass:"dialog-content"},[t("div",{staticClass:"title-wrapper"},[t("mp-icon",{staticStyle:{"margin-bottom":"16px"},attrs:{icon:e.isMergeSuccess?"checkmark_circle_filled":"clock_filled",color:e.isMergeSuccess?"#07c160":"#10AEFF",width:48,height:48}}),t("div",{staticClass:"title"},[e._v(e._s(e.isMergeSuccess?"已生成":"正在生成"))]),e.isMergeSuccess?t("div",{staticClass:"color-bw-lv2-text"},[t("span",[e._v(e._s("".concat(e.genTypeText,"由以下订单合并生成"))+" ")]),t("a",{on:{click:e.goReceiveObjects}},[e._v("前往合并发放记录")])]):t("div",{staticClass:"color-bw-lv2-text"},[e._v(" "+e._s("以下订单合并生成".concat(e.genTypeText,"中"))+" ")])],1),t("a-table",{key:"transactionId",staticClass:"merge-distributed-table",attrs:{columns:e.columns,dataSource:e.pageRecordList,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"genType",fn:function(i){return[t("div",[t("div",[e._v(" "+e._s(e.GenTypeToText[i.genType])+" ")]),t("div",[e._v("多人领取")])])]}},{key:"action",fn:function(i){return[t("a",{attrs:{href:"#/order?tid=".concat(i.transactionId)}},[e._v("详情")])]}}])}),t("a-row",{attrs:{type:"flex",justify:"center"}},[e.mergeDetail.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{current:e.curPage,"per-page":e.pageNum,"total-num":e.mergeDetail.length,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1),e.isMergeSuccess?t("div",{staticClass:"download-wrapper"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"btn-download",on:{click:e.download}},[e._v("下载"+e._s(e.genTypeText))])],1),t("a-row",{attrs:{type:"flex",justify:"center"}},[t("div",{staticClass:"color-bw-lv2-text",staticStyle:{"margin-top":"12px"}},[e._v("发放总数量："+e._s(e.totalGenCount))])])],1):e._e()],1)])},Ia=[],ka=new Ve.ZP,Ta=s.ZP.extend({props:{value:Boolean,mergeInfo:{type:Object,default:function(){return{mergeDetail:[],mergeId:"",orderId:""}}}},data:function(){return{GenTypeToText:me.FP,curPage:1,pageNum:3,mergeResStatus:me.ST.Pending,checkTimer:0,columns:[{dataIndex:"createTime",key:"createTime",title:"被合并订单",width:120,customRender:function(e){return"".concat(xn().unix(e).format("YYYY/MM/DD"),"的订单")}},{key:"genType",title:"发放方式",width:120,scopedSlots:{customRender:"genType"}},{dataIndex:"genCount",key:"genCount",title:"发放数量"},{dataIndex:"expiredTime",key:"expiredTime",title:"发放与领取有效期",customRender:function(e){return"至 ".concat(xn().unix(e).format("YYYY/MM/DD"))}},{title:"操作",align:"right",key:"action",scopedSlots:{customRender:"action"}}]}},computed:{mergeDetail:function(){return this.mergeInfo.mergeDetail||[]},length:function(){var e;return(null===(e=this.mergeDetail)||void 0===e?void 0:e.length)||"-"},pageRecordList:function(){var e,t=(this.curPage-1)*this.pageNum,i=t+this.pageNum;return null===(e=this.mergeDetail)||void 0===e?void 0:e.slice(t,i)},totalGenCount:function(){return this.mergeDetail.reduce((function(e,t){return e+t.genCount}),0)},genTypeText:function(){return this.mergeDetail[0]?me.FP[this.mergeDetail[0].genType]:""},isMergeSuccess:function(){return this.mergeResStatus===me.ST.Recallable}},methods:{goReceiveObjects:function(){this.$router.push({name:"receiveobjects",query:{mergeId:this.mergeInfo.mergeId}})},handleVisibleChange:function(e){e?(this.mergeResStatus=me.ST.Pending,this.checkMergeResult()):clearTimeout(this.checkTimer)},checkMergeResult:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ka.getMergeDetail({merge_id:e.mergeInfo.mergeId,order_id:e.mergeInfo.orderId});case 2:return t.next=4,t.sent;case 4:i=t.sent,(null===i||void 0===i?void 0:i.status)===me.lv.Success?(e.mergeResStatus=me.ST.Recallable,clearTimeout(e.checkTimer)):e.checkTimer=setTimeout(e.checkMergeResult,3e3);case 6:case"end":return t.stop()}}),t)})))()},download:function(){var e=this.mergeDetail[0];ka.downloadMergeReceiveObject({createTime:e.createTime,genType:e.genType,receiveType:me.T.oneToAll,mergeId:this.mergeInfo.mergeId})},pageChange:function(e){this.curPage=e.currentPage},close:function(){this.$emit("input",!1)}}}),Sa=Ta,Aa=(0,g.Z)(Sa,xa,Ia,!1,null,"49d46cf8",null),Da=Aa.exports,Pa=i(2776),Za=(0,Ce._p)("cover"),Ua=(Za.mapGetters,Za.mapState),Ea=i(90520),Ra=s.ZP.extend({name:"CoverOrderList",data:function(){return{num:0,curPage:1,pageNum:4,columns:[{dataIndex:"date",key:"date",title:"订单时间"},{key:"count",title:"购买数量",scopedSlots:{customRender:"count"}},{dataIndex:"sendToReceive",key:"sendToReceive",slots:{title:"sendToReceive"}},{dataIndex:"expired",key:"expired",scopedSlots:{title:"expiredTitle"}},{key:"statusText",title:"订单状态",scopedSlots:{customRender:"statusText"}},{key:"action",title:"操作",align:"right",scopedSlots:{customRender:"action"}}],chooseColumns:[{key:"leftNum",title:"剩余可发放封面",scopedSlots:{customRender:"leftNum"}},{dataIndex:"date",key:"date",title:"订单时间"},{dataIndex:"purchaseCount",key:"purchaseCount",title:"购买封面数量"},{key:"expired",title:"发放与领取有效期",align:"right",scopedSlots:{customRender:"expired"}}],chooseTimeColumns:[{key:"radio",title:"",scopedSlots:{customRender:"radio"}},{dataIndex:"date",key:"date",title:"订单时间"},{dataIndex:"purchaseCount",key:"purchaseCount",title:"发放时长"},{key:"expired",title:"发放与领取有效期",scopedSlots:{customRender:"expired"}}],checkTransactionIds:[],keepCheckTransactionIds:!1,curChoosenPayInfo:{},mergeInfo:{},mergeResultDialogVisible:!1,isShowDialog:!1,tableKey:0,orderTableScrollTop:0}},props:{cover:{type:Object,default:function(){return{}}}},computed:(0,ve.Z)((0,ve.Z)({},Ua(["choosePayInfoDialog","triggerCheckTransactionIds"])),{},{orderWithQuotaGift:function(){var e,t=null===(e=this.countPayInfoList)||void 0===e?void 0:e.filter((function(e){return e.isQuotaGift}));return!(null===t||void 0===t||!t.length)},validPayInfoList:function(){return m.l1.validPayInfoList},hasSpecialPayInfo:function(){var e=this.validPayInfoList.some((function(e){return Pa.Cu.some((function(t){var i;return null===(i=e.fromQuotaId)||void 0===i?void 0:i.startsWith(t)}))}));return e},columnTitle:function(){return this.hasSpecialPayInfo||this.orderWithQuotaGift?" ":""},timePayInfoList:function(){return this.validPayInfoList.filter((function(e){return e.purchaseType===jn.mr.time}))},countPayInfoList:function(){return this.validPayInfoList.filter((function(e){var t=!(!e.permissionFlag||!jn.A5.Disable_Combine_Gen);return e.purchaseType!==jn.mr.time&&e.leftNum>0&&+e.leftDays>0&&!t}))},checkedPayInfoList:function(){var e=this;return this.payInfoList.filter((function(t){return e.checkTransactionIds.includes(t.transactionId)}))},payInfoList:function(){var e=this;return e.cover&&e.cover.payInfoList?e.cover.payInfoList:[]},list:function(){var e=this.cover;if(!e.payInfoList)return[];var t=this,i=(t.curPage-1)*t.pageNum,n=i+t.pageNum;return e.payInfoList.slice(i,n).map((function(e,t){var i=e.payStat||{},n=i.fissionTotalReceiveCount,a=i.fissionTotalGenCount,r=i.totalReceiveCount,o=i.totalGenCount,s="".concat(r||"-"," / ").concat(o||"-");e.purchaseType==jn.mr.time&&(s="".concat(r||"-"," / -"));var c=e.expiredTime?Ea("yyyy/MM/dd",new Date(1e3*e.expiredTime)):"-",l="".concat(e.purchaseCount);e.purchaseType===jn.mr.time&&(e.actived&&(c=e.activeEndTime?Ea("yyyy/MM/dd hh:mm",new Date(1e3*e.activeEndTime)):"-"),l="发放时长：".concat(e.purchaseCount,"小时"));var u="-";a>=0&&(u=a?"".concat(n,"/").concat(a,"（裂变发放数量）"):n);var d=Object.assign({},e,{key:t,statusText:jn.j8[e.status],count:l,payStat:i,sendToReceive:s,fissionToReceive:u,expired:e.expiredTime&&![jn.A7.Fail,jn.A7.Cancel,jn.A7.Blocked,jn.A7.Pending].includes(e.status)?"至 ".concat(c):"-",date:xn().unix(e.paymentTime).format("YYYY/MM/DD")});return d}))}}),watch:{triggerCheckTransactionIds:function(){this.keepCheckTransactionIds=!1},choosePayInfoDialog:{handler:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=m.l1.cover,a=n.payInfoList,a){i.next=4;break}return i.abrupt("return");case 4:t.isShowDialog=e;case 5:case"end":return i.stop()}}),i)})))()}}},created:function(){var e=this;e.initTableCurPage()},methods:{handleOrderTableScroll:function(e){e.target instanceof HTMLElement&&(this.orderTableScrollTop=e.target.scrollTop)},handleGenerateCoverCancel:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(null===e||void 0===e||!e.isGenSucc){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,t.$nextTick();case 4:t.keepCheckTransactionIds=!0,m.l1.toggleChoosePayInfoDialog();case 6:case"end":return i.stop()}}),i)})))()},onTransactionIdSelectChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.checkTransactionIds=e,e.length<=1&&(t.tableKey=t.tableKey+1),i.next=4,t.$nextTick();case 4:null!==(n=t.$refs)&&void 0!==n&&null!==(a=n.countOrderTableRef)&&void 0!==a&&a.$el&&(t.$refs.countOrderTableRef.$el.scrollTop=t.orderTableScrollTop);case 5:case"end":return i.stop()}}),i)})))()},disableOrders:function(e){var t,i,n,a=this,r={props:{disabled:!1,name:"1"}},o=this.checkedPayInfoList.some((function(t){return t.transactionId===e.transactionId}));if(o||0===this.checkedPayInfoList.length)return r.props.disabled=!1,r;var s=this.checkedPayInfoList.some((function(e){var t;return null===e||void 0===e||null===(t=e.fromQuotaId)||void 0===t?void 0:t.startsWith("spring2024_biz")}));if((null===(t=e.fromQuotaId)||void 0===t||!t.startsWith("spring2024_biz"))&&s)return r.props.disabled=!0,r;var c=this.checkedPayInfoList.some((function(e){var t;return null===e||void 0===e||null===(t=e.fromQuotaId)||void 0===t?void 0:t.startsWith("spring2024_emotion")}));if((null===e||void 0===e||null===(i=e.fromQuotaId)||void 0===i||!i.startsWith("spring2024_emotion"))&&c)return r.props.disabled=!0,r;var l=this.checkedPayInfoList.some((function(e){var t;return null===e||void 0===e||null===(t=e.fromQuotaId)||void 0===t?void 0:t.startsWith("autumn2023")}));return l&&!this.checkedPayInfoList.find((function(t){return t.transactionId===(null===e||void 0===e?void 0:e.transactionId)}))||!l&&null!==e&&void 0!==e&&null!==(n=e.fromQuotaId)&&void 0!==n&&n.startsWith("autumn2023")||Pa.Cu.every((function(e){var t,i;return!(null!==(t=a.checkedPayInfoList[0])&&void 0!==t&&null!==(i=t.fromQuotaId)&&void 0!==i&&i.startsWith(e))}))&&Pa.Cu.some((function(t){var i;return null===(i=e.fromQuotaId)||void 0===i?void 0:i.startsWith(t)}))?(r.props.disabled=!0,r):{props:{disabled:!1,name:"1"}}},handlePayInfoDialogVisibleChange:function(e){var t;e?(m.l1.getCoverPayInfoList(this.cover.orderId),this.keepCheckTransactionIds||(this.clearCheckTransactionIds(),1===this.countPayInfoList.length&&this.checkTransactionIds.push(null===(t=this.countPayInfoList[0])||void 0===t?void 0:t.transactionId))):(this.orderTableScrollTop=0,m.l1.toggleChoosePayInfoDialog(!1))},updateMergeDetail:function(e){this.mergeInfo=e,this.mergeResultDialogVisible=!0},closePayInfoDialog:function(){var e;null===(e=this.$refs.payInfoDialog)||void 0===e||e.close()},clearCheckTransactionIds:function(){this.checkTransactionIds=[]},handleGenCoverRefresh:function(){var e=this;this.clearCheckTransactionIds(),setTimeout((function(){m.l1.getCoverPayInfoList(e.cover.orderId)}),1e3)},initTableCurPage:function(){var e=this,t=+this.$route.query.page;t&&t<=Math.ceil(e.payInfoList.length/e.pageNum)&&(e.curPage=+this.$route.query.page)},pageChange:function(e){var t=this;t.curPage=e.currentPage,this.$router.replace({name:"".concat(this.$route.name),query:(0,ve.Z)((0,ve.Z)({},this.$route.query),{},{page:"".concat(e.currentPage)})})},goToChoosenPayInfo:function(){this.checkTransactionIds.length<1||(this.keepCheckTransactionIds=!1,1===this.checkTransactionIds.length?(m.l1.toggleReceiveDialog(),this.handleToDetail(this.checkTransactionIds[0])):m.l1.toggleReceiveDialog(),m.l1.toggleChoosePayInfoDialog(!1))},handleToDetail:function(e){var t="string"===typeof e?e:e.transactionId,i=this;i.$router.push({name:"order",query:{tid:t}})}},components:{Tag:An,EmotionRainDesc2:Ln,EmotionRainTipEntry:Qn,Remark:pa,GenerateCoverDialog:_a,MergeResultDialog:Da}}),Ma=Ra,La=(0,g.Z)(Ma,wn,Cn,!1,null,"005b7e29",null),Fa=La.exports,Na=new Ve.ZP,Oa=new z.ZP,Ba=(0,Ce._p)("cover"),qa=Ba.mapGetters,Qa=s.ZP.extend({name:"CoverDetail",data:function(){return{coverId:"",coverPrice:me.uX,isPageReady:!1,showRefundDialog:!1,showPurchaseDialog:!1,showChoosePayInfoDialog:!1,isPrimaryBtnLoading:!1,curChoosenPayInfo:{},waitingPayInfoLeftTime:0,waitingPayInterval:0,showTestRedDialog:!0,checkInterval:0,qrcodeStatus:0,qrcodeUrl:"",loginScanFailReason:"",showTestRedDialogFlag:0,tempRedQr:{}}},components:{CoverDetailHeader:Le,CoverDetailStatistics:je,CoverOrderList:Fa,CoverDetailInfo:bn,Qrcode:O.Z},watch:{waitingPayInfo:function(e,t){var i=this;if(e&&e.orderId!==t.orderId){var n=i.waitingPayInfo.payLeftTime;i.waitingPayInfoLeftTime=(0,_e.Jh)(n,_e.m4.minute),clearInterval(i.waitingPayInterval),i.waitingPayInterval=window.setInterval((function(){if(n<=0)return i.waitingPayInfoLeftTime=0,i.clearWaitingPayInterval();n-=1,i.waitingPayInfoLeftTime=(0,_e.Jh)(n,_e.m4.minute)}),1e3)}}},computed:(0,ve.Z)((0,ve.Z)({},qa(["validPayInfoList","maxExpiredDays","minExpiredDays","leftValidOrderNum"])),{},{cover:function(){return m.l1.cover},waitingPayInfo:function(){var e=m.l1.cover;return!!e.payInfoList&&e.payInfoList.find((function(e){return e.status===jn.A7.Pending}))},isPublished:function(){var e=this.cover.orderStatus;return e===me.Rf.Published},leftCoverNum:function(){var e=this.cover;return e.orderStat&&e.orderStat.remainingGenCoverCount||0},canRefundAmount:function(){var e=this;return(0,_e.Zh)(e.cover.canRefundAmountInCents)},isShowStatistics:function(){var e=this;return e.cover.orderStatus&&e.cover.orderStatus>me.Rf.Rejected},isShowReceiveObjectList:function(){var e=this;return e.cover.orderStatus&&e.cover.orderStatus>me.Rf.Rejected},isShowPayInfoList:function(){var e=this;return e.cover.orderStatus&&e.cover.orderStatus>me.Rf.Rejected}}),mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.body.style.overflow="visible",e.coverId=e.$route.query.id,t.next=4,e.fetchData();case 4:e.isPageReady=!0;case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){clearInterval(this.checkInterval)},methods:{getTempPreviewQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.cover,t.next=3,Na.getTempPreviewQrcode(i.orderId);case 3:n=t.sent,n&&0===n.baseResponse.ret?e.tempRedQr={objectFullUrl:n.objectFullUrl,objectCdkey:n.objectCdkey,objectQrcodeUrl:n.objectQrcodeUrl,totalCnt:n.totalCnt,leftCnt:n.leftCnt}:n&&1066===n.baseResponse.ret&&window.setTimeout((function(){e.getTempPreviewQrcode()}),1e3);case 5:case"end":return t.stop()}}),t)})))()},saveTempQr:function(e){return Oa.downloadFilePng(e,"qr"),!1},downloadReceiveObject:function(e){return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.coverId){t.next=2;break}return t.abrupt("return",e.$router.replace({name:"covers"}));case 2:return t.next=4,m.l1.getCoverInfo(e.coverId);case 4:return t.next=6,m.l1.getCoverPayInfoList(e.coverId);case 6:case"end":return t.stop()}}),t)})))()},handleHeaderBtnClick:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,o,s,c,l;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t,o=t.cover,s=n.waitingPayInfo,(0,Ht.H)("click_header_btn",JSON.stringify({actionType:e,text:a[e]})),e!==a["重新编辑"]){i.next=8;break}t.routerGo("make",{cover:o}),i.next=47;break;case 8:if(e!==a["撤销审核"]){i.next=17;break}return t.isPrimaryBtnLoading=!0,i.next=12,m.l1.modifyCover(Ve.Z3.Recall,o);case 12:c=i.sent,t.isPrimaryBtnLoading=!1,c&&0===c.baseResponse.ret&&(n.$tipsSuc("撤销成功"),n.clearWaitingPayInterval(),window.setTimeout((function(){return n.$tipsHide()}),1500)),i.next=47;break;case 17:if(e!==a["购买"]&&e!==a["再次购买"]){i.next=21;break}t.showPurchaseDialog=!0,i.next=47;break;case 21:if(e!==a["发放封面"]){i.next=27;break}Oa.baseActionReport({actionType:"12",authorId:m.U6.user.authorId}),m.l1.toggleTriggerCheckTransactionIds(),m.l1.toggleChoosePayInfoDialog(),i.next=47;break;case 27:if(e!==a["退款"]){i.next=31;break}t.showRefundDialog=!0,i.next=47;break;case 31:if(e!==a["支付"]){i.next=35;break}(0,_e.jo)(s),i.next=47;break;case 35:if(e!==a["取消支付"]){i.next=42;break}return i.next=38,m.l1.cancelPay({orderId:o.orderId,transactionId:s.transactionId});case 38:l=i.sent,l&&0===l.baseResponse.ret&&(n.$tipsSuc("取消成功"),window.setTimeout((function(){return n.$tipsHide()}),1500),t.clearWaitingPayInterval()),i.next=47;break;case 42:if(e!==a["申诉"]){i.next=46;break}return i.abrupt("return",n.$router.push({name:"doc",query:{page:"right",index:"3"}}));case 46:e===a["试用封面"]&&(t.showTestRedDialog=!0,t.showTestRedDialogFlag=1,t.getTempPreviewQrcode());case 47:case"end":return i.stop()}}),i)})))()},checkAdditionalInfo:function(){var e=this.cover,t=e.orderStatus,i=e.auditResult;if(t===me.Rf.Rejected||t===me.Rf.Frozen||t===me.Rf.Blocked){var n={status:t,auditResult:i};this.$router.push({name:"audit",params:n})}},handleRefund:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.l1.applyRefund(e.coverId);case 2:i=t.sent,i&&0===i.baseResponse.ret&&e.$router.push({name:"refundSuccess",query:{cid:e.coverId}});case 4:case"end":return t.stop()}}),t)})))()},checkLoginResult:function(){},loadAndCheckQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.qrcodeStatus=O.R.normal,t.next=3,m.U6.getLoginQrcode();case 3:e.checkInterval=window.setInterval((function(){return e.checkLoginResult()}),1e3);case 4:case"end":return t.stop()}}),t)})))()},loadAndCheckRedQrcode:function(){return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handlePurchase:function(){var e=this;e.$router.push({name:"pay",query:{cover:this.cover,cid:this.coverId,type:"count"}})},clearWaitingPayInterval:function(){var e=this;return e.waitingPayInfoLeftTime=0,clearInterval(e.waitingPayInterval)},routerGo:function(e,t,i){this.$router.push({name:e,params:t,query:i})}}}),ja=Qa,Ha=(0,g.Z)(ja,be,we,!1,null,"1dbd094c",null),Ga=Ha.exports,Wa=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-list"},[t("div",{staticClass:"main-card notice-board"},[e.noticeList.length?t("span",[e._v("公告：")]):e._e(),e.noticeList[0]?t("div",{staticClass:"notice",on:{click:function(t){return e.routeToNoticeDetail(e.noticeList[0])}}},[e._v(e._s(e.noticeList[0].title))]):e._e(),e.noticeList[1]?t("div",{staticClass:"notice",on:{click:function(t){return e.routeToNoticeDetail(e.noticeList[1])}}},[e._v(e._s(e.noticeList[1].title))]):e._e(),e.noticeList.length>2?t("div",[t("span",{staticClass:"more",on:{click:e.routeToMoreNotice}},[e._v("查看更多")]),t("div",{staticClass:"arrow"},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]):e._e()]),e.isPageReady?t("div",{staticClass:"main-card covers-board"},[0!==e.coverList.length?[t("div",{staticClass:"title"},[t("span",{staticStyle:{"font-weight":"500"}},[e._v("我的红包封面")]),e.isCanEdit?t("mp-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.goToMakeCover}},[e._v("定制封面")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"button",attrs:{type:"primary"}},[e._v("定制封面")])]},proxy:!0}],null,!1,577724823)})],1),t("CoverTable",{attrs:{coverList:e.coverList},on:{detail:e.handleToDetail}}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.coverListLength>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{mode:"normal",current:e.curPage,"per-page":e.pageNum,"total-num":e.coverListLength},on:{"page-change":e.pageChange}}):e._e()],1)]:t("div",{staticClass:"no-wrap"},[t("div",{staticClass:"title"},[e._v("开始定制红包封面")]),t("div",{staticClass:"desc"},[e._v("定制之前，可以查看设计规范和模板")]),t("div",{staticClass:"doc"},[t("a",{staticClass:"design-rule",attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index#/doc?page=design&index=-1",target:"_blank"}},[e._v(" 查看设计规范 ")]),t("a",{attrs:{href:e.designTemplateUrl}},[e._v("下载设计模板")])]),e.isCanEdit?t("mp-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.goToMakeCoverWhenNoOne}},[e._v("去定制")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"button",attrs:{type:"primary"}},[e._v("去定制")])]},proxy:!0}],null,!1,1242180719)})],1)],2):[e._m(0)]],2)},za=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],Va=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-table",{staticClass:"cover-table",attrs:{columns:e.columns,dataSource:e.coverList,pagination:!1},scopedSlots:e._u([{key:"nameAndImg",fn:function(i,n){var a,r;return[t("div",{staticClass:"cover-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:n.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":null===(a=n.packetMaterial.syntheticWidgetImage)||void 0===a?void 0:a.mediaUrl}}),t("div",{staticClass:"ml-5"},[t("div",{staticClass:"cover-name"},[e._v(e._s(i))]),null!==(r=n.packetMaterial.coverAtmospherePag)&&void 0!==r&&r.mediaUrl?t("div",{staticClass:"inline-block rounded-sm bg-opblack_5 px-[6px] py-0.5 text-xs"},[e._v("氛围")]):n.packetMaterial.coverImageDynamicType?t("div",{staticClass:"inline-block rounded-sm bg-opblack_5 px-[6px] py-0.5 text-xs"},[e._v("动态")]):e._e()])],1)]}},{key:"statusText",fn:function(i,n){return[t("div",{staticClass:"status-text",style:{color:n.statusColor}},[t("div",[e._v(e._s(n.statusText))]),"待提交"===n.statusText&&n.actionAuthInfo&&n.actionAuthInfo.status<=3?t("div",[e._v("跳转链接待授权")]):e._e(),"待提交"===n.statusText&&n.actionAuthInfo&&4===n.actionAuthInfo.status?t("div",[e._v("跳转链接已授权")]):e._e()])]}},{key:"action",fn:function(i,n){return[t("div",{staticClass:"detail"},[t("a",{on:{click:function(t){return e.gotoDetail(n)}}},[e._v("详情")]),t("Remark",{attrs:{"remark-info":n.remarkInfo,"order-id":n.orderId,"order-status":n.orderStatus}})],1)]}}])})},Ja=[],Ka=i(93830),Ya=(i(69720),s.ZP.extend({name:"CoverTable",data:function(){Object.entries(me.QP).filter((function(e){var t=(0,Ka.Z)(e,2),i=(t[0],t[1]);return"number"===typeof i})).map((function(e){var t=(0,Ka.Z)(e,2),i=t[0];t[1];return{text:i,value:i}}));return{IdType:Vn.Xd,columns:[{dataIndex:"packetName",key:"nameAndImg",title:"红包封面",width:259,scopedSlots:{customRender:"nameAndImg"}},{dataIndex:"usedPercent",key:"usedPercent",title:"已领取/已发放",width:259},{key:"statusText",title:"当前状态",width:259,scopedSlots:{customRender:"statusText"}},{dataIndex:"updateDate",key:"updateDate",title:"最后操作时间",width:259},{title:"操作",key:"action",dataIndex:"action",align:"right",width:124,scopedSlots:{customRender:"action"}}]}},props:{coverList:{type:Array,default:function(){return[]}}},components:{CoverReceiveImg:ke.Z,Remark:pa},methods:{gotoDetail:function(e){this.$emit("detail",e)}}})),Xa=Ya,$a=(0,g.Z)(Xa,Va,Ja,!1,null,"0a64db5a",null),er=$a.exports,tr=new z.ZP,ir=i(90520),nr=s.ZP.extend({name:"CoverList",data:function(){return{isPageReady:!1,curPage:1,pageNum:8,steps:[{label:"定制封面"},{label:"封面审核"},{label:"付款下单"},{label:"发放领取"}],showInvoiceDialog:!0,isCanEdit:!0}},computed:{noticeList:function(){return m.PJ.noticeList},coverListLength:function(){return m.l1.coverList.length},coverList:function(){var e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;return m.l1.coverList.slice(t,i).map((function(e,t){var i="- / -",n="-";if(e.orderStat){var a=e.orderStat,r=a.totalReceiveCount,o=a.yesterdaySendCount,s=a.totalGenCount;i="".concat(r||"-"," / ").concat(s||"-"),n="".concat(o||"-")}var c=Ue,l=c[e.orderStatus]||{},u=Object.assign({},e,{key:t,usedPercent:i,yesterdayNum:n,updateDate:ir("yyyy年MM月dd日",new Date(1e3*e.updateTime)),statusText:me.QP[e.orderStatus],statusColor:l.color||""});return u}))}},components:{CoverTable:er},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return setTimeout((function(){return e.initNav()}),50),t.next=3,e.fetchData();case 3:return e.isPageReady=!0,t.next=6,m.U6.getUserInfo();case 6:1!=m.U6.user.isSecondary||8&m.U6.user.managerFlag||(e.isCanEdit=!1);case 7:case"end":return t.stop()}}),t)})))()},methods:{initNav:function(){var e,t,i;null!==(e=this.$root.$children)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.initNav&&this.$route.params.fromLogin&&(null===(i=this.$root.$children[0])||void 0===i||i.initNav())},fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.l1.getCoverList(e);case 2:i=+e.$route.query.page,i&&i<=Math.ceil(e.coverListLength/e.pageNum)&&(e.curPage=+e.$route.query.page);case 4:case"end":return t.stop()}}),t)})))()},handleToDetail:function(e){this.$router.push({name:"detail",query:{id:e.orderId}})},toadmin:function(){this.$router.push({name:"administrator"})},pageChange:function(e){this.curPage=e.currentPage,this.$router.replace({name:"".concat(this.$route.name),query:{page:"".concat(e.currentPage)}})},goToMakeCoverWhenNoOne:function(){tr.baseActionReport({actionType:"6",authorId:m.U6.user.authorId}),this.$router.push({name:"make"})},goToMakeCover:function(){tr.baseActionReport({actionType:"7",authorId:m.U6.user.authorId}),this.$router.push({name:"make"})},routeToMoreNotice:function(){var e=this.$router.resolve({name:"notice"});window.open(e.href,"_blank")},routeToNoticeDetail:function(e){var t=this.$router.resolve({name:"noticeDetail",query:{id:e.announcementId}});window.open(t.href,"_blank")}}}),ar=nr,rr=(0,g.Z)(ar,Wa,za,!1,null,"44b2f34c",null),or=rr.exports,sr=function(){var e,t,n,a,r,o,s,c,l,u,d,p,v,m,f,h,g,y,b,w,C,_,x,I,k,T,S,A,D,P,Z,U,E,R,M,L,F,N,O=this,B=O._self._c;O._self._setupProxy;return B("div",{ref:"coverMake",staticClass:"cover-make mx-auto flex w-[1200px] flex-row"},[B("div",{staticClass:"make-wrapper relative"},[B("mp-breadcrumb",{staticClass:"mb-9 mt-2",attrs:{list:O.breadcrumbList},on:{click:O.clickBreadcrumb}}),B("div",{ref:"baseInfoMainCard",staticClass:"main-card"},[B("div",{staticClass:"main-card-title"},[O._v("基本信息")]),B("mp-form",{ref:"baseForm",attrs:{model:O.cover,rules:O.baseRule,"label-width":90}},[B("mp-form-item",{staticClass:"cover-packet-name",attrs:{prop:"packetName"},scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label mt-2.5"},[B("span",[O._v("封面简称")]),B("mp-popover",{attrs:{position:"up-left",width:363,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap"},[B("p",[O._v(" "+O._s(1==O.principalType?"1.红包封面简称将展示在红包消息气泡（未上传个人logo）、发红包页、红包详情页、封面故事、封面领取页中。":"1.红包封面简称将展示在红包消息气泡（未上传品牌logo）、发红包页、封面故事、封面领取页中。")+" ")]),B("p",[B("img",{staticStyle:{width:"200px"},attrs:{src:i(4299)}})]),B("p",[B("img",{staticStyle:{width:"200px","margin-top":"4px"},attrs:{src:i(69716)}})]),B("p",[O._v(" "+O._s(O.wordingsMap.packetNamePopoverTips2[O.principalAccountType])+" ")])])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"relative top-0.5 ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[B("mp-input",{staticStyle:{width:"312px"},attrs:{type:"text",placeholder:"填写红包封面简称"},on:{input:O.handlePackNameInput},model:{value:O.cover.packetName,callback:function(e){O.$set(O.cover,"packetName",e)},expression:"cover.packetName"}}),B("div",{staticClass:"tip text-bw-lv3 mt-2 text-sm",domProps:{innerHTML:O._s(O.wordingsMap.packetNameTip[O.principalAccountType])}})],1),B("mp-form-item",{staticClass:"cover-logo-item",attrs:{prop:"logo"},scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label optional-label"},[B("span",{},[O._v(O._s(1==O.principalType?"个人logo":"品牌logo"))]),B("mp-popover",{attrs:{position:"up-left",width:450,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap"},[B("p",[O._v(" "+O._s(1==O.principalType?"1. 个人logo将展示在红包消息气泡/封面故事中。":"1. 品牌logo将展示在红包消息气泡/封面故事中。")+" ")]),B("p",[B("img",{staticStyle:{width:"200px"},attrs:{src:i(70964)}})]),B("p",[O._v(" "+O._s(1==O.principalType?"2. 若上传了个人logo，则红包消息气泡上将仅展示个人logo。若没有上传，将展示红包封面简称。":"2. 若上传了品牌logo，则红包消息气泡上将仅展示品牌logo。若没有上传，将展示红包封面简称。")+" ")]),B("p",[O._v(" "+O._s(O.wordingsMap.logoPopoverTips3[O.principalAccountType])+" ")])])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"relative top-0.5 ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[B("div",{staticClass:"relative"},[B("a-upload",{attrs:{name:"file",accept:".png,.jpg,.jpeg",action:"".concat(O.uploadImgUrl,"?type=logo"),data:{image_name:"logo",order_id:O.cover.orderId},beforeUpload:O.handelBrandLogoBeforeUpload,showUploadList:!1,fileList:O.logoFileList},on:{change:O.handleCoverLogoFileChange}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"},on:{click:function(e){e.preventDefault()}}},[O._v(" "+O._s(null!==(e=O.cover.brandLogo)&&void 0!==e&&e.mediaUrl?"重新上传":"上传")+" ")])],1),B("div",{staticClass:"upload-logo-wrap relative overflow-hidden",class:{"pb-[120px]":O.showSuggestLogo}},[B("div",{staticClass:"mt-3 text-sm text-opblack_2"},[O._v("支持PNG/JPG/JPEG; 200x200像素以内; 文件不超过100KB；")]),B("div",{staticClass:"mt-2 text-sm text-opblack_2"},[O._v(" "+O._s(O.wordingsMap.logoTips[O.principalAccountType])+" ")]),O.showSuggestLogo?O._e():B("div",{staticClass:"logo-wrap relative mt-5 flex h-24 w-24 items-center justify-center overflow-hidden rounded border border-solid border-opblack_3"},[O.cover.brandLogo.mediaUrl?B("img",{staticClass:"h-[68px] w-[68px]",attrs:{src:O.cover.brandLogo.mediaUrl}}):O._e(),O.logoUploading?B("div",{staticClass:"absolute left-0 top-0 flex h-full w-full items-center justify-center"},[B("div",{staticClass:"weui-desktop-loading"})]):B("div",{staticClass:"upload-mask"},[B("mask-icon",{staticClass:"h-6 w-6 cursor-pointer text-opwhite_1",attrs:{name:"trash"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),O.deleteCurBrandLogo.apply(null,arguments)}}})],1)]),"error"===(null===(t=O.logoFileList)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status)?B("div",{staticClass:"mt-2 text-sm text-primary"},[O._v("上传错误")]):O._e()]),O.showSuggestLogo?B("mp-popover",{staticClass:"suggest-cover-popover",attrs:{value:!0,width:96},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"suggest-cover-wrapper"},[B("div",{staticClass:"suggest-cover"},[B("img",{attrs:{src:O.headImgUrl}})]),B("a",{staticClass:"text-xs",on:{click:function(e){return e.preventDefault(),O.autoLogoFillIn.apply(null,arguments)}}},[O._v("填入")])])]},proxy:!0}],null,!1,3000981800)}):O._e()],1)])],1)],1),B("div",{ref:"coverMaterialMainCard",staticClass:"main-card"},[O.showNewCoverTips?B("mp-message",{staticClass:"mb-7 bg-neutral_2",attrs:{icon:"info",size:"mini",mode:"gray"},scopedSlots:O._u([{key:"title",fn:function(){return[B("div",{staticClass:"flex justify-between"},[B("div",[O._v(" 如需定制原 "),B("a",{on:{click:O.openWidgetDescDialog}},[O._v("「新版封面」")]),O._v(" ，可直接上传挂件素材。 ")]),B("mask-icon",{staticClass:"h-5 w-5 cursor-pointer",attrs:{name:"close"},nativeOn:{click:function(e){return O.initNewCoverTips.apply(null,arguments)}}})],1)]},proxy:!0}],null,!1,661384574)}):O._e(),B("div",{ref:"coverStyleMainCard",staticClass:"main-card-title-wrapper items-center",style:{"margin-bottom":O.showDynamicIcon?"8px":""}},[B("div",{staticClass:"main-card-title"},[O._v("封面样式")]),B("div",[B("a",{staticClass:"tip-link",attrs:{href:"https://".concat(O.pageHost,"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=design&index=2&subIndex=0"),target:"_blank"}},[O._v(" 了解设计规范 ")]),B("a",{staticClass:"tip-link",staticStyle:{"margin-left":"8px"},attrs:{href:O.designTemplateUrl,tatget:"_blank"},on:{click:O.handleClickDownloadTemplate}},[O._v("下载设计模板")])])]),O.showDynamicIcon?B("div",{staticClass:"mb-6 flex items-center text-opblack_2"},[O._v(" 封面图及封面挂件支持视频素材 "),B("span",{staticClass:"icon-new ml-1 inline-block rounded-lg bg-primary px-2 pb-px text-xs text-white"},[O._v("new")])]):O._e(),B("mp-form",[B("mp-form-item",{scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label mt-1.5"},[O._v("封面图")])]},proxy:!0}])},[B("div",{staticClass:"cover-file"},[B("div",{staticClass:"cover-file-uploader"},[B("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:O.ACCEPT_TYPE,action:O.uploadImgUrl,fileList:O.imgFileList,data:{image_name:"sourceImage",order_id:O.cover.orderId},showUploadList:!1,customRequest:O.uploadCoverMaterial,beforeUpload:O.handelCoverImgBeforeUpload},on:{change:O.handleCoverImgChange}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[null!==(a=O.coverImg)&&void 0!==a&&a.url||O.coverMaterialUploading||O.getFirstFrameLoading?B("span",[O._v("重新上传")]):B("span",[O._v("上传")])])],1)],1)]),B("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:O.coverErrorInfo}}),B("div",{staticClass:"tip mt-2 text-sm"},[O._v(" 图片格式：PNG/JPG/JPEG；尺寸957×1278像素 "),B("InfoPopover",{attrs:{text:"平台支持裁剪图片尺寸，其他尺寸图片可裁剪后应用为封面图。",iconClass:"top-0.5  ml-0.5"}}),O._v(" ；不超过500KB； ")],1),B("div",{staticClass:"tip mt-2 text-sm"},[O._v(" 视频格式：MP4；视频宽高比建议3:4；分辨率低于4k；时长1s至3s "),B("InfoPopover",{attrs:{text:"平台支持裁剪视频时长，60s内的视频均可上传，裁剪为1s至3s后应用为封面图。",iconClass:"top-0.5 ml-0.5"}}),O._v(" ；文件不超过20MB；帧率30fps以内；码率不高于3000kbit/s；视频编码H.264/AVC；yuv格式420。 ")],1),B("InfoPopover",{attrs:{width:400,defaultText:"平台同时支持上传",targetLink:"PNG序列帧",linkClass:"mt-2 ml-0.5"}},[B("div",{staticClass:"text-opblack_2"},[B("div",{staticClass:"font-medium"},[O._v("PNG序列帧上传要求")]),B("div",{},[O._v(" · PNG图片尺寸957×1278像素； "),B("br"),O._v(" · 将视频（1s至3s）以24fps帧率导出序列帧； "),B("br"),O._v(" · 全部图片打包为1个ZIP压缩包上传，压缩包不超过50MB； "),B("br"),O._v(" · 每张PNG图片按播放顺序以5位连续数字命名，例如00001.png、00002.png…； "),B("br"),O._v(" · 图片张数不少于24张，不多于72张； ")])])]),B("div",{staticClass:"mt-4 flex"},[O.coverImgUploading||O.coverMaterialUploading||O.getFirstFrameLoading||null!==(r=O.coverImg)&&void 0!==r&&r.url?B("MaterialItem",{staticClass:"mr-12",attrs:{loading:O.coverMaterialUploading,picUrl:O.coverImg.dataUrl||(null===(o=O.cover.packetMaterial.sourceImage)||void 0===o?void 0:o.mediaUrl),name:O.sourceDynamicMediaInfo.name||(null===(s=O.cover.packetMaterial.coverImageDynamicSource)||void 0===s?void 0:s.mediaName)||(null===(c=O.cover.packetMaterial)||void 0===c||null===(l=c.sourceImage)||void 0===l?void 0:l.mediaName),icon:O.CoverMaterialItem,showEdit:!O.dynamicMaterialUploading&&!O.coverMaterialUploading&&!O.getFirstFrameLoading&&(!!O.cropperSourceImgInfo.objectUrl||O.sourceDynamicMediaInfo.type===O.CoverMediaType.Mp4),popoverTitle:"删除封面素材",popoverContent:"删除后「红包气泡」、「红包详情页」、「发红包页」素材也会被删除。"},on:{edit:function(e){O.showSourcePagEditorVisible=!0},trash:O.clearAllCoverMaterial}}):O._e(),B("CoverCrop",{attrs:{imgFile:O.coverImg,cropedImgList:O.cropedImgList,cover:O.cover,showCoverStory:O.showCoverStory,coverType:O.coverType,storyDetailList:O.cover.packetMaterial.storyDetailList,sourceDynamicMediaInfo:O.sourceDynamicMediaInfo,loading:O.dynamicMaterialUploading,detailPagLoading:O.sourcePagLoading,corpPagLoading:O.corpPagLoading,bubblePagLoading:O.bubblePagLoading,useStaticBubblePic:O.useStaticBubblePic,useStaticCorpPic:O.useStaticCorpPic,getBubbleMaterial:O.getBubbleMaterial,getCorpMaterial:O.getCorpMaterial,getPagDetailMaterial:O.getPagDetailMaterial,hasAtmosphere:!(null===(u=O.cover.packetMaterial)||void 0===u||null===(d=u.atmosphereSource)||void 0===d||!d.mediaUrl),showAtmosphereTips:O.showAtmosphereTips},on:{changeImg:O.changeImg,checkPreview:function(e){return O.triggerToPreview(2,e)},changeGenMaterialStatus:O.handleChangeGenMaterialStatus,updateMaterial:O.handleCoverCropUpdateMaterial,updateCropedImgList:O.setCropedImgList}})],1)],1),B("mp-form-item",{scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label optional-label mt-1.5"},[O._v(" 封面挂件 "),B("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap"},[B("p",{staticClass:"font-normal"},[O._v("拆红包页的装饰素材，会和封面图一起展示在拆红包页。")]),B("div",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[B("img",{staticStyle:{width:"100%"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/e9bfc965-0025-4ec3-b56b-5eabfd7a689c/cover-widget.png"}})])])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"relative top-[2px] h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[B("div",{staticClass:"cover-file"},[B("div",{staticClass:"cover-file-uploader"},[B("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png,.zip",showUploadList:!1,beforeUpload:O.handelRecWidgetImageBeforeUpload,fileList:O.recWidgetImageList,data:{image_name:"recWidgetImage",order_id:O.cover.orderId},customRequest:O.uploadRecWidgetImage},on:{change:O.handleRecWidgetImageChange}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[null!==(p=O.cover.packetMaterial.recWidgetImage)&&void 0!==p&&p.mediaUrl?B("span",[O._v("重新上传")]):B("span",[O._v("上传")])])],1)],1)]),B("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:O.coverWidgetErrorInfo}}),B("div",{staticClass:"tip mt-2 text-sm"},[O._v("图片格式：PNG；尺寸1053×1746像素；不超过300KB；")]),B("div",{staticClass:"tip mt-2 text-sm"},[O._v(" 视频格式：PNG序列帧；PNG图片尺寸1053×1746像素；将视频（1s至3s）以24fps帧率导出序列帧；全部图片打包为1个ZIP压缩包上传，压缩包不超过20MB； "),B("ZipDescPopover",{staticClass:"-ml-2"})],1),B("div",{staticClass:"tip mt-2 text-sm"},[B("p",[B("span",[O._v("挂件需在")]),B("a",{attrs:{href:"https://".concat(O.pageHost,"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=design&targetId=cover-widget-title"),target:"_blank"}},[O._v(" 可编辑区 ")]),B("span",[O._v("内设计。")])])]),B("div",{staticClass:"mt-4 flex"},[O.recWidgetUploading||null!==(v=O.cover)&&void 0!==v&&null!==(m=v.packetMaterial)&&void 0!==m&&null!==(f=m.recWidgetImage)&&void 0!==f&&f.mediaUrl?B("MaterialItem",{attrs:{picUrl:null===(h=O.cover.packetMaterial.recWidgetImage)||void 0===h?void 0:h.mediaUrl,name:(null===(g=O.cover.packetMaterial.widgetImageDynamicSource)||void 0===g?void 0:g.mediaName)||(null===(y=O.cover.packetMaterial.recWidgetImage)||void 0===y?void 0:y.mediaName),icon:(null===(b=O.cover.packetMaterial.widgetImageDynamicSource)||void 0===b?void 0:b.mediaType)===O.CoverMediaType.Zip?"video":"pic",loading:O.recWidgetUploading},on:{trash:O.handleDeleteRecWidget}}):O._e()],1)],1),B("mp-form-item",{scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label optional-label mt-1.5"},[O._v(" 气泡挂件 "),B("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap"},[B("p",{staticClass:"font-normal"},[O._v("红包消息气泡的装饰素材，会和封面图一起展示在聊天中的红包消息气泡上。")]),B("div",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[B("img",{staticStyle:{width:"100%"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/e9bfc965-0025-4ec3-b56b-5eabfd7a689c/bubble-widget.png"}})])])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"relative top-[2px] h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[B("div",{staticClass:"cover-file"},[B("div",{staticClass:"cover-file-uploader"},[B("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png,.jpg,.jpeg",action:"".concat(O.uploadImgUrl,"?type=senderC2cWidgetImage"),fileList:O.senderC2cWidgetImageList,data:{image_name:"senderC2cWidgetImage",order_id:O.cover.orderId},showUploadList:!1,beforeUpload:O.handelSenderC2cWidgetImageBeforeUpload},on:{change:O.handleSenderC2cWidgetImageChange}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[O.cover.packetMaterial.senderC2cWidgetImage&&O.cover.packetMaterial.senderC2cWidgetImage.mediaUrl?B("span",[O._v("重新上传")]):B("span",[O._v("上传")])])],1)],1)]),B("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:O.bubbleWidgetErrorInfo}}),B("div",{staticClass:"tip mt-2 text-sm"},[B("p",[B("span",[O._v("图片格式：PNG；尺寸480×384像素；不超过300KB；挂件需在")]),B("a",{attrs:{href:"https://".concat(O.pageHost,"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=design&targetId=bubble-widget-title"),target:"_blank"}},[O._v(" 可编辑区 ")]),B("span",[O._v("内设计。")])])]),B("div",{staticClass:"mt-4 flex"},[O.bubbleWidgetUploading||null!==(w=O.cover)&&void 0!==w&&null!==(C=w.packetMaterial)&&void 0!==C&&null!==(_=C.senderC2cWidgetImage)&&void 0!==_&&_.mediaUrl?B("MaterialItem",{attrs:{picUrl:null===(x=O.cover)||void 0===x||null===(I=x.packetMaterial)||void 0===I||null===(k=I.senderC2cWidgetImage)||void 0===k?void 0:k.mediaUrl,icon:"pic",name:null===(T=O.cover)||void 0===T||null===(S=T.packetMaterial)||void 0===S||null===(A=S.senderC2cWidgetImage)||void 0===A?void 0:A.mediaName,loading:O.bubbleWidgetUploading},on:{trash:O.clearC2cWidgetPic}}):O._e()],1)],1),O.isAtmosphereUser||"wx_2999361361"===O.authorId?B("mp-form-item",{scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label optional-label mt-1.5"},[O._v(" 氛围素材 "),B("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap text-opblack_2"},[B("p",[O._v("上传一张氛围图片，即可在气泡、拆红包页、红包详情页分别生成氛围效果。")]),O._v(" 平台暂不支持预览氛围效果，可点击「手机预览」，在手机上扫码预览。 ")])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"relative top-[2px] h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,4206350705)})],1)]},proxy:!0}],null,!1,3557360122)},[B("div",{staticClass:"cover-file"},[B("div",{staticClass:"cover-file-uploader"},[B("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png",action:"".concat(O.uploadImgUrl,"?type=atmosphere"),fileList:O.atmosphereImageList,data:{image_name:"atmospherePag",order_id:O.cover.orderId},showUploadList:!1,beforeUpload:O.handleAtmosphereBeforeUpload},on:{change:O.handleAtmospherePagChange}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[null!==(D=O.cover.packetMaterial.bubbleAtmospherePag)&&void 0!==D&&D.mediaUrl||null!==(P=O.cover.packetMaterial.coverAtmospherePag)&&void 0!==P&&P.mediaUrl?B("span",[O._v("重新上传")]):B("span",[O._v("上传")])])],1)],1)]),"wx_1498025600"===O.authorId?B("div",{staticClass:"cover-file-uploader"},[B("div",[B("a-space",[B("div",[O._v(" 气泡fps "),B("input",{directives:[{name:"model",rawName:"v-model",value:O.bubbleFps,expression:"bubbleFps"}],attrs:{type:"text"},domProps:{value:O.bubbleFps},on:{input:function(e){e.target.composing||(O.bubbleFps=e.target.value)}}})]),B("div",[O._v(" 气泡quality "),B("input",{directives:[{name:"model",rawName:"v-model",value:O.bubbleQuality,expression:"bubbleQuality"}],attrs:{type:"text"},domProps:{value:O.bubbleQuality},on:{input:function(e){e.target.composing||(O.bubbleQuality=e.target.value)}}})])]),B("br"),O._v(" 文件大小: "+O._s(O.bubbleFileSize)+" "),B("br"),O._v(" Pag地址： "),B("a",{attrs:{href:O.bubbleRes,target:"_blank"}},[O._v(O._s(O.bubbleRes))])],1),B("br"),B("a-space",[B("div",[B("div",[O._v(" 详情页fps "),B("input",{directives:[{name:"model",rawName:"v-model",value:O.detailFps,expression:"detailFps"}],attrs:{type:"text"},domProps:{value:O.detailFps},on:{input:function(e){e.target.composing||(O.detailFps=e.target.value)}}})]),B("div",[O._v(" 详情页quality "),B("input",{directives:[{name:"model",rawName:"v-model",value:O.detailQuality,expression:"detailQuality"}],attrs:{type:"text"},domProps:{value:O.detailQuality},on:{input:function(e){e.target.composing||(O.detailQuality=e.target.value)}}})]),O._v(" 文件大小: "+O._s(O.detailFileSize)+" "),B("br"),O._v(" Pag地址： "),B("a",{attrs:{href:O.detailRes,target:"_blank"}},[O._v(O._s(O.detailRes))])])]),B("br"),B("br"),B("a-space",[B("div",[B("div",[O._v(" 封面fps "),B("input",{directives:[{name:"model",rawName:"v-model",value:O.coverFps,expression:"coverFps"}],attrs:{type:"text"},domProps:{value:O.coverFps},on:{input:function(e){e.target.composing||(O.coverFps=e.target.value)}}})]),B("div",[O._v(" 封面quality "),B("input",{directives:[{name:"model",rawName:"v-model",value:O.coverQuality,expression:"coverQuality"}],attrs:{type:"text"},domProps:{value:O.coverQuality},on:{input:function(e){e.target.composing||(O.coverQuality=e.target.value)}}})])]),B("br")]),O._v(" 文件大小: "+O._s(O.coverFileSize)+" "),B("br"),O._v(" Pag地址： "),B("a",{attrs:{href:O.coverRes,target:"_blank"}},[O._v(O._s(O.coverRes))]),B("br"),B("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png",action:"".concat(O.uploadImgUrl,"?type=atmosphere"),fileList:O.atmosphereImageList,data:{image_name:"atmospherePag",order_id:O.cover.orderId},showUploadList:!1,beforeUpload:O.handleAtmosphereBeforeUpload},on:{change:O.handleAtmospherePagChangeTest}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[null!==(Z=O.cover.packetMaterial.bubbleAtmospherePag)&&void 0!==Z&&Z.mediaUrl||null!==(U=O.cover.packetMaterial.coverAtmospherePag)&&void 0!==U&&U.mediaUrl?B("span",[O._v("重新上传")]):B("span",[O._v("测试上传")])])],1)],1):O._e(),B("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:O.atmosphereErrorInfo}}),B("div",{staticClass:"tip mt-2 text-sm"},[B("p",[O._v("图片格式：PNG；尺寸300x300像素；文件不超过100KB；")]),B("p",{staticClass:"mt-2"},[O._v("氛围素材上传后，红包气泡视频素材会替换为图片。")])]),B("div",{staticClass:"mt-4 flex"},[null!==(E=O.cover.packetMaterial.atmosphereSource)&&void 0!==E&&E.mediaUrl||O.atmosphereUploading||O.atmosphereMaking?B("MaterialItem",{attrs:{picUrl:null===(R=O.cover.packetMaterial.atmosphereSource)||void 0===R?void 0:R.mediaUrl,icon:"pic",name:null===(M=O.cover.packetMaterial.atmosphereSource)||void 0===M?void 0:M.mediaName,loading:O.atmosphereUploading},on:{trash:O.handleTrashAtmosphere}}):O._e()],1)],1):O._e()],1)],1),B("div",{ref:"storyMainCard",staticClass:"main-card js-story-main-card"},[B("mp-form",{staticClass:"story-section",class:{"show-story":O.showCoverStory}},[B("mp-form-item",{class:{"mb-0":!O.showCoverStory},attrs:{label:"封面故事"},scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label"},[B("div",{staticClass:"main-card-title",staticStyle:{"margin-bottom":"0"}},[O._v(" 封面故事 "),B("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap"},[B("p",{staticClass:"font-normal"},[O._v(" 在这里，你可以讲述封面创作的背后故事，可添加对应的视频、图片、文案、小程序或公众号。用户进入红包详情页即可看到你的封面故事，点击「下拉」按钮或直接下拉可完整浏览封面故事。 ")]),B("div",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[B("img",{staticStyle:{width:"100%"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/ec46853b-674e-4ec8-b196-64ef10f1f0c8/example.png"}})])])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)])]},proxy:!0}])},[B("mp-checkbox",{model:{value:O.showCoverStory,callback:function(e){O.showCoverStory=e},expression:"showCoverStory"}},[O._v("添加封面故事")]),B("div",{staticClass:"mt-2 text-opblack_2"},[O._v("素材上传后，「红包详情页」下拉前后都会展示封面故事。")])],1),O.showCoverStory?[B("mp-form-item",{scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label mt-2.5"},[B("span",[O._v("添加素材")])])]},proxy:!0}],null,!1,1650488506)},[B("StoryMake",{attrs:{storyDesc:O.cover.packetMaterial.storyDescription,cover:O.cover,setOfinderInfo:O.setOfinderInfo,OfinderInfo:O.OfinderInfo},on:{setStoryDetail:O.setStoryDetail,delStoryDetail:O.delStoryDetail,setStorySort:O.setStorySort},model:{value:O.cover.packetMaterial.storyDetailList,callback:function(e){O.$set(O.cover.packetMaterial,"storyDetailList",e)},expression:"cover.packetMaterial.storyDetailList"}})],1),B("mp-form-item",{scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label optional-label"},[B("span",[O._v("故事描述")])])]},proxy:!0}],null,!1,2466779544)},[B("mp-input",{staticClass:"text-input",attrs:{placeholder:"用一句话描述封面故事",maxlength:40,required:"required",countable:"countable",counter:O.storyDescCounter,multi:"multi",value:O.cover.packetMaterial.storyDescription},on:{input:O.setStoryDescription},scopedSlots:O._u([{key:"message",fn:function(){return[B("p",[O._v("请输入正确格式的故事描述")])]},proxy:!0}],null,!1,2560451451)})],1),B("AddMiniApp",{attrs:{saveVideo:O.saveVideo,clearSaveVideo:O.clearSaveVideo,setOpenStroy:O.setOpenStroy,action:(O.cover.packetMaterial.actionList&&O.cover.packetMaterial.actionList[0]&&O.cover.packetMaterial.actionList[0].actionType?O.cover.packetMaterial.actionList[0]:O.actionAuthInfo.action)||{},orderId:O.cover.orderId},on:{setAction:O.handleSetAction,genOrderId:O.generateOrderId}})]:O._e()],2)],1),B("div",{staticClass:"main-card",staticStyle:{"margin-bottom":"80px"}},[B("div",{staticClass:"main-card-title-wrapper flex-col"},[B("div",{staticClass:"mb-2 flex"},[B("div",{staticClass:"main-card-title"},[O._v(" 证明材料 "),B("mp-popover",{attrs:{position:"up-left",width:450,trigger:"hover"},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",{staticClass:"info-wrap"},[B("p",{staticClass:"font-normal"},[O._v(" 1. 如果你的红包封面中包含美术作品的，请上传《作品登记证书》或《著作权登记证书》的扫描件；如没有该等证书的，请提供能够证明你拥有作品著作权的其他材料，包括但不限于该作品的psd格式文件、人民法院确认该作品权属情况的生效法律文书、能够证明作品权利人情况的发表链接等等。 ")]),B("p",{staticClass:"mt-6 font-normal"},[B("span",[O._v("2. 如果你的红包封面中包含注册商标的，请上传《商标注册证》的扫描件。如涉及授权，需提供商标使用授权书")]),B("a",{attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/doc/Authorizations_3.docx"},on:{click:O.handleClickDownloadTemplate}},[O._v("下载模板")]),B("span",[O._v("。如涉及肖像，需提供图中人物的身份证明、肖像权授权书")]),B("a",{attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/doc/Authorizations_1.docx"},on:{click:O.handleClickDownloadTemplate}},[O._v("下载模板")]),B("span",[O._v("等证明材料。如涉及版权，需提供作品的版权证明、版权授权书")]),B("a",{attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/doc/Authorizations_2.docx"},on:{click:O.handleClickDownloadTemplate}},[O._v("下载模板")]),B("span",[O._v("、版权所有者主体证明等。更多内容请查看")]),B("a",{on:{click:O.goToProofInstruction}},[O._v("证明材料指引")]),B("span",[O._v("。")])])])]},proxy:!0},{key:"target",fn:function(){return[B("span",{staticClass:"info-icon-wrap"},[B("mask-icon",{staticClass:"ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1),B("div",[B("a",{staticClass:"tip-link",attrs:{href:"https://".concat(O.pageHost,"/cgi-bin/mmcover-bin/readtemplate?t=page/index#/doc?page=design&index=4"),target:"_blank"}},[O._v(" 证明材料指引 ")]),B("a",{staticClass:"tip-link",staticStyle:{"margin-left":"8px"},attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/authorized/0121/%E6%8E%88%E6%9D%83%E4%B9%A6%E6%A8%A1%E6%9D%BF.zip",tatget:"_blank"},on:{click:O.handleClickDownloadTemplate}},[O._v(" 下载授权书模板 ")])])])]),B("mp-form",[B("mp-form-item",{attrs:{prop:"evidence",label:"证明材料"},scopedSlots:O._u([{key:"label",fn:function(){return[B("div",{staticClass:"label optional-label mt-1.5"},[B("span",[O._v("证明材料")])])]},proxy:!0}])},[B("div",{staticClass:"cover-file"},[B("div",{staticClass:"cover-file-uploader"},[B("a-upload",{ref:"fileUpload",staticClass:"evidence-upload",attrs:{name:"file",beforeUpload:O.handleEnvidenceBeforeUpload,customRequest:O.uploadFile,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!0},fileList:O.evidenceFileList},on:{change:O.handleCoverEvidenceFileChange}},[B("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[O.cover.proofMaterial.mediaUrl?B("span",[O._v("重新上传")]):B("span",[O._v("上传文件")])])],1),O.showEvidenceUploadError?B("div",{staticClass:"upload-error-tip mt-1 text-primary"},[O._v("上传失败，请重试")]):O._e(),B("div",{staticClass:"tip mt-2"},[O._v(" 若封面中包含美术作品、注册商标、人物肖像或涉及版权，需在证明文件中上传《作品登记证书》、《商标注册证》、商标/肖像权/版权授权书等证明材料，授权书有效期需截止到封面提审后的六个月及以上。 ")]),B("div",{staticClass:"tip"},[O._v("多个文件请打包压缩上传，文件需不超过100MB。")])],1)])])],1)],1),B("div",{staticClass:"options fixed bottom-0 flex justify-end bg-white p-8"},[O.isFormReady?B("mp-button",{staticClass:"button",on:{click:O.handleMobilePreview}},[O._v("手机预览")]):B("mp-popover",{attrs:{position:"down-center",width:17*O.previewDisabledContent.length,trigger:"hover"},scopedSlots:O._u([{key:"target",fn:function(){return[B("mp-button",{staticClass:"button",attrs:{disabled:!0}},[O._v("手机预览")])]},proxy:!0}],null,!1,2398139068)},[B("div",{staticClass:"text-center"},[O._v(O._s(O.previewDisabledContent))])]),B("mp-button",{staticClass:"button save-button",attrs:{disabled:!O.canSave,loading:1===O.saveStatus},on:{click:O.save}},[1===O.saveStatus?B("span",[O._v("保存中")]):O._e(),O.saveStatus<1?B("span",[O._v("保存")]):O._e(),2===O.saveStatus?B("span",[O._v("已保存")]):O._e()]),O.statusCount>2&&!O.isInnerUser?B("mp-popover",{attrs:{position:"down-center",content:"最多可同时在审3款红包封面，待审核完成后可继续提交。",trigger:"hover"},scopedSlots:O._u([{key:"target",fn:function(){return[B("mp-button",{staticClass:"button",attrs:{disabled:!0,type:"primary"},on:{click:O.submit}},[O._v("提交")])]},proxy:!0}],null,!1,2955936102)}):O.isCanEdit?B("mp-button",{staticClass:"button submit-button",attrs:{disabled:!O.canSubmit,loading:1===O.submitStatus,type:"primary"},on:{click:O.submit}},[O._v("提交")]):B("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:O._u([{key:"content",fn:function(){return[B("div",[B("span",[O._v("暂无编辑封面权限，请前往")]),B("a",{on:{click:O.toadmin}},[O._v("成员管理")]),B("span",[O._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[B("mp-button",{staticClass:"button submit-button",attrs:{disabled:!0,type:"primary"},on:{click:O.submit}},[O._v("提交")])]},proxy:!0}])})],1),B("CoverPreviewDialog",{attrs:{cover:O.cover},model:{value:O.showPreviewQrcodeDialog,callback:function(e){O.showPreviewQrcodeDialog=e},expression:"showPreviewQrcodeDialog"}})],1),B("div",{staticClass:"ml-5 mt-14"},[O.previewCoverReady?B("preview-cover",{ref:"previewCoverRef",staticClass:"sticky top-20",attrs:{showCoverStory:O.showCoverStory,cropedImgList:O.cropedImgList,cover:O.cover,coverImageDynamicType:null===(L=O.cover.packetMaterial)||void 0===L?void 0:L.coverImageDynamicType,baseInfoLoading:O.bubblePagLoading,corpInfoLoading:O.corpPagLoading,coverDetailLoading:O.sourcePagLoading,coverInfoLoading:O.coverDynamicPagLoading||O.dynamicRecWidgetUploading,isAtmosphereCover:!!(null!==(F=O.cover.packetMaterial.atmosphereSource)&&void 0!==F&&F.mediaUrl||null!==(N=O.cover.packetMaterial.bubbleAtmospherePag)&&void 0!==N&&N.mediaUrl)}}):O._e()],1),B("WidgetDescDialog",{model:{value:O.widgetDescDialogVisible,callback:function(e){O.widgetDescDialogVisible=e},expression:"widgetDescDialogVisible"}}),B("source-media-editor-dialog",{attrs:{"file-url":O.sourceDynamicMediaInfo.objectUrl||O.sourceDynamicMediaInfo.url,"file-type":O.sourceDynamicMediaInfo.type,cropperSourceImgInfo:O.cropperSourceImgInfo,"file-name":O.sourceDynamicMediaInfo.name},on:{sureDynamic:O.handleSourcePagSure,surePic:O.handleSurePic},model:{value:O.showSourcePagEditorVisible,callback:function(e){O.showSourcePagEditorVisible=e},expression:"showSourcePagEditorVisible"}})],1)},cr=[],lr=(i(73210),i(40561),function(){var e,t,n,a,r,o=this,s=o._self._c;o._self._setupProxy;return s("div",{staticClass:"cover-crop relative"},[null!==(e=o.cropedImgList)&&void 0!==e&&e.bubbleImageUrl?s("OtherMaterial",{attrs:{cover:o.cover,detailPagLoading:o.detailPagLoading,corpPagLoading:o.corpPagLoading,bubblePagLoading:o.bubblePagLoading,material:o.cropedImgList,useStaticBubblePic:o.useStaticBubblePic,useStaticCorpPic:o.useStaticCorpPic,showAtmosphereBubbleTips:o.showAtmosphereTips},on:{editImg:o.editImg,checkPreview:o.checkPreview}}):o._e(),s("mp-dialog",{staticClass:"covercrop-dialog",attrs:{title:"编辑素材大小与位置",value:o.showEditDialog,width:1120},on:{close:o.handleCropDialogClose,"visible-change":o.handleDialogVisible},scopedSlots:o._u([{key:"footer",fn:function(){return[s("div",{staticClass:"footer p-4"},[s("mp-button",{staticClass:"cancel mr-4",attrs:{type:"default"},on:{click:function(e){return e.preventDefault(),o.cancel.apply(null,arguments)}}},[o._v("取消")]),s("mp-button",{attrs:{type:"primary",disabled:o.uploadLoading},on:{click:function(e){return e.preventDefault(),o.handleSure.apply(null,arguments)}}},[o._v("确定")])],1)]},proxy:!0}])},["dynamic"===o.mode&&o.showEditDialog?s("div",{staticClass:"content"},["bubble"===o.curEditImgName?s("media-editor",{key:"bubble",ref:"bubbleMediaEditor",attrs:{fileType:o.CoverMediaType.Pag,fileUrl:o.bubbleMediaEditorFileUrl,onlyShow:o.bubbleDynamicFromUpload||!(null===(t=o.bubbleTemporaryDynamic)||void 0===t||!t.pagUrl),ratios:o.bubbleRatios,workAreaWidth:304,workAreaHeight:304,frameLineWidth:289,frameLineHeight:70,previewType:"bubble"},on:{cropChange:o.handleCropChange,changePoint:o.handleChangePoint},scopedSlots:o._u([{key:"edit-area",fn:function(){return[s("div",{staticClass:"mt-6 w-[336px]"},[s("CoverCropBubbleTips",{attrs:{mode:"dynamic",isDynamicCover:!0}})],1)]},proxy:!0}],null,!1,2745640898)}):o._e(),"detail"===o.curEditImgName?s("media-editor",{key:"detail",ref:"detailMediaEditor",attrs:{fileType:o.CoverMediaType.Pag,fileUrl:o.detailMediaEditorFileUrl,onlyShow:o.detailDynamicFromUpload||!(null===(n=o.detailTemporaryDynamic)||void 0===n||!n.pagUrl),ratios:o.detailRatios,workAreaWidth:304,workAreaHeight:304,frameLineWidth:289,frameLineHeight:70,previewType:"detail"},on:{cropChange:o.handleCropChange,changePoint:o.handleChangePoint},scopedSlots:o._u([{key:"edit-area",fn:function(){return[s("div",{staticClass:"mt-6 w-[336px]"},[s("CoverCropDetailTips",{attrs:{mode:"dynamic",isDynamicCover:!0}})],1)]},proxy:!0}],null,!1,3113404013)}):o._e(),"corp"===o.curEditImgName?s("media-editor",{key:"corp",ref:"corpMediaEditor",attrs:{fileType:o.CoverMediaType.Pag,fileUrl:o.corpMediaEditorFileUrl,onlyShow:o.corpDynamicFromUpload||!(null===(a=o.corpTemporaryDynamic)||void 0===a||!a.pagUrl),ratios:o.corpRatios,workAreaWidth:304,workAreaHeight:304,frameLineWidth:289,frameLineHeight:70,previewType:"corp"},on:{cropChange:o.handleCropChange,changePoint:o.handleChangePoint},scopedSlots:o._u([{key:"edit-area",fn:function(){return[s("div",{staticClass:"mt-6 w-[336px]"},[s("CoverCropCorpTips",{attrs:{mode:"dynamic",isDynamicCover:!0}})],1)]},proxy:!0}],null,!1,1845104050)}):o._e()],1):s("div",{staticClass:"edit-wrap relative mx-auto flex w-[830px] justify-between"},[s("div",{staticClass:"edit-area"},[s("div",{staticClass:"mb-4 text-sm text-opblack_2"},[o._v("编辑素材")]),s("div",{staticClass:"content-wrapper"},[o.imgFile&&(o.imgFile.dataUrl||o.imgFile.url)?s("div",{staticClass:"content p-6",style:"height:"+o.height+"px"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===o.curEditImgName,expression:"curEditImgName === 'detail'"}],staticClass:"edit-content"},[o.detailImg||o.imgFile?s("img",{ref:"detailSource",staticClass:"edit-img",attrs:{src:o.detailImgUrl}}):o._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:"bubble"===o.curEditImgName,expression:"curEditImgName === 'bubble'"}],staticClass:"edit-content"},[o.bubbleImg||o.imgFile?s("img",{ref:"bubbleSource",staticClass:"edit-img",attrs:{src:o.bubbleImgUrl}}):o._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:"corp"===o.curEditImgName,expression:"curEditImgName === 'corp'"}],staticClass:"edit-content"},[o.corpImg||o.imgFile?s("img",{ref:"corpSource",staticClass:"edit-img",attrs:{src:o.corpImgUrl}}):o._e()])]):o._e()]),s("div",{staticClass:"mt-6"},["bubble"===o.curEditImgName?s("CoverCropBubbleTips",{attrs:{mode:"static",isDynamicCover:!!o.sourceImageDynamicMediaUrl&&!o.hasAtmosphere}}):o._e(),"detail"===o.curEditImgName?s("CoverCropDetailTips",{attrs:{mode:"static",isDynamicCover:!!o.sourceImageDynamicMediaUrl}}):o._e(),"corp"===o.curEditImgName?s("CoverCropCorpTips",{attrs:{mode:"static",isDynamicCover:!!o.sourceImageDynamicMediaUrl}}):o._e()],1)]),s("div",{staticClass:"preview-area"},[s("div",{staticClass:"mb-4 text-sm text-opblack_2",class:o.previewTitleClass},[o._v("预览素材")]),s("div",{staticClass:"content px-6",class:{"h-[339px]":"bubble"===o.curEditImgName}},[s("div",{staticClass:"relative overflow-hidden",class:o.curEditImgName},["bubble"===o.curEditImgName?s("div",[s("div",{staticClass:"preview-content-bubble"}),null!==(r=o.cover.packetMaterial.senderC2cWidgetImage)&&void 0!==r&&r.mediaUrl?s("widget-bubble-img",{staticClass:"relative left-auto right-0 h-[144px] w-auto",attrs:{"bubble-url":o.coverToolPics.crop2,"widget-url":o.senderC2cWidgetImageUrl||o.coverToolPics.example_5}}):s("img",{staticClass:"crop2 relative",attrs:{src:i(20005)}})],1):o._e(),"corp"===o.curEditImgName?s("div",{staticClass:"overflow-hidden",style:{"--corp-preivew-width":"252px",width:"var(--corp-preivew-width)"}},[s("div",{staticClass:"preview-content-corp"}),s("img",{staticClass:"relative w-full rounded border border-solid border-white",attrs:{src:o.corpUrl}})]):o._e(),"detail"===o.curEditImgName?s("div",{staticClass:"rounded-lg border-[1px] border-solid border-opblack_4",style:{"--detail-preivew-width":"252px",width:"var(--detail-preivew-width)"}},[s("div",{staticClass:"preview-content-detail"}),s("img",{staticClass:"relative w-full rounded border border-solid border-white",attrs:{src:o.detailUrl}})]):o._e()])])])]),s("div",{staticClass:"mt-4",class:o.uploadBtnClass},[s("a-upload",{directives:[{name:"show",rawName:"v-show",value:"bubble"===o.curEditImgName,expression:"curEditImgName === 'bubble'"}],attrs:{name:"file",accept:o.acceptType,action:o.uploadImgUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},beforeUpload:o.handelBeforeUpload,customRequest:o.handleUpload,fileList:o.bubbleFileList},on:{change:o.handleUploadChange}},[s("mp-button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault()}}},[s("span",[o._v("更换素材")])])],1),s("a-upload",{directives:[{name:"show",rawName:"v-show",value:"detail"===o.curEditImgName,expression:"curEditImgName === 'detail'"}],attrs:{name:"file",accept:o.acceptType,action:o.uploadImgUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},beforeUpload:o.handelBeforeUpload,customRequest:o.handleUpload,fileList:o.detailFileList},on:{change:o.handleUploadChange}},[s("mp-button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault()}}},[s("span",[o._v("更换素材")])])],1),s("a-upload",{directives:[{name:"show",rawName:"v-show",value:"corp"===o.curEditImgName,expression:"curEditImgName === 'corp'"}],attrs:{name:"file",accept:o.acceptType,action:o.uploadImgUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},beforeUpload:o.handelBeforeUpload,customRequest:o.handleUpload,fileList:o.corpFileList},on:{change:o.handleUploadChange}},[s("mp-button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault()}}},[s("span",[o._v("更换素材")])])],1)],1)])],1)}),ur=[],dr=i(33129),pr=i.n(dr),vr=function(){var e,t,n,a,r=this,o=r._self._c;r._self._setupProxy;return o("div",{staticClass:"select-none"},[o("div",{staticClass:"mb-[7px] pl-2 text-xs text-opblack_2"},[r._v("封面图将同时应用至以下页面：")]),o("div",{staticClass:"flex"},[o("div",{staticClass:"receive-part flex w-28 flex-col items-center"},[o("div",{staticClass:"receive-thumb thumb",on:{click:function(e){return r.clickThumb("cover")}}},[o("img",{staticClass:"absolute left-[6px] top-[11px] h-[131px] w-[80px]",attrs:{src:(null===(e=r.cover)||void 0===e||null===(t=e.packetMaterial)||void 0===t||null===(n=t.openImage)||void 0===n?void 0:n.mediaUrl)||r.material.openImageUrl}}),o("img",{staticClass:"absolute left-[17px] top-[32px] z-10 h-[20px] w-[58px]",attrs:{src:i(75950)}})]),o("div",{staticClass:"part-name"},[r._v("拆红包页")])]),o("div",{staticClass:"bubble-part flex w-28 flex-col items-center"},[o("div",{staticClass:"bubble-thumb thumb",on:{click:function(e){return r.clickThumb("bubble")}}},[o("img",{staticClass:"relative z-10 h-full w-full",attrs:{src:i(72190)}}),o("img",{staticClass:"absolute left-[16px] top-[28px] h-[23px] w-[63px]",attrs:{src:r.material.bubbleImageUrl}}),r.bubblePagLoading||r.detailPagLoading?o("div",{staticClass:"weui-desktop-loading absolute bottom-2 left-2 z-20 h-4 w-4"}):o("div",{staticClass:"absolute bottom-1 left-1 z-20 flex h-6 w-6 cursor-pointer items-center justify-center text-opblack_1 hover:rounded hover:bg-opblack_4",on:{click:function(e){return r.editImg("bubble",e)}}},[o("mask-icon",{staticClass:"absolute h-4 w-4",attrs:{name:"editbtn"}})],1)]),o("div",{staticClass:"part-name"},[r._v("红包气泡")]),r.useStaticBubblePic||r.showAtmosphereBubbleTips?o("div",{staticClass:"flex"},[o("div",{staticClass:"text-xs text-opblack_2"},[r._v("已替换为首帧图片")]),o("mp-popover",{attrs:{trigger:"hover"},scopedSlots:r._u([{key:"target",fn:function(){return[o("span",{staticClass:"info-icon-wrap"},[o("mask-icon",{staticClass:"relative top-px h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,222612927)},[o("div",{staticClass:"text-opblack_2"},[r._v(" "+r._s(r.showAtmosphereBubbleTips?"上传氛围素材后，红包气泡视频素材会替换为视频首帧图片。":"动态素材过大，无法应用在此页面。可单独上传时长更短、画面更简单的素材。")+" ")])])],1):r._e()]),o("div",{staticClass:"detail-part flex w-28 flex-col items-center"},[o("div",{ref:"detailThumb",staticClass:"detail-thumb thumb rounded-[3px]",style:r.storyPreviewStyle,on:{click:function(e){return r.clickThumb("detail")}}},[o("img",{staticClass:"relative z-10 h-full w-full",attrs:{src:i(40183)}}),o("img",{staticClass:"absolute left-1/2 top-0 w-full",style:{transform:"translateX(-50%)",top:"-13.35%"},attrs:{src:r.detailImgUrl}}),r.detailPagLoading?o("div",{staticClass:"weui-desktop-loading absolute bottom-2 left-2 z-20 h-4 w-4"}):o("div",{staticClass:"absolute bottom-1 left-1 z-20 flex h-6 w-6 cursor-pointer items-center justify-center text-opblack_1 hover:rounded hover:bg-opblack_4",on:{click:function(e){return r.editImg("detail",e)}}},[o("mask-icon",{staticClass:"absolute h-4 w-4",attrs:{name:"editbtn"}})],1)]),o("div",{staticClass:"part-name"},[o("span",{staticClass:"mb-1 block"},[r._v(" 红包详情页")]),null!==(a=r.storyDetailList)&&void 0!==a&&a.length?o("span",{staticClass:"inline-block w-[92px]"},[o("span",{staticClass:"block"},[r._v("已替换为")]),o("a",{on:{click:r.goStoryArea}},[r._v("封面故事素材")])]):r._e()])]),o("div",{staticClass:"corp-part flex w-28 flex-col items-center"},[o("div",{staticClass:"corp-thumb thumb",on:{click:function(e){return r.clickThumb("corp")}}},[o("img",{staticClass:"relative z-10 h-full w-full",attrs:{src:i(41854)}}),o("img",{staticClass:"absolute left-[3px] top-[59px] h-[21px] w-[85px]",attrs:{src:r.material.corpImageUrl}}),r.corpPagLoading||r.detailPagLoading?o("div",{staticClass:"weui-desktop-loading absolute bottom-2 left-2 z-20 h-4 w-4"}):o("div",{staticClass:"absolute bottom-1 left-1 z-30 flex h-6 w-6 cursor-pointer items-center justify-center text-opblack_1 hover:rounded hover:bg-opblack_4",on:{click:function(e){return r.editImg("corp",e)}}},[o("mask-icon",{staticClass:"absolute h-4 w-4",attrs:{name:"editbtn"}})],1)]),o("div",{staticClass:"part-name"},[r._v("发红包页")]),r.useStaticCorpPic?o("div",{staticClass:"flex"},[o("div",{staticClass:"text-xs text-opblack_2"},[r._v("已替换为首帧图片")]),o("mp-popover",{attrs:{trigger:"hover"},scopedSlots:r._u([{key:"target",fn:function(){return[o("span",{staticClass:"info-icon-wrap"},[o("mask-icon",{staticClass:"relative top-px h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,222612927)},[o("div",{staticClass:"text-opblack_2"},[r._v("动态素材过大，无法应用在此页面。可单独上传时长更短、画面更简单的素材。")])])],1):r._e()])])])},mr=[],fr=s.ZP.extend({components:{},props:{showAtmosphereBubbleTips:Boolean,useStaticBubblePic:Boolean,useStaticCorpPic:Boolean,material:{type:Object||null},cover:{type:Object,default:function(){return{}}},detailPagLoading:Boolean,corpPagLoading:Boolean,bubblePagLoading:Boolean},data:function(){return{openIconActivePic:Xe.is.open_icon_active}},computed:{storyPreviewStyle:function(){return{"background-image":"url(".concat(this.isVideoStory?this.fuzzyImgUrl:"",")")}},fuzzyImgUrl:function(){var e;return null===(e=this.firstStoryMedia)||void 0===e?void 0:e.mediaFuzzyUrl},isVideoStory:function(){var e;return 2===(null===this||void 0===this||null===(e=this.firstStoryMedia)||void 0===e?void 0:e.mediaType)},storyDetailList:function(){return this.cover.packetMaterial.storyDetailList},storyMediaList:function(){return this.storyDetailList.map((function(e){return e.media}))},firstStoryMedia:function(){var e;return null===(e=this.storyMediaList)||void 0===e?void 0:e[0]},detailImgUrl:function(){var e=this.firstStoryMedia;return e?1===e.mediaType?e.mediaUrl:e.mediaThumbnailUrl:this.material.detailImageUrl}},methods:{goStoryArea:function(){var e=document.querySelector(".js-story-main-card"),t=document.querySelector(".js-story-make");e instanceof HTMLElement&&e.scrollIntoView({behavior:"smooth",block:"end"}),t instanceof HTMLElement&&(t.classList.add("table-row-highlight"),setTimeout((function(){t.classList.remove("table-row-highlight")}),2e3))},clickThumb:function(e){this.$emit("checkPreview",e)},editImg:function(e,t){t.stopPropagation(),this.$emit("editImg",e)}}}),hr=fr,gr=(0,g.Z)(hr,vr,mr,!1,null,"74c6230f",null),yr=gr.exports,br=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"media-editor flex items-start justify-center"},[t("div",{staticClass:"mx-[110px]"},[e.previewType?t("div",{staticClass:"editor-title"},[e._v("编辑素材")]):e._e(),t("div",{ref:"workAreaWrapper",staticClass:"mx-auto box-content flex items-center justify-center rounded-2xl px-4 align-middle",class:e.onlyShow?"bg-opblack_4":"bg-opblack_2",style:{width:"".concat(e.workAreaWidth,"px"),height:"".concat(e.workAreaHeight,"px")}},[t("div",{ref:"workArea",staticClass:"work-area relative",style:{width:"".concat(e.availWidth,"px"),height:"".concat(e.availHeight,"px")}},[e.fileType===e.CoverMediaType.Mp4?t("video-display",{ref:"videoPlayer",attrs:{videoUrl:e.fileUrl}}):t("pag-display",{ref:"pagPlayer",staticClass:"pag-display",attrs:{autoInit:!0,name:"".concat(e.previewType,"mediaEditorPag"),active:!0,url:e.fileUrl,destroyAfterInit:!0},on:{ready:e.handlePagReady}})],1),e.showCurFrame&&e.curFrame?t("img",{staticClass:"absolute",style:{width:"".concat(e.availWidth,"px"),height:"".concat(e.availHeight,"px")},attrs:{src:e.curFrame}}):e._e()]),e.fileUrl&&!e.onlyShow&&"sourceMaterial"===e.editorType?t("pag-frame-line",{ref:"pagFrameLineRef",staticClass:"mx-auto mt-4",attrs:{target:e.playerRef,previewTarget:e.previewPlayerRef,width:e.frameLineWidth,height:e.frameLineHeight,"file-url":e.fileUrl,"file-type":e.fileType,curPlayTime:e.curPlayTime,previewType:e.previewType},on:{ready:e.pagFrameLineReady,changePoint:e.handleChangePoint}}):e._e(),e.isMediaReady&&e.playerDom&&!e.onlyShow?t("Crop",{ref:"cropRef",attrs:{target:e.playerDom,mode:"full",workArea:e.$refs.workArea,ratios:e.ratios,cropRectMode:"full","original-target-size":{width:e.videoWidth,height:e.videoHeight}},nativeOn:{cropChange:function(t){return e.handleCropRectChange.apply(null,arguments)}}}):e._e(),e._t("edit-area")],2),e.previewType?t("div",{staticClass:"mx-[110px] shrink-0"},[t("div",{staticClass:"editor-title"},[e._v("预览素材")]),t("div",{staticClass:"relative overflow-hidden rounded-lg",style:e.previewWrapperStyle},["bubble"===e.previewType?t("img",{staticClass:"absolute left-0 top-0 z-10 h-full w-full",attrs:{src:i(20005)}}):e._e(),"corp"===e.previewType?t("img",{staticClass:"absolute left-0 top-0 z-10 h-[506px] w-[234px]",style:{width:"".concat(e.corpPreviewWidth,"px"),height:"".concat(e.corpPreviewHeight,"px")},attrs:{src:e.corpUrl}}):e._e(),"detail"===e.previewType?t("img",{staticClass:"absolute left-0 top-0 z-10 h-[506px] w-[234px]",style:{width:"".concat(e.detailPreviewWidth,"px"),height:"".concat(e.detailPreviewHeight,"px")},attrs:{src:e.detailUrl}}):e._e(),t("div",{staticClass:"absolute overflow-hidden",style:e.previewPlayerWrapperStyle},[t("pag-display",{ref:"previewPagPlayer",class:e.previewPayPlayerClass,style:e.previewStyle,attrs:{name:"".concat(e.previewType,"RightmediaEditorPag"),url:e.fileUrl,active:!0,autoplay:!0,loop:!0,showType:"preview"},on:{ready:e.handlePreviewPagReady}})],1)])]):e._e()])},wr=[],Cr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex justify-center",style:{height:"".concat(e.height,"px"),"--Line-Border-Width":"".concat(e.sideWidth,"px")}},[e.loading?t("div",{staticClass:"flex h-full w-full items-center justify-center"},[t("div",{staticClass:"weui-desktop-loading animate-spin"})]):[t("a",{staticClass:"mr-2 flex h-full w-11 cursor-pointer items-center justify-center rounded-md bg-opblack_2 hover:bg-opblack_3",on:{click:e.togglePlay}},["pause"===e.playStatus?t("mask-icon",{staticClass:"h-5 w-5 text-white",attrs:{name:"play"}}):t("mask-icon",{staticClass:"h-5 w-5 text-white",attrs:{name:"pause"}})],1),t("div",{ref:"parentWrapperRef",staticClass:"parent-wrapper relative h-full shrink-0 select-none overflow-x-auto overflow-y-hidden",style:{width:"".concat(e.width,"px"),"padding-left":"".concat(e.sideWidth,"px"),"padding-right":"".concat(e.sideWidth,"px")}},[t("div",{ref:"parent",staticClass:"parent relative flex w-full"},e._l(e.frameList,(function(e,i){return t("img",{key:i,staticClass:"absolute h-full",style:{transform:"translateX(".concat(100*i,"%)")},attrs:{src:e}})})),0),t("div",{ref:"selectRangeRef",staticClass:"select-range absolute left-0 top-0 z-10 cursor-grab overflow-hidden",style:{height:"".concat(e.height,"px"),width:"".concat(e.selectRangeWidth,"px")}},[t("span",{staticClass:"absolute inset-x-0 top-0 z-[1000] inline-block text-center text-white",staticStyle:{transform:"scale(0.9) translateY(-6%)"}},[e._v(e._s(e.cutedDuration)+"秒")]),t("div",{ref:"leftSide",staticClass:"side leftSide active",style:{width:"".concat(e.sideWidth,"px"),left:"0px"}},[t("mask-icon",{staticClass:"h-4 w-2 text-opwhite_0",attrs:{name:"leftarrow"}})],1),[t("div",{staticClass:"top-border inset-x-0 top-0 text-center text-xs",style:{height:"".concat(e.sideWidth,"px")}}),t("div",{staticClass:"bottom-border inset-x-0 bottom-0",style:{height:"".concat(e.sideWidth,"px")}})],t("div",{ref:"rightSide",staticClass:"side rightSide active",style:{width:"".concat(e.sideWidth,"px"),right:"0px"}},[t("mask-icon",{staticClass:"h-4 w-2 text-opwhite_0",attrs:{name:"rightarrow"}})],1),e.showProgressLine?t("div",{ref:"progressLine",staticClass:"progressLine",style:{left:"".concat(e.currentTimePoi,"%")}}):e._e()],2),t("div",{ref:"leftMaskRef",staticClass:"time-mask left-mask left-0",style:{width:"".concat(e.leftX+4,"px")}}),t("div",{ref:"rightMaskRef",staticClass:"time-mask right-mask right-0",style:{left:"".concat(e.leftX+e.selectRangeWidth-4,"px"),width:"".concat(e.realTotalWidth-e.leftX-e.selectRangeWidth+4,"px")}})])]],2)},_r=[],xr=(i(56977),1),Ir=3,kr=s.ZP.extend({components:{},props:{target:Object,previewTarget:Object,width:{type:Number,default:325},height:{type:Number,default:64},fileUrl:String,previewType:String,fileType:Number},data:function(){return{loading:!1,frameList:[],currentTime:0,duration:0,sideWidth:16,showProgressLine:!1,mediaWidth:0,mediaHeight:0,realTotalWidth:0,playStatus:"pause",selectRangeWidth:0,startTime:0,leftX:0}},computed:{currentTimePoi:function(){return(this.currentTime-this.startTime)/this.cutedDuration*100},cutedDuration:function(){var e=this.selectRangeWidth/this.realTotalWidth,t=Number((this.duration*e).toFixed(2));return t||0}},watch:{target:{immediate:!0,handler:function(e){var t=this;e&&(this.target.$on("timeupdate",(function(e){t.showProgressLine=!0,t.currentTime=e.currentTime})),this.target.$on("playing",(function(){t.playStatus="play"})),this.target.$on("pause",(function(){t.playStatus="pause"})),this.target.$on("ended",(function(){t.playStatus="pause"})))}}},methods:{handleParentWrapperClick:function(e){if(console.log(e.target.classList),e.target.classList.contains("time-mask")){var t;if(e.stopImmediatePropagation(),console.log("click"),"play"===this.playStatus)null===(t=this.target)||void 0===t||t.pause();var i=this.$refs,n=i.parentWrapperRef,a=i.selectRangeRef;if(n instanceof HTMLElement&&a instanceof HTMLElement){var r,o=n.getBoundingClientRect(),s=a.getBoundingClientRect();console.log(e.clientX,s.left),e.clientX>s.left+s.width&&(console.log("左侧"),r=e.clientX-o.left+n.scrollLeft-s.width),e.clientX<s.left&&(r=e.clientX-o.left+n.scrollLeft),Number(r)>=0&&(a.style.left="".concat(r,"px"),this.getSelectRangePoiInfo())}}},getSelectRangePoiInfo:function(){var e=this.$refs,t=e.parentWrapperRef,i=e.selectRangeRef;t instanceof HTMLElement&&i instanceof HTMLElement&&(this.startTime=Number((i.offsetLeft/this.realTotalWidth*this.duration).toFixed(2)),this.leftX=i.offsetLeft),this.$emit("changePoint",{startTime:this.startTime,duration:this.cutedDuration})},togglePlay:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Promise.all([null===(i=e.target)||void 0===i?void 0:i.togglePlay(e.startTime,e.cutedDuration),null===(n=e.previewTarget)||void 0===n?void 0:n.togglePlay(e.startTime,e.cutedDuration)]);case 1:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.frameList=[],e.playStatus="pause",t.next=4,e.getMediaInfo();case 4:return t.next=6,e.initFrameList();case 6:return t.next=8,e.$nextTick();case 8:return t.next=10,e.initFrameLine();case 10:e.$emit("ready");case 11:case"end":return t.stop()}}),t)})))()},getMediaInfo:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,rt.o)(e.fileUrl,me.Je[e.fileType]);case 2:i=t.sent,i&&(n=i.duration,a=i.width,o=i.height,e.mediaWidth=a,e.mediaHeight=o,e.duration=n);case 4:case"end":return t.stop()}}),t)})))()},initFrameList:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,i=20,e.duration>10&&(i=e.duration+10),t.prev=3,e.width<500&&(n=e.mediaHeight/e.mediaWidth,a=e.$refs.parentWrapperRef,o=(a.offsetHeight-2*e.sideWidth)/n,s=Math.floor((e.width-2*e.sideWidth)/o),i=s),t.next=7,(0,rt.db)({url:e.fileUrl,type:me.Je[e.fileType]},i);case 7:c=t.sent,e.frameList=c;case 9:return t.prev=9,e.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[3,,9,12]])})))()},initSelectRange:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:i=e.$refs.selectRangeRef,n=e.$refs.parentWrapperRef,a=n.scrollWidth,e.duration<=Ir+.2?e.selectRangeWidth=e.realTotalWidth:e.selectRangeWidth=e.realTotalWidth*(Ir/e.duration),e.getSelectRangePoiInfo(),i.onmousedown=function(t){t.stopImmediatePropagation();var r=t.clientX-(i.getBoundingClientRect().left-n.getBoundingClientRect().left),o="hidden"===n.style.overflow,s=o?n.offsetWidth:a,c=!1,l=t.clientX,u=t.clientX,d=setInterval((function(){var t=u-r+n.scrollLeft,a=n.scrollLeft+n.offsetWidth===s,l=0===i.offsetLeft,d=i.getBoundingClientRect(),p=n.getBoundingClientRect();t<0?i.style.left="0px":t+e.selectRangeWidth>=s?i.style.left="".concat(s-e.selectRangeWidth,"px"):i.style.left="".concat(t,"px"),d.left-p.left<20&&0!==n.scrollLeft&&!l&&!o&&(n.scrollLeft-=10),n.offsetWidth-(d.left-p.left+e.selectRangeWidth)<20&&!a&&c&&!o&&(n.scrollLeft+=10),e.getSelectRangePoiInfo()}),16);document.onmousemove=function(e){c=l-e.clientX<0,u=e.clientX,l=e.clientX},document.onmouseup=function(){clearInterval(d);var t=i.getBoundingClientRect(),a=n.getBoundingClientRect();if(t.left+t.width>a.right){var r=t.left+t.width-a.right;n.scrollLeft+n.offsetWidth+r>s?i.style.left="".concat(s-e.selectRangeWidth,"px"):n.scrollLeft+=r}else if(t.left<a.left){var o=Math.min(a.left-t.left,n.scrollLeft);n.scrollLeft-=o}document.onmousemove=null,document.onmouseup=null}};case 8:case"end":return t.stop()}}),t)})))()},initSlide:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.$refs.leftSide,n=e.$refs.rightSide,a=e.$refs.selectRangeRef,o=e.realTotalWidth*(xr/e.duration),s=e.realTotalWidth*(Ir/e.duration),i.onmousedown=function(t){t.stopImmediatePropagation(),"play"!==e.playStatus&&(e.showProgressLine=!1);var i=t.clientX,n=a.getBoundingClientRect(),r=a.offsetLeft,c=setInterval((function(){var t=Math.abs(n.left+n.width-i),c=r+(n.width-t);c<=0&&(c=0,t=e.selectRangeWidth),t<o?(t=o,c=r+(n.width-t)):t>s&&(t=s),e.selectRangeWidth=t,a.style.left="".concat(c,"px"),e.getSelectRangePoiInfo()}),16);document.onmousemove=function(e){i=e.clientX},document.onmouseup=function(){clearInterval(c),document.onmousemove=null,document.onmouseup=null}},n.onmousedown=function(t){var i=e.$refs.parentWrapperRef;t.stopImmediatePropagation(),"play"!==e.playStatus&&(e.showProgressLine=!1);var n=t.clientX,r=setInterval((function(){var t=i.getBoundingClientRect();n>t.left+i.offsetWidth&&(n=t.left+i.offsetWidth);var r=Math.abs(a.getBoundingClientRect().left-n);r<o?r=o:r>s&&(r=s),e.selectRangeWidth=r,e.getSelectRangePoiInfo()}),16);document.onmousemove=function(e){n=e.clientX},document.onmouseup=function(){clearInterval(r),document.onmousemove=null,document.onmouseup=null}};case 7:case"end":return t.stop()}}),t)})))()},initTimeMask:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.$refs.leftMaskRef,n=e.$refs.rightMaskRef,a=e.$refs.parentWrapperRef,o=a.scrollWidth,i.onmousedown=function(e){e.stopImmediatePropagation();var t="hidden"===a.style.overflow,i=0,n=t?a.offsetWidth:o,r=!1,s=e.clientX,c=e.clientX,l=setInterval((function(){var e=a.scrollLeft+a.offsetWidth===n,t=0===a.scrollLeft;e&&!r||t&&r||(a.scrollLeft+=-i)}));document.onmousemove=function(e){r=s-e.clientX<0,c=e.clientX,i=c-s,s=e.clientX},document.onmouseup=function(){clearInterval(l),document.onmousemove=null,document.onmouseup=null}},n.onmousedown=function(e){e.stopImmediatePropagation();var t="hidden"===a.style.overflow,i=0,n=t?a.offsetWidth:o,r=!1,s=e.clientX,c=e.clientX,l=setInterval((function(){var e=a.scrollLeft+a.offsetWidth===n,t=0===a.scrollLeft;e&&!r||t&&r||(a.scrollLeft+=-i)}));document.onmousemove=function(e){r=s-e.clientX<0,c=e.clientX,i=c-s,s=e.clientX},document.onmouseup=function(){clearInterval(l),document.onmousemove=null,document.onmouseup=null}};case 6:case"end":return t.stop()}}),t)})))()},initFrameLine:function(){var e=this.$refs.parentWrapperRef;e instanceof HTMLElement&&this.width<500&&(e.style.overflow="hidden"),this.realTotalWidth=e.scrollWidth,this.initSelectRange(),this.initSlide(),this.initTimeMask()}}}),Tr=kr,Sr=(0,g.Z)(Tr,Cr,_r,!1,null,"69b3c10e",null),Ar=Sr.exports,Dr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"tool-crop"},[t("CropRect",{ref:"cropRect",attrs:{ratio:e.$data._activeRatioValue,rootContainer:e.workArea,target:e.target,minCropSize:100,showMask:e.showMask,showMiddleControls:!1,showSelection:e.showSelection,originalTargetSize:e.originalTargetSize},on:{cropRectReady:e.handleCropRectReady},nativeOn:{ratioChanged:function(t){return e.handleCropRatioChange.apply(null,arguments)},cropRectChange:function(t){return e.handleCropRectChange.apply(null,arguments)},cropRectChangeExternal:function(t){return e.handleCropRectChangeExternal.apply(null,arguments)}}})],1)},Pr=[],Zr=i(70280),Ur=i(66298),Er=(i(26833),i(39714),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"components_croprect",style:e.componentStyles},[e._l(4,(function(e){return t("div",{key:e,staticClass:"mask",attrs:{"data-index":e}})})),t("Selection",{ref:"selection",style:e.selectionStyles,attrs:{ratio:e.computedRatio,"selection-bounds":e.$data._selectionBounds,"show-grid":e.showGrid,"show-area":e.showArea,"limit-width":e.$data._limitBounds.width,"limit-height":e.$data._limitBounds.height,rotation:e.rotation,"show-remove":e.showSelectionRemove,"show-rotate":e.showSelectionRotate,"show-middle-controls":e.showMiddleControls,"min-crop-size":e.minCropSize},on:{updateBounds:e.handleUpdateBounds}})],2)}),Rr=[],Mr=(i(27479),i(87714),i(82801),i(1174),i(83753),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"components_selection",style:{left:e.leftD,top:e.topD,right:e.rightD,bottom:e.bottomD,transform:e.localTransform},attrs:{"data-show-grid":e.showGrid,"data-show-area":e.showArea}},e._l(8,(function(i){return t("div",{key:i,class:["crop-control",{hidden:!e.showMiddleControls&&i%2===0}],attrs:{"data-index":i}})})),0)}),Lr=[],Fr=(i(44363),s.ZP.extend({components:{},props:{minCropSize:{type:Number,default:1},ratio:{type:Number,default:1},selectionBounds:{type:Object,default:function(){return{left:0,top:0,right:0,bottom:0}}},limitWidth:{type:Number,default:Number.MAX_SAFE_INTEGER},limitHeight:{type:Number,default:Number.MAX_SAFE_INTEGER},limitBounds:{type:Object,default:function(){return{left:0,top:0,right:0,bottom:0}}},showGrid:{type:Boolean,default:!0},showArea:{type:Boolean,default:!1},rotation:{type:Number,default:0},showRotate:{type:Boolean,default:!1},showRemove:{type:Boolean,default:!1},showMiddleControls:{type:Boolean,default:!0}},data:function(){return{_limitBounds:{left:0,top:0,right:0,bottom:0},_selectionBounds:{left:0,right:0,top:0,bottom:0},_initialBounds:null,_localRotation:0,_ratio:1,_rotation:0,_mouseDownHandler:null}},watch:{limitBounds:{handler:function(e){Object.assign(this.$data._limitBounds,e)},immediate:!0,deep:!0},selectionBounds:{handler:function(e){Object.assign(this.$data._selectionBounds,e)},immediate:!0,deep:!0},ratio:{handler:function(e){this.$data._ratio=e},immediate:!0},rotation:{handler:function(e){this._rotation=e}}},computed:{top:{set:function(e){this.$data._selectionBounds.top=parseFloat(e)||0},get:function(){return parseFloat(this.$data._selectionBounds.top)||0}},left:{set:function(e){this.$data._selectionBounds.left=parseFloat(e)||0},get:function(){return parseFloat(this.$data._selectionBounds.left)||0}},bottom:{set:function(e){this.$data._selectionBounds.bottom=parseFloat(e)||0},get:function(){return parseFloat(this.$data._selectionBounds.bottom)||0}},right:{set:function(e){this.$data._selectionBounds.right=parseFloat(e)||0},get:function(){return parseFloat(this.$data._selectionBounds.right)||0}},localTransform:function(){return 0===this.$data._localRotation?"initial":"rotate(".concat(this.$data._localRotation,"deg)")},limitLeft:function(){return parseFloat("".concat(this.$data._limitBounds.left))},limitRight:function(){return parseFloat("".concat(this.$data._limitBounds.right))},limitTop:function(){return parseFloat("".concat(this.$data._limitBounds.top))},limitBottom:function(){return parseFloat("".concat(this.$data._limitBounds.bottom))},topD:function(){return"".concat(this.top,"px")},leftD:function(){return"".concat(this.left,"px")},rightD:function(){return"".concat(this.right,"px")},bottomD:function(){return"".concat(this.bottom,"px")}},mounted:function(){var e,t,i,n=this;this.$el.dispatchEvent(new CustomEvent("SelectionReady",{bubbles:!0,cancelable:!0}));var a={x:-1,y:-1},r="initial",o=function(){var e=n.$el.getBoundingClientRect();n.$data._ratio=e.width/e.height,n.$el.dispatchEvent(new CustomEvent("ratioChanged",{bubbles:!0,cancelable:!0,detail:{bounds:e.toJSON(),value:n.$data._ratio}}))},s=function(e){e.preventDefault(),a={x:e.pageX,y:e.pageY}},c=function(){var i=a.x-e.x,s=a.y-e.y;if(0!==i||0!==s){switch(t){case 0:e.left+i<n.limitLeft&&(i=n.limitLeft-e.left),e.top+s<n.limitTop&&(s=n.limitTop-e.top),e.right-i<n.limitRight&&(i=e.right-n.limitRight),e.bottom-s<n.limitBottom&&(s=e.bottom-n.limitBottom),n.top=e.top+s,n.left=e.left+i,n.bottom=e.bottom-s,n.right=e.right-i;break;case 1:e.left+i>n.limitWidth-n.right-n.minCropSize&&(i=n.limitWidth-n.right-n.minCropSize-e.left),e.left+i<n.limitLeft&&(i=n.limitLeft-e.left),e.top+i/n.$data._ratio<n.limitTop&&(i=(n.limitTop-e.top)*n.$data._ratio),n.left=e.left+i,n.top=e.top+i/n.$data._ratio;break;case 2:e.top+s>n.limitHeight-n.bottom-n.minCropSize&&(s=n.limitHeight-n.bottom-n.minCropSize-e.top),n.top=Math.max(n.limitTop,e.top+s),o();break;case 3:e.right-i>n.limitWidth-n.left-n.minCropSize&&(i=e.right-n.limitWidth+n.left+n.minCropSize),e.right-i<n.limitRight&&(i=e.right-n.limitRight),e.top-i/n.$data._ratio<n.limitTop&&(i=(e.top-n.limitTop)*n.$data._ratio),n.top=e.top-i/n.$data._ratio,n.right=e.right-i;break;case 4:e.right-i>n.limitWidth-n.left-n.minCropSize&&(i=e.right-n.limitWidth+n.left+n.minCropSize),n.right=Math.max(e.right-i,n.limitRight),o();break;case 5:e.right-i>n.limitWidth-n.left-n.minCropSize&&(i=e.right-n.limitWidth+n.left+n.minCropSize),e.right-i<n.limitRight&&(i=e.right-n.limitRight),e.bottom-i/n.$data._ratio<n.limitBottom&&(i=(e.bottom-n.limitBottom)*n.$data._ratio),n.bottom=e.bottom-i/n.$data._ratio,n.right=e.right-i;break;case 6:e.bottom-s>n.limitHeight-n.top-n.minCropSize&&(s=e.bottom-n.limitHeight+n.top+n.minCropSize),n.bottom=Math.max(e.bottom-s,n.limitBottom),o();break;case 7:e.left+i>n.limitWidth-n.right-n.minCropSize&&(i=n.limitWidth-n.right-n.minCropSize-e.left),e.left+i<n.limitLeft&&(i=n.limitLeft-e.left),e.bottom+i/n.$data._ratio<n.limitBottom&&(i=(n.limitBottom-e.bottom)*n.$data._ratio),n.bottom=e.bottom+i/n.$data._ratio,n.left=e.left+i;break;case 8:e.left+i>n.limitWidth-n.right-n.minCropSize&&(i=n.limitWidth-n.right-n.minCropSize-e.left),n.left=Math.max(n.limitLeft,e.left+i),o();break;case 9:n.$data._localRotation=180*Math.atan2(s,i)/Math.PI;break}n.$emit("updateBounds",(0,ve.Z)((0,ve.Z)({},n.$data._selectionBounds),{},{initialBounds:n.$data._initialBounds.toJSON(),changed:!0,selectionRotation:n.$data._localRotation,mode:9===t?"rotate":"scale",action:r,controlIndex:t})),"initial"===r&&(r="move")}},l=function e(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e),clearInterval(i),n.$emit("updateBounds",(0,ve.Z)((0,ve.Z)({},n.$data._selectionBounds),{},{initialBounds:n.$data._initialBounds.toJSON(),changed:!0,selectionRotation:n.$data._localRotation,mode:9===t?"rotate":"scale",controlIndex:t,action:"up"}));var a=n.$el.getBoundingClientRect();n.$data._ratio=a.width/a.height,r="initial"};this.$data._mouseDownHandler=function(r){r.forced||(r.preventDefault(),r.stopImmediatePropagation()),clearInterval(i);var o=r.forced?n.$el:r.target.closest(".crop-control")||r.target.closest(".components_selection");if(o){if(n.$data._initialBounds=n.$el.getBoundingClientRect(),t=parseInt(o.getAttribute("data-index")||"")||0,10===t)return n.$el.dispatchEvent(new CustomEvent("requestRemove",{bubbles:!0,cancelable:!0}));e={x:r.pageX,y:r.pageY,left:n.left,top:n.top,right:n.right,bottom:n.bottom},a={x:e.x,y:e.y},document.addEventListener("mousemove",s),document.addEventListener("mouseup",l),i=setInterval(c,16)}},this.$el.addEventListener("mousedown",this.$data._mouseDownHandler)},methods:{reset:function(){this._selectionBounds=(0,ve.Z)({},this.$data._limitBounds),this.$emit("updateBounds",(0,ve.Z)((0,ve.Z)({},this.$data._selectionBounds),{},{changed:!1}))}}})),Nr=Fr,Or=(0,g.Z)(Nr,Mr,Lr,!1,null,"e5b2e898",null),Br=Or.exports,qr=i(40881),Qr=s.ZP.extend({components:{Selection:Br},props:{rootContainer:{type:HTMLElement},target:{type:HTMLElement},minCropSize:{type:Number,default:1},ratio:{type:Number,default:1},selectionRatio:{type:Number,default:0},showGrid:{type:Boolean,default:!0},showArea:{type:Boolean,default:!1},showMask:{type:Boolean,default:!0},showSelection:{type:Boolean,default:!0},rotation:{type:Number,default:0},originalTargetSize:{type:Object,default:function(){return{width:1,height:1}}},showPopup:{type:Boolean,default:!1},onlySelectionClickable:{type:Boolean,default:!1},selectionTarget:{type:HTMLElement},showSelectionRemove:{type:Boolean,default:!1},showSelectionRotate:{type:Boolean,default:!1},showAreaOnly:{type:Boolean,default:!1},selectionOffsetFromTarget:{type:Object,default:function(){return{left:0,top:0,right:0,bottom:0}}},showMiddleControls:{type:Boolean,default:!0},ignoreSelectionAreaOnSecondClick:{type:Boolean,default:!1}},data:function(){return{_limitBounds:{left:0,top:0,right:0,bottom:0,width:0,height:0},_selectionBounds:{left:0,top:0,right:0,bottom:0},_rotation:0,_scale:{prev:1,current:1,ratio:1},_selectionChanged:!1,_rotationDirection:"right",_showPopup:!1,_prevTarget:null,_selectionClickCount:0,_uuid:(0,qr.uuidV4)()}},computed:{top:function(){return"".concat(parseFloat(String(this.$data._limitBounds.top)),"px")},left:function(){return"".concat(parseFloat(String(this.$data._limitBounds.left)),"px")},right:function(){return"".concat(parseFloat(String(this.$data._limitBounds.right)),"px")},bottom:function(){return"".concat(parseFloat(String(this.$data._limitBounds.bottom)),"px")},selectionLeft:function(){return"".concat(parseFloat(String(this.$data._selectionBounds.left)),"px")},selectionRight:function(){return"".concat(parseFloat(String(this.$data._selectionBounds.right)),"px")},selectionTop:function(){return"".concat(parseFloat(String(this.$data._selectionBounds.top)),"px")},selectionBottom:function(){return"".concat(parseFloat(String(this.$data._selectionBounds.bottom)),"px")},rootContainerAndTargetHash:function(){return this.rootContainer+this.target},rootContainerAndTargetAndSelectionTargetHash:function(){var e;return window.btoa(unescape(encodeURIComponent(this.rootContainer+this.target+(null===(e=this.selectionTarget)||void 0===e?void 0:e.outerHTML))))},computedRatio:function(){return this.selectionRatio||this.ratio},componentStyles:function(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom,"pointer-events":this.showSelection?this.onlySelectionClickable?"none":"all":"none","--maskLeft":this.selectionLeft,"--maskRight":this.selectionRight,"--maskTop":this.selectionTop,"--maskBottom":this.selectionBottom}},selectionStyles:function(){var e="none";return this.showSelection&&(this.showAreaOnly||(e="all"),this.ignoreSelectionAreaOnSecondClick&&this.$data._selectionClickCount>=1&&(e="none")),{visibility:this.$data._showPopup||!this.showSelection?"hidden":"visible","pointer-events":e}}},mounted:function(){var e=this,t=this.$watch("rootContainer",(function(i){i&&e.rootContainer.appendChild(e.$el),e.$emit("cropRectReady",{uuid:e.$data._uuid,target:e}),e.$nextTick((function(){t()}))}),{immediate:!0})},watch:{rootContainerAndTargetHash:{handler:function(){if(this.rootContainer&&this.target){var e,t;Object.assign(this.$data._limitBounds,(0,ve.Z)({},this.getTargetBoundsRelativeToWorkArea())),null===(e=this.$data._prevTarget)||void 0===e||null===(t=e.removeEventListener)||void 0===t||t.call(e,"transitionend",this.handleTargetTransform),this.$data._prevTarget=this.target;var i=window.getComputedStyle(this.target);/transform/i.test(i.getPropertyValue("transition"))||(this.target.style.transition="transform 1ms ease"),this.target.addEventListener("transitionend",this.handleTargetTransform),this.handleTargetTransform()}},immediate:!0},rootContainerAndTargetAndSelectionTargetHash:{handler:function(){this.rootContainer&&this.target&&this.selectionTarget?(this.$data._selectionBounds=(0,ve.Z)({},this.getSelectionBoundsRelativeToTarget()),this.$data._selectionClickCount=1):this.$data._selectionClickCount=0}},showPopup:{handler:function(e){this.$data._showPopup=e},immediate:!0},ratio:{handler:function(e){this.forceUpdateSelection(e)},immediate:!0}},methods:{forceUpdateSelection:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$nextTick();case 2:t.$el&&(n=t.$el.getBoundingClientRect(),a=n.width,o=a/e,o>n.height&&(o=n.height,a=o*e),s=(n.width-a)/2,c=(n.height-o)/2,t.handleUpdateBounds({left:s,right:s,top:c,bottom:c}));case 3:case"end":return i.stop()}}),i)})))()},handleUpdateBounds:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.assign(this.$data._selectionBounds,e),this.$nextTick((function(){var n=t.$refs.selection.$el.getBoundingClientRect();t.$data._limitBounds;t.$data._selectionChanged=e.changed,t.$el.dispatchEvent(new CustomEvent(i?"cropRectChangeExternal":"cropRectChange",{bubbles:!0,cancelable:!0,detail:{value:{width:n.width/t.$data._limitBounds.width,height:n.height/t.$data._limitBounds.height,left:e.left/t.$data._limitBounds.width,top:e.top/t.$data._limitBounds.height,rotation:t.$data._prevTarget,changed:e.changed,initialBounds:e.initialBounds,nonScaled:(0,ve.Z)((0,ve.Z)({},e),{},{width:n.width,height:n.height,selectionRotation:e.selectionRotation,mode:e.mode,controlIndex:e.controlIndex})},uuid:t.$data._uuid}}))}))},getTargetBoundsRelativeToWorkArea:function(){var e=this.getRootBounds(),t=this.target.getBoundingClientRect().toJSON(),i={left:t.left-e.left,top:t.top-e.top,width:t.width,height:t.height,right:e.left+e.width-(t.left+t.width),bottom:e.top+e.height-(t.top+t.height)};return i},getSelectionBoundsRelativeToTarget:function(){var e=this.getTargetBounds(),t=this.getSelectionTargetBounds();return{left:t.left-e.left-this.selectionOffsetFromTarget.left,top:t.top-e.top-this.selectionOffsetFromTarget.top,width:t.width+this.selectionOffsetFromTarget.left+this.selectionOffsetFromTarget.right,height:t.height+this.selectionOffsetFromTarget.top+this.selectionOffsetFromTarget.bottom,right:e.left+e.width-(t.left+t.width)-this.selectionOffsetFromTarget.right,bottom:e.top+e.height-(t.top+t.height)-this.selectionOffsetFromTarget.bottom}},getRootBounds:function(){return this.rootContainer.getBoundingClientRect().toJSON()},getTargetBounds:function(){return this.target.getBoundingClientRect().toJSON()},getSelectionTargetBounds:function(){var e;return(null===(e=this.selectionTarget)||void 0===e?void 0:e.getBoundingClientRect().toJSON())||{width:NaN,height:NaN,top:NaN,left:NaN,bottom:NaN,right:NaN}},handleTargetTransform:function(){var e,t=window.getComputedStyle(this.target),i=null===(e=t.transform)||void 0===e?void 0:e.replace(/[^0-9.e,-]/gi,"").split(",").map((function(e){return parseFloat(e)}));if(Array.isArray(i)&&i.length>0){var n=Math.round(Math.atan2(i[1],i[0])*(180/Math.PI))||0;if(0===this.$data._prevTarget&&90===n||90===this.$data._prevTarget&&180===n||180===this.$data._prevTarget&&-90===n||-90===this.$data._prevTarget&&0===n)this.$data._prevTargetDirection="right";else if(0===this.$data._prevTarget&&-90===n||-90===this.$data._prevTarget&&180===n||180===this.$data._prevTarget&&90===n||90===this.$data._prevTarget&&0===n)this.$data._prevTargetDirection="left";else{if(180!==Math.abs(this.$data._prevTarget)||0!==n)return!1;this.$data._prevTargetDirection="flipHorizontal"}this.$data._prevTarget=n,this.$data._scale=(0,ve.Z)((0,ve.Z)({},this.$data._scale),{},{prev:this.$data._scale.current,current:Math.sqrt(i[0]*i[0]+i[1]*i[1])||1}),this.$data._scale.ratio=this.$data._scale.current/this.$data._scale.prev,this.rotateSelection()}},rotateSelection:function(){var e=this;Object.assign(this.$data._limitBounds,this.getTargetBoundsRelativeToWorkArea());var t=(0,ve.Z)({},this.$data._selectionBounds);if("flipHorizontal"===this.$data._prevTargetDirection){var i={top:t.bottom,right:t.left,bottom:t.top,left:t.right};Object.assign(this.$data._selectionBounds,i)}else if("right"===this.$data._prevTargetDirection){var n={top:t.left*this.$data._scale.ratio,right:t.top*this.$data._scale.ratio,bottom:t.right*this.$data._scale.ratio,left:t.bottom*this.$data._scale.ratio};Object.assign(this.$data._selectionBounds,n)}else{var a={top:t.right*this.$data._scale.ratio,right:t.bottom*this.$data._scale.ratio,bottom:t.left*this.$data._scale.ratio,left:t.top*this.$data._scale.ratio};Object.assign(this.$data._selectionBounds,a)}this.$nextTick((function(){var t=e.$refs.selection.$el.getBoundingClientRect();e.$el.dispatchEvent(new CustomEvent("cropRectChange",{bubbles:!0,cancelable:!0,detail:{value:{width:t.width/e.$data._limitBounds.width,height:t.height/e.$data._limitBounds.height,left:e.$data._selectionBounds.left/e.$data._limitBounds.width,top:e.$data._selectionBounds.top/e.$data._limitBounds.height,rotation:e.$data._prevTarget,changed:e.$data._selectionChanged,nonScaled:t.toJSON()},uuid:e.$data._uuid}}))}))},reset:function(e){var t;null===(t=this.$refs.selection)||void 0===t||t.reset(),this.$data._selectionChanged=!1,e&&(this.$data._showPopup=!0)},forceUpdateSelectionBoundsFromTarget:function(){this.rootContainer&&this.target&&this.selectionTarget&&(this.$data._selectionBounds=(0,ve.Z)({},this.getSelectionBoundsRelativeToTarget()))},removeCropDom:function(){try{this.rootContainer.removeChild(this.$el)}catch(e){console.error("removeCropDom error",e)}}}}),jr=Qr,Hr=(0,g.Z)(jr,Er,Rr,!1,null,"758000c2",null),Gr=Hr.exports,Wr=function(){function e(){(0,Zr.Z)(this,e)}return(0,Ur.Z)(e,null,[{key:"MODE_NONE",get:function(){return"none"}},{key:"MODE_FULL",get:function(){return"full"}},{key:"MODE_MASK",get:function(){return"mask"}}]),e}(),zr=s.ZP.extend({components:{CropRect:Gr},props:{workArea:{type:HTMLElement},target:{type:HTMLElement},originalTargetSize:{type:Object,default:function(){return{width:1,height:1}}},ratios:{type:Object,default:function(){return{}}},offsetFromTargetBounds:{type:Number,default:40},langs:{type:Object,default:function(){return{}}},mode:{type:String,default:Wr.MODE_NONE}},data:function(){return{_activeRatio:null,_defaultRatios:{"1:1":{name:"1:1",label:"1:1",ratio:1,hint:"instagram",hidden:!1,original:!1,suffix:""}},_customItemActive:!1,_activeRatioValue:1,_tmpRatioValue:1,_cropSize:{width:0,height:0},_cropRatio:{width:0,height:0,ratio:0}}},computed:{computedRatios:function(){return Object.values(this.$data._defaultRatios).filter((function(e){return!e.hidden})).sort((function(e,t){return t.original-e.original}))},sizeScale:function(){return 1},showTools:function(){return this.mode===Wr.MODE_FULL},showSelection:function(){return this.mode===Wr.MODE_FULL},showMask:function(){return!!this.mode&&this.mode!==Wr.MODE_NONE},maxCropWidthLength:function(){return this.originalTargetSize.width.toString().length},maxCropHeightLength:function(){return this.originalTargetSize.height.toString().length}},watch:{ratios:{handler:function(e){if(e){this.$data._defaultRatios=(0,ve.Z)((0,ve.Z)({},this.$data._defaultRatios),e);var t=this.computedRatios.find((function(e){return e.original}));t?(this.$data._activeRatio=t.name||null,this.$data._activeRatioValue=this.$data._tmpRatioValue=t.ratio):this.$data._activeRatio=this.$data._tmpRatioValue=null}},immediate:!0},originalTargetSize:{handler:function(e){e&&(0!==this.$data._cropSize.width&&0!==this.$data._cropSize.height||(this.$data._cropSize=(0,ve.Z)((0,ve.Z)({},this.$data._cropSize),e)),this.$data._cropRatio=(0,ve.Z)({},function(e){var t=e.width,i=e.height,n=e.ratio;return{width:t,height:i,ratio:n}}(this.computedRatios.find((function(e){return e.original}))||this.$getAspectRatio(e.width,e.height))))},immediate:!0},showSelection:{handler:function(e){}}},mounted:function(){},methods:{$getAspectRatio:function(e,t){var i=function e(t,i){return i?e(i,t%i):Math.abs(t)},n=i(Math.round(e),Math.round(t)),a=Math.round(e/n),r=Math.round(t/n);return{name:"".concat(a,":").concat(r),label:"".concat(a,":").concat(r),width:a,height:r,original:!1,hint:"",hidden:!1,ratio:a/r}},handleCropRatioChange:function(e){e.detail.value;this.$data._activeRatio=null,this.$data._customItemActive=!1;var t=this.$getAspectRatio(this.$data._cropSize.width,this.$data._cropSize.height);this.$data._cropRatio=function(e){var t=e.width,i=e.height;return{width:t,height:i}}(t)},handleCropRectReady:function(){this.$el.dispatchEvent(new CustomEvent("cropRectReady",{bubbles:!0,cancelable:!0}))},handleCropRectChange:function(e){var t=e.detail.value;this.$data._cropSize={width:2*Math.round(t.width*this.originalTargetSize.width/2),height:2*Math.round(t.height*this.originalTargetSize.height/2)},this.$el.dispatchEvent(new CustomEvent("cropChange",{cancelable:!0,bubbles:!0,detail:(0,ve.Z)({},t)}))},handleCropRectChangeExternal:function(e){var t=e.detail.value;this.$el.dispatchEvent(new CustomEvent("cropChange",{cancelable:!0,bubbles:!0,detail:(0,ve.Z)({},t)}))},reset:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.removeCropDom(),e.$data._activeRatio=(null===(i=e.computedRatios.find((function(e){return e.original})))||void 0===i?void 0:i.name)||null,t.next=4,e.$nextTick();case 4:null===(n=e.$refs.cropRect)||void 0===n||n.reset(),null===(a=e.$refs.cropRect)||void 0===a||a.forceUpdateSelection(e.$data._activeRatioValue);case 6:case"end":return t.stop()}}),t)})))()},removeCropDom:function(){var e;this.$refs.cropRect&&(null===(e=this.$refs.cropRect)||void 0===e||e.removeCropDom())}}}),Vr=zr,Jr=(0,g.Z)(Vr,Dr,Pr,!1,null,"a9a3722e",null),Kr=Jr.exports,Yr=i(99453),Xr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"component_video-player"},[t("video",{ref:"video",attrs:{src:e.videoUrl,muted:"",crossorigin:"anonymous",playsinline:"playsinline",preload:"metadata"},domProps:{muted:!0},on:{timeupdate:e.handleTimeupdate,ended:e.handledEnded,playing:e.handlePlaying,pause:e.handlePause}})])},$r=[],eo=s.ZP.extend({components:{},props:{videoUrl:String},data:function(){return{status:"pause",startTime:0,playTime:0}},methods:{handledEnded:function(){this.status="pause",this.$emit("ended")},handlePause:function(){console.log("video pause"),this.status="pause",this.$emit("pause")},handlePlaying:function(){console.log("video playing"),this.status="play",this.$emit("playing")},handleTimeupdate:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.$emit("timeupdate",{currentTime:null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.currentTime}),!(e.target instanceof HTMLVideoElement&&e.target.currentTime>=t.startTime+t.playTime)){i.next=4;break}return i.next=4,e.target.pause();case 4:case"end":return i.stop()}}),i)})))()},pause:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.$refs.video,t.next=3,null===i||void 0===i?void 0:i.pause();case 3:case"end":return t.stop()}}),t)})))()},play:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.$refs.video,t.next=3,null===i||void 0===i?void 0:i.play();case 3:case"end":return t.stop()}}),t)})))()},togglePlay:function(){var e=arguments,t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:0,a=e.length>1?e[1]:void 0,o=t.$refs.video,n<t.startTime&&(o.currentTime=n),a&&(t.playTime=a),t.startTime=n,"play"!==t.status){i.next=11;break}return i.next=9,t.pause();case 9:i.next=14;break;case 11:return(o.currentTime<t.startTime||o.currentTime>=t.startTime+t.playTime)&&(o.currentTime=t.startTime),i.next=14,t.play();case 14:return i.abrupt("return",t.status);case 15:case"end":return i.stop()}}),i)})))()},getVideo:function(){return this.$refs.video},getContainer:function(){return this.$el}}}),to=eo,io=(0,g.Z)(to,Xr,$r,!1,null,"cc5e1eaa",null),no=io.exports,ao=s.ZP.extend({components:{Crop:Kr,PagDisplay:ot.Z,PagFrameLine:Ar,VideoDisplay:no},props:{editorType:String,workAreaWidth:Number,workAreaHeight:{type:Number,default:360},frameLineWidth:Number,frameLineHeight:Number,fileUrl:String,fileType:Number,ratios:Object,previewType:String,onlyShow:Boolean},data:function(){return{corpUrl:"https://res.wx.qq.com/t/fed_upload/51bce9e0-2838-4fe2-8ae8-f8ef8ea79b0e/corp.png",detailUrl:Xe.is.detail_page_no_story,CoverMediaType:me.Je,duration:0,curPlayTime:0,pageView:null,frameImgList:[],start:0,end:1,showCurFrame:!1,whRatio:1,previewHeight:0,videoHeight:0,videoWidth:0,playStatus:"paused",moving:"left",playerDom:null,playerRef:null,previewPlayerRef:null,cropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},bubblePreviewWidth:298,bubblePreviewHeight:98,corpPreviewWidth:234,corpPreviewHeight:506,detailPreviewWidth:234,detailPreviewHeight:506,isMediaReady:!1}},computed:{previewPayPlayerClass:function(){return(0,Ae.Z)({},"".concat(this.previewType,"-preview-full"),!0)},previewWrapperStyle:function(){var e=this,t={width:e["".concat(e.previewType,"PreviewWidth")]+"px",height:e["".concat(e.previewType,"PreviewHeight")]+"px"};return"detail"===this.previewType&&(t.border="1px solid rgba(0, 0, 0, 0.1)"),"bubble"===this.previewType&&(t.top="150px",t.width="".concat(this.bubblePreviewWidth,"px")),this.previewType?t:{}},previewRatio:function(){return this.previewType?this["".concat(this.previewType,"PreviewWidth")]/Number(this.cropInfo.cropBoxWidth):1},previewStyle:function(){var e=this.previewRatio,t=this.cropInfo;return"bubble"===this.previewType&&this.onlyShow?{position:"relative",width:"267px",height:"".concat(this.bubblePreviewHeight,"px"),left:"10%"}:{width:"".concat(this.availWidth*e,"px"),height:"".concat(this.availHeight*e,"px"),transform:"translate(".concat(-Number(t.cropBoxLeft)*e,"px, ").concat(-Number(t.cropBoxTop)*e,"px)")}},previewPlayerWrapperStyle:function(){return"bubble"===this.previewType?{width:"".concat(this.bubblePreviewWidth,"px"),height:"".concat(this.bubblePreviewHeight,"px"),top:"0px",left:"10%"}:"corp"===this.previewType?{width:"100%",height:"9.9%",top:"30%",left:"50%",transform:"translateX(-50%)"}:"detail"===this.previewType?{top:"-15.17%"}:{}},availWidth:function(){return this.onlyShow&&"bubble"===this.previewType?this.bubblePreviewWidth:this.availHeight*this.whRatio},availHeight:function(){if(this.onlyShow&&"bubble"===this.previewType)return this.bubblePreviewHeight;if(this.previewHeight){var e=Math.min(this.workAreaHeight,this.previewHeight);return e*this.whRatio>this.workAreaWidth&&(e=this.workAreaWidth/this.whRatio),e}return 0},curFrame:function(){if("left"===this.moving){var e=Math.floor(this.frameImgList.length*this.start);return this.frameImgList[e]}var t=Math.floor(this.frameImgList.length*this.end);return this.frameImgList[t]},stopMicroseconds:function(){return this.duration*this.end}},watch:{onlyShow:{handler:function(e){e&&this.$refs.cropRef.removeCropDom&&this.$refs.cropRef.removeCropDom()},immediate:!0},fileUrl:{handler:function(e){var t;e&&(null===(t=this.$refs.cropRef)||void 0===t||t.reset(),this.isMediaReady=!1)}}},methods:{pagFrameLineReady:function(){this.$emit("frameLineReady")},handlePagReady:function(){var e,t;this.previewType?null===(e=this.$refs.previewPagPlayer)||void 0===e||e.initPag():"sourceMaterial"===this.editorType&&(null===(t=this.$refs.pagFrameLineRef)||void 0===t||t.init())},handlePreviewPagReady:function(){var e;"sourceMaterial"===this.editorType&&(null===(e=this.$refs.pagFrameLineRef)||void 0===e||e.init())},unload:function(){var e,t;null===(e=this.playerRef)||void 0===e||e.pause(),null===(t=this.previewPlayerRef)||void 0===t||t.pause()},resetCrop:function(){var e;null===(e=this.$refs.cropRef)||void 0===e||e.reset()},initPlayerPag:function(){var e;null===(e=this.$refs.pagPlayer)||void 0===e||e.initPag()},handleCropRectChange:function(e){var t=e.detail,i=t.height,n=t.width,a=t.top,r=t.left,o=t.nonScaled,s={cropHeight:Math.floor(this.videoHeight*i),cropWidth:Math.floor(this.videoWidth*n),cropLeft:Math.floor(this.videoWidth*r),cropTop:Math.floor(this.videoHeight*a),cropBoxWidth:o.width,cropBoxHeight:o.height,cropBoxTop:o.top,cropBoxLeft:o.left};this.cropInfo=s,this.$emit("cropChange",{cropInfo:s})},initMedia:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=null,e.fileType!==me.Je.Mp4){t.next=9;break}return t.next=4,(0,rt.$p)(e.fileUrl);case 4:i=t.sent,e.playerDom=null===(n=e.$refs.videoPlayer)||void 0===n?void 0:n.getContainer(),e.playerRef=e.$refs.videoPlayer,e.previewPlayerRef=e.$refs.previewVideoPlayer,"sourceMaterial"===e.editorType&&(null===(a=e.$refs.pagFrameLineRef)||void 0===a||a.init());case 9:if(e.fileType!==me.Je.Zip&&e.fileType!==me.Je.Pag){t.next=16;break}return t.next=12,(0,Yr.Bc)(e.fileUrl);case 12:i=t.sent,e.playerDom=null===(o=e.$refs.pagPlayer)||void 0===o?void 0:o.getContainer(),e.playerRef=e.$refs.pagPlayer,e.previewPlayerRef=e.$refs.previewPagPlayer;case 16:i&&(s=i,c=s.width,l=s.height,e.previewHeight=2*Math.floor(l/2),e.videoHeight=l,e.videoWidth=c,e.whRatio=c/l),e.isMediaReady=!0;case 18:case"end":return t.stop()}}),t)})))()},handleChangePoint:function(e){this.showCurFrame=!0;var t={startTime:e.startTime,duration:e.duration};if(this.playerRef=this.$refs.videoPlayer,this.playerRef){var i=this.playerRef.getVideo();i instanceof HTMLVideoElement&&(i.currentTime=t.startTime)}this.$emit("changePoint",{timeInfo:t})}}}),ro=ao,oo=(0,g.Z)(ro,br,wr,!1,null,"77520cac",null),so=oo.exports,co=i(64444),lo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"tip mt-4"},[e._v("图片格式：PNG/JPG/JPEG；尺寸720×264像素；不超过500KB；")]),e.isDynamicCover?t("div",[t("div",{staticClass:"tip"},[e._v("视频格式：")]),t("div",{staticClass:"tip"},[e._v("1. MP4（H.264/AVC）：分辨率720×264；时长1s至3s；不超过20MB；")]),t("div",{staticClass:"tip"},[e._v(" 2. PNG序列帧：PNG图片尺寸720×264像素; 将视频（1s至3s）以24fps帧率导出序列帧；全部图片打包为1个ZIP压缩包上传，压缩包不超过20MB； "),t("zip-desc-popover",{staticClass:"-ml-2"})],1)]):e._e(),t("div",{staticClass:"tip"},[e._v("更换的素材图需属于原始封面图的一部分，保持内容、风格、主题一致。")])])},uo=[],po=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{attrs:{trigger:"hover",width:350},scopedSlots:e._u([{key:"target",fn:function(){return[t("span",{staticClass:"weui-link text-sm"},[e._v("了解压缩包要求")])]},proxy:!0}])},[t("div",{staticClass:"text-opblack_2"},[t("div",[e._v("· 每张PNG图片按播放顺序以5位连续数字命名，例如00001.png、00002.png…；")]),t("div",[e._v("· 图片张数不少于24张，不多于72张；")])])])},vo=[],mo=s.ZP.extend({components:{},data:function(){return{}},computed:{},methods:{}}),fo=mo,ho=(0,g.Z)(fo,po,vo,!1,null,"167ec653",null),go=ho.exports,yo=s.ZP.extend({components:{ZipDescPopover:go},props:{mode:String,isDynamicCover:Boolean},data:function(){return{}},computed:{},methods:{}}),bo=yo,wo=(0,g.Z)(bo,lo,uo,!1,null,"f8299c92",null),Co=wo.exports,_o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"tip mt-4 text-sm"},[e._v("图片格式：PNG/JPG/JPEG；尺寸957×1278 像素；不超过500KB；")]),e.isDynamicCover?t("div",{staticClass:"tip text-sm"},[e._v(" 视频格式：PNG序列帧；PNG图片尺寸957×1278像素; 将视频（1s至3s）以24fps帧率导出序列帧；全部图片打包为1个ZIP压缩包上传，压缩包不超过50MB； "),t("zip-desc-popover")],1):e._e(),t("div",{staticClass:"tip text-sm"},[e._v("上半部分下拉才可展示，应将重要信息置于素材中部。")]),t("div",{staticClass:"tip text-sm"},[e._v("更换的素材图需属于原始封面图的一部分，保持内容、风格、主题一致。")])])},xo=[],Io=s.ZP.extend({components:{ZipDescPopover:go},props:{mode:String,isDynamicCover:Boolean},data:function(){return{}},computed:{},methods:{}}),ko=Io,To=(0,g.Z)(ko,_o,xo,!1,null,"1445c970",null),So=To.exports,Ao=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"tip text-sm"},[e._v("图片格式：PNG/JPG/JPEG；尺寸957×210像素；不超过500KB；")]),e.isDynamicCover?t("div",{staticClass:"tip text-sm"},[e._v(" 视频格式：PNG序列帧；PNG图片尺寸957×210像素;将视频（1s至3s）以24fps帧率导出序列帧；压缩包不超过20MB； "),t("zip-desc-popover",{staticClass:"-ml-2"})],1):e._e(),t("div",{staticClass:"tip text-sm"},[e._v("更换的素材图需属于原始封面图的一部分，保持内容、风格、主题一致。")])])},Do=[],Po=s.ZP.extend({components:{ZipDescPopover:go},props:{mode:String,isDynamicCover:Boolean},data:function(){return{}},computed:{},methods:{}}),Zo=Po,Uo=(0,g.Z)(Zo,Ao,Do,!1,null,"13d5fd2f",null),Eo=Uo.exports,Ro=(0,Ce._p)("cover"),Mo=Ro.mapState,Lo=new z.ZP,Fo=500,No=20,Oo=50,Bo=["bubble","corp","detail"],qo={detail:1,bubble:2,corp:3},Qo=s.ZP.extend({name:"CoverCrop",data:function(){return{ACCEPT_TYPE:Pa._B,CoverMediaType:me.Je,corpUrl:Xe.is.corp_page,detailUrl:Xe.is.detail_page_no_story,RequireImgSizeLimitKb:Fo,CoverGenPag_FileType:me.p0,NORMAL_COVER_SIZE:Xe.TE,CORP_SIZE:Xe.s9,coverToolPics:Xe.is,detailCropper:null,bubbleCropper:null,corpCropper:null,bubbleMoveXY:{},corpMoveXY:{},detailMoveXY:{},bubbleFromUpload:!!this.$route.params.cover,corpFromUpload:!!this.$route.params.cover,detailFromUpload:!!this.$route.params.cover,curEditImgName:"",concatImgUrl:Xe.is.hb_bottom_957,concatOpenImgUrl:Xe.is.crop0_1,concatImg:null,concatOpenImg:null,uploadImgUrl:$t.qk,bubbleImg:{},detailImg:{},corpImg:{},bubbleFileList:[],detailFileList:[],corpFileList:[],bubbleTempleFileList:[],detailTempleFileList:[],corpTempleFileList:[],height:446,uploadStatus:0,bubbleCropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},bubbleTimeInfo:{startTime:0,duration:-1,action:""},corpCropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},corpTimeInfo:{startTime:0,duration:-1,action:""},detailCropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},detailTimeInfo:{startTime:0,duration:-1,action:""},bubbleGenMaterialLoading:!1,corpGenMaterialLoading:!1,detailGenMaterialLoading:!1,bubbleTemporaryDynamic:{pagUrl:""},bubbleDynamicSource:{mediaUrl:""},corpTemporaryDynamic:{pagUrl:""},corpDynamicSource:{mediaUrl:""},detailTemporaryDynamic:{pagUrl:""},detailDynamicSource:{mediaUrl:""},bubbleStaticIsUpload:!1,corpStaticIsUpload:!1,detailStaticIsUpload:!1,corpRatios:{"957:210":{name:"957:210",label:"957:210",ratio:957/210,hidden:!1,original:!0}},bubbleRatios:{"720:264":{name:"720:264",label:"720:264",ratio:720/264,hidden:!1,original:!0}},detailRatios:{"957:1278":{name:"957:1278",label:"957:1278",ratio:957/1278,hidden:!1,original:!0}},uploader:null,uploadLoading:!1}},props:{useStaticBubblePic:Boolean,useStaticCorpPic:Boolean,hasAtmosphere:Boolean,imgFile:{type:Object,default:function(){return{}}},cropedImgList:{type:Object,default:function(){return{sourceImageUrl:"",receiveImageUrl:"",detailImageUrl:"",bubbleImageUrl:"",openImageUrl:"",corpImageUrl:""}}},showCoverStory:{type:Boolean,default:!1},cover:{type:Object,default:function(){return{}}},coverType:{type:Number,default:0},storyDetailList:{type:Array,default:function(){return[]}},sourceDynamicMediaInfo:Object,loading:Boolean,getBubbleMaterial:Function,getCorpMaterial:Function,getPagDetailMaterial:Function,detailPagLoading:Boolean,corpPagLoading:Boolean,bubblePagLoading:Boolean,showAtmosphereTips:Boolean},components:{WidgetBubbleImg:it,OtherMaterial:yr,MediaEditor:so,CoverCropDetailTips:So,CoverCropCorpTips:Eo,CoverCropBubbleTips:Co},mounted:function(){var e=new Image;e.setAttribute("crossOrigin","anonymous"),e.src=this.concatImgUrl,this.concatImg=e;var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.src=this.concatOpenImgUrl,this.concatOpenImg=t},watch:{imgFile:function(e,t){var i=this;!t&&this.$route.params.cover||e.url&&this.$nextTick((function(){i.watchSourceImg(),Bo.forEach((function(e){var t;null===(t=i["".concat(e,"Cropper")])||void 0===t||t.destroy(),i["".concat(e,"Cropper")]=null})),e.dataUrl&&Bo.forEach((function(e){i["".concat(e,"FromUpload")]=!1,i["".concat(e,"MoveXY")]={},i["".concat(e,"FileList")]=[],i["".concat(e,"TempleFileList")]=[],i["".concat(e,"TemporaryDynamic")]={}}))}))},detailMediaEditorFileUrl:function(e){console.info("--- ~ detailMediaEditorFileUrl ~ val:",e),this.checkInitPag(e,"detail")},corpMediaEditorFileUrl:function(e){console.info("--- ~ corpMediaEditorFileUrl ~ val:",e),this.checkInitPag(e,"corp")},bubbleMediaEditorFileUrl:function(e){console.info("--- ~ bubbleDynamicFromUpload ~ val:",e),this.checkInitPag(e,"bubble")}},computed:(0,ve.Z)((0,ve.Z)({},Mo(["showEditDialog"])),{},{previewTitleClass:function(){var e=this.curEditImgName;if("static"===this.mode)switch(e){case"bubble":return"pl-6";case"detail":return"pl-12";case"corp":return"pl-12"}return""},uploadBtnClass:function(){var e=this.curEditImgName,t=this.mode;return"static"===t?"mx-[110px]":"bubble"===e&&"dynamic"===t?"mx-[83px]":"bubble"!==e&&"dynamic"===t?"mx-[127px]":"mx-[130px]"},reportErrType:function(){var e=this.curEditImgName,t={bubble:"28",detail:"30",corp:"32"};return t[e]},reportSuccType:function(){var e=this.curEditImgName,t={bubble:"27",detail:"29",corp:"31"};return t[e]},acceptType:function(){var e=this.sourceDynamicMediaInfo.url&&this.sourceDynamicMediaInfo.type!==me.Je.Image;return e?"corp"===this.curEditImgName||"detail"===this.curEditImgName?".png,.jpg,.jpeg,.zip":this.hasAtmosphere&&"bubble"===this.curEditImgName?".png,.jpg,.jpeg":Pa._B:".png,.jpg,.jpeg"},mode:function(){var e,t=this.curEditImgName;return this.hasAtmosphere&&"bubble"===t?"static":(this["".concat(t,"ImageDynamicUrl")]||null!==(e=this["".concat(t,"DynamicSource")])&&void 0!==e&&e.mediaUrl)&&!this["".concat(t,"StaticIsUpload")]?"dynamic":"static"},genLoading:function(){switch(this.curEditImgName){case"bubble":return this.bubbleGenMaterialLoading;case"corp":return this.corpGenMaterialLoading;case"detail":return this.detailGenMaterialLoading;default:return!1}},sourceImageDynamicMediaUrl:function(){var e,t;return(null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.sourceImageDynamic)||void 0===t?void 0:t.mediaUrl)||""},bubbleMediaEditorFileUrl:function(){var e,t,i,n;return null!==(e=this.bubbleTemporaryDynamic)&&void 0!==e&&e.pagUrl?null===(t=this.bubbleTemporaryDynamic)||void 0===t?void 0:t.pagUrl:this.bubbleDynamicFromUpload?null===(i=this.cover.packetMaterial)||void 0===i||null===(n=i.bubbleImageDynamic)||void 0===n?void 0:n.mediaUrl:this.sourceImageDynamicMediaUrl},detailMediaEditorFileUrl:function(){var e,t,i,n;return null!==(e=this.detailTemporaryDynamic)&&void 0!==e&&e.pagUrl?null===(t=this.detailTemporaryDynamic)||void 0===t?void 0:t.pagUrl:this.detailDynamicFromUpload?null===(i=this.cover.packetMaterial)||void 0===i||null===(n=i.detailImageDynamic)||void 0===n?void 0:n.mediaUrl:this.sourceImageDynamicMediaUrl},corpMediaEditorFileUrl:function(){var e,t,i,n;return null!==(e=this.corpTemporaryDynamic)&&void 0!==e&&e.pagUrl?null===(t=this.corpTemporaryDynamic)||void 0===t?void 0:t.pagUrl:this.corpDynamicFromUpload?null===(i=this.cover.packetMaterial)||void 0===i||null===(n=i.corpLogoDynamic)||void 0===n?void 0:n.mediaUrl:this.sourceImageDynamicMediaUrl},bubbleDynamicFromUpload:function(){var e,t;return!(null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.bubbleImageDynamicSource)||void 0===t||!t.mediaUrl)},detailDynamicFromUpload:function(){var e,t;return!(null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.detailImageDynamicSource)||void 0===t||!t.mediaUrl)},corpDynamicFromUpload:function(){var e,t;return!(null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.corpLogoDynamicSource)||void 0===t||!t.mediaUrl)},coverImageDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.coverImageDynamic)||void 0===t?void 0:t.mediaUrl},bubbleImageDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.bubbleImageDynamic)||void 0===t?void 0:t.mediaUrl},corpImageDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.corpLogoDynamic)||void 0===t?void 0:t.mediaUrl},detailImageDynamicUrl:function(){var e,t,i;return(null===(e=this.detailTemporaryDynamic)||void 0===e?void 0:e.pagUrl)||(null===(t=this.cover.packetMaterial)||void 0===t||null===(i=t.detailImageDynamic)||void 0===i?void 0:i.mediaUrl)},bubbleImageDynamicSourceUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.bubbleImageDynamicSource)||void 0===t?void 0:t.mediaUrl},corpImageDynamicSourceUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.corpLogoDynamicSource)||void 0===t?void 0:t.mediaUrl},detailImageDynamicSourceUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.detailImageDynamicSource)||void 0===t?void 0:t.mediaUrl},senderC2cWidgetImageUrl:function(){var e=(null===this||void 0===this?void 0:this.cover.packetMaterial.senderC2cWidgetImage.mediaUrl)||"";return e=(0,_e.Xi)(e),e},detailImgUrl:function(){var e=this.detailImg,t=this.imgFile,i="";return i=this.detailFromUpload?(null===e||void 0===e?void 0:e.dataUrl)||(null===t||void 0===t?void 0:t.dataUrl)||(null===t||void 0===t?void 0:t.url):(null===t||void 0===t?void 0:t.dataUrl)||(null===t||void 0===t?void 0:t.url)||"",i=(0,_e.Xi)(i),i},bubbleImgUrl:function(){var e=this.bubbleImg,t=this.imgFile,i="";return i=this.bubbleFromUpload?(null===e||void 0===e?void 0:e.dataUrl)||(null===t||void 0===t?void 0:t.dataUrl)||(null===t||void 0===t?void 0:t.url):(null===t||void 0===t?void 0:t.dataUrl)||(null===t||void 0===t?void 0:t.url)||"",i=(0,_e.Xi)(i),i},corpImgUrl:function(){var e=this.corpImg,t=this.imgFile,i="";return i=this.corpFromUpload?(null===e||void 0===e?void 0:e.dataUrl)||(null===t||void 0===t?void 0:t.dataUrl)||(null===t||void 0===t?void 0:t.url)||"":(null===t||void 0===t?void 0:t.dataUrl)||(null===t||void 0===t?void 0:t.url)||"",i=(0,_e.Xi)(i),i}}),methods:{checkInitPag:function(e,t){var i=this.curEditImgName;if(e&&this.showEditDialog&&i===t){(0,Ht.H)("checkInitPag更新Pag",JSON.stringify({type:i}));var n=this.$refs["".concat(i,"MediaEditor")];null===n||void 0===n||n.initPlayerPag()}},handleDialogVisible:function(e){e||(document.body.style.overflow="visible",m.l1.updateShowEditDialog(!1))},clearAction:function(){var e,t,i,n,a,r,o=this.curEditImgName;null===(e=this.uploader)||void 0===e||e.endUpload(),this["".concat(o,"FileList")].length&&(null===(t=this["".concat(o,"TempleFileList")])||void 0===t?void 0:t.length)<=0&&(this["".concat(o,"StaticIsUpload")]=!1),this["".concat(o,"TempleFileList")].length&&(this["".concat(o,"FileList")]=this["".concat(o,"TempleFileList")]),this["".concat(o,"TemporaryDynamic")]={pagUrl:""},this["".concat(o,"DynamicSource")]={mediaUrl:""},null===(i=this.$refs)||void 0===i||null===(n=i["".concat(o,"MediaEditor")])||void 0===n||n.unload(),null!==(a=this["".concat(o,"FileList")])&&void 0!==a&&a.length||(this["".concat(this.curEditImgName,"FromUpload")]=!1),null===(r=this["".concat(o,"Cropper")])||void 0===r||r.destroy(),this["".concat(o,"Cropper")]=null},handleCropDialogClose:function(){console.log("close"),this.clearAction()},genDynamicMaterial:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p,v,f,h;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.curEditImgName,t.prev=1,s=e["".concat(i,"CropInfo")],c=s.cropWidth,l=s.cropHeight,u=s.cropLeft,d=s.cropTop,m.l1.updateShowEditDialog(!1),e["".concat(i,"GenMaterialLoading")]=!0,e.$emit("changeGenMaterialStatus",{type:i,loading:!0}),p={bubble:e.getBubbleMaterial,corp:e.getCorpMaterial,detail:e.getPagDetailMaterial},v=Number(e.sourceDynamicMediaInfo.cropDetailInfo.cropInfo.cropLeft),f=Number(e.sourceDynamicMediaInfo.cropDetailInfo.cropInfo.cropTop),h=e.sourceDynamicMediaInfo.cropDetailInfo.cropInfo.cropWidth/Xe.TE.width,n={start_time:e.sourceDynamicMediaInfo.cropDetailInfo.timeInfo.startTime,duration:(null===(a=e.sourceDynamicMediaInfo.cropDetailInfo.timeInfo)||void 0===a?void 0:a.duration)||1,file_type:Pa.Eu[e.sourceDynamicMediaInfo.type],file_url:e.sourceDynamicMediaInfo.url,w:Math.floor(Number(c)*h),h:Math.floor(Number(l)*h),x:Math.floor(v+Number(u)*h),y:Math.floor(f+Number(d)*h)},(0,Ht.H)("裁剪范围",JSON.stringify({opt:n,sourceUrl:null===(o=e.sourceDynamicMediaInfo)||void 0===o?void 0:o.url})),t.next=14,p[i](n);case 14:m.l1.updatePreviewPagReinit(i),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](1),e.errorTip(t.t0.message),(0,Ht.H)("二次裁剪原素材报错",JSON.stringify({curEditImgName:i,opt:n}));case 21:return t.prev=21,e.$emit("changeGenMaterialStatus",{type:i,loading:!1}),e["".concat(i,"GenMaterialLoading")]=!1,t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[1,17,21,25]])})))()},handleSure:function(){var e=this.curEditImgName;"dynamic"===this.mode?this["".concat(e,"TemporaryDynamic")].pagUrl?(this.$emit("updateMaterial",{type:this.curEditImgName,material:this["".concat(e,"TemporaryDynamic")],source:this["".concat(e,"DynamicSource")]}),this.checkPreview(e),m.l1.updateShowEditDialog(!1),this["".concat(e,"TempleFileList")]=this["".concat(e,"FileList")]):!this["".concat(e,"TemporaryDynamic")].pagUrl&&this.cover.packetMaterial["".concat(e,"ImageDynamicSourceUrl")]?console.log("已经有手动上传的素材，不做处理"):this.genDynamicMaterial():"static"===this.mode&&this.clipImg();var t={bubble:"43",detail:"44",corp:"45"};Lo.mediaUploadReport(t[e],{})},handleCropChange:function(e){this["".concat(this.curEditImgName,"CropInfo")]=e.cropInfo},handleChangePoint:function(e){this["".concat(this.curEditImgName,"TimeInfo")]=e.timeInfo},checkPreview:function(e){this.$emit("checkPreview",e)},handleUploadChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.file,a=t.curEditImgName,"done"!==n.status){i.next=26;break}if(o=n.response,-2!==o.base_response.ret){i.next=10;break}return t.errorTip("仅支持PNG/JPG/JPEG"),t["".concat(a,"FileList")]=[],i.abrupt("return");case 10:if(0===o.base_response.ret){i.next=14;break}return t.errorTip("素材上传失败，请重试上传，或联系客服"),t["".concat(a,"FileList")]=[],i.abrupt("return");case 14:if((0,rt.NL)(n.type)){i.next=16;break}return i.abrupt("return");case 16:n.dataUrl=n.response.dataUrl,t["".concat(a,"FileList")]=[n],t["".concat(a,"FromUpload")]=!0,t["".concat(a,"DynamicSource")]={mediaUrl:""},t["".concat(a,"StaticIsUpload")]=!0,t["".concat(a,"MoveXY")]={},t["".concat(a,"Img")]=n,window.setTimeout((function(){t.initCropBox(t.curEditImgName)}),500),i.next=27;break;case 26:"removed"===n.status?t["".concat(a,"FileList")]=[]:t["".concat(a,"FileList")]=[n];case 27:case"end":return i.stop()}}),i)})))()},uploadEditDynamic:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l,u,d,p,v,m,f,h,g,y,b;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.onSuccess,a=e.onError,o=e.file,s=t.curEditImgName,i.prev=2,t.uploader=new co.ZP(e.file,{cdnFileType:null!==(c=e.file)&&void 0!==c&&null!==(l=c.type)&&void 0!==l&&l.includes("mp4")?co.vB.video:co.vB.zip}),i.next=6,Lo.bigFileUpload(e,t.uploader);case 6:if(p=i.sent,v=0,null===(u=e.file)||void 0===u||null===(d=u.type)||void 0===d||!d.includes("mp4")){i.next=14;break}return i.next=11,(0,Yr.TI)(p.url);case 11:t["".concat(s,"DynamicSource")].mediaType=me.Je.Mp4,i.next=30;break;case 14:return i.next=16,(0,Yr.su)(p.url);case 16:return m=i.sent,i.next=19,t.validPic(m.zipWidgetUrl,"checkZip");case 19:if(!(m.zipPicNum<Pa.yY)){i.next=23;break}throw f="压缩包内图片不能少于".concat(Pa.yY,"张，请检查"),Lo.mediaUploadReport(t.reportErrType,{file:o,failReason:f,picCnt:m.zipPicNum}),new Error(f);case 23:if(!(m.zipPicNum>Pa.QV)){i.next=27;break}throw h="压缩包内图片不能超过".concat(Pa.QV,"张，请检查"),Lo.mediaUploadReport(t.reportErrType,{file:o,failReason:h,picCnt:m.zipPicNum}),new Error(h);case 27:m.zipPicNum>0?v=Math.floor(Number(m.zipPicNum)/Pa.rZ):(0,Ht.H)("获取压缩包内图片数错误",JSON.stringify({msg:m})),t["".concat(s,"DynamicSource")].mediaType=me.Je.Zip,Lo.mediaUploadReport(t.reportSuccType,{file:o,picCnt:m.zipPicNum});case 30:return t["".concat(s,"DynamicSource")].mediaUrl=p.url,t["".concat(s,"StaticIsUpload")]=!1,g={bubble:{w:Xe.Mx.width,h:Xe.Mx.height,fn:Yr.CJ},corp:{w:Xe.s9.width,h:Xe.s9.height,fn:Yr.Zt},detail:{w:Xe.TE.width,h:Xe.TE.height,fn:Yr["if"]}},y=t["".concat(s,"DynamicSource")].mediaType,(0,Ht.H)("自定义上传动态素材",JSON.stringify({mediaType:y,file_url:p.url,w:g[s].w,h:g[s].h})),i.next=37,g[s].fn({scene:Ve.a1.FIRST_UPLOAD,whole:{file_type:Pa.Eu[y],file_url:p.url,x:0,y:0,duration:v||-1,start_time:0,w:g[s].w,h:g[s].h}});case 37:if(b=i.sent,b.pagUrl||!b.picBase64){i.next=41;break}throw(0,Ht.H)("自定义素材文件太大"),new Error("动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");case 41:n({base_response:{ret:0},url:b.pagUrl,md5:b.pagMd5}),t.$set(t,"".concat(s,"TemporaryDynamic"),b),i.next=51;break;case 45:i.prev=45,i.t0=i["catch"](2),console.error("--- ~ uploadEditDynamic ~ err:",i.t0),(0,Ht.H)("定制".concat(s,"动态素材失败"),JSON.stringify(i.t0)),t.errorTip(i.t0.message||"素材上传失败，请重试"),a();case 51:case"end":return i.stop()}}),i,null,[[2,45]])})))()},handleUpload:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.uploadLoading=!0,i.prev=1,n=e.onSuccess,a=e.onError,o=e.file,!(0,rt.NL)(o.type)){i.next=21;break}return i.prev=4,i.next=7,(0,_e.sT)(o);case 7:s=i.sent,Lo.mediaUploadReport(t.reportSuccType,{file:o}),n({base_response:{ret:0},dataUrl:s}),i.next=19;break;case 12:i.prev=12,i.t0=i["catch"](4),(0,Ht.H)("CoverCrop上传错误",JSON.stringify(i.t0)),t.errorTip("图片上传错误，请重试"),console.error(i.t0),Lo.mediaUploadReport(t.reportErrType,{file:o,failReason:"图片上传错误，请重试"}),a();case 19:i.next=23;break;case 21:return i.next=23,t.uploadEditDynamic(e);case 23:return i.prev=23,t.uploadLoading=!1,i.finish(23);case 26:case"end":return i.stop()}}),i,null,[[1,,23,26],[4,12]])})))()},validPic:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o,s;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}throw new Error("检验图片传入图片地址为空");case 2:return n.next=4,(0,_e.t$)(e);case 4:if(a=n.sent,o=a.width,s=a.height,"detail"!==i.curEditImgName||o==Xe.TE.width&&s==Xe.TE.height){n.next=9;break}throw new Error("".concat("checkPic"===t?"图片":"序列帧","尺寸需为").concat(Xe.TE.width,"*").concat(Xe.TE.height,"像素"));case 9:if("bubble"!==i.curEditImgName||o==Xe.Mx.width&&s==Xe.Mx.height){n.next=11;break}throw new Error("".concat("checkPic"===t?"图片":"序列帧","尺寸需为").concat(Xe.Mx.width,"*").concat(Xe.Mx.height,"像素"));case 11:if("corp"!==i.curEditImgName||o==Xe.s9.width&&s==Xe.s9.height){n.next=13;break}throw new Error("".concat("checkPic"===t?"图片":"序列帧","尺寸需为").concat(Xe.s9.width,"*").concat(Xe.s9.height,"像素"));case 13:case"end":return n.stop()}}),n)})))()},handelBeforeUpload:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l,u,d,p,v,m,f,h,g,y,b,w,C;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n={bubble:"53",detail:"54",corp:"55"},Lo.mediaUploadReport(n[t.curEditImgName],{}),a=t.curEditImgName,t["".concat(a,"TempleFileList")]=t["".concat(a,"FileList")],!(0,rt.NL)(e.type)){i.next=26;break}if(!(e.size>1024*Fo)){i.next=10;break}return o="图片大小不可超过".concat(Fo,"KB"),t.errorTip(o),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:o}),i.abrupt("return",Promise.reject(new Error(o)));case 10:return i.next=12,(0,_e.sT)(e);case 12:return s=i.sent,i.prev=13,i.next=16,t.validPic(s,"checkPic");case 16:i.next=24;break;case 18:return i.prev=18,i.t0=i["catch"](13),c=i.t0.message,t.errorTip(c),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:c}),i.abrupt("return",Promise.reject(c));case 24:i.next=68;break;case 26:if(!("detail"===t.curEditImgName&&e.size>1024*Oo*1024)){i.next=31;break}return u="压缩包大小不可超过".concat(Oo,"MB"),t.errorTip(u),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:u}),i.abrupt("return",Promise.reject(new Error(u)));case 31:if(!(["bubble","corp"].includes(t.curEditImgName)&&e.size>1024*No*1024)){i.next=37;break}return d=/zip/.test(e.type)?"压缩包":"视频",p="".concat(d,"大小不可超过").concat(No,"MB"),t.errorTip(p),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:p}),i.abrupt("return",Promise.reject(p));case 37:if(null===(l=e.type)||void 0===l||!l.includes("mp4")){i.next=67;break}return i.next=40,(0,rt.o)(e,(0,rt.WY)(e.type));case 40:if(v=i.sent,m=v.width,f=v.height,h=v.duration,!(h>3)){i.next=47;break}return g="时长不能超过3秒钟",t.errorTip(g),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:g,videoInfo:v}),i.abrupt("return",Promise.reject(new Error(g)));case 47:if(!(h<1)){i.next=52;break}return y="时长不能少于1秒钟",t.errorTip(y),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:y,videoInfo:v}),i.abrupt("return",Promise.reject(new Error(y)));case 52:if("detail"!==t.curEditImgName||m===Xe.TE.width&&f===Xe.TE.height){i.next=57;break}return b="视频尺寸需为".concat(Xe.TE.width,"*").concat(Xe.TE.height),t.errorTip(b),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:b,videoInfo:v}),i.abrupt("return",Promise.reject(new Error(b)));case 57:if("bubble"!==t.curEditImgName||m===Xe.Mx.width&&f===Xe.Mx.height){i.next=62;break}return w="视频尺寸需为".concat(Xe.Mx.width,"*").concat(Xe.Mx.height),t.errorTip(w),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:w,videoInfo:v}),i.abrupt("return",Promise.reject(new Error("wrong size")));case 62:if("corp"!==t.curEditImgName||m===Xe.s9.width&&f===Xe.s9.height){i.next=67;break}return C="视频尺寸需为".concat(Xe.s9.width,"*").concat(Xe.s9.height),t.errorTip(C),Lo.mediaUploadReport(t.reportErrType,{file:e,failReason:C,videoInfo:v}),i.abrupt("return",Promise.reject(new Error("wrong size")));case 67:return i.abrupt("return",Promise.resolve());case 68:case"end":return i.stop()}}),i,null,[[13,18]])})))()},watchSourceImg:function(){var e=this;if(this.imgFile.dataUrl){var t=new Image,i=this.concatImg;t.setAttribute("crossOrigin","anonymous"),t.onload=(0,o.Z)((0,r.Z)().mark((function n(){var a,o,s,c,l;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=(0,_e.lE)(i,t),o=(0,_e.MA)(t,t.naturalWidth,t.naturalHeight),s=(0,_e.MA)(t,t.naturalWidth,.27457*t.naturalHeight,(t.naturalHeight-.27457*t.naturalHeight)/2),c=(0,_e.MA)(t,t.naturalWidth,Xe.s9.height,(t.naturalHeight-Xe.s9.height)/2),n.next=6,(0,Xe.JE)({coverUrl:e.imgFile.dataUrl,scale:.4});case 6:l=n.sent,e.$emit("updateCropedImgList",{sourceImageUrl:e.imgFile.dataUrl,receiveImageUrl:a,detailImageUrl:o,bubbleImageUrl:s,corpImageUrl:c,openImageUrl:l});case 8:case"end":return n.stop()}}),n)}))),t.src=this.imgFile.dataUrl}},initCropBox:function(e){var t=this,i={detail:Xe.TE.width/Xe.TE.height,bubble:240/88,corp:Xe.s9.width/Xe.s9.height},n=0;Bo.forEach((function(e){var i;null===(i=t["".concat(e,"Cropper")])||void 0===i||i.destroy(),t["".concat(e,"Cropper")]=null})),this.height=446,this.bubbleFromUpload&&"bubble"===e?this.height=157:this.corpFromUpload&&"corp"==e&&(this.height=113),this["".concat(e,"Cropper")]=new(pr())(this.$refs["".concat(e,"Source")],{viewMode:3,guides:!1,aspectRatio:i[this.curEditImgName],scalable:!0,autoCropArea:"detail"===this.curEditImgName?1:.99,minContainerHeight:30,minContainerWidth:50,minCropBoxWidth:100,zoomable:!1,preview:".preview-content-".concat(e),cropmove:function(i){var a=i.detail.action;1===n&&Lo.baseActionReport({actionType:"all"===a?"1":"2",coverId:t.cover.orderId||"",processType:"1",authorId:m.U6.user.authorId,editType:"".concat(qo[e])}),n+=1},crop:function(i){var n,a,r=i.detail,o=r.x,s=r.y,c=r.width,l=r.height;!t["".concat(e,"MoveXY")]||null!==(n=t["".concat(e,"MoveXY")])&&void 0!==n&&n.x||null!==(a=t["".concat(e,"MoveXY")])&&void 0!==a&&a.y||(t["".concat(e,"MoveXY")].x=o,t["".concat(e,"MoveXY")].y=s,t["".concat(e,"MoveXY")].width=c,t["".concat(e,"MoveXY")].height=l),t["".concat(e,"MoveXY")]&&(t["".concat(e,"MoveXY")].movingX=o,t["".concat(e,"MoveXY")].movingY=s,t["".concat(e,"MoveXY")].movingWidth=c,t["".concat(e,"MoveXY")].movingHeight=l)},ready:function(){if(t["".concat(e,"MoveXY")].width>=0){var i=t["".concat(e,"MoveXY")],n=i.x,a=i.y,r=i.width,o=i.height;t["".concat(e,"Cropper")].setData({x:n,y:a,width:r,height:o})}}})},editImg:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.curEditImgName=e,Lo.baseActionReport({actionType:"3",coverId:t.cover.orderId||"",processType:"1",authorId:m.U6.user.authorId,editType:"".concat(qo[e])}),m.l1.updateShowEditDialog(!0),i.next=5,t.$nextTick();case 5:return a=null===(n=t.$refs)||void 0===n?void 0:n["".concat(e,"MediaEditor")],i.next=8,null===a||void 0===a?void 0:a.initMedia();case 8:"static"===t.mode&&t.initCropBox(e);case 9:case"end":return i.stop()}}),i)})))()},clipImg:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.curEditImgName,n=e["".concat(i,"Cropper")],!n){t.next=16;break}return t.next=5,n.getCroppedCanvas().toDataURL("image/jpeg");case 5:a=t.sent,o=e["".concat(i,"MoveXY")],s=o.movingX,c=o.movingY,l=o.movingWidth,u=o.movingHeight,e["".concat(i,"MoveXY")].x=s,e["".concat(i,"MoveXY")].y=c,e["".concat(i,"MoveXY")].width=l,e["".concat(i,"MoveXY")].height=u,d={},d[i+"ImageUrl"]=a,e.$emit("updateCropedImgList",Object.assign({},e.cropedImgList,d)),e.$emit("changeImg",{key:"".concat(i,"Img"),value:{dataUrl:a}}),m.l1.updateShowEditDialog(!1);case 16:case"end":return t.stop()}}),t)})))()},cancel:function(){m.l1.updateShowEditDialog(!1),this.uploadLoading=!1,this.clearAction()}}}),jo=Qo,Ho=(0,g.Z)(jo,lr,ur,!1,null,"9c2d96ae",null),Go=Ho.exports,Wo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("添加跳转")])])]},proxy:!0}])},[t("mp-checkbox",{model:{value:e.whetherJump,callback:function(t){e.whetherJump=t},expression:"whetherJump"}},[t("span",{staticClass:"checkbox-label"},[e._v(e._s(e.wordingsMap.whereJump[e.principalAccountType]))]),t("span",{staticStyle:{color:"#9a9a9a","margin-left":"8px"}})]),t("div",{staticClass:"tip mt-2"},[e._v(" "+e._s(e.wordingsMap.tip[e.principalAccountType])+" ")]),t("div",{staticClass:"tip mt-2"},[t("span",[e._v(e._s(e.wordingsMap.tip2[e.principalAccountType]))]),t("mp-popover",{attrs:{position:"down-right",width:410,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("div",{staticClass:"store-info-image"},[t("img",{attrs:{src:i(31317)}}),"1_2"!==e.principalAccountType?t("img",{attrs:{src:i(93807)}}):e._e()]),t("p",[e._v("该功能在 iOS 微信 8.0.18 和 Android 微信 8.0.19 及以上版本支持")])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)],1),e.whetherJump?t("mp-form-item",{staticClass:"choose-jump-type",scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("跳转链接")])])]},proxy:!0}],null,!1,3970313e3)},[t("mp-radio-group",{model:{value:e.radioJumpType,callback:function(t){e.radioJumpType=t},expression:"radioJumpType"}},[0===e.principalType?t("mp-radio",{attrs:{value:2}},[e._v("小程序")]):e._e(),"1_2"!==e.principalAccountType?t("mp-radio",{attrs:{value:1}},[e._v("公众号")]):e._e(),t("mp-radio",{attrs:{value:3}},[e._v("视频号")]),t("mp-radio",{attrs:{value:4}},[e._v("表情页面")])],1)],1):e._e(),e.radioJumpType?t("mp-form-item",{staticClass:"choose-jump-type",scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label mt-1.5"},[t("span",[e._v(e._s("添加".concat(e.typeText)))])])]},proxy:!0}],null,!1,2949527331)},[0!=e.radioJumpType?t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{size:"mini"},on:{click:function(t){return t.preventDefault(),e.add(!!e.curAction.appName)}}},[e._v(" "+e._s(e.curAction.appName?"重新添加":"添加")+" ")]):e._e(),e.curAction.appName?t("div",{staticClass:"action-wrap"},[e.curAction.username||e.curAction.nickname?t("div",{staticClass:"action-info"},[t("div",{staticClass:"action-info_content"},[t("img",{staticClass:"avatar",class:6===e.curAction.actionType?"avatar2":"",attrs:{src:e.curAction.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.curAction.nickname))])]),e.showAuthQrcode?t("div",{staticClass:"action-info_authstatus"},[e.authorizeSuccess?t("span",[e._v("已授权")]):[t("a",{staticClass:"btn-auth-dialog",on:{click:function(t){return t.preventDefault(),e.add(!1)}}},[e._v("打开授权码")]),t("span",[e._v("未授权")])]],2):e._e(),t("div",{staticClass:"delete",on:{click:e.deleteEnter}})]):e._e(),e.radioJumpType===e.JumpTypeName["小程序"]?t("div",{staticClass:"action-path"},[t("div",{staticClass:"tips"},[t("div",{staticClass:"tip"},[e._v("可跳转到小程序路径指定的页面")]),t("div",{staticClass:"tip"},[t("span",[e._v("默认是小程序首页的路径，可更改。如需更多页面路径，请登录")]),t("a",{attrs:{href:"https://mp.weixin.qq.com/",target:"_blank"}},[e._v("微信公众平台")]),t("span",[e._v("获取，")]),t("a",{attrs:{href:"https://kf.qq.com/faq/180725biaAn2180725VnQjYF.html",target:"_blank"}},[e._v("查看操作指引")])])]),t("mp-input",{attrs:{placeholder:"请输入小程序页面路径"},model:{value:e.path,callback:function(t){e.path=t},expression:"path"}}),e.showPathError?t("div",{staticClass:"tip error"},[e._v("该路径无效")]):e._e(),t("div",{staticClass:"preview",staticStyle:{"margin-top":"12px"}},[t("a",{on:{click:function(t){return t.preventDefault(),e.preview.apply(null,arguments)}}},[e._v("预览小程序")])])],1):e._e()]):e._e(),e.authorizeWaiting&&e.curAction.appName?t("div",{staticClass:"auth-tips"},[e._v("未授权无法提交封面")]):e._e()],1):e._e(),e.radioJumpType===e.JumpTypeName["视频号"]?t("SearchFinderDialog",{attrs:{jumpInfo:e.curAction,orderId:e.orderId,hideAuthQrcode:e.hideAuthQrcode},on:{submit:e.handleFinderSearchDialogSubmit},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e.radioJumpType===e.JumpTypeName["表情页面"]?t("SearchEmotionDialog",{on:{submit:e.handleEmotionSearchDialogSubmit},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"添加".concat(e.typeText),value:e.showDialog,closable:!0,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[!e.info.username||e.showError||e.showAuthQrcode&&!e.hideAuthQrcode?e._e():t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1)],1)]},proxy:!0}])},[t("div",{ref:"dialog",staticClass:"dialog-body"},[!e.hideAuthQrcode&&e.showAuthQrcode?t("ActionAuthQrcode",{attrs:{jumpInfo:e.curAction,orderId:e.orderId}}):[t("mp-input",{attrs:{placeholder:e.searchPlaceholer,clearable:"clearable"},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap",class:{"default-height":!e.info.username}},[e.info.username?t("div",{staticClass:"result"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList}})],1):t("div",{staticClass:"tip"},[e.radioJumpType===e.JumpTypeName["小程序"]&&e.showError?[t("span",{staticClass:"error"},[e._v("请输入正确的AppID/帐号原始ID，并确保小程序允许被搜索")])]:e._e(),e.radioJumpType===e.JumpTypeName["公众号"]&&e.showError?[t("span",{staticClass:"error"},[e._v("请输入正确的公众号微信号/帐号原始ID")])]:e._e()],2)])]],2)]),t("mp-dialog",{staticClass:"preview-dialog",attrs:{title:"预览小程序",value:e.showPreviewDialog},on:{input:e.togglePreviewDialog}},[t("div",{staticClass:"content"},[t("div",{staticClass:"qrcode-wrap"},[e.preivewQrcodeUrl?t("img",{staticClass:"qrcode",attrs:{src:e.preivewQrcodeUrl}}):e._e()])])])],1)},zo=[],Vo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"".concat(e.titleText,"视频号"),value:e.value,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[!e.hadSearchResult||e.showAuthQrcode&&!e.hideAuthQrcode?e._e():t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.hadSearchResult||e.showError||!e.info.username,loading:e.submitLoading},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1)],1)]},proxy:!0}])},[t("div",{ref:"dialog",staticClass:"dialog-body"},[!e.hideAuthQrcode&&e.showAuthQrcode?t("ActionAuthQrcode",{attrs:{jumpInfo:e.jumpInfo,orderId:e.orderId}}):[t("mp-input",{attrs:{placeholder:"输入视频号名称/绑定的微信号",clearable:"clearable"},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap",class:{"default-height":!e.hadSearchResult}},[e.hadSearchResult?t("div",{staticClass:"result-list"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList},on:{"radio-change":e.handleRadioChange}})],1):t("div",{staticClass:"tip"},[e.showError?[t("span",{staticClass:"error"},[e._v("请输入正确的视频号名称/绑定的微信号")])]:e._e()],2)])]],2)])},Jo=[],Ko=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"qrcode-wrap"},[t("div",{staticClass:"topTitle"},[e._v(e._s(e.topTitle))]),t("div",{staticClass:"qrcode",class:{showMask:1!==e.status,border:!e.authQrcode}},[t("img",{staticClass:"qrq",attrs:{src:"https://res.wx.qq.com/t/fed_upload/b7d329b5-c8e2-434c-b0d5-cb3b52809c30/1.png"}}),e.authQrcode?t("img",{attrs:{src:e.authQrcode}}):e._e(),t("div",{staticClass:"mask",on:{click:e.genAuthQrcode}},[e.isFailed||e.isExpired?t("svg-icon",{staticClass:"reload-icon",class:{"reload-loading":e.fetchLoading},attrs:{name:"reload"}}):e.isSuccess?t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}}):e._e()],1)]),t("div",{staticClass:"second-tips"},[e._v("有效期为12小时")]),e.isFailed||e.isExpired?t("div",{staticClass:"title"},[t("mp-icon",{staticClass:"fail-icon",attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300"}}),t("span",[e._v("二维码过期，请刷新重试")])],1):e._e()])},Yo=[],Xo=(0,Ce._p)("cover"),$o=Xo.mapState,es=s.ZP.extend({name:"ActionAuthQrcode",props:{jumpInfo:Object,orderId:String},data:function(){return{genQrcodeLoading:!1,timer:0,fetchLoading:!1}},computed:(0,ve.Z)((0,ve.Z)({},$o(["actionAuthInfo"])),{},{authQrcode:function(){var e;return null===(e=this.actionAuthInfo)||void 0===e?void 0:e.qrcodeBase64},status:function(){var e;return null===(e=this.actionAuthInfo)||void 0===e?void 0:e.status},isFailed:function(){return this.status===me.WX.ACTION_QRCODE_INVAILID},isExpired:function(){return this.status===me.WX.ACTION_QRCODE_EXPIRED},isSuccess:function(){return this.status===me.WX.ACTION_QRCODE_COMFIRMED},topTitle:function(){var e=4===this.jumpInfo.actionType?"绑定的微信":"管理员的微信";return"「".concat(this.jumpInfo.nickname||"-","」").concat(e,"扫码授权后可添加")}}),methods:{genAuthQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.fetchLoading){t.next=2;break}return t.abrupt("return");case 2:return e.fetchLoading=!0,t.prev=3,t.next=6,m.l1.genActionAuthQrcode({action:e.jumpInfo,order_id:e.orderId,vm:e});case 6:return t.prev=6,e.fetchLoading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})))()}}}),ts=es,is=(0,g.Z)(ts,Ko,Yo,!1,null,"53e2a0a5",null),ns=is.exports,as=new Ve.ZP,rs=(0,Ce._p)("user"),os=rs.mapGetters,ss=(0,Ce._p)("cover"),cs=ss.mapGetters,ls=s.ZP.extend({name:"SearchFinderDialog",components:{ActionAuthQrcode:ns,JumpInfoList:li.Z},data:function(){return{querying:"",query:"",info:{},jumpInfoList:[],showError:!1,submitLoading:!1}},props:{value:Boolean,mode:{type:String,default:"add"},jumpInfo:{type:Object,default:function(){return{}}},orderId:String,hideAuthQrcode:Boolean},computed:(0,ve.Z)((0,ve.Z)((0,ve.Z)({},cs(["authorizeWaiting","showAuthQrcode","actionAuthInfoStatus"])),os(["principalAccountType"])),{},{hadSearchResult:function(){return!!this.jumpInfoList.length&&!this.showError},titleText:function(){var e=this;return"add"===e.mode?"添加":"选择"},accountType:function(){return m.U6.user.accountType}}),mounted:function(){document.addEventListener("keydown",this.handleEnterKeyDown)},beforeDestroy:function(){document.removeEventListener("keydown",this.handleEnterKeyDown)},watch:{value:function(e){e||this.clear()}},methods:{handleRadioChange:function(e){this.info=this.$set(this,"info",e)},handleEnterKeyDown:function(e){var t="undefined"!=typeof event?window.event:e,i=this;if(t&&13==t.keyCode&&i.value)return t.preventDefault(),t.stopPropagation(),i.search(),!1},clear:function(){this.info={},this.jumpInfoList=[],this.showError=!1,this.query="",this.querying=""},closeDialog:function(){this.clear(),this.$emit("input",!1)},search:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.querying){t.next=2;break}return t.abrupt("return");case 2:return e.showError=!1,e.info={},t.next=6,as.storyGetFinderInfo(e.querying);case 6:i=t.sent,i&&0===i.baseResponse.ret?(e.jumpInfoList=i.jumpInfoList.filter((function(e){return!(!e.headImgUrl&&e.scene===Ve.DS.finder)})).sort((function(t,i){var n,a,r,o;return t.isSameBody===i.isSameBody?t.nickname===i.nickname?0:(null===(n=t.nickname)||void 0===n?void 0:n.toLocaleLowerCase())===(null===(a=e.querying)||void 0===a?void 0:a.toLocaleLowerCase())?-1:(null===(r=i.nickname)||void 0===r?void 0:r.toLocaleLowerCase())===(null===(o=e.querying)||void 0===o?void 0:o.toLocaleLowerCase())?1:0:t.isSameBody?-1:1})),e.jumpInfoList.length>1&&e.jumpInfoList.every((function(t){return t.username===e.jumpInfoList[0].username}))&&(e.jumpInfoList=e.jumpInfoList.slice(0,1)),e.query=e.querying,e.showError=!i.jumpInfoList.length):e.showError=!0;case 8:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object.assign({},e.info,{username:e.info.username,appName:e.query,query:e.query,queryString:e.query}),t.prev=1,e.submitLoading=!0,t.next=5,m.l1.genActionAuthQrcode({action:{actionType:4,finderProfileDetail:(0,ve.Z)({},i)},order_id:e.orderId,vm:e});case 5:e.$emit("submit",i),e.actionAuthInfoStatus===me.WX.ACTION_QRCODE_AUTOCONFIRMED&&e.closeDialog();case 7:return t.prev=7,e.submitLoading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))()}}}),us=ls,ds=(0,g.Z)(us,Vo,Jo,!1,null,"23ccf96a",null),ps=ds.exports,vs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"添加表情页面",value:e.value,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{staticClass:"dialog-body"},[0===e.emotionStep?[t("div",{staticClass:"title-tips"},[e._v("请输入表情平台注册邮箱")]),t("mp-form",{ref:"form",staticClass:"mail-form2",attrs:{model:e.form,rules:e.rules,"label-width":60},nativeOn:{submit:function(e){e.preventDefault()}}},[t("mp-form-item",{attrs:{prop:"email",label:""}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入邮箱"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emotionNext.apply(null,arguments)}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)]:e._e(),1===e.emotionStep?[t("div",{staticClass:"title-tips2"},[e._v("微信扫码认证")]),t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:e.normalText,status:e.qrcodeStatus,failText:e.failText},on:{reload:e.loadQrcode}})]:e._e(),2===e.emotionStep?[t("div",{staticClass:"title-tips"},[e._v("选择要跳转的表情页面")]),t("mp-radio-group",{staticClass:"list",model:{value:e.enmotionid,callback:function(t){e.enmotionid=t},expression:"enmotionid"}},[e.enmotion.name?[t("div",{staticClass:"list-title"},[e._v("艺术家主页")]),t("div",{staticClass:"flex-c-c list-item"},[t("img",{staticClass:"list-item-avatar",attrs:{src:e.enmotion.headUrl||e.defaultAvatar}}),t("div",{staticClass:"list-item-name"},[e._v(e._s(e.enmotion.name))]),t("div",{staticClass:"a"},[t("mp-radio",{staticClass:"radio",attrs:{value:"designerPerson"}})],1)])]:e._e(),t("div",{staticClass:"list-title"},[e._v("表情专辑")]),e._l(e.enmotion.emotionProductInfo,(function(i){return t("div",{key:i.name,staticClass:"list-item"},[t("img",{staticClass:"list-item-avatar list-item-avatar2",attrs:{src:i.icon}}),t("div",{staticClass:"list-item-wrap"},[t("div",{staticClass:"list-item-name"},[e._v(e._s(i.name))]),t("div",{staticClass:"list-item-desc"},[e._v(e._s(i.desc))])]),t("div",{staticClass:"a"},[t("mp-radio",{staticClass:"radio",attrs:{value:i.productId}})],1)])}))],2)]:e._e()],2),1!==e.emotionStep?t("div",{staticClass:"dialog-footer weui-desktop-dialog__ft"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.form.email||e.showError},on:{click:function(t){return t.preventDefault(),e.emotionNext.apply(null,arguments)}}},[e._v("下一步")])],1):e._e()])},ms=[],fs=s.ZP.extend({components:{Qrcode:O.Z},props:{value:Boolean},data:function(){return{rules:{email:[{required:!0,message:"注册邮箱不能为空",trigger:"blur"},{trigger:"blur",validator:function(e,t,i){return(0,_e.Q7)(t)?i():i(new Error("请填写正确格式的邮箱地址"))}}]},form:{email:""},enmotionid:"",qrcodeUrl:"",enmotion:{},normalText:"",qrcodeStatus:0,emotionStep:0,checkInterval:0,showError:!1,token:"",failText:""}},computed:{},beforeDestroy:function(){clearInterval(this.checkInterval),document.onkeydown=function(){}},watch:{form:{deep:!0,handler:function(){(0,_e.Q7)(this.form.email)?this.showError=!1:this.showError=!0}}},methods:{checkQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e,t.next=3,(new v.ZP).checkEmotionJumpQrcode(e.token);case 3:if(i=t.sent,i&&1!==i.baseResponse.ret){t.next=6;break}return t.abrupt("return");case 6:clearInterval(e.checkInterval),0===i.baseResponse.ret?(e.enmotion=i,e.emotionStep=e.emotionStep+1):2===i.baseResponse.ret?(e.qrcodeStatus=O.R.fail,e.failText="未成功扫码，请先绑定表情账号"):e.qrcodeStatus=O.R.expired;case 8:case"end":return t.stop()}}),t)})))()},loadQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,(new v.ZP).getEmotionJumpQrcode(e.form.email);case 3:if(n=t.sent,n){t.next=8;break}return t.abrupt("return");case 8:if(-2!==n.baseResponse.ret){t.next=15;break}return i.$tipsErr("链接已过期，请重新发起"),window.setTimeout((function(){return i.$tipsHide()}),3e3),window.setTimeout((function(){return i.closeDialog()}),3e3),t.abrupt("return");case 15:if(1!==n.baseResponse.ret){t.next=19;break}return i.$tipsErr("没有艺术家账号"),window.setTimeout((function(){return i.$tipsHide()}),3e3),t.abrupt("return");case 19:e.qrcodeStatus=O.R.normal,e.qrcodeUrl=n.image,e.token=n.token,e.checkInterval=window.setInterval((function(){return e.checkQrcode()}),1e3);case 23:case"end":return t.stop()}}),t)})))()},emotionNext:function(){var e=this;if(0===this.emotionStep)this.loadQrcode(),this.emotionStep=this.emotionStep+1;else if(2===this.emotionStep){var t={};"designerPerson"==this.enmotionid?t={jumpType:4,actionType:5,designerUin:this.enmotion.designerUin,name:this.enmotion.name,appName:this.enmotion.name,nickname:this.enmotion.name,headImgUrl:this.enmotion.headUrl,headUrl:this.enmotion.headUrl,emotionProfileDetail:{designerUin:this.enmotion.designerUin,name:this.enmotion.name,headUrl:this.enmotion.headUrl}}:""!=this.enmotionid&&this.enmotion.emotionProductInfo.forEach((function(i){i.productId==e.enmotionid&&(t={jumpType:4,actionType:6,name:i.name,appName:i.name,nickname:i.name,productId:i.productId,desc:i.desc,headImgUrl:i.icon,emotionProductDetail:{productId:i.productId}})})),this.$emit("submit",t),this.closeDialog()}},closeDialog:function(){this.showError=!1,this.emotionStep=0,this.$emit("input",!1)}}}),hs=fs,gs=(0,g.Z)(hs,vs,ms,!1,null,"37898c52",null),ys=gs.exports,bs=new Ve.ZP,ws=(0,Ce._p)("user"),Cs=ws.mapGetters,_s=(0,Ce._p)("cover"),xs=_s.mapGetters,Is=_s.mapState;(function(e){e[e["输入公众号微信号或账号原始ID"]=1]="输入公众号微信号或账号原始ID",e[e["输入AppID或账号原始ID"]=2]="输入AppID或账号原始ID",e[e["输入视频号名称/绑定的微信号"]=3]="输入视频号名称/绑定的微信号",e[e["请输入邮箱"]=4]="请输入邮箱"})(Wt||(Wt={}));var ks={whereJump:{"0_0":"添加跳转的小程序/公众号/视频号/表情页面","0_1":"添加跳转的小程序/公众号/视频号/表情页面","1_2":"添加跳转的视频号/表情页面","1_1":"添加跳转的公众号/视频号/表情页面"},tip:{"0_0":"在封面故事里，可添加跳转小程序、公众号、视频号或表情页面的入口（四选一）；","0_1":"在封面故事里，可添加跳转小程序、公众号、视频号或表情页面的入口（四选一）；","1_2":"在封面故事里，可添加跳转视频号或表情页面的入口（二选一）；","1_1":"在封面故事里，可添加跳转公众号、视频号或表情页面的入口（三选一）；"},tip2:{"0_0":"添加跳转公众号和视频号可在红包详情页显示跳转链接","0_1":"添加跳转公众号和视频号可在红包详情页显示跳转链接","1_2":"添加跳转视频号可在红包详情页显示跳转链接","1_1":"添加跳转公众号和视频号可在红包详情页显示跳转链接"}},Ts=s.ZP.extend({name:"AddMiniApp",components:{SearchFinderDialog:ps,SearchEmotionDialog:ys,ActionAuthQrcode:ns,JumpInfoList:li.Z},data:function(){return{ActionQrCodeStatus:me.WX,wordingsMap:ks,curAction:{jumpType:me.Vo.init,appName:""},whetherJump:!1,radioJumpType:me.Vo.init,JumpTypeName:me.d5,showDialog:!1,showPreviewDialog:!1,querying:"",query:"",info:{},path:"",showError:!1,showPathError:!1,preivewQrcodeUrl:"",hideAuthQrcode:!1,submitLoading:!1,successTimer:0,jumpInfoList:[]}},props:{action:{},setOpenStroy:Function,clearSaveVideo:Function,saveVideo:{type:Object,default:function(){return{}}},orderId:String},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,c;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e,!i.action||!i.action.actionType){t.next=23;break}if(m.l1.checkActionAuthQrcodeStatus(),n=i.action,e.whetherJump=!0,3===n.actionType?(i.curAction.jumpType=2,i.curAction.appName=n.miniAppDetail.appName,i.path=n.miniAppDetail.path):2===n.actionType?(i.curAction.jumpType=1,i.curAction.appName=n.mpAccountDetail.appName):4===n.actionType?(i.curAction.jumpType=3,i.curAction.appName=n.finderProfileDetail.username,i.curAction.username=n.finderProfileDetail.username):5===n.actionType?(i.curAction.jumpType=4,i.curAction.appName=n.emotionProfileDetail.designerUin):6===n.actionType&&(i.curAction.jumpType=4,i.curAction.appName=n.emotionProductDetail.productId),i.radioJumpType=i.curAction.jumpType,2!==n.actionType&&3!==n.actionType){t.next=14;break}return t.next=10,bs.storyGetBizInfo(i.curAction.appName.replace("@app",""),e.radioJumpType);case 10:a=t.sent,a&&0===a.baseResponse.ret&&(s.ZP.set(i.curAction,"headImgUrl",a.headImgUrl),s.ZP.set(i.curAction,"nickname",a.nickname),s.ZP.set(i.curAction,"username",a.username.replace("@app","")),e.updateAction()),t.next=23;break;case 14:if(4!==n.actionType){t.next=22;break}return e.query=n.finderProfileDetail.queryString,t.next=18,bs.storyGetFinderInfo(n.finderProfileDetail.queryString);case 18:o=t.sent,o&&0===o.baseResponse.ret&&(c=o.jumpInfoList.find((function(e){return e.username===n.finderProfileDetail.username})),c&&(e.info=c,s.ZP.set(i.curAction,"headImgUrl",c.headImgUrl),s.ZP.set(i.curAction,"nickname",c.nickname),e.updateAction())),t.next=23;break;case 22:5!==n.actionType&&6!==n.actionType||(e.radioJumpType=4,e.info={nickname:n.showName,headImgUrl:n.showHeadUrl,appName:n.showName},s.ZP.set(i.curAction,"headImgUrl",n.showHeadUrl),s.ZP.set(i.curAction,"nickname",n.showName),e.$emit("setAction",n));case 23:document.onkeydown=function(t){var i="undefined"!=typeof event?window.event:t;if(i&&13==i.keyCode&&e.showDialog)return t.preventDefault(),t.stopPropagation(),e.search(),!1};case 24:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){document.onkeydown=function(){}},watch:{radioJumpType:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function e(){var n,a,o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i,console.log("radioJumpType",n.saveVideo),!(i.radioJumpType==me.Vo.finder&&n.saveVideo&&n.saveVideo.appName&&i.orderId)){e.next=20;break}return e.next=5,bs.storyGetFinderInfo(n.saveVideo.query);case 5:if(a=e.sent,i.curAction.jumpType=3,!a||0!==a.baseResponse.ret){e.next=17;break}if(o=a.jumpInfoList.find((function(e){return e.username===n.saveVideo.username})),!o){e.next=17;break}return i.info=o,s.ZP.set(n.curAction,"headImgUrl",o.headImgUrl),s.ZP.set(n.curAction,"nickname",o.nickname),s.ZP.set(n.curAction,"appName",n.saveVideo.username),i.updateAction(),e.next=17,m.l1.genActionAuthQrcode({action:i.curAction,order_id:i.orderId,vm:i});case 17:n.clearSaveVideo(),e.next=24;break;case 20:if(t!==me.Vo.init){e.next=22;break}return e.abrupt("return");case 22:i.clearAction(),(0,Ht.H)("切换radio删除跳转");case 24:case"end":return e.stop()}}),e)})))()},saveVideo:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e,console.log(i.saveVideo),!(e.radioJumpType==me.Vo.finder&&i.saveVideo&&i.saveVideo.appName&&e.orderId)){t.next=18;break}return t.next=5,bs.storyGetFinderInfo(i.saveVideo.query);case 5:if(n=t.sent,e.curAction.jumpType=3,!n||0!==n.baseResponse.ret){t.next=17;break}if(a=n.jumpInfoList.find((function(t){return t.username===e.info.username})),!a){t.next=17;break}return e.info=a,s.ZP.set(i.curAction,"headImgUrl",a.headImgUrl),s.ZP.set(i.curAction,"nickname",a.nickname),s.ZP.set(i.curAction,"appName",i.saveVideo.username),e.updateAction(),t.next=17,m.l1.genActionAuthQrcode({action:e.curAction,order_id:e.orderId,vm:e});case 17:i.clearSaveVideo();case 18:case"end":return t.stop()}}),t)})))()},path:function(){this.updateAction()},whetherJump:function(e){e&&!this.orderId&&this.$emit("genOrderId"),e||(this.radioJumpType=me.Vo.init),this.setOpenStroy(this.whetherJump)},showDialog:function(){clearTimeout(this.successTimer)},authorizeSuccess:function(e){var t=this;e&&this.showDialog&&(this.successTimer=window.setTimeout((function(){t.closeDialog()}),1e3))}},computed:(0,ve.Z)((0,ve.Z)((0,ve.Z)((0,ve.Z)({},Cs(["principalAccountType","principalType"])),xs(["authorizeSuccess","authorizeWaiting","showAuthQrcode","actionAuthInfoStatus"])),Is(["actionAuthInfo"])),{},{searchPlaceholer:function(){var e=this;return Wt[e.radioJumpType]},typeText:function(){var e=this;return me.d5[e.radioJumpType]}}),methods:{clearAction:function(){this.info={},this.curAction={},this.$emit("setAction",{}),this.$store.commit("cover/CLEAR_ACTION_AUTH_INFO")},deleteEnter:function(){this.query="",this.clearAction(),this.clearSaveVideo(),(0,Ht.H)("删除跳转")},add:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hideAuthQrcode=e,this.showDialog=!0},togglePreviewDialog:function(e){this.showPreviewDialog=e},closeDialog:function(){this.showDialog=!1,this.showError=!1,this.querying="",this.jumpInfoList=[]},search:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.querying){t.next=2;break}return t.abrupt("return");case 2:if(e.showError=!1,e.radioJumpType!=me.Vo.biz&&e.radioJumpType!=me.Vo.miniApp){t.next=8;break}return t.next=6,bs.storyGetBizInfo(e.querying,e.radioJumpType);case 6:i=t.sent,i&&0===i.baseResponse.ret?(e.query=e.querying,e.info=i,e.jumpInfoList=[i],e.showError=!1):(e.info={},e.showError=!0);case 8:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.curAction=Object.assign({},e.info,{appName:e.query||e.curAction.username,jumpType:e.radioJumpType}),e.updateAction(),e.hideAuthQrcode=!1,t.prev=3,e.submitLoading=!0,t.next=7,m.l1.genActionAuthQrcode({action:e.curAction,order_id:e.orderId,vm:e});case 7:e.actionAuthInfoStatus===me.WX.ACTION_QRCODE_AUTOCONFIRMED&&e.closeDialog();case 8:return t.prev=8,e.submitLoading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[3,,8,11]])})))()},handleFinderSearchDialogSubmit:function(e){this.info=e;var t=Object.assign({},e,{jumpType:me.Vo.finder,actionType:me.Vo.finder+1,finderProfileDetail:e,isType:!0});this.curAction=t,this.hideAuthQrcode=!1,this.$emit("setAction",t)},handleEmotionSearchDialogSubmit:function(e){this.curAction=e,this.$emit("setAction",e),this.closeDialog()},updateAction:function(){var e={actionType:this.curAction.jumpType+1,nickname:this.curAction.nickname};if(3===e.actionType)Object.assign(e,{miniAppDetail:{appName:this.curAction.username,path:this.path}}),this.$store.commit("cover/SET_ACTION_AUTH_INFO_MINIAPP_PATH",this.path);else if(2===e.actionType)Object.assign(e,{mpAccountDetail:{appName:this.curAction.username}});else if(4===e.actionType){var t;Object.assign(e,{finderProfileDetail:{username:this.curAction.appName,queryString:null===(t=this.curAction.finderProfileDetail)||void 0===t?void 0:t.queryString}})}Object.assign(this.curAction,e),this.$emit("setAction",e)},preview:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,bs.storyGetMiniAppQrcode(e.curAction.appName.replace("@app",""),e.path);case 2:i=t.sent,i&&0===i.baseResponse.ret?(e.showPreviewDialog=!0,e.preivewQrcodeUrl=i.qrCodeImage):e.showPathError=!0;case 4:case"end":return t.stop()}}),t)})))()}}}),Ss=Ts,As=(0,g.Z)(Ss,Wo,zo,!1,null,"14e631a6",null),Ds=As.exports,Ps=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{attrs:{value:e.value,title:"新版封面",width:655,desc:"包含封面图和挂件素材，挂件可突破红包边框、展示更灵动。"},on:{close:e.close}},[t("img",{staticClass:"w-full",attrs:{src:"https://res.wx.qq.com/t/fed_upload/5195a857-c70e-4456-a4ef-6a5866d8a663/example.png"}})])},Zs=[],Us=s.ZP.extend({components:{},props:{value:Boolean},data:function(){return{}},computed:{},methods:{close:function(){this.$emit("input",!1)}}}),Es=Us,Rs=(0,g.Z)(Es,Ps,Zs,!1,null,"1e399dfc",null),Ms=Rs.exports,Ls=i(9669),Fs=i.n(Ls),Ns=function(){var e,t=this,i=t._self._c;t._self._setupProxy;return t.errorInfo.msg||t.errorInfo.type?i("div",{staticClass:"CoverPicUploadError-Component"},[null!==(e=t.errorInfo.type)&&void 0!==e&&e.startsWith("transparent_area")?i("div",{staticClass:"error-msg icon-err"},[t._v(" 挂件进入不可编辑区， "),this.errorInfo.file?i("span",{staticClass:"btn-detail",attrs:{href:"javascript:;",role:"button"},on:{click:t.openDialog}},[t._v(" 查看详情 "),i("svg-icon",{staticClass:"icon-detail",attrs:{name:"icon-detail"}})],1):t._e()]):i("div",{staticClass:"error-msg icon-err",domProps:{innerHTML:t._s(t.errorInfo.msg)}}),i("mp-dialog",{attrs:{title:"素材错误详情"},on:{"visible-change":t.handleDialogVisibleChange},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"detial-item"},[i("div",{staticClass:"label"},[t._v("错误原因：")]),i("div",{staticClass:"value"},[t._v("挂件进入不可编辑区")])]),i("div",{staticClass:"img-detial"},[t.pic?i("div",{class:["img-wrapper","transparent_area_cover_widget"===t.type?"cover-widget-pic":"bubble-widget-pic"]},[i("img",{attrs:{src:t.pic}}),i("p",{staticClass:"ban-edit-text"},[t._v("不可编辑区")])]):t._e(),i("div",{staticClass:"img-tips"},[t._v("素材错误图示")])])])])],1):t._e()},Os=[],Bs=s.ZP.extend({props:{errorInfo:{type:Object,default:function(){return{type:"",msg:"",file:null}}}},data:function(){return{pic:"",widgetUrl:"",visible:!1}},computed:{fileSize:function(){var e=this.errorInfo.file;return e?ai(e.size).toUpperCase():0},fileName:function(){var e=this.errorInfo.file;return e?e.name:""},type:function(){return this.errorInfo.type}},watch:{"errorInfo.file":{handler:function(){this.pic=""}}},methods:{mergePic:function(){var e=this;if(!this.pic){var t=.5,i=[],n={};if("transparent_area_cover_widget"===this.type){var a=Xe.g$.width,r=Xe.g$.sourceHeight;i=[{url:this.widgetUrl,width:a*t,height:r*t},{url:"https://res.wx.qq.com/t/fed_upload/ed4ee2d7-84d0-45e3-886c-a6bdd40a966c/valid_widget_cover.png",width:a*t,height:r*t}],n=new Xe.mc(i,{width:a*t,height:r*t})}else if("transparent_area_bubble_widget"===this.type){var o=Xe._N.width,s=Xe._N.height;i=[{url:this.widgetUrl,width:o*t,height:s*t},{url:"https://res.wx.qq.com/t/fed_upload/ed4ee2d7-84d0-45e3-886c-a6bdd40a966c/valid_widget_bubble.png",width:o*t,height:s*t}],n=new Xe.mc(i,{width:o*t,height:s*t})}n.outputImg().then((function(t){e.pic=t}))}},handleWidget:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.errorInfo.file,!i){t.next=7;break}return t.next=4,(0,_e.sT)(i);case 4:n=t.sent,e.widgetUrl=n,e.mergePic();case 7:case"end":return t.stop()}}),t)})))()},handleDialogVisibleChange:function(e){e&&this.handleWidget()},openDialog:function(){this.visible=!0}}}),qs=Bs,Qs=(0,g.Z)(qs,Ns,Os,!1,null,"dfe09240",null),js=Qs.exports,Hs=i(80579),Gs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"PreviewCover flex flex-col",style:{"padding-left":e.isAtmosphereCover?"":"var(--preview-padding-x)","padding-right":e.isAtmosphereCover?"":"var(--preview-padding-x)"}},[t("mp-dropdown",{staticClass:"preview-cover-dropdown mx-auto my-2",attrs:{type:"default",options:e.options,trigger:"hover"},on:{select:e.onSelect},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.selectedType,expression:"selectedType === 1"}]},[t("div",{staticClass:"preview-area"},[t("base-info-preview",{directives:[{name:"show",rawName:"v-show",value:"bubble"===e.activeType,expression:"activeType === 'bubble'"}],staticClass:"preview-pic",attrs:{loading:e.baseInfoLoading,packetName:e.packetName,logoUrl:e.logoUrl,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,bubbleImageDynamicUrl:e.bubbleImageDynamicUrl,widgetUrl:e.senderC2cWidgetImageUrl,autoplay:1===e.selectedType&&"bubble"===e.activeType}}),t("corp-info-preview",{directives:[{name:"show",rawName:"v-show",value:"corp"===e.activeType,expression:"activeType === 'corp'"}],staticClass:"preview-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName,loading:e.corpInfoLoading,corpLogoDynamicUrl:e.corpLogoDynamicUrl,autoplay:1===e.selectedType&&"corp"===e.activeType}}),e.storyMediaList.length?e._l(e.storyMediaList,(function(i,n){return t("div",{directives:[{name:"show",rawName:"v-show",value:"story"===e.activeType&&e.activeIndex===n,expression:"activeType === 'story' && activeIndex === index"}],key:i.mediaUrl},[t("story-preview",{staticClass:"story-preview",attrs:{cover:e.cover,"story-info":i,autoplay:!0,isActive:"story"===e.activeType&&n===e.activeIndex}})],1)})):e._e()],2),t("div",{staticClass:"thumb-list1 relative mx-auto flex",staticStyle:{width:"var(--thumb-list-width)"}},[t("mask-icon",{directives:[{name:"show",rawName:"v-show",value:"left"===e.showBtn&&e.showDirectionBtn,expression:"showBtn === 'left' && showDirectionBtn"}],staticClass:"btn-prev absolute left-0 top-1/2 mt-[-8px] h-4 w-4 cursor-pointer",attrs:{name:"leftbtn"},nativeOn:{click:function(t){return e.goNavEnd("left")}}}),t("div",{ref:"coverStyleThumbList",staticClass:"thumb-list w-[195px]",class:e.showDirectionBtn?"justify-start":"justify-center"},[t("div",{staticClass:"thumb-item",class:{"thumb-active":"bubble"===e.activeType},on:{click:function(t){return e.triggerPreview("bubble")}}},[t("base-info-preview",{staticClass:"thumb-item-pic",attrs:{logoUrl:e.logoUrl,packetName:e.packetName,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,widgetUrl:e.senderC2cWidgetImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"corp"===e.activeType},on:{click:function(t){return e.triggerPreview("corp")}}},[t("corp-info-preview",{staticClass:"thumb-item-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName}})],1),e.storyMediaList.length?e._l(e.storyMediaList,(function(i,n){return t("div",{key:i.mediaUrl,staticClass:"preview-thumb-item",class:{"thumb-active":"story"===e.activeType&&e.activeIndex===n},on:{click:function(t){return e.triggerPreview("story",n)}}},[t("story-preview",{staticClass:"story-thumb-preview",attrs:{cover:e.cover,width:22,height:47,"story-info":i}})],1)})):e._e()],2),t("mask-icon",{directives:[{name:"show",rawName:"v-show",value:"right"===e.showBtn&&e.showDirectionBtn,expression:"showBtn === 'right' && showDirectionBtn"}],staticClass:"btn-next absolute right-0 top-1/2 mt-[-8px] h-4 w-4 cursor-pointer",attrs:{name:"rightbtn"},nativeOn:{click:function(t){return e.goNavEnd("right")}}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.selectedType,expression:"selectedType === 2"}]},[t("div",{staticClass:"preview-area"},[t("cover-info-preview",{directives:[{name:"show",rawName:"v-show",value:"cover"===e.activeType,expression:"activeType === 'cover'"}],staticClass:"preview-pic",attrs:{coverImageDynamicType:e.coverImageDynamicType,coverImageDynamicUrl:e.coverImageDynamicUrl,loading:e.coverInfoLoading,coverUrl:e.receiveImageUrl,widgetUrl:e.recWidgetImageUrl,autoplay:2===e.selectedType&&"cover"===e.activeType}}),t("base-info-preview",{directives:[{name:"show",rawName:"v-show",value:"bubble"===e.activeType,expression:"activeType === 'bubble'"}],staticClass:"preview-pic",attrs:{packetName:e.packetName,logoUrl:e.logoUrl,loading:e.baseInfoLoading,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,bubbleImageDynamicUrl:e.bubbleImageDynamicUrl,widgetUrl:e.senderC2cWidgetImageUrl,autoplay:2===e.selectedType&&"bubble"===e.activeType}}),t("cover-detail-img",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.activeType,expression:"activeType === 'detail'"}],staticClass:"preview-pic no-border",attrs:{actionList:e.actionList,mediaInfo:e.firstStoryMedia,loading:e.coverDetailLoading,picUrl:e.detailImageUrl,detailImageDynamicUrl:e.detailImageDynamicUrl,autoplay:2===e.selectedType&&"detail"===e.activeType}}),t("corp-info-preview",{directives:[{name:"show",rawName:"v-show",value:"corp"===e.activeType,expression:"activeType === 'corp'"}],staticClass:"preview-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName,loading:e.corpInfoLoading,corpLogoDynamicUrl:e.corpLogoDynamicUrl,autoplay:2===e.selectedType&&"corp"===e.activeType}})],1),t("div",{staticClass:"thumb-list justify-center"},[t("div",{staticClass:"thumb-item",class:{"thumb-active":"cover"===e.activeType},on:{click:function(t){return e.triggerPreview("cover")}}},[t("cover-info-preview",{staticClass:"thumb-item-pic",attrs:{coverUrl:e.receiveImageUrl,widgetUrl:e.recWidgetImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"bubble"===e.activeType},on:{click:function(t){return e.triggerPreview("bubble")}}},[t("base-info-preview",{staticClass:"thumb-item-pic",attrs:{logoUrl:e.logoUrl,packetName:e.packetName,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,widgetUrl:e.senderC2cWidgetImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"detail"===e.activeType},on:{click:function(t){return e.triggerPreview("detail")}}},[t("cover-detail-img",{staticClass:"thumb-item-pic",attrs:{actionList:e.actionList,mediaInfo:e.firstStoryMedia,picUrl:e.detailImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"corp"===e.activeType},on:{click:function(t){return e.triggerPreview("corp")}}},[t("corp-info-preview",{staticClass:"thumb-item-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName}})],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:3===e.selectedType,expression:"selectedType === 3"}],staticClass:"flex flex-col items-center"},[e.showCoverStory&&!e.storyMediaList.length?t("story-preview",{staticClass:"story-preview",attrs:{cover:e.cover,showCoverStory:e.showCoverStory}}):e.storyMediaList.length?[t("div",{directives:[{name:"show",rawName:"v-show",value:"prestory"===e.activeType,expression:"activeType === 'prestory'"}],staticClass:"preview-area"},e._l(e.storyMediaList,(function(i,n){return t("cover-detail-img",{directives:[{name:"show",rawName:"v-show",value:n===e.activeIndex,expression:"index === activeIndex"}],key:i.mediaUrl,staticClass:"preview-pic no-border",attrs:{actionList:e.actionList,"media-info":i,autoplay:n===e.activeIndex}})})),1),e._l(e.storyMediaList,(function(i,n){return t("story-preview",{directives:[{name:"show",rawName:"v-show",value:"story"===e.activeType&&n===e.activeIndex,expression:"activeType === 'story' && index === activeIndex"}],key:i.mediaUrl,staticClass:"story-preview",attrs:{"story-info":i,cover:e.cover,autoplay:!0,isActive:"story"===e.activeType&&n===e.activeIndex}})}))]:t("div",{staticClass:"story-empty"},[e._v("未添加封面故事")]),t("div",{directives:[{name:"show",rawName:"v-show",value:"prestory"===e.activeType,expression:"activeType === 'prestory'"}],staticClass:"thumb-list mb-1 mt-2 justify-center"},e._l(e.storyMediaList,(function(i,n){return t("div",{key:i.mediaUrl,staticClass:"thumb-item",class:{"thumb-active":e.activeIndex===n},on:{click:function(t){return e.triggerPreview("prestory",n)}}},[t("cover-detail-img",{staticClass:"w-[22px]",attrs:{actionList:e.actionList,"media-info":i}})],1)})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:"story"===e.activeType,expression:"activeType === 'story'"}],staticClass:"mt-2 flex justify-center"},e._l(e.storyMediaList,(function(i,n){return t("div",{key:i.mediaUrl,staticClass:"preview-thumb-item",class:{"thumb-active":e.activeIndex===n},on:{click:function(t){return e.triggerPreview("story",n)}}},[t("story-preview",{staticClass:"story-thumb-preview",attrs:{"story-info":i,width:22,height:47,cover:e.cover}})],1)})),0),e.storyMediaList.length?t("div",{staticClass:"trigger-story-type mt-4 flex items-center justify-center"},[t("span",{staticClass:"text-opblack_2"},[e._v(e._s("story"===e.activeType?"下拉后预览效果":"下拉前预览效果"))]),t("span",{staticClass:"weui-link ml-2 inline-block select-none",on:{click:e.triggerStoryType}},[e._v("切换")])]):e._e()],2),e.isAtmosphereCover?t("div",{staticClass:"my-2 w-[330px] text-center text-opblack_2"},[t("mask-icon",{staticClass:"h-4 w-4 align-[-3px] text-yellow_0",attrs:{name:"info-filled"}}),e._v(" 平台暂不支持预览氛围素材效果，可在手机预览。 ")],1):e._e()],1)},Ws=[],zs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative h-full w-full"},[e.loading?t("preview-loading",{staticClass:"z-20"}):e._e(),t(e.img?"img":"span",{tag:"component",staticClass:"relative z-10 h-full w-full",attrs:{src:e.img,tag:"img"}}),e.bubbleImageDynamicUrl?t("div",{staticClass:"absolute left-[19.53%] top-[14.97%] h-[10.65%] w-[63.06%]"},[t("pag-display",{ref:"bubblePag1",staticClass:"pag-display",attrs:{name:"baseinfopag1",url:e.bubbleImageDynamicUrl,autoplay:e.autoplay,loop:!0,autoInit:e.autoplay,showType:"preview"}})],1):e._e()],1)},Vs=[],Js=(0,Ce._p)("cover"),Ks=Js.mapState,Ys=s.ZP.extend({components:{PagDisplay:ot.Z,PreviewLoading:pt},props:{loading:Boolean,cover:{type:Object,default:function(){return{}}},packetName:{type:String,default:"微信"},bubbleImageUrl:{type:String,default:""},bubbleImageDynamicUrl:String,widgetUrl:String,logoUrl:String,autoplay:Boolean,scale:{type:Number,default:.5}},data:function(){return{img:"",version:0,debounceGenerateAlicen:null}},computed:(0,ve.Z)({},Ks(["showEditDialog","previewPagReinit"])),mounted:function(){this.debounceGenerateAlicen=(0,kt.debounce)(this.generateAlien,500),this.debounceGenerateAlicen()},watch:{previewPagReinit:function(e){var t=this.$refs.bubblePag1;e.startsWith("bubble")&&this.autoplay&&this.bubbleImageDynamicUrl&&(console.log("bubble pag reinit",e),null===t||void 0===t||t.initPag())},showEditDialog:function(e){var t=this.$refs.bubblePag1;e?null===t||void 0===t||t.destroy():this.autoplay&&(null===t||void 0===t||t.initPag())},packetName:function(){this.debounceGenerateAlicen()},bubbleImageUrl:function(){this.debounceGenerateAlicen()},bubbleImageDynamicUrl:function(){this.debounceGenerateAlicen()},widgetUrl:function(){this.debounceGenerateAlicen()},logoUrl:function(){this.debounceGenerateAlicen()},autoplay:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=t.$refs.bubblePag1,e?console.log("baseinfopag active"):null===n||void 0===n||n.destroy();case 2:case"end":return i.stop()}}),i)})))()}},methods:{generateAlien:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p,v,m,f;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="-apple-system,system-ui,BlinkMacSystemFont,PingFang SC,SF Pro Text,Helvetica Neue,Helvetica,Hiragino Sans GB,Heiti SC,Arial,Microsoft YaHei UI,Microsoft YaHei,sans-serif",e.version+=1,a=e.version,o="https://res.wx.qq.com/t/fed_upload/7aeb6a61-b994-41ba-be8a-6579c9d506a4/default-bubble.png",s="https://res.wx.qq.com/t/fed_upload/84ab72ba-7ab9-4ab6-befe-a5dfdb165bec/single-bubble.png",c=[{url:s,width:1080,height:2337}],l=[],u={url:e.bubbleImageUrl||o,width:681,height:249,x:211,y:350},d={text:e.packetName,right:263,y:St(e.packetName)?555:548,style:{color:"rgba(255, 255, 255, 0.5)"},textAlign:"right",font:"27px ".concat(n)},e.bubbleImageDynamicUrl||l.push(u),l.push(d),(i=c).unshift.apply(i,l),e.widgetUrl&&(p={url:e.widgetUrl,width:454,height:364,x:378,y:293},{url:e.widgetUrl,width:454,height:364,x:440,y:751},c.push(p)),e.logoUrl&&(c=c.filter((function(t){return t.text!==e.packetName})),v={url:e.logoUrl,width:50,height:50,x:758,y:537,radius:30},{url:e.logoUrl,width:50,height:50,x:823,y:996,radius:30},c.push(v)),m=new Xe.mc(c,{width:1080,height:2337}),t.next=17,m.outputImg();case 17:if(f=t.sent,a===e.version){t.next=20;break}return t.abrupt("return");case 20:e.img=f,e.$emit("update",f);case 22:case"end":return t.stop()}}),t)})))()}}}),Xs=Ys,$s=(0,g.Z)(Xs,zs,Vs,!1,null,"0d0f2cc6",null),ec=$s.exports,tc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative h-full w-full"},[e.loading?t("preview-loading"):e._e(),e.coverImageDynamicUrl?t("div",{staticClass:"dynamic-cover h-full w-full"},[t("div",{staticClass:"relative w-[85%]",style:e.dynamicCoverWrapperStyle},[t("pag-display",{ref:"pagDisplay",staticClass:"pag-display",attrs:{name:"coverinfopag",url:e.coverImageDynamicUrl,autoplay:e.autoplay,autoInit:e.autoplay,loop:!0,showType:"preview"}}),t("div",{staticClass:"pic-bless"}),t("img",{staticClass:"absolute left-1/2 top-[16.52%] w-[66.73%]",staticStyle:{transform:"translateX(-50%)"},attrs:{src:e.blessPicUrl}}),t("img",{staticClass:"absolute left-1/2 w-[32.16%]",staticStyle:{transform:"translateX(-50%)"},style:{top:2===e.coverImageDynamicType?"67.2%":"69.2%"},attrs:{src:e.openIconActiveUrl}})],1)]):t("div",[t(e.img?"img":"span",{tag:"component",staticClass:"h-full w-full",attrs:{src:e.img,tag:"img"}})],1)],1)},ic=[],nc=(0,Ce._p)("cover"),ac=nc.mapState,rc=s.ZP.extend({components:{PagDisplay:ot.Z,PreviewLoading:pt},props:{loading:Boolean,coverImageDynamicType:Number,coverImageDynamicUrl:String,coverUrl:String,widgetUrl:String,autoplay:Boolean},data:function(){return{img:"",openIconActiveUrl:Xe.is.open_icon_active,blessPicUrl:"https://res.wx.qq.com/t/fed_upload/ad0fd9c0-91ed-4b8d-94b3-5334ed8e4acc/bless.png",debounceGenerateAlicen:null}},computed:(0,ve.Z)((0,ve.Z)({},ac(["showEditDialog","previewPagReinit"])),{},{dynamicCoverWrapperStyle:function(){var e={width:"85%",left:"50%",transform:"translateX(-50%)"};return 1===this.coverImageDynamicType?(0,ve.Z)({top:"15.13%",height:"65.39%"},e):2===this.coverImageDynamicType?(0,ve.Z)({top:"10.17%",height:"70.48%"},e):{}}}),mounted:function(){this.debounceGenerateAlicen=Tt()(this.generateAlien,500),this.debounceGenerateAlicen()},watch:{previewPagReinit:function(e){var t=this.$refs.pagDisplay;e.startsWith("cover")&&this.autoplay&&this.coverImageDynamicUrl&&(console.log("cover pag reinit",e),null===t||void 0===t||t.initPag())},showEditDialog:function(e){var t=this.$refs.pagDisplay;e?null===t||void 0===t||t.destroy():this.autoplay&&(null===t||void 0===t||t.initPag())},coverUrl:function(){this.debounceGenerateAlicen()},widgetUrl:function(){this.debounceGenerateAlicen()},autoplay:function(e){var t=this.$refs.pagDisplay;e?console.log("coverinfopag isactive"):null===t||void 0===t||t.destroy()}},methods:{generateAlien:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Xe.g$.width,n=Xe.g$.height,a=Xe.g$.sourceHeight,o=Xe.g$.coverOffsetX,s=Xe.g$.coverOffsetY,c=Xe.g$.coverRadius,l=a-(Xe.mt+48),u=[{url:"https://res.wx.qq.com/t/fed_upload/4e47a13b-34d8-4655-b43b-973600fd92c2/bg-opening-cover.png",width:1170,height:2534},{url:e.coverUrl,width:Xe.TE.width,height:Xe.TE.receiveHeight,x:o+58,y:s+251,radius:c},{url:e.blessPicUrl,width:674,height:228,x:247,y:615},{url:Xe.is.hb_bottom_opengray,width:Xe.TE.width,height:Xe.mt,x:o+58,y:l+251}],e.widgetUrl&&u.push({url:e.widgetUrl,width:i,height:n,x:58,y:251}),d=new Xe.mc(u,{width:1170,height:2534}),t.next=7,d.outputImg();case 7:p=t.sent,e.img=p,e.$emit("update",p);case 10:case"end":return t.stop()}}),t)})))()}}}),oc=rc,sc=(0,g.Z)(oc,tc,ic,!1,null,"72110366",null),cc=sc.exports,lc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{style:{width:"".concat(e.width,"px"),height:"".concat(e.height,"px")}},[t("div",{ref:"StoryPreview",staticClass:"StoryPreview",style:e.storyPreviewStyle},[e.isPicStory||e.noStory?t(e.img?"img":"span",{ref:"story",tag:"component",staticClass:"story-wrapper-img",attrs:{src:e.img,tag:"img"}}):t("img",{staticClass:"story-wrapper-img",attrs:{src:"https://res.wx.qq.com/t/fed_upload/2e93c8ca-8517-4438-b303-41ba9870f2ec/make_story_bg.png",alt:""}}),e.storyInfo.mediaUrl?t("video",{ref:"videoStory",staticClass:"story-video",attrs:{autoplay:e.autoplay,loop:"",muted:"",src:e.storyInfo.mediaUrl},domProps:{muted:!0},on:{loadeddata:e.handleVideoStyle}}):e._e(),t("div",{staticClass:"story-info-wrapper",class:e.actionType?"bottom-[600px]":"bottom-[667px]"},[t("div",{staticClass:"story-description"},[e._v(e._s(e.storyDescription))]),t("div",{staticClass:"base-info"},[e.logoUrl?t("img",{staticClass:"logo",attrs:{src:e.logoUrl,alt:""}}):e._e(),e.packetName?t("span",{staticClass:"packet-name"},[e._v(e._s(e.packetName))]):e._e()]),e.actionType?t("div",{staticClass:"btn-jump"},[e._v("进入"+e._s(e.CoverActionTypeText[e.actionType]))]):e._e()])],1)])},uc=[],dc=1080,pc=2337,vc=1799,mc=s.ZP.extend({components:{},props:{cover:{type:Object,default:function(){return{}}},storyInfo:{type:Object,default:function(){return{}}},autoplay:Boolean,width:Number,isActive:Boolean,showCoverStory:Boolean},data:function(){return{CoverActionTypeText:me.pK,img:"",version:0}},computed:{noStory:function(){return!this.storyInfo.mediaType},height:function(){return this.width*(pc/dc)},scale:function(){return this.width?this.width/dc:1},storyPreviewStyle:function(){return this.width?{"background-image":"url(".concat(this.isVideoStory?this.fuzzyImgUrl:"",")"),transform:"scale(".concat(this.scale,")")}:{"background-image":"url(".concat(this.isVideoStory?this.fuzzyImgUrl:"",")")}},storyDescription:function(){return this.cover.packetMaterial.storyDescription},logoUrl:function(){var e;return null===(e=this.cover)||void 0===e?void 0:e.brandLogo.mediaUrl},packetName:function(){return this.cover.packetName},actionType:function(){var e,t,i;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.actionList)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.actionType},isVideoStory:function(){return 2===this.storyInfo.mediaType},isPicStory:function(){return 1===this.storyInfo.mediaType},storyThumbPic:function(){return this.noStory?"https://res.wx.qq.com/t/fed_upload/20b733a9-29e5-4eb5-a567-f539960759b1/placeholder.png":this.isPicStory?this.storyInfo.mediaUrl:this.storyInfo.mediaThumbnailUrl},fuzzyImgUrl:function(){return this.storyInfo.mediaFuzzyUrl}},watch:{isActive:function(e){e?this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.play():this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.pause()},showCoverStory:function(){this.generateAlien()}},mounted:function(){this.generateAlien(),this.handleVideoStyle(),this.isActive&&this.autoplay&&this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.play()},methods:{handleVideoStyle:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isPicStory&&e.storyInfo.mediaUrl){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,rt.$p)(e.storyInfo.mediaUrl);case 4:i=t.sent,n=i.width,a=i.height,o=e.$refs.videoStory,s=e.$refs.StoryPreview,n>a?(c=dc*a/n,o&&(o.style.top="".concat((pc-c)/2/pc*100,"%"),o.style.width="100%",o.style.transform="translateY(-50%)"),s&&(s.style.backgroundSize="auto 77%")):(o&&(l=vc*n/a,o.style.width="".concat(l/dc*100,"%"),o.style.left="".concat((dc-l)/2/dc*100,"%")),s&&(s.style.backgroundSize="100% auto"));case 9:case"end":return t.stop()}}),t)})))()},generateAlien:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p,v;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isPicStory&&!e.noStory){t.next=19;break}return t.next=3,(0,_e.t$)(e.storyThumbPic);case 3:return i=t.sent,n=i.width,a=i.height,o=0,s=0,c=dc,l=vc,n>a?(u=dc*a/n,o=(vc-u)/2):(c=n/a*l,s=(dc-c)/2),d=[{url:e.fuzzyImgUrl,x:0,y:0,width:dc,height:vc},{url:e.storyThumbPic,x:s,y:o,width:c,height:l},{url:"https://res.wx.qq.com/t/fed_upload/2e93c8ca-8517-4438-b303-41ba9870f2ec/make_story_bg.png",width:dc,height:pc}],d=d.filter((function(e){return!!e.url})),p=new Xe.mc(d,{width:dc,height:pc}),t.next=15,p.outputImg();case 15:return v=t.sent,e.img=v,e.$emit("update",v),t.abrupt("return");case 19:case"end":return t.stop()}}),t)})))()}}}),fc=mc,hc=(0,g.Z)(fc,lc,uc,!1,null,"280b70e6",null),gc=hc.exports,yc=[{label:"基本信息预览",value:1},{label:"封面样式预览",value:2},{label:"封面故事预览",value:3}],bc=s.ZP.extend({components:{BaseInfoPreview:ec,CoverInfoPreview:cc,CoverDetailImg:_t,CorpInfoPreview:Mt,StoryPreview:gc},props:{cover:{type:Object,default:function(){return{}}},cropedImgList:{type:Object,default:function(){return{}}},showCoverStory:Boolean,coverImageDynamicType:Number,baseInfoLoading:Boolean,corpInfoLoading:Boolean,coverDetailLoading:Boolean,coverInfoLoading:Boolean,isAtmosphereCover:Boolean},data:function(){return{coverToolPics:Xe.is,options:yc,activeIndex:0,selectedType:1,activeType:"bubble",coverPreviewBase64:"",bubblePreviewBase64:"",corpPreviewBase64:"",showBtn:"right"}},computed:{showDirectionBtn:function(){return this.storyDetailList.length>2},storyDetailList:function(){return this.cover.packetMaterial.storyDetailList},storyMediaList:function(){return this.storyDetailList.map((function(e){return e.media}))},firstStoryMedia:function(){var e;return(null===(e=this.storyMediaList)||void 0===e?void 0:e[0])||{}},coverImageDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.coverImageDynamic)||void 0===t?void 0:t.mediaUrl},receiveImageUrl:function(){return this.cropedImgList.receiveImageUrl||Xe.is.default_normal_cover_opengray},recWidgetImageUrl:function(){var e,t,i;return null===(e=this.cover)||void 0===e||null===(t=e.packetMaterial)||void 0===t||null===(i=t.recWidgetImage)||void 0===i?void 0:i.mediaUrl},senderC2cWidgetImageUrl:function(){var e,t,i;return(null===(e=this.cover)||void 0===e||null===(t=e.packetMaterial)||void 0===t||null===(i=t.senderC2cWidgetImage)||void 0===i?void 0:i.mediaUrl)||""},bubbleImageUrl:function(){return this.cropedImgList.bubbleImageUrl},bubbleImageDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.bubbleImageDynamic)||void 0===t?void 0:t.mediaUrl},corpImageUrl:function(){return this.cropedImgList.corpImageUrl},corpLogoDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.corpLogoDynamic)||void 0===t?void 0:t.mediaUrl},detailImageUrl:function(){return this.cropedImgList.detailImageUrl},detailImageDynamicUrl:function(){var e,t;return null===(e=this.cover.packetMaterial)||void 0===e||null===(t=e.detailImageDynamic)||void 0===t?void 0:t.mediaUrl},packetName:function(){return this.cover.packetName},logoUrl:function(){return this.cover.brandLogo.mediaUrl},packetMaterial:function(){return this.cover.packetMaterial},actionList:function(){return this.packetMaterial.actionList||[]}},methods:{goNavEnd:function(e){var t=this.$refs.coverStyleThumbList;"left"===e&&(t.scroll({left:0,behavior:"smooth"}),this.showBtn="right"),"right"===e&&(t.scroll({left:9999,behavior:"smooth"}),this.showBtn="left")},triggerStoryType:function(){this.activeType="story"===this.activeType?"prestory":"story"},onSelect:function(e){1===e.value&&(this.activeType="bubble"),2===e.value&&(this.activeType="cover"),3===e.value&&(this.activeType="story")},triggerPreview:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.activeType=e,this.activeIndex=t},triggerToPreview:function(e,t,i){this.selectedType=e,this.activeType=t,"number"===typeof i&&(this.activeIndex=i)}}}),wc=bc,Cc=(0,g.Z)(wc,Gs,Ws,!1,null,"79c86c48",null),_c=Cc.exports,xc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"source-media-editor-dialog",attrs:{value:e.value,width:1120,title:"裁剪封面图素材",desc:"封面图需裁剪为957×1278或等比例尺寸".concat(e.isPicCropper?"":"；时长需裁剪为1s至3秒")},on:{"visible-change":e.handleVisibleChange,close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"flex justify-center"},[t("a-space",[t("mp-button",{attrs:{type:"warn"},on:{click:e.cancel}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isPicCropper&&!e.frameListReady},on:{click:e.sureEditor}},[e._v("确定")])],1)],1)]},proxy:!0}])},[e.isPicCropper?t("div",[t("div",{staticClass:"mx-auto box-content flex items-center justify-center rounded-2xl bg-opblack_2 p-9 align-middle",style:{width:"".concat(e.picWorkAreaWidth,"px"),height:"".concat(e.picWorkAreaHeight,"px")}},[t("div",{style:{width:"".concat(e.picCropperWidth,"px"),height:"".concat(e.picCropperHeight,"px")}},[t("img",{ref:"sourceCropper",staticClass:"h-full w-full",attrs:{src:e.cropperSourceImgInfo.objectUrl}})])])]):t("media-editor",{ref:"mediaEditor",attrs:{editorType:"sourceMaterial",fileType:e.fileType,fileUrl:e.fileUrl,ratios:e.ratios,workAreaWidth:593,workAreaHeight:503,frameLineWidth:574,frameLineHeight:87},on:{cropChange:e.handleCropChange,changePoint:e.handleChangePoint,frameLineReady:e.handleFrameListReady}})],1)},Ic=[],kc=s.ZP.extend({components:{MediaEditor:so},props:{value:Boolean,fileUrl:String,fileName:String,fileType:Number,cropperSourceImgInfo:{type:Object,default:function(){return{objectUrl:"",name:""}}}},data:function(){return{cropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},timeInfo:{startTime:0,duration:-1,action:""},sourceCropper:null,sourceMoveXY:{},picWorkAreaWidth:599,picWorkAreaHeight:497,picCropperWidth:0,picCropperHeight:0,ratios:{"957:1278":{name:"957:1278",label:"957:1278",ratio:957/1278,hidden:!1,original:!0}},loading:!1,isInit:!1,frameListReady:!1}},computed:{isPicCropper:function(){return!!this.cropperSourceImgInfo.objectUrl}},watch:{fileUrl:function(e){e&&(this.isInit=!1,this.frameListReady=!1)},cropperSourceImgInfo:{handler:function(){this.isInit=!1,this.sourceMoveXY={}},deep:!0}},methods:{handleFrameListReady:function(){this.frameListReady=!0},cancel:function(){this.$emit("input",!1)},handleVisibleChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e||t.isInit){i.next=6;break}return i.next=3,t.$nextTick();case 3:t.isPicCropper?t.initCropper():(t.$refs.mediaEditor.initMedia(),null===(n=t.sourceCropper)||void 0===n||n.destroy(),t.isInit=!0),i.next=7;break;case 6:null===(a=t.$refs.mediaEditor)||void 0===a||a.unload();case 7:case"end":return i.stop()}}),i)})))()},initCropper:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:if(e.$refs.sourceCropper instanceof HTMLImageElement){t.next=4;break}return t.abrupt("return");case 4:return e.sourceCropper&&(null===(i=e.sourceCropper)||void 0===i||i.destroy()),t.next=7,(0,_e.t$)(e.cropperSourceImgInfo.objectUrl);case 7:return n=t.sent,a=n.width,o=n.height,s=a/o,e.picCropperHeight=Math.min(e.picWorkAreaHeight,o),e.picCropperHeight*s>e.picWorkAreaWidth&&(e.picCropperHeight=e.picWorkAreaWidth/s),e.picCropperWidth=e.picCropperHeight*s,t.next=16,e.$nextTick();case 16:e.sourceCropper=new(pr())(e.$refs.sourceCropper,{viewMode:3,guides:!1,aspectRatio:957/1278,scalable:!0,autoCropArea:.99,minContainerHeight:30,minContainerWidth:50,minCropBoxWidth:100,zoomable:!1,crop:function(t){var i,n,a=t.detail,r=a.x,o=a.y,s=a.width,c=a.height;!e.sourceMoveXY||null!==(i=e.sourceMoveXY)&&void 0!==i&&i.x||null!==(n=e.sourceMoveXY)&&void 0!==n&&n.y||(e.sourceMoveXY.x=r,e.sourceMoveXY.y=o,e.sourceMoveXY.width=s,e.sourceMoveXY.height=c),e.sourceMoveXY&&(e.sourceMoveXY.movingX=r,e.sourceMoveXY.movingY=o,e.sourceMoveXY.movingWidth=s,e.sourceMoveXY.movingHeight=c)},ready:function(){var t;if(Number(null===(t=e.sourceMoveXY)||void 0===t?void 0:t.width)>=0){var i=e.sourceMoveXY,n=i.x,a=i.y,r=i.width,o=i.height;e.sourceCropper.setData({x:n,y:a,width:r,height:o})}}});case 17:case"end":return t.stop()}}),t)})))()},handleCropChange:function(e){this.cropInfo=e.cropInfo},handleChangePoint:function(e){this.timeInfo=e.timeInfo},surePicEditor:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,i="",n=e.sourceCropper.getCroppedCanvas(),i=n.width!==Xe.TE.width||n.height!==Xe.TE.height?(0,Hs.v)(n,{width:Xe.TE.width,height:Xe.TE.height}):e.sourceCropper.getCroppedCanvas().toDataURL("image/jpeg"),a=(0,_e.KG)(i),t.next=9,(0,Hs.U)(a,{image_name:"croped_source.jpeg"});case 9:if(o=t.sent,0!==(null===o||void 0===o?void 0:o.baseResponse.ret)){t.next=15;break}e.$emit("surePic",{dataUrl:i,name:e.cropperSourceImgInfo.name,uid:+Date.now(),size:a.size,percent:100,status:"done",originFileObj:{file:a},response:o,url:o.url}),e.$emit("input",!1),t.next=16;break;case 15:throw new Error("图片上传失败");case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](2),console.info("--- ~ surePicEditor ~ err:",t.t0),e.errorTip("图片上传失败，请重试");case 22:return t.prev=22,e.loading=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[2,18,22,25]])})))()},sureDynamicEditor:function(){if(Number(this.timeInfo.duration)>3.5)throw this.errorTip("选择时间段不能超过3秒"),new Error("sureDynamicEditor valid error")},sureEditor:function(){if(this.isPicCropper){var e=this.sourceMoveXY,t=e.movingX,i=e.movingY,n=e.movingWidth,a=e.movingHeight;this.sourceMoveXY.x=t,this.sourceMoveXY.y=i,this.sourceMoveXY.width=n,this.sourceMoveXY.height=a,this.surePicEditor()}else try{if(!this.frameListReady)return;this.sureDynamicEditor(),this.$emit("sureDynamic",{cropInfo:this.cropInfo,timeInfo:this.timeInfo}),this.$emit("input",!1)}catch(r){}z.bL.mediaUploadReport("41",{})},close:function(){this.$emit("input",!1)}}}),Tc=kc,Sc=(0,g.Z)(Tc,xc,Ic,!1,null,"5d570034",null),Ac=Sc.exports;function Dc(e){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,o.Z)((0,r.Z)().mark((function e(t){var i,n,a,o,s,c=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=c.length>1&&void 0!==c[1]?c[1]:3,n=c.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=c[o];return e.prev=2,e.next=5,t.apply(void 0,a);case 5:return s=e.sent,e.abrupt("return",s);case 9:if(e.prev=9,e.t0=e["catch"](2),!i){e.next=18;break}return console.log("Retrying ".concat(t.name,"... ").concat(i," retries left.")),e.next=15,Dc.apply(void 0,[t,i-1].concat(a));case 15:return e.abrupt("return",e.sent);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[2,9]])}))),Pc.apply(this,arguments)}var Zc=i(16581),Uc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"inline-block"},[t("span",{staticClass:"text-sm text-opblack_2"},[e._v(e._s(e.defaultText))]),t("mp-popover",{attrs:{trigger:"hover",width:e.width},scopedSlots:e._u([{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[e.targetLink?t("span",{staticClass:"weui-link inline-block",class:e.linkClass},[e._v(e._s(e.targetLink))]):t("mask-icon",{staticClass:"relative h-3.5 w-3.5 text-opblack_2",class:e.iconClass,attrs:{name:"info"}})],1)]},proxy:!0}])},[t("div",{staticClass:"text-opblack_2"},[e._t("default",(function(){return[t("div",[e._v(e._s(e.text))])]}))],2)])],1)},Ec=[],Rc=s.ZP.extend({components:{},props:{text:String,width:Number,iconClass:String,linkClass:String,targetLink:String,defaultText:String},data:function(){return{}},computed:{},methods:{}}),Mc=Rc,Lc=(0,g.Z)(Mc,Uc,Ec,!1,null,"4e76675a",null),Fc=Lc.exports,Nc=i(28800),Oc=i(15868),Bc=new z.ZP,qc=new Ve.ZP,Qc=(0,Ce._p)("user"),jc=Qc.mapGetters,Hc=(0,Ce._p)("cover"),Gc=Hc.mapGetters,Wc=Hc.mapState,zc=102400,Vc=10485760,Jc=104857600,Kc=52428800,Yc=20971520,Xc=20971520,$c=window,el=300,tl=300,il=100,nl="挂件进入不可编辑区域",al={packetNameTip:{"0_0":"<span style='display: inline-block; margin-bottom: 8px'>最多填写8个字，可使用公众号名称或主体名称中的字号；</span><br>如使用注册商标名称命名，需在下方「证明材料」中上传相关证明材料。","0_1":"<span style='display: inline-block; margin-bottom: 8px'>最多填写8个字，可使用公众号名称或主体名称中的字号；</span><br>如使用注册商标名称命名，需在下方「证明材料」中上传相关证明材料。","1_2":"最多填写8个字，可使用视频号名称。如使用其他名称命名，需在下方「证明材料」中上传相关证明材料。","1_1":"最多填写8个字，可使用公众号名称。如使用其他名称命名，需在下方「证明材料」中上传相关证明材料。"},packetNamePopoverTips2:{"0_0":"2. 你可以使用你的主体名称中的字号（如有）、公众号名称或你的注册商标来标记你的红包封面。若使用注册商标，请在下方「证明材料」中上传《商标注册证》的扫描件及商标使用授权书（在授权情况下）。","0_1":"2. 你可以使用你的主体名称中的字号（如有）、公众号名称或你的注册商标来标记你的红包封面。若使用注册商标，请在下方「证明材料」中上传《商标注册证》的扫描件及商标使用授权书（在授权情况下）。","1_2":"2. 可使用视频号名称。若使用其他名称命名，需在下方「证明材料」中上传相关证明材料。","1_1":"2. 可使用公众号名称。若使用其他名称命名，需在下方「证明材料」中上传相关证明材料。"},logoTips:{"0_0":"可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","0_1":"可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","1_2":"可使用视频号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。","1_1":"可使用公众号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。"},logoPopoverTips3:{"0_0":"3. 可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","0_1":"3. 可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","1_2":"3. 使用视频号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。","1_1":"3. 使用公众号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。"}},rl=s.ZP.extend({name:"CoverMake",components:{CoverCrop:Go,StoryMake:sn,CoverPreviewDialog:Kt,AddMiniApp:Ds,CoverPicUploadError:js,PreviewCover:_c,MaterialItem:Wi,WidgetDescDialog:Ms,ZipDescPopover:go,InfoPopover:Fc,SourceMediaEditorDialog:Ac},data:function(){return{ACCEPT_TYPE:Pa._B,wordingsMap:al,CoverMediaType:me.Je,CoverGenPag_FileType:me.p0,uploadImgUrl:$t.qk,uploadFileUrl:$t.gm,imgFileList:[],recWidgetImageList:[],senderC2cWidgetImageList:[],evidenceFileList:[],logoFileList:[],atmosphereImageList:[],coverImg:{url:"",dataUrl:"",name:""},cropedImgList:{sourceImageUrl:"",receiveImageUrl:"",detailImageUrl:"",bubbleImageUrl:"",openImageUrl:"",corpImageUrl:""},OfinderInfo:{},showCoverStory:!1,openImg:null,saveFile:{},saveRecWidgetImageFile:{},saveSenderC2cWidgetImageFile:{},isOpenStroy:!1,cover:{orderId:"",packetName:"",brandLogo:{},packetMaterial:{bubbleImage:{},openImage:{},receiveImage:{},detailImage:{},sourceImage:{},corpImage:{},actionList:[{actionType:0,mpAccountDetail:{},miniAppDetail:{},finderProfileDetail:{}}],storyDetailList:[],storyDescription:"",recWidgetImage:{},senderC2cWidgetImage:{},syntheticWidgetImage:{},bubbleImageDynamic:{},corpLogoDynamic:{},coverImageDynamic:{},detailImageDynamic:{},bubbleImageDynamicEnd:{},coverImageDynamicSource:{},sourceImageDynamic:{},bubbleImageDynamicSource:{},corpLogoDynamicSource:{},detailImageDynamicSource:{},widgetImageDynamicSource:{}},proofMaterial:{}},saveVideo:{},recommend:!0,formRule:{packetName:[{trigger:["change","blur"],validator:function(e,t,i){var n=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,a=t.trim();return(0,_e.Nu)(a)>17||n.test(a)?i(new Error("请填写8个字及以内的封面简称")):a?i():i(new Error("请输入红包封面简称"))}}]},baseRule:{packetName:[{trigger:["change","blur"],validator:function(e,t,i){var n=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,a=t.trim();return(0,_e.Nu)(a)>17||n.test(a)?i(new Error("请填写8个字及以内的封面简称")):a?i():i(new Error("请输入红包封面简称"))}}]},showPreviewQrcodeDialog:!1,saveStatus:0,submitStatus:0,isFileUploading:!1,isCanEdit:!0,showEvidenceUploadError:!1,evidenceBigFileUploader:null,sourceBigFileUploader:null,tryGenOrderIdTimes:0,clearMaterialVisible:!1,coverErrorInfo:{},coverWidgetErrorInfo:{},atmosphereErrorInfo:{},bubbleWidgetErrorInfo:{},isClickDownload:!1,mergeWidgetLoading:!1,logoUploading:!1,coverImgUploading:!1,recWidgetUploading:!1,bubbleWidgetUploading:!1,breadcrumbList:[{text:"我的红包封面"},{text:"定制封面"}],showNewCoverTips:!1,widgetDescDialogVisible:!1,previewCoverReady:!1,showSourcePagEditorVisible:!1,sourceDynamicMediaInfo:{name:"",url:"",mediaUrl:"",objectUrl:"",type:me.Je.Unknow,width:0,height:0,cropDetailInfo:{timeInfo:{},cropInfo:{}}},dynamicRecWidgetUploading:!1,cropDynamicLoading:!1,cropperSourceImgInfo:{name:"",url:"",objectUrl:""},batGenPagHandler:null,coverDynamicPagLoading:!1,sourcePagLoading:!1,corpPagLoading:!1,bubblePagLoading:!1,coverImageDynamicBeforeUploadWidget:{},showDynamicIcon:!1,useStaticBubblePic:!1,useStaticCorpPic:!1,coverMaterialUploading:!1,atmosphereUploading:!1,atmosphereMaking:!1,getFirstFrameLoading:!1,reUploadOpenImageLoading:!1,bubbleFps:0,bubbleQuality:0,detailFps:0,detailQuality:0,coverFps:0,coverQuality:0,bubbleRes:"",bubbleFileSize:"",detailRes:"",detailFileSize:"",coverRes:"",coverFileSize:"",showAtmosphereTips:!1}},watch:{isOpenStroy:function(){0==this.isOpenStroy&&(this.cover.packetMaterial.actionList=[],this.$store.commit("cover/CLEAR_ACTION_AUTH_INFO"),(0,Ht.H)("checkbox删除跳转",JSON.stringify({orderId:this.cover.orderId})))},showCoverStory:function(){0==this.showCoverStory?(this.cover.packetMaterial.actionList=[],this.cover.packetMaterial.storyDetailList=[],this.cover.packetMaterial.storyDescription="",this.$store.commit("cover/CLEAR_ACTION_AUTH_INFO")):(this.triggerToPreview(3,"story"),this.cover.orderId||this.generateOrderId())},cover:{deep:!0,handler:function(){this.saveStatus=0}},"actionAuthInfo.action":{deep:!0,handler:function(){this.saveStatus=0}}},computed:(0,ve.Z)((0,ve.Z)((0,ve.Z)((0,ve.Z)({},jc(["principalAccountType","isInnerUser","headImgUrl","nickname","principalType","accountType","isAtmosphereUser","authorId"])),Gc(["authorizeSuccess"])),Wc(["actionAuthInfo"])),{},{CoverMaterialItem:function(){var e=this.sourceDynamicMediaInfo;return e.name&&!(0,rt.NL)(e.name)?"video":"pic"},dynamicMaterialUploading:function(){return this.coverDynamicPagLoading||this.sourcePagLoading||this.corpPagLoading||this.bubblePagLoading||this.dynamicRecWidgetUploading},atmosphereLoading:function(){return this.atmosphereMaking||this.atmosphereUploading},coverType:function(){return this.recWidgetImageList.length>0?2:1},showSuggestLogo:function(){var e;return!!this.headImgUrl&&!this.logoFileList.length&&!(null!==(e=this.cover.brandLogo)&&void 0!==e&&e.mediaUrl)&&!this.logoUploading},statusCount:function(){var e=0;return m.l1.coverList.forEach((function(t){2==t.orderStatus&&e++})),e},isStoryReady:function(){var e=this,t=e.cover.packetMaterial,i=t.storyDescription,n=t.storyDetailList,a=e.storyDescCounter(i);return!e.showCoverStory||n.length&&a<41},isFormReady:function(){var e,t=!0,i=!0;if(2===this.coverType){var n=this.cover.packetMaterial,a=n.recWidgetImage,r=n.syntheticWidgetImage,o=n.openImage;t=!!(null!==a&&void 0!==a&&a.mediaUrl&&null!==r&&void 0!==r&&r.mediaUrl&&null!==o&&void 0!==o&&o.mediaUrl)&&!this.mergeWidgetLoading}return!this.coverImgUploading&&!(null===(e=this.coverImg)||void 0===e||!e.url)&&!!this.cover.packetName&&this.isStoryReady&&!this.isFileUploading&&t&&i&&!this.dynamicMaterialUploading&&!this.atmosphereLoading&&!this.cropDynamicLoading&&!this.dynamicRecWidgetUploading&&!this.reUploadOpenImageLoading},previewDisabledContent:function(){return this.dynamicMaterialUploading||this.coverImgUploading||this.atmosphereLoading?"封面生成中，请稍后预览":"需填写完封面简称并上传完封面素材后才可预览"},canSave:function(){return this.isFormReady&&1!==this.submitStatus&&2!==this.saveStatus},canSubmit:function(){return 1!==this.saveStatus&&this.isFormReady&&this.authorizeSuccess}}),mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initShowDynamicIcon(),e.clearCoverPic(),e.initSouceCover(),e.initNewCoverTips(),e.initScroll(),e.setLayoutPageSimpleRightWrpOverflow("mounted"),e.setBeforeUnloadMsg(),m.l1.getCoverList(e),t.next=10,m.U6.getUserInfo();case 10:1!=m.U6.user.isSecondary||8&m.U6.user.managerFlag||(e.isCanEdit=!1),e.statusCount>2&&!e.isInnerUser&&(0,Ht.H)("同时有3款封面在审"),(0,Ht.H)("进入编辑页",JSON.stringify({orderId:e.cover.orderId}));case 13:case"end":return t.stop()}}),t)})))()},methods:{handleTrashAtmosphere:function(){this.clearAllAtmosphere(),this.genAtmosphereVersion+=1},initShowDynamicIcon:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=localStorage.getItem("DYNAMIC_NEW"),i||(e.showDynamicIcon=!0,localStorage.setItem("DYNAMIC_NEW","1"));case 2:case"end":return t.stop()}}),t)})))()},setCropedImgList:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,n=["source","receive","bubble","corp","detail","open"],a=[],n.forEach((function(i){a.push((0,o.Z)((0,r.Z)().mark((function n(){var a,o,s,c;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("source"!==i){n.next=2;break}return n.abrupt("return");case 2:if("open"!=i||2!==t.coverType){n.next=4;break}return n.abrupt("return");case 4:if(!e["".concat(i,"ImageUrl")]||e["".concat(i,"ImageUrl")]===t.cropedImgList["".concat(i,"ImageUrl")]){n.next=17;break}return n.next=7,(0,Hs.U)(e["".concat(i,"ImageUrl")],{image_name:"".concat(i,".png"),order_id:null===t||void 0===t||null===(a=t.cover)||void 0===a?void 0:a.orderId});case 7:if(s=n.sent,0===(null===s||void 0===s||null===(o=s.baseResponse)||void 0===o?void 0:o.ret)){n.next=14;break}return(0,Ht.H)("素材上传失败",JSON.stringify({type:i,res:s})),t.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),n.abrupt("return");case 14:(0,Ht.H)("save_cropimg_success",JSON.stringify({mediaName:"".concat(i,".png"),mediaUrl:s.url,orderId:t.cover.orderId}));case 15:c="".concat(i,"Image"),t.cover.packetMaterial[c]={mediaName:"".concat(i,".png"),mediaType:me.Je.Image,mediaUrl:s.url,mediaMd5:s.md5};case 17:case"end":return n.stop()}}),n)})))())})),i.next=6,Promise.all(a);case 6:t.cropedImgList=e,i.next=13;break;case 9:i.prev=9,i.t0=i["catch"](0),(0,Ht.H)("setCropedImgList_error",JSON.stringify({msg:null===i.t0||void 0===i.t0?void 0:i.t0.message})),console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,9]])})))()},handleChangeGenMaterialStatus:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.type,a=e.loading,t.cropDynamicLoading=a,t.triggerToPreview(2,n);case 3:case"end":return i.stop()}}),i)})))()},handleCoverCropUpdateMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.type,a=e.material,o=e.source,s="","bubble"!==n){i.next=9;break}return t.setBubbleMaterial(a),t.cover.packetMaterial.bubbleImageDynamicSource=o||{},i.next=7,(0,Yr.Wr)(a.pagUrl);case 7:s=i.sent,t.useStaticBubblePic=!1;case 9:if("corp"!==n){i.next=16;break}return t.setCorpMaterial(a),t.cover.packetMaterial.corpLogoDynamicSource=o||{},i.next=14,(0,Yr.WB)(a.pagUrl);case 14:s=i.sent,t.useStaticCorpPic=!1;case 16:if("detail"!==n){i.next=22;break}return t.setDetailMaterial(a),t.cover.packetMaterial.detailImageDynamicSource=o||{},i.next=21,(0,Yr.zj)(a.pagUrl);case 21:s=i.sent;case 22:s?t.setCropedImgList(Object.assign({},t.cropedImgList,(0,Ae.Z)({},"".concat(n,"ImageUrl"),s))):(0,Ht.H)("重新裁切原素材后，获取首帧失败",JSON.stringify({type:n}));case 23:case"end":return i.stop()}}),i)})))()},handleSurePic:function(e){var t;this.setCoverImg(e),null!==(t=this.cover.packetMaterial.widgetImageDynamicSource)&&void 0!==t&&t.mediaUrl&&this.cover.packetMaterial.widgetImageDynamicSource.mediaType!==me.Je.Image?((0,Ht.H)("裁剪静态图后-【静态封面+动态挂件】",JSON.stringify({orderId:this.cover.orderId})),this.setPicDynamicMediaInfo(),(0,Ht.H)("开始getRecWidgetMaterial"),this.getRecWidgetMaterial()):this.cleayCoverDynamicMaterial()},getFirstFrameForSourceCoverImage:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.cropInfo,o=e.timeInfo,i.next=3,(0,rt.mw)({fileUrl:t.sourceDynamicMediaInfo.objectUrl,cropInfo:a,timeInfo:o,targetSize:{width:Xe.TE.width,height:Xe.TE.height}});case 3:return s=i.sent,c=(0,_e.KG)(s),i.next=7,Dc(Hs.U,3,c,{image_name:"first_frame_source",order_id:null===t||void 0===t||null===(n=t.cover)||void 0===n?void 0:n.orderId});case 7:l=i.sent,0===(null===l||void 0===l?void 0:l.baseResponse.ret)&&t.setCoverImg({dataUrl:s,name:"sourceImageUrl.jpeg",uid:+Date.now(),size:c.size,percent:100,status:"done",originFileObj:{file:c},response:{url:l.url,md5:l.md5},url:l.url});case 9:case"end":return i.stop()}}),i)})))()},handleSourcePagSure:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.getFirstFrameLoading=!0,i.next=3,t.getFirstFrameForSourceCoverImage(e);case 3:t.getFirstFrameLoading=!1,t.genPagMaterial(e);case 5:case"end":return i.stop()}}),i)})))()},setDetailMaterial:function(e){this.cover.packetMaterial.detailImageDynamic={mediaUrl:null===e||void 0===e?void 0:e.pagUrl,mediaType:me.Je.Pag,mediaSize:0,mediaMd5:e.pagMd5,mediaName:"detailImageDynamic.pag"}},setBubbleMaterial:function(e){var t;if(null!==(t=this.cover.packetMaterial.bubbleAtmospherePag)&&void 0!==t&&t.mediaUrl||this.atmosphereMaking||this.atmosphereUploading)return(0,Ht.H)("有氛围动效，跳过气泡动画生成"),void(this.showAtmosphereTips||(Oc.Z.info("因上传了氛围素材，红包气泡视频素材已替换为首帧图片"),this.showAtmosphereTips=!0));this.cover.packetMaterial.bubbleImageDynamicEnd={mediaUrl:e.lastFrameUrl,mediaType:me.Je.Image,mediaName:"bubbleImageDynamicEnd.jpg",mediaSize:0,mediaMd5:e.lastFrameMd5},this.cover.packetMaterial.bubbleImageDynamic={mediaUrl:null===e||void 0===e?void 0:e.pagUrl,mediaType:me.Je.Pag,mediaMd5:e.pagMd5,mediaName:"pag",mediaSize:0}},setCorpMaterial:function(e){this.cover.packetMaterial.corpLogoDynamic={mediaUrl:null===e||void 0===e?void 0:e.pagUrl,mediaType:me.Je.Pag,mediaMd5:e.pagMd5,mediaName:"corpMaterial.pag",mediaSize:0}},setCoverImageDynamic:function(e){var t;e?(this.cover.packetMaterial.coverImageDynamic={mediaUrl:null===e||void 0===e?void 0:e.pagUrl,mediaType:me.Je.Pag,mediaMd5:e.pagMd5,mediaName:this.sourceDynamicMediaInfo.name,mediaSize:0},this.cover.packetMaterial.coverImageDynamicType=null!==(t=this.cover.packetMaterial.widgetImageDynamicSource)&&void 0!==t&&t.mediaUrl?2:1):(this.cover.packetMaterial.coverImageDynamic={},this.cover.packetMaterial.coverImageDynamicType=0)},getDetailAtmosphere:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.genAtmosphereVersion,n=e.cover.packetMaterial.atmosphereSource,console.info("--- ~ getDetailAtmosphere ~ atmosphereSource:",n),t.next=5,(0,Yr.tF)({base:{duration:3,w:el,h:tl,file_type:me.p0.PNG,file_url:null===n||void 0===n?void 0:n.mediaUrl}});case 5:if(a=t.sent,!(i<e.genAtmosphereVersion)){t.next=9;break}return(0,Ht.H)("氛围版本废弃"),t.abrupt("return");case 9:a&&((0,Ht.H)("【氛围】获取到详情页氛围",JSON.stringify({url:a.url,md5:a.md5,orderId:e.cover.orderId})),e.cover.packetMaterial.detailAtmospherePag={mediaUrl:a.url,mediaMd5:a.md5,mediaType:me.Je.Pag},e.cover.packetMaterial.detailAtmospherePagLowQuality={mediaUrl:a.lowUrl,mediaMd5:a.lowMd5,mediaType:me.Je.Pag});case 10:case"end":return t.stop()}}),t)})))()},getBubbleAtmosphere:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.genAtmosphereVersion,n=e.cover.packetMaterial.atmosphereSource,a={base:{duration:3,w:el,h:tl,file_type:me.p0.PNG,file_url:null===n||void 0===n?void 0:n.mediaUrl}},t.next=5,(0,Yr.p2)(a);case 5:if(o=t.sent,!(i<e.genAtmosphereVersion)){t.next=9;break}return(0,Ht.H)("氛围版本废弃"),t.abrupt("return");case 9:o&&((0,Ht.H)("【氛围】获取到气泡氛围",JSON.stringify({url:o.url,md5:o.md5,orderId:e.cover.orderId})),e.cover.packetMaterial.bubbleAtmospherePag={mediaUrl:o.url,mediaMd5:o.md5,mediaType:me.Je.Pag},e.cover.packetMaterial.bubbleAtmospherePagLowQuality={mediaUrl:o.lowUrl,mediaMd5:o.lowMd5,mediaType:me.Je.Pag});case 10:case"end":return t.stop()}}),t)})))()},getCoverAtmosphere:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.genAtmosphereVersion,n=e.cover.packetMaterial.atmosphereSource,t.next=4,(0,Yr.JV)({base:{duration:3,w:el,h:tl,file_type:me.p0.PNG,file_url:null===n||void 0===n?void 0:n.mediaUrl}});case 4:if(a=t.sent,!(i<e.genAtmosphereVersion)){t.next=8;break}return(0,Ht.H)("氛围版本废弃"),t.abrupt("return");case 8:a&&((0,Ht.H)("【氛围】获取到封面氛围",JSON.stringify({url:a.url,md5:a.md5,orderId:e.cover.orderId})),e.cover.packetMaterial.coverAtmospherePag={mediaUrl:a.url,mediaMd5:a.md5,mediaType:me.Je.Pag},e.cover.packetMaterial.coverAtmospherePagLowQuality={mediaUrl:a.lowUrl,mediaMd5:a.lowMd5,mediaType:me.Je.Pag});case 9:case"end":return t.stop()}}),t)})))()},getDetailAtmosphereTest:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("【氛围】详情页生成中","fps:",e.detailFps,"quality:","quality",e.detailQuality),i=e.cover.packetMaterial.atmosphereSource,n={gen_type:Ve.rv.ATMOSPHERE_PAG_DETAIL,scene:Ve.a1.FIRST_UPLOAD,base:{start_time:0,x:-1,y:-1,duration:3,w:el,h:tl,file_type:me.p0.PNG,file_url:null===i||void 0===i?void 0:i.mediaUrl},pag_arg:{w:720,h:908,fps:Number(e.detailFps),quality:Number(e.detailQuality)},request_id:"atmosphere_detail_".concat(Nc.Z_.uuid())},t.next=5,(0,Yr.ed)([n],"atmosphere_detail");case 5:return a=t.sent,o=a.result[0],s=o.url,c=o.md5,t.next=9,(0,_e.hR)(s);case 9:l=t.sent,e.detailRes=s,e.detailFileSize=l/1024,e.cover.packetMaterial.detailAtmospherePag={mediaUrl:s,mediaMd5:c,mediaType:me.Je.Pag};case 13:case"end":return t.stop()}}),t)})))()},getBubbleAtmosphereTest:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("【氛围】气泡生成中","fps:",e.bubbleFps,"quality:","quality",e.bubbleQuality),i=e.cover.packetMaterial.atmosphereSource,n={gen_type:Ve.rv.ATMOSPHERE_PAG_BUBBLE,scene:Ve.a1.FIRST_UPLOAD,base:{start_time:0,x:-1,y:-1,duration:3,w:el,h:tl,file_type:me.p0.PNG,file_url:null===i||void 0===i?void 0:i.mediaUrl},pag_arg:{w:528,h:384,fps:Number(e.bubbleFps),quality:Number(e.bubbleQuality)},request_id:"atmosphere_bubble_".concat(Nc.Z_.uuid())},t.next=5,(0,Yr.ed)([n],"atmosphere_bubble");case 5:return a=t.sent,o=a.result[0],s=o.url,c=o.md5,t.next=9,(0,_e.hR)(s);case 9:l=t.sent,e.bubbleRes=s,e.bubbleFileSize=l/1024,e.cover.packetMaterial.bubbleAtmospherePag={mediaUrl:s,mediaMd5:c,mediaType:me.Je.Pag};case 13:case"end":return t.stop()}}),t)})))()},getCoverAtmosphereTest:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("【氛围】封面氛围生成中","fps:",e.coverFps,"quality:","quality",e.coverQuality),i=e.cover.packetMaterial.atmosphereSource,n={gen_type:Ve.rv.ATMOSPHERE_PAG_NORMAL,scene:Ve.a1.FIRST_UPLOAD,base:{start_time:0,x:-1,y:-1,duration:3,w:el,h:tl,file_type:me.p0.PNG,file_url:null===i||void 0===i?void 0:i.mediaUrl},pag_arg:{w:720,h:908,fps:Number(e.coverFps),quality:Number(e.coverQuality)},request_id:"atmosphere_cover__".concat(Nc.Z_.uuid())},t.next=5,(0,Yr.ed)([n],"atmosphere_cover");case 5:return a=t.sent,o=a.result[0],s=o.url,c=o.md5,t.next=9,(0,_e.hR)(s);case 9:l=t.sent,e.coverRes=s,e.coverFileSize=l/1024,e.cover.packetMaterial.coverAtmospherePag={mediaUrl:s,mediaMd5:c,mediaType:me.Je.Pag};case 13:case"end":return t.stop()}}),t)})))()},getAtmosphereMaterialTest:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.genAtmosphereVersion+=1,e.atmosphereMaking=!0,e.bubbleFps&&e.bubbleQuality&&(e.bubbleRes="",e.getBubbleAtmosphereTest()),e.detailFps&&e.detailQuality&&(e.detailRes="",e.getDetailAtmosphereTest()),e.coverFps&&e.coverQuality&&(e.coverRes="",e.getCoverAtmosphereTest()),e.cover.packetMaterial.bubbleImageDynamicEnd={},e.cover.packetMaterial.bubbleImageDynamicSource={},e.cover.packetMaterial.bubbleImageDynamic={}}catch(i){e.atmosphereErrorInfo={msg:i.message},e.clearAllAtmosphere()}finally{e.atmosphereMaking=!1}case 1:case"end":return t.stop()}}),t)})))()},getAtmosphereMaterial:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return(0,Ht.H)("开始制作氛围动效",JSON.stringify({url:null===(i=e.cover.packetMaterial.atmosphereSource)||void 0===i?void 0:i.mediaUrl})),t.prev=1,e.genAtmosphereVersion+=1,e.atmosphereMaking=!0,t.next=6,Promise.all([e.getDetailAtmosphere(),e.getBubbleAtmosphere(),e.getCoverAtmosphere()]);case 6:e.clearBubbleDynamicMaterial(),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),e.atmosphereErrorInfo={msg:t.t0.message},(0,Ht.H)("【氛围】生成失败",JSON.stringify({errMsg:null===t.t0||void 0===t.t0?void 0:t.t0.message})),e.clearAllAtmosphere();case 14:return t.prev=14,e.atmosphereMaking=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,9,14,17]])})))()},clearAllAtmosphere:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.atmosphereImageList=[],e.cover.packetMaterial.bubbleAtmospherePag={},e.cover.packetMaterial.coverAtmospherePag={},e.cover.packetMaterial.detailAtmospherePag={},e.cover.packetMaterial.atmosphereSource={},e.cover.packetMaterial.compressedAtmosphereSource={},e.atmosphereMaking=!1,e.atmosphereUploading=!1,e.showAtmosphereTips=!1;case 9:case"end":return t.stop()}}),t)})))()},getPagDetailMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=+new Date,a=s.ZP.prototype.genVersion,i.prev=2,t.sourcePagLoading=!0,i.next=6,(0,Yr["if"])({whole:e});case 6:if(o=i.sent,a===s.ZP.prototype.genVersion){i.next=10;break}return(0,Ht.H)("有新上传素材，素材丢弃",JSON.stringify({curGenVersion:s.ZP.prototype.genVersion,genVersion:a})),i.abrupt("return");case 10:if(null===o||void 0===o||!o.pagUrl){i.next=17;break}return t.setDetailMaterial(o),m.l1.updatePreviewPagReinit("detail"),i.next=15,(0,Yr.zj)(o.pagUrl);case 15:c=i.sent,c?((0,Ht.H)("获取到详情页首帧",JSON.stringify({orderId:t.cover.orderId})),t.setCropedImgList(Object.assign({},t.cropedImgList,{detailImageUrl:c}))):(0,Ht.H)("获取详情页首帧失败");case 17:return i.prev=17,t.sourcePagLoading=!1,n=+new Date-n,console.log("getPagDetailMaterial finally",n),(0,Ht.H)("getPagDetailMaterial finally",JSON.stringify({time:n})),i.finish(17);case 23:case"end":return i.stop()}}),i,null,[[2,,17,23]])})))()},getPagSourceMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=+new Date,a=s.ZP.prototype.genVersion,i.prev=2,t.sourcePagLoading=!0,i.next=6,(0,Yr["if"])({whole:e});case 6:if(o=i.sent,a===s.ZP.prototype.genVersion){i.next=10;break}return(0,Ht.H)("有新上传素材，素材丢弃",JSON.stringify({curGenVersion:s.ZP.prototype.genVersion,genVersion:a})),i.abrupt("return");case 10:if(!o){i.next=19;break}return t.sourceDynamicMediaInfo.type===me.Je.Zip&&(t.sourceDynamicMediaInfo.mediaUrl=o.pagUrl),t.cover.packetMaterial.sourceImageDynamic={mediaUrl:null===o||void 0===o?void 0:o.pagUrl,mediaType:me.Je.Pag,mediaSize:0,mediaMd5:o.pagMd5,mediaName:"sourceImageDynamic.pag"},t.setDetailMaterial(o),m.l1.updatePreviewPagReinit("detail"),i.next=17,(0,Yr.zj)(o.pagUrl);case 17:c=i.sent,c?((0,Ht.H)("获取到详情页首帧",JSON.stringify({orderId:t.cover.orderId})),t.setCropedImgList(Object.assign({},t.cropedImgList,{detailImageUrl:c}))):(0,Ht.H)("获取详情页首帧失败");case 19:return i.prev=19,t.sourcePagLoading=!1,n=+new Date-n,console.log("getPagSourceMaterial finally",n),(0,Ht.H)("getPagSourceMaterial finally",JSON.stringify({time:n,orderId:t.cover.orderId})),i.finish(19);case 25:case"end":return i.stop()}}),i,null,[[2,,19,25]])})))()},getCoverDynamicMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=+new Date,a=s.ZP.prototype.genVersion,i.prev=2,t.coverDynamicPagLoading=!0,i.next=6,(0,Yr.YO)({base:e});case 6:if(o=i.sent,a===s.ZP.prototype.genVersion){i.next=10;break}return(0,Ht.H)("有新上传素材，素材丢弃",JSON.stringify({type:"coverDynamic",curGenVersion:s.ZP.prototype.genVersion,genVersion:a})),i.abrupt("return");case 10:o&&(t.setCoverImageDynamic(o),m.l1.updatePreviewPagReinit("cover"));case 11:return i.prev=11,t.coverDynamicPagLoading=!1,n=+new Date-n,console.log("getCoverDynamicMaterial finally",n),(0,Ht.H)("getCoverDynamicMaterial finally",JSON.stringify({time:n})),i.finish(11);case 17:case"end":return i.stop()}}),i,null,[[2,,11,17]])})))()},getCorpMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=+new Date,a=s.ZP.prototype.genVersion,i.prev=2,t.corpPagLoading=!0,i.next=6,(0,Yr.Zt)({whole:e});case 6:if(o=i.sent,(0,Ht.H)("得到corp动态素材",JSON.stringify({corpMaterial:o})),a===s.ZP.prototype.genVersion){i.next=11;break}return(0,Ht.H)("有新上传素材，素材丢弃",JSON.stringify({type:"corp",curGenVersion:s.ZP.prototype.genVersion,genVersion:a})),i.abrupt("return");case 11:if(!o.picBase64){i.next=18;break}(0,Ht.H)("corp降级到用首帧",JSON.stringify({orderId:t.cover.orderId})),t.setCropedImgList(Object.assign({},t.cropedImgList,{corpImageUrl:o.picBase64})),t.useStaticCorpPic=!0,Bc.mediaUploadReport("57",{}),i.next=24;break;case 18:return t.setCorpMaterial(o),m.l1.updatePreviewPagReinit("corp"),i.next=22,(0,Yr.WB)(o.pagUrl);case 22:c=i.sent,c?((0,Ht.H)("corp获取到首帧",JSON.stringify({orderId:t.cover.orderId})),t.setCropedImgList(Object.assign({},t.cropedImgList,{corpImageUrl:c}))):(0,Ht.H)("获取发红包页首帧失败，不替换首帧",JSON.stringify({orderId:t.cover.orderId}));case 24:return i.prev=24,t.corpPagLoading=!1,n=+new Date-n,console.log("getCorpMaterial finally",n),(0,Ht.H)("getCorpMaterial finally",JSON.stringify({time:n})),i.finish(24);case 30:case"end":return i.stop()}}),i,null,[[2,,24,30]])})))()},getBubbleMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=+new Date,a=s.ZP.prototype.genVersion,i.prev=2,t.bubblePagLoading=!0,i.next=6,(0,Yr.CJ)({whole:e});case 6:if(o=i.sent,a===s.ZP.prototype.genVersion){i.next=10;break}return(0,Ht.H)("有新上传素材，素材丢弃",JSON.stringify({curGenVersion:s.ZP.prototype.genVersion,genVersion:a})),i.abrupt("return");case 10:if(!o.picBase64){i.next=18;break}return(0,Ht.H)("气泡降级用首帧"),i.next=14,t.setCropedImgList(Object.assign({},t.cropedImgList,{bubbleImageUrl:o.picBase64}));case 14:t.useStaticBubblePic=!0,Bc.mediaUploadReport("56",{}),i.next=28;break;case 18:return t.setBubbleMaterial(o),m.l1.updatePreviewPagReinit("bubble"),i.next=22,(0,Yr.Wr)(o.pagUrl);case 22:if(c=i.sent,!c){i.next=27;break}return(0,Ht.H)("获取到气泡首帧"),i.next=27,t.setCropedImgList(Object.assign({},t.cropedImgList,{bubbleImageUrl:c}));case 27:t.cover.packetMaterial.bubbleImageDynamicEnd||((0,Ht.H)("pag出错获取不到尾帧。用首帧当尾帧",JSON.stringify({orderId:t.cover.orderId})),t.cover.packetMaterial.bubbleImageDynamicEnd=t.cover.packetMaterial.bubbleImage);case 28:return i.prev=28,t.bubblePagLoading=!1,n=+new Date-n,console.log("getBubbleMaterial finally",n),(0,Ht.H)("getBubbleMaterial finally",JSON.stringify({time:n})),i.finish(28);case 34:case"end":return i.stop()}}),i,null,[[2,,28,34]])})))()},genPagMaterial:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o,c,l,u,d,p,v,m,f,h,g,y,b,w,C,_,x;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=s.ZP.prototype.genVersion,i.sourceDynamicMediaInfo.cropDetailInfo={cropInfo:e.cropInfo,timeInfo:e.timeInfo},o=e.cropInfo,c=o.cropWidth,l=o.cropHeight,u=o.cropLeft,d=o.cropTop,p=e.timeInfo,v=p.duration,m=p.startTime,f=i.sourceDynamicMediaInfo.type,h=i.sourceDynamicMediaInfo.url,g=Math.floor(Number(c)*(Xe.s9.height/Xe.s9.width)),y=Number(d)+Math.floor(Number(l)/2)-Math.floor(g/2),b=Math.floor(Number(c)*(Xe.Mx.height/Xe.Mx.width)),w=Number(d)+Math.floor(Number(l)/2)-Math.floor(Number(b)/2),C=Pa.Eu[f],_={file_type:C,file_url:h,w:c,h:l,x:u,y:d,duration:v,start_time:m},n.prev=11,"coverDynamicMaterial"!==t){n.next=17;break}return n.next=15,i.getCoverDynamicMaterial(_);case 15:n.next=19;break;case 17:return n.next=19,Promise.all([i.getCoverDynamicMaterial(_),i.getPagSourceMaterial(_),i.getCorpMaterial({file_type:C,file_url:h,w:c,h:g,x:u,y:y,duration:v,start_time:m}),i.getBubbleMaterial({file_type:C,file_url:h,w:c,h:b,x:u,y:w,duration:v,start_time:m})]);case 19:if(null===(x=i.cover.packetMaterial.recWidgetImage)||void 0===x||!x.mediaUrl){n.next=28;break}return n.prev=20,n.next=23,i.getRecWidgetMaterial();case 23:n.next=28;break;case 25:n.prev=25,n.t0=n["catch"](20),(0,Ht.H)("先传挂件再传封面素材，合成错误",JSON.stringify({err:n.t0}));case 28:n.next=40;break;case 30:if(n.prev=30,n.t1=n["catch"](11),!(a<s.ZP.prototype.genVersion)){n.next=35;break}return(0,Ht.H)("旧生成报错，不抛错"),n.abrupt("return");case 35:i.coverErrorInfo={msg:(null===n.t1||void 0===n.t1?void 0:n.t1.message)||"未知错误"},i.clearCoverPic(),i.clearCropedImgList(),i.cleayCoverDynamicMaterial(),s.ZP.prototype.genVersion+=1;case 40:case"end":return n.stop()}}),n,null,[[11,30],[20,25]])})))()},checkSourceImageZip:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o,s,c,l,u,d,p,v;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,Yr.su)(e);case 2:if(a=n.sent,!(a.zipPicNum>Pa.QV)){n.next=7;break}throw o="压缩包内图片不能超过".concat(Pa.QV,"张，请检查"),Bc.mediaUploadReport("22",{file:t,failReason:o,picCnt:a.zipPicNum}),new Error(o);case 7:if(!(a.zipPicNum<Pa.yY)){n.next=11;break}throw s="压缩包内图片不能少于".concat(Pa.yY,"张，请检查"),Bc.mediaUploadReport("22",{file:t,failReason:s,picCnt:a.zipPicNum}),new Error(s);case 11:return n.next=13,(0,_e.t$)(a.zipWidgetUrl);case 13:if(c=n.sent,l=Xe.TE.width,u=Xe.TE.height,c.width===l&&c.height===u){n.next=19;break}throw o="序列帧图片尺寸需为".concat(l,"x").concat(u,"像素"),Bc.mediaUploadReport("33",{file:t,failReason:o}),new Error(o);case 19:if(!(Number(a.zipPicNum)>0)){n.next=24;break}i.sourceDynamicMediaInfo.cropDetailInfo.timeInfo={duration:Math.floor(Number(a.zipPicNum)/Pa.rZ),startTime:0},Bc.mediaUploadReport("21",{file:t,picCnt:a.zipPicNum}),n.next=26;break;case 24:throw(0,Ht.H)("获取压缩包内图片数错误",JSON.stringify({msg:a})),new Error("获取压缩包内图片数错误");case 26:if(d=null===a||void 0===a?void 0:a.zipWidgetUrl,d){n.next=30;break}throw(0,Ht.H)("获取不到压缩包中的图片信息",JSON.stringify({msg:a})),new Error("获取不到压缩包中的图片信息");case 30:return(0,Ht.H)("checkSourceImageZip通过",JSON.stringify({imgFromZip:a})),n.next=33,(0,_e.dd)(d);case 33:return p=n.sent,n.next=36,(0,_e.Ll)(p);case 36:v=n.sent,i.setCoverImg({dataUrl:p,name:"封面原素材图片.jpeg",uid:+Date.now(),size:v.size,percent:100,status:"done",originFileObj:{file:v},response:{url:d,md5:d.slice(-20,-1)},url:d});case 38:case"end":return n.stop()}}),n)})))()},uploadCoverMaterial:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,c,l,u,d,p,v,m,f,h,g,y,b,w,C,_,x;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=e.onSuccess,o=e.onError,c=e.file,t.cleayCoverDynamicMaterial(),null===(n=t.sourceBigFileUploader)||void 0===n||n.endUpload(),s.ZP.prototype.genVersion+=1,!(0,rt.NL)(c.type)){i.next=41;break}return i.prev=5,t.coverMaterialUploading=!0,i.next=9,(0,Hs.U)(c,{image_name:"source",order_id:null===t||void 0===t||null===(l=t.cover)||void 0===l?void 0:l.orderId});case 9:return f=i.sent,t.validUploadRes(f,"source"),i.next=13,(0,_e.sT)(c);case 13:if(h=i.sent,c.url=null===f||void 0===f?void 0:f.url,c.dataUrl=h,c.response=f,t.imgFileList=[c],t.setCoverImg(c),t.coverMaterialUploading=!1,t.getFirstFrameLoading=!1,null===(u=t.cover.packetMaterial)||void 0===u||null===(d=u.widgetImageDynamicSource)||void 0===d||!d.mediaUrl||(null===(p=t.cover.packetMaterial)||void 0===p?void 0:p.widgetImageDynamicSource.mediaType)===me.Je.Image){i.next=25;break}return t.setPicDynamicMediaInfo(),i.next=25,t.getRecWidgetMaterial();case 25:(null===(v=t.cover.packetMaterial)||void 0===v||null===(m=v.widgetImageDynamicSource)||void 0===m?void 0:m.mediaType)===me.Je.Image&&((0,Ht.H)("清空动态素材信息"),t.cover.packetMaterial.widgetImageDynamicSource={},t.cleayCoverDynamicMaterial()),Bc.mediaUploadReport("21",{file:c}),a(),i.next=36;break;case 30:i.prev=30,i.t0=i["catch"](5),console.error(i.t0),t.imgFileList=[t.saveFile],t.coverErrorInfo={msg:i.t0.message},o();case 36:return i.prev=36,t.coverMaterialUploading=!1,i.finish(36);case 39:i.next=99;break;case 41:if(!/mp4/.test(c.type)){i.next=73;break}return t.coverMaterialUploading=!0,i.next=45,(0,rt.$p)(c);case 45:return g=i.sent,y=g.width,b=g.height,i.prev=47,w=+new Date,t.sourceBigFileUploader=new co.ZP(e.file,{cdnFileType:co.vB.video}),i.next=52,Bc.bigFileUpload(e,t.sourceBigFileUploader);case 52:return C=i.sent,(0,Ht.H)("获取mp4链接",JSON.stringify({uploadDuration:+new Date-w,res:C})),i.next=56,(0,Yr.TI)(C.url);case 56:Bc.mediaUploadReport("21",{file:c,videoInfo:g}),t.cover.packetMaterial.coverImageDynamicSource={mediaName:c.name,mediaUrl:C.url,mediaType:me.Je.Mp4},t.sourceDynamicMediaInfo={width:y,height:b,url:C.url,name:c.name,mediaUrl:C.url,type:me.Je.Mp4,objectUrl:URL.createObjectURL(c),cropDetailInfo:{timeInfo:{},cropInfo:{}}},t.showSourcePagEditorVisible=!0,a(),i.next=68;break;case 63:return i.prev=63,i.t1=i["catch"](47),t.coverErrorInfo={msg:i.t1.message},Bc.mediaUploadReport("22",{file:c,videoInfo:g,failReason:i.t1.message,errorCode:i.t1.checkResult}),i.abrupt("return",o());case 68:return i.prev=68,t.coverMaterialUploading=!1,i.finish(68);case 71:i.next=99;break;case 73:if(!/zip/.test(c.type)){i.next=99;break}return t.coverMaterialUploading=!0,_=+new Date,t.sourceBigFileUploader=new co.ZP(e.file,{cdnFileType:co.vB.zip}),i.next=79,Bc.bigFileUpload(e,t.sourceBigFileUploader);case 79:return x=i.sent,(0,Ht.H)("获取zip链接",JSON.stringify({uploadDuration:+new Date-_,res:x})),t.cover.packetMaterial.coverImageDynamicSource={mediaUrl:x.url,mediaName:c.name,mediaType:me.Je.Zip},i.prev=82,i.next=85,t.checkSourceImageZip(x.url,c);case 85:return t.coverMaterialUploading=!1,t.sourceDynamicMediaInfo={url:x.url,type:me.Je.Zip,name:c.name,width:Xe.TE.width,height:Xe.TE.height,mediaUrl:"",objectUrl:"",cropDetailInfo:{cropInfo:{cropWidth:Xe.TE.width,cropHeight:Xe.TE.height,cropLeft:0,cropTop:0,cropBoxWidth:0,cropBoxHeight:0,cropBoxLeft:0,cropBoxTop:0},timeInfo:{duration:-1,startTime:0}}},i.next=89,t.genPagMaterial(t.sourceDynamicMediaInfo.cropDetailInfo);case 89:a(),i.next=96;break;case 92:i.prev=92,i.t2=i["catch"](82),t.coverErrorInfo={msg:i.t2.message},o();case 96:return i.prev=96,t.coverMaterialUploading=!1,i.finish(96);case 99:case"end":return i.stop()}}),i,null,[[5,30,36,39],[47,63,68,71],[82,92,96,99]])})))()},openWidgetDescDialog:function(){this.widgetDescDialogVisible=!0},initScroll:function(){var e=this;document.addEventListener("scroll",(function(){var t=e.$refs.baseInfoMainCard,i=e.$refs.coverStyleMainCard,n=e.$refs.storyMainCard,a=e.$refs.previewCoverRef;if(t instanceof HTMLElement){var r=t.getBoundingClientRect(),o=r.top;o>50&&o<200&&1!==(null===a||void 0===a?void 0:a.selectedType)&&e.triggerToPreview(1,"bubble")}if(i instanceof HTMLElement){var s=i.getBoundingClientRect(),c=s.top;c>50&&c<300&&2!==(null===a||void 0===a?void 0:a.selectedType)&&e.triggerToPreview(2,"cover")}if(n instanceof HTMLElement){var l=n.getBoundingClientRect(),u=l.top;u>50&&u<300&&3!==(null===a||void 0===a?void 0:a.selectedType)&&e.triggerToPreview(3,"story")}}))},initNewCoverTips:function(){var e="NEW_COVER_TIPS",t=localStorage.getItem(e);this.showNewCoverTips=!t,localStorage.setItem(e,"1")},handlePackNameInput:function(e){e&&this.triggerToPreview(1,"bubble")},clickBreadcrumb:function(e,t){0===t&&this.$router.push({name:"covers"})},handleClickDownloadTemplate:function(){this.isClickDownload=!0},setLayoutPageSimpleRightWrpOverflow:function(e){var t=document.querySelector(".weui-desktop-layout__page-simple__right-wrp");t instanceof HTMLElement&&(t.style.overflow="mounted"===e?"visible":"auto")},handleBeforeCoverTypeChange:function(e){var t=this.cover.packetMaterial,i=t.sourceImage,n=t.recWidgetImage,a=t.senderC2cWidgetImage;(null!==i&&void 0!==i&&i.mediaUrl||null!==n&&void 0!==n&&n.mediaUrl||null!==a&&void 0!==a&&a.mediaUrl)&&(e.preventDefault(),this.clearMaterialVisible=!0)},clearCropedImgList:function(){this.cropedImgList={sourceImageUrl:"",receiveImageUrl:"",detailImageUrl:"",bubbleImageUrl:"",openImageUrl:"",corpImageUrl:""}},resetSourceDynamicMediaInfo:function(){this.sourceDynamicMediaInfo={name:"",url:"",mediaUrl:"",objectUrl:"",type:me.Je.Unknow,width:0,height:0,cropDetailInfo:{cropInfo:{},timeInfo:{}}}},clearAllDynamicUploadLoading:function(){this.coverDynamicPagLoading=!1,this.sourcePagLoading=!1,this.corpPagLoading=!1,this.bubblePagLoading=!1},clearBubbleDynamicMaterial:function(){this.cover.packetMaterial.bubbleImageDynamicEnd={},this.cover.packetMaterial.bubbleImageDynamicSource={},this.cover.packetMaterial.bubbleImageDynamic={},m.l1.updatePreviewPagReinit("bubble")},cleayCoverDynamicMaterial:function(){this.cover.packetMaterial.sourceImageDynamic={},this.cover.packetMaterial.coverImageDynamicSource={},this.setCoverImageDynamic(),this.clearBubbleDynamicMaterial(),this.cover.packetMaterial.corpLogoDynamic={},this.cover.packetMaterial.detailImageDynamic={},this.cover.packetMaterial.corpLogoDynamicSource={},this.cover.packetMaterial.detailImageDynamicSource={},this.coverImageDynamicBeforeUploadWidget={},this.useStaticBubblePic=!1,this.useStaticCorpPic=!1,this.coverMaterialUploading=!1,this.getFirstFrameLoading=!1,this.resetSourceDynamicMediaInfo(),this.clearAllDynamicUploadLoading()},clearCoverPic:function(){this.imgFileList=[],this.coverImg={},this.cover.packetMaterial.sourceImage={},this.cover.packetMaterial.openImage={},this.cover.packetMaterial.sourceImage={},this.cover.packetMaterial.syntheticWidgetImage={},this.cleayCoverDynamicMaterial(),this.clearCropedImgList(),this.coverImgUploading=!1},clearRecWidgetPic:function(){var e,t,i,n;(this.recWidgetImageList=[],this.cover.packetMaterial.recWidgetImage={},this.recWidgetUploading=!1,null!==(e=this.cover.packetMaterial.widgetImageDynamicSource)&&void 0!==e&&e.mediaUrl)&&(this.cover.packetMaterial.widgetImageDynamicSource={},this.sourceDynamicMediaInfo.type===me.Je.Image?this.cleayCoverDynamicMaterial():null!==(t=this.coverImageDynamicBeforeUploadWidget)&&void 0!==t&&t.mediaUrl?this.setCoverImageDynamic({pagUrl:null===(i=this.coverImageDynamicBeforeUploadWidget)||void 0===i?void 0:i.mediaUrl,pagMd5:null===(n=this.coverImageDynamicBeforeUploadWidget)||void 0===n?void 0:n.mediaMd5}):this.sourceDynamicMediaInfo.url&&((0,Ht.H)("挂件被删除，没有存上一个coverImageDynamic，重新走生成流程"),this.genPagMaterial(this.sourceDynamicMediaInfo.cropDetailInfo,"coverDynamicMaterial")));this.triggerToPreview(2,"cover"),m.l1.updatePreviewPagReinit("cover")},handleDeleteRecWidget:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.clearRecWidgetPic(),null===(i=e.cover.packetMaterial)||void 0===i||null===(n=i.sourceImage)||void 0===n||!n.mediaUrl){t.next=24;break}return e.reUploadOpenImageLoading=!0,t.prev=3,t.next=6,(0,Xe.JE)({coverUrl:e.cropedImgList.sourceImageUrl||(null===(a=e.cover.packetMaterial.sourceImage)||void 0===a?void 0:a.mediaUrl),scale:.4});case 6:if(o=t.sent,!o){t.next=21;break}return e.cropedImgList.openImageUrl=o,t.next=11,(0,Hs.U)(o,{image_name:"openImage",order_id:null===e||void 0===e||null===(s=e.cover)||void 0===s?void 0:s.orderId});case 11:if(l=t.sent,0===(null===l||void 0===l||null===(c=l.baseResponse)||void 0===c?void 0:c.ret)){t.next=18;break}return e.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),(0,Ht.H)("素材上传失败",JSON.stringify({type:"openImage",res:l})),t.abrupt("return");case 18:u=(0,_e.KG)(o),e.cover.packetMaterial.openImage={mediaUrl:l.url,mediaType:me.Je.Image,mediaMd5:l.md5,mediaName:"openImage",mediaSize:u.size},(0,Ht.H)("删除挂件后重新上传带开图",l.url);case 21:return t.prev=21,e.reUploadOpenImageLoading=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[3,,21,24]])})))()},clearC2cWidgetPic:function(){this.senderC2cWidgetImageList=[],this.cover.packetMaterial.senderC2cWidgetImage={},this.cover.packetMaterial.receiverC2cWidgetImage={},this.triggerToPreview(2,"bubble")},clearDetail_Corp_Bubble_Open_Receive_Material:function(){this.cover.packetMaterial.bubbleImage={},this.bubbleImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.detailImage={},this.detailImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.openImage={},this.openImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.corpImage={},this.corpImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.receiveImage={}},clearUploadedCoverMaterial:function(){this.clearCoverPic(),this.clearCropedImgList(),this.cover.packetMaterial.syntheticWidgetImage={}},clearAllCoverMaterial:function(){s.ZP.prototype.genVersion+=1,this.clearUploadedCoverMaterial(),this.clearDetail_Corp_Bubble_Open_Receive_Material(),this.triggerToPreview(2,"cover")},cancelChangeCoverType:function(){this.clearMaterialVisible=!1},generateOrderId:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.cover.orderId){t.next=3;break}return(0,Ht.H)("已有封面ID",JSON.stringify({orderId:e.cover.orderId})),t.abrupt("return");case 3:return t.next=5,qc.coverGenOrderId();case 5:i=t.sent,0===(null===i||void 0===i?void 0:i.baseResponse.ret)?(e.cover.orderId=i.orderId,(0,Ht.H)("获取封面ID",JSON.stringify({orderId:e.cover.orderId}))):e.tryGenOrderIdTimes<5?(e.tryGenOrderIdTimes++,window.setTimeout((function(){e.generateOrderId()}),1e3)):e.errorTip("封面保存异常，请稍后重试");case 7:case"end":return t.stop()}}),t)})))()},autoLogoFillIn:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.logoUploading=!0,t.prev=1,t.next=4,(0,_e.bi)(e.headImgUrl,200,200);case 4:return a=t.sent,t.next=7,(0,Hs.U)(a,{image_name:"logo",order_id:null===e||void 0===e||null===(i=e.cover)||void 0===i?void 0:i.orderId});case 7:o=t.sent,s=(0,_e.KG)(a),e.logoFileList=[{name:"logo（".concat(ai(s.size||0).toUpperCase(),"）"),url:null===o||void 0===o?void 0:o.url,status:"uploading",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:s.size,percent:100,originFileObj:{}}],0===(null===o||void 0===o||null===(n=o.baseResponse)||void 0===n?void 0:n.ret)?(e.cover.brandLogo={mediaUrl:null===o||void 0===o?void 0:o.url,mediaType:me.Je.Image,mediaMd5:null===o||void 0===o?void 0:o.md5,mediaName:"logo",mediaSize:s.size},e.logoFileList[0]&&(e.logoFileList[0].status="success"),e.triggerToPreview(1,"bubble")):((0,Ht.H)("素材上传失败",JSON.stringify({type:"logo",res:o})),e.errorTip("Logo图片上传失败，请重新上传重试，或联系客服"),e.logoFileList[0]&&(e.logoFileList[0].status="error")),t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](1),(0,Ht.H)("素材上传失败",JSON.stringify({type:"logo catch",err:t.t0})),e.errorTip("Logo图片上传失败，请重新上传重试，或联系客服"),e.logoFileList[0]&&(e.logoFileList[0].status="error");case 18:return t.prev=18,e.logoUploading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,13,18,21]])})))()},setOfinderInfo:function(e){console.log("setOfinderInfo"+JSON.stringify(e)),this.OfinderInfo=e},changeImg:function(e){var t=e.key;e.value;switch(t){case"bubbleImg":this.triggerToPreview(2,"bubble"),this.cover.packetMaterial.bubbleImageDynamic={},this.cover.packetMaterial.bubbleImageDynamicSource={},this.useStaticBubblePic=!1;break;case"corpImg":this.triggerToPreview(2,"corp"),this.cover.packetMaterial.corpLogoDynamic={},this.cover.packetMaterial.corpLogoDynamicSource={},this.useStaticBubblePic=!1;break;case"detailImg":this.triggerToPreview(2,"detail"),this.cover.packetMaterial.detailImageDynamic={},this.cover.packetMaterial.detailImageDynamicSource={}}},setBeforeUnloadMsg:function(){var e=this;$c.windowBeforeUnloadMsg="",$c.addEventListener("beforeunload",(function(t){if(!e.isClickDownload)return $c.windowBeforeUnloadMsg?(t.preventDefault(),$c.windowBeforeUnloadMsg?(t.returnValue=$c.windowBeforeUnloadMsg,$c.windowBeforeUnloadMsg):void 0):void 0;e.isClickDownload=!1})),$c.windowBeforeUnloadMsg="尚未保存，确认离开？"},recommendInfo:function(e){this.recommend&&(this.setOfinderInfo(e),this.saveVideo=e,this.recommend=!1)},clearSaveVideo:function(){this.saveVideo={}},initSouceCover:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,c,l,u,d,p,v,f,h,g,y,b,w,C,_,x,I,k,T,S,A,D,P,Z,U,E,R;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$route.params.cover,e.cover.packetName||(e.cover.packetName=e.nickname),!i){t.next=37;break}if(e.cover=Object.assign(e.cover,i),null!==i&&void 0!==i&&null!==(n=i.packetMaterial)&&void 0!==n&&null!==(a=n.storyDetailList)&&void 0!==a&&a.length&&(e.showCoverStory=!0,s.ZP.set(e.cover.packetMaterial,"storyDetailList",i.packetMaterial.storyDetailList)),(null!==i&&void 0!==i&&null!==(o=i.packetMaterial)&&void 0!==o&&null!==(c=o.actionList)&&void 0!==c&&c.length||e.actionAuthInfo.action)&&(s.ZP.set(e.cover.packetMaterial,"actionList",(null===i||void 0===i||null===(_=i.packetMaterial)||void 0===_?void 0:_.actionList)||[null===(x=e.actionAuthInfo)||void 0===x?void 0:x.action]),e.handleSetAction((null===i||void 0===i||null===(I=i.packetMaterial)||void 0===I||null===(k=I.actionList)||void 0===k?void 0:k[0])||(null===(T=e.actionAuthInfo)||void 0===T?void 0:T.action))),e.cropedImgList=(0,_e.GM)(e.cover),S=e.cover.packetMaterial.sourceImage,e.coverImg={name:(null===S||void 0===S?void 0:S.mediaName)||"封面图片",url:null===S||void 0===S?void 0:S.mediaUrl},e.bubbleImg=null!==(l=null===i||void 0===i||null===(u=i.packetMaterial)||void 0===u?void 0:u.bubbleImage)&&void 0!==l?l:null,e.detailImg=null!==(d=null===i||void 0===i||null===(p=i.packetMaterial)||void 0===p?void 0:p.detailImage)&&void 0!==d?d:null,e.corpImg=null!==(v=null===i||void 0===i||null===(f=i.packetMaterial)||void 0===f?void 0:f.corpImage)&&void 0!==v?v:null,e.openImg=null!==(h=null===i||void 0===i||null===(g=i.packetMaterial)||void 0===g?void 0:g.openImage)&&void 0!==h?h:null,e.imgFileList=[{name:"".concat(null===S||void 0===S?void 0:S.mediaName),url:null===S||void 0===S?void 0:S.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:null===S||void 0===S?void 0:S.mediaSize,percent:100,originFileObj:{}}],e.saveFile=e.imgFileList[0],A=e.cover.proofMaterial,null!==A&&void 0!==A&&A.mediaUrl&&(e.evidenceFileList=[{name:"".concat(A.mediaName,"（").concat(ai(A.mediaSize||0).toUpperCase(),"）"),url:A.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:A.mediaSize,percent:100,originFileObj:{}}]),e.cover.actionAuthInfo&&(e.$store.commit("cover/SET_ACTION_AUTH_INFO",e.cover.actionAuthInfo),m.l1.genQrcodePic()),D=null===i||void 0===i||null===(y=i.packetMaterial)||void 0===y?void 0:y.recWidgetImage,P=null===i||void 0===i||null===(b=i.packetMaterial)||void 0===b?void 0:b.senderC2cWidgetImage,null!==D&&void 0!==D&&D.mediaUrl&&(e.recWidgetImageList=[{name:"".concat(D.mediaName,"（").concat(ai(D.mediaSize||0).toUpperCase(),"）"),url:D.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:D.mediaSize,percent:100,originFileObj:{}}],s.ZP.set(e.cover.packetMaterial,"recWidgetImage",D)),null!==P&&void 0!==P&&P.mediaUrl&&(e.senderC2cWidgetImageList=[{name:"".concat(P.mediaName,"（").concat(ai(P.mediaSize||0).toUpperCase(),"）"),url:P.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:P.mediaSize,percent:100,originFileObj:{}}],s.ZP.set(e.cover.packetMaterial,"senderC2cWidgetImage",P)),null!==(w=i.packetMaterial)&&void 0!==w&&w.coverImageDynamicType&&s.ZP.set(e.cover.packetMaterial,"coverImageDynamic",i.packetMaterial.coverImageDynamic),null===(C=i.packetMaterial)||void 0===C||!C.pagEditInfo){t.next=37;break}if(t.prev=24,U=JSON.parse(null===(Z=i.packetMaterial)||void 0===Z?void 0:Z.pagEditInfo),U.sourceDynamicMediaInfo.type!==me.Je.Mp4){t.next=31;break}return t.next=29,(0,rt.xY)(U.sourceDynamicMediaInfo.mediaUrl||"");case 29:E=t.sent,e.sourceDynamicMediaInfo.objectUrl=E;case 31:e.sourceDynamicMediaInfo=U.sourceDynamicMediaInfo,t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](24),(0,Ht.H)("parse_pagEditInfo_error",JSON.stringify(null===(R=i.packetMaterial)||void 0===R?void 0:R.pagEditInfo));case 37:setTimeout((function(){e.triggerToPreview(1,"bubble"),e.previewCoverReady=!0}),500);case 38:case"end":return t.stop()}}),t,null,[[24,34]])})))()},goToProofInstruction:function(){window.open("https://".concat(this.pageHost,"/cgi-bin/mmcover-bin/readtemplate?t=page/index#/doc?page=design&index=4"),"_blank")},storyDescCounter:function(e){return"".concat(Math.ceil((0,_e.Nu)(e)/2))},handleRecWidgetFile:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,n=e,a=n.name,o=n.uid,i.next=4,(0,_e.sT)(e);case 4:return s=i.sent,i.next=7,(0,_e.Z2)(s,Xe.g$.width,Xe.g$.height);case 7:return c=i.sent,e=(0,_e.Ll)(c,a),e.uid=o,(0,Ht.H)("挂件图片扩图成功",JSON.stringify({orderId:t.cover.orderId})),i.abrupt("return",Promise.resolve(e));case 14:i.prev=14,i.t0=i["catch"](0),t.errorTip("挂件图片合成失败"),(0,Ht.H)("挂件图片合成失败",JSON.stringify({errMsg:null===i.t0||void 0===i.t0?void 0:i.t0.message}));case 18:case"end":return i.stop()}}),i,null,[[0,14]])})))()},handleAtmosphereBeforeUpload:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.clearAllAtmosphere(),t.atmosphereErrorInfo={},i.next=4,(0,_e.Hc)(e,{kbLimit:il,imgSize:{width:el,height:tl}});case 4:n=i.sent,i.t0=n.status,i.next="wrong_pic_size"===i.t0?8:"wrong_file_size"===i.t0?10:12;break;case 8:return t.atmosphereErrorInfo={msg:"图片尺寸需要为300x300像素"},i.abrupt("return",Promise.reject());case 10:return t.atmosphereErrorInfo={file:e,type:"wrong_file_size",msg:"图片大小不可超过".concat(il,"KB")},i.abrupt("return",Promise.reject());case 12:return i.abrupt("break",13);case 13:case"end":return i.stop()}}),i)})))()},handelCoverImgBeforeUpload:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,c,l,u,d,p,v,m;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s.ZP.prototype.$isAtmosphereUser=t.isAtmosphereUser,t.showAtmosphereTips=!1,n=Xe.TE.width,a=Xe.TE.height,!/png|jpe?g/.test(e.type)){i.next=23;break}return o=500,i.next=7,(0,_e.Hc)(e,{kbLimit:o,imgSize:{width:n,height:a}});case 7:c=i.sent,i.t0=c.status,i.next="wrong_pic_size"===i.t0?11:"wrong_file_size"===i.t0?17:20;break;case 11:return t.cropperSourceImgInfo.name=e.name,t.cropperSourceImgInfo.objectUrl=URL.createObjectURL(e),t.showSourcePagEditorVisible=!0,t.coverErrorInfo={},Bc.mediaUploadReport("33",{file:e,failReason:"图片尺寸不对，需要裁剪"}),i.abrupt("return",Promise.reject());case 17:return t.coverErrorInfo={file:e,type:"wrong_file_size",msg:"图片大小不可超过".concat(o,"KB")},Bc.mediaUploadReport("22",{file:e,failReason:"图片大小不可超过".concat(o,"KB")}),i.abrupt("return",Promise.reject());case 20:return i.abrupt("break",21);case 21:i.next=54;break;case 23:if((0,Yr.sV)(),!/mp4/.test(e.type)){i.next=48;break}return i.next=27,(0,rt.$p)(e);case 27:if(l=i.sent,!(e.size>Yc)){i.next=33;break}return u="视频大小不可超过".concat(Math.floor(Yc/1024/1024),"MB"),t.coverErrorInfo={file:e,type:"wrong_file_size",msg:u},Bc.mediaUploadReport("22",{file:e,videoInfo:l,failReason:u}),i.abrupt("return",Promise.reject());case 33:if(!(l.width>2160||l.height>3840)){i.next=38;break}return d="素材尺寸不可超过2160x3840",t.coverErrorInfo={file:e,type:"wrong_file_size",msg:d},Bc.mediaUploadReport("33",{file:e,videoInfo:l,failReason:d}),i.abrupt("return",Promise.reject());case 38:if(!(l.duration<1)){i.next=43;break}return p="视频时长不可低于1秒",t.coverErrorInfo={file:e,type:"wrong_file_size",msg:p},Bc.mediaUploadReport("22",{file:e,videoInfo:l,failReason:p}),i.abrupt("return",Promise.reject());case 43:if(!(l.duration>60)){i.next=48;break}return v="视频时长不可超过60秒",t.coverErrorInfo={file:e,type:"wrong_file_size",msg:v},Bc.mediaUploadReport("22",{file:e,videoInfo:l,failReason:v}),i.abrupt("return",Promise.reject());case 48:if(!/zip/.test(e.type)){i.next=54;break}if(m="压缩包大小不可超过".concat(Math.floor(Kc/1024/1024),"MB"),!(e.size>Kc)){i.next=54;break}return t.coverErrorInfo={file:e,type:"wrong_file_size",msg:m},Bc.mediaUploadReport("22",{file:e,failReason:m}),i.abrupt("return",Promise.reject());case 54:t.clearCoverPic(),t.coverErrorInfo={},t.cropperSourceImgInfo={objectUrl:"",name:""},t.generateOrderId();case 58:case"end":return i.stop()}}),i)})))()},checkRecWidgetImage:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o,s,c,l,u,d,p,v,m;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a="dynamic"===t?99999:300,o=Xe.g$.width,s=Xe.g$.sourceHeight,c=Xe.g$.banEditHeight,l=Xe.g$.banEditWidth,u=Xe.g$.banEditY,d=Xe.g$.banEditX,n.next=4,(0,_e.Hc)(e,{kbLimit:a,imgSize:{width:o,height:s}});case 4:p=n.sent,v="dynamic"===t?"序列帧图片尺寸需为".concat(o,"x").concat(s,"像素"):"图片尺寸需为".concat(o,"x").concat(s,"像素"),n.t0=p.status,n.next="wrong_pic_size"===n.t0?9:"wrong_file_size"===n.t0?11:13;break;case 9:throw i.coverWidgetErrorInfo={msg:v},new Error(v);case 11:throw i.coverWidgetErrorInfo={file:e,type:"wrong_file_size",msg:"图片大小不可超过".concat(a,"KB")},new Error("图片大小不可超过".concat(a,"KB"));case 13:return n.abrupt("break",14);case 14:return n.next=16,(0,_e.gn)(e,{x:d,y:u,width:l,height:c});case 16:if(m=n.sent,m){n.next=20;break}throw i.coverWidgetErrorInfo={type:"transparent_area_cover_widget",file:e},new Error(nl);case 20:case"end":return n.stop()}}),n)})))()},checkRecWidgetZip:function(e,t){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o,s,c,l,u,d,p,v,m,f,h;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,Yr.su)(e);case 2:if(a=n.sent,o=null===a||void 0===a?void 0:a.zipWidgetUrl,!(a.zipPicNum>Pa.QV)){n.next=8;break}throw s="压缩包内图片不能超过".concat(Pa.QV,"张，请检查"),Bc.mediaUploadReport("24",{file:t,failReason:s,picCnt:a.zipPicNum}),new Error(s);case 8:if(!(a.zipPicNum<Pa.yY)){n.next=12;break}throw c="压缩包内图片不能少于".concat(Pa.yY,"张，请检查"),Bc.mediaUploadReport("24",{file:t,failReason:c,picCnt:a.zipPicNum}),new Error(c);case 12:if(o){n.next=15;break}throw(0,Ht.H)("获取不到zipWidgetUrl",JSON.stringify(a)),new Error("获取不到静态挂件图");case 15:return n.next=17,(0,_e.dd)(o);case 17:return l=n.sent,n.next=20,(0,_e.Ll)(l);case 20:return u=n.sent,n.prev=21,n.next=24,i.checkRecWidgetImage(u,"dynamic");case 24:return n.next=26,(0,_e.Z2)(l,Xe.g$.width,Xe.g$.height);case 26:return p=n.sent,v=(0,_e.Ll)(p),n.next=30,(0,Hs.U)(p,{image_name:"recWidgetImage",order_id:null===i||void 0===i||null===(d=i.cover)||void 0===d?void 0:d.orderId},{type:"recWidgetImage"});case 30:if(m=n.sent,0===(null===m||void 0===m?void 0:m.baseResponse.ret)){n.next=33;break}throw new Error("静态挂件图上传失败，请重试(".concat(null!==(f=null===m||void 0===m||null===(h=m.baseResponse)||void 0===h?void 0:h.ret)&&void 0!==f?f:"",")"));case 33:i.setRecWidgetImage({dataUrl:p,name:t.name||"封面挂件.png",uid:+Date.now(),size:v.size,percent:100,status:"done",originFileObj:{file:v},response:{url:m.url,md5:m.md5},url:m.url}),n.next=41;break;case 36:throw n.prev=36,n.t0=n["catch"](21),(0,Ht.H)("checkRecWidgetZipError",JSON.stringify(n.t0)),Bc.mediaUploadReport("24",{file:t,failReason:n.t0.message,picCnt:null===a||void 0===a?void 0:a.zipPicNum}),n.t0;case 41:return n.abrupt("return",a);case 42:case"end":return n.stop()}}),n,null,[[21,36]])})))()},getRecWidgetMaterial:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,c,l,u,d,p,v,f,h,g,y,b,w;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.coverMaterialUploading&&e.sourceDynamicMediaInfo.url){t.next=3;break}return(0,Ht.H)("动态封面原素材还没传完，hold on",JSON.stringify({coverMaterialUploading:e.coverMaterialUploading,sourceDynamicMediaInfo:e.sourceDynamicMediaInfo})),t.abrupt("return");case 3:return i=e.cover.packetMaterial,n=i.widgetImageDynamicSource,a=i.recWidgetImage,(0,Ht.H)("invoke getRecWidgetMaterial",JSON.stringify({widgetImageDynamicSource:n,recWidgetImage:a})),o=s.ZP.prototype.genVersion,e.dynamicRecWidgetUploading=!0,c=e.sourceDynamicMediaInfo.cropDetailInfo,l=c.cropInfo,u=l.cropWidth,d=l.cropHeight,p=l.cropLeft,v=l.cropTop,f=c.timeInfo,h=f.duration,g=f.startTime,null!==n&&void 0!==n&&n.mediaUrl||((0,Ht.H)("widgetImageDynamicSource空，用recWidgetImage",JSON.stringify({recWidgetImage:a})),e.cover.packetMaterial.widgetImageDynamicSource=a),t.prev=9,1===e.cover.packetMaterial.coverImageDynamicType&&(e.coverImageDynamicBeforeUploadWidget=e.cover.packetMaterial.coverImageDynamic||{},(0,Ht.H)("保存上一个coverImageDynamic",JSON.stringify({coverImageDynamicBeforeUploadWidget:e.coverImageDynamicBeforeUploadWidget}))),t.next=13,(0,Yr.at)({base:{file_type:Pa.Eu[e.sourceDynamicMediaInfo.type],file_url:e.sourceDynamicMediaInfo.url,w:u,h:d,x:p,y:v,duration:h,start_time:g},above:{file_type:(null===(y=e.cover.packetMaterial.widgetImageDynamicSource)||void 0===y?void 0:y.mediaType)===me.Je.Zip?me.p0.ZIP:me.p0.PNG,file_url:null===(b=e.cover.packetMaterial.widgetImageDynamicSource)||void 0===b?void 0:b.mediaUrl}});case 13:if(w=t.sent,e.sourceDynamicMediaInfo.type!==me.Je.Image||(null===n||void 0===n?void 0:n.mediaType)!==me.Je.Image){t.next=17;break}return(0,Ht.H)("封面和挂件都是静态的，但是走到了getRecWidgetMaterial",JSON.stringify({sourceDynamicMediaInfo:e.sourceDynamicMediaInfo,widgetImageDynamicSource:n})),t.abrupt("return");case 17:if(!(o<s.ZP.prototype.genVersion)){t.next=19;break}return t.abrupt("return");case 19:if(!w.pagUrl){t.next=25;break}(0,Ht.H)("拿到recWidgetCoverMaterial",JSON.stringify({recWidgetCoverMaterial:w})),e.setCoverImageDynamic({pagUrl:w.pagUrl,pagMd5:w.pagMd5}),m.l1.updatePreviewPagReinit("cover"),t.next=27;break;case 25:throw(0,Ht.H)("rec_widget_dynamic_error",JSON.stringify(w)),new Error("异形素材生成失败");case 27:t.next=36;break;case 29:if(t.prev=29,t.t0=t["catch"](9),!(o<s.ZP.prototype.genVersion)){t.next=33;break}return t.abrupt("return");case 33:throw e.clearRecWidgetPic(),e.coverWidgetErrorInfo={msg:t.t0.message||"挂件素材生成错误，请重试"},t.t0;case 36:return t.prev=36,e.dynamicRecWidgetUploading=!1,t.finish(36);case 39:case"end":return t.stop()}}),t,null,[[9,29,36,39]])})))()},setPicDynamicMediaInfo:function(){var e=this.cover.packetMaterial.sourceImage;(0,Ht.H)("设置静态封面为动态素材",JSON.stringify({sourceImage:e})),this.sourceDynamicMediaInfo={name:(null===e||void 0===e?void 0:e.mediaName)||"封面素材.jpg",url:(null===e||void 0===e?void 0:e.mediaUrl)||"",mediaUrl:(null===e||void 0===e?void 0:e.mediaUrl)||"",width:0,height:0,type:me.Je.Image,objectUrl:"",cropDetailInfo:{cropInfo:{cropWidth:-1,cropHeight:-1,cropLeft:-1,cropTop:-1},timeInfo:{startTime:0,duration:-1}}},this.cover.packetMaterial.coverImageDynamicSource={mediaType:me.Je.Image,mediaUrl:null===e||void 0===e?void 0:e.mediaUrl}},uploadRecWidgetImage:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,s,c,l,u,d,p,v,m,f,h,g,y,b,w;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.onSuccess,a=e.onError,s=e.file,c="",l="",u="",d=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var i,o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!(0,rt.NL)(s.type),(0,Ht.H)("检查是否要合成动态异形封面",JSON.stringify({isDynamicRecWidget:i,fileType:null===s||void 0===s?void 0:s.type,coverImageDynamicType:t.cover.packetMaterial.coverImageDynamicType})),!(t.cover.packetMaterial.coverImageDynamicType||t.sourceDynamicMediaInfo.url||i||t.dynamicMaterialUploading)){e.next=18;break}return(0,Ht.H)("异形素材放入widgetImageDynamicSource"),t.cover.packetMaterial.widgetImageDynamicSource={mediaType:(0,rt.NL)(s.type)?me.Je.Image:me.Je.Zip,mediaUrl:(0,rt.NL)(s.type)?c:u,mediaMd5:l,mediaName:s.name},null!==(o=t.cover.packetMaterial.sourceImage)&&void 0!==o&&o.mediaUrl&&!t.coverMaterialUploading&&!t.cover.packetMaterial.coverImageDynamicType&&i&&((0,Ht.H)("【静态封面+动态挂件】"),t.setPicDynamicMediaInfo()),e.prev=6,(0,Ht.H)("开始getRecWidgetMaterial"),e.next=10,t.getRecWidgetMaterial();case 10:n(),e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](6),console.error(e.t0),a(),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),t.coverDynamicPagLoading=!0,i.prev=6,!(0,rt.NL)(s.type)){i.next=31;break}return i.prev=8,i.next=11,(0,Hs.U)(s,{image_name:"recWidgetImage",order_id:null===t||void 0===t||null===(p=t.cover)||void 0===p?void 0:p.orderId},{type:"recWidgetImage"});case 11:return v=i.sent,t.validUploadRes(v,"recWidgetImage"),c=(null===v||void 0===v?void 0:v.url)||"",l=(null===v||void 0===v?void 0:v.md5)||"",i.next=17,(0,_e.sT)(s);case 17:return m=i.sent,t.setRecWidgetImage({dataUrl:m,name:s.name||"封面挂件.png",uid:+Date.now(),size:s.size,percent:100,status:"done",originFileObj:{file:s},response:{url:null===v||void 0===v?void 0:v.url,md5:null===v||void 0===v?void 0:v.md5},url:(null===v||void 0===v?void 0:v.url)||""}),i.next=21,d();case 21:n(),i.next=29;break;case 24:i.prev=24,i.t0=i["catch"](8),t.recWidgetImageList=[t.saveRecWidgetImageFile],t.coverWidgetErrorInfo={msg:i.t0.message},a();case 29:i.next=65;break;case 31:return f=+new Date,h=new co.ZP(e.file,{cdnFileType:co.vB.zip}),i.next=35,Bc.bigFileUpload(e,h);case 35:return g=i.sent,(0,Ht.H)("获取挂件zip",JSON.stringify({uploadDuration:+new Date-f,res:g,orderId:t.cover.orderId})),u=g.url,i.prev=38,i.next=41,t.checkRecWidgetZip(u,e.file);case 41:y=i.sent,Bc.mediaUploadReport("23",{file:s,picCnt:null===y||void 0===y?void 0:y.zipPicNum}),i.next=53;break;case 45:return i.prev=45,i.t1=i["catch"](38),b=i.t1.message,b!==nl&&(t.coverWidgetErrorInfo={msg:b}),(0,Ht.H)("检查挂件压缩包有异常",JSON.stringify({zipUrl:u,errMsg:null===i.t1||void 0===i.t1?void 0:i.t1.message})),Bc.mediaUploadReport("24",{file:s,failReason:i.t1.message,errorCode:null===i.t1||void 0===i.t1?void 0:i.t1.checkResult,picCnt:null===i.t1||void 0===i.t1?void 0:i.t1.zipPicNum}),a(),i.abrupt("return");case 53:return i.prev=53,i.next=56,d();case 56:n(),i.next=65;break;case 59:i.prev=59,i.t2=i["catch"](53),w=i.t2.message,t.coverWidgetErrorInfo={msg:w},(0,Ht.H)("合成动态挂件异常",JSON.stringify({errMsg:null===i.t2||void 0===i.t2?void 0:i.t2.message})),a();case 65:return i.prev=65,t.coverDynamicPagLoading=!1,i.finish(65);case 68:case"end":return i.stop()}}),i,null,[[6,,65,68],[8,24],[38,45],[53,59]])})))()},handelRecWidgetImageBeforeUpload:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.clearRecWidgetPic(),t.coverWidgetErrorInfo={},!(0,rt.NL)(e.type)){i.next=16;break}return i.prev=3,i.next=6,t.checkRecWidgetImage(e);case 6:return i.next=8,t.handleRecWidgetFile(e);case 8:e=i.sent,i.next=14;break;case 11:return i.prev=11,i.t0=i["catch"](3),i.abrupt("return",Promise.reject());case 14:i.next=21;break;case 16:if(!(e.size>Xc)){i.next=21;break}return n="压缩包大小不可超过".concat(Xc/1024/1024,"MB"),Bc.mediaUploadReport("24",{file:e,failReason:n}),t.coverWidgetErrorInfo={msg:n},i.abrupt("return",Promise.reject());case 21:return i.abrupt("return",Promise.resolve(e));case 22:case"end":return i.stop()}}),i,null,[[3,11]])})))()},handelSenderC2cWidgetImageBeforeUpload:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l,u,d,p;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.clearC2cWidgetPic(),t.bubbleWidgetErrorInfo={},n=Xe._N.width,a=Xe._N.height,o=Xe._N.banEditHeight,s=Xe._N.banEditWidth,c=Xe._N.banEditY,l=Xe._N.banEditX,u=300,i.next=6,(0,_e.Hc)(e,{kbLimit:u,imgSize:{width:n,height:a}});case 6:d=i.sent,i.t0=d.status,i.next="wrong_pic_size"===i.t0?10:"wrong_file_size"===i.t0?13:16;break;case 10:return t.bubbleWidgetErrorInfo={file:e,type:"wrong_pic_size",msg:"图片尺寸需为".concat(n,"*").concat(a,"像素")},Bc.mediaUploadReport("26",{failReason:"图片尺寸需为".concat(n,"*").concat(a,"像素"),file:e}),i.abrupt("return",Promise.reject());case 13:return t.bubbleWidgetErrorInfo={file:e,type:"wrong_file_size",msg:"图片大小不可超过".concat(u,"KB")},Bc.mediaUploadReport("26",{failReason:"图片大小不可超过".concat(u,"KB"),file:e}),i.abrupt("return",Promise.reject());case 16:return i.abrupt("break",17);case 17:return i.next=19,(0,_e.gn)(e,{x:l,y:c,width:s,height:o});case 19:if(p=i.sent,p){i.next=24;break}return t.bubbleWidgetErrorInfo={type:"transparent_area_bubble_widget",file:e},Bc.mediaUploadReport("26",{failReason:"挂件超过编辑区",file:e}),i.abrupt("return",Promise.reject());case 24:case"end":return i.stop()}}),i)})))()},handelBrandLogoBeforeUpload:function(e,t){var i=this,n=new FileReader,a=new Promise((function(t,a){if(e.size>zc)return i.errorTip("图片大小不可超过100KB"),a(new Error("img is too big"));n.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){if(n.width>200||n.height>200||n.width!=n.height)return i.errorTip("图片尺寸需在 200*200像素 以内，且宽高相等"),a(new Error("wrong size"));t()}}}));return n.readAsDataURL(e),a},handleEnvidenceBeforeUpload:function(e){return e.size>Jc?(this.errorTip("文件大小不可超过"+Math.floor(Jc/1024/1024)+"MB"),Promise.reject(new Error("img is too big"))):Promise.resolve()},uploadFile:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.isFileUploading=!0,!(e.file.size>Vc)){i.next=9;break}return t.evidenceBigFileUploader=new co.ZP(e.file,{cdnFileType:co.vB.zip}),i.next=5,Bc.bigFileUpload(e,t.evidenceBigFileUploader);case 5:n=i.sent,n.url&&e.onSuccess({base_response:{ret:0},url:n.url}),i.next=10;break;case 9:t.uploadFileByCgi(e);case 10:case"end":return i.stop()}}),i)})))()},uploadFileByCgi:function(e){var t=new FormData;t.append("file",e.file),Fs().post($t.gm,t,{onUploadProgress:function(t){var i=t.total,n=t.loaded;e.onProgress({percent:Math.round(n/i*100)},e)}}).then((function(t){e.onSuccess(t.data,e)})).catch((function(){e.onError()}))},storyDescValidator:function(e,t,i){(0===(0,_e.Nu)(e)||(0,_e.Nu)(e)>80)&&i(new Error("请输入正确格式的故事描述"))},storyDescToLength:function(e){var t=(0,_e.Nu)(e)||0;return Math.ceil(t/2)},mergeWidgetCover:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l,u,d,p,v,m,f,h,g,y,b,w,C,_,x,I,k,T;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.mergeWidgetLoading=!0,b=null===(n=t.cover)||void 0===n||null===(a=n.packetMaterial)||void 0===a||null===(o=a.recWidgetImage)||void 0===o?void 0:o.mediaUrl,w=null===(s=t.cover)||void 0===s||null===(c=s.packetMaterial)||void 0===c||null===(l=c.sourceImage)||void 0===l?void 0:l.mediaUrl,2===t.coverType&&b&&w){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,(0,Xe.DC)({coverUrl:(null===(u=t.cropedImgList)||void 0===u?void 0:u.sourceImageUrl)||w,widgetUrl:e||b,scale:t.isAtmosphereUser?1:.5,useHbBottom:!0});case 7:return C=i.sent,e&&(0,Ht.H)("使用base64挂件图片合成"),null===(d=t.cropedImgList)||void 0===d||!d.sourceImageUrl||null!==(p=t.cropedImgList)&&void 0!==p&&null!==(v=p.sourceImageUrl)&&void 0!==v&&v.startsWith("http")||(0,Ht.H)("用cropedImgList?.sourceImageUrl合成挂件"),(0,Ht.H)("compositeWidgetPic_syntheticWidgetBase64_success"),i.next=13,(0,Hs.U)(C,{image_name:"syntheticWidgetImage",order_id:null===t||void 0===t||null===(m=t.cover)||void 0===m?void 0:m.orderId});case 13:if(_=i.sent,0===(null===_||void 0===_||null===(f=_.baseResponse)||void 0===f?void 0:f.ret)){i.next=20;break}return t.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),(0,Ht.H)("素材上传失败",JSON.stringify({type:"syntheticWidgetImage",res:_})),i.abrupt("return");case 20:x=(0,_e.KG)(C),t.cover.packetMaterial.syntheticWidgetImage={mediaUrl:_.url,mediaType:me.Je.Image,mediaMd5:_.md5,mediaName:"syntheticWidgetImage",mediaSize:x.size},(0,Ht.H)("saveCropedImg__synthetic_success",_.url);case 23:return i.next=25,(0,Xe.DC)({coverUrl:(null===(h=t.cropedImgList)||void 0===h?void 0:h.sourceImageUrl)||w,widgetUrl:e||b,scale:.5});case 25:return I=i.sent,(0,Ht.H)("compositeWidgetPic_openImageBase64_success"),i.next=29,(0,Hs.U)(I,{image_name:"openImage",order_id:null===t||void 0===t||null===(g=t.cover)||void 0===g?void 0:g.orderId});case 29:if(k=i.sent,0===(null===k||void 0===k||null===(y=k.baseResponse)||void 0===y?void 0:y.ret)){i.next=36;break}return t.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),(0,Ht.H)("素材上传失败",JSON.stringify({type:"openImage",res:k})),i.abrupt("return");case 36:T=(0,_e.KG)(I),t.cover.packetMaterial.openImage={mediaUrl:k.url,mediaType:me.Je.Image,mediaMd5:k.md5,mediaName:"openImage",mediaSize:T.size},(0,Ht.H)("saveCropedImg__openImage_success",k.url);case 39:t.mergeWidgetLoading=!1;case 40:case"end":return i.stop()}}),i)})))()},validUploadRes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=-2;if(e.baseResponse.ret===i)throw this.errorTip("仅支持PNG/JPG/JPEG"),new Error("仅支持PNG/JPG/JPEG");if(0!==e.baseResponse.ret)throw this.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),(0,Ht.H)("素材上传失败",JSON.stringify({type:t,res:e})),new Error("封面图片上传失败")},setCoverImg:function(e){this.coverImg={url:e.url,dataUrl:e.dataUrl,name:e.name},this.cover.packetMaterial.sourceImage={mediaType:me.Je.Image,mediaUrl:e.response.url,mediaMd5:e.response.md5,mediaName:e.name,mediaSize:e.size},e.url=e.response.url,this.cover.packetMaterial.isNewDetailImg=1,this.cropedImgList.sourceImageUrl=e.dataUrl||"",this.detailImg=null,this.corpImg=null,this.openImg=null,this.bubbleImg=null,this.saveFile=e,this.mergeWidgetCover(),this.triggerToPreview(2,"cover")},handleCoverImgChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.file,"done"===n.status||"error"===n.status?t.coverImgUploading=!1:"removed"===n.status?(t.coverImgUploading=!1,t.clearCoverPic()):(t.imgFileList=[n],t.coverImgUploading=!0);case 2:case"end":return i.stop()}}),i)})))()},triggerToPreview:function(e,t,i){var n;null===(n=this.$refs.previewCoverRef)||void 0===n||n.triggerToPreview(e,t,i)},setRecWidgetImage:function(e){this.cover.packetMaterial.recWidgetImage={mediaType:me.Je.Image,mediaUrl:e.response.url,mediaMd5:e.response.md5,mediaName:e.name,mediaSize:e.size},e.url=e.response.url,this.saveRecWidgetImageFile=e,this.mergeWidgetCover(e.dataUrl),this.triggerToPreview(2,"cover"),(0,Ht.H)("handleRecWidgetImageChange",e.response.url)},handleRecWidgetImageChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.file,"done"===n.status?t.recWidgetUploading=!1:"error"===n.status?(t.recWidgetUploading=!1,t.recWidgetImageList=[]):"removed"===n.status?(t.recWidgetUploading=!1,t.recWidgetImageList=[],t.cover.packetMaterial.recWidgetImage={},t.cover.packetMaterial.syntheticWidgetImage={}):(t.recWidgetImageList=[n],t.recWidgetUploading=!0);case 2:case"end":return i.stop()}}),i)})))()},handleAtmospherePagChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.file,"done"===n.status?(null!==(a=t.cover.packetMaterial.bubbleImageDynamic)&&void 0!==a&&a.mediaUrl&&(Oc.Z.info("因上传了氛围素材，红包气泡视频素材已替换为首帧图片"),t.showAtmosphereTips=!0),t.clearBubbleDynamicMaterial(),t.atmosphereUploading=!1,t.cover.packetMaterial.atmosphereSource={mediaType:me.Je.Image,mediaUrl:n.response.url,mediaMd5:n.response.md5,mediaName:n.name},t.cover.packetMaterial.compressedAtmosphereSource=t.cover.packetMaterial.atmosphereSource,t.getAtmosphereMaterial()):"error"===n.status?(t.atmosphereUploading=!1,t.atmosphereImageList=[]):"removed"===n.status?(t.atmosphereUploading=!1,t.clearAllAtmosphere()):(t.atmosphereImageList=[n],t.atmosphereUploading=!0);case 2:case"end":return i.stop()}}),i)})))()},handleAtmospherePagChangeTest:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.file,"done"===n.status?(t.atmosphereUploading=!1,t.cover.packetMaterial.atmosphereSource={mediaType:me.Je.Image,mediaUrl:n.response.url,mediaMd5:n.response.md5,mediaName:n.name},t.getAtmosphereMaterialTest()):"error"===n.status?(t.atmosphereUploading=!1,t.atmosphereImageList=[]):"removed"===n.status?(t.atmosphereUploading=!1,t.clearAllAtmosphere()):(t.atmosphereImageList=[n],t.atmosphereUploading=!0);case 2:case"end":return i.stop()}}),i)})))()},handleSenderC2cWidgetImageChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.file,"done"!==n.status){i.next=29;break}t.bubbleWidgetUploading=!1,a=n.response,i.prev=4,o=(0,Zc._)(a),t.validUploadRes(o,"senderC2cWidgetImage"),i.next=13;break;case 9:return i.prev=9,i.t0=i["catch"](4),t.senderC2cWidgetImageList=[t.saveSenderC2cWidgetImageFile],i.abrupt("return");case 13:return i.next=15,(0,_e.sT)(n.originFileObj);case 15:s=i.sent,n.dataUrl=s,t.cover.packetMaterial.senderC2cWidgetImage={mediaType:me.Je.Image,mediaUrl:n.response.url,mediaMd5:n.response.md5,mediaName:n.name,mediaSize:n.size},t.cover.packetMaterial.receiverC2cWidgetImage=t.cover.packetMaterial.senderC2cWidgetImage,n.fileSize=ai(n.size).toUpperCase(),n.name="".concat(n.name),n.url=n.response.url,t.senderC2cWidgetImageList=[n],t.saveSenderC2cWidgetImageFile=n,Bc.mediaUploadReport("25",{file:n}),(0,Ht.H)("handleSenderC2cWidgetImageChange",n.response.url),t.triggerToPreview(2,"bubble"),i.next=30;break;case 29:"error"===n.status?t.bubbleWidgetUploading=!1:"removed"===n.status?(t.bubbleWidgetUploading=!1,t.senderC2cWidgetImageList=[],t.senderC2cWidgetImage=null,t.cover.packetMaterial.senderC2cWidgetImage={},t.cover.packetMaterial.receiverC2cWidgetImage={}):(t.senderC2cWidgetImageList=[n],t.bubbleWidgetUploading=!0);case 30:case"end":return i.stop()}}),i,null,[[4,9]])})))()},toadmin:function(){this.$router.push({name:"administrator"})},handleCoverEvidenceFileChange:function(e){var t=e.file;"done"===t.status?(this.isFileUploading=!1,t.response&&0!==t.response.base_response.ret?(this.showEvidenceUploadError=!0,(0,Ht.H)("upload_file_error","ret=".concat(t.response.base_response.ret," fileSize=").concat(t.size))):this.showEvidenceUploadError=!1,this.cover.proofMaterial={mediaType:me.Je.File,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},t.fileSize=ai(t.size).toUpperCase(),t.name="".concat(t.name,"（").concat(t.fileSize,"）")):"removed"===t.status?(this.isFileUploading=!1,this.evidenceFileList=[],this.cover.proofMaterial={},this.showEvidenceUploadError=!1,this.evidenceBigFileUploader&&this.evidenceBigFileUploader.endUpload()):"error"===t.status?(this.showEvidenceUploadError=!0,this.isFileUploading=!1):(this.evidenceFileList=[t],this.showEvidenceUploadError=!1)},handleCoverLogoFileChange:function(e){var t=e.file;if(console.info("--- ~ handleCoverLogoFileChange ~ file:",t),"done"===t.status){this.logoUploading=!1;var i=t.response;if(-2===i.base_response.ret)return this.errorTip("仅支持PNG/JPG/JPEG"),void(this.logoFileList=[]);if(0!==i.base_response.ret)return(0,Ht.H)("素材上传失败",JSON.stringify({type:"brandLogo",res:i})),this.errorTip("Logo图片上传失败，请重新上传重试，或联系客服"),void(this.logoFileList=[]);this.cover.brandLogo={mediaUrl:t.response.url,mediaType:me.Je.Image,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},t.fileSize=ai(t.size).toUpperCase(),t.name="".concat(t.name,"（").concat(t.fileSize,"）"),this.triggerToPreview(1,"bubble")}else"error"===t.status?(this.errorTip("Logo图片上传失败，请重新上传重试"),this.logoUploading=!1):"removed"===t.status||(this.logoUploading=!0,this.logoFileList=[t])},handleMobilePreview:function(){this.setSubmitInfo(),this.showPreviewQrcodeDialog=!0},setSubmitInfo:function(){this.cover.actionAuthInfo=this.actionAuthInfo,this.sourceDynamicMediaInfo.objectUrl="",this.cover.packetMaterial.pagEditInfo=JSON.stringify({sourceDynamicMediaInfo:this.sourceDynamicMediaInfo})},submit:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d,p;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.checkForm();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return");case 8:return Bc.baseActionReport({actionType:"8",coverId:e.cover.orderId||"",authorId:m.U6.user.authorId}),e.submitStatus=1,t.next=12,e.generateOrderId();case 12:return e.setSubmitInfo(),t.next=15,qc.modifyCover(Ve.Z3.Submit,e.cover);case 15:if(n=t.sent,n&&0===n.baseResponse.ret){e.submitStatus=2,e.saveStatus=2;try{a=e.cover.packetMaterial,o=a.coverImageDynamic,s=a.bubbleImageDynamic,c=a.detailImageDynamic,l=a.corpLogoDynamic,u=a.receiveImage,d={coverImageDynamic:o,bubbleImageDynamic:s,detailImageDynamic:c,corpLogoDynamic:l,receiveImage:u},(0,Ht.H)("mkdify_cover_success",JSON.stringify(d))}catch(r){(0,Ht.H)("mkdify_report_error")}e.$router.replace({name:"submitSuccess",query:{cid:e.$route.params.cid||n.orderId}})}else n&&-22===n.baseResponse.ret?(e.submitStatus=0,e.errorTip("最多可同时在审3款红包封面，待审核完成后可继续提交")):-2===(null===n||void 0===n||null===(i=n.baseResponse)||void 0===i?void 0:i.ret)?((0,Ht.H)("缺失素材",JSON.stringify({order:e.orderId,packetMaterial:null===(p=e.cover)||void 0===p?void 0:p.packetMaterial})),e.errorTip("素材缺失，请重新上传素材")):(e.submitStatus=0,e.errorTip("提交失败，请稍后重试"));case 17:case"end":return t.stop()}}),t,null,[[0,5]])})))()},save:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.checkForm();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return");case 8:return e.saveStatus=1,t.next=11,e.generateOrderId();case 11:return e.setSubmitInfo(),t.next=14,qc.modifyCover(Ve.Z3.Save,e.cover);case 14:i=t.sent,i&&0===i.baseResponse.ret?(e.saveStatus=2,e.cover.orderId=i.orderId):(e.saveStatus=0,(0,Ht.H)("保存失败",JSON.stringify({res:i,packetMaterial:e.cover.packetMaterial})),e.errorTip("保存失败，请稍后重试"));case 16:case"end":return t.stop()}}),t,null,[[0,5]])})))()},setOpenStroy:function(e){this.isOpenStroy=e},handleSetAction:function(e){s.ZP.set(this.cover.packetMaterial,"actionList",[e]),4==e.actionType&&e.isType&&this.recommendInfo(e),this.triggerToPreview(3,"story")},syncCover:function(e,t){var i,n,a=this.cover.packetMaterial;"brandLink"===e?(null!==(i=a.actionList)&&void 0!==i&&i[0]||(a.actionList=[{}]),null!==(n=a.actionList)&&void 0!==n&&n[0]&&(a.actionList[0].actionDetail=t)):"name"===e&&(this.cover.packetName=t)},checkForm:function(){var e=this;return new Promise((function(t,i){e.$refs.baseForm.validate((function(e){if(console.info("--- ~ that.$refs.baseForm.validate ~ valid:",e),!e)return i(new Error("校验不通过"));t()}))}))},deleteCurBrandLogo:function(){this.cover.brandLogo={},this.logoFileList=[],this.logoUploading=!1,this.triggerToPreview(1,"bubble")},setStoryDescription:function(e){var t=e.replace(/[\r\n]/g,"").replace(/\s{2}/g,"");this.cover.packetMaterial.storyDescription=t,this.triggerToPreview(3,"story")},setStoryDetail:function(e){console.log("new story");var t=e.detail,i=e.index,n=this.cover.packetMaterial.storyDetailList;null!==n&&void 0!==n&&n[i]?this.cover.packetMaterial.storyDetailList&&s.ZP.set(this.cover.packetMaterial.storyDetailList,i,t):(i==(null===n||void 0===n?void 0:n.length)&&this.recommendInfo(this.OfinderInfo),this.cover.packetMaterial.storyDetailList=null===n||void 0===n?void 0:n.concat([t])),this.triggerToPreview(3,"story",i)},setStorySort:function(e){var t=e.oldIndex,i=e.newIndex,n=this.cover.packetMaterial.storyDetailList;null===n||void 0===n||n.splice(i,0,null===n||void 0===n?void 0:n.splice(t,1)[0]),this.triggerToPreview(3,"story")},delStoryDetail:function(e){var t;null===(t=this.cover.packetMaterial.storyDetailList)||void 0===t||t.splice(e,1),this.triggerToPreview(3,"story",0)}},beforeDestroy:function(){(0,Ht.H)("退出编辑",JSON.stringify({orderId:this.cover.orderId})),this.setLayoutPageSimpleRightWrpOverflow("beforeDestroy"),$c.windowBeforeUnloadMsg="",m.l1.clearActionAuthTimer(),m.l1.CLEAR_ACTION_AUTH_INFO()},beforeRouteLeave:function(e,t,i){if(2===this.saveStatus)return i();var n=window.confirm("当前内容未保存，是否要离开当前页面");n?i():i(!1)}}),ol=rl,sl=(0,g.Z)(ol,sr,cr,!1,null,"4c653601",null),cl=sl.exports,ll=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-pay-wrap notranslate"},[t("div",{staticClass:"main-card"},[t("div",{staticClass:"content"},[e.cover&&e.cover.orderId?t("CoverMaterial",{attrs:{cover:e.cover}}):e._e(),"count"===e.type?t("div",{staticClass:"buy-number-set"},[t("div",{staticClass:"title"},[e._v("选择要购买的红包封面数量：")]),t("div",{staticClass:"desc"},[e._v("红包封面按个数收费，1元/个。若购买N个红包封面，则N个微信用户可领取并使用。")]),t("div",{staticClass:"desc"},[e._v("定制方购买后，封面发放有效期为6个月。")]),t("div",{staticClass:"desc"},[e._v("过期后，剩余封面数量将清零。微信用户领取后，可在3个月内无限次使用该封面。")]),t("div",{staticClass:"number-choose-list"},[e._l(e.chooseList,(function(i){return t("RadioCard",{key:i,staticClass:"number-item",attrs:{active:e.curNum===i},on:{click:function(t){return e.setPreNum(i)}}},[t("div",{staticClass:"number"},[e._v(e._s(i)+"个")]),t("div",{staticClass:"divide"}),t("div",{staticClass:"price"},[e._v("￥"+e._s(e._f("ToRMB")(i*e.price)))])])})),t("RadioCard",{staticClass:"number-item",attrs:{active:e.isCustomNum},on:{click:e.chooseCustomNum}},[t("div",{staticClass:"number"},[t("input",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder,expression:"showPlaceholder"}],staticClass:"placeholder",attrs:{type:"number",placeholder:"输入个数"}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!e.showPlaceholder,expression:"!showPlaceholder"},{name:"model",rawName:"v-model",value:e.customNum,expression:"customNum"}],ref:"customInput",staticClass:"real-input",attrs:{type:"number",max:"10000000"},domProps:{value:e.customNum},on:{focus:function(t){e.showPlaceholder=!1},blur:function(t){return e.setPlaceholder()},input:function(t){t.target.composing||(e.customNum=t.target.value)}}}),e.showPlaceholder?e._e():t("span",[e._v("个")])]),t("div",{staticClass:"divide"}),t("div",{staticClass:"price"},[e._v("￥"+e._s(e._f("ToRMB")(e.customNum*e.price)))])])],2),e.isEmotionRainOpen?t("EmotionRainTipEntry",{attrs:{showDetailEntry:!0},on:{click:e.doShowEmotionRainDialog}}):e._e()],1):e._e(),"time"===e.type?t("div",{staticClass:"buy-time-set"},[t("div",{staticClass:"title"},[e._v("填写要购买的发放时长：")]),t("div",{staticClass:"desc"},[e._v("1. 红包封面按照可发放的时长收费，100,000元/小时，单笔订单1小时起订，最长购买时长为24小时。")]),t("div",{staticClass:"desc"},[e._v("2. 每小时内可发放的红包封面上限为50,000个。如购买2小时，则可发放的红包封面上限为100,000个，以此类推。")]),t("div",{staticClass:"desc"},[e._v("3. 定制方购买后，须在6个月内全部发完，过期后无法发放给用户，且未发放的部分不支持退款。")]),t("div",{staticClass:"desc"},[e._v(" 4. 定制方购买后，可在6个月内自主决定发放材料的生效时间，生效后用户才可领取封面，且开始消耗发放时长。如2月1日14点购买了1小时发放时长，则可在5月1日前生效发放材料，并在1个小时内全部发放完。 ")]),t("div",{staticClass:"time-input",on:{click:e.chooseCustomNum}},[t("div",{staticClass:"number"},[t("input",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder,expression:"showPlaceholder"}],staticClass:"placeholder",attrs:{type:"number",placeholder:"输入时间"}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!e.showPlaceholder,expression:"!showPlaceholder"},{name:"model",rawName:"v-model",value:e.customNum,expression:"customNum"}],ref:"customInput",staticClass:"real-input time",attrs:{type:"number",max:"5",min:"1"},domProps:{value:e.customNum},on:{focus:function(t){e.showPlaceholder=!1},blur:function(t){return e.setPlaceholder()},input:function(t){t.target.composing||(e.customNum=t.target.value)}}}),e.showPlaceholder?e._e():t("span",[e._v("小时")])]),t("div",{staticClass:"divide"}),t("div",{staticClass:"price"},[e._v("￥"+e._s(e._f("ToRMB")(e.customNum*e.price)))])])]):e._e()],1),t("div",{staticClass:"options"},[t("mp-button",{on:{click:e.goBack}},[e._v("返回")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:e.pay}},[e._v("购买")])],1)]),t("mp-dialog",{staticClass:"pay-confirm-dialog",attrs:{title:"确认订单",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){e.showDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.ruleConfirm||e.confirmIng},on:{click:e.confirmPay}},[e._v("前往付款")])],1)]},proxy:!0}]),model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t("div",{staticClass:"pay-confirm"},["count"===e.type?t("div",{staticClass:"title"},[t("span",[e._v("购买的红包封面个数为")]),t("span",{staticClass:"num"},[e._v(e._s(e._f("nanCheck")(e.curNum||e.customNum)))]),t("span",[e._v("个，共需要支付：")])]):e._e(),"time"===e.type?t("div",{staticClass:"title"},[t("span",[e._v("购买的红包封面发放时长为")]),t("span",{staticClass:"num"},[e._v(e._s(e._f("nanCheck")(e.customNum)))]),t("span",[e._v("小时，共需要支付：")])]):e._e(),t("div",{staticClass:"price"},[e._v("￥"+e._s(e.needToPay))]),e.isOrganization&&e.isEmotionRainOpen&&e.purchaseCountReachMinPurchaseCount?t("EmotionRainTipEntry2"):e._e(),t("div",{staticClass:"pirce-title"},[e._v("选择支付方式")]),t("div",{staticClass:"pirce-type"},[t("div",{staticClass:"price-item",class:{"price-item_choice":0==e.payType},on:{click:function(t){return e.choosePriceType(0)}}},[t("div",{staticClass:"price-item-title"},[e._v("普通支付")]),t("div",{staticClass:"price-item-tips"},[e._v("支持网银支付、微信支付等")])]),t("div",{staticClass:"price-item",class:{"price-item_choice":1==e.payType},on:{click:function(t){return e.choosePriceType(1)}}},[t("div",{staticClass:"price-item-title"},[e._v("广告预算支付")]),t("div",{staticClass:"price-item-tips"},[t("span",[e._v("可直接使用广告预算")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"4px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0}])},[t("p",[e._v(" 为了提高用户使用体验，微信红包封面开放平台可能不定期内测不同支付方式。支付方式不影响定制方根据《“微信红包封面”定制功能使用条款》所享有的权利和承担的义务。 ")])])],1),e.emotionRainConfirm||!e.adPurchaseSwitch?t("div",{staticClass:"price-item-disable-wrp",on:{click:function(e){e.stopPropagation()}}},[t("p",[e._v("暂不支持广告金支付方式")])]):e._e()])]),e.isEmotionRainOpen&&e.isPersonal&&e.purchaseCountReachMinPurchaseCount?t("div",{staticClass:"rule-confirm"},[t("mp-checkbox",{model:{value:e.emotionRainConfirm,callback:function(t){e.emotionRainConfirm=t},expression:"emotionRainConfirm"}}),t("span",[e._v("同意")]),t("a",{on:{click:e.handleEmotionRainGuide}},[e._v("《活动规则》")]),t("span",[e._v("并参与限时活动·微信表情雨")]),t("a",{on:{click:e.handleEmotionRainShouldKnow}},[e._v("了解详情")])],1):e._e(),t("div",{staticClass:"rule-confirm"},[t("mp-checkbox",{model:{value:e.ruleConfirm,callback:function(t){e.ruleConfirm=t},expression:"ruleConfirm"}}),t("span",[e._v("我同意并遵守")]),t("a",{on:{click:e.handlePayShouldKnow}},[e._v("《付款须知》")])],1)],1)]),t("mp-dialog",{staticClass:"emotion-rain-dialog",attrs:{width:675},model:{value:e.showEmotionRainDialog,callback:function(t){e.showEmotionRainDialog=t},expression:"showEmotionRainDialog"}},[t("div",{staticClass:"emotion-dialog"},[t("EmotionRainTipEntry"),t("EmotionRainDesc")],1)])],1)},ul=[],dl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"radio-card",class:{active:e.active},on:{click:e.handleClick}},[t("div",{staticClass:"active-flag"},[t("mp-icon",{staticClass:"selected",attrs:{icon:"check_mark_regular",color:"#ffffff",width:20,height:20}})],1),e._t("default")],2)},pl=[],vl=s.ZP.extend({name:"RadioCard",props:{active:{type:Boolean,default:!1}},methods:{handleClick:function(){this.$emit("click")}}}),ml=vl,fl=(0,g.Z)(ml,dl,pl,!1,null,"394c9549",null),hl=fl.exports,gl=function(){var e,t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"material-wrap"},[i("CoverReceiveImg",{staticClass:"receive-img",attrs:{src:t.cover.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":t.widgetCoverUrl,openSrc:null===(e=t.cover.packetMaterial.openImage)||void 0===e?void 0:e.mediaUrl}}),i("div",{staticClass:"name"},[t._v(t._s(t.cover.packetName))]),i("div",{staticClass:"check-all"},[i("a",{on:{click:function(e){return e.preventDefault(),t.checkAll.apply(null,arguments)}}},[t._v("查看红包封面样式")])])],1)},yl=[],bl=s.ZP.extend({name:"CoverMaterial",props:{cover:{type:Object,default:function(){return{packetName:"",packetMaterial:{}}}}},components:{CoverReceiveImg:ke.Z},computed:{widgetCoverUrl:function(){var e,t,i=this.cover;return null===i||void 0===i||null===(e=i.packetMaterial)||void 0===e||null===(t=e.syntheticWidgetImage)||void 0===t?void 0:t.mediaUrl}},methods:{checkAll:function(){var e=this;e.$router.push({name:"detail",query:{id:this.cover.orderId,showmaininfo:1}})}}}),wl=bl,Cl=(0,g.Z)(wl,gl,yl,!1,null,"4ffe6ee8",null),_l=Cl.exports,xl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-confirm"},[t("p",{staticClass:"second-text"},[e._v(" 购买封面数量达到 "+e._s(e._f("formatPurchaseCount")(e.user.emojiRainInfo.minPurchaseCount))+"个以上，已符合微信表情雨活动参与条件，可以在发放红包封面时选择表情雨发放方式。 ")]),t("EmotionRainTipEntry",{attrs:{showDetailEntry:!0},on:{click:function(t){e.showEmotionRainDialog=!0}}}),t("mp-dialog",{staticClass:"emotion-rain-dialog",attrs:{width:675},model:{value:e.showEmotionRainDialog,callback:function(t){e.showEmotionRainDialog=t},expression:"showEmotionRainDialog"}},[t("div",{staticClass:"emotion-dialog"},[t("EmotionRainTipEntry"),t("EmotionRainDesc")],1)])],1)},Il=[],kl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-desc-container"},[e._m(0),t("div",{staticClass:"emotion-rain-desc"},[e.isOrganization?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),t("p",[e._v(" 符合参与条件的红包封面，可以在发放时选择表情雨发放方式，让红包封面有机会出现在福袋中，被用户领取。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动参与条件：")]),t("p",[e._v(" 即日起至2021年2月12日24点，企业账号单次购买的红包封面数量不少于"+e._s(e._f("formatPurchaseCount")(e.user.emojiRainInfo.minPurchaseCount))+"个。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("3. 活动时间：")]),t("p",[e._v(" 福袋里的红包封面将在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e(),e.isPersonal?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),e._m(1),t("p",[e._v(" 活动中平台赠送的数量与你此次购买的数量成正比，相关数据可以在活动结束后查看。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动参与条件：")]),t("p",[e._v(" 即日起至2021年2月12日24点，个人账号单次购买的红包封面数量不少于"+e._s(e._f("formatPurchaseCount")(e.user.emojiRainInfo.minPurchaseCount))+"个。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("3. 活动时间：")]),t("p",[e._v(" 福袋里的红包封面将在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e()],2)])},Tl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-desc-image"},[t("img",{attrs:{src:i(79337),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。符合参与条件的红包封面，将有机会出现在福袋中，被更多的用户领取。通过福袋领取的红包封面均由平台"),t("span",{staticClass:"emotion-rain-warn"},[e._v("赠送")]),e._v("，不消耗你所购买的数量。 ")])}],Sl=s.ZP.extend({computed:{user:function(){return m.U6.user},isOrganization:function(){var e=this;return e.user.principalType===v.eZ.organization},isPersonal:function(){var e=this;return e.user.principalType===v.eZ.person}},filters:{formatTime:function(e){return Un()("yyyy年MM月dd日",new Date(1e3*e))},formatPurchaseCount:function(e){return e<1e4?e:(e/1e4).toFixed(0)+"万"}}}),Al=Sl,Dl=(0,g.Z)(Al,kl,Tl,!1,null,"37ff10fe",null),Pl=Dl.exports,Zl=s.ZP.extend({data:function(){return{showEmotionRainDialog:!1}},computed:{user:function(){return m.U6.user},isOrganization:function(){var e=this;return e.user.principalType===v.eZ.organization},isPersonal:function(){var e=this;return e.user.principalType===v.eZ.person}},filters:{formatPurchaseCount:function(e){return e<1e4?e:(e/1e4).toFixed(0)+"万"}},components:{EmotionRainTipEntry:Qn,EmotionRainDesc:Pl}}),Ul=Zl,El=(0,g.Z)(Ul,xl,Il,!1,null,"f78d70d0",null),Rl=El.exports,Ml=s.ZP.extend({name:"CoverPay",data:function(){return{type:"count",curNum:100,customNum:null,purChaseNum:0,price:0,chooseList:[100,500,1e3],isCustomNum:!1,showPlaceholder:!0,showDialog:!1,ruleConfirm:!1,payType:0,confirmIng:!1,emotionRainConfirm:!1,showEmotionRainDialog:!1}},computed:{adPurchaseSwitch:function(){return m.U6.adPurchaseSwitch},cover:function(){return m.l1.cover},needToPay:function(){var e=this,t=e.curNum,i=e.price,n=e.customNum,a=t*i||n*i;return"time"===e.type&&(a=Number(n)*i),(0,_e.Zh)(100*a)},user:function(){return m.U6.user},isOrganization:function(){var e=this;return e.user.principalType===v.eZ.organization},isPersonal:function(){var e=this;return e.user.principalType===v.eZ.person},isEmotionRainOpen:function(){var e=this;return e.user.emojiRainInfo&&e.user.emojiRainInfo.activityOpen},purchaseCountReachMinPurchaseCount:function(){var e=this;return!!e.user.emojiRainInfo&&(e.curNum?e.curNum>=e.user.emojiRainInfo.minPurchaseCount:e.customNum>=e.user.emojiRainInfo.minPurchaseCount)}},components:{RadioCard:hl,CoverMaterial:_l,EmotionRainTipEntry:Qn,EmotionRainTipEntry2:Rl,EmotionRainDesc:Pl},mounted:function(){this.type=this.$route.query.type,this.init()},methods:{choosePriceType:function(e){this.payType=e},init:function(){var e=this;if(!e.cover||!e.cover.orderId)return e.$router.push({name:"covers"});"count"===e.type?e.price=me.uX:"time"===e.type&&(e.price=me.Og)},handlePayShouldKnow:function(){var e=this;"time"==e.type?window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=time","_blank"):window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=pay","_blank")},handleEmotionRainShouldKnow:function(){this.showEmotionRainDialog=!0},handleEmotionRainGuide:function(){this.isOrganization?window.open("/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_org","_blank"):window.open("/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_personal","_blank")},setPlaceholder:function(){this.customNum||(this.showPlaceholder=!0)},setPreNum:function(e){this.isCustomNum=!1,this.curNum=e},chooseCustomNum:function(){var e=this;this.showPlaceholder=!1,this.$nextTick((function(){var t=e.$refs.customInput;t.focus()})),this.isCustomNum=!0,this.curNum=0},goBack:function(){this.$router.back()},pay:function(){var e,t=this;if("count"===t.type)if(this.isCustomNum){if(e=parseInt(t.customNum,10),!e||e>1e7||e<1)return t.$tipsErr("请输入正确格式的购买数量"),void window.setTimeout((function(){t.$tipsHide()}),3e3)}else e=t.curNum;else if("time"===t.type){e=parseFloat(t.customNum);var i=/(^[1-9]\d*$)/.test(e.toString());if(!i)return t.$tipsErr("只支持正整数"),void window.setTimeout((function(){t.$tipsHide()}),3e3);if(!e||e>5||e<0)return t.$tipsErr("请输入正确格式的购买数量，最大数量为5小时"),void window.setTimeout((function(){t.$tipsHide()}),3e3)}this.purChaseNum=e,this.showDialog=!0},confirmPay:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u,d;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.confirmIng=!0,i=e.cover,i){t.next=4;break}return t.abrupt("return");case 4:if(n=i.orderId,a="time"===e.type?1:0,o={orderId:n,purchaseType:a,participateEmojirainActivity:e.emotionRainConfirm},0===a?Object.assign(o,{purchaseCount:e.purChaseNum}):1===a&&Object.assign(o,{purchaseTime:e.purChaseNum}),0!=e.payType){t.next=16;break}return t.next=11,(new Ve.ZP).pay(o);case 11:s=t.sent,e.confirmIng=!1,s&&0===s.baseResponse.ret?(c=s.purchaseUrl,e.checkPurchaseStatus(s.transactionId),l="https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/pay.html&tokenid=".concat(encodeURIComponent(s.tokenId),"&tokenurl=").concat(encodeURIComponent(c),"&coverid=").concat(n,"&count=").concat(e.purChaseNum,"&use_sandbox_env=").concat(s.useSandboxEnv,"&type=").concat(e.type,"&tid=").concat(s.transactionId,"&joinEmotionRain=").concat(e.emotionRainConfirm||e.isOrganization&&e.isEmotionRainOpen?1:0),(0,Ht.H)("confirm_pay_success"),window.location.href=l):e.errorTip("支付失败，请联系客服"),t.next=21;break;case 16:return t.next=18,(new Ve.ZP).pay2(o);case 18:s=t.sent,e.confirmIng=!1,s&&0===s.baseResponse.ret?(u=e.isCustomNum?e.customNum:e.curNum,window.location.href=s.adPurchaseUrl+"&back_url="+encodeURIComponent("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index#/pay_success?cid="+i.orderId+"&count="+u)):s&&1===s.baseResponse.ret&&(d=e,d.$tipsErr("功能内测中，暂无权限"),window.setTimeout((function(){return d.$tipsHide()}),5e3));case 21:case"end":return t.stop()}}),t)})))()},checkPurchaseStatus:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(new Ve.ZP).checkPayStatus(e);case 2:n=i.sent,n&&0===n.baseResponse.ret&&(a=n.status,a===Ve.P1.Pending?window.setTimeout((function(){return t.checkPurchaseStatus(e)}),n.nextIntervalMs):a===Ve.P1.Success?(o=t.cover,t.$router.replace({name:"paySuccess",query:{cid:o.orderId,count:t.isCustomNum?t.customNum:t.curNum}})):a===Ve.P1.Fail&&(s=t,s.$tipsErr("支付失败，请重试"),window.setTimeout((function(){return s.$tipsHide()}),3e3)));case 4:case"end":return i.stop()}}),i)})))()},doShowEmotionRainDialog:function(){this.showEmotionRainDialog=!0}},filters:{ToRMB:function(e){return parseFloat(e).toFixed(2)},nanCheck:function(e){return e&&Number(e)?Number(e):0},formatPurchaseCount:function(e){return e<1e4?e:(e/1e4).toFixed(0)+"万"}},watch:{emotionRainConfirm:function(){this.emotionRainConfirm&&this.choosePriceType(0)}}}),Ll=Ml,Fl=(0,g.Z)(Ll,ll,ul,!1,null,"57019465",null),Nl=Fl.exports,Ol=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-statistics-wrap"},[t("div",{staticClass:"title"},[e._v("数据统计")]),t("div",{staticClass:"main-card",staticStyle:{"margin-top":"0"}},[t("div",{staticClass:"stat-title"},[e._v("发放数据")]),e._m(0),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已购买个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalPurchaseCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已发放个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalSendCnt)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalReceiveCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("通过「推广」领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalHeatCnt)))])]),e.fullStatData.totalPurchaseTime?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("累计购买封面发放时长")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalPurchaseTime)))])]):e._e()])]),t("div",{staticClass:"main-card"},[t("div",{staticClass:"stat-title"},[e._v("使用数据")]),t("div",{staticClass:"stat-tab-list mt-2"},[t("mp-form",[t("mp-form-item",{attrs:{label:"时间范围"}},[t("mp-radio-group",{staticClass:"mt-2",model:{value:e.statisticsTab,callback:function(t){e.statisticsTab=t},expression:"statisticsTab"}},[t("mp-radio",{attrs:{value:"yesterday"}},[e._v("昨日数据")]),t("mp-radio",{attrs:{value:"total"}},[e._v("累计数据")])],1)],1)],1)],1),e.yesterdayStat.latestTime?t("div",{staticClass:"stat-desc",staticStyle:{"margin-top":"-22px"}},[e._v("数据截止至："+e._s(e._f("timeToDate")(e.yesterdayStat.latestTime)))]):e._e(),"yesterday"===e.statisticsTab?[t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.sendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.receiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.detailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.storyExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.sendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.receivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.detailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.storyExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterEmotionproductPv)))]):e._e()]):e._e()])]:e._e(),"total"===e.statisticsTab?[t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductPv)))]):e._e()]):e._e()])]:e._e()],2),e.isPageReady?t("StatisticsChart",{attrs:{hourlyStatList:e.fullStatData.hourlyStatList,dailyStatList:e.fullStatData.dailyStatList}}):e._e(),e.isPageReady?e._e():[e._m(1)]],2)},Bl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"stat-desc"},[t("span",[e._v("数据截止至当前时间")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],ql=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"header"},[e._m(0),t("div",{staticClass:"right-part"},[t("mp-button",{staticClass:"download",on:{click:e.genCsv}},[e._v("下载表格")])],1)]),t("div",{staticClass:"chart-wrap"},[t("div",{staticClass:"legend-tip",staticStyle:{"align-items":"start"}},[t("label",{staticStyle:{"flex-shrink":"0"}},[e._v("数据类型")]),t("div",e._l(e.statisticalIndicators,(function(i){return t("mp-checkbox",{key:i.key,staticStyle:{"margin-bottom":"8px"},on:{change:e.renderChart},model:{value:e.selected[i.text],callback:function(t){e.$set(e.selected,i.text,t)},expression:"selected[item.text]"}},[e._v(" "+e._s(i.text)+" ")])})),1)]),t("div",{staticClass:"legend-tip"},[t("label",{staticStyle:{"flex-shrink":"0"}},[e._v("日期范围")]),t("mp-radio-group",{model:{value:e.curDataSetKey,callback:function(t){e.curDataSetKey=t},expression:"curDataSetKey"}},[t("mp-radio",{attrs:{value:"hour"}},[e._v("最近24小时")]),t("mp-radio",{attrs:{value:"day"}},[e._v("过去三个月")])],1)],1),t("div",{ref:"chart",staticClass:"chart-bd",staticStyle:{width:"100%",height:"400px"}})])])},Ql=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"left-part"},[t("div",{staticClass:"stat-title"},[e._v("数据趋势")])])}],jl=(i(24603),i(28450),i(88386),i(47114)),Hl=i.n(jl);function Gl(e){var t=navigator.userAgent;if("ie"===e){var i=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1;if(i){var n=new RegExp("MSIE (\\d+\\.\\d+);");return n.test(t),parseFloat(RegExp["$1"])}return!1}return t.indexOf(e)>-1}var Wl,zl,Vl,Jl,Kl={_isIE11:function(){var e=0,t=/MSIE (\d+\.\d+);/.test(navigator.userAgent),i=!!navigator.userAgent.match(/Trident\/7.0/),n=navigator.userAgent.indexOf("rv:11.0");return t&&(e=Number(RegExp.$1)),-1!==navigator.appVersion.indexOf("MSIE 10")&&(e=10),i&&-1!==n&&(e=11),11===e},_isEdge:function(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl:function(e){var t="\ufeff";if(window.Blob&&window.URL){var i=new Blob([t+e],{type:"text/csv"});return URL.createObjectURL(i)}return"data:attachment/csv;charset=utf-8,"+t+encodeURIComponent(e)},download:function(e,t){if(Gl("ie")&&Gl("ie")<10){var i=window.top.open("about:blank","_blank");i.document.charset="utf-8",i.document.write(t),i.document.close(),i.document.execCommand("SaveAs",e),i.close()}else if(10===Gl("ie")||this._isIE11()||this._isEdge()){var n="\ufeff",a=new Blob([n+t],{type:"text/csv"});navigator.msSaveBlob(a,e)}else{var r=document.createElement("a");r.download=e,r.href=this._getDownloadUrl(t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}},genCsvData:function(e,t){return new(Hl())(e,{header:t}).encode()}},Yl=Kl,Xl=i(70492),$l=i.n(Xl),eu=(i(46295),i(83062),i(78511),new z.ZP,s.ZP.extend({name:"StatisticsChart",data:function(){return{curDataSetKey:"hour",chart:null,statisticalIndicators:[{key:"getUv",text:"领取封面人数"},{key:"sendUv",text:"发封面红包人数"},{key:"sendPv",text:"发封面红包次数"},{key:"receiveUv",text:"拆封面红包人数"},{key:"receivePv",text:"拆封面红包次数"},{key:"detailUv",text:"进入红包详情页人数"},{key:"detailPv",text:"进入红包详情页次数"},{key:"storyExposeUv",text:"查看封面故事人数"},{key:"storyExposePv",text:"查看封面故事次数"},{key:"heatCnt",text:"通过「推广」领取个数"}],selected:{"领取封面人数":!1,"发封面红包人数":!0,"发封面红包次数":!0,"拆封面红包人数":!1,"拆封面红包次数":!1,"进入红包详情页人数":!1,"进入红包详情页次数":!1,"查看封面故事人数":!1,"查看封面故事次数":!1,"进入小程序次数":!1,"进入小程序人数":!1,"进入公众号人数":!1,"进入公众号次数":!1,"进入视频号人数":!1,"进入视频号次数":!1,"进入表情专辑页人数":!1,"进入表情专辑页次数":!1,"进入艺术家主页人数":!1,"进入艺术家主页次数":!1},option:{color:["#FA9D3B","#91D300","#10AEFF","#006AC2","#E35AFF","#9400B2","#25D8B7","#008226","#FA5151","#07c160","#48a6e2"],xAxis:[{type:"category",data:[""],nameTextStyle:{color:"#9A9A9A",fontSize:10},nameGap:8,axisLine:{lineStyle:{color:"#E4E8EB"}},axisLabel:{color:"#9A9A9A"},axisTick:{alignWithLabel:!0,inside:!0}}],yAxis:{type:"value",splitLine:{lineStyle:{color:"#E4E8EB"}},axisLabel:{margin:24,color:"#9A9A9A"},axisLine:{lineStyle:{color:"#E4E8EB"}},axisTick:{show:!1}},legend:{itemGap:20,itemWidth:8,icon:"circle",align:"left",bottom:"0px",textStyle:{color:"#353535",fontSize:14},data:[""],selected:{}},grid:{left:"0%",right:"0%",bottom:"80px",top:"50px",containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"#ffffff",borderColor:"rgb(240,240,240)",borderWidth:2,textStyle:{color:"#353535"},padding:10,axisPointer:{z:0,type:"shadow",shadowStyle:{color:"#F6F8F9"}}},series:[{data:[""],type:"line"}]}}},props:{fullStat:{type:Object,default:function(){return{}}},hourlyStatList:{type:Object,default:function(){return{}}},dailyStatList:{type:Object,default:function(){return{}}}},computed:{actionType:function(){return m.l1.coverActionType},curDataSet:function(){var e=this,t=e.hourList.reverse();return"hour"===this.curDataSetKey?t:"day"===this.curDataSetKey?e.dayList.reverse():[]},hourList:function(){var e=this,t=e.hourlyStatList,i=(new Date).setHours(0,0,0,0);return t&&t.itemList?t.itemList.map((function(e,t){var n=1e3*e.statTime<i?"昨日":"今日",a=Object.assign({},e,{key:t,hour:"".concat(n," ").concat(Un()("hh:mm",new Date(1e3*e.statTime)))});return a})):[]},dayList:function(){var e=this,t=e.dailyStatList;return t&&t.itemList?t.itemList.map((function(e,t){var i=Object.assign({},e,{key:t,day:Un()("yyyy/MM/dd",new Date(1e3*e.statTime))});return i})):[]}},watch:{curDataSetKey:function(){this.renderChart()}},mounted:function(){2===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterOfficialaccountUv",text:"进入公众号人数"},{key:"enterOfficialaccountPv",text:"进入公众号次数"}]):3===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterSmallappUv",text:"进入小程序人数"},{key:"enterSmallappPv",text:"进入小程序次数"}]):4===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterFinderUv",text:"进入视频号人数"},{key:"enterFinderPv",text:"进入视频号次数"}]):6===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterEmotionproductUv",text:"进入表情专辑页人数"},{key:"enterEmotionproductPv",text:"进入表情专辑页次数"}]):5===this.actionType&&(this.statisticalIndicators=this.statisticalIndicators.concat([{key:"exposureEmotionprofileUv",text:"进入艺术家主页人数"},{key:"exposureEmotionprofilePv",text:"进入艺术家主页次数"}])),this.option.legend.data=this.statisticalIndicators.map((function(e){return e.text})),this.renderChart()},methods:{renderChart:function(){var e=this;this.$nextTick((function(){var t=e,i=JSON.parse(JSON.stringify(e.option));t.chart=$l().init(e.$refs.chart),Object.entries(e.selected).forEach((function(e){var t=(0,Ka.Z)(e,2),n=t[0],a=t[1];a&&(i.legend.selected[n]=a)})),i.series=t.statisticalIndicators.filter((function(t){return e.selected[t.text]})).map((function(t){return{type:"line",name:t.text,symbol:"circle",symbolSize:6,data:e.curDataSet.map((function(e){return e[t.key]}))}})),i.xAxis[0].data=e.curDataSet.map((function(t){return t[e.curDataSetKey]})),t.chart.setOption(i,{notMerge:!0})}))},genCsv:function(){var e="",t=[];t=t.concat(this.statisticalIndicators),"hour"===this.curDataSetKey?(e="红包封面24小时数据.csv",t.unshift({key:"hour",text:"小时"})):"day"===this.curDataSetKey&&(e="红包封面过去三个月数据.csv",t.unshift({key:"day",text:"日期"}));var i=t.map((function(e){return e.text})),n=this.curDataSet.map((function(e){return t.map((function(t){return e[t.key]}))})),a=Yl.genCsvData(n,i);Yl.download(e,a)}}})),tu=eu,iu=(0,g.Z)(tu,ql,Ql,!1,null,"f373f0b2",null),nu=iu.exports,au=s.ZP.extend({name:"CoverStatistics",data:function(){var e=[{dataIndex:"getUv",key:"getUv",title:"领取封面人数"},{dataIndex:"sendUv",key:"sendUv",title:"发封面红包人数"},{dataIndex:"sendPv",key:"sendPv",title:"发封面红包次数"},{dataIndex:"receiveUv",key:"receiveUv",title:"拆封面红包人数"},{dataIndex:"receivePv",key:"receivePv",title:"拆封面红包次数"},{dataIndex:"detailUv",key:"detailUv",title:"进入红包详情页人数"},{dataIndex:"detailPv",key:"detailPv",title:"进入红包详情页次数"},{dataIndex:"storyExposeUv",key:"storyExposeUv",title:"查看封面故事人数"},{dataIndex:"storyExposePv",key:"storyExposePv",title:"查看封面故事次数"}];return{isPageReady:!1,coverId:"",pageNum:5,curHourListPage:1,curDayListPage:1,fullStatData:{},statisticsTab:"yesterday",hourColumns:[{dataIndex:"hour",key:"hour",title:"时间"}].concat(e),dayColumns:[{dataIndex:"day",key:"day",title:"日期"}].concat(e)}},computed:{coverActionTypeText:function(){return!!m.l1.coverActionType&&me.pK[m.l1.coverActionType]},coverActionType:function(){return m.l1.coverActionType},statistics:function(){var e=m.l1.cover;return e.orderStat||{}},yesterdayStat:function(){var e=this.fullStatData;return e&&e.yesterdayStat?e.yesterdayStat:{}},yesterdayStatItem:function(){var e=this;return e.yesterdayStat.itemList&&e.yesterdayStat.itemList[0]?e.yesterdayStat.itemList[0]:{}},summaryStat:function(){var e=this.fullStatData;return e&&e.summaryStat?e.summaryStat:{}},summaryStatItem:function(){var e=this;return e.summaryStat.itemList&&e.summaryStat.itemList[0]?e.summaryStat.itemList[0]:{}}},components:{StatisticsChart:nu},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.$route.query.cid,e.coverId=i,t.next=4,e.fetchData();case 4:e.isPageReady=!0;case 5:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.coverId){t.next=2;break}return t.abrupt("return",e.$router.replace({name:"covers"}));case 2:return t.next=4,m.l1.getFullStat(e.coverId);case 4:e.fullStatData=t.sent;case 5:case"end":return t.stop()}}),t)})))()}},filters:{undefineCheck:function(e){return e||"-"},timeToDate:function(e){return Un()("yyyy年MM月dd日",new Date(1e3*e))}}}),ru=au,ou=(0,g.Z)(ru,Ol,Bl,!1,null,"376ce75e",null),su=ou.exports,cu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"platformIndexWrap",staticClass:"platform-index-wrap",class:{scroll:e.bannerPageStatus>=2}},[t("div",{staticClass:"page-slider"},[t("div",{ref:"bannerPage",staticClass:"banner-page page-0",class:e.bannerPageClassName},[e._m(0),t("div",{staticClass:"content"},[t("div",{staticClass:"title banner-title"},[e._v("微信红包封面")]),t("div",{staticClass:"banner-desc"},[e._v("用一个创意封面，与十亿人的节日祝福相融")]),t("div",{staticClass:"button-custom",on:{click:e.goToMake}},[e._v("去定制")])]),t("div",{staticClass:"banner-img-wrap"},[e._l(e.coverDataList,(function(i,n){return t("div",{key:n,ref:"animationGroup",refInFor:!0,staticClass:"animation-group",class:{"active-group":e.activeCoverIndex===n,"widget-animation-group":!!i.widgetUrl},on:{click:function(t){return e.togglePage(n,t)}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.bannerPageStatus>=1.15,expression:"bannerPageStatus >= 1.15"}],staticClass:"animation-slider-group"},[t("div",{staticClass:"story-layers"},[t("div",{staticClass:"poster"},[t("img",{attrs:{src:i.receiveUrl}})]),t("div",{staticClass:"story-list",style:e.storySliderStyle},e._l(i.storyList,(function(e,i){return t("div",{key:i,staticClass:"story-item"},["mp4"===e.slice(-3)?t("video",{staticClass:"storyMedia",attrs:{src:e,muted:"muted"},domProps:{muted:!0}}):t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}],staticClass:"storyMedia"})])})),0),e.totalStoryCount>1?t("div",{staticClass:"indicator-list"},e._l(i.storyList,(function(i,n){return t("div",{key:n,staticClass:"indicator-item",class:{active:e.curStoryIndex===n}})})),0):e._e()]),e._m(1,!0)]),t("spin-coin",{staticClass:"spin-coin",attrs:{start:n===e.activeCoverIndex&&e.bannerPageStatus>=1.1}}),n!==e.activeCoverIndex||e.bannerPageStatus<=1.1?t("div",{staticClass:"open-layer"},[i.widgetUrl?t("widget-cover-img",{attrs:{"cover-url":i.receiveUrl,"widget-url":i.widgetUrl,bottomUrl:e.coverToolPics.hb_bottom,bottomHeight:432,bottomY:1266}}):t("img",{attrs:{src:i.receiveUrl}})],1):e._e()],1)})),e.totalStoryCount>1?t("div",{staticClass:"control-bar"},[t("div",{staticClass:"prev",class:{disabled:0===e.curStoryIndex},on:{click:function(t){return e.toggleStory("prev")}}},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"toggle"}})],1),t("div",{staticClass:"next",class:{disabled:e.curStoryIndex===e.totalStoryCount-1},on:{click:function(t){return e.toggleStory("next")}}},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"toggle"}})],1)]):e._e(),t("router-link",{staticClass:"see-more",style:{top:e.seeMoreTop+"px"},attrs:{to:{name:"case"}}},[e._v("浏览更多封面")])],2)])]),t("div",{staticClass:"progress-page",class:e.progressPageClassName,style:{"margin-top":e.progressPageMarginTop+"px"}},[t("div",{staticClass:"main"},[e._m(2),t("div",{staticClass:"progress-page-body"},[t("div",{staticClass:"left-part"},[e._l(e.progressList,(function(i,n){return t("div",{key:n,staticClass:"progress-item"},[t("div",{staticClass:"indicator"},[e._v(e._s(n+1))]),t("div",{staticClass:"progress-body"},[t("div",{staticClass:"progress-title"},[e._v(e._s(i.title))]),t("div",{staticClass:"progress-guide-tip"},[t("div",{staticClass:"label-desc"},[e._v(e._s(i.labelDesc))]),t("div",{staticClass:"progress-content",on:{click:function(t){return e.gotoGuide(n)}}},[e._v(e._s(i.content))])])])])})),t("div",{staticClass:"button",on:{click:e.goToSignup}},[e._v("去申请")])],2)])])])])},lu=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"banner-bg"},[t("img",{staticClass:"active",attrs:{src:i(12074)}}),t("div",{staticClass:"mask-shadow"})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"bg"},[t("img",{attrs:{src:i(27983)}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"progress-page-header"},[t("div",{staticClass:"title-progress"},[e._v("如何申请")])])}],uu=function(){var e=window,t=function(e){var t=e.type;return"DOMMouseScroll"!=t&&"mousewheel"!=t||(e.delta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3),e.srcElement&&!e.target&&(e.target=e.srcElement),e.preventDefault||void 0===e.returnValue||(e.preventDefault=function(){e.returnValue=!1}),e};return e.addEventListener?function(e,i,n,a){var r=document;"mousewheel"===i&&void 0!==r.mozFullScreen&&(i="DOMMouseScroll"),e.addEventListener(i,(function(e){n.call(this,t(e))}),a||!1)}:e["attachEvent"]?function(i,n,a){i.attachEvent("on"+n,(function(n){n=n||e.event,a.call(i,t(n))}))}:function(){}}(),du=i(87843),pu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:["gka-base",e.start?"gka-animation":"init"],attrs:{id:"spin-coin"}})},vu=[],mu=s.ZP.extend({components:{},props:{start:Boolean}}),fu=mu,hu=(0,g.Z)(fu,pu,vu,!1,null,"803e3604",null),gu=hu.exports,yu=new z.ZP,bu=s.ZP.extend({name:"PlatformIndex",data:function(){return{coverToolPics:Xe.is,bannerPageStatus:-1,isTogglingPage:!1,isBacking:!1,isVhUnit:!1,curStoryIndex:0,storyInterval:0,storyFlag:1,activeCoverIndex:-1,curProgressIndex:0,seeMoreTop:0,progressPageMarginTop:0,progressList:[{title:"注册",content:"了解“平台注册”指引",labelDesc:"注册前需已完成微信公众号企业认证，或个人视频号/公众号粉丝达100个。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_0.png"},{title:"定制封面",content:"了解“封面设计”指引",labelDesc:"上传红包封面定制信息，包括素材图、封面简称、品牌logo、封面故事素材以及相关证明材料。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_1.png"},{title:"提交审核",content:"了解“封面审核”指引",labelDesc:"完成红包封面的定制后，提交给微信团队审核。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_2.png"},{title:"付款下单",content:"了解“封面购买”指引",labelDesc:"审核通过后，选择红包封面的使用人数，并支付款项生成订单。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_3.png"},{title:"发放封面",content:"了解“封面发放”指引",labelDesc:"下单成功后即可生成红包封面二维码、领取序列号兑换码、领取链接，用户领取后可在发红包时使用。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_4.png"}],coverDataList:[],caseData:{},baseUrl:Pa.o0,curVideoDom:null}},components:{WidgetCoverImg:Je.Z,SpinCoin:gu},computed:{activeCover:function(){return this.coverDataList[this.activeCoverIndex]},totalStoryCount:function(){var e,t;return(null===(e=this.activeCover)||void 0===e||null===(t=e.storyList)||void 0===t?void 0:t.length)||0},storySliderStyle:function(){var e=this,t=(e.totalStoryCount,e.curStoryIndex),i=(100*t).toFixed(2);return{transform:"translateX(-".concat(i,"%)")}},bannerPageClassName:function(){var e=this,t=e.bannerPageStatus,i=e.isVhUnit;return{"vh-unit":i,"init-status":t>=0,"receive-status":t>=1,"icon-status":t>=1.1,"ready-status":t>=1.15,"open-status":t>=1.2,"story-status":t>=2}},progressPageClassName:function(){var e=this,t=e.bannerPageStatus,i=e.isVhUnit;return{"vh-unit":i,"story-status":t>=2}}},beforeMount:function(){this.handleWindowResize()},mounted:function(){var e=this;this.reportPv(),this.initData(),this.$nextTick((function(){window.setTimeout((function(){e.bannerPageStatus=0}),1e3),window.setTimeout((function(){e.$refs.bannerPage&&uu(e.$refs.bannerPage,"mousewheel",e.togglePage.bind(e,2))}),2200);var t=e.$refs.platformIndexWrap;t.addEventListener("scroll",e.platformIndexWrapScroll)})),window.onresize=(0,Te.throttle)(this.handleWindowResize.bind(this),1e3)},methods:{reportPv:function(){var e=!!m.U6.user.authorId;e&&yu.baseActionReport({actionType:"14",authorId:m.U6.user.authorId})},getProgressPageTop:function(){if(2===this.bannerPageStatus){var e=document.querySelector(".banner-img-wrap"),t=document.querySelector(".see-more"),i=e.getBoundingClientRect().bottom,n=t.getBoundingClientRect().bottom,a=i-n-120;this.progressPageMarginTop=-1*a}else this.progressPageMarginTop=0},getSeeMoreTop:function(){var e=document.querySelector(".banner-img-wrap"),t=.113,i=e.offsetHeight*t,n=document.querySelector(".active-group"),a=(null===n||void 0===n?void 0:n.offsetHeight)||0,r=50;this.seeMoreTop=i+a+r},platformIndexWrapScroll:function(){var e=this,t=this.$refs.platformIndexWrap;0===t.scrollTop&&2===this.bannerPageStatus&&(clearInterval(this.storyInterval),this.curVideoDom&&this.curVideoDom.pause(),this.bannerPageStatus=0,this.isBacking=!0,this.progressPageMarginTop=0,setTimeout((function(){e.activeCoverIndex=-1,e.isBacking=!1}),1500))},getRandomCoverList:function(){var e=this.caseData.body[0].filter((function(e){return e.indexGroup>=0})),t=[];e.forEach((function(e){t[e.indexGroup]?t[e.indexGroup].push(e):t[e.indexGroup]=[e]}));var i=Math.floor(Math.random()*t.length),n=(0,_e.FT)(t[i]);return n},initData:function(){var e=this,t=[];this.caseData=JSON.parse(JSON.stringify(du)),this.caseData.body&&(this.caseData.body.forEach((function(i,n){i.forEach((function(i,a){"number"===typeof i.indexGroup&&(e.caseData.init||(i.media.forEach((function(t,r){i.media[r]=e.baseUrl+(n+1)+"/"+(a+1)+"/"+t})),i["source"]=i.media[0],i.widget&&(i.widgetUrl=e.baseUrl+(n+1)+"/"+(a+1)+"/"+i.widget)),t.push(i))}))})),this.caseData.body.unshift(t));var i=this.getRandomCoverList();this.coverDataList=i.map((function(e){return{storyList:e.media.slice(1),receiveUrl:e.media[0],widgetUrl:e.widgetUrl,matchVideo:e.matchVideo}}))},initMatchVideo:function(){var e=document.querySelector(".active-group"),t=e.clientHeight,i=document.querySelectorAll(".active-group .storyMedia");i.forEach((function(e){if("VIDEO"===e.tagName){var i=e.clientWidth/e.clientHeight>=1;i&&(e.parentElement.className+=" match-video",e.parentElement.style.height="".concat(.81*t,"px"))}}))},togglePage:function(e,t){var i=this;if("mousewheel"===t.type&&(null===t||void 0===t?void 0:t.deltaY)<0)this.platformIndexWrapScroll();else if(!("mousewheel"===t.type&&this.activeCoverIndex>-1)){if(this.isTogglingPage)return t.preventDefault(),t.stopPropagation(),!1;if(clearInterval(this.storyInterval),this.activeCoverIndex=e,this.curStoryIndex=0,this.storyFlag=1,this.isTogglingPage||this.isBacking)return t.preventDefault(),t.stopPropagation(),!1;if(0===this.bannerPageStatus){var n,a;this.isTogglingPage=!0,this.bannerPageStatus=1,window.setTimeout((function(){i.bannerPageStatus=1.1}),1e3),window.setTimeout((function(){i.bannerPageStatus=1.15}),1600),window.setTimeout((function(){i.initMatchVideo(),i.bannerPageStatus=1.2}),1700);var r=1700;return"mp4"!==(null===(n=this.activeCover)||void 0===n||null===(a=n.storyList[0])||void 0===a?void 0:a.slice(-3))&&(r+=3e3),setTimeout((function(){i.storyInterval=window.setInterval((function(){return i.toggleStory()}),3e3)}),r),window.setTimeout((function(){i.bannerPageStatus=2,i.getSeeMoreTop(),i.$nextTick((function(){i.getProgressPageTop()})),i.isTogglingPage=!1}),3500),t.preventDefault(),t.stopPropagation(),!1}return!0}},handleWindowResize:function(){var e=this,t=document.documentElement,i=t.clientWidth,n=t.clientHeight,a=1920/1080;this.isVhUnit=i/n<a||i/n>2,this.$nextTick((function(){e.getSeeMoreTop(),e.$nextTick((function(){e.getProgressPageTop()}))}))},playVideo:function(){clearInterval(this.storyInterval);var e=this.$refs.animationGroup,t=e[this.activeCoverIndex],i=t.querySelectorAll(".storyMedia")[this.curStoryIndex];this.curVideoDom=i,i.muted=!0,i.play(),i.removeEventListener("ended",this.handleVideoEnded),i.addEventListener("ended",this.handleVideoEnded)},handleVideoEnded:function(){var e,t,i="";0===this.curStoryIndex?(i="next",this.storyFlag=1):this.curStoryIndex===(null===(e=this.activeCover)||void 0===e||null===(t=e.storyList)||void 0===t?void 0:t.length)-1?(i="prev",this.storyFlag=-1):i=-1===this.storyFlag?"prev":"next",this.toggleStory(i)},toggleStory:function(e){var t,i,n=this;this.curVideoDom&&this.curVideoDom.pause();var a="mp4"===(null===(t=this.activeCover)||void 0===t||null===(i=t.storyList[this.curStoryIndex])||void 0===i?void 0:i.slice(-3));if(e&&this.totalStoryCount>1){var r,o;if(clearInterval(this.storyInterval),"prev"===e){if(0===this.curStoryIndex)return;this.curStoryIndex-=1}else{if(this.curStoryIndex===this.totalStoryCount-1)return;this.curStoryIndex+=1}a="mp4"===(null===(r=this.activeCover)||void 0===r||null===(o=r.storyList[this.curStoryIndex])||void 0===o?void 0:o.slice(-3)),a?this.playVideo():this.storyInterval=window.setInterval((function(){return n.toggleStory()}),3e3)}else if(this.totalStoryCount>1){if(a)return this.playVideo();this.curStoryIndex===this.totalStoryCount-1&&(this.storyFlag=-1),this.curStoryIndex+=this.storyFlag,0===this.curStoryIndex&&(this.storyFlag=1)}else if(1===this.totalStoryCount&&a)return this.playVideo()},gotoGuide:function(e){var t="";switch(e){case 0:t="register";break;case 1:t="design";break;case 2:t="standard";break;case 3:t="pay";break;case 4:t="delivery";break;default:break}window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=".concat(t,"&index=-1"),"_blank")},goToMake:function(){var e=window.location,t=e.origin,i=e.pathname,n=e.search,a="".concat(t).concat(i).concat(n,"#/make");window.location.replace(a)},goToSignup:function(){var e=window.location,t=e.origin,i=e.pathname,n=e.search,a="".concat(t).concat(i).concat(n,"#/signup/sign_should_know");window.open(a,"_blank")}},beforeDestroy:function(){window.onresize=function(){},clearInterval(this.storyInterval)}}),wu=bu,Cu=(0,g.Z)(wu,cu,lu,!1,null,"16a90e7a",null),_u=Cu.exports,xu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-up-progress-wrapper"},[t("router-view")],1)},Iu=[],ku=s.ZP.extend({name:"SignUpWrapper"}),Tu=ku,Su=(0,g.Z)(Tu,xu,Iu,!1,null,null,null),Au=Su.exports,Du=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"notice-detail"},[e.isPageReady?t("div",{staticClass:"main-card"},[t("div",{staticClass:"notice-title"},[e._v(e._s(e.notice.title))]),t("div",{staticClass:"notice-content md-wrap",domProps:{innerHTML:e._s(e.content)}}),t("div",{staticClass:"sign"},[e._v(e._s(e.notice.signature))]),t("div",{staticClass:"date"},[e._v(e._s(e.notice.date))])]):[e._m(0)]],2)},Pu=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],Zu=i(32012),Uu=i(48154),Eu=i.n(Uu),Ru=new(Eu()),Mu=new Zu.Z,Lu=i(90520),Fu=s.ZP.extend({name:"NoticeDetail",data:function(){return{id:"",notice:{},content:"",isPageReady:!1}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e,n=e.$route.query.id,n){t.next=4;break}return t.abrupt("return",e.$router.push({name:"notice"}));case 4:return i.id=n,t.next=7,i.fetchData();case 7:i.isPageReady=!0;case 8:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,Mu.getDetail(i.id);case 3:n=t.sent,n&&0===n.baseResponse.ret&&(i.notice=n,i.notice.date=Lu("yyyy年MM月dd日",new Date(1e3*n.time)),i.content=Ru.render(n.content));case 5:case"end":return t.stop()}}),t)})))()}}}),Nu=Fu,Ou=(0,g.Z)(Nu,Du,Pu,!1,null,"56fdf26c",null),Bu=Ou.exports,qu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"notice-list"},[t("div",{staticClass:"main-card"},[t("div",{staticClass:"title"},[e._v("公告")]),t("ul",{staticClass:"notice-list"},e._l(e.list,(function(n,a){return t("li",{key:a,staticClass:"notice-item",on:{click:function(t){return e.handleDetail(n)}}},[t("div",{staticClass:"notice-body"},[t("span",[e._v(e._s(n.title))]),n.new?t("div",{staticClass:"new-tag"},[t("img",{attrs:{src:i(38036)}})]):e._e()]),t("span",{staticClass:"time"},[e._v(e._s(n.date))])])})),0)])])},Qu=[],ju=s.ZP.extend({name:"NoticeList",computed:{list:function(){return m.PJ.noticeList}},methods:{handleDetail:function(e){this.$router.push({name:"noticeDetail",query:{id:e.announcementId}})}}}),Hu=ju,Gu=(0,g.Z)(Hu,qu,Qu,!1,null,"4f85d8d8",null),Wu=Gu.exports,zu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"revoke-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"已提交退票申请",desc:"退回的发票预计15个工作日内进行处理并通知，届时原发票金额退回可开票状态，并可以再次申请开发票或退款操作（违规下线状态下）。",confirmText:"查看开票状态"},on:{confirm:e.gotoInvoiceDetail}})],1)])},Vu=[],Ju=s.ZP.extend({name:"CoverSubmitSuccess",components:{SuccessResult:b},methods:{gotoInvoiceDetail:function(){var e=this.$route.query.iid;this.$router.push({name:"invoice",query:{iid:e}})}}}),Ku=Ju,Yu=(0,g.Z)(Ku,zu,Vu,!1,null,"c045f712",null),Xu=Yu.exports,$u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-submit-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"已提交",desc:"<p>".concat(e.invoiceTypeDesc,"，次日上午10点前，</p><p>可进入 <a href='/#/invoice?iid=").concat(e.iid,"'>开票记录</a> 页面撤消开票申请</p>")}})],1)])},ed=[];(function(e){e[e["Canceled"]=1]="Canceled",e[e["Applied"]=2]="Applied",e[e["Pending"]=3]="Pending",e[e["Success"]=4]="Success",e[e["Revoking"]=5]="Revoking",e[e["Revoked"]=6]="Revoked"})(Wl||(Wl={})),function(e){e[e["已撤销"]=1]="已撤销",e[e["已申请"]=2]="已申请",e[e["开票中"]=3]="开票中",e[e["已完成"]=4]="已完成",e[e["退票中"]=5]="退票中",e[e["已退票"]=6]="已退票"}(zl||(zl={})),function(e){e[e["EnterpriseGeneral"]=1]="EnterpriseGeneral",e[e["EnterpriseSpecial"]=2]="EnterpriseSpecial",e[e["Personal"]=3]="Personal"}(Vl||(Vl={})),function(e){e[e["增值税普通发票"]=1]="增值税普通发票",e[e["增值税专用发票"]=2]="增值税专用发票",e[e["个人增值税普通发票"]=3]="个人增值税普通发票"}(Jl||(Jl={}));var td,id=s.ZP.extend({name:"CoverSubmitSuccess",components:{SuccessResult:b},computed:{iid:function(){return this.$route.query.iid},invoiceType:function(){return Number(this.$route.query.invoiceType)},invoiceTypeDesc:function(){return this.invoiceType===Vl.EnterpriseSpecial?"发票预计15个工作日寄出":"电子发票预计7个工作日可下载"}},methods:{gotoInvoiceDetail:function(){this.$router.push({name:"invoice",query:{iid:this.iid}})}}}),nd=id,ad=(0,g.Z)(nd,$u,ed,!1,null,"7f63bd88",null),rd=ad.exports,od=(i(82526),i(41817),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-detail"},[e.isPageReady?t("div",{staticClass:"main-card invoice-detail-wrap"},[t("div",{staticClass:"title"},[t("span",{staticClass:"left"},[e._v("开票记录详情")]),4===e.invoice.invoiceStatus&&e.invoice.invoiceType!==e.InvoiceType.EnterpriseSpecial?t("mp-button",{attrs:{type:"primary"},on:{click:e.download}},[e._v(" 下载发票 ")]):e._e()],1),t("div",{staticClass:"divide"}),t("div",{staticClass:"progress-section"},[t("div",{staticClass:"info-title"},[e._v("开票详情：")]),t("Step",{staticClass:"step-wrap",attrs:{steps:e.steps,curStep:e.curStep},scopedSlots:e._u([2===e.invoice.invoiceStatus?{key:"label_0",fn:function(){return[t("cancel-apply-popover",{staticClass:"action",attrs:{"invoice-id":e.invoiceId},on:{success:e.fetchData}})]},proxy:!0}:{key:"label_2",fn:function(){return[e.invoice.invoiceDetail.expressNumber?t("div",{staticClass:"info"},[t("mp-popover",{attrs:{position:"up-left",width:"284"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("span",[e._v("EMS快递单号："+e._s(e.invoice.invoiceDetail.expressNumber))])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,2827226754)})],1):e._e()]},proxy:!0}],null,!0)})],1),t("div",{staticClass:"divide"}),t("div",{staticClass:"main-info-section"},[t("div",{staticClass:"info-title"},[e._v("开票信息：")]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票金额")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.amount)+"元")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票抬头")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.title))]),t("a",{staticStyle:{"margin-left":"16px"},on:{click:function(t){e.showTitleDetailDialog=!0}}},[e._v("抬头详情")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票类型")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.type))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("邮寄信息")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.mail))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票号码")]),t("div",{staticClass:"content"},[t("span",[e._v(e._s(e.invoiceForShow.number))]),4==e.invoice.invoiceStatus?t("a",{on:{click:function(t){return t.preventDefault(),e.handleRevokeClick.apply(null,arguments)}}},[e._v("申请退票")]):e._e()])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("申请时间")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.time))])])])])]):t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})]),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"抬头详情",width:675},model:{value:e.showTitleDetailDialog,callback:function(t){e.showTitleDetailDialog=t},expression:"showTitleDetailDialog"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开票类型")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceTypeText))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票抬头")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.title))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("纳税人识别号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.socialCreditCode))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户银行")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.bankName))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户账号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.bankAccount))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("注册地址")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.registerAddress))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("公司注册电话")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.registerTelNumber))])])])]),t("mp-dialog",{staticClass:"revoke-dialog",attrs:{title:"申请退票",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showRevokeFormDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSubmitRevoke,loading:e.revokeLoading},on:{click:function(t){return t.preventDefault(),e.revoke.apply(null,arguments)}}},[e._v("确认申请")])],1)]},proxy:!0}]),model:{value:e.showRevokeFormDialog,callback:function(t){e.showRevokeFormDialog=t},expression:"showRevokeFormDialog"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票金额")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.amount)+"元")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票原因")]),t("div",{staticClass:"content"},[t("mp-dropdown",{attrs:{options:e.reasonList},model:{value:e.reasonChoice,callback:function(t){e.reasonChoice=t},expression:"reasonChoice"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("材料要求")]),t("div",{staticClass:"content"},[t("div",{staticClass:"line tip"},[e._v("请将发票原件邮寄给：")]),t("div",{staticClass:"line"},[e._v("收件人：郑燕锺")]),t("div",{staticClass:"line"},[t("span",[e._v("电话：0755-86013388")]),t("span",{staticClass:"tip"},[e._v("（该联系方式仅供寄件使用）")])]),t("div",{staticClass:"line"},[e._v("地址：深圳市南山区深南大道9998号万利达科技大厦")])])])]),t("mp-form",{ref:"revokeForm",staticClass:"revoke-form",attrs:{model:e.revokeForm,rules:e.revokeFormRule,"label-width":100}},[t("div",{staticClass:"revoke-form-content"},[t("mp-form-item",{attrs:{prop:"description"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("退票说明")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",multi:"multi",placeholder:"详细的退票原因说明，100字以内"},model:{value:e.revokeForm.description,callback:function(t){e.$set(e.revokeForm,"description",t)},expression:"revokeForm.description"}})],1),t("mp-form-item",{attrs:{prop:"mailNumber"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("寄出快递单号")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"请填写寄出的快递单号"},model:{value:e.revokeForm.mailNumber,callback:function(t){e.$set(e.revokeForm,"mailNumber",t)},expression:"revokeForm.mailNumber"}})],1)],1)])],1),t("mp-dialog",{staticClass:"revoke-dialog",attrs:{title:"申请退票",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showRevokeFormDialog2=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSubmitRevoke,loading:e.revokeLoading},on:{click:function(t){return t.preventDefault(),e.revoke.apply(null,arguments)}}},[e._v("确认申请")])],1)]},proxy:!0}]),model:{value:e.showRevokeFormDialog2,callback:function(t){e.showRevokeFormDialog2=t},expression:"showRevokeFormDialog2"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票金额")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.amount)+"元")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票原因")]),t("div",{staticClass:"content"},[t("mp-dropdown",{attrs:{options:e.reasonList},model:{value:e.reasonChoice,callback:function(t){e.reasonChoice=t},expression:"reasonChoice"}})],1)])]),t("mp-form",{ref:"revokeForm",staticClass:"revoke-form",attrs:{model:e.revokeForm,rules:e.revokeFormRule,"label-width":100}},[t("div",{staticClass:"revoke-form-content"},[t("mp-form-item",{attrs:{prop:"description"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("退票说明")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",multi:"multi",placeholder:"详细的退票原因说明，100字以内"},model:{value:e.revokeForm.description,callback:function(t){e.$set(e.revokeForm,"description",t)},expression:"revokeForm.description"}})],1)],1)])],1)],1)}),sd=[],cd=i(96736),ld=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{staticClass:"cancel-popover",attrs:{width:236},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"open-invoice"},[e._v("撤销申请")])]},proxy:!0},{key:"content",fn:function(){return[t("p",{staticClass:"content",staticStyle:{"text-align":"center"}},[e._v("撤销该发票申请？")])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.showCancelDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",size:"mini",loading:e.loading},on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v("撤销")])],1)]},proxy:!0}]),model:{value:e.showCancelDialog,callback:function(t){e.showCancelDialog=t},expression:"showCancelDialog"}})},ud=[],dd=s.ZP.extend({components:{},props:{invoiceId:String},data:function(){return{showCancelDialog:!1,loading:!1}},computed:{},methods:{cancel:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,m.AQ.recallInvoice({invoiceId:e.invoiceId,vm:e});case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:e.showCancelDialog=!1,e.$emit("success");case 9:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()}}}),pd=dd,vd=(0,g.Z)(pd,ld,ud,!1,null,"0f113e2c",null),md=vd.exports,fd=i(90520),hd=new cd.Z,gd=s.ZP.extend({name:"InvoiceDetail",components:{CancelApplyPopover:md},data:function(){return{invoiceType2:0,InvoiceType:Vl,isPageReady:!1,invoiceId:"",showTitleDetailDialog:!1,showConfirmRevokeDialog:!1,showRevokeFormDialog:!1,showRevokeFormDialog2:!1,revokeForm:{description:"",mailNumber:""},revokeLoading:!1,revokeFormRule:{description:[{trigger:"change",validator:function(e,t,i){return t.length>100?i(new Error("退票说明需在100字以内")):t?i():i(new Error("请输入退票说明"))}}],mailNumber:[{trigger:"change",validator:function(e,t,i){return t?i():i(new Error("请输入快递单号"))}}]},reasonChoice:"0",reasonList:[{label:"不需要发票",value:"0"},{label:"发票类型有误",value:"1"},{label:"发票资料有误",value:"5"},{label:"发票金额有误",value:"6"},{label:"发票盖章问题",value:"7"},{label:"需要退款",value:"8"}]}},computed:{canSubmitRevoke:function(){if(this.revokeForm.description.length>100)return!1;var e=m.AQ.invoice;return!((null===e||void 0===e?void 0:e.invoiceType)===Vl.EnterpriseSpecial&&!this.revokeForm.mailNumber)},steps:function(){var e=m.AQ.invoice,t=e.invoiceStatus;if(t>=Wl.Applied&&t<=Wl.Success){var i="";return i=e.invoiceType===Vl.EnterpriseSpecial?e.invoiceDetail.expressNumber?"已完成（已寄出）":"已完成（未寄出）":"已完成",[{label:"已申请"},{label:"开票中"},{label:i}]}return t===Wl.Canceled?[{label:"已申请"},{label:"已撤销"}]:t===Wl.Revoking||t===Wl.Revoked?[{label:"退票中"},{label:"已退票"}]:[]},curStep:function(){var e=m.AQ.invoice,t=e.invoiceStatus;return t===Wl.Canceled?1:t===Wl.Applied?0:t===Wl.Pending?1:t===Wl.Success?2:t===Wl.Revoking?0:t===Wl.Revoked?2:0},invoice:function(){return m.AQ.invoice},invoiceTypeText:function(){return m.AQ.invoice?Jl[m.AQ.invoice.invoiceType]:""},invoiceDetail:function(){return m.AQ.invoice&&m.AQ.invoice.invoiceDetail?m.AQ.invoice.invoiceDetail:{}},invoiceForShow:function(){var e=m.AQ.invoice;if(!e)return{};var t=e.invoiceDetail,i=(t.title,t.mailAddressProvince),n=t.mailAddressCity,a=t.mailAddressDistrict,r=void 0===a?"":a,o=t.mailAddressDetail,s=t.mailAddressee,c=t.mailAddresseeTelNumber,l=t.invoiceNumber,u="".concat(i).concat(n).concat(r).concat(o,";").concat(s,";").concat(c);return e.invoiceType!==Vl.EnterpriseSpecial&&(u="-"),{amount:(0,_e.Zh)(e.invoiceDetail.invoiceAmountInCents),title:e.invoiceDetail.title,type:Jl[e.invoiceType],mail:u,number:l||"-",time:fd("yyyy/MM/dd hh:mm",new Date(1e3*e.createTime))}}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(m.AQ.invoice,i=e,n=e.$route.query.iid,n){t.next=5;break}return t.abrupt("return",e.$router.replace({name:"invoices"}));case 5:return i.invoiceId=n,t.next=8,i.fetchData();case 8:i.isPageReady=!0;case 9:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,m.AQ.getInvoice(i.invoiceId);case 3:case"end":return t.stop()}}),t)})))()},download:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,hd.downloadInvoice(i.invoiceId);case 3:case"end":return t.stop()}}),t)})))()},handleRevokeClick:function(){if(this.invoice){var e=m.AQ.invoice;e.invoiceType==Vl.EnterpriseSpecial?this.showRevokeFormDialog=!0:this.showRevokeFormDialog2=!0}},revoke:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,e.revokeLoading=!0,t.prev=2,t.next=5,hd.cancelInvoice(e.invoiceId,e.revokeForm.description,e.revokeForm.mailNumber,parseInt(e.reasonChoice));case 5:n=t.sent;case 6:return t.prev=6,e.revokeLoading=!1,t.finish(6);case 9:n&&0===n.baseResponse.ret?i.$router.push({name:"revokeSuccess",query:{iid:i.invoiceId}}):e.errorTip("申请异常，请稍后再试或联系客服");case 10:case"end":return t.stop()}}),t,null,[[2,,6,9]])})))()},errorTip:function(e){var t=this;t.$tipsErr(e),window.setTimeout((function(){return t.$tipsHide()}),3e3)}}}),yd=gd,bd=(0,g.Z)(yd,od,sd,!1,null,"32904aad",null),wd=bd.exports,Cd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-make-wrap"},[t("div",{staticClass:"title"},[e._v("确认开票信息")]),t("div",{staticClass:"desc"},[e._v("企业增值税专用发票为纸质发票，需要选择指定地址邮寄。其余类型的发票为电子发票，开票后可自行下载电子版。")]),t("div",{staticClass:"divide"}),t("div",{staticClass:"invoice-make-body"},[t("div",{staticClass:"input-tip"},[e._v("填写发票抬头")]),t("a-table",{staticClass:"invoice-make-table",attrs:{columns:e.invoicColumns,dataSource:e.invoiceList,pagination:!1},scopedSlots:e._u([{key:"action",fn:function(){return[e.invoice.invoiceType?t("div",{staticClass:"detail"},[t("a",{staticStyle:{"margin-right":"20px"},on:{click:e.checkTitleDetail}},[e._v("抬头详情")]),t("a",{on:{click:function(t){return e.editInvoice(2)}}},[e._v("修改")])]):t("div",{staticClass:"detail"},[t("span",[e._v("暂无发票抬头信息，")]),t("a",{on:{click:function(t){return e.editInvoice(1)}}},[e._v("编辑")])])]},proxy:!0}])}),2===e.invoiceEditTemp.invoiceType?[t("div",{staticClass:"input-tip"},[e._v("填写邮寄地址")]),t("a-table",{staticClass:"address-table",attrs:{columns:e.addressColumns,dataSource:e.addressList,pagination:!1},scopedSlots:e._u([{key:"action",fn:function(){return[t("div",{staticClass:"detail"},[t("a",{on:{click:e.editAddress}},[e.invoice.mailAddressee?[e._v("编辑")]:[e._v("修改")]],2)])]},proxy:!0}],null,!1,236326789)})]:e._e()],2),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"开票须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:e.knowBack}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:e.knowConfirm}},[e._v("同意")])],1)]},proxy:!0}]),model:{value:e.stepKnow,callback:function(t){e.stepKnow=t},expression:"stepKnow"}},[1==e.stepKnow?t("div",{staticClass:"tips-content"},[t("h2",[e._v("特别提示")]),t("p",[e._v(" 1.在经济交往中，任何主体均应严格遵守《中华人民共和国发票管理办法》等法律法规的规定，依法取得、使用发票，不得转让、代开发票或以其他非法形式使用发票，否则将构成违反犯罪行为，须承担相应的法律责任。 ")]),t("p",[e._v(" 2.在微信红包封面开放平台，当且仅当开通本功能并付款的定制方，并非实际的服务使用方的情况下，定制方才可通过“开具其他主体发票”入口，申请腾讯就本服务向实际的服务使用方开具发票。 ")]),t("p",[e._v(" 3.定制方在此同意，一旦通过“开具其他主体发票”入口申请腾讯向实际的服务使用方开具发票，定制方即无权要求腾讯就相关服务再向其开具发票。在向实际的服务使用方开具发票后，腾讯就本服务所承担的发票开具义务即履行完毕。 ")]),t("p",[e._v("4.就任一定制方名下的服务，定制方仅能要求腾讯向单一主体开具发票，不得分拆服务金额或订单，要求腾讯向一个以上的主体开具发票。")]),t("p",[e._v(" 5.定制方申请“开具其他主体发票”，需要提供实际的服务使用方加盖公章的《承诺书》。定制方应确保该等《承诺书》为实际的服务使用方的真实意思表示，并在本平台上传《承诺书》盖章版的清晰彩色扫描件。否则腾讯有权拒绝本开票申请，而仅同意向定制方开具发票。 ")]),t("p",[e._v(" 6.申请“开具其他主体发票”的操作为不可撤销的操作，请在仔细阅读、充分理解并同意本《特别提示》的全部内容，同时确认你符合本《特别提示》第2条所述的条件后，才能进行本操作。当腾讯根据定制方的申请向实际的服务使用方开具发票后，定制方也不得以任何形式否认本申请，或要求腾讯撤回向实际的服务使用方开具的发票。 ")]),t("p",[e._v("7.如定制方在使用“开具其他主体发票”功能的过程中，有任何违法行为，导致腾讯或任何第三方受到任何损失的，定制方应赔偿腾讯及第三方的全部损失。")])]):e._e(),2==e.stepKnow?t("div",{staticClass:"step-wrap"},[t("div",{staticClass:"step"},[t("div",{staticClass:"step-item"},[t("div",{staticClass:"num"},[e._v("1")]),t("div",{staticClass:"label"},[e._v("下载模版")]),t("a",{staticClass:"link",attrs:{href:"http://res.wx.qq.com/a/wx_fed/red-envelope-cover-platform/res/doc/invoice_1.docx"}},[e._v("下载")])]),t("div",{staticClass:"step-item"},[t("div",{staticClass:"num"},[e._v("2")]),t("div",{staticClass:"label"},[e._v("填写模版")]),t("a",{staticClass:"link",attrs:{href:"http://res.wx.qq.com/a/wx_fed/red-envelope-cover-platform/res/doc/invoice_2.docx"}},[e._v("查看填写规则")])]),t("div",{staticClass:"step-item"},[t("div",{staticClass:"num"},[e._v("3")]),t("div",{staticClass:"label"},[e._v("发送至客服邮箱")]),t("div",{staticClass:"link",on:{click:function(t){return e.copy("input-mail")}}},[e._v("复制客服邮箱链接")]),t("input",{ref:"input-mail",attrs:{value:"wxcover_support@tencent.com"}})])])]):e._e()]),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"填写抬头信息",width:675},on:{close:e.resetInvoiceEditTemp},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.cancelInvoiceForm.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSetInvoice},on:{click:function(t){return t.preventDefault(),e.setInvoice.apply(null,arguments)}}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.showInvoiceEditDialog,callback:function(t){e.showInvoiceEditDialog=t},expression:"showInvoiceEditDialog"}},[t("mp-form",{ref:"invoiceForm",staticClass:"invoice-form",attrs:{model:e.invoiceEditTemp,rules:e.invoiceFormRule,"label-width":120}},[t("mp-form-item",{attrs:{rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("选择开票类型")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-dropdown",{staticClass:"invoice-dialog-dropdown",attrs:{options:e.invoiceTypeOptions},model:{value:e.invoiceEditTemp.invoiceType,callback:function(t){e.$set(e.invoiceEditTemp,"invoiceType",t)},expression:"invoiceEditTemp.invoiceType"}})],1),t("mp-form-item",{attrs:{rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("抬头类型")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-dropdown",{staticClass:"invoice-dialog-dropdown",attrs:{options:e.titleTypeOptions},model:{value:e.invoiceEditTemp.titleType,callback:function(t){e.$set(e.invoiceEditTemp,"titleType",t)},expression:"invoiceEditTemp.titleType"}})],1),t("mp-form-item",{attrs:{prop:"title",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("发票抬头")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",disabled:2!==e.invoiceEditTemp.titleType&&1!=e.principalType,placeholder:2!==e.invoiceEditTemp.titleType?"填写单位全称":"填写个人名称"},scopedSlots:e._u([{key:"description",fn:function(){return[2!==e.invoiceEditTemp.titleType&&1!=e.principalType?t("p",[t("span",[e._v("发票抬头需与认证主体名称一致")])]):e._e()]},proxy:!0}]),model:{value:e.invoiceEditTemp.title,callback:function(t){e.$set(e.invoiceEditTemp,"title","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.title"}})],1),2!==e.invoiceEditTemp.titleType?[t("mp-form-item",{attrs:{prop:"socialCreditCode",rules:e.validCreditCode},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("纳税人识别号")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}],null,!1,3669169323)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text"},model:{value:e.invoiceEditTemp.socialCreditCode,callback:function(t){e.$set(e.invoiceEditTemp,"socialCreditCode","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.socialCreditCode"}})],1),t("mp-form-item",{attrs:{prop:"bankName",rules:2===e.invoiceEditTemp.invoiceType?e.validBankName:e.validChineseRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("开户银行")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,1644171725)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"企业基本开户行"},model:{value:e.invoiceEditTemp.bankName,callback:function(t){e.$set(e.invoiceEditTemp,"bankName","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.bankName"}})],1),t("mp-form-item",{attrs:{prop:"bankAccount",rules:2===e.invoiceEditTemp.invoiceType?e.validBankAccount:e.validBankNumRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("开户账号")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,832539206)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"开户许可证登记的银行账号"},model:{value:e.invoiceEditTemp.bankAccount,callback:function(t){e.$set(e.invoiceEditTemp,"bankAccount","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.bankAccount"}})],1),t("mp-form-item",{attrs:{prop:"registerAddress",rules:2===e.invoiceEditTemp.invoiceType?e.requiredRule:{}},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("注册地址")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,1499057716)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"税务登记证（纳税人识别号证）上的地址"},model:{value:e.invoiceEditTemp.registerAddress,callback:function(t){e.$set(e.invoiceEditTemp,"registerAddress","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.registerAddress"}})],1),t("mp-form-item",{attrs:{prop:"registerTelNumber",rules:2===e.invoiceEditTemp.invoiceType?e.requiredRule:{}},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("公司注册电话")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,374910552)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"在税务机关登记的电话"},model:{value:e.invoiceEditTemp.registerTelNumber,callback:function(t){e.$set(e.invoiceEditTemp,"registerTelNumber","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.registerTelNumber"}})],1)]:e._e()],2)],1),t("mp-dialog",{staticClass:"address-dialog",attrs:{title:"填写邮寄地址",width:675},on:{close:e.resetAddressEditTemp},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.cancelAddressForm.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSetAddress},on:{click:function(t){return t.preventDefault(),e.setAddress.apply(null,arguments)}}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.showAddressEditDialog,callback:function(t){e.showAddressEditDialog=t},expression:"showAddressEditDialog"}},[t("mp-form",{ref:"addressForm",staticClass:"address-form",attrs:{model:e.addressEditTemp,rules:e.invoiceFormRule,"label-width":120}},[t("mp-form-item",{attrs:{prop:"mailAddressee",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("收件人姓名")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"填写收件人姓名"},model:{value:e.addressEditTemp.mailAddressee,callback:function(t){e.$set(e.addressEditTemp,"mailAddressee","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailAddressee"}})],1),t("mp-form-item",{attrs:{rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("邮寄地址")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("div",{staticClass:"address-input"},[t("mp-dropdown",{attrs:{placeholder:"选择省份",trigger:"click",options:e.provinceList},on:{change:e.handleProvinceAddrChange},model:{value:e.addressEditTemp.mailAddressProvince,callback:function(t){e.$set(e.addressEditTemp,"mailAddressProvince",t)},expression:"addressEditTemp.mailAddressProvince"}})],1),t("div",{staticClass:"address-input"},[t("mp-dropdown",{attrs:{placeholder:"选择城市",trigger:"click",options:e.cityList,loading:e.cityAddrLoading},on:{change:e.handleCityAddrChange},model:{value:e.addressEditTemp.mailAddressCity,callback:function(t){e.$set(e.addressEditTemp,"mailAddressCity",t)},expression:"addressEditTemp.mailAddressCity"}})],1),t("div",{staticClass:"address-input"},[t("mp-dropdown",{attrs:{placeholder:"选择区/县",trigger:"click",options:e.districtList,loading:e.districtAddrLoading},model:{value:e.addressEditTemp.mailAddressDistrict,callback:function(t){e.$set(e.addressEditTemp,"mailAddressDistrict",t)},expression:"addressEditTemp.mailAddressDistrict"}})],1)]),t("mp-form-item",{attrs:{prop:"mailAddressDetail",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("详细地址")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"填写具体地址信息，不必重复省市区信息"},model:{value:e.addressEditTemp.mailAddressDetail,callback:function(t){e.$set(e.addressEditTemp,"mailAddressDetail","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailAddressDetail"}})],1),t("mp-form-item",{attrs:{prop:"mailAddresseeTelNumber",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("联系方式")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"座机或移动电话"},model:{value:e.addressEditTemp.mailAddresseeTelNumber,callback:function(t){e.$set(e.addressEditTemp,"mailAddresseeTelNumber","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailAddresseeTelNumber"}})],1),t("mp-form-item",{attrs:{prop:"mailPostCode",rules:e.validMailPostCode},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("邮政编码")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"输入地区的邮政编码"},model:{value:e.addressEditTemp.mailPostCode,callback:function(t){e.$set(e.addressEditTemp,"mailPostCode","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailPostCode"}})],1)],1)],1),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"抬头详情",width:675},model:{value:e.showTitleDetailDialog,callback:function(t){e.showTitleDetailDialog=t},expression:"showTitleDetailDialog"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开票类型")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceList[0].type))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票抬头")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.title))])]),2!==e.invoice.titleType?[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("纳税人识别号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.socialCreditCode))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户银行")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.bankName||"-"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户账号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.bankAccount||"-"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("注册地址")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.registerAddress||"-"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("公司注册电话")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.registerTelNumber||"-"))])])]:e._e()],2)]),t("mp-dialog",{staticClass:"confirm-dialog",attrs:{value:e.showConfirmDialog,closeble:"false",width:675},on:{close:e.handleConfirmDialogClose},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return e.updateShowConfirmDialog(!1)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:e.confirmDisabled,loading:e.confirmLoading},on:{click:e.submit}},[e._v("提交")])],1)],1)]},proxy:!0}])},[t("div",{staticClass:"confirm-section"},[t("span",[e._v("提交后不可修改开票信息。若信息填写错误，可在次日上午10点前撤销开票。")])])])],1)},_d=[],xd=i(94605),Id=new cd.Z,kd=function(e){return/^[A-Z0-9]{15,20}$/.test(e)},Td=function(e){return!e||/^(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\u4E00-\u9FA5\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])+$/.test(e)},Sd=function(e){return!e||/^[0-9]+$/.test(e)},Ad=function(e){return!e||/^[0-9\-]+$/.test(e)},Dd={validator:function(e,t,i){return Td(t)?i():i(new Error("仅支持输入中文"))}},Pd={validator:function(e,t,i){return Ad(t)?i():i(new Error("仅支持输入数字"))}},Zd=s.ZP.extend({name:"InvoiceMake",data:function(){return{amount:0,orderId:"",showInvoiceEditDialog:!0,showEditAddressDialog:!1,showTitleDetailDialog:!1,cityAddrLoading:!1,districtAddrLoading:!1,confirmDisabled:!1,stepKnow:0,knowConfirmText:"同意",invoiceTypeOptions:[{label:Jl[Vl.EnterpriseSpecial],value:Vl.EnterpriseSpecial},{label:Jl[Vl.EnterpriseGeneral],value:Vl.EnterpriseGeneral}],titleTypeOptions:[{label:"企业",value:1}],invoiceEditTemp:{title:"",socialCreditCode:"",bankName:"",bankAccount:"",registerAddress:"",registerTelNumber:"",invoiceType:1,titleType:1},invoiceEditTempCache:{title:"",socialCreditCode:"",bankName:"",bankAccount:"",registerAddress:"",registerTelNumber:"",invoiceType:1,titleType:1},addressEditTemp:{mailAddressProvince:"",mailAddressCity:"",mailAddressDistrict:"",mailAddressDetail:"",mailPostCode:"",mailAddressee:"",mailAddresseeTelNumber:""},addressEditTempCache:{mailAddressProvince:"",mailAddressCity:"",mailAddressDistrict:"",mailAddressDetail:"",mailPostCode:"",mailAddressee:"",mailAddresseeTelNumber:""},invoicColumns:[{dataIndex:"title",index:"title",title:"发票抬头"},{dataIndex:"type",index:"type",title:"发票类型"},{title:"操作",key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}],addressColumns:[{dataIndex:"mailAddressee",index:"mailAddressee",title:"收件人"},{dataIndex:"mailAddresseeTelNumber",index:"mailAddresseeTelNumber",title:"联系方式"},{dataIndex:"mailAddress",index:"mailAddress",title:"收件地址"},{title:"操作",key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}],showAddressEditDialog:!1,requiredRule:{required:!0,message:"请填写此项内容"},validChineseRule:Dd,validBankNumRule:Pd,validCreditCode:[{required:!0,message:"请填写此项内容"},{trigger:["change","blur"],validator:function(e,t,i){return kd(t)?i():i(new Error("仅支持输入大写字母和数字，长度为15-20位"))}}],validBankName:[{required:!0,message:"请填写此项内容"},Dd],validBankAccount:[{required:!0,message:"请填写此项内容"},Pd],validMailPostCode:[{required:!0,message:"请填写此项内容"},{trigger:["change","blur"],validator:function(e,t,i){return Sd(t)?i():i(new Error("仅支持输入数字"))}}],provinceList:[],cityList:[],districtList:[],invoiceFormRule:{}}},props:{transactionIdList:Array,submit:Function,showConfirmDialog:Boolean,invoice:Object,confirmLoading:Boolean},watch:{"invoiceEditTemp.invoiceType":{handler:function(){var e=this;this.$nextTick((function(){var t=e;t.$refs.invoiceForm;t.invoiceEditTemp.invoiceType!==Vl.Personal?t.invoiceEditTemp.title=m.U6.user.principalName:t.invoiceEditTemp.title="",t.invoiceEditTemp.invoiceType==Vl.EnterpriseGeneral&&1===e.principalType?t.titleTypeOptions=[{label:"企业",value:1},{label:"个人",value:2}]:t.invoiceEditTemp.invoiceType==Vl.EnterpriseSpecial&&(t.titleTypeOptions=[{label:"企业",value:1}],t.invoiceEditTemp.titleType=1)}))},immediate:!0},"invoiceEditTemp.titleType":{handler:function(e){var t=this;2==t.invoiceEditTemp.titleType&&(this.invoiceEditTemp.invoiceType=Vl.EnterpriseGeneral),this.handleInvoiceTypeOptions()},immediate:!0}},computed:{principalType:function(){return m.U6.user.principalType},canSetInvoice:function(){var e=this,t=e.invoiceEditTemp,i=t.socialCreditCode;return t.invoiceType===Vl.Personal||2===t.titleType?!!t.title:t.invoiceType===Vl.EnterpriseGeneral?kd(i)&&Ad(t.bankAccount)&&Td(t.bankName):kd(i)&&Ad(t.bankAccount)&&Td(t.bankName)&&Object.values(t).every((function(e){return e}))},canSetAddress:function(){var e=this,t=e.addressEditTemp;return Sd(t.mailPostCode)&&Object.values(t).every((function(e){return e}))},invoiceList:function(){var e;return[{key:"0",title:(null===this||void 0===this||null===(e=this.invoice)||void 0===e?void 0:e.title)||"-",type:Jl[this.invoice.invoiceType]||"-"}]},addressList:function(){var e=this,t=e.invoice,i=t.mailAddressProvince,n=t.mailAddressCity,a=t.mailAddressDistrict,r=t.mailAddressDetail,o="".concat(i).concat(n).concat(a).concat(r);return[{key:"0",mailAddressee:e.invoice.mailAddressee||"-",mailAddresseeTelNumber:e.invoice.mailAddresseeTelNumber||"-",mailAddress:r?o:"-"}]},canSubmit:function(){var e=this,t=e.invoice;if(t.invoiceType===Vl.Personal||2==e.invoiceEditTemp.titleType){if(t.title)return!0}else if(t.invoiceType===Vl.EnterpriseGeneral){if(t.title)return!0}else if(t.invoiceType===Vl.EnterpriseSpecial&&t.title&&t.mailAddressee)return!0;return!1}},mounted:function(){var e=this;this.handleInvoiceTypeOptions(),this.$nextTick((function(){e.invoiceEditTempCache=JSON.parse(JSON.stringify(e.invoiceEditTemp))})),this.coverGetInvoiceAddrList()},methods:{handleConfirmDialogClose:function(){this.updateShowConfirmDialog(!1)},handleProvinceAddrChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.cityAddrLoading=!0,n=t.provinceList.find((function(t){return t.value===e})),a=null===n||void 0===n?void 0:n.areaId,t.cityList=[],t.districtList=[],t.addressEditTemp.mailAddressCity="",t.addressEditTemp.mailAddressDistrict="",i.prev=7,i.next=10,t.coverGetInvoiceAddrList(a);case 10:return i.prev=10,t.cityAddrLoading=!1,i.finish(10);case 13:case"end":return i.stop()}}),i,null,[[7,,10,13]])})))()},handleCityAddrChange:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.districtAddrLoading=!0,n=t.cityList.find((function(t){return t.value===e})),a=null===n||void 0===n?void 0:n.areaId,t.districtList=[],t.addressEditTemp.mailAddressDistrict="",i.prev=5,i.next=8,t.coverGetInvoiceAddrList(a);case 8:return i.prev=8,t.districtAddrLoading=!1,i.finish(8);case 11:case"end":return i.stop()}}),i,null,[[5,,8,11]])})))()},coverGetInvoiceAddrList:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Id.coverGetInvoiceAddrList(e);case 2:if(n=i.sent,null!==n&&void 0!==n&&n.addrList){i.next=5;break}return i.abrupt("return");case 5:a=n.addrList,o=a.map((function(e){return{label:e.areaName,value:e.areaName,areaId:e.areaId}})),e?a[0]&&"2"===a[0].level?(c=t.cityList).push.apply(c,(0,xd.Z)(o)):a[0]&&"3"===a[0].level&&(l=t.districtList).push.apply(l,(0,xd.Z)(o)):(s=t.provinceList).push.apply(s,(0,xd.Z)(o));case 8:case"end":return i.stop()}}),i)})))()},handleInvoiceTypeOptions:function(){1==this.principalType?this.invoiceTypeOptions=[{label:Jl[Vl.EnterpriseGeneral],value:Vl.EnterpriseGeneral}]:this.invoiceTypeOptions=[{label:Jl[Vl.EnterpriseSpecial],value:Vl.EnterpriseSpecial},{label:Jl[Vl.EnterpriseGeneral],value:Vl.EnterpriseGeneral}]},resetInvoiceEditTemp:function(){this.invoiceEditTemp=JSON.parse(JSON.stringify(this.invoiceEditTempCache))},resetAddressEditTemp:function(){this.addressEditTemp=JSON.parse(JSON.stringify(this.addressEditTempCache))},updateShowConfirmDialog:function(e){this.$emit("update:showConfirmDialog",e)},copy:function(e){var t=this;this.select(e),document.execCommand("copy")?(document.execCommand("copy"),t.$tipsSuc("复制成功"),window.setTimeout((function(){return t.$tipsHide()}),1500)):(t.$tipsErr("复制失败，请手动复制"),window.setTimeout((function(){return t.$tipsHide()}),1500))},select:function(e){var t=this.$refs[e];t.select()},knowConfirm:function(){1==this.stepKnow?this.stepKnow=2:2==this.stepKnow&&(this.stepKnow=0,this.showInvoiceEditDialog=!0)},toDoc:function(){this.stepKnow=1,this.showInvoiceEditDialog=!1},knowBack:function(){1==this.stepKnow?(this.stepKnow=0,this.showInvoiceEditDialog=!0):2==this.stepKnow&&(this.stepKnow=1)},editInvoice:function(e){var t=this;t.showInvoiceEditDialog=!0,1==m.U6.user.principalType?1==e&&(t.invoiceEditTemp.titleType=2):t.invoiceEditTemp.title=m.U6.user.principalName,this.invoiceEditTempCache=JSON.parse(JSON.stringify(this.invoiceEditTemp))},setInvoice:function(){this.$emit("update-invoice",this.invoiceEditTemp),this.invoiceEditTempCache=JSON.parse(JSON.stringify(this.invoiceEditTemp)),this.showInvoiceEditDialog=!1},editAddress:function(){this.showAddressEditDialog=!0},setAddress:function(){this.$emit("update-invoice",this.addressEditTemp),this.addressEditTempCache=JSON.parse(JSON.stringify(this.addressEditTemp)),this.showAddressEditDialog=!1},checkTitleDetail:function(){this.showTitleDetailDialog=!0},cancel:function(){this.$router.back()},cancelInvoiceForm:function(){this.showInvoiceEditDialog=!1,this.resetInvoiceEditTemp()},cancelAddressForm:function(){this.showAddressEditDialog=!1,this.resetAddressEditTemp()},errorTip:function(e){var t=this;t.$tipsErr(e),window.setTimeout((function(){return t.$tipsHide()}),3e3)}}}),Ud=Zd,Ed=(0,g.Z)(Ud,Cd,_d,!1,null,"2c5f23ac",null),Rd=Ed.exports,Md=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-manage",class:e.showActiveIcon?"active-filter-icon":""},[1===e.nav?t("div",{staticClass:"main-card-title"},[e._v("开发票")]):e._e(),t("div",{staticClass:"main-card",style:1==e.nav?"display:block":"display:none"},[1==e.step?[t("div",{staticClass:"title"},[e._v("开票说明：")]),e._m(0),t("a-table",{staticClass:"invoice-table",attrs:{loading:!e.isPageReady,columns:e.columnsInvoice,dataSource:e.newCanInvoiceList,pagination:!1,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,columnWidth:90},scroll:{y:455},locale:{emptyText:"暂无可开发票"},"row-key":"transactionId"},scopedSlots:e._u([{key:"filterDropdown",fn:function(i){var n=i.selectedKeys,a=i.confirm,r=i.clearFilters,o=i.column;return[t("div",{staticClass:"filter-dropdown"},[t("div",{staticClass:"filter-dropdown-title"},[e._v("筛选")]),t("a-table",{staticClass:"choose-table",attrs:{columns:e.choosenColumns,dataSource:e.choosenDataList,pagination:!1,"row-selection":{selectedRowKeys:e.tableSelectedRowKeys,onChange:e.onChoiceSelectChange},locale:{emptyText:"暂无可选项"},showHeader:!0,scroll:{y:246},"row-key":"orderId"},scopedSlots:e._u([{key:"nameAndImg1",fn:function(i,n){return[t("div",{staticClass:"order-header",attrs:{s:""}},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:n.packetImageUrl,"widget-cover-src":n.isWidgetPacket?n.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(n.packetName))])],1)]}}],null,!0)}),t("div",{staticClass:"button-wrap"},[t("div",[t("mp-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){return e.ChoiceCencel(r)}}},[e._v("取消")]),t("mp-button",{staticClass:"primary-btn",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.choiceConfirm(n,a,o.dataIndex)}}},[e._v("确定")])],1)])],1)]}},{key:"filterIcon",fn:function(e){return[t("div",{staticClass:"icon-choice",class:e?"icon-choice-active":""})]}},{key:"paymentTime",fn:function(i,n){return[t("div",{staticClass:"time"},[t("span",[e._v(e._s(e.timeToDate(n.paymentTime)))])])]}},{key:"nameAndImg",fn:function(i,n){return[t("div",{staticClass:"order-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:n.packetImageUrl,"widget-cover-src":n.isWidgetPacket?n.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(n.packetName))])],1)]}},{key:"action",fn:function(i,n){return[t("div",{staticClass:"detail"},[t("a",{on:{click:function(t){return e.handleToDetail(n)}}},[e._v("详情")])])]}}],null,!1,4202735966)})]:[t("InvoiceMake",{attrs:{transactionIdList:e.transactionIdList,submit:e.submit,invoice:e.invoice,showConfirmDialog:e.showConfirmDialog,confirmLoading:e.confirmLoading},on:{"update:invoice":function(t){e.invoice=t},"update:showConfirmDialog":function(t){e.showConfirmDialog=t},"update:show-confirm-dialog":function(t){e.showConfirmDialog=t},"update-invoice":e.updateInvoice}})],t("div",{staticClass:"choice-wrap"},[1==e.step?t("div",{staticClass:"choice-num-wrap"},[t("a-popover",{attrs:{overlayClassName:"choice-num-popover",trigger:"click",placement:"bottomLeft",mouseLeaveDelay:0,align:{offset:[85,-30]}},on:{visibleChange:function(t){return e.choiceNumWrapVisble=t}},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"choice-num-popover-content"},[t("div",{staticClass:"choice-pop-title"},[e._v("选中的订单")]),t("a-table",{staticClass:"invoice-choice-table",attrs:{columns:e.choiceColumnsInvoice,dataSource:e.choiceCanInvoiceList,pagination:!1,scroll:{y:250},locale:{emptyText:"暂无选中发票"},"row-key":"transactionId"},scopedSlots:e._u([{key:"action",fn:function(i,n,a,r){return[t("div",{staticClass:"detail"},[t("a",{staticClass:"icon-delete",on:{click:function(t){return e.deleteChoice(i,n,a,r)}}})])]}},{key:"paymentTime",fn:function(i,n){return[t("div",{staticClass:"time"},[t("span",[e._v(e._s(e.timeToDate(n.paymentTime)))])])]}},{key:"nameAndImg1",fn:function(i,n){return[t("div",{staticClass:"order-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:n.packetImageUrl,"widget-cover-src":n.isWidgetPacket?n.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(n.packetName))])],1)]}}],null,!1,2209557096)})],1)]},proxy:!0}],null,!1,897382316)},[t("div",{staticClass:"choice-popt-wrap"},[t("div",{staticClass:"choice-num",domProps:{innerHTML:e._s("选中 <span>".concat(e.selectedRowKeys.length,"</span> 笔订单"))}}),t("div",{staticClass:"choice-icon",class:e.choiceNumWrapVisble?"active":""})])])],1):e._e(),2==e.step?t("div",{staticClass:"choice-num-wrap"}):e._e(),t("div",{staticClass:"choice-title"},[e._v("合计（单张发票金额）：")]),t("div",{staticClass:"choice-price"},[e._v(e._s(e.price))]),t("div",[1==e.step?t("mp-button",{attrs:{type:"primary",disabled:0==e.selectedRowKeys.length||e.selectedRowKeys.length>e.MAX_SELECTED_ROW_KEYS},on:{click:function(t){e.step=2}}},[e._v(" 开发票 ")]):e._e(),2==e.step?t("mp-button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.step=1}}},[e._v("上一步")]):e._e(),2==e.step?t("mp-button",{attrs:{type:"primary",disabled:!e.canSubmit},on:{click:function(t){e.showConfirmDialog=!0}}},[e._v("提交")]):e._e()],1)])],2),t("div",{staticClass:"content",style:2==e.nav?"display:block":"display:none"},[t("InvoiceList")],1)])},Ld=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"desc"},[t("div",{staticClass:"p"},[e._v("1.从发票申请次日起为你开具发票，其中电子发票预计7个工作日可下载，纸质发票预计15个工作日寄出。")]),t("div",{staticClass:"p"},[t("span",[e._v("2.订单状态为违规冻结，违规下线，退款中，开票中，已开票时，不可开发票。")]),t("a",{attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=pay&index=3",target:"_blank"}},[e._v("查看发票指引")])]),t("div",{staticClass:"p"},[t("span",[e._v("3.使用封面兑换卡兑换的订单不可开发票，广告金支付的订单需到微信广告平台申请发票。")]),t("a",{attrs:{href:"https://ad.weixin.qq.com/docs/97",target:"_blank"}},[e._v("查看指引")])])])}],Fd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-list"},[t("div",{staticClass:"main-card-title"},[e._v("开票记录")]),e.isPageReady?t("div",{staticClass:"main-card"},[t("a-table",{staticClass:"invoice-table2",attrs:{columns:e.columns,dataSource:e.invoiceList,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"statusText",fn:function(){return[t("div",{staticClass:"status-text",style:{color:e.invoice.statusColor}},[e._v(e._s(e.invoice.statusText))])]},proxy:!0},{key:"action",fn:function(i,n){return[t("div",{staticClass:"detail"},[4===n.invoiceStatus&&n.invoiceType!==e.InvoiceType.EnterpriseSpecial?t("a",{staticClass:"operate",on:{click:function(t){return t.preventDefault(),e.download(n)}}},[e._v(" 下载发票 ")]):e._e(),2===n.invoiceStatus?t("cancel-apply-popover",{staticClass:"operate",attrs:{"invoice-id":n.invoiceId},on:{success:e.fetchData}}):e._e(),t("a",{on:{click:function(t){return e.handleToDetail(n)}}},[e._v("详情")])],1)]}}],null,!1,3398383881)}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.invoiceListLength>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.invoiceListLength,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1)],1):e._e()])},Nd=[],Od=new cd.Z,Bd=i(90520),qd=s.ZP.extend({name:"invoiceList",components:{CancelApplyPopover:md},data:function(){return{InvoiceType:Vl,isPageReady:!1,curPage:1,pageNum:8,invoiceId:"",list:[],showCancelDialog:!1,columns:[{dataIndex:"applyTime",key:"applyTime",title:"申请开票时间"},{dataIndex:"invoiceTitle",key:"invoiceTitle",title:"发票抬头"},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"开票金额"},{dataIndex:"statusText",key:"statusText",title:"状态"},{title:"操作",key:"action",align:"right",dataIndex:"action",scopedSlots:{customRender:"action"}}]}},computed:{invoiceListLength:function(){return m.AQ.invoiceList.length},successInvoiceData:function(){var e=m.AQ.invoiceList.reduce((function(e,t,i){return t.invoiceStatus===Wl.Success&&(e.count+=1,e.amount+=t.invoiceDetail.invoiceAmountInCents),e}),{count:0,amount:0});return e.amount=(0,_e.Zh)(e.amount),e},invoiceList:function(){var e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;return m.AQ.invoiceList.slice(t,i).map((function(e,t){var i=Object.assign({},e,{key:t,invoiceTitle:e.invoiceDetail.title,invoiceAmount:(0,_e.Zh)(e.invoiceDetail.invoiceAmountInCents),statusText:zl[e.invoiceStatus],applyTime:Bd("yyyy/MM/dd hh:mm",new Date(1e3*e.createTime))});return i}))}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.isPageReady=!0;case 3:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e,t.next=3,m.AQ.getInvoiceList();case 3:case"end":return t.stop()}}),t)})))()},handleToDetail:function(e){this.$router.push({name:"invoice",query:{iid:e.invoiceId}})},pageChange:function(e){this.curPage=e.currentPage},download:function(e){return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Od.downloadInvoice(e.invoiceId);case 2:case"end":return t.stop()}}),t)})))()}}}),Qd=qd,jd=(0,g.Z)(Qd,Fd,Nd,!1,null,"69069306",null),Hd=jd.exports,Gd=s.ZP.extend({name:"InvoiceManage",data:function(){return{isPageReady:!1,MAX_SELECTED_ROW_KEYS:1e3,nav:1,newCanInvoiceList:[],choosenColumns:[{key:"",title:"",scopedSlots:{customRender:"nameAndImg1"}}],choosenDataList:[],tableSelectedRowKeys:[],saveTableSelectedRowKeys:[],choiceNumWrapVisble:!1,columns:[{dataIndex:"paymentTime",key:"paymentTime",title:"订单时间",scopedSlots:{customRender:"paymentTime"}},{key:"",title:"红包封面",scopedSlots:{customRender:"nameAndImg"}},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"可开票金额（元）"},{title:"操作",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}}],columnsInvoice:[{dataIndex:"paymentTime",key:"paymentTime",scopedSlots:{customRender:"paymentTime"},title:"订单时间"},{key:"",title:"红包封面",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"nameAndImg"},onFilter:function(e,t){return t.name.toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(e){}},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"可开票金额（元）"},{title:"操作",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}}],curChoice:[],curPage:1,pageNum:5,step:1,selectedRowKeys:[],confirmLoading:!1,invoice:{},showConfirmDialog:!1,transactionIdList:[],price:"0",choiceColumnsInvoice:[{title:"",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}},{dataIndex:"paymentTime",key:"paymentTime",title:"订单时间",scopedSlots:{customRender:"paymentTime"}},{key:"",title:"红包封面",scopedSlots:{customRender:"nameAndImg1"}},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"可开票金额（元）"}],saveInvoiceList:[],filters:[],showActiveIcon:!1,choiceCanInvoiceList:[]}},computed:{canSubmit:function(){var e=this.invoice,t=this.principalType;if(e.invoiceType===Vl.Personal){if(e.title)return!0}else{if(e.invoiceType===Vl.EnterpriseGeneral&&1===t)return!!e.title;if(e.invoiceType===Vl.EnterpriseGeneral){if(e.title&&e.socialCreditCode)return!0}else if(e.invoiceType===Vl.EnterpriseSpecial)return e.mailAddressDetail&&Object.values(e).every((function(e){return e}))}return!1},principalType:function(){return m.U6.user.principalType},canInvoiceListLength:function(){return m.AQ.canInvoiceList.length},canInvoiceList:function(){var e=this.curPage,t=this.pageNum,i=(e-1)*t,n=i+t,a=m.AQ.canInvoiceList;return a.slice(i,n).map((function(e,t){var i=Object.assign({},e,{key:t,invoiceAmount:(0,_e.Zh)(e.invoiceAmountInCents)+"元"});return i}))}},components:{InvoiceList:Hd,CoverReceiveImg:ke.Z,InvoiceMake:Rd},watch:{$route:{handler:function(){this.$route.query.nav&&this.changeTab(+this.$route.query.nav)},immediate:!0}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.isPageReady=!0;case 3:case"end":return t.stop()}}),t)})))()},methods:{updateInvoice:function(e){var t=this;Object.entries(e).forEach((function(e){var i=(0,Ka.Z)(e,2),n=i[0],a=i[1];s.ZP.set(t.invoice,n,a)}))},ChoiceCencel:function(e,t){this.tableSelectedRowKeys=JSON.parse(JSON.stringify(this.saveTableSelectedRowKeys)),e()},choiceConfirm:function(e,t,i){var n=this;if(this.tableSelectedRowKeys.length>0){this.showActiveIcon=!0,this.saveTableSelectedRowKeys=JSON.parse(JSON.stringify(this.tableSelectedRowKeys));var a=[];this.saveInvoiceList.forEach((function(e){n.tableSelectedRowKeys.includes(e.orderId)&&a.push(e)})),a=a.sort((function(e,t){return t.paymentTime-e.paymentTime})),this.newCanInvoiceList=a}else this.showActiveIcon=!1,this.newCanInvoiceList=JSON.parse(JSON.stringify(this.saveInvoiceList));t()},deleteChoice:function(e,t,i){var n=t.transactionId;this.selectedRowKeys=this.selectedRowKeys.filter((function(e){return e!==n})),this.choiceCanInvoiceList=this.choiceCanInvoiceList.filter((function(e){return e.transactionId!==n})),this.onSelectChange(this.selectedRowKeys)},submit:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c,l,u;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.confirmLoading=!0,a=e.invoice,o=a.invoiceType,s=e,t.next=6,(new cd.Z).InvoiceWithPayInfoList(e.transactionIdList,{invoiceType:o,invoiceDetail:a});case 6:c=t.sent,e.confirmLoading=!1,l={"-20000":"提交失败，请填写发票抬头","-20001":"抬头过长，请联系客服","-20002":"提交失败，请补全抬头信息和邮寄地址信息","-20003":"纳税人识别号有误，仅支持大写字母和数字，长度为15-20位","-20004":"个人主体不支持开增值税专用发票","-20010":"单张发票不可选择超过".concat(e.MAX_SELECTED_ROW_KEYS,"笔订单")},u=null===c||void 0===c||null===(i=c.baseResponse)||void 0===i?void 0:i.ret,0===(null===c||void 0===c||null===(n=c.baseResponse)||void 0===n?void 0:n.ret)?((0,Ht.H)("coverinvoicewithpayinfolist_success"),s.$router.push({name:"invoiceSuccess",query:{iid:c.invoiceId,invoiceType:a.invoiceType}})):u&&l[u]?e.errorTip(l[u]):((0,Ht.H)("coverinvoicewithpayinfolist_error",JSON.stringify(c)),e.errorTip("提交失败，请稍后重试或联系客服"));case 11:case"end":return t.stop()}}),t)})))()},onChoiceSelectChange:function(e){this.tableSelectedRowKeys=e},onSelectChange:function(e){(null===e||void 0===e?void 0:e.length)>this.MAX_SELECTED_ROW_KEYS&&e.length>this.selectedRowKeys.length&&this.errorTip("单张发票不可选择超过".concat(this.MAX_SELECTED_ROW_KEYS,"笔订单")),this.selectedRowKeys=e;var t=0,i=this.saveInvoiceList.filter((function(t){return e.includes(t.transactionId)}));i.forEach((function(e){var i=e.invoiceAmountInCents;t+=i})),this.choiceCanInvoiceList=i,this.transactionIdList=e,this.price=(0,_e.Zh)(t)||""},changeTab:function(e){this.nav=e,this.$router.push({name:"invoiceManage",query:{nav:"".concat(e)}})},fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new cd.Z).getNewCanInvoiceOrderList();case 2:i=t.sent,i&&0===i.baseResponse.ret&&(e.newCanInvoiceList=i.payInfoList||[],n=e.$route.query.transactionId,e.newCanInvoiceList.forEach((function(t,i){e.newCanInvoiceList[i].invoiceAmount=(0,_e.Zh)(t.invoiceAmountInCents),t.transactionId==n&&e.selectedRowKeys.push(n)})),e.saveInvoiceList=JSON.parse(JSON.stringify(e.newCanInvoiceList)),e.onSelectChange(e.selectedRowKeys),a={},o=e.newCanInvoiceList.reduce((function(e,t){return a[t.orderId]||(a[t.orderId]=!0,e.push(t)),e}),[]),e.choosenDataList=o);case 4:case"end":return t.stop()}}),t)})))()},handleToDetail:function(e){this.$router.push({name:"order",query:{tid:e.transactionId}})},pageChange:function(e){this.curPage=e.currentPage},handleMakeInvoie:function(e){var t={orderId:e.orderId,amount:e.invoiceAmountInCents};this.$router.push({name:"invoiceMake",params:t})},timeToDate:function(e){return Un()("yyyy年MM月dd日",new Date(1e3*e))}}}),Wd=Gd,zd=(0,g.Z)(Wd,Md,Ld,!1,null,"3637fefa",null),Vd=zd.exports,Jd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"order-detail"},[e.isPageReady?t("div",{staticClass:"main-card order-detail-wrap"},[t("div",{staticClass:"order-detail-content"},[t("div",{staticClass:"detail-section"},[t("div",{staticClass:"second-title"},[e._v("订单详情")]),t("div",{staticClass:"item"},[t("span",[e._v("状态：")]),t("span",{class:{strong:e.payInfoForShow.status===e.OrderPayStatus["Pending"]}},[e._v(e._s(e.payInfoForShow.statusText))]),e.payInfoForShow.status===e.OrderPayStatus["Pending"]?[t("a",{on:{click:e.pay}},[e._v("支付")])]:e._e()],2),t("div",{staticClass:"item"},[e._v("订单编号："+e._s(e.payInfoForShow.displayId||"-"))]),e.isTimePurchaseType?[t("div",{staticClass:"item"},[e._v("购买的发放时长："+e._s("".concat(e.payInfoForShow.purchaseCount,"小时")||0))])]:[t("div",{staticClass:"item"},[e._v("购买数量："+e._s(e.payInfoForShow.purchaseCount||"-"))])],e.payStat.usedQuotaCount?[t("div",{staticClass:"item"},[e._v("已转为封面兑换卡数量："+e._s(e.payStat.usedQuotaCount))])]:e._e(),e.isPayInfoSuccess?[t("div",{staticClass:"item"},[e._v("支付时间："+e._s(e.payInfoForShow.payTime||"-"))])]:[t("div",{staticClass:"item"},[e._v("创建时间："+e._s(e.payInfoForShow.payTime||"-"))])],t("div",{staticClass:"item"},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[e._v(" 支付方式："+e._s(e.payInfoForShow.payType||"-")+" "),e.payInfoForShow.fromQuotaWording&&"默认"!==e.payInfoForShow.fromQuotaWording?t("span",{staticClass:"inline-block rounded-sm bg-opblack_5 px-[6px] py-0.5 text-xs"},[e._v(" "+e._s(e.payInfoForShow.fromQuotaWording)+" ")]):e._e()])]),e.isPayInfoSuccess?[e.payInfo&&e.isQuota?t("div",{staticClass:"item"},[e._v("实付金额：-")]):t("div",{staticClass:"item"},[e._v("实付金额："+e._s("￥".concat(e.payInfoForShow.payAmount)||0))])]:[e.payInfo&&e.isQuota?t("div",{staticClass:"item"},[e._v("待付金额：-")]):t("div",{staticClass:"item"},[e._v("待付金额："+e._s("￥".concat(e.payInfoForShow.payAmount)||0))])],e.isPayInfoSuccess?[t("div",{staticClass:"item"},[t("span",[e._v("开票状态："+e._s(e.payInfoForShow.invoiceText))]),e.payInfo&&e.payInfo.canInvoice?t("a",{staticClass:"open-invoice",on:{click:e.toInvoiceManage}},[e._v("去开发票")]):e._e(),"已完成"===e.payInfoForShow.invoiceText&&e.payInfoForShow.invoiceInfo.invoiceType!==e.InvoiceType.EnterpriseSpecial?t("a",{staticClass:"open-invoice",on:{click:e.downloadInvoice}},[e._v(" 下载发票 ")]):e._e(),"已申请"===e.payInfoForShow.invoiceText?t("mp-popover",{staticClass:"cancel-dialog",attrs:{width:240},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"open-invoice"},[e._v("撤销申请")])]},proxy:!0},{key:"content",fn:function(){return[t("p",{staticStyle:{"text-align":"center"}},[e._v("撤销该发票申请？")])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.showCancelDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",loading:e.cancelInvoiceLoading,size:"mini"},on:{click:function(t){return t.preventDefault(),e.cancelInvoice.apply(null,arguments)}}},[e._v("撤销")])],1)]},proxy:!0}],null,!1,2297650637),model:{value:e.showCancelDialog,callback:function(t){e.showCancelDialog=t},expression:"showCancelDialog"}}):e._e(),["开票中","已申请","已完成","退票中"].includes(e.payInfoForShow.invoiceText)?t("a",{staticClass:"open-invoice",on:{click:e.toInvoice}},[e._v("详情")]):e._e()],1)]:e._e(),[t("div",{staticClass:"item"},[e._v("发放与领取有效期："+e._s(e.payInfoForShow.expiredTimeText))])]],2)]),t("CoverMaterial",{staticClass:"order-material",attrs:{cover:e.cover}})],1):[e._m(0)],!e.isTimePurchaseType||e.receiveObjectList.length>0&&1!=e.receiveObjectList[0].status?t("div",{staticClass:"wrap"},[e.isPageReady&&e.isPayInfoSuccess?t("div",{staticClass:"main-card receive-list-wrap"},[t("div",{staticClass:"header"},[t("div",{staticClass:"left-area"},[e.isTimePurchaseType?e._e():t("div",{staticClass:"second-title"},[e._v("发放详情")]),e.isTimePurchaseType?t("div",{staticClass:"second-title"},[e._v("发放红包封面")]):e._e(),e.isTimePurchaseType?t("div",{staticClass:"second-tip"},[e._v("可选择以下发放方式")]):e._e(),e.payInfo&&e.isQuota?t("div",{staticClass:"desc"},[t("span",[e._v("剩余可发放封面数量")]),t("span",{staticClass:"bold"},[e._v(e._s(e.payStat.remainingGenCoverCount||0))]),t("span",{staticStyle:{"padding-left":"30px"}},[e._v("使用封面兑换卡生成的订单不能再次转为封面兑换卡")])]):!e.isTimePurchaseType&&e.payInfo?t("div",{staticClass:"desc"},[t("span",[e._v("剩余可发放封面数量")]),t("span",[e._v(e._s(e.payStat.remainingGenCoverCount||0))]),e.payStat.remainingGenCoverCount&&!e.disabledGenQuota?[e.isCanEdit?t("span",{staticClass:"link-button",on:{click:e.openChangeExchange}},[e._v("转为封面兑换卡")]):t("mp-popover",{attrs:{position:"down-center",trigger:"hover",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无生成和使用封面兑换卡权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{attrs:{type:"primary"}},[e._v("转为封面兑换卡")])]},proxy:!0}],null,!1,591762159)})]:e.disabledGenQuota?t("span"):t("span",{staticClass:"link-button gray"},[e._v("转为封面兑换卡")]),e.disabledGenQuota?e._e():t("mp-popover",{attrs:{width:620,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",{staticClass:"pop-title"},[e._v("封面兑换卡说明")]),t("div",{staticClass:"pop-content"},[e._v("1. 未发完的封面可通过封面兑换卡，兑换成其他样式的封面继续发放。兑换后的封面不可再次转为封面兑换卡。")]),t("div",{staticClass:"pop-content"},[e._v("2. 如果发放材料尚未被领取完，可在回收后转为封面兑换卡。")]),t("div",{staticClass:"pop-content"},[e._v("3. 可在个人中心 - 封面兑换卡，查看并使用已有封面兑换卡。")]),t("div",{staticClass:"pop-title"},[e._v("注意事项")]),t("div",{staticClass:"pop-content"},[e._v("1. 转为封面兑换卡后，当前封面剩余可发放数量将相应减少。")]),t("div",{staticClass:"pop-content"},[e._v(" 2. 封面兑换卡的兑换条件： "),t("p",[e._v("1）仅能兑换账号下已通过审核的封面。")]),t("p",[e._v("2）每次兑换都会生成一笔订单，兑换的封面不会追加在已有订单中。")])]),t("div",{staticClass:"pop-content"},[e._v("3. 兑换的封面，发放有效期与原封面一致，需在原封面购买后的6个月内发放。用户领取封面后，使用有效期为3个月。")]),t("div",{staticClass:"pop-content"},[e._v("4. 封面兑换卡不能交易，也不能向平台申请退款。")])])]},proxy:!0}],null,!1,1963226310)})],2):e._e()]),e.isTimePurchaseType||e.payInfoForShow.status!=e.OrderPayStatus["Success"]&&e.payInfoForShow.status!=e.OrderPayStatus["Delivering"]?e._e():t("div",{staticClass:"right-area"},[t("div",{staticClass:"operate-buttons"},[e.payStat.remainingGenCoverCount?e.isCanEdit2?t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:e.handleGenReceiveObj}},[e._v("发放封面")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无发放封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"}},[e._v("发放封面")])]},proxy:!0}],null,!1,849863091)}):t("mp-popover",{attrs:{content:"剩余 0 个红包封面可发放，若要继续发放，需要回收未领取的红包封面，或再次购买新的订单",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[e._v("发放封面")])]},proxy:!0}],null,!1,1263085856)})],1),t("div",{staticClass:"tip"},[e._v(" 有效期剩余"+e._s(e.payInfoForShow.leftDays)+"天 "),t("mp-popover",{attrs:{trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"4px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[e._v("发放有效期截止至"+e._s(e.payInfoForShow.expiredTimeText))])]},proxy:!0}],null,!1,3047963842)})],1)])]),e.isTimePurchaseType?t("TimeOrderReceiveDetail",{attrs:{orderId:e.orderId,objectId:e.receiveObjectList.length>0?e.receiveObjectList[0].objectId:"",receiveDetail:e.receiveDetail}}):t("ReceiveMaterial",{attrs:{cover:e.cover,payInfo:e.payInfo},on:{refreshCover:e.refreshCover}}),e.isTimePurchaseType?t("div",{staticClass:"right-area"},[e.payInfoForShow.actived?[t("div",{staticClass:"center-button-wrap"},[e.leftTimeTip>0?t("div",{staticClass:"tip"},[e._v("剩余发放封面时间")]):e._e(),"string"===typeof e.leftTimeTip?t("div",{staticClass:"left-time bold"},[e._v(e._s(e.leftTimeTip))]):t("div",{staticClass:"left-time bold"},[t("Timeout",{attrs:{second:e.leftTimeTip,type:2},on:{timeout:e.handleTimeout}})],1),e.isTimePurchaseType?t("div",{staticClass:"get-tip"},[t("span",[e._v("已被领取封面数量")]),t("span",{staticClass:"bold black"},[e._v(e._s(e.payStat.totalReceiveCount||0))]),t("span",[e._v("个")])]):e._e()])]:e._e(),e.payInfo&&3==e.payInfo.status?[t("div",{staticClass:"center-button-wrap"},[t("div",{staticClass:"tip"},[t("span",[e._v("以上发放方式暂未生效。在")]),t("div",{staticClass:"strong"},[e._v(e._s(e.payInfoForShow.whatTime))]),t("span",[e._v("前点击“生效”，订单即可开放领取。")])]),t("div",{staticClass:"tip"},[t("span",[e._v("开放领取的有效期为")]),t("div",{staticClass:"strong"},[e._v(e._s(e.payInfoForShow.purchaseCount)+"小时")]),t("span",[e._v("，自订单生效起开始计时。")])]),t("div",{staticClass:"operate-buttons"},[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.showActivateDialog=!0}}},[e._v("生效")])],1)])]:e._e()],2):e._e()],1):e._e()]):t("div",{staticClass:"wrap"},[e.isPageReady&&e.isPayInfoSuccess?t("div",{staticClass:"loading-wrap"},[t("div",{staticClass:"loading-logo"}),t("div",{staticClass:"tip"},[e._v("用于发放红包封面的材料正在生成")]),t("div",{staticClass:"tip"},[t("span",[e._v("预计需要")]),t("div",{staticClass:"strong"},[e._v(e._s(5*e.payInfoForShow.purchaseCount))]),t("span",[e._v("分钟，请耐心等待")])])]):e._e()]),t("mp-dialog",{staticClass:"activate-dialog",attrs:{title:"发放方式生效"},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showActivateDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.activateOrder.apply(null,arguments)}}},[e._v("生效")])],1)]},proxy:!0}]),model:{value:e.showActivateDialog,callback:function(t){e.showActivateDialog=t},expression:"showActivateDialog"}},[t("div",{staticClass:"content"},[t("span",[e._v("生效后，订单将开放领取，有效期为")]),t("div",{staticClass:"strong"},[e._v(e._s(e.payInfoForShow.purchaseCount))]),t("span",[e._v("小时。逾期后，订单将失效。确认现在生效？")])])]),t("mp-dialog",{staticClass:"exchange-dialog",attrs:{title:e.stepTitle,value:e.useDialog,closable:!0,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[1==e.exchangeUseStep?t("div",{staticClass:"dialog-footer"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.exchangeInput||0!=e.disabled},on:{click:function(t){return t.preventDefault(),e.confirmExchange.apply(null,arguments)}}},[e._v("确认")])],1):e._e()]},proxy:!0}])},[1==e.exchangeUseStep?t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"dialog-tips"},[e._v(" 1. 如果发放材料尚未被领取完，回收后可在订单详情页转为封面兑换卡。 "),t("br"),e._v(" 2. 封面兑换卡可用于兑换账号下已通过审核的封面。 "),t("br"),e._v(" 3. 需在原封面购买后的6个月内兑换并发放。 "),t("br"),e._v(" 4. 使用封面兑换卡生成的订单不能再次转为封面兑换卡。 ")]),t("div",{staticClass:"dialog-exchange-wrap"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.exchangeInput,expression:"exchangeInput"}],staticClass:"exchange-input",attrs:{placeholder:"输入封面个数"},domProps:{value:e.exchangeInput},on:{focus:e.inputBlur,input:function(t){t.target.composing||(e.exchangeInput=t.target.value)}}}),t("div",{staticClass:"dialog-input-gz"},[t("span",{staticClass:"dialog-exchange-number"},[e._v("可转换封面 "+e._s(e.payStat.remainingGenCoverCount||0)+" 个")])]),e.numberErrorTips?t("div",{staticClass:"number-error-tips"},[e._v(e._s(e.numberErrorTips))]):e._e()])]):e._e(),2==e.exchangeUseStep?t("div",{staticClass:"dialog-body tc finsh"},[t("div",{staticClass:"yes-icon"}),t("div",{staticClass:"weui-msg__title"},[e._v("已完成")]),t("div",{staticClass:"dialog-result"},[t("div",{staticClass:"dialog-result-number"},[e._v("已转换封面数量："+e._s(e.exchangeInput))]),t("div",{staticClass:"dialog-result-date"},[e._v("有效期至"+e._s(e.toDate(e.expiredTime)))])]),t("div",{staticClass:"dialog-button-all",on:{click:e.toDetail}},[e._v("查看记录")])]):e._e()])],2)},Kd=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],Yd=i(11651),Xd=i(76559),$d=i(49199),ep=function(e){(0,Yd.Z)(i,e);var t=(0,Xd.Z)(i);function i(){return(0,Zr.Z)(this,i),t.call(this)}return(0,Ur.Z)(i,[{key:"getList",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:$t.zh});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDetailList",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:$t.uL,data:{quota_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCanUseOrderList",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:$t.SF});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"useQuota",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,i,n){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:$t.Gv,data:{quota_id:t,order_id:i,purchase_count:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()},{key:"getQuota",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,i,n){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:$t.lt,data:{order_id:t,transaction_id:i,count:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()}]),i}($d.Z),tp=function(){var e,t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"content"},[i("a-table",{key:t.tableKey,staticClass:"receive-table",class:{flash:t.flashFirstMaterial},attrs:{columns:t.columns,dataSource:t.list,pagination:!1,locale:{emptyText:"暂无记录"},rowKey:t.list.objectId},scopedSlots:t._u([{key:"usedTitle",fn:function(){return[i("div",{staticClass:"user-percent-title"},[t._v(" 已领取 "),i("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:t._u([{key:"target",fn:function(){return[i("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"r"},[i("div",[t._v("「已领取」数量包含「通过推广领取」数量")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"fissionHd",fn:function(){return[i("div",{staticClass:"user-percent-title"},[t._v(" 通过「推广」领取 "),i("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:t._u([{key:"target",fn:function(){return[i("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"r"},[i("div",[t._v("包含通过「裂变」及「封面专区」领取数量")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"genInfo",fn:function(e){return[i("div",{staticClass:"gen-time"},[i("div",[t._v(t._s(e.genTime))]),i("div",[e.genTypeText?i("div",{staticClass:"icon-merge"},[t._v(t._s(e.genTypeText))]):t._e(),e.receiveTypeText?i("div",{staticClass:"icon-merge"},[t._v(t._s(e.receiveTypeText))]):t._e(),e.receiveBeginTime?i("div",{staticClass:"icon-merge"},[i("mp-popover",{attrs:{trigger:"hover",width:255},scopedSlots:t._u([{key:"target",fn:function(){return[i("a-row",{attrs:{type:"flex"}},[i("div",[t._v("定时发放")]),i("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"2px"},attrs:{icon:"info_circle_regular",width:12,height:12,color:"#999"}})],1)]},proxy:!0},{key:"content",fn:function(){return[i("div",[t._v("发放开始时间："+t._s(e.receiveBeginTimeText))])]},proxy:!0}],null,!0)})],1):t._e(),1===e.distributionType?i("div",[i("mp-popover",{attrs:{trigger:"click",width:548,position:"left-center"},scopedSlots:t._u([{key:"content",fn:function(){return[i("div",{staticClass:"distribution-popover"},[i("EmotionRainTipEntry"),i("EmotionRainDesc2")],1)]},proxy:!0},{key:"target",fn:function(){return[i("Tag",[t._v("限时活动")])]},proxy:!0}],null,!0)})],1):t._e()]),e.mergeId?i("div",{staticClass:"icon-merge",staticStyle:{"font-size":"12px","margin-top":"8px"}},[t._v("来自合并发放")]):t._e()])]}},{key:"action1",fn:function(e){var n;return[i("div",{staticClass:"detail detail-row"},[e.mergeId?i("div",{on:{click:function(i){return t.openMergeDetail(e)}}},[i("a",[t._v("合并发放详情")])]):t._e(),t.isCanDownload?!e.mergeId&&t.receiveStatusSuccess.includes(e.status)?[e.isQuotaGift||e.disabledDownloadLink?i("div",{staticStyle:{display:"flex",color:"#9a9a9a","align-items":"center"}},[i("span",{staticClass:"mr-1"},[t._v("下载材料")]),e.isQuotaGift||e.disabledDownloadLink&&null!==(n=e.fromQuotaId)&&void 0!==n&&n.startsWith("spring2024_biz")?i("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:e.isQuotaGift?280:430},scopedSlots:t._u([{key:"target",fn:function(){return[i("mp-icon",{staticStyle:{position:"relative"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){var n;return[e.isQuotaGift?i("div",[t._v("此兑换卡仅支持通过「封面专区」发放")]):null!==(n=e.fromQuotaId)&&void 0!==n&&n.startsWith("spring2024_biz")?i("div",[i("p",[t._v(" 公众号创作者奖励兑换卡需使用 "),i("a",{staticStyle:{"line-height":"1",display:"inline-block"},attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=6",target:"_blank"}},[t._v(" 公众号「红包封面」组件 ")]),i("span",[t._v("发放")])])]):t._e()]},proxy:!0}],null,!0)}):t._e()],1):e.disabledDownloadLink||1!=e.genType&&2!=e.genType||1!=e.receiveType?!e.disabledDownloadLink&&e.genType<=3?i("download-receive-object",{attrs:{order:e,cover:t.cover}}):t._e():i("mp-popover",{staticClass:"popover-auto-width",attrs:{position:"up-right",trigger:"hover"},scopedSlots:t._u([{key:"target",fn:function(){return[i("a",{staticStyle:{display:"inline-flex","align-items":"center"}},[t._v(" 下载材料 "),i("mp-icon",{staticStyle:{transform:"rotate(90deg)","margin-left":"4px"},attrs:{icon:"right_arrow_regular",width:8,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[!e.disabledDownloadLink&&e.genType<=3?i("download-receive-object",{attrs:{order:e,cover:t.cover}}):t._e(),e.disabledDownloadLin||1!=e.genType||1!=e.receiveType?t._e():i("a",{staticStyle:{display:"block"},on:{click:function(i){return t.generatePoster(e)}}},[t._v(" 生成海报 ")]),e.disabledShareFriend||2!=e.genType||1!=e.receiveType?t._e():i("a",{staticStyle:{display:"block"},on:{click:function(i){return t.translateQr(e)}}},[t._v(" 赠送给朋友 ")])]},proxy:!0}],null,!0)})]:t._e():[i("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:t._u([{key:"content",fn:function(){return[i("div",[i("span",[t._v("暂无下载发放材料权限，请前往")]),i("a",{staticStyle:{display:"inline-block"},on:{click:t.toadmin}},[t._v("成员管理")]),i("span",[t._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[i("span",[!e.disabledDownloadLink&&!e.mergeId&&e.genType<=3&&6!=e.status?i("download-receive-object",{attrs:{order:e,cover:t.cover}}):t._e(),e.disabledDownloadLink||1!=e.genType||1!=e.receiveType||6==e.status?t._e():i("a",{staticStyle:{display:"block"}},[t._v("生成海报")]),e.disabledShareFriend||2!=e.genType||1!=e.receiveType||6==e.status?t._e():i("a",{staticStyle:{display:"block"}},[t._v(" 赠送给朋友 ")])],1)]},proxy:!0}],null,!0)})],e.canHeat?i("div",[i("a",{on:{click:function(i){t.heatItem=e,t.heatSetting=!0}}},[t._v(" 开始推广 ")])]):t._e(),i("RecallBtn",{attrs:{order:e,cover:t.cover,payInfoStatus:t.payInfo.status,isDetail:!0},on:{refreshCover:function(e){return t.$emit("refreshCover")},stopHeat:t.coverCancelHeatReceiveObject}})],2),i("Remark",{attrs:{"remark-info":e.remarkInfo,"order-id":t.cover.orderId,"order-status":t.cover.orderStatus}})]}},{key:"genTime",fn:function(e){return[i("div",{staticClass:"gen-time"},[i("div",[t._v(t._s(e.genTime))]),e.mergeId?i("div",{staticClass:"icon-type"},[t._v("来自合并发放")]):t._e()])]}},{key:"action",fn:function(e){return[i("div",[i("div",[t._v(t._s(e.statusText))]),e.heatStatus?i("div",{staticStyle:{"margin-top":"8px"}},[t._v(" "+t._s(t.HeatStatusTextMap[e.heatStatus])+" "),e.coverSetCommInfo&&1===e.heatStatus?i("mp-popover",{staticClass:"cover-set-popover",attrs:{trigger:"hover"},scopedSlots:t._u([{key:"target",fn:function(){return[i("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"4px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0}],null,!0)},[i("div",{staticStyle:{color:"rgba(0, 0, 0, 0.5)"}},[i("div",[i("label",[t._v("封面主题：")]),i("span",[t._v(t._s(e.coverSetCommInfo.tagName||"默认"))])]),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("label",[t._v("封面来源：")]),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("span",{staticStyle:{"margin-right":"4px"}},[t._v(t._s(e.coverSetCommInfo.jumpText))]),4===e.coverSetCommInfo.jumpType?i("mp-tag",{attrs:{type:"key",tags:[{label:"视频号"}]}}):t._e(),2===e.coverSetCommInfo.jumpType?i("mp-tag",{attrs:{type:"key",tags:[{label:"公众号"}]}}):t._e()],1)])])]):t._e()],1):t._e()])]}}])}),i("a-row",{attrs:{type:"flex",justify:"end"}},[t.receiveObjectList.length>t.pageNum?i("mp-pagination",{staticClass:"pagination",attrs:{"per-page":t.pageNum,"total-num":t.receiveObjectList.length,mode:"normal"},on:{"page-change":t.pageChange}}):t._e()],1),t.isLoading?[i("div",{staticClass:"loading-mask"},[i("span",{staticClass:"weui-loading weui-desktop-loading"}),i("div",{staticClass:"text"},[t._v(t._s(t.loadingText))])])]:t._e(),i("generate-cover-dialog",{attrs:{cover:t.cover,payInfo:t.payInfo},on:{refreshCover:t.handleGenCoverRefresh}}),i("merge-distributed-dialog",{attrs:{cover:t.cover,payInfo:t.payInfo,order:t.checkMergeOrder},on:{refreshCover:function(e){return t.$emit("refreshCover")},generatePoster:function(e){return t.generatePoster(e)},translateQr:function(e){return t.translateQr(e)},heat:function(e){t.heatItem=e,t.heatSetting=!0,t.mergeDutributeDialog=!1},stopHeat:function(e){t.coverCancelHeatReceiveObject(e),t.mergeDutributeDialog=!1}},model:{value:t.mergeDutributeDialog,callback:function(e){t.mergeDutributeDialog=e},expression:"mergeDutributeDialog"}}),i("poster-dialog",{attrs:{order:t.curGenPosterOrder,cover:t.cover},model:{value:t.showGenerateImageDialog,callback:function(e){t.showGenerateImageDialog=e},expression:"showGenerateImageDialog"}}),i("translate-qr-dialog",{attrs:{order:t.curTranslateQrOrder,cover:t.cover},model:{value:t.showQrDialog,callback:function(e){t.showQrDialog=e},expression:"showQrDialog"}}),i("mp-dialog",{attrs:{title:"封面推广设置",width:584},scopedSlots:t._u([{key:"desc",fn:function(){var e,n;return[i("div",{staticStyle:{display:"flex","align-items":"center","padding-bottom":"8px"}},[null!==(e=t.heatItem)&&void 0!==e&&e.isQuotaGift?[t._v("封面通过「封面专区」发放")]:[t._v("封面同时通过「裂变」、「封面专区」发放")],i("CoverHeatIntro",{attrs:{"is-quota-gift":null===(n=t.heatItem)||void 0===n?void 0:n.isQuotaGift,position:"left-top"}})],2)]},proxy:!0},{key:"footer",fn:function(){return[i("div",{staticClass:"footer"},[i("mp-button",{staticClass:"cancel",attrs:{type:"warn"},on:{click:function(e){e.preventDefault(),t.heatSetting=!1}}},[t._v("取消")]),i("mp-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.startHeat.apply(null,arguments)}}},[t._v("确定")])],1)]},proxy:!0}]),model:{value:t.heatSetting,callback:function(e){t.heatSetting=e},expression:"heatSetting"}},[t.heatSetting&&t.heatItem?i("HeatReceiveObject",{key:null===(e=t.heatItem)||void 0===e?void 0:e.orderId,ref:"heatSource",attrs:{cover:t.cover,"is-quota-gift":t.heatItem.isQuotaGift,afterHeat:!0}}):t._e()],1)],2)},ip=[],np=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{attrs:{value:e.value,title:"合并发放详情",width:732},on:{"visible-change":e.handleVisibleChange,close:e.close}},[t("div",{staticClass:"dialog-content"},[t("div",{staticClass:"title-distribute"},[e._v("基本信息")]),t("div",{staticClass:"distribute-info"},[t("a-row",{attrs:{type:"flex"}},[t("div",{staticClass:"distribute-item",staticStyle:{width:"35%"}},[t("div",{staticClass:"distribute-label"},[e._v("生成时间")]),t("div",{staticClass:"distribute-value"},[e._v(e._s(e.mergeGenTime))])]),t("div",{staticClass:"distribute-item"},[t("div",{staticClass:"distribute-label"},[e._v("发放开始时间")]),t("div",{staticClass:"distribute-value"},[e._v(e._s(e.order.receiveBeginTimeText))])])]),t("a-row",{attrs:{type:"flex"}},[t("div",{staticClass:"distribute-item",staticStyle:{width:"35%"}},[t("div",{staticClass:"distribute-label"},[e._v("生成状态")]),t("div",{staticClass:"distribute-value"},[e._v(" "+e._s(e.recallStatus?e.recallStatus:e.mergeStatus)+" ")]),e.heatStatus?t("div",{staticClass:"ml-1",staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"mr-1",staticStyle:{color:"rgba(0, 0, 0, 0.1)"}},[e._v("|")]),t("span",{staticClass:"mr-1"},[e._v(e._s(e.HeatStatusTextMap[e.heatStatus]))]),e.coverSetCommInfo&&1===e.heatStatus?t("mp-popover",{staticClass:"cover-set-popover",attrs:{trigger:"hover",position:"up-left"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticStyle:{color:"#9a9a9a"},attrs:{s:""}},[t("div",[t("label",[e._v("封面主题：")]),t("span",[e._v(e._s(e.coverSetCommInfo.tagName||"其他"))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("label",[e._v("封面来源：")]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"4px"}},[e._v(e._s(e.coverSetCommInfo.jumpText))]),4===e.coverSetCommInfo.jumpType?t("mp-tag",{attrs:{type:"key",tags:[{label:"视频号"}]}}):e._e(),2===e.coverSetCommInfo.jumpType?t("mp-tag",{attrs:{type:"key",tags:[{label:"公众号"}]}}):e._e()],1)])])]},proxy:!0}],null,!1,4135452626)}):e._e()],1):e._e()]),t("div",{staticClass:"distribute-item",staticStyle:{width:"55%"}},[t("div",{staticClass:"distribute-label"},[e._v("发放方式")]),e.recordList[0]?[t("div",{staticClass:"distribute-value"},[e._v(" "+e._s("".concat(e.genType,"(").concat(e.receiveType,")"))+" ")]),e.mergeInfo.status!==e.ReceiveObjectMergeStatus.Success||e.recallStatus?e._e():t("a-space",{staticClass:"distribute-actions",attrs:{size:"middle"}},[!e.order.disabledDownloadLink&&e.order.isQuotaGift?t("div",{staticStyle:{"align-items":"center",color:"rgba(51, 51, 51, 0.5)",display:"flex"}},[t("span",{staticClass:"mr-1"},[e._v("下载材料")]),t("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#9a9a9a"}})]},proxy:!0},{key:"content",fn:function(){return[e._v("此兑换卡仅支持通过「封面专区」发放")]},proxy:!0}],null,!1,1290719357)})],1):e.order.disabledDownloadLink||e.mergeInfo.genType!==e.GenerateType.qrcode&&e.mergeInfo.genType!==e.GenerateType.link?e.order.disabledDownloadLink?e._e():t("DownloadReceiveObject",{attrs:{order:e.order,cover:e.cover}}):t("mp-popover",{staticClass:"popover-auto-width",attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("a",[e._v("下载材料")]),t("mp-icon",{staticStyle:{transform:"rotate(90deg)","margin-left":"4px"},attrs:{icon:"right_arrow_regular",width:8,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[e.order.disabledDownloadLink?e._e():t("DownloadReceiveObject",{attrs:{order:e.order,cover:e.cover}}),e.order.disabledDownloadLink||e.mergeInfo.genType!==e.GenerateType.qrcode?e._e():t("a",{attrs:{href:"javascript:;"},on:{click:e.emitGenPoster}},[e._v("生成海报")]),e.order.disabledShareFriend||e.mergeInfo.genType!==e.GenerateType.link?e._e():t("a",{attrs:{href:"javascript:;"},on:{click:e.emitTranslateQr}},[e._v("赠送给朋友")])]},proxy:!0}],null,!1,2095390481)}),t("mp-popover",{staticClass:"popover-auto-width",attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("a",[e._v("更多")]),t("mp-icon",{staticStyle:{transform:"rotate(90deg)","margin-left":"4px"},attrs:{icon:"right_arrow_regular",width:8,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[1===e.heatStatus?t("mp-popover",{attrs:{position:"up-center",trigger:"click",width:230,title:"停止推广封面"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",[e._v("停止推广")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticStyle:{"text-align":"center",color:"rgba(0, 0, 0, 0.5)"}},[e._v("停止推广后，封面将停止通过「裂变」及「封面专区」发放")])]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{attrs:{size:"mini",type:"default"},on:{click:function(t){e.confirmStopHeat=!1}}},[e._v("取消")]),t("mp-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.$emit("stopHeat",e.order),e.confirmStopHeat=!1}}},[e._v(" 确定 ")])]},proxy:!0}],null,!1,3028226640),model:{value:e.confirmStopHeat,callback:function(t){e.confirmStopHeat=t},expression:"confirmStopHeat"}}):e._e(),e.order.disabledRecall||e.mergeInfo.status!==e.ReceiveObjectMergeStatus.Success||e.recallStatus?e._e():t("recall-btn",{attrs:{cover:e.cover,payInfoStatus:e.hackPayInfoStatus,order:e.order,mergeDetailList:e.recordList},on:{refreshCover:e.handleRecallSuccess}})]},proxy:!0}],null,!1,2028692635)})],1)]:t("div",{staticClass:"distribute-value"},[e._v("-")])],2)])],1),t("div",{staticClass:"title-distribute"},[e._v("发放数据")]),t("a-row",{attrs:{type:"flex"}},[t("div",{staticClass:"distribute-item",staticStyle:{width:"40%"}},[t("div",[t("div",{staticClass:"distribute-label"},[e._v(" 已领取/已发放 "),t("mp-popover",{staticClass:"fission-disable-popover",attrs:{trigger:"hover",width:270},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v("「已领取」数量包含「通过推广领取」数量")])]},proxy:!0},{key:"target",fn:function(){return[t("div",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}])})],1),t("div",{staticClass:"distribute-data-item"},[t("a-space",[t("div",{staticClass:"distribute-data"},[e._v(" "+e._s(e.receiveGenText)+" ")])])],1)])]),t("div",{staticClass:"distribute-item"},[t("div",[t("div",{staticClass:"distribute-label"},[e._v("已裂变")]),t("div",{staticClass:"distribute-data-item"},[t("div",{staticClass:"distribute-data"},[e._v(" "+e._s(e.needFission?e.totalFissionReceiveCount:"-")+" ")])])])])]),t("a-table",{key:"objectId",staticClass:"merge-distributed-table",attrs:{columns:e.columns,dataSource:e.pageRecordList,pagination:!1,loading:e.loading,locale:{emptyText:" "}},scopedSlots:e._u([{key:"referTransactionCreatetime",fn:function(i){return[t("span",[e._v(e._s("".concat(e.unix(i.referTransactionCreatetime).format("YYYY/MM/DD"),"的订单")))]),i.objectId===e.order.objectId?t("span",{staticClass:"fs-12",staticStyle:{color:"rgba(0, 0, 0, 0.5)"}},[e._v("当前订单")]):e._e()]}},{key:"action",fn:function(i){return[t("a",{class:{"color-bw-lv3":i.objectId===e.order.objectId},on:{click:function(t){return e.goDetail(i)}}},[e._v("详情")])]}}])}),t("a-row",{attrs:{type:"flex",justify:"center"}},[e.recordList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.recordList.length,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1)],1)])},ap=[],rp=i(37068),op=i(52794),sp=new Ve.ZP,cp=s.ZP.extend({components:{RecallBtn:rp.Z,DownloadReceiveObject:op.Z},props:{value:Boolean,cover:{type:Object},payInfo:{type:Object},order:{type:Object}},data:function(){return{GenerateType:me.B6,ReceiveObjectMergeStatus:me.lv,loading:!1,pageNum:3,curPage:1,canHeat:!1,HeatStatusTextMap:me.IJ,heatStatus:void 0,coverSetCommInfo:void 0,confirmStopHeat:!1,mergeInfo:{},columns:[{key:"referTransactionCreatetime",title:"被合并订单",width:150,scopedSlots:{customRender:"referTransactionCreatetime"}},{title:"已领取/已发放",key:"usedPercent",width:130,customRender:function(e,t){return"".concat(t.totalReceiveCount,"/").concat(t.totalGenCount)}},{title:"已裂变",key:"fissionPercent",dataIndex:"fissionPercent",width:120,customRender:function(e,t){return t.fissionReceiveCount||"-"}},{title:"发放与领取有效期",width:150,dataIndex:"referTransactionExpiretime",key:"referTransactionExpiretime",customRender:function(e){return"至 ".concat(xn().unix(e).format("YYYY/MM/DD"))}},{title:"操作",align:"right",key:"action",scopedSlots:{customRender:"action"}}]}},computed:{hackPayInfoStatus:function(){var e,t,i=this,n=null===this||void 0===this||null===(e=this.mergeInfo)||void 0===e||null===(t=e.receiveObjectList)||void 0===t?void 0:t.every((function(e){return e.referTransactionExpiretime<i.serverNowTime}));return n?this.payInfo.status:jn.A7.Delivering},serverNowTime:function(){return m.l1.serverNowTime},needFission:function(){return!!this.mergeInfo.receiveObjectList&&this.mergeInfo.receiveObjectList[0].needFission},receiveStatusSuccess:function(){return[3,4,5]},mergeGenTime:function(){return this.mergeInfo.createTime?xn().unix(+this.mergeInfo.createTime).format("YYYY/MM/DD HH:mm"):"-"},mergeStatus:function(){return this.mergeInfo.status?me.IT[this.mergeInfo.status]:"-"},genType:function(){return this.mergeInfo.genType?me.FP[this.mergeInfo.genType]:"-"},receiveType:function(){if(this.recordList.length){var e=this.recordList[0].receiveType;return me.n6[e]}return"-"},recordList:function(){return this.mergeInfo.receiveObjectList||[]},pageRecordList:function(){var e=(this.curPage-1)*this.pageNum,t=e+this.pageNum;return this.recordList.slice(e,t)},totalReceiveCount:function(){return this.recordList.reduce((function(e,t){return e+t.totalReceiveCount}),0)},validTotalReceiveCount:function(){var e=this;return this.recordList.reduce((function(t,i){return i.referTransactionExpiretime<e.serverNowTime?t+0:t+i.totalReceiveCount}),0)},totalGenCount:function(){return this.recordList.reduce((function(e,t){return e+t.totalGenCount}),0)},validTotalGenCount:function(){var e=this;return this.recordList.reduce((function(t,i){return i.referTransactionExpiretime<e.serverNowTime?t+0:t+i.totalGenCount}),0)},receiveGenText:function(){var e=this.totalReceiveCount,t=this.totalGenCount;return e+t===0?"-":"".concat(e,"/").concat(t)},totalFissionReceiveCount:function(){return this.recordList.reduce((function(e,t){return e+(t.fissionReceiveCount||0)}),0)},recallStatus:function(){if(!this.recordList.length)return"";var e=this.recordList.every((function(e){return e.status===me.ST.Recalled}));if(e)return"已回收";var t=this.recordList.some((function(e){return e.status===me.ST.Recalling}));return t?"回收中":""}},methods:{unix:function(e){return xn().unix(e)},handleRecallSuccess:function(){this.fetchData(),this.$emit("refreshCover")},emitGenPoster:function(){this.$emit("generatePoster",this.order)},emitTranslateQr:function(){var e=this.order,t=this.validTotalReceiveCount,i=this.validTotalGenCount;this.$emit("translateQr",(0,ve.Z)((0,ve.Z)({},e),{},{totalReceiveCount:t,totalGenCount:i}))},goDetail:function(e){e.objectId!==this.order.objectId&&(window.location.href="#/order?tid=".concat(e.referTransactionId),window.location.reload())},recallCb:function(){this.fetchData(),this.$emit("refreshCover")},pageChange:function(e){this.curPage=e.currentPage},download:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,sp.downloadMergeReceiveObject(e.order);case 2:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,sp.getMergeDetail({merge_id:e.order.mergeId,order_id:e.payInfo.orderId});case 4:i=t.sent,0===(null===i||void 0===i?void 0:i.baseResponse.ret)?(e.mergeInfo=i,e.mergeInfo.receiveObjectList&&(e.mergeInfo.receiveObjectList=e.mergeInfo.receiveObjectList.sort((function(e,t){return e.referTransactionExpiretime-t.referTransactionExpiretime})),e.canHeat=!!i.canHeat,e.heatStatus=i.heatStatus,e.coverSetCommInfo=i.coverSetCommInfo)):e.errorTip("获取合并发放信息出错");case 6:return t.prev=6,e.loading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})))()},handleVisibleChange:function(e){e&&this.fetchData()},close:function(){var e;(null===(e=this.mergeInfo)||void 0===e?void 0:e.status)===me.lv.Recalling&&this.$emit("refreshCover"),this.mergeInfo={baseResponse:{ret:0,msg:""}},this.$emit("input",!1)}}}),lp=cp,up=(0,g.Z)(lp,np,ap,!1,null,"27ddd518",null),dp=up.exports,pp=i(75062),vp=i(5202),mp=i(351),fp=s.ZP.extend({name:"ReceiveMaterial",components:{Tag:An,EmotionRainDesc2:Ln,EmotionRainTipEntry:Qn,GenerateCoverDialog:_a,MergeDistributedDialog:dp,TranslateQrDialog:pp.Z,Remark:pa,RecallBtn:rp.Z,PosterDialog:vp.Z,DownloadReceiveObject:op.Z,HeatReceiveObject:fa.Z,CoverHeatIntro:ha.Z},data:function(){return{tableKey:1,heatSetting:!1,heatItem:null,isCanDownload:!0,isLoading:!1,loadingText:"回收中",pageNum:10,curPage:1,showQrDialog:!1,flashFirstMaterial:!1,showGenerateImageDialog:!1,mergeDutributeDialog:!1,generateData:{},HeatStatusTextMap:me.IJ,checkMergeOrder:{},posterLoading:!1,curTranslateQrOrder:null,curGenPosterOrder:null,columns:[{key:"genInfo",title:"发放信息",width:250,scopedSlots:{customRender:"genInfo"}},{key:"action",title:"生成状态",scopedSlots:{customRender:"action"},width:180},{key:"send",title:"已发放",dataIndex:"totalGenCount",width:100},{key:"used",dataIndex:"totalReceiveCount",slots:{title:"usedTitle"},width:100},{key:"fissionPercent",dataIndex:"fissionPercent",slots:{title:"fissionHd"},width:180},{title:"操作",key:"action1",align:"right",width:180,scopedSlots:{customRender:"action1"}}]}},props:{cover:{type:Object,default:function(){return{}}},payInfo:{type:Object,default:function(){return{}}}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.U6.getUserInfo();case 2:1!=m.U6.user.isSecondary||4&m.U6.user.managerFlag||(e.isCanDownload=!1);case 3:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){m.l1.showReceiveMaterialDialog&&m.l1.toggleReceiveDialog()},computed:{receiveStatusSuccess:function(){return[3,4,5]},principalType:function(){return m.U6.user.principalType},isPayInfoDisabled:function(){return this.payInfo.status>6},receiveObjectList:function(){var e=this.cover;return e.receiveObjectList||[]},list:function(){var e=this,t=e.receiveObjectList,i=JSON.parse(JSON.stringify(t)),n=(e.curPage-1)*e.pageNum,a=n+e.pageNum,r=i.slice(n,a).map((function(e){var t=Object.assign({},e,(0,mp.Tg)(e));return t}));return r},isOrganization:function(){return this.principalType===v.eZ.organization},purchaseTimeReachActivityTime:function(){return this.payInfo},isEmotionRainActivityEnd:function(){return this.payInfo.serverNowTime>m.U6.user.emojiRainInfo.endTime}},watch:{heatSetting:function(e){e||this.$nextTick((function(){document.body.style.overflow=""}))}},methods:{startHeat:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.heatItem){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$refs.heatSource.validate();case 4:if(i=t.sent,i){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,Ve.yQ.coverHeatReceiveObject({objectId:e.heatItem.objectId,isHeat:!0,coverSetCommInfo:i,mergeId:e.heatItem.mergeId,needFission:!0});case 9:e.heatSetting=!1,e.$tipsSuc("已开始推广"),e.$emit("refreshCover");case 12:case"end":return t.stop()}}),t)})))()},coverCancelHeatReceiveObject:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Ve.yQ.coverCancelHeatReceiveObject({objectId:e.objectId,mergeId:e.mergeId});case 2:t.$tipsSuc("已停止推广"),t.$emit("refreshCover");case 4:case"end":return i.stop()}}),i)})))()},openMergeDetail:function(e){this.checkMergeOrder=e,this.mergeDutributeDialog=!0},handleGenCoverRefresh:function(){var e=this;e.flashFirstMaterial=!0,this.$emit("refreshCover"),window.setTimeout((function(){e.flashFirstMaterial=!1}),3e3)},translateQr:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.curTranslateQrOrder=e,t.showQrDialog=!0;case 2:case"end":return i.stop()}}),i)})))()},toadmin:function(){this.$router.push({name:"administrator"})},generatePoster:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.curGenPosterOrder=e,t.showGenerateImageDialog=!0;case 2:case"end":return i.stop()}}),i)})))()},pageChange:function(e){this.curPage=e.currentPage}}}),hp=fp,gp=(0,g.Z)(hp,tp,ip,!1,null,"632c4024",null),yp=gp.exports,bp=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.receiveDetail.objectQrcodeUrl?t("div",{staticClass:"time-order-receive-wrap"},[t("div",{staticClass:"receive-item"},[t("div",{staticClass:"title"},[e._v("二维码")]),t("div",{staticClass:"tip"},[e._v("支持通过线下扫码或线上长按图片识别领取封面。")]),t("div",{staticClass:"content"},[t("img",{attrs:{src:e.receiveDetail.objectQrcodeUrl}})]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return e.downloadReceiveObject()}}},[e._v("保存")])])]),t("div",{staticClass:"receive-item"},[t("div",{staticClass:"title"},[e._v("领取链接")]),t("div",{staticClass:"tip"},[e._v("支持在微信内（小程序、公众号文章、H5链接等）打开链接领取封面。")]),t("div",{staticClass:"content2"},[t("input",{ref:"input",domProps:{value:e.receiveDetail.objectFullUrl},on:{focus:function(t){return e.select("input")}}})]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return t.preventDefault(),e.copy("input")}}},[e._v("复制")])])]),t("div",{staticClass:"receive-item"},[t("div",{staticClass:"title"},[e._v("领取序列号")]),t("div",{staticClass:"tip"},[e._v("支持在红包列表页（“红包封面”->“添加红包封面”）中输入序列号领取封面。")]),t("div",{staticClass:"content2"},[t("input",{ref:"code",staticClass:"exchange-code",domProps:{value:e.receiveDetail.objectCdkey},on:{focus:function(t){return e.select("code")}}})]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return t.preventDefault(),e.copy("code")}}},[e._v("复制")])])])]):e._e()},wp=[],Cp=new Ve.ZP,_p=s.ZP.extend({name:"TimeOrderReceiveDetail",props:{orderId:String,objectId:String,receiveDetail:{}},components:{},methods:{downloadReceiveObject:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Cp.downloadReceiveObject(t.orderId,{objectId:t.objectId});case 2:case"end":return e.stop()}}),e)})))()},copy:function(e){var t=this;this.select(e),document.execCommand("copy")?(document.execCommand("copy"),t.$tipsSuc("复制成功"),window.setTimeout((function(){return t.$tipsHide()}),1500)):(t.$tipsErr("复制失败，请手动复制"),window.setTimeout((function(){return t.$tipsHide()}),1500))},select:function(e){var t=this.$refs[e];t.select()}}}),xp=_p,Ip=(0,g.Z)(xp,bp,wp,!1,null,"2b6878d0",null),kp=Ip.exports,Tp=function(){var e=this,t=e._self._c;return t("span",[e._v(e._s(e.time))])},Sp=[],Ap={name:"timeout",data:function(){return{time:"",leftSeconds:0}},props:{second:Number,type:Number},mounted:function(){var e=this;this.leftSeconds=this.second,this.time=(0,_e.Jh)(this.leftSeconds,this.type),this.interval=window.setInterval((function(){e.leftSeconds=e.leftSeconds-1,e.time=(0,_e.Jh)(e.leftSeconds,e.type),e.leftSeconds||(clearInterval(e.interval),e.$emit("timeout"))}),1e3)},destroy:function(){clearInterval(this.interval)}},Dp=Ap,Pp=(0,g.Z)(Dp,Tp,Sp,!1,null,null,null),Zp=Pp.exports,Up=new cd.Z,Ep=i(90520),Rp=new Vn.ZP,Mp=s.ZP.extend({name:"OrderDetail",data:function(){return{InvoiceType:Vl,OrderChannelType:jn.kS,OrderPayStatus:jn.A7,transactionId:"",isPageReady:!1,payInfo:null,receiveDetail:{},showActivateDialog:!1,showCancelDialog:!1,cancelInvoiceLoading:!1,orderId:"",generateImage:0,isCanEdit:!0,isCanEdit2:!0,disabled:!1,exchangeInput:"",useDialog:!1,exchangeUseStep:1,stepTitle:"转为封面兑换卡",expiredTime:"",numberErrorTips:""}},watch:{exchangeUseStep:function(){1==this.exchangeUseStep?this.stepTitle="转为封面兑换卡":2==this.exchangeUseStep&&(this.stepTitle="")},exchangeInput:function(){}},components:{CoverMaterial:_l,ReceiveMaterial:yp,TimeOrderReceiveDetail:kp,Timeout:Zp},computed:{disabledGenQuota:function(){var e;return!!((null===(e=this.payInfo)||void 0===e?void 0:e.permissionFlag)&jn.A5.Disable_Gen_Quota)},hideExpiredTimeText:function(){return!!this.payInfo&&[jn.A7.Fail,jn.A7.Cancel,jn.A7.Blocked,jn.A7.Pending].includes(this.payInfo.status)},isQuota:function(){var e=this.payInfo.channelType;return e===jn.kS.Quota||e===jn.kS.Quota_Gift},cover:function(){return m.l1.cover},isTimePurchaseType:function(){var e;return 1===(null===this||void 0===this||null===(e=this.payInfo)||void 0===e?void 0:e.purchaseType)},isPayInfoSuccess:function(){var e=this.payInfo;return(null===e||void 0===e?void 0:e.status)>=3&&4!==(null===e||void 0===e?void 0:e.status)},payStat:function(){var e=this.payInfo;return e&&e.payStat?e.payStat:{}},payInfoForShow:function(){var e=this.payInfo;if(!e)return"";var t=jn.j8[e.status];return Object.assign({},e,{statusText:t,payTime:Ep("yyyy/MM/dd hh:mm",new Date(1e3*e.paymentTime)),leftDays:(0,_e.Jh)((null===e||void 0===e?void 0:e.expiredTime)-Date.now()/1e3,_e.m4.day),invoiceText:e.invoiceInfo?zl[e.invoiceInfo.invoiceStatus]:"未开票",whatTime:(0,_e.oR)(null===e||void 0===e?void 0:e.expiredTime),payType:jn.js[e.channelType],payAmount:(0,_e.Zh)(e.paymentAmountInCents),expiredTimeText:e.expiredTime&&!this.hideExpiredTimeText?"".concat(xn().unix(e.expiredTime).format("YYYY/MM/DD")," 24:00"):"-"})},receiveObjectList:function(){var e=this.cover;return e.receiveObjectList||[]},leftTimeTip:function(){var e,t,i=this,n=(null===(e=i.payInfo)||void 0===e?void 0:e.activeEndTime)-(null===(t=i.payInfo)||void 0===t?void 0:t.serverNowTime);return n<=0?"订单已过期":i.payStat.totalReceiveCount===i.payStat.totalGenCount?"封面领取已达上限":Math.floor(n)}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(m.l1.showReceiveMaterialDialog||(document.body.style.overflow="visible"),i=e,n=i.$route.query.tid,n){t.next=5;break}return t.abrupt("return",i.$router.replace({name:"orders"}));case 5:return i.transactionId=n,m.l1.clearCoverReceiveObjectList(),t.next=9,e.fetchData();case 9:return t.next=11,m.U6.getUserInfo();case 11:i.isPageReady=!0,!e.isQuota&&i.payStat.remainingGenCoverCount?(new z.ZP).baseActionReportExchange({AuthorId:m.U6.user.authorId,UserType:(m.U6.user.isSecondary+1).toString(),TransactionId:e.transactionId,ActionType:"1",IfClick:"1"}):e.isQuota||i.payStat.remainingGenCoverCount||(new z.ZP).baseActionReportExchange({AuthorId:m.U6.user.authorId,UserType:(m.U6.user.isSecondary+1).toString(),TransactionId:e.transactionId,ActionType:"1",IfClick:"2"}),1!=m.U6.user.isSecondary||1&m.U6.user.managerFlag||(e.isCanEdit2=!1),1!=m.U6.user.isSecondary||16&m.U6.user.managerFlag||(e.isCanEdit=!1);case 15:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){(0,Ve.mo)()},methods:{refreshCover:function(){setTimeout(this.fetchData,1e3)},downloadInvoice:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Up.downloadInvoice("".concat(null===(i=e.payInfo)||void 0===i||null===(n=i.invoiceInfo)||void 0===n?void 0:n.invoiceId));case 2:case"end":return t.stop()}}),t)})))()},toInvoice:function(){var e,t;this.$router.push({name:"invoice",query:{iid:null===(e=this.payInfo)||void 0===e||null===(t=e.invoiceInfo)||void 0===t?void 0:t.invoiceId}})},toInvoiceManage:function(){this.$router.push({name:"invoiceManage",query:{transactionId:this.transactionId,nav:"1"}})},inputBlur:function(){this.numberErrorTips=""},toDetail:function(){this.$router.push({name:"exchange"})},closeDialog:function(){this.useDialog=!1,this.exchangeInput="",this.numberErrorTips=""},openChangeExchange:function(){this.useDialog=!0,(new z.ZP).baseActionReportExchange({AuthorId:m.U6.user.authorId,UserType:(m.U6.user.isSecondary+1).toString(),TransactionId:this.transactionId,ActionType:"2",IfClick:""}),this.exchangeUseStep=1},confirmExchange:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e,n=parseFloat(e.exchangeInput),a=/(^[1-9]\d*$)/.test(n.toString()),e.disabled=!0,a){t.next=10;break}return e.numberErrorTips="请输入正确的转换数量",e.disabled=!1,t.abrupt("return");case 10:if(!(n>(i.payStat.remainingGenCoverCount||0))){t.next=16;break}return e.numberErrorTips="超出最大转换数量",e.disabled=!1,t.abrupt("return");case 16:e.numberErrorTips="";case 17:return t.next=19,(new ep).getQuota(e.orderId,e.transactionId,parseInt(e.exchangeInput));case 19:if(o=t.sent,!o||0!==o.baseResponse.ret){t.next=26;break}return e.disabled=!1,e.exchangeUseStep=2,e.expiredTime=o.expiredTime,t.next=26,e.fetchData();case 26:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,s,c;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,Rp.getPayInfo(i.transactionId);case 3:if(n=t.sent,!n||0!==n.baseResponse.ret){t.next=17;break}return e.payInfo=n.payInfo,a=n.payInfo,o=a.orderId,s=a.transactionId,i.orderId=o,t.next=10,m.l1.getCover(o);case 10:return t.next=12,m.l1.getCoverReceiveObjectList({orderId:o,transactionId:s});case 12:if(1!==n.payInfo.purchaseType){t.next=17;break}return t.next=15,m.l1.getReceiveObjectDetail({orderId:o,transactionId:s,objectId:i.receiveObjectList[0].objectId});case 15:c=t.sent,i.receiveDetail=c;case 17:case"end":return t.stop()}}),t)})))()},ask:function(){(new z.ZP).baseActionReportExchange({AuthorId:m.U6.user.authorId,UserType:(m.U6.user.isSecondary+1).toString(),TransactionId:this.transactionId,ActionType:"3",IfClick:"1"})},toadmin:function(){this.$router.push({name:"administrator"})},toDate:function(e){return Ep("yyyy年MM月dd日",new Date(1e3*e))},handleGenReceiveObj:function(){m.l1.toggleReceiveDialog()},pay:function(){var e=this,t=e.payInfo;(0,_e.jo)(t)},cancelInvoice:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cancelInvoiceLoading=!0,t.prev=1,t.next=4,m.AQ.recallInvoice({invoiceId:"".concat(null===(i=e.payInfo)||void 0===i||null===(n=i.invoiceInfo)||void 0===n?void 0:n.invoiceId),vm:e});case 4:return t.prev=4,e.cancelInvoiceLoading=!1,t.finish(4);case 7:e.showCancelDialog=!1,e.fetchData();case 9:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()},activateOrder:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o,c,l;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,n=i.receiveObjectList,a=i.cover,o=i.payInfo,t.next=6,m.l1.activateOrder({orderId:a.orderId,transactionId:null===o||void 0===o?void 0:o.transactionId,objectId:n[0].objectId});case 6:if(c=t.sent,!c){t.next=15;break}return i.$tipsSuc("已生效"),window.setTimeout((function(){return i.$tipsHide()}),1500),i.showActivateDialog=!1,t.next=13,Rp.getPayInfo(i.transactionId);case 13:l=t.sent,l&&0===l.baseResponse.ret&&s.ZP.set(e,"payInfo",l.payInfo);case 15:case"end":return t.stop()}}),t)})))()},handleTimeout:function(){this.fetchData()}}}),Lp=Mp,Fp=(0,g.Z)(Lp,Jd,Kd,!1,null,"ff931fc0",null),Np=Fp.exports,Op=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"order-list"},[t("div",{staticClass:"main-card-title"},[e._v("我的订单")]),e.isPageReady?t("div",{staticClass:"main-card"},[t("a-table",{staticClass:"order-table",attrs:{columns:e.columns,dataSource:e.list,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"nameAndImg",fn:function(i,n){return[t("div",{staticClass:"order-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:n.packetImageUrl,"widget-cover-src":n.isWidgetPacket?n.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(n.packetName))])],1)]}},{key:"expiredTitle",fn:function(){return[t("div",{staticClass:"send-to-receive"},[e._v(" 发放与领取有效期 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px",left:"-2px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("有效期截止日当天的24点前均可发放")])])]},proxy:!0}],null,!1,2926016264)})],1)]},proxy:!0},{key:"statusText",fn:function(i,n){return[t("span",{class:{"waiting-pay":"1"==n.status}},[e._v(e._s(n.statusText))])]}},{key:"action",fn:function(i,n){return[t("div",{staticClass:"detail",on:{click:function(t){return e.handleToDetail(n)}}},[t("a",[e._v("订单与发放详情")])])]}}],null,!1,1917372846)}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.payInfoList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{mode:"normal",current:e.curPage,"per-page":e.pageNum,"total-num":e.payInfoList.length},on:{"page-change":e.pageChange}}):e._e()],1)],1):[e._m(0)]],2)},Bp=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],qp=i(90520),Qp=s.ZP.extend({name:"OrderList",data:function(){return{isPageReady:!1,curPage:1,pageNum:8,totalNum:200,payInfoList:[],columns:[{dataIndex:"payTime",key:"payTime",title:"订单时间",width:200},{key:"nameAndImg",title:"红包封面",scopedSlots:{customRender:"nameAndImg"}},{dataIndex:"purchaseCount",key:"purchaseCount",title:"购买数量",width:200},{dataIndex:"expired",key:"expired",scopedSlots:{title:"expiredTitle"},width:220},{key:"statusText",title:"订单状态",width:190,scopedSlots:{customRender:"statusText"}},{title:"操作",key:"action",dataIndex:"action",align:"right",width:140,scopedSlots:{customRender:"action"}}]}},computed:{list:function(){var e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;return e.payInfoList.slice(t,i).map((function(e,t){var i=e.expiredTime?qp("yyyy/MM/dd",new Date(1e3*e.expiredTime)):"-",n=Object.assign({},e,{key:t,payTime:(0,_e.UZ)(e.paymentTime),expired:e.expiredTime&&![jn.A7.Fail,jn.A7.Cancel,jn.A7.Blocked,jn.A7.Pending].includes(e.status)?"至 ".concat(i):"-",statusText:jn.j8[e.status]});return n}))}},components:{CoverReceiveImg:ke.Z},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.isPageReady=!0;case 3:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,Vn.XK.getPayInfoList();case 3:n=t.sent,n&&0===n.baseResponse.ret&&(i.payInfoList=n.payInfoList||[],a=+e.$route.query.page,a&&a<=Math.ceil(e.payInfoList.length/e.pageNum)&&(e.curPage=+e.$route.query.page));case 5:case"end":return t.stop()}}),t)})))()},handleToDetail:function(e){var t=this;t.$router.push({name:"order",query:{tid:e.transactionId}})},pageChange:function(e){this.curPage=e.currentPage,this.$router.replace({name:"".concat(this.$route.name),query:{page:"".concat(e.currentPage)}})},goToCoverList:function(){this.$router.push({name:"covers"})}}}),jp=Qp,Hp=(0,g.Z)(jp,Op,Bp,!1,null,"28a327e3",null),Gp=Hp.exports,Wp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),t("div",{staticClass:"title"},[e._v("选择认证类型")]),t("div",{staticClass:"title-desc"},[e._v("账号类型的选择，会影响账号归属、发票开具、认证方式、封面审核标准等环节。")]),t("div",{staticClass:"choose-wrap"},[t("div",{staticClass:"choose-desc-tips"},[e._v("请根据实际情况，选择账号类型：")]),t("div",{staticClass:"type-list"},[t("div",{staticClass:"type-item",class:{active:1===e.type},on:{click:function(t){e.type=1}}},[t("img",{staticClass:"personal-icon",attrs:{src:i(50545)}}),t("div",{staticClass:"type-name"},[e._v("个人认证")]),e._m(0)]),t("div",{staticClass:"type-item",class:{active:0===e.type},on:{click:function(t){e.type=0}}},[t("img",{staticClass:"personal-icon",attrs:{src:i(88014)}}),t("div",{staticClass:"type-name"},[e._v("企业认证")]),e._m(1)])])]),t("div",{staticClass:"options"},[t("mp-button",{staticClass:"next",attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1)},zp=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"type-desc"},[t("p",[e._v("适合个人用户，账号归属于个人")]),t("p",[e._v("无法开具增值税专用发票")]),t("p",[e._v("需已开通个人主体的视频号/公众号")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"type-desc"},[t("p",[e._v("适合企业，事业单位等，账号归属于企业")]),t("p",[e._v("可以申请增值税专用发票")]),t("p",[e._v("需已开通公众号，且完成公众号企业认证")])])}],Vp=i(89983);(function(e){e[e["company"]=0]="company",e[e["personal"]=1]="personal"})(td||(td={}));var Jp,Kp=s.ZP.extend({name:"ChooseType",data:function(){return{type:td.personal,qrcodeUrl:"",qrcodeStatus:0,signScanFailReason:"",failText:"",token:"",wxInfo:{},bizInfo:[],checkInterval:0}},components:{Brand:Vp.Z},computed:{normalText:function(){return this.type===td.personal?"请用微信扫码":this.type===td.company?"公众号管理员扫码认证（公众号需已微信认证）":""}},created:function(){},methods:{nextStep:function(){this.type;0==this.type?this.$router.push({name:"EnterpriseMail"}):this.$router.push({name:"ChoosePersonType"})},gotoIndex:function(){this.$router.push({name:"index"})}},beforeDestroy:function(){clearInterval(this.checkInterval)}}),Yp=Kp,Xp=(0,g.Z)(Yp,Wp,zp,!1,null,"94424f18",null),$p=Xp.exports,ev=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),e.showVerifyMailInfo?[t("div",{staticClass:"title"},[e._v("激活邮箱")]),t("div",{staticClass:"info-wrap"},[t("div",{staticClass:"text verify"},[t("span",[e._v("验证邮件已发送到你的注册邮箱："+e._s(e.form.mail))]),t("mp-button",{staticClass:"resend",attrs:{type:"primary",disabled:e.resendSeconds>0},on:{click:e.resend}},[e.resendSeconds>0?t("span",[e._v("已发送（"+e._s(e.resendSeconds)+"s）")]):t("span",[e._v("重发验证")])])],1),t("div",{staticClass:"text"},[e._v("请进入邮箱查看邮件，并激活微信红包封面开放平台账号。")])]),t("div",{staticClass:"tip-wrap"},[t("div",{staticClass:"text"},[e._v("没有收到邮件？")]),t("div",{staticClass:"text"},[t("span",[e._v("1.请检查邮箱地址是否正确，可以返回")]),t("a",{on:{click:e.back}},[e._v("重新填写")])]),t("div",{staticClass:"text"},[e._v("2.邮件可能被拦截，请检查你的邮件垃圾箱")]),t("div",{staticClass:"text"},[e._v("3.若仍未收到验证邮件，请尝试重发")])])]:[t("div",{staticClass:"title"},[e._v("完善注册信息")]),t("div",{staticClass:"title-desc"},[e._v("请填写邮箱，邮箱需未注册过红包封面平台。")]),t("mp-form",{ref:"form",staticClass:"mail-form",attrs:{model:e.form,rules:e.rules,"label-width":60},nativeOn:{submit:function(e){e.preventDefault()}}},[t("mp-form-item",{attrs:{prop:"mail",label:"邮箱地址"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的邮箱"},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),t("mp-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.sendMail}},[e._v("发送验证邮件")])],1)]],2)},tv=[],iv=s.ZP.extend({name:"EnterpriseMail",components:{Brand:Vp.Z},data:function(){return{showVerifyMailInfo:!1,form:{mail:""},resendSeconds:0,rules:{mail:[{required:!0,message:"注册邮箱不能为空",trigger:"blur"},{trigger:"blur",validator:function(e,t,i){return(0,_e.Q7)(t)?i():i(new Error("请填写正确格式的邮箱地址"))}}]}}},created:function(){},methods:{sendMail:function(){var e=this,t=this,i=t.$refs.form;i.validate(function(){var i=(0,o.Z)((0,r.Z)().mark((function i(n){var a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n){i.next=5;break}return i.next=3,(new v.ZP).sendEmail(m.U6.loginData.token,e.form.mail,+e.$route.query.principal_type,"","",+e.$route.query.account_type);case 3:a=i.sent,a&&-4===a.baseResponse.ret?(t.$tipsErr("该邮箱已被注册，请使用另一个邮箱重新注册"),window.setTimeout((function(){return t.$tipsHide()}),3e3)):a&&0===a.baseResponse.ret?(t.showVerifyMailInfo=!0,e.countdown()):(t.$tipsErr("发送失败，请稍后重试"),window.setTimeout((function(){return t.$tipsHide()}),3e3));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},countdown:function(){var e=this;this.resendSeconds=60;var t=window.setInterval((function(){e.resendSeconds-=1,0===e.resendSeconds&&clearInterval(t)}),1e3)},resend:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new v.ZP).sendEmail(m.U6.loginData.token,e.form.mail,+e.$route.query.principal_type,"","",+e.$route.query.account_type);case 2:i=t.sent,i&&0===i.baseResponse.ret&&e.countdown();case 4:case"end":return t.stop()}}),t)})))()},back:function(){this.showVerifyMailInfo=!1},gotoIndex:function(){this.$router.replace({name:"index"})}}}),nv=iv,av=(0,g.Z)(nv,ev,tv,!1,null,"4c7ccc46",null),rv=av.exports,ov=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),1===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("扫码认证")]),t("div",{staticClass:"qr-wrap"},[t("div",{staticClass:"qr-tips-title"},[e._v(" 请使用符合以下条件的微信扫码认证： "),t("div",{staticClass:"qr-tips-desc text-left"},e._l(e.qrTipsDesc,(function(i,n){return t("span",{key:i},[e._v(e._s("".concat(n+1,". ").concat(i)))])})),0)]),t("div",{staticClass:"scan-qrcode"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:e.normalText,status:e.qrcodeStatus,failText:e.failText,failTip:e.signScanFailReason},on:{reload:e.loadQrcode}})],1)])]:e._e(),2===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("选择公众号")]),t("div",{staticClass:"desc"},[e._v("请根据实际情况选择公众号，完成封面平台注册。选择完成后，无法再次更改。")]),t("AdditionalCompanyInfo",{attrs:{bizInfo:e.bizInfo},on:{submit:e.submit}})]:e._e()],2)},sv=[],cv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"addtional-company-info-wrapper"},[t("div",{staticClass:"choose-wx-account"},[t("div",{staticClass:"choose-account-text"},[e._v("选择企业主体管理的公众号：")]),t("mp-radio-group",{model:{value:e.choosedIndex,callback:function(t){e.choosedIndex=t},expression:"choosedIndex"}},[t("div",{staticClass:"account-list"},e._l(e.bizInfo,(function(i,n){return t("div",{key:n,staticClass:"account-item",class:{disabled:1!==i.status},on:{click:function(t){return e.setIndex(n)}}},[t("mp-radio",{attrs:{value:n}}),t("img",{attrs:{src:i.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(i.nickname))]),1!==i.status?[t("div",{staticClass:"disable-tip"},[0===i.status||2===i.status?t("span",[e._v("（已注册）")]):3===i.status?t("span",[e._v("（未绑定银行卡）")]):4===i.status?t("span",[e._v("（海外主体，无法注册）")]):e._e()]),t("div",{staticClass:"disable-mask",on:{click:function(e){e.stopPropagation()}}}),5===i.status?t("div",{staticClass:"not-complete-biz-tip",on:{click:function(e){e.stopPropagation()}}},[t("span",{staticClass:"warn"},[e._v("（该公众号的认证材料不完整，需补全认证材料后注册）")]),t("a",{ref:"https://mp.weixin.qq.com/cgi-bin/readtemplate?t=wxverify/faq_tmpl&lang=zh_CN&token=$base_resp.token.DATA",refInFor:!0,attrs:{target:"_blank"}},[e._v(" 公众号申请微信认证指引 ")])]):e._e()]:[t("span",[e._v("（"+e._s(i.principalName)+"）")])]],2)})),0)])],1),e.choosedIndex>-1?t("div",{staticClass:"options"},[t("mp-button",{attrs:{type:"primary",disabled:e.bizInfo[e.choosedIndex]&&1!==e.bizInfo[e.choosedIndex].status},on:{click:e.submit}},[e._v("完成认证")])],1):e._e()])},lv=[],uv=(i(34553),s.ZP.extend({name:"AdditionalCompanyInfo",data:function(){return{choosedIndex:0}},computed:{principalName:function(){var e=this.choosedIndex,t=this.bizInfo;return t[e]?t[e].principalName:"-"}},props:{bizInfo:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}}},mounted:function(){this.choosedIndex=this.bizInfo.findIndex((function(e){return 1===e.status}))},methods:{setIndex:function(e){this.choosedIndex=e},submit:function(){var e=this.choosedIndex,t=this.bizInfo;this.$emit("submit",{author_id:t[e].authorId})}}})),dv=uv,pv=(0,g.Z)(dv,cv,lv,!1,null,"93d22b14",null),vv=pv.exports;(function(e){e[e["chooseType"]=0]="chooseType",e[e["scanQrcode"]=1]="scanQrcode",e[e["additionalInfo"]=2]="additionalInfo"})(Jp||(Jp={}));var mv,fv,hv=s.ZP.extend({name:"EnterpriseQR",data:function(){return{curProgressStatus:Jp.additionalInfo,qrcodeUrl:"",qrcodeStatus:0,signScanFailReason:"",failText:"",token:"",wxInfo:{},bizInfo:[],checkInterval:0}},components:{AdditionalCompanyInfo:vv,Qrcode:O.Z,Brand:Vp.Z},computed:{qrTipsDesc:function(){return["微信公众号已完成企业认证","该微信公众号管理员"]},normalText:function(){return""}},created:function(){this.next()},destroyed:function(){clearInterval(this.checkInterval)},methods:{toMail:function(){},next:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$route.query.token,i){t.next=6;break}return e.errorTip("无有效认证信息，请重新开始注册",1500,(function(){e.$router.push({name:"signUp"})})),t.abrupt("return");case 6:e.token=i;case 7:e.loadQrcode();case 8:case"end":return t.stop()}}),t)})))()},submit:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(e),n=t.token,a={token:n,author_id:e.author_id},i.next=5,(new v.ZP).signUp(a);case 5:if(o=i.sent,o){i.next=8;break}return i.abrupt("return");case 8:s=o.baseResponse,0===s.ret?t.$router.replace({name:"signSuccess"}):-3===s.ret?t.errorTip("身份证与姓名不匹配，请重试"):-4===s.ret?t.errorTip("该邮箱已被注册，请使用另一个邮箱重新注册"):-10010===s.ret?t.errorTip("暂不支持海外主体注册"):-10011===s.ret?t.errorTip("注册信息不全"):t.errorTip("注册失败，请重试");case 10:case"end":return i.stop()}}),i)})))()},loadQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,(new v.ZP).getSignUpQrcode(e.token);case 3:if(n=t.sent,n){t.next=8;break}return t.abrupt("return");case 8:if(-2!==n.baseResponse.ret){t.next=13;break}return i.$tipsErr("注册链接已过期，请重新发起注册"),window.setTimeout((function(){e.$router.push({name:"signMail"})}),1500),window.setTimeout((function(){return i.$tipsHide()}),3e3),t.abrupt("return");case 13:e.qrcodeStatus=O.R.normal,e.qrcodeUrl=n.image,e.curProgressStatus=Jp.scanQrcode,e.checkInterval=window.setInterval((function(){return e.checkQrcode()}),1e3);case 17:case"end":return t.stop()}}),t)})))()},checkQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,(new v.ZP).checkSignUpQrcode(e.token);case 3:if(n=t.sent,n&&1!==n.baseResponse.ret){t.next=6;break}return t.abrupt("return");case 6:clearInterval(e.checkInterval),0===n.baseResponse.ret?n.bizInfo&&n.bizInfo.length?(e.qrcodeStatus=O.R.success,window.setTimeout((0,o.Z)((0,r.Z)().mark((function t(){var a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.bizInfo=null===(a=n)||void 0===a?void 0:a.bizInfo,i.wxInfo=null===(o=n)||void 0===o?void 0:o.wxInfo,e.curProgressStatus=Jp.additionalInfo;case 3:case"end":return t.stop()}}),t)}))),1500)):(e.qrcodeStatus=O.R.fail,window.setTimeout((0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.failText="扫码认证失败，请重新扫码认证",e.signScanFailReason="该微信号无认证资格，仅已微信认证的公众号的管理员才可扫码认证。";case 2:case"end":return t.stop()}}),t)}))),1500)):e.qrcodeStatus=O.R.expired;case 8:case"end":return t.stop()}}),t)})))()}},beforeDestroy:function(){clearInterval(this.checkInterval)}}),gv=hv,yv=(0,g.Z)(gv,ov,sv,!1,null,"2ebf081e",null),bv=yv.exports,wv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),e.showVerifyMailInfo?[t("div",{staticClass:"title"},[e._v("激活邮箱")]),t("div",{staticClass:"info-wrap"},[t("div",{staticClass:"text verify"},[t("span",[e._v("验证邮件已发送到你的注册邮箱："+e._s(e.form.mail))]),t("mp-button",{staticClass:"resend",attrs:{type:"primary",disabled:e.resendSeconds>0},on:{click:e.resend}},[e.resendSeconds>0?t("span",[e._v("已发送（"+e._s(e.resendSeconds)+"s）")]):t("span",[e._v("重发验证")])])],1),t("div",{staticClass:"text"},[e._v("请进入邮箱查看邮件，并激活微信红包封面开放平台账号。")])]),t("div",{staticClass:"tip-wrap"},[t("div",{staticClass:"text"},[e._v("没有收到邮件？")]),t("div",{staticClass:"text"},[t("span",[e._v("1.请检查邮箱地址是否正确，可以返回")]),t("a",{on:{click:e.back}},[e._v("重新填写")])]),t("div",{staticClass:"text"},[e._v("2.邮件可能被拦截，请检查你的邮件垃圾箱")]),t("div",{staticClass:"text"},[e._v("3.若仍未收到验证邮件，请尝试重发")])])]:[t("div",{staticClass:"title"},[e._v("完善注册信息")]),t("div",{staticClass:"personal-title"},[e._v("请填写个人实名信息及注册邮箱，用于信息校验。")]),t("mp-form",{ref:"form",staticClass:"mail-form",attrs:{model:e.form,rules:e.rules,"label-width":75},nativeOn:{submit:function(e){e.preventDefault()}}},[t("mp-form-item",{attrs:{prop:"name",label:"身份证姓名"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的身份证姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("mp-form-item",{attrs:{prop:"id_number",label:"身份证号码"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的身份证号码"},model:{value:e.form.id_number,callback:function(t){e.$set(e.form,"id_number",t)},expression:"form.id_number"}})],1),t("mp-form-item",{attrs:{prop:"mail",label:"邮箱地址"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的邮箱"},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),t("mp-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.sendMail}},[e._v("发送验证邮件")])],1)]],2)},Cv=[],_v=s.ZP.extend({name:"PersonMail",components:{Brand:Vp.Z},data:function(){return{showVerifyMailInfo:!1,form:{mail:"",name:"",id_number:""},canSubmit:!1,resendSeconds:0,rules:{mail:[{required:!0,message:"注册邮箱不能为空",trigger:"blur"},{trigger:"blur",validator:function(e,t,i){return(0,_e.Q7)(t)?i():i(new Error("请填写正确格式的邮箱地址"))}}],id_number:[{required:!0,message:"身份证号码不能为空",trigger:"blur"},{trigger:"blur",validator:function(e,t,i){return(0,_e.e4)(t)?i():i(new Error("请填写正确格式的身份证号码"))}}]}}},created:function(){},methods:{sendMail:function(){var e=this,t=this,i=t.$refs.form;i.validate(function(){var i=(0,o.Z)((0,r.Z)().mark((function i(n){var a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n){i.next=5;break}return i.next=3,(new v.ZP).sendEmail(m.U6.loginData.token,e.form.mail,1,e.form.name,e.form.id_number);case 3:a=i.sent,a&&-4===a.baseResponse.ret?(t.$tipsErr("该邮箱已被注册，请使用另一个邮箱重新注册"),window.setTimeout((function(){return t.$tipsHide()}),3e3)):a&&0===a.baseResponse.ret?(t.showVerifyMailInfo=!0,e.countdown()):(t.$tipsErr("发送失败，请稍后重试"),window.setTimeout((function(){return t.$tipsHide()}),3e3));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},countdown:function(){var e=this;this.resendSeconds=60;var t=window.setInterval((function(){e.resendSeconds-=1,0===e.resendSeconds&&clearInterval(t)}),1e3)},resend:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new v.ZP).sendEmail(m.U6.loginData.token,e.form.mail,1,e.form.name,e.form.id_number);case 2:i=t.sent,i&&0===i.baseResponse.ret&&e.countdown();case 4:case"end":return t.stop()}}),t)})))()},back:function(){this.showVerifyMailInfo=!1},gotoIndex:function(){this.$router.replace({name:"index"})}}}),xv=_v,Iv=(0,g.Z)(xv,wv,Cv,!1,null,"165f2b93",null),kv=Iv.exports,Tv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),0===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("认证信息")]),t("div",{staticClass:"qr-wrap"},[e.can_signup?[t("div",{staticClass:"qr-tips-title"},[e._v("请使用符合以下条件的微信扫码认证：")]),e._m(0),t("div",{staticClass:"scan-qrcode"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:e.normalText,status:e.qrcodeStatus,failText:e.failText,failTip:e.signScanFailReason},on:{reload:e.loadQrcode}},[t("div",{staticClass:"second-tip"},[e._v("二维码每小时更新")])])],1)]:[t("ErrorWrap",{attrs:{errorRet:e.errorRet}},[[t("a",{on:{click:e.reload}},[e._v("重新扫码验证")]),e.errorRet.length>1&&!e.errorRet[1].pass?t("a",{on:{click:e.reloadMessage}},[e._v("重新完善注册信息")]):e._e()]],2)]],2)]:e._e(),1===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("选择视频号")]),t("AdditionalPersonInfo",{attrs:{finderInfo:e.finderInfo},on:{submit:e.submit}})]:e._e()],2)},Sv=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"qr-tips-desc"},[t("span",[e._v("1. 微信已完成实名认证；")]),t("span",[e._v("2. 微信实名信息与填写信息一致；")]),t("span",[e._v("3. 已开通个人注册的视频号；")]),t("span",[e._v("4. 视频号关注用户数达100个 或 视频号绑定的表情平台账号专辑下载量达500次。")])])}],Av=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"addtional-company-info-wrapper"},[t("div",{staticClass:"choose-wx-account"},[t("div",{staticClass:"choose-account-text"},[e._v("选择个人管理的视频号：")]),t("mp-radio-group",{model:{value:e.choosedIndex,callback:function(t){e.choosedIndex=t},expression:"choosedIndex"}},[t("div",{staticClass:"account-list"},e._l(e.finderInfo,(function(i,n){return t("div",{key:n,staticClass:"account-item",class:{disabled:1!==i.status},on:{click:function(t){return e.setIndex(n)}}},[t("mp-radio",{attrs:{value:n}}),t("img",{attrs:{src:i.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(i.nickname))]),1!==i.status?[t("div",{staticClass:"disable-tip"},[0===i.status||2===i.status?t("span",[e._v("（已注册）")]):3===i.status?t("span",[e._v("（未绑定银行卡）")]):4===i.status?t("span",[e._v("（海外主体，无法注册）")]):e._e()]),t("div",{staticClass:"disable-mask",on:{click:function(e){e.stopPropagation()}}}),5===i.status?t("div",{staticClass:"not-complete-biz-tip",on:{click:function(e){e.stopPropagation()}}},[t("span",{staticClass:"warn"},[e._v("（该公众号的认证材料不完整，需补全认证材料后注册）")]),t("a",{attrs:{href:"https://mp.weixin.qq.com/cgi-bin/readtemplate?t=wxverify/faq_tmpl&lang=zh_CN&token=$base_resp.token.DATA",target:"_blank"}},[e._v(" 公众号申请微信认证指引 ")])]):e._e()]:e._e()],2)})),0)])],1),e.choosedIndex>-1?t("div",{staticClass:"options"},[t("mp-button",{attrs:{type:"primary",disabled:e.finderInfo[e.choosedIndex]&&1!==e.finderInfo[e.choosedIndex].status},on:{click:e.submit}},[e._v("下一步")])],1):e._e()])},Dv=[],Pv=s.ZP.extend({name:"AdditionalPersonInfo",data:function(){return{choosedIndex:0}},computed:{principalName:function(){var e=this.choosedIndex,t=this.finderInfo;return t[e]?t[e].principalName:"-"}},props:{finderInfo:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}}},mounted:function(){this.choosedIndex=this.finderInfo.findIndex((function(e){return 1===e.status}))},methods:{setIndex:function(e){this.choosedIndex=e},submit:function(){var e=this.choosedIndex,t=this.finderInfo;this.$emit("submit",{author_id:t[e].authorId})}}}),Zv=Pv,Uv=(0,g.Z)(Zv,Av,Dv,!1,null,"0d8edc7e",null),Ev=Uv.exports,Rv=i(88299);(function(e){e[e["scanQrcode"]=0]="scanQrcode",e[e["additionalInfo"]=1]="additionalInfo"})(mv||(mv={})),function(e){e[e["personal"]=0]="personal",e[e["company"]=1]="company"}(fv||(fv={}));var Mv=s.ZP.extend({name:"PersonQR",data:function(){return{type:fv.personal,curProgressStatus:mv.scanQrcode,qrcodeUrl:"",qrcodeStatus:0,signScanFailReason:"",failText:"",token:"",wxInfo:{},finderInfo:[],checkInterval:0,can_signup:!0,errorRet:[]}},components:{AdditionalPersonInfo:Ev,Qrcode:O.Z,Brand:Vp.Z,ErrorWrap:Rv.Z},computed:{normalText:function(){return this.type===fv.personal?"":this.type===fv.company?"公众号管理员扫码认证（公众号需已微信认证）":""}},created:function(){this.next()},methods:{reload:function(){this.can_signup=!0,this.loadQrcode()},reloadMessage:function(){this.$router.replace({name:"PersonMail"})},next:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$route.query.token,e,i){t.next=7;break}return e.errorTip("无有效认证信息，请重新开始注册",1500,(function(){e.$router.push({name:"signUp"})})),t.abrupt("return");case 7:e.token=i;case 8:e.loadQrcode();case 9:case"end":return t.stop()}}),t)})))()},submit:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.token,a=t.wxInfo,o=(0,ve.Z)({token:n,author_id:a.authorId},e),i.next=5,(new v.ZP).signPersonUp(o);case 5:if(s=i.sent,s){i.next=8;break}return i.abrupt("return");case 8:c=s.baseResponse,0===c.ret?t.$router.replace({name:"signSuccess"}):-3===c.ret?t.errorTip("身份证与姓名不匹配，请重试"):-4===c.ret?t.errorTip("该邮箱已被注册，请使用另一个邮箱重新注册"):-9===c.ret?t.errorTip("个人认证失败"):t.errorTip("注册失败，请重试");case 10:case"end":return i.stop()}}),i)})))()},loadQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,(new v.ZP).getSignUpQrcode(e.token);case 3:if(n=t.sent,n){t.next=8;break}return t.abrupt("return");case 8:if(-2!==n.baseResponse.ret){t.next=13;break}return i.$tipsErr("注册链接已过期，请重新发起注册"),window.setTimeout((function(){e.$router.push({name:"signMail"})}),1500),window.setTimeout((function(){return i.$tipsHide()}),3e3),t.abrupt("return");case 13:e.qrcodeStatus=O.R.normal,e.qrcodeUrl=n.image,e.curProgressStatus=mv.scanQrcode,e.checkInterval=window.setInterval((function(){return e.checkQrcode()}),1e3);case 17:case"end":return t.stop()}}),t)})))()},checkQrcode:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new v.ZP).checkPersonSignUpQrcode(e.token);case 2:if(i=t.sent,i&&1!==i.baseResponse.ret){t.next=5;break}return t.abrupt("return");case 5:clearInterval(e.checkInterval),0===i.baseResponse.ret?(e.errorRet=i.reasons,e.can_signup=i.canSignup,e.finderInfo=i.finderInfo,console.log(i.finderInfo),console.log(e.can_signup),1==e.can_signup&&(e.curProgressStatus=mv.additionalInfo,console.log(e.curProgressStatus))):e.qrcodeStatus=O.R.expired;case 7:case"end":return t.stop()}}),t)})))()},gotoIndex:function(){this.$router.replace({name:"index"})}},beforeDestroy:function(){clearInterval(this.checkInterval)}}),Lv=Mv,Fv=(0,g.Z)(Lv,Tv,Sv,!1,null,"da8b032c",null),Nv=Fv.exports,Ov=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-law-wrap"},[t("term-display",{attrs:{title:"“微信红包封面”定制功能使用条款"},scopedSlots:e._u([{key:"content",fn:function(){return[t("use-term")]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{on:{click:e.back}},[e._v("上一步")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("同意")])]},proxy:!0}])})],1)},Bv=[],qv=s.ZP.extend({name:"SignLaw",components:{TermDisplay:G,UseTerm:W.Z},methods:{back:function(){this.$router.back()},confirm:function(){this.$router.replace({name:"ChooseType"})},gotoIndex:function(){this.$router.replace({name:"index"})}}}),Qv=qv,jv=(0,g.Z)(Qv,Ov,Bv,!1,null,"21789810",null),Hv=jv.exports,Gv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-should-know-wrap"},[t("term-display",{attrs:{title:"请阅读注册须知"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"section"},[t("p",[e._v("一、现阶段本功能仅向中国大陆境内的，且满足下列任一条件的用户开放：")]),t("p",[e._v("1. 成功开通并完成企业认证的公众号用户；")]),t("p",[e._v("2. 成功开通且关注人数达100人的公众号个人用户；")]),t("p",[e._v("3. 成功开通且满足下列任一条件的视频号个人用户：")]),t("p",[e._v("1）视频号关注人数达100人；2）视频号绑定的微信表情平台账号专辑下载量达500次。")]),t("br"),t("p",[e._v("当你使用微信公众账号、微信视频号账号使用本功能时，腾讯将使用你在微信公众平台、微信视频号的相关信息，并以此作为你在本功能平台的身份信息。")]),t("p",[e._v("如果你尚未通过微信公众平台、微信视频号达到前述条件的，需在相应条件完成后方可使用本功能。")])]),t("div",{staticClass:"section"},[e._v("二、现阶段本功能暂不对宗教、烟草、医疗、特殊医学用途配方食品、医疗器械、农药、兽药、保健食品及药品相关的主体开放。")]),t("div",{staticClass:"section"},[t("p",[e._v(" 三、本功能是一项付费、附条件、附有效期限的功能。你仅有在支付费用后，方可在指定期限（支付成功之日起六个月内）向微信最终用户发放你的微信红包封面，微信最终用户可在指定期限（领取成功之日起三个月内）使用你发放的微信红包封面。但微信最终用户使用其获得的红包封面是免费的，你不得向微信最终用户收取任何费用。 ")]),t("p",[e._v(" 本功能按你选择的微信红包封面的可发放个数收费（一个微信个人账号成功领取一次特定微信红包封面的，即计为发放1个，依此类推），计费标准为人民币1元/个，最少购买个数为1个（仅能购买整数个），最多购买个数为1000万个。 ")])]),t("div",{staticClass:"section"},[e._v(" 四、定制微信红包封面的，应遵守《“微信红包封面”定制功能使用条款》《“微信红包封面”设计规范》《“微信红包封面”素材规范》等。腾讯将对此进行一定的形式审核，但腾讯的该等审核不得视为对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。 ")]),t("div",{staticClass:"section"},[e._v(" 五、当你的微信红包封面因为违法或侵权等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此已支付的费用将无法退款。 ")])]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{on:{click:e.cancel}},[e._v("取消")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")])]},proxy:!0}])})],1)},Wv=[],zv=s.ZP.extend({name:"SignShouldKnow",components:{TermDisplay:G},methods:{cancel:function(){this.gotoIndex()},gotoIndex:function(){this.$router.replace({name:"index"})},next:function(){this.$router.push({name:"signLaw"})}}}),Vv=zv,Jv=(0,g.Z)(Vv,Gv,Wv,!1,null,"522129a8",null),Kv=Jv.exports,Yv=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-success"},[t("SuccessResult",{attrs:{title:"已注册",desc:"",confirmText:"去创建封面",showBizInfo:!1},on:{confirm:e.goToCoverList}})],1)},Xv=[],$v=s.ZP.extend({name:"SignSuccess",components:{SuccessResult:b},methods:{goToCoverList:function(){this.$router.replace({name:"login"})},gotoIndex:function(){this.$router.replace({name:"index"})}}}),em=$v,tm=(0,g.Z)(em,Yv,Xv,!1,null,"76eeee6c",null),im=tm.exports,nm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"admin-wrap"},[t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"",value:e.qrcodeDialog,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"qr-wrap",class:{showMask:1==e.qrcodeIsOk}},[t("div",{staticClass:"qr-title"},[e._v(e._s(e.isSecondary?"管理员 ".concat(e.nickname," 微信扫码确认后可修改"):"".concat(e.qrcodeNickname," 微信扫码确认后可绑定")))]),t("div",{staticClass:"qr-code-wrap"},[t("img",{staticClass:"qrq",attrs:{src:"https://res.wx.qq.com/t/fed_upload/b7d329b5-c8e2-434c-b0d5-cb3b52809c30/1.png"}}),e.qrcode?t("img",{staticClass:"qr-code-img",attrs:{src:e.qrcode}}):e._e(),t("div",{staticClass:"mask"},[t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}})],1)]),t("p",{staticClass:"qr-tips"},[e._v("二维码有效期为12小时")]),e.ie?e._e():t("a",{staticClass:"qr-download",on:{click:e.canvasDownload}},[e._v("下载二维码")])])])]),t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"绑定运营者",value:e.showDialog,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{ref:"dialog",staticClass:"dialog-body"},[t("div",{staticClass:"dialog-title"},[e._v("请输入需要绑定的微信号")]),t("mp-input",{attrs:{placeholder:"请输入微信号"},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("svg-icon",{staticClass:"search-icon",attrs:{name:"search"}}),t("span",[e._v("搜索")])],1)])]},proxy:!0}]),model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),t("div",{staticClass:"search-result-wrap-w"},[e.operation?t("div",{staticClass:"search-result-wrap"},[-2==e.showError?t("div",{staticClass:"error-tip tc"},[t("p",{staticClass:"error"},[e._v("无法绑定该微信号，请确认是否属于以下情况：")]),t("p",{staticClass:"error"},[e._v("该微信号不存在")])]):e._e(),1==e.showError?t("div",{staticClass:"error-tip"},[t("span",{staticClass:"error"},[e._v("不可重复邀请运营者")])]):e._e(),2==e.showError?t("div",{staticClass:"error-tip"},[t("span",{staticClass:"error"},[e._v("该用户未关注「微信红包封面」公众号")])]):e._e(),0==e.showError?t("div",{staticClass:"result"},[t("img",{staticClass:"avatar",attrs:{src:e.info.headImgUrl?e.info.headImgUrl:e.avatar}}),t("div",{staticClass:"name"},[e._v(e._s(e.info.nickname))])]):e._e()]):t("div",{staticClass:"dialog-search-tips"},[e._v("输入微信号后，回车可以搜索")])]),e.info.nickname||e.token?t("div",{staticClass:"dialog-footer"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:""==e.token||e.submitDisabled},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1):e._e()],1)]),e.isPageReady?[t("div",{staticClass:"main-card-title"},[e._v("成员管理")]),t("div",{staticClass:"main-card admin-title-wrap"},[t("div",{staticClass:"title font-medium"},[e._v("管理员信息")]),t("div",{staticClass:"admin-nick"},[e._v("微信昵称 "+e._s(e.nickname))])]),t("div",{staticClass:"main-card",staticStyle:{"margin-top":"20px"}},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-medium"},[e._v("运营者管理")]),1!=e.isSecondary?t("mp-button",{staticClass:"button",attrs:{type:"primary",disabled:e.administratorList.length>4},on:{click:e.goToMakeAdmin}},[e._v(" 绑定运营者 ")]):e._e()],1),t("p",{staticClass:"bindStatus-desc2"},[e._v("运营者可购买封面、申诉、退款，如需其他操作可进行申请。")]),t("a-table",{staticClass:"admin-table",attrs:{columns:e.columns,dataSource:e.administratorList,pagination:!1,locale:{emptyText:"暂无运营者"}},scopedSlots:e._u([{key:"flag",fn:function(i,n){return[t("div",{staticClass:"detail-flag"},[0==n.pendingPermission?[0==n.flag?t("div",{staticClass:"f"},[e._v("无")]):e._e(),1&n.flag?t("div",{staticClass:"flag-c"},[e._v("发放封面")]):e._e(),2&n.flag?t("div",{staticClass:"flag-c"},[e._v("回收封面")]):e._e(),4&n.flag?t("div",{staticClass:"flag-c"},[e._v("下载发放材料")]):e._e(),8&n.flag?t("div",{staticClass:"flag-c"},[e._v("编辑封面")]):e._e(),16&n.flag?t("div",{staticClass:"flag-c"},[e._v("生成和使用封面兑换卡")]):e._e()]:[t("div",{staticClass:"f"},[t("span",[e._v("权限待确认")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"flag-pop"},[t("div",{staticClass:"wait-title"},[e._v("当前权限")]),t("div",{staticClass:"flag-wrap"},[1&n.flag?t("div",{staticClass:"flag-c"},[e._v("发放封面")]):e._e(),2&n.flag?t("div",{staticClass:"flag-c"},[e._v("回收封面")]):e._e(),4&n.flag?t("div",{staticClass:"flag-c"},[e._v("下载发放材料")]):e._e(),8&n.flag?t("div",{staticClass:"flag-c"},[e._v("编辑封面")]):e._e(),16&n.flag?t("div",{staticClass:"flag-c"},[e._v("生成和使用封面兑换卡")]):e._e()]),t("div",{staticClass:"wait-title"},[e._v("待确认权限")]),t("div",{staticClass:"flag-wrap2"},[(1&n.flag)!=(1&n.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("发放封面")]),t("span",{class:1&n.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(2&n.flag)!=(2&n.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("回收封面")]),t("span",{class:2&n.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(4&n.flag)!=(4&n.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("下载发放材料")]),t("span",{class:4&n.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(8&n.flag)!=(8&n.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("编辑封面")]),t("span",{class:8&n.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(16&n.flag)!=(16&n.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("生成和使用封面兑换卡")]),t("span",{class:8&n.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e()])])]},proxy:!0}],null,!0)})],1)]],2)]}},{key:"bindStatus",fn:function(i,n){return[t("div",{staticClass:"detail-bindStatus"},[t("div",{staticClass:"c"},[e._v(e._s(0==n.bindStatus?"待确认":"已绑定"))])])]}},{key:"createTime",fn:function(i,n){return[t("div",{staticClass:"detail-bindStatus"},[t("div",{staticClass:"c"},[e._v(e._s(e.timeToDate(n.createTime)))])])]}},{key:"action",fn:function(i,n){return[t("div",{staticClass:"detail"},[n.bindQrcode&&0==e.isSecondary?t("a",{staticStyle:{"padding-right":"16px"},on:{click:function(t){return e.openQrcode(n)}}},[e._v("查看邀请码")]):e._e(),n.subId!=e.subId&&1==e.isSecondary?[0==n.bindStatus?t("a",{staticClass:"gray"},[e._v("撤销邀请")]):e._e()]:[0==n.bindStatus?t("a",{on:{click:function(t){return e.editAction(n)}}},[e._v("撤销邀请")]):e._e(),0==n.bindStatus&&e.actionEdit==n.subId?t("mp-popover",{attrs:{trigger:"manual",width:280},model:{value:e.actionVisible,callback:function(t){e.actionVisible=t},expression:"actionVisible"}},[t("div",{staticClass:"tc"},[e._v("撤销 "+e._s(n.nickname)+" 的运营者邀请？")]),t("div",{staticClass:"detail-button-wrap"},[t("mp-button",{staticClass:"detail-button",attrs:{type:"default"},on:{click:e.closeAction}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button",attrs:{type:"primary"},on:{click:function(t){return e.cancelAdmin(n)}}},[e._v("撤销")])],1)]):e._e()],1==e.isSecondary?[t("mp-popover",{attrs:{trigger:"hover",width:"190"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"content"},[e._v("运营者无解除绑定权限")])]},proxy:!0},{key:"target",fn:function(){return[1==n.bindStatus?t("a",{staticClass:"gray"},[e._v("解除绑定")]):e._e()]},proxy:!0}],null,!0)})]:[1==n.bindStatus?t("a",{on:{click:function(t){return e.editAction(n)}}},[e._v("解除绑定")]):e._e(),1==n.bindStatus&&e.actionEdit==n.subId?t("mp-popover",{attrs:{trigger:"manual",width:280},model:{value:e.actionVisible,callback:function(t){e.actionVisible=t},expression:"actionVisible"}},[t("div",{staticClass:"tc"},[e._v("解除 "+e._s(n.nickname)+" 的运营者身份？")]),t("div",{staticClass:"detail-button-wrap"},[t("mp-button",{staticClass:"detail-button",attrs:{type:"default"},on:{click:e.closeAction}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button",attrs:{type:"primary"},on:{click:function(t){return e.cancelAdmin(n)}}},[e._v("解除")])],1)]):e._e()],t("div",[n.subId==e.subId&&1==e.isSecondary&&1==n.pendingPermission?[t("a",{staticStyle:{"margin-right":"16px"},on:{click:function(t){return e.openQrcode(n)}}},[e._v("查看申请码")]),t("a",{on:{click:function(t){return e.cancelInt(n)}}},[e._v("撤销申请")])]:n.subId!=e.subId&&1==e.isSecondary||0==n.bindStatus?[t("a",{staticClass:"gray"},[e._v("编辑")])]:[t("a",{on:{click:function(t){return e.editAdmin(n)}}},[e._v("编辑")])]],2)],2)]}}],null,!1,2116592223)})],1)]:[e._m(0)],t("mp-dialog",{staticClass:"edit-dialog",attrs:{title:"运营者权限",value:e.bindStatusVisible,closable:!0,width:645},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[e.choiceEdit.subId==e.subId&&1==e.isSecondary?t("div",{staticClass:"dialog-footer2"},[t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"default"},on:{click:e.closeDialogReport}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"primary",disabled:((e.editValue1?1:0)|(e.editValue2?2:0)|(e.editValue3?4:0)|(e.editValue4?8:0)|(e.editValue5?16:0))==e.oldFlag||e.submitDisabled},on:{click:function(t){return e.editOpConfirm()}}},[e._v(" 申请修改 ")])],1):t("div",{staticClass:"dialog-footer2"},[t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"default"},on:{click:e.closeDialog}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"primary",disabled:((e.editValue1?1:0)|(e.editValue2?2:0)|(e.editValue3?4:0)|(e.editValue4?8:0)|(e.editValue5?16:0))==e.oldFlag||e.submitDisabled},on:{click:function(t){return e.editAdminConfirm()}}},[e._v(" 修改 ")])],1)]},proxy:!0}])},[1==e.bindStatusStep?t("div",{staticClass:"dialog-body2"},[t("p",{staticClass:"bindStatus-desc"},[e._v("运营者可购买封面、申诉、退款。如需其他权限，可在下方选择")]),t("div",{staticClass:"choiceTips"},[t("span",[e._v("编辑")]),t("span",[e._v(e._s(e.choiceEdit.nickname))]),t("span",[e._v("的权限：")]),t("div",{staticClass:"checkbox-box"},[t("mp-checkbox",{on:{input:function(t){return e.editValueClick(t)}},model:{value:e.editValue1,callback:function(t){e.editValue1=t},expression:"editValue1"}},[e._v("发放封面")]),t("mp-checkbox",{on:{input:function(t){return e.editValueClick(t)}},model:{value:e.editValue2,callback:function(t){e.editValue2=t},expression:"editValue2"}},[e._v("回收封面")]),t("mp-checkbox",{on:{input:function(t){return e.editValueClick(t)}},model:{value:e.editValue3,callback:function(t){e.editValue3=t},expression:"editValue3"}},[e._v("下载发放材料")]),t("mp-checkbox",{on:{input:function(t){return e.editValueClick(t)}},model:{value:e.editValue4,callback:function(t){e.editValue4=t},expression:"editValue4"}},[e._v("编辑封面")]),t("mp-checkbox",{on:{input:function(t){return e.editValueClick(t)}},model:{value:e.editValue5,callback:function(t){e.editValue5=t},expression:"editValue5"}},[e._v("生成和使用封面兑换卡")]),t("mp-checkbox",{staticClass:"detail-button-all",on:{input:function(t){return e.editAllValueClick(t)}},model:{value:e.editValue,callback:function(t){e.editValue=t},expression:"editValue"}},[e._v("全选")])],1)])]):e._e()]),t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"申请权限",value:e.showResultDialog,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{staticClass:"dialog-message-body"},[t("div",{staticClass:"error-icon"}),t("div",{staticClass:"weui-msg__title"},[e._v("无法发送权限申请")]),t("div",{staticClass:"weui-msg__desc"},[t("p",[e._v("管理员 "+e._s(e.nickname)+" 未关注「微信红包封面」公众号，请联系管理员关注后再次尝试")])])])]),t("canvas",{attrs:{id:"canvas"}})],2)},am=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],rm=i(65502),om=i.n(rm),sm=i(90520),cm=s.ZP.extend({name:"Administrator",data:function(){return{showDialog:!1,isPageReady:!1,token:"",editValue:!1,editValue1:!1,editValue2:!1,editValue3:!1,editValue4:!1,editValue5:!1,bindStatusStep:1,qrcodeIsOk:!1,bindStatusVisible:!1,actionVisible:!1,bindStatusText:"",avatar:i(94736),nickname:"",qrcode:"",qrcodeNickname:"",columns:[{dataIndex:"nickname",key:"nickname",title:"微信昵称"},{dataIndex:"flag",key:"flag",title:"当前权限",scopedSlots:{customRender:"flag"}},{dataIndex:"createTime",key:"createTime",title:"授权时间",scopedSlots:{customRender:"createTime"}},{dataIndex:"bindStatus",key:"bindStatus",title:"绑定状态",scopedSlots:{customRender:"bindStatus"}},{title:"操作",key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}],qrcodeDialog:!1,dialogWait:!1,administratorList:[],administrator:"",query:"",showError:0,info:{},operation:!1,actionEdit:"",isSecondary:0,subId:"",choiceEdit:{},showResultDialog:!1,showDialogInfo:!0,oldFlag:0,accountNickname:"",cSubId:"",cFlag:"",checkInterval:0,ie:!1,submitDisabled:!1}},components:{},destroyed:function(){clearInterval(this.checkInterval),document.onkeydown=function(){}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,i.fetchData();case 3:e.checkInterval=window.setInterval((function(){i.fetchData()}),3e3),n=navigator.userAgent,(n.indexOf("MSIE")>-1||n.indexOf("Edge")>-1)&&(e.ie=!0),i.isPageReady=!0,e.isSecondary=m.U6.user.isSecondary,e.accountNickname=m.U6.user.accountNickname,e.subId=m.U6.user.subId,document.onkeydown=function(e){var t="undefined"!=typeof event?window.event:e;if(t&&13==t.keyCode&&i.showDialog)return e.preventDefault(),e.stopPropagation(),i.search(),!1};case 11:case"end":return t.stop()}}),t)})))()},filters:{},methods:{timeToDate:function(e){return sm("yyyy年MM月dd日",new Date(1e3*e))},fetchData:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,(new v.ZP).adminList();case 3:n=t.sent,n&&0===n.baseResponse.ret&&(i.administratorList=n.secondaryManagerList||[],e.nickname=n.primaryManagerNickname,i.isPageReady=!0,""!=i.cSubId&&i.administratorList.forEach((function(e){e.subId==i.cSubId&&(0==i.isSecondary&&1==e.bindStatus||1==i.isSecondary&&0==e.pendingPermission&&i.cFlag!=e.cFlag)?(i.cSubId="",i.qrcodeIsOk=!0,window.setTimeout((function(){i.closeDialog()}),4e3)):e.subId==i.cSubId&&1==i.isSecondary&&0==e.pendingPermission&&i.cFlag==e.cFlag&&(i.cSubId="")})));case 5:case"end":return t.stop()}}),t)})))()},handleToDetail:function(){},editValueClick:function(e){1==this.editValue1&&1==this.editValue2&&1==this.editValue3&&1==this.editValue4&&1==this.editValue5?this.editValue=!0:this.editValue=!1},editAllValueClick:function(e){1==e?(this.editValue1=!0,this.editValue2=!0,this.editValue3=!0,this.editValue4=!0,this.editValue5=!0):(this.editValue1=!1,this.editValue2=!1,this.editValue3=!1,this.editValue4=!1,this.editValue5=!1)},submit:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,e.submitDisabled=!0,t.next=4,(new v.ZP).addAdminWechat(i.query,i.token);case 4:n=t.sent,n&&0===n.baseResponse.ret&&(i.fetchData(),i.qrcode=n.qrcode,i.cSubId=n.subId,i.qrcodeNickname=i.info.nickname,i.showDialog=!1,i.qrcodeDialog=!0,i.submitDisabled=!1);case 6:case"end":return t.stop()}}),t)})))()},search:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,(new v.ZP).adminSearchWechat(i.query);case 3:n=t.sent,i.operation=!0,n&&0===n.baseResponse.ret?(i.info.nickname=n.nickname,i.info.headImgUrl=n.headImgUrl,i.token=n.token,i.showError=0):n&&-2===n.baseResponse.ret?i.errorTip("该微信号未关注公众号"):i.showError=n.baseResponse.ret;case 6:case"end":return t.stop()}}),t)})))()},editAdminConfirm:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.choiceEdit,n=e,e.submitDisabled=!0,a=0|(e.editValue1?1:0)|(e.editValue2?2:0)|(e.editValue3?4:0)|(e.editValue4?8:0)|(e.editValue5?16:0),t.next=6,(new v.ZP).UpdateSecondary(i.subId,i.flag,a);case 6:t.sent,n.$tipsSuc("权限已修改"),window.setTimeout((function(){return n.$tipsHide()}),3e3),window.setTimeout((function(){e.submitDisabled=!1}),300),e.fetchData(),e.closeBindStatus();case 12:case"end":return t.stop()}}),t)})))()},editOpConfirm:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,n=e.choiceEdit,e.submitDisabled=!0,a=0|(e.editValue1?1:0)|(e.editValue2?2:0)|(e.editValue3?4:0)|(e.editValue4?8:0)|(e.editValue5?16:0),t.next=6,(new v.ZP).UpdateSecondary(n.subId,n.flag,a);case 6:o=t.sent,e.submitDisabled=!0,o&&0===o.baseResponse.ret?(i.qrcode=o.qrcode,i.qrcodeDialog=!0,i.qrcodeNickname=n.nickname,i.cSubId=n.subId,i.cFlag=o.flag):o&&2===o.baseResponse.ret&&(i.showResultDialog=!0),window.setTimeout((function(){e.submitDisabled=!1}),300),window.setTimeout((function(){return i.$tipsHide()}),3e3),e.fetchData(),e.closeBindStatus();case 13:case"end":return t.stop()}}),t)})))()},cancelAdmin:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t,0!=e.bindStatus){i.next=8;break}return i.next=4,(new v.ZP).recallAdmin(e.subId);case 4:a=i.sent,a&&0===a.baseResponse.ret&&(n.fetchData(),n.$tipsSuc("已撤销运营者邀请"),n.closeAction(),window.setTimeout((function(){return n.$tipsHide()}),3e3)),i.next=12;break;case 8:return i.next=10,(new v.ZP).removeAdmin(e.subId);case 10:o=i.sent,o&&0===o.baseResponse.ret&&(n.fetchData(),n.$tipsSuc("已撤销运营者"),n.closeAction(),window.setTimeout((function(){return n.$tipsHide()}),3e3));case 12:case"end":return i.stop()}}),i)})))()},editAction:function(e){this.actionVisible=!0,this.actionEdit=e.subId,(new z.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:9,authorId:m.U6.user.authorId,SubId:e.subId})},editAdmin:function(e){1==this.isSecondary&&(new z.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:11,authorId:m.U6.user.authorId,SubId:e.subId}),this.choiceEdit=e,this.actionEdit=e.subId,this.oldFlag=e.flag,1&e.flag?this.editValue1=!0:this.editValue1=!1,2&e.flag?this.editValue2=!0:this.editValue2=!1,4&e.flag?this.editValue3=!0:this.editValue3=!1,8&e.flag?this.editValue4=!0:this.editValue4=!1,16&e.flag?this.editValue5=!0:this.editValue5=!1,1==this.editValue1&&1==this.editValue2&&1==this.editValue3&&1==this.editValue4&&1==this.editValue5?this.editValue=!0:this.editValue=!1,this.bindStatusVisible=!0},closeDialog:function(){var e=this;e.token="",e.qrcodeDialog=!1,e.query="",e.dialogWait=!1,e.operation=!1,e.showDialog=!1,e.showResultDialog=!1,e.bindStatusVisible=!1,e.bindStatusStep=1,e.qrcodeIsOk=!1,e.editValue=!1,e.submitDisabled=!1,e.info={}},closeDialogReport:function(){this.bindStatusVisible=!1;var e=this.choiceEdit;(new z.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:12,authorId:m.U6.user.authorId,SubId:e.subId})},goToMakeAdmin:function(){var e=this;e.showDialog=!0,(new z.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:1,authorId:m.U6.user.authorId,SubId:""})},closeBindStatus:function(){this.bindStatusVisible=!1,this.bindStatusStep=1},closeAction:function(){this.actionVisible=!1},openQrcode:function(e){this.showDialog=!1,this.qrcodeDialog=!0,this.qrcodeNickname=e.nickname,this.qrcode=e.bindQrcode||e.pendingPermissionQrcode,(new z.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:6,authorId:m.U6.user.authorId,SubId:e.subId})},cancelInt:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t,i.next=3,(new v.ZP).recallOperate(e.subId);case 3:a=i.sent,a&&0===a.baseResponse.ret?(n.fetchData(),n.$tipsSuc("已撤销申请"),window.setTimeout((function(){return n.$tipsHide()}),3e3)):t.errorTip("撤销出错，请联系客服");case 5:case"end":return i.stop()}}),i)})))()},canvasDownload:function(){function e(e){var t=document.getElementById("canvas"),i=t.getContext("2d");i.font="21px";var n=i.measureText(e).width;return 2*n}(new z.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:5,authorId:m.U6.user.authorId,SubId:this.cSubId});var t={src:"https://res.wx.qq.com/t/fed_upload/7edbb40a-b1e1-4e9f-a826-f5359ed2c86e/icon.png",x:220,y:277,width:60,height:60},i={src:this.qrcode,x:150,y:207,width:200,height:200},n=new(om())("canvas",{width:500,height:540});n.addDrawImageTask([i,t]);var a=this.accountNickname.length>7?this.accountNickname.substring(0,7)+"...":this.accountNickname,r=m.U6.user.loginNickname.length>4?m.U6.user.loginNickname.substring(0,4)+"...":m.U6.user.loginNickname;this.isSecondary?n.addDrawTextTask([{text:r+"申请修改在红包封面平台",fontSize:20,width:e(r+"申请修改在红包封面平台"),y:68,x:(500-e(r+"申请修改在红包封面平台"))/2},{text:"账号「".concat(a,"」的权限"),fontSize:20,width:e("账号「".concat(a,"」的权限")),y:98,x:(500-e("账号「".concat(a,"」的权限")))/2},{text:"扫一扫二维码通过申请，有效期为12小时",fontSize:17,color:"rgba(0,0,0,0.5)",width:312,y:426,x:94}]):n.addDrawTextTask([{text:"邀请你成为红包封面平台",fontSize:20,width:e("邀请你成为红包封面平台"),y:68,x:(500-e("邀请你成为红包封面平台"))/2},{text:"账号「".concat(a,"」的运营者"),fontSize:20,width:e("账号「".concat(a,"」的运营者")),y:98,x:(500-e("账号「".concat(a,"」的运营者")))/2},{text:"扫一扫二维码接受邀请，有效期为12小时",fontSize:17,color:"rgba(0,0,0,0.5)",width:312,y:426,x:94}]),n.draw((function(){n.saveToPng("qrcode")}))}}}),lm=cm,um=(0,g.Z)(lm,nm,am,!1,null,"83498482",null),dm=um.exports,pm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"exchange-wrap"},[t("mp-dialog",{staticClass:"exchange-dialog",attrs:{title:e.stepTitle,value:e.useDialog,closable:!0,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[1==e.exchangeUseStep?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.choiceExchange.orderId},on:{click:function(t){return t.preventDefault(),e.step(2)}}},[e._v("下一步")])],1)],1):e._e(),2==e.exchangeUseStep?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.step(1)}}},[e._v("上一步")]),t("mp-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.step(3)}}},[e._v("兑换")])],1)],1):e._e(),e.showSuccess?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{on:{click:function(t){return t.preventDefault(),e.toUse.apply(null,arguments)}}},[e._v("去发放")])],1)],1):e._e(),e.showError?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("我知道了")])],1)],1):e._e()]},proxy:!0}])},[1==e.exchangeUseStep?t("div",{staticClass:"dialog-body"},[e.isQuotaGift?t("div",{staticClass:"dialog-tips"},[e._v(" 可兑换成下面样式的封面继续发放，其中未审核通过、封面名称非视频号名称、封面故事跳转非同主体账号的封面不展示 ")]):t("div",{staticClass:"dialog-tips"},[e._v("可兑换成下面样式的封面继续发放，其中未审核通过的封面不展示")]),e.exchangeList.length?t("div",{staticClass:"exchange-list"},[t("mp-radio-group",{model:{value:e.selectingExchangeList,callback:function(t){e.selectingExchangeList=t},expression:"selectingExchangeList"}},e._l(e.exchangeList,(function(i){return t("label",{key:i,staticClass:"exchange-item",class:{active:!i.disableUsage&&e.choiceExchange.orderId==i.orderId,disable:i.disableUsage},on:{click:function(t){return e.choiceExchangeClick(i)}}},[t("mp-radio",{attrs:{value:i.orderId,disabled:i.disableUsage}}),t("CoverReceiveImg",{staticClass:"exchange-item-img",attrs:{src:i.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":i.packetMaterial.syntheticWidgetImage&&i.packetMaterial.syntheticWidgetImage.mediaUrl}}),t("div",{staticClass:"exchange-item-right"},[t("div",{staticClass:"exchange-item-title"},[e._v(e._s(i.packetName))]),t("div",{staticClass:"exchange-item-time"},[e._v("最后操作时间："+e._s(e.toDate(i.updateTime)))])])],1)})),0)],1):e.dataLoading?t("div",{staticClass:"dialog-loading"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})]):t("div",{staticClass:"empty-list"},[e._v("无可兑换封面")])]):e._e(),2==e.exchangeUseStep?t("div",{staticClass:"dialog-body"},[e.isOnlyUseAll?t("div",{staticClass:"dialog-tips"},[e._v("平台奖励的封面兑换卡仅支持一次性兑换，兑换后的封面不可再次转为封面兑换卡")]):t("div",{staticClass:"dialog-tips"},[e._v("发放有效期至"+e._s(e.toDate(e.useQuotaObject.expiredTime))+"，兑换后的封面不可再次转为封面兑换卡")]),t("div",{staticClass:"dialog-exchange-wrap"},[e.isOnlyUseAll?e._e():[t("input",{directives:[{name:"model",rawName:"v-model",value:e.exchangeInput,expression:"exchangeInput"}],staticClass:"exchange-input",attrs:{placeholder:"输入兑换个数",max:e.useQuotaObject.totalCount-e.useQuotaObject.usedCount,disabled:e.isOnlyUseAll},domProps:{value:e.exchangeInput},on:{focus:e.inputBlur,input:function(t){t.target.composing||(e.exchangeInput=t.target.value)}}}),t("div",{staticClass:"dialog-input-gz"},[t("span",{staticClass:"dialog-exchange-number"},[e._v("可兑换封面 "+e._s(e.useQuotaObject.totalCount-e.useQuotaObject.usedCount)+" 个")]),t("span",{staticClass:"dialog-button-all",on:{click:e.allExchange}},[e._v("全部兑换")])]),e.numberErrorTips?t("div",{staticClass:"number-error-tips"},[e._v(e._s(e.numberErrorTips))]):e._e()],e.isOnlyUseAll?[t("div",{staticClass:"exchange-num-desc"},[e._v("兑换数量："+e._s(e.useQuotaObject.totalCount))]),t("div",{staticClass:"dialog-input-gz-tips"},[e._v("发放有效期至"+e._s(e.toDate(e.useQuotaObject.expiredTime)))])]:e._e()],2)]):e._e(),e.showSuccess?t("div",{staticClass:"dialog-body tc"},[t("svg-icon",{staticClass:"success-icon",attrs:{name:"success"}}),t("div",{staticClass:"weui-msg__title"},[e._v("已兑换")]),t("div",{staticClass:"weui-msg-preview"},[t("div",{staticClass:"weui-msg-preview__item"},[t("div",{staticClass:"weui-msg-preview__label"},[e._v("兑换数量")]),t("div",{staticClass:"weui-msg-preview__value"},[e._v(e._s(e.exchangeInput))])]),t("div",{staticClass:"weui-msg-preview__item"},[t("div",{staticClass:"weui-msg-preview__label"},[e._v("发放有效期")]),t("div",{staticClass:"weui-msg-preview__value"},[e._v("至"+e._s(e.toDate(e.useQuotaObject.expiredTime)))])]),t("div",{staticClass:"weui-msg-preview__item"},[t("div",{staticClass:"weui-msg-preview__label"},[e._v("操作")]),t("a",{staticClass:"weui-msg-preview__value preicew-link",attrs:{href:"javascript:;"},on:{click:e.remainExchange}},[e._v("查看记录")])])])],1):e._e(),e.showError?t("div",{staticClass:"dialog-body exchange-error-wrapper"},[t("svg-icon",{staticClass:"warn-icon",attrs:{name:"warn"}}),t("div",{staticClass:"error-title"},[e._v("兑换卡已失效")]),t("div",{staticClass:"error-desc"},[e._v("封面奖励已在手机端「制作我的红包封面」活动中使用")])],1):e._e()]),t("div",{staticClass:"main-card-title",on:{click:function(t){return e.toRouter()}}},[e._v(" 封面兑换卡 "),t("div",{staticClass:"main-card-title-tips"},[e._v("未发完的封面可通过封面兑换卡，兑换成其他样式的封面继续发放。兑换后的封面不可再次转为封面兑换卡。")])]),e.isPageReady?[1!=e.isDetail?t("div",{staticClass:"main-card"},[t("a-table",{staticClass:"exchange-table",attrs:{columns:e.columns,dataSource:e.dataRealList,"row-key":"quotaId",pagination:!1,locale:{emptyText:"暂无封面兑换卡"}},scopedSlots:e._u([{key:"type",fn:function(i,n){return[t("div",[t("span",[e._v(e._s(0===i?"封面回收":n.wording))]),n.quotaId.startsWith("spring2024")?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[n.quotaId.includes("biz")?t("span",[e._v("兑换的封面仅支持使用公众号图文消息「红包封面」组件发放")]):e._e(),n.quotaId.includes("emotion")?t("span",[e._v("兑换的封面仅支持在表情专辑中发放")]):e._e()])]},proxy:!0},{key:"target",fn:function(){return[t("icon-info",{staticClass:"exchange-type-infoicon"})]},proxy:!0}],null,!0)}):e._e(),n.quotaId.startsWith("autumn2023")?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("兑换的封面仅支持通过「封面专区」发放")])])]},proxy:!0},{key:"target",fn:function(){return[t("icon-info",{staticClass:"exchange-type-infoicon"})]},proxy:!0}],null,!0)}):e._e()],1)]}},{key:"totalCount",fn:function(i,n){return[t("span",[e._v(e._s(n.totalCount))])]}},{key:"expiredTime",fn:function(i,n){return[t("span",[e._v("至 "+e._s(e.toDate(n.expiredTime)))])]}},{key:"usedCount",fn:function(i,n){return[t("span",[e._v(e._s(n.totalCount-n.usedCount))])]}},{key:"action",fn:function(i,n){return[t("div",{staticClass:"detail"},[[!e.isCanEdit&&n.expiredTime>e.serverNowTime?t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无生成和使用封面兑换卡权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticStyle:{"margin-right":"4px"},attrs:{type:"primary"}},[e._v("兑换封面")])]},proxy:!0}],null,!0)}):n.expiredTime-e.serverNowTime<=0?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{position:"down-center",trigger:"hover",width:145},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"color-bw-lv3 text-center"},[e._v("兑换卡已过期")])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticClass:"color-bw-lv3",staticStyle:{"margin-right":"8px"},attrs:{type:"primary"}},[e._v("兑换封面")])]},proxy:!0}],null,!0)}):1===n.type&&n.hasUsedInMiniapp?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{position:"down-center",trigger:"hover",width:325},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"color-bw-lv3 text-center"},[e._v("奖励已在手机端「制作我的红包封面」活动中使用")])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticClass:"color-bw-lv3",staticStyle:{"margin-right":"4px"},attrs:{type:"primary"}},[e._v("兑换封面")])]},proxy:!0}],null,!0)}):n.expiredTime>e.serverNowTime&&e.isCanEdit&&n.usedCount<n.totalCount?t("a",{staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.useExchagne(n)}}},[e._v(" 兑换封面 ")]):e._e()],t("a",{on:{click:function(t){return e.toRouter(n.quotaId)}}},[e._v("详情")])],2)]}}],null,!1,4274535370)}),t("a-row",{attrs:{type:"flex",justify:"center"}},[e.dataList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.dataList.length,current:e.curPage,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1)],1):e._e()]:[e._m(0)],e.isDetail?t("div",{staticClass:"main-card"},[t("div",{staticClass:"detail-title"},[e._v("封面兑换卡详情")]),t("ul",{staticClass:"detail-message"},[t("li",[t("span",[e._v("生成时间：")]),t("span",{staticClass:"detail-num"},[e._v(e._s(e.toDate(e.detail.createTime)))])]),t("li",[t("span",[e._v("发放有效期：")]),t("span",{staticClass:"detail-num"},[e._v(e._s(e.toDate(e.detail.expiredTime)))])]),t("li",[t("span",[e._v("已兑换数量：")]),t("span",{staticClass:"detail-num"},[e._v(e._s(e.detail.usedCount))])])]),t("a-table",{staticClass:"exchange-detail-table",attrs:{columns:e.detailColumns,dataSource:e.detailDataRealList,pagination:!1,"row-key":"orderId",locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"timestamp",fn:function(i,n){return[t("span",[e._v(e._s(e.toDate2(n.timestamp)))])]}},{key:"usedCount",fn:function(i,n){return[t("span",[e._v(e._s(n.usedCount))])]}},{key:"detail",fn:function(i,n){return[t("div",{staticClass:"detail2",on:{click:function(t){return e.toDetail(n)}}},[t("CoverReceiveImg",{staticClass:"detail-list-img",attrs:{src:n.coverReceiveImg,"widget-cover-src":n.isWidgetPacket?n.coverReceiveImg:""}}),t("span",{staticClass:"detail-list-span"},[e._v(e._s(n.coverName))])],1)]}},{key:"toUse",fn:function(i,n){return[t("div",[t("a",{on:{click:function(t){return e.toUse(n)}}},[e._v("去发放")])])]}}],null,!1,748084339)})],1):e._e()],2)},vm=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],mm=i(80903),fm=i(90520),hm=(0,Ce._p)("user"),gm=hm.mapGetters,ym=s.ZP.extend({name:"Exchange",data:function(){return{detail:{},isDetail:!1,disabled:!1,stepTitle:"选择兑换的封面",dataList:[],dataRealList:[],detailDataRealList:[],exchangeList:[],useQuotaObject:{},choiceExchange:{},exchangeUseStep:1,curPage:1,pageNum:8,useDialog:!1,isPageReady:!1,transactionId:"",remain:0,numberErrorTips:"",exchangeInput:"",serverNowTime:"",isCanEdit:!0,showSuccess:!1,showError:!1,dataLoading:!1,selectingExchangeList:"",steps:[{label:"选择封面"},{label:"兑换封面"},{label:"发放封面"}],detailColumns:[{dataIndex:"timestamp",key:"timestamp",title:"兑换时间",scopedSlots:{customRender:"timestamp"}},{dataIndex:"usedCount",key:"usedCount",title:"已兑换数量",scopedSlots:{customRender:"usedCount"}},{dataIndex:"detail",key:"detail",title:"红包封面",scopedSlots:{customRender:"detail"}},{dataIndex:"toUse",key:"toUse",title:"操作",align:"right",scopedSlots:{customRender:"toUse"}}],columns:[{dataIndex:"totalCount",key:"totalCount",title:"兑换卡封面数量",width:228,scopedSlots:{customRender:"totalCount"}},{dataIndex:"expiredTime",key:"expiredTime",title:"发放有效期",width:228,scopedSlots:{customRender:"expiredTime"}},{dataIndex:"usedCount",key:"usedCount",title:"剩余可兑换封面数量",width:228,scopedSlots:{customRender:"usedCount"}},{dataIndex:"type",key:"type",title:"来源",width:228,scopedSlots:{customRender:"type"}},{title:"操作",width:228,key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}]}},computed:(0,ve.Z)((0,ve.Z)({},gm(["showQuotaRedPoint"])),{},{isQuotaGift:function(){var e,t;return!(null===(e=this.useQuotaObject)||void 0===e||null===(t=e.quotaId)||void 0===t||!t.startsWith("autumn2023"))},isOnlyUseAll:function(){var e,t,i;return!(1!==(null===(e=this.useQuotaObject)||void 0===e?void 0:e.type)||null!==(t=this.useQuotaObject)&&void 0!==t&&null!==(i=t.quotaId)&&void 0!==i&&i.startsWith("autumn2023"))}}),components:{CoverReceiveImg:ke.Z,IconInfo:mm.Z},destroyed:function(){},watch:{curPage:function(){var e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;this.dataRealList=this.dataList.slice(t,i)},$route:{handler:function(e,t){var i=this;void 0==e.query.id?i.isDetail=!1:i.getDetail(e.query.id)},immediate:!0},exchangeUseStep:function(){1==this.exchangeUseStep?this.stepTitle="选择兑换的封面":2==this.exchangeUseStep?this.stepTitle="选择兑换数量":3==this.exchangeUseStep&&(this.stepTitle="")}},mounted:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1!=m.U6.user.isSecondary||16&m.U6.user.managerFlag||(e.isCanEdit=!1),t.next=3,e.getList();case 3:if(!e.showQuotaRedPoint){t.next=6;break}return t.next=6,m.U6.getUserInfo();case 6:case"end":return t.stop()}}),t)})))()},filters:{},methods:{cancelPopover:function(){document.documentElement.click()},inputBlur:function(){this.numberErrorTips=""},toRouter:function(e){this.$router.push({name:"exchange",query:{id:e}})},toDetail:function(e){this.$router.push({name:"detail",query:{id:e.orderId}})},step:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o,s,c,l;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(2==e&&t.getList(),3!=e){i.next=36;break}if(o=t,o.disabled=!0,s=parseFloat(t.exchangeInput),c=/(^[1-9]\d*$)/.test(s.toString()),c){i.next=12;break}return t.numberErrorTips="请输入正确的转换数量",o.disabled=!1,i.abrupt("return");case 12:if(!(s>t.useQuotaObject.totalCount-t.useQuotaObject.usedCount)){i.next=18;break}return t.numberErrorTips="超出最大转换数量",o.disabled=!1,i.abrupt("return");case 18:t.numberErrorTips="";case 19:return i.next=21,(new ep).useQuota(t.useQuotaObject.quotaId,t.choiceExchange.orderId,parseInt(t.exchangeInput));case 21:if(l=i.sent,o.disabled=!1,0!==(null===l||void 0===l||null===(n=l.baseResponse)||void 0===n?void 0:n.ret)){i.next=29;break}t.transactionId=l.transactionId,t.getList(),t.showSuccess=!0,i.next=36;break;case 29:if(-20!==(null===l||void 0===l||null===(a=l.baseResponse)||void 0===a?void 0:a.ret)){i.next=34;break}t.showError=!0,t.getList(),i.next=36;break;case 34:return t.errorTip("兑换错误，请稍后重试"),i.abrupt("return");case 36:t.exchangeUseStep=e;case 37:case"end":return i.stop()}}),i)})))()},toDate:function(e){return fm("yyyy年MM月dd日",new Date(1e3*e))},toDate2:function(e){return fm("yyyy年MM月dd日 hh:mm",new Date(1e3*e))},pageChange:function(e){this.curPage=e.currentPage},getList:function(){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var i,n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(new ep).getList();case 2:i=t.sent,i&&0===i.baseResponse.ret?(e.dataList=i.objectList||[],e.serverNowTime=i.serverNowTime,e.isPageReady=!0,n=e,a=(n.curPage-1)*n.pageNum,o=a+n.pageNum,e.dataRealList=e.dataList.slice(a,o)):e.errorTip("网络错误，请刷新重试");case 4:case"end":return t.stop()}}),t)})))()},getDetail:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(new ep).getDetailList(e);case 2:n=i.sent,n&&0===n.baseResponse.ret&&(t.detail=n.object,t.detailDataRealList=n.recordList,t.isDetail=!0);case 4:case"end":return i.stop()}}),i)})))()},useExchagne:function(e){var t=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,o;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.exchangeUseStep=1,t.useQuotaObject=e,t.exchangeInput=t.isOnlyUseAll?e.totalCount:"",t.dataLoading=!0,t.useDialog=!0,t.showSuccess=!1,t.showError=!1,t.exchangeList=[],n=e.quotaId.startsWith("autumn2023"),i.prev=9,i.next=12,(new ep).getCanUseOrderList();case 12:if(a=i.sent,!a||0!==a.baseResponse.ret){i.next=19;break}return i.next=16,m.U6.getUserFinderInfo();case 16:return o=i.sent,t.exchangeList=a.orderList.filter((function(e){if(!n)return!0;var t=e.packetName===(null===o||void 0===o?void 0:o.nickname);if(!t)return!1;var i=e.actionAuthInfo;if(i){var a=i.action,r=i.status;if((4===(null===a||void 0===a?void 0:a.actionType)||2===(null===a||void 0===a?void 0:a.actionType))&&5!==r)return!1}return!0})),i.abrupt("return");case 19:return i.prev=19,t.dataLoading=!1,i.finish(19);case 22:case"end":return i.stop()}}),i,null,[[9,,19,22]])})))()},choiceExchangeClick:function(e){this.choiceExchange=e},closeDialog:function(){this.choiceExchange={},this.useDialog=!1,this.numberErrorTips="",this.selectingExchangeList="",this.exchangeList=[]},allExchange:function(){this.exchangeInput=(this.useQuotaObject.totalCount-this.useQuotaObject.usedCount).toString()},remainExchange:function(){this.closeDialog(),this.$router.push({name:"exchange",query:{id:this.useQuotaObject.quotaId}})},toUse:function(e){this.$router.push({name:"order",query:{tid:e.transactionId||this.transactionId}})},toadmin:function(){this.$router.push({name:"administrator"})}}}),bm=ym,wm=(0,g.Z)(bm,pm,vm,!1,null,"25ac471c",null),Cm=wm.exports,_m=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"case-wrap notranslate"},[t("div",{staticClass:"case-header-wrap"},[e._l(e.caseData.header,(function(i,n){return t("div",{key:n,ref:"background",refInFor:!0,staticClass:"case-header-background",style:e.headerIndex-1==n?"opacity:1;background-image:url("+i.background+")":"background-image:url("+i.background+")"})})),t("div",{ref:"move",staticClass:"case-header"},[t("div",{staticClass:"case-introduction-left",on:{click:function(t){return e.prev()}}}),e._l(e.caseData.header,(function(i,n){return t("div",{key:n,ref:"caseHeaderWrap",refInFor:!0,staticClass:"case-header-ani-wrap"},[t("div",{ref:"caseIntroduction",refInFor:!0,staticClass:"case-introduction",style:e.headerIndex-1==n?"display:block;opacity:1;":""},[t("div",{staticClass:"case-introduction-title"},[e._v(e._s(i.title))]),t("div",{staticClass:"case-introduction-desc"},[e._v(e._s(i.desc))]),t("div",{staticClass:"case-introduction-link",on:{click:function(t){return e.descOpen(n,"headerActive")}}},[e._v("了解创意")])]),t("div",{ref:"headerImage",refInFor:!0,class:[i.widgetCover?"case-introduction-title-img-widget":"case-introduction-title-img",{hb:!i.widget}],style:"".concat(e.headerIndex-1==n?"opacity:1;":"display:none;"," background-image:url(").concat(i.widgetCover?i.widgetCover:i.source,")"),on:{click:function(t){return e.onTap(n)}}})])})),t("div",{staticClass:"case-introduction-right",on:{click:function(t){return e.next()}}})],2),t("div",{staticClass:"mask-shadow"}),t("img",{staticClass:"mask-img",attrs:{src:i(12963)}})],2),t("div",{staticClass:"case-nav-wrap-b"},[t("div",{staticClass:"case-nav-wrap"},[1===e.showNavBtn?t("svg-icon",{staticClass:"case-nav-btn left",attrs:{name:"case_arrow_left"},nativeOn:{click:function(t){return e.goNavEnd("left")}}}):2===e.showNavBtn?t("svg-icon",{staticClass:"case-nav-btn right",attrs:{name:"case_arrow_right"},nativeOn:{click:function(t){return e.goNavEnd("right")}}}):e._e(),t("div",{ref:"caseNav",staticClass:"case-nav"},[t("div",{staticClass:"case-item",class:e.activeNav-1==-1?"case-item_active":"",on:{click:function(t){return e.changeType("0")}}},[e._v("全部")]),e._l(e.caseData.nav,(function(i,n){return t("div",{key:n,staticClass:"case-item",class:e.activeNav-1==n?"case-item_active":"",on:{click:function(t){return e.changeType(n+1)}}},[e._v(" "+e._s(i)+" ")])}))],2),1===e.showNavBtn?t("div",{staticClass:"case-mask left"}):e._e(),t("div",{staticClass:"case-mask right"})],1),t("div",{staticClass:"type"})]),t("div",{staticClass:"case-demo-wrap"},e._l(e.bodyActive,(function(i,n){return t("div",{key:n,staticClass:"case-demo-item",on:{click:function(t){return e.descOpen(n,"bodyActive",t)}}},[i.widget?t("widget-cover-img",{staticClass:"case-demo-pic-widget hb",attrs:{"cover-url":i.source,"widget-url":i.widgetUrl,"default-cover":e.coverToolPics.default_widget_cover_openactive,lazy:""}}):t("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:i.source,expression:"content.source",arg:"background-image"}],staticClass:"case-demo-pic hb"}),t("div",{staticClass:"case-demo-name"},[e._v(e._s(i.title))])],1)})),0),t("div",{class:["case-dialog-wrap",e.dialogOepn?"dialog-show":"animation-wrap"]},[t("div",{staticClass:"case-dialog-bg-mask",on:{click:e.closeDailog}}),t("div",{staticClass:"case-dialog"},[t("div",{staticClass:"case-dialog-content-left"},[t("div",{ref:"dialogPreview",class:[{hb2:0===e.dialogPrviewIndex&&!e.dialogMessage.widget&&e.dialogOepn},e.dialogMessage.widget?"case-dialog-content-pic-widget":"case-dialog-content-pic"]},[e.dialogMessage.activeImg?[e.dialogMessage.widgetCover&&0===e.dialogPrviewIndex?t("img",{staticStyle:{height:"auto"},attrs:{src:e.dialogMessage.widgetCover}}):e.dialogMessage.widget&&0===e.dialogPrviewIndex?t("widget-cover-img",{attrs:{"cover-url":e.dialogMessage.activeImg,"widget-url":e.dialogMessage.widgetUrl}}):t("img",{staticStyle:{height:"auto"},attrs:{src:e.dialogMessage.activeImg}})]:e._e(),e.dialogMessage.activeVideo?t("video",{ref:"storyVideo",attrs:{src:e.dialogMessage.activeVideo,autoplay:"autoplay",muted:""},domProps:{muted:!0}}):e._e()],2),t("div",{staticClass:"case-dialog-content-pic-list"},e._l(e.dialogMessage.media,(function(i,n){return t("div",{key:n,class:n==e.dialogPrviewIndex?"case-dialog-content-pic-item case-dialog-content-pic-item_active":"case-dialog-content-pic-item",on:{click:function(t){return t.stopPropagation(),e.changeDialogPreviewIndex(n)}}},[e.dialogMessage.widget&&0===n?t("widget-cover-img",{attrs:{"cover-url":i,"widget-url":e.dialogMessage.widgetUrl}}):t("img",{attrs:{src:i.replace(".mp4"," preview.png")}})],1)})),0)]),t("div",{staticClass:"case-dialog-content-right"},[t("div",{staticClass:"case-dialog-title-wrap"},[e.dialogMessage.logo?t("div",{staticClass:"case-dialog-logo"},[t("img",{attrs:{src:e.dialogMessage.logo}})]):e._e(),t("div",{staticClass:"case-dialog-title"},[e._v(e._s(e.dialogMessage.title))])]),t("div",{staticClass:"case-dialog-tips"},e._l(e.dialogMessage.type,(function(i){return t("div",{key:i,staticClass:"case-dialog-tip"},[e._v(e._s(i))])})),0),t("div",{staticClass:"case-dialog-desc"},[e._v(e._s(e.dialogMessage.desc))]),t("div",{staticClass:"case-dialog-qr-wrap"},[t("div",{staticClass:"case-dialog-qr-tips"},[e._v("扫码欣赏")]),e.dialogMessage.qr?t("img",{staticClass:"case-dialog-qr",attrs:{src:e.dialogMessage.qr}}):e._e()])]),t("div",{staticClass:"case-dialog-left",on:{click:function(t){return t.stopPropagation(),e.changeDialogPreviewIndex(e.dialogPrviewIndex-1)}}}),t("div",{staticClass:"case-dialog-right",on:{click:function(t){return t.stopPropagation(),e.changeDialogPreviewIndex(e.dialogPrviewIndex+1)}}})]),t("div",{staticClass:"case-dialog-close",on:{click:e.closeDailog}})])])},xm=[],Im=i(30523),km=i.n(Im);km().polyfill();var Tm=s.ZP.extend({name:"Case",components:{WidgetCoverImg:Je.Z},data:function(){return{coverToolPics:Xe.is,positionX:0,positionY:0,dialogOepn:!1,caseData:{},initCaseData:du,baseUrl:Pa.o0,headerBaseUrl:"https://weixinredpacket.wxqcloud.qq.com/redheader2022/",dialogMessage:{},activeNav:0,bodyActive:[],headerActive:[],dialogPrviewIndex:0,headerIndex:0,lock:!1,panIndex:0,headerLength:0,showNavBtn:2}},created:function(){window.document.oncontextmenu=function(){return!1},this.caseData=JSON.parse(JSON.stringify(this.initCaseData)),this.caseData.header=this.caseData.header.reverse(),this.activeNav=0,this.bodyActive=[],this.headerActive=[],this.initData(),(0,Ht.H)("case_pageview")},computed:{},methods:{goNavEnd:function(e){var t=this.$refs["caseNav"];"left"===e&&(t.scroll({left:0,behavior:"smooth"}),this.showNavBtn=2),"right"===e&&(t.scroll({left:9999,behavior:"smooth"}),this.showNavBtn=1)},onTap:function(e){this.descOpen(e,"headerActive",void 0)},changeDialogPreviewIndex:function(e){var t=this,i=t.dialogMessage.media.length;e<0?e=i-1:e==i&&(e=0),t.dialogPrviewIndex=e,t.dialogMessage.media[e].indexOf(".jpg")>0||t.dialogMessage.media[e].indexOf(".png")>0?(t.dialogMessage.activeImg=t.dialogMessage.media[e],t.dialogMessage.activeVideo=""):(t.dialogMessage.activeImg="",t.dialogMessage.activeVideo=t.dialogMessage.media[e])},next:function(){var e=this;if(!this.lock){this.lock=!0;var t=this.headerIndex-1,i=this.headerIndex-2;-1==i&&(t=0,i=this.headerLength-1);var n=this.$refs["headerImage"];n=n[t];var a=this.$refs["caseIntroduction"];a=a[t];var r=this.$refs["background"];r=r[t];var o=this.$refs["caseHeaderWrap"];o=o[t];var s=this.$refs["headerImage"];s=s[i];var c=this.$refs["caseIntroduction"];c=c[i];var l=this.$refs["background"];l=l[i];var u=this.$refs["caseHeaderWrap"];u=u[i],r.style=r.style.cssText+"display:block;opacity: 0;",l.style=l.style.cssText+"opacity: 1;",a.style=a.style.cssText+"opacity: 0;transform:translate3d(100px,0,0)",n.style=n.style.cssText+"opacity: 0;transform:translate3d(100px,0,0)",c.style=c.style.cssText+";transform:translate3d(-100px,0,0);",s.style=s.style.cssText+";transform:translate3d(-100px,0,0);",window.setTimeout((function(){e.headerIndex=0==t?e.headerLength:e.headerIndex-1}),400),window.setTimeout((function(){c.style=c.style.cssText+"display:block;",s.style=s.style.cssText+"display:block;",c.style=c.style.cssText+";transform:translate3d(0,0,0);opacity: 1;",s.style=s.style.cssText+";transform:translate3d(0,0,0);opacity: 1;",a.style=a.style.cssText+"display: none;",n.style=n.style.cssText+"display: none;"}),450),window.setTimeout((function(){e.lock=!1}),500)}},prev:function(){var e=this;if(!this.lock){this.lock=!0;var t=this.headerIndex-1,i=this.headerIndex;-1==t&&(t=this.headerLength-1,i=0),i==this.headerLength&&(i=0);var n=this.$refs["headerImage"];n=n[t];var a=this.$refs["caseIntroduction"];a=a[t];var r=this.$refs["background"];r=r[t];var o=this.$refs["caseHeaderWrap"];o=o[t];var s=this.$refs["headerImage"];s=s[i];var c=this.$refs["caseIntroduction"];c=c[i];var l=this.$refs["background"];l=l[i];var u=this.$refs["caseHeaderWrap"];u=u[i],a.style=a.style.cssText+"opacity: 0;transform:translate3d(-100px,0,0)",r.style=r.style.cssText+"display:block;opacity: 0;",l.style=l.style.cssText+"opacity: 1;",n.style=n.style.cssText+"opacity: 0;transform:translate3d(-100px,0,0)",c.style=c.style.cssText+";transform:translate3d(100px,0,0);",s.style=s.style.cssText+";transform:translate3d(100px,0,0);",window.setTimeout((function(){e.headerIndex==e.headerLength?e.headerIndex=1:e.headerIndex=e.headerIndex+1}),400),window.setTimeout((function(){a.style=a.style.cssText+"display: none;",n.style=n.style.cssText+"display: none;",c.style=c.style.cssText+"display:block;",s.style=s.style.cssText+"display:block;",c.style=c.style.cssText+";transform:translate3d(0,0,0);opacity: 1;",s.style=s.style.cssText+";transform:translate3d(0,0,0);opacity: 1;"}),450),window.setTimeout((function(){e.lock=!1}),500)}},changeType:function(e){var t,i=this;i.activeNav=e,i.bodyActive=null===(t=this.caseData.body[e])||void 0===t?void 0:t.filter((function(e){return e.title&&!e.hidden}))},initData:function(){var e=this,t=this,i=(0,_e.q6)()?"?imageMogr2/format/webp":"";this.caseData.init||(t.headerLength=this.caseData.header.length,this.caseData.header.forEach((function(n,a){if(n["qr"]=e.baseUrl+"/"+n.media[0].substr(0,n.media[0].lastIndexOf("/"))+"/qr.png",n.logo&&(n["logo"]=e.baseUrl+"/"+n.logo),n["background"]=e.headerBaseUrl+(t.headerLength-a)+".jpg"+i,n.media.forEach((function(t,a){n.media[a]=e.baseUrl+t+i})),n["source"]=n.media[0]+i,n.widget){n.widgetUrl="".concat(e.baseUrl,"/").concat(n.widget);var r=n.widget.replace(/\d*\//g,"").replace(/\./,"_whole.");n.widgetCover="".concat(e.headerBaseUrl,"/whole/20230327/v1/").concat(r)+i}}))),t.headerIndex=this.caseData.header.length,t.headerActive=this.caseData.header;var n=[];this.caseData.body&&(this.caseData.body.forEach((function(t,i){t.forEach((function(t,a){e.caseData.init||(t["qr"]=e.baseUrl+(i+1)+"/"+(a+1)+"/qr.png",t.logo&&(t["logo"]=e.baseUrl+(i+1)+"/"+(a+1)+"/"+t.logo),t.media.forEach((function(n,r){t.media[r]=e.baseUrl+(i+1)+"/"+(a+1)+"/"+n})),t["source"]=t.media[0],t.widget&&(t.widgetUrl=e.baseUrl+(i+1)+"/"+(a+1)+"/"+t.widget)),n.push(t)}))})),this.caseData.body.unshift(n),this.bodyActive=null===n||void 0===n?void 0:n.filter((function(e){return e.title&&!e.hidden}))),this.caseData.init=!0},descOpen:function(e,t,i){console.log(i);var n=this;n.dialogPrviewIndex=0,n.dialogMessage=n[t][e],n.dialogMessage.media[0].indexOf(".jpg")>0||n.dialogMessage.media[0].indexOf(".png")>0?(n.dialogMessage.activeImg=n.dialogMessage.media[0],n.dialogMessage.activeVideo=""):(n.dialogMessage.activeImg="",n.dialogMessage.activeVideo=n.dialogMessage.media[0]);var a=this.$refs["dialogPreview"],r=a.getBoundingClientRect(),o={},s=0,c=0;if("headerActive"==t){var l=this.$refs["headerImage"];l=l[this.headerIndex-1],i=l.getBoundingClientRect(),o=l.cloneNode(),o.className="".concat(n.dialogMessage.widget?"case-demo-pic2-widget":"case-demo-pic2 hb2")}else o=i.target.cloneNode(),o.className="case-demo-pic2 hb2",s=i.offsetX,c=i.offsetY;var u=o.style.backgroundImage;document.body.appendChild(o),o.style=o.style+";left:"+(i.x-s)+"px; top:"+(i.y-c)+"px;position:fixed;z-index:999;background-image:"+u,o.className="animation-wrap ".concat(n.dialogMessage.widget?"case-demo-pic2-widget":"case-demo-pic2 hb2"),window.setTimeout((function(){n.dialogMessage.widget?o.style="left:"+r.x+"px; top:"+r.y+"px;width:299px;height:514.518px;z-index:999;position:fixed;background-image:"+u:o.style="border-radius: 12px;left:"+r.x+"px; top:"+r.y+"px;width:300px;height:496.55px;z-index:999;position:fixed;background-image:"+u}),1),window.setTimeout((function(){a.style=a.style.cssText+"opacity:0",n.dialogOepn=!0}),10),window.setTimeout((function(){a.style=a.style.cssText+"opacity:1"}),500),window.setTimeout((function(){document.body.removeChild(o)}),900)},closeDailog:function(){this.dialogMessage={},this.dialogOepn=!1}}}),Sm=Tm,Am=(0,g.Z)(Sm,_m,xm,!1,null,"07730139",null),Dm=Am.exports,Pm=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},Zm=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"contact-us"},[t("div",{staticClass:"main-card"},[t("div",{staticClass:"content"},[t("div",{staticClass:"left-part"},[t("div",{staticClass:"contact-title"},[e._v("联系我们")]),t("div",{staticClass:"contact-p"},[e._v("如果你有任何问题和商务合作，欢迎随时与我们联系！邮件可发送至：wxcover_partner@tencent.com")]),t("div",{staticClass:"contact-p"},[e._v("关注官方公众号，了解平台最新资讯，获知红包封面的审核和使用进度。")])]),t("div",{staticClass:"right-part"},[t("img",{staticClass:"qrcode",attrs:{src:i(23860)}})])])])])}],Um=s.ZP.extend({name:"ContactUs"}),Em=Um,Rm=(0,g.Z)(Em,Pm,Zm,!1,null,"428e839e",null),Mm=Rm.exports,Lm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"rule-doc-wrap"},[t("div",{staticClass:"main-card"},["complain"===e.type?[t("div",{staticClass:"doc-title"},[e._v("投诉指引")]),t("p",{staticClass:"first-p"},[e._v("1. 你的何种权益受到侵犯时，可以使用本流程？")]),t("p",[e._v("如果微信红包封面的内容侵犯你的人身权或知识产权等合法权益，你可通过本流程进行投诉。")]),t("p",{staticClass:"first-p"},[e._v("2. 你被侵权了，应该如何进行侵权投诉？")]),t("p",[e._v("如果你发现微信红包封面存在侵犯你合法权益的内容，你可以通过电子邮箱（wxcover_support@tencent.com）向我们递交你的通知，发起侵权投诉。")]),t("p",[e._v(" 请注意，为保证你及时收到通知和了解进度，我们原则上只接受本系统进行投诉。如你确实因特殊客观原因无法在本系统完成投诉，可例外通过快递信件的方式通知我们，但你可能会因为邮寄送递收转等各环节而增加整体的处理时长，影响你的侵权投诉进程。具体邮寄地址可联系电子邮箱（wxcover_support@tencent.com）索取。 ")]),t("p",{staticClass:"first-p"},[e._v("3. 提交侵权投诉之前应做什么准备？")]),t("p",[e._v(" 侵权投诉是一项极其严肃的、具有法律意义的行为，提交前，你必须确保不得作出虚假声明、提交伪造虚假材料发起侵权投诉，侵害他人权益。任何虚假、恶意的投诉，可能导致我们对你做出处理或要求你承担法律责任。你保证提供的信息和材料是真实、有效和合法的，并保证承担和赔偿腾讯因根据你的通知对相关微信红包封面的处理而给腾讯公司造成的任何损失。 ")]),t("p",[e._v("请注意，只有权益受侵害方及其合法授权代表才能够提交侵权投诉。非权益受侵害方或其合法授权代表提交的投诉，平台无法进行处理。")]),t("p",{staticClass:"first-p"},[e._v("4. 侵权投诉需要提供哪些信息？")]),t("p",[e._v("（1）权利人的联系信息和主体材料（自然人的身份证复印件/企业的营业执照复印件等）；如是授权代表投诉，还需要提供有效的授权委托书；")]),t("p",[e._v("（2）投诉对象、投诉内容和投诉理由；")]),t("p",[e._v("（3）权利人对相关内容的权属证明材料，或权益受侵害的证明材料；")]),t("p",[e._v("（4）如已对被投诉方侵权提起诉讼的，请将相关受理证明一同提交给平台，便于投诉的处理。")]),t("p",[e._v("请注意，为保护各方合法权益，在法律允许的范围内，平台可能会把你提交的信息和材料向被投诉方披露，但会依法进行且不会披露任何个人信息或商业机密。")]),t("p",{staticClass:"first-p"},[e._v("5. 如果你是中国大陆以外的主体，应该如何提交侵权投诉？")]),t("p",[e._v(" 本系统支持权利方为大陆以外主体的侵权投诉，只是为确保涉外主体和材料的真实性，你应当以授权委托方式，委托中国大陆主体代为投诉。具体委托相关材料如下： ")]),t("p",[e._v("（1）港澳台主体")]),t("p",[e._v("① 你委托中国大陆主体代为投诉的委托授权书；")]),t("p",[e._v(" ② 中国大陆境内执业律师对前述授权委托过程进行律师见证的材料，或者当地法律认可的公证机关或公证人出具的公证材料。港澳台地区的公证材料有所区别，具体如下： ")]),t("p",[e._v("i香港特别行政区：证明前述授权委托合法性、真实性的，经中国法律服务(香港)有限公司加章转递的中国委托公证人出具的委托公证材料；")]),t("p",[e._v(" ii澳门特别行政区：证明前述授权委托合法性、真实性的，经澳门政府公证部门或中国司法部委托的公证人公证，并经中国法律服务（澳门）公司加盖核验章的委托公证材料； ")]),t("p",[e._v("iii台湾地区：证明上述授权委托合法性、真实性的，经海峡交流基金会复查确认的台湾公证机关出具的公证材料；")]),t("p",[e._v("③ 任何涉外的材料，均需提交中文翻译文本以及与原件确认无误的声明。")]),t("p",[e._v("（2）其他主体")]),t("p",[e._v("① 你委托中国大陆主体代为投诉的委托授权书；")]),t("p",[e._v("② 中国大陆境内执业律师对前述授权委托过程进行律师见证的材料，或者权利人所在国公证机关证明前述授权委托合法性、真实性的公证材料；")]),t("p",[e._v("③ 该公证材料经中华人民共和国驻该国使领馆认证的材料；")]),t("p",[e._v("④ 任何涉外的材料，均需提交中文翻译文本以及与原件确认无误的声明。")]),t("p",{staticClass:"first-p"},[e._v("6. 提交侵权投诉后，你还能做什么？")]),t("p",[e._v("提交侵权投诉后，平台会在7个工作日内处理完毕。你可以留意回复邮件。")]),t("p",{staticClass:"first-p"},[e._v("7. 提交侵权投诉后，平台可能会作出什么处理？")]),t("p",[e._v("通知被投诉方，被投诉方有机会承认侵权，由系统清除侵权内容；")]),t("p",[e._v("经平台核实存在侵权的，清除侵权内容；")]),t("p",[e._v("经平台核实存在严重侵权的，可能会封禁账号相关功能、或注销账号处罚。")]),t("p",{staticClass:"first-p"},[e._v("8. 你投诉后，平台冻结了侵权内容，后续又恢复了，是什么原因？")]),t("p",[e._v("若被投诉方不认可你的投诉和平台的处理结果，其有权提交申诉。平台根据申诉通知和材料，核实判断是否解除冻结状态、恢复内容。")]),t("p",[e._v("如你对内容恢复有异议，建议你另行通过和对方协商、行政投诉、诉讼等方式解决问题。")])]:e._e(),"register"===e.type?[t("div",{staticClass:"doc-title"},[e._v("注册须知")]),t("p",{staticClass:"first-p"},[e._v(" 一、现阶段本功能仅向中国大陆境内的、通过微信公众平台成功开通并完成认证的公众号用户，或成功开通且粉丝数达100个的视频号/公众号个人用户开放。 ")]),t("p",[e._v("当你使用微信公众账号、微信视频号账号使用本功能时，腾讯将使用你在微信公众平台、微信视频号的相关信息，并以此作为你在本功能平台的身份信息。")]),t("p",[e._v("如果你尚未通过微信公众平台、微信视频号达到前述条件的，需在相应条件完成后方可使用本功能。")]),t("p",{staticClass:"first-p"},[e._v("二、现阶段本功能暂不对宗教、烟草、医疗及药品相关的主体开放。")]),t("p",{staticClass:"first-p"},[e._v(" 三、本功能是一项付费、附条件、附有效期限的功能。你仅有在支付费用后，方可在指定期限（一年）内向微信最终用户发放你的微信红包封面，微信最终用户可在指定期限（六个月）内使用你发放的微信红包封面。但微信最终用户使用其获得的红包封面是免费的，你不得向微信最终用户收取任何费用。 ")]),t("p",[e._v(" 本功能按你选择的微信红包封面的可发放个数收费（一个微信个人账号成功领取一次特定微信红包封面的，即计为发放1个，依此类推），计费标准为人民币1元/个，可选择的最低可发放个数为100个。 ")]),e._m(0),t("p",{staticClass:"first-p"},[e._v(" 五、当你的微信红包封面因为违法或侵权等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此已支付的费用将无法退款。 ")])]:e._e(),"pay"===e.type?[t("div",{staticClass:"doc-title"},[e._v("付款须知")]),t("p",{staticClass:"first-p"},[e._v("在进行支付前，请仔细阅读并详细了解以下信息。一旦支付，即视为你已同意如下内容：")]),t("p",{staticClass:"first-p"},[e._v("1. 费用计算")]),t("p",[e._v(" 本功能按照你选择的微信红包封面的可发放个数收费（“发放个数”等于“可领取使用的微信账号数“，一款红包封面同一个微信个人账号只可领取一次），计费标准为人民币1元/个。 ")]),t("p",{staticClass:"first-p"},[e._v("2. 免责声明")]),t("p",{staticClass:"strong"},[e._v(" 腾讯在你的微信红包封面上线前所进行的审核，不得视为腾讯对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。一旦腾讯主动发现或经投诉发现你的微信红包封面存在违反法律规定或《“微信红包封面”定制功能使用条款》《“微信红包封面”设计规范》《“微信红包封面”定制功能素材规范》的情形，你将被处以相应处罚。 ")]),t("p",{staticClass:"first-p"},[e._v("3. 分发期限与使用期限")]),t("p",{staticClass:"strong"},[e._v(" 你所定制的微信红包封面应在腾讯指定的分发期限内（支付成功之日起六个月内）向最终用户进行分发，超出该期限的，无论是否达到分发个数上限，均无法再向任何最终用户进行分发。 ")]),t("p",{staticClass:"strong"},[e._v(" 每一位最终用户领取你分发的微信红包封面后，仅能在腾讯指定的使用期限内（领取成功之日起三个月内）进行使用。使用期限届满后，最终用户不得继续使用该微信红包封面。 ")]),t("p",{staticClass:"first-p"},[e._v("4. 退款")]),t("p",{staticClass:"strong"},[e._v(" 当你的微信红包封面因为违法、侵权或其他违反《“微信红包封面”定制功能使用条款》等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此支付的费用将无法退款。 ")]),t("p",{staticClass:"strong"},[e._v(" 仅当你的微信红包封面因侵权被下架时，存在尚处于分发期限内、且未被任何微信个人账号成功领取的红包封面时，方可根据剩余个数，按1元/个的标准申请退款。 ")])]:e._e(),"time"===e.type?[t("div",{staticClass:"doc-title"},[e._v("付款须知")]),t("p",{staticClass:"first-p"},[e._v(" 特别说明：你正在参加微信红包封面开放平台向特定受邀主体开放的“按包时购买”限时活动。参加活动的过程中你应该遵守《“微信红包封面”定制功能使用条款》及相关交互页面上你选择/同意的条款之约定，如该等约定与本《付款须知》不一致的，则以本《付款须知》之约定为准。 ")]),t("p",{staticClass:"first-p"},[e._v("在进行支付前，请仔细阅读并详细了解以下信息。一旦支付，即视为你已同意如下内容：")]),t("p",{staticClass:"first-p"},[e._v("1. 费用计算")]),t("p",[e._v(" 本功能按照你选择的微信红包封面的可发放时长收费，计费标准为人民币100,000元/小时。单笔订单可选择的最少购买时长为1小时，最长购买时长为24小时（每小时的可发放红包数量上限为50,000个；如连续购买了若干小时的，则该订单下的可发放红包数量上限合并计算，例如连续购买了N个小时的，则该订单下的可发送红包数量上限为50,000*N）。 ")]),t("p",{staticClass:"first-p"},[e._v("2. 免责声明")]),t("p",[e._v(" 腾讯在你的微信红包封面上线前所进行的审核，不得视为腾讯对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。一旦腾讯主动发现或经投诉发现你的微信红包封面存在违反法律规定或《“微信红包封面”定制功能使用条款》《“微信红包封面”设计规范》《“微信红包封面”定制功能素材规范》的情形，你将被处以相应处罚。 ")]),t("p",{staticClass:"first-p"},[e._v("3. 分发期限与使用期限")]),t("p",{staticClass:"strong"},[e._v(" 你所定制的微信红包封面应在腾讯指定的分发期限内（支付成功之日起六个月内）操作生效并向最终用户进行分发，超出该期限的，无论是否已经分发、是否达到分发个数上限，均无法再向任何最终用户进行分发。 ")]),t("p",{staticClass:"strong"},[e._v(" 每一位最终用户领取你分发的微信红包封面后，仅能在腾讯指定的使用期限内（领取成功之日起三个月内）进行使用。使用期限届满后，最终用户不得继续使用该微信红包封面。 ")]),t("p",{staticClass:"first-p"},[e._v("4. 退款")]),t("p",{staticClass:"strong"},[e._v("在此你应知悉，本活动为针对特定受邀主体开放的限时活动，你应在充分了解本功能后选择是否购买，一旦购买成功即不支持退款。")]),t("p",{staticClass:"strong"},[e._v(" 特别提醒：当你的微信红包封面因为违法、侵权或其他违反《“微信红包封面”定制功能使用条款》等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此支付的费用同样无法退款。 ")])]:"special"===e.type?[t("div",{staticClass:"doc-title"},[e._v("“微信红包封面”定制功能使用条款")]),t("use-term")]:e._e(),"appeal"===e.type?[t("div",{staticClass:"doc-title"},[e._v("申诉指引")]),t("p",{staticStyle:{"margin-top":"20px"}},[e._v(" 若你的微信红包封面被权利人因侵犯知识产权（版权/著作权、商标权或专利权等）或人身权（姓名权、肖像权等）或其他理由投诉，你有权在五个工作日内通过邮件方式向腾讯进行申诉。 ")]),t("p",{staticClass:"first-p"},[e._v("1. 申诉邮件应包括但不限于以下内容：")]),t("p",[e._v("1.1邮件主题：【微信红包封面侵权申诉】")]),t("p",[e._v("1.2 邮件内容：")]),t("p",[e._v("（1）被投诉对象：微信红包封面的简称、图案等")]),t("p",[e._v("（2）被投诉内容：被投诉侵犯何种权利")]),t("p",[e._v("（3）申诉方主体材料：")]),t("p",[e._v("I. 申诉方的名称、联系电话、邮箱、地址、营业执照（单位）等材料；")]),t("p",[e._v(" II. 申诉方如委托他人代理申诉的，还需提供授权委托书，以及代理人姓名（名称）、联系方式、地址、营业执照（单位）/身份证（个人）、授权委托书等能证明代理人主体资格的材料。 ")]),t("p",[e._v("（4）不构成侵权的初步证明材料")]),t("p",[e._v(" I. 申诉方拥有权利的权属证明材料：包括但不限于相关有权机构颁发的版权证书、商标权证书、专利权证书、作品首次公开发表或发行日期证明材料、创作手稿、经权威机构签发的作品创作时间戳、作品备案证书等能证明申诉方拥有相关权利的有效权属证明； ")]),t("p",[e._v(" II. 申诉方提供的服务不构成侵权的证明材料与申诉理由：包括但不限于相关发布内容或使用行为不构成对权利人版权、商标权、专利权、姓名权、隐私权、名誉权、商誉权或者公平竞争权等权利侵权的有效证明材料或理由等。 ")]),t("p",[e._v("注意事项：身份证（须提供正反面）、营业执照、授权委托书及侵权证明材料等只需提供电子版（高清数码照片或扫描件），请将其添加至附件。")]),t("p",{staticClass:"first-p"},[e._v("2. 联系邮箱：wxcover_support @tencent.com")]),t("p",{staticClass:"first-p"},[e._v("3. 腾讯反馈：收到你按照本指引发起的申诉后，腾讯会尽快按照相关法律法规的规定进行处理。")]),t("p",{staticClass:"first-p"},[e._v(" 4. 请注意，如你放弃申诉，或腾讯对你的申诉进行复核后认为申诉理由不成立或证据不充分的，你的微信红包封面将被下架，届时已经领取该封面的最终用户将无法查阅、使用该封面，且你就此支付的费用将无法退款。 ")])]:e._e(),"proof_instruction"===e.type?[t("div",{staticClass:"doc-title"},[e._v("证明材料指引")]),t("p",{staticStyle:{"margin-top":"20px"}},[e._v(" 为维护微信红包封面开放平台的内容生态，红包封面所使用的品牌logo、封面简称、封面样式、封面故事需提供相关材料证明权利归属。如需合法使用他人享有权利的内容，应取得权利人的合法、有效授权，并提供有效的授权证明材料。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("如使用注册商标的，需上传《商标注册证》的扫描件及商标使用授权书（在授权情况下）。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("如提交的作品涉及肖像，请按照以下要求提供材料：")]),e._m(1),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("如提交的作品涉及版权，请按照以下要求提供材料：")]),e._m(2),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 封面样式和封面故事中，如包含美术作品的，请上传《作品登记证书》或《著作权登记证书》的扫描件；如没有该等证书的，请提供能够证明拥有作品著作权的其他材料，包括但不限于该作品的psd格式文件、人民法院确认该作品权属情况的生效法律文书、能够证明作品权利人情况的发表链接等。 ")])]:e._e(),"material_standard"===e.type?[t("div",{staticClass:"doc-title"},[e._v("“微信红包封面”素材规范")]),t("p",{staticStyle:{"margin-top":"20px"}},[e._v(" 1. 你应尊重他人的商誉/姓名/名誉/肖像/隐私等合法权益。如需合法使用他人享有权利的内容，你应取得权利人的合法、有效授权，并向腾讯提供有效的授权证明材料。在你定制的微信红包封面中不得存在如下内容： ")]),t("p",[e._v("（1）擅自使用他人已经登记注册的企业名称，侵犯他人企业名称专用权或企业商誉的内容；")]),t("p",[e._v(" （2）和第三方企业、品牌或其产品、服务进行对比，或有意诋毁第三方企业、品牌的形象及声誉，或贬低第三方提供的商品或服务的内容，包括直接或间接的业绩对比图表、放大自身品牌形象贬损他人的内容等； ")]),t("p",[e._v("（3）擅自使用他人姓名、肖像，侵犯他人姓名权、名誉权、肖像权等合法权利的内容；")]),t("p",[e._v("（4）未经授权，使用包含他人个人隐私的资料，侵犯他人隐私权等合法权益的内容。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 2. 你应尊重他人的知识产权等合法权益。如需使用他人享有知识产权的内容，你应取得权利人的合法、有效授权，并向腾讯提供有效的授权证明材料。在你定制的微信红包封面中不得存在如下内容： ")]),t("p",[e._v("（1）未经授权，擅自使用他人享有著作权的内容（包括但不限于美术作品、文字作品、摄影作品等）；")]),t("p",[e._v("（2）未经授权，擅自使用他人享有商标权的内容；")]),t("p",[e._v("（3）未经授权，擅自使用他人享有专利权的内容；")]),t("p",[e._v("（4）未经授权，擅自使用他人享有商业秘密的内容；")]),t("p",[e._v(" （5）无论是否存在侵权问题，为维护微信红包封面开放平台的内容生态，你的微信红包封面中不得存在与已发布的微信红包封面雷同的内容，或权利归属情况不明的内容（如未获得著作人合法授权的二次创作、同人作品等）。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 3. 你应确保定制的微信红包封面含义清晰、指向准确，其中不得出现除你的名称、价值观（其中不得包含直接或间接表明产品或服务或其特性的文字）、你的自有商品及服务商标、必要的祝福语以外的文字。特别是在你定制的微信红包封面中不得对用户产生以下不适宜的混淆、误认、联想或影响。如： ")]),t("p",[e._v("（1）恶意混淆腾讯官方的角色与定位；")]),t("p",[e._v("（2）恶意混淆你与相关政府机构、事业单位、社会团体等组织机构之关系的（无论该等组织是否真实存在）。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 4. 你应确保定制的微信红包封面格调健康，不得通过定制红包封面传播淫秽、色情或低俗信息，包括但不限于暴露图片、挑逗内容，或包含非法色情交易的信息，或描绘对人或动物施加暴力或虐待行为的信息等；不得通过微信红包封面传播赌博或宣扬赌博的信息，包括但不限于赌博场所、赌博工具信息和介绍；不得通过微信红包封面传播有害青少年身心健康发展的信息，包括但不限于鼓励青少年消费烟酒等。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 5. 你理解并同意，腾讯提供的微信红包封面不是广告位，你定制的微信红包封面中不得存在过度营销、展示或传播骚扰信息或垃圾信息等行为，不得放置二维码、联系方式、小程序码、条形码、口令等功能性内容，对用户造成骚扰，或对用户的网络安全、个人信息、人身与财产安全等构成威胁。也不得用于营销或广告用途或出现虚假夸大或其他违反《广告法》等相关法律法规的内容。也不得含有虚假或引人误解的内容，包括但不限于传播、推广假冒伪劣产品等。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 6. 微信红包封面的内容不得攻击或伤害各地的淳朴风俗、各民族传统习俗、各地区的生活习惯等，你的微信红包封面不得存在违反社会善良风俗或伤害各地淳朴风俗、伤害各民族感情的内容。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 7. 如果你定制的微信红包封面中存在外文、少数民族语言文字内容的，你应提供完整、准确的中文翻译供腾讯公司审核；如果你定制的微信红包封面中存在任何宗教、民族、政治性质的图腾、人物、神兽、符号、法器等元素的，你应提供该等元素的详细说明供腾讯公司审核。此外，对属于该等情形的微信红包封面，审核期限将延长到一个月。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("8. 未经国家主管部门批准，微信红包封面中不得使用中国地图，或含有中国地图的一部或全部的其他地图或素材。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("9. 定制微信红包封面要符合国家法律法规的规定，你定制的微信红包封面中不得存在含有如下信息的内容：")]),t("p",[e._v("（1）反对宪法确定的基本原则的；")]),t("p",[e._v("（2）危害国家统一、主权和领土完整的；")]),t("p",[e._v("（3）泄露国家秘密、危害国家安全或者损害国家荣誉和利益的；")]),t("p",[e._v("（4）煽动民族仇恨、民族歧视，破坏民族团结，或者侵害民族风俗、习惯的；")]),t("p",[e._v("（5）宣扬邪教、迷信的，或破坏国家宗教政策的；")]),t("p",[e._v("（6）散布谣言，扰乱社会秩序，破坏社会稳定的；")]),t("p",[e._v("（7）宣扬淫秽、色情、赌博、暴力或者教唆犯罪的；")]),t("p",[e._v("（8）侮辱或者诽谤他人，侵害他人合法权益的；")]),t("p",[e._v("（9）危害社会公德或者民族优秀文化传统的；")]),t("p",[e._v("（10）存在其他不利于社会良性发展的内容的，包括但不限于低俗粗鄙、宣扬酒驾、过度饮酒、滥用药物、吸食毒品、自杀自残等；")]),t("p",[e._v("（11）有法律、行政法规和国家规定禁止的其他内容。")]),t("p",[e._v(" 10. 保护未成年人的身心健康，保障未成年人的合法权益，促进未成年人在品德、智力、体质等方面全面发展，培养有理想、有道德、有文化、有纪律的社会主义建设者和接班人： ")]),t("p",[e._v("（1）不适应为未成年人的行为（例：吸烟、喝酒、开车、同居、结婚等）或出入不适宜未成年人活动的场所（例：夜场、酒吧等）或涉及低俗的画面不能出现；")]),t("p",[e._v("（2）未成年人浓妆艳抹（成人化）的画面不能出现；")]),t("p",[e._v("（3）面容装扮疑似未成年人模特、主播等低俗类的画面不能出现；")]),t("p",[e._v("（4）“少男、少女攀比怀孕年龄低的画面不能出现；")]),t("p",[e._v("（5）以未成年人为“道具”，做出严重危险行为的画面不能出现。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("11. 除党政账号和事业机关账号外，其余均不能使用国事/党政活动、军事活动/政策、反腐倡廉、主旋律宣传推广等图片作为红包封面。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("12. 不得使用遭全网封杀的人物肖像做红包封面。")])]:e._e(),"emotion_rain_org"===e.type?[t("EmotionRainAgreement",{attrs:{principalType:0}})]:e._e(),"emotion_rain_personal"===e.type?[t("EmotionRainAgreement",{attrs:{principalType:1}})]:e._e()],2)])},Fm=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[t("span",[e._v("四、定制微信红包封面的，应遵守")]),t("a",[e._v("《“微信红包封面”定制功能使用条款》")]),t("a",[e._v("《“微信红包封面”设计规范》")]),t("a",[e._v("《“微信红包封面”素材规范》")]),t("span",[e._v(" 等。腾讯将对此进行一定的形式审核，但腾讯的该等审核不得视为对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。 ")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{staticStyle:{"margin-top":"10px"}},[t("li",{staticStyle:{"margin-top":"10px"}},[e._v("图中人物的身份证明，如身份证正反面或护照等扫描件或照片。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v("肖像权授权书。其中授权人为图中涉及肖像的人，被授权人为微信红包封面开放平台注册者。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{staticStyle:{"margin-top":"10px"}},[t("li",{staticStyle:{"margin-top":"10px"}},[e._v("作品的版权证明，如著作权登记证、作品登记证。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v("版权授权书。其中授权人为版权所有者，被授权人是微信红包封面开放平台注册者。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v("版权所有者主体证明，企业请提交合法营业执照电子版扫描件或照片，个人请提交身份证正反面或护照等身份证明扫描件或照片。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v(" 如没有该等证书的，请提供能够证明拥有作品著作权的其他材料，包括但不限于该作品的psd格式文件、人民法院确认该作品权属情况的生效法律文书、能够证明作品权利人情况的发表链接等。 ")])])}],Nm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[1===e.principalType?[t("p",{staticClass:"doc-title"},[e._v("微信红包封面开放平台微信表情雨活动规则")]),e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5)]:[t("p",{staticClass:"doc-title"},[e._v("微信红包封面开放平台微信表情雨活动规则")]),e._m(6),e._m(7),e._m(8),e._m(9),e._m(10),e._m(11)]],2)},Om=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[t("strong",[e._v("1. 本活动为限时开放活动，仅向部分定制方开放。腾讯有权根据活动实际情况调整活动开放时间、结束时间，以及可参与本活动的定制方范围。活动期间，获得参与资格的定制方将在微信红包封面开放平台的相关页面看到活动入口，并有权在仔细阅读本活动规则后，自行决定是否参加本活动。如你不同意本活动规则或"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("中的约定内容的，请不要参加本活动。你参加本活动的行为，将被视为已同意本规则全部内容。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 2. 个人定制方参与本活动的，腾讯将在你付费购买的红包封面（下亦简称“普通封面”）之外，额外免费生成一定数量的同款红包封面（下亦简称“活动封面”）。"),t("strong",[e._v("活动封面由腾讯通过微信客户端的表情彩蛋雨活动向微信用户投放，被投放到的微信用户有权选择领取或不领取该活动封面。")]),e._v("微信用户成功领取的普通封面与对应的同款活动封面之内容、使用规则完全一致。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 3. 你应保证对你的普通封面之素材拥有完整的知识产权、肖像权等全部必要的权利，或已获得权利方完整有效的合法授权，从而可以参与本活动。同时"),t("strong",[e._v("你授权腾讯为你生成本活动规则第2款所述之活动封面，并由腾讯在本活动中向微信用户投放。如腾讯为你生成的活动封面在活动期间未被用户全部领取的，剩余数量将在活动结束后清零，你同意腾讯无须因此对你进行任何补偿。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 4. "),t("strong",[e._v("如你的普通封面因违反法律法规之规定、"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("等协议之约定而被冻结、下架的，相应的活动封面也会同时被冻结、下架。")]),e._v("你应自行解决并承担由此引起的所有法律责任，因此给腾讯、其他用户或第三方造成损害的，你还应当依法予以赔偿。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 5. "),t("strong",[e._v("在此你明确同意，微信客户端的表情彩蛋雨活动，以及作为其组成部分之一的本活动（“微信红包封面开放平台表情彩蛋雨活动”）均由腾讯独立制定活动规则并执行（包括但不限于开始时间、结束时间，活动的展示效果，以及活动触发词的选择、修改与停用等），腾讯无须因本活动向你支付任何费用，腾讯也无法向你承诺本活动的执行效果；")]),e._v("但本活动结束后，腾讯将在微信红包封面开放平台相关页面，向你披露本活动中，与你的普通封面对应的活动封面被微信用户成功领取的总数量。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 6. 本活动规则未明确约定的内容，以"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("之约定为准。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[t("strong",[e._v("1. 本活动为限时开放活动，仅向部分定制方开放。腾讯有权根据活动实际情况调整活动开放时间、结束时间，以及可参与本活动的定制方范围。活动期间，获得参与资格的定制方将在微信红包封面开放平台的相关页面看到活动入口，并有权在仔细阅读本活动规则后，自行决定是否参加本活动。如你不同意本活动规则或"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("中的约定内容的，请不要参加本活动。你参加本活动的行为，将被视为已同意本规则全部内容。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 2. 企业定制方参与本活动的，有权在自行发放的红包封面（下亦简称“普通封面”）之外，以数量不超过活动允许之上限的封面参与本活动（该部分封面下亦简称“活动封面”）。"),t("strong",[e._v("活动封面由腾讯通过微信客户端的表情彩蛋雨活动向微信用户投放，被投放到的微信用户有权选择领取或不领取该活动封面。")]),e._v("微信用户成功领取的普通封面与对应的活动封面之内容、使用规则完全一致。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 3. 你应保证对你的微信红包封面之素材拥有完整的知识产权、肖像权等全部必要的权利，或已获得权利方完整有效的合法授权，从而可以参与本活动。同时"),t("strong",[e._v("你授权腾讯在本活动中向微信用户投放本活动规则第2条所述之活动封面。如你的活动封面在活动期间未被用户全部领取的（含已向微信用户投放但未被成功领取的情况），剩余数量将在活动结束后退回给你，你可以再次向微信用户进行发送（本活动的时间，计入相应的微信红包封面的“发放时间”而不予以扣除）。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 4. "),t("strong",[e._v("如你的微信红包封面因违反法律法规之规定、"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("等协议之约定而被冻结、下架的，相应的活动封面也会同时被冻结、下架。")]),e._v("你应自行解决并承担由此引起的所有法律责任，因此给腾讯、其他用户或第三方造成损害的，你还应当依法予以赔偿。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 5. "),t("strong",[e._v("在此你明确同意，微信客户端的表情彩蛋雨活动，以及作为其组成部分之一的本活动（“微信红包封面开放平台表情彩蛋雨活动”）均由腾讯独立制定活动规则并执行（包括但不限于开始时间、结束时间，活动的展示效果，以及活动触发词的选择、修改与停用等），腾讯无须因本活动向你支付任何费用，腾讯也无法向你承诺本活动的执行效果；")]),e._v("但本活动结束后，腾讯将在微信红包封面开放平台相关页面，向你披露本活动中，你的活动封面被微信用户成功领取的总数量。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 6. 本活动规则未明确约定的内容，以"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("之约定为准。 ")])}],Bm=s.ZP.extend({props:{principalType:{type:Number}}}),qm=Bm,Qm=(0,g.Z)(qm,Nm,Om,!1,null,"295c4196",null),jm=Qm.exports,Hm=s.ZP.extend({name:"RuleDoc",data:function(){return{type:""}},created:function(){var e=this;e.type=this.$route.query.type},components:{EmotionRainAgreement:jm,UseTerm:W.Z}}),Gm=Hm,Wm=(0,g.Z)(Gm,Lm,Fm,!1,null,"8294248a",null),zm=Wm.exports,Vm=function(){return i.e(971).then(i.bind(i,53701))};s.ZP.use(c.ZP);var Jm=[{path:"",component:_u,name:"index"},{path:"/login",component:X,name:"login"},{path:"/signup",component:Au,name:"signUp",children:[{path:"sign_should_know",component:Kv,name:"signShouldKnow"},{path:"sign_law",component:Hv,name:"signLaw"},{path:"choose_type",component:$p,name:"ChooseType"},{path:"enterprise_qr",component:bv,name:"EnterpriseQR"},{path:"person_qr",component:Nv,name:"PersonQR"},{path:"biz_person_qr",component:function(){return i.e(525).then(i.bind(i,59525))},name:"BizPersonQR"},{path:"biz_person_complete_info",component:function(){return i.e(996).then(i.bind(i,39996))},name:"BizPersonCompleteInfo"},{path:"enterprise_mail",component:rv,name:"EnterpriseMail"},{path:"person_mail",component:kv,name:"PersonMail"},{path:"choose_type",component:$p,name:"ChooseType"},{path:"choose_person_type",component:function(){return i.e(55).then(i.bind(i,64055))},name:"ChoosePersonType"},{path:"*",component:Kv,name:"signDefault"}]},{path:"/signsuccess",component:im,name:"signSuccess"},{path:"/covers",component:or,name:"covers",meta:{showSideBar:!0}},{path:"/exchange",component:Cm,name:"exchange",meta:{showSideBar:!0}},{path:"/administrator",component:dm,name:"administrator",meta:{showSideBar:!0}},{path:"/make",component:cl,name:"make",meta:{showSideBar:!0}},{path:"/detail",component:Ga,name:"detail",meta:{showSideBar:!0}},{path:"/statistics",component:su,name:"statistics",meta:{showSideBar:!0}},{path:"/pay",component:Nl,name:"pay",meta:{showSideBar:!0}},{path:"/pay_type",component:ue,name:"payType"},{path:"/audit",component:ye,name:"audit"},{path:"/notice",component:Wu,name:"notice"},{path:"/notice_detail",component:Bu,name:"noticeDetail"},{path:"/orders",component:Gp,name:"orders",meta:{showSideBar:!0}},{path:"/order",component:Np,name:"order",meta:{showSideBar:!0}},{path:"/receiveobjects",component:function(){return i.e(981).then(i.bind(i,40981))},name:"receiveobjects",meta:{showSideBar:!0}},{path:"/invoice_manage",component:Vd,name:"invoiceManage",meta:{showSideBar:!0}},{path:"/invoice",component:wd,name:"invoice"},{path:"/invoice_make",component:Rd,name:"invoiceMake"},{path:"/rule_doc",component:zm,name:"ruleDoc"},{path:"/contact_us",component:Mm,name:"contactUs"},{path:"/case",component:Dm,name:"case"},{path:"/invoice_success",component:rd,name:"invoiceSuccess",meta:{showSideBar:!0}},{path:"/submit_success",component:L,name:"submitSuccess",meta:{showSideBar:!0}},{path:"/pay_success",component:P,name:"paySuccess",meta:{showSideBar:!0}},{path:"/revoke_success",component:Xu,name:"revokeSuccess",meta:{showSideBar:!0}},{path:"/refund_success",component:ae,name:"refundSuccess",meta:{showSideBar:!0}},{path:"/doc",component:Vm,name:"doc"},{path:"*",component:or,name:"default"}],Km=new c.ZP({routes:Jm,scrollBehavior:function(e){if("detail"!==e.name)return{x:0,y:0}}}),Ym=0,Xm=!1;Km.beforeEach(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,i,n){var a,o,s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!(!m.U6.user||!m.U6.user.authorId),a){e.next=6;break}return clearInterval(Ym),Xm=!1,e.next=6,m.U6.getUserInfo();case 6:if(a=!(!m.U6.user||!m.U6.user.authorId),o=t.path.indexOf("signup")>-1,!a){e.next=15;break}if(0==Xm&&(Xm=!0,Ym=window.setInterval((function(){(new v.ZP).heartBeat()}),5e3)),"login"!==t.name&&!o&&"index"!==t.name){e.next=12;break}return e.abrupt("return",n({name:"covers"}));case 12:return e.abrupt("return",n());case 15:if(clearInterval(Ym),Xm=!1,s=["index","login","questionAnswer","ruleDoc","notice","noticeDetail","contactUs","doc","case","adminConfirm","signSuccess"],!s.find((function(e){return e===t.name}))&&!o){e.next=20;break}return e.abrupt("return",n());case 20:return e.abrupt("return",n({name:"login"}));case 21:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}());var $m=Km},49199:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n,a=i(80543),r=i(81448),o=i(70280),s=i(66298),c=(i(26699),i(38862),i(32023),i(74916),i(4723),i(92222),i(41539),i(78783),i(33948),i(60285),i(41637),i(20144)),l=i(9669),u=i.n(l),d=i(16581),p=console,v=p,m=i(57582),f=i(52117),h=function(e,t){c.ZP.prototype.$tipsErr(e),window.setTimeout((function(){c.ZP.prototype.$tipsHide()}),3e3),t?v.error(t):v.error(e)};(function(e){e[e["sessionTimeOut"]=-13]="sessionTimeOut"})(n||(n={}));var g=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,[{key:"request",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,i){var r,o,s,c;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.method||(t.method="POST"),r=["/cgi-bin/mmcover-bin/coverheartbeat","/cgi-bin/mmcover-bin/covercheckloginqrcode","/cgi-bin/mmcover-bin/coverchecksignupqrcode","/cgi-bin/mmcover-bin/covercheckpersonsignupqrcode","/cgi-bin/mmcover-bin/covercheckemotionjumpinfoqrcode","/cgi-bin/mmcover-bin/covercheckbizpersonsignupqrcode","/cgi-bin/mmcover-bin/covercheckemotionpersonsignupqrcode"],e.prev=2,e.next=5,u().request(t);case 5:if(o=e.sent,s=(0,d._)(o.data),s.baseResponse.ret!==n.sessionTimeOut||i){e.next=11;break}return m.U6.clearUser(),window.location.href="https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/login?relogin=1",e.abrupt("return");case 11:return 0!==s.baseResponse.ret&&s.baseResponse.ret!==n.sessionTimeOut&&t.url&&!r.includes(t.url)&&(0,f.H)("request_error_".concat(t.url),"ret: ".concat(s.baseResponse.ret)),e.abrupt("return",s);case 15:if(e.prev=15,e.t0=e["catch"](2),!u().isCancel(e.t0)){e.next=19;break}return e.abrupt("return");case 19:return h("网络错误",e.t0),null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.config)&&void 0!==c&&c.url&&!r.includes(e.t0.config.url)&&(0,f.H)("request_error_trycatch",JSON.stringify(e.t0)),e.abrupt("return");case 22:case"end":return e.stop()}}),e,null,[[2,15]])})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"download",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,i,n){var r,o,s,c,l;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.method||(t.method="POST"),e.prev=1,e.next=4,u().request(t);case 4:return r=e.sent,o=n||r.headers["content-disposition"].match(/\.(\w+)"$/)[1],s="".concat(i,".").concat(o),c="csv"===o?new Blob(["\ufeff",r.data],{type:"text/plain;charset=GBK"}):new Blob([r.data]),console.log(s,i,n),"download"in document.createElement("a")?(l=document.createElement("a"),l.download=s,l.style.display="none",l.href=URL.createObjectURL(c),"csv"===o&&(l.charset="GBK"),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)):navigator.msSaveBlob(c,s),e.abrupt("return",r.data);case 13:return e.prev=13,e.t0=e["catch"](1),h("网络错误",e.t0),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));function t(t,i,n){return e.apply(this,arguments)}return t}()}]),e}()},34225:function(e,t,i){"use strict";i.d(t,{DS:function(){return r},P1:function(){return a},Z3:function(){return n},ZP:function(){return S},a1:function(){return s},mo:function(){return T},qh:function(){return c},rv:function(){return o},yQ:function(){return A}});var n,a,r,o,s,c,l=i(63442),u=i(80543),d=i(81448),p=i(70280),v=i(66298),m=i(11651),f=i(76559),h=(i(92222),i(74916),i(15306),i(50078)),g=i(40628),y=i(16581),b=i(9669),w=i.n(b),C=i(27484),_=i.n(C),x=i(49199),I=w().CancelToken,k=I.source(),T=function(){k.cancel()};(function(e){e[e["None"]=0]="None",e[e["Save"]=1]="Save",e[e["Submit"]=2]="Submit",e[e["Recall"]=3]="Recall"})(n||(n={})),function(e){e[e["None"]=0]="None",e[e["Pending"]=1]="Pending",e[e["Fail"]=2]="Fail",e[e["Success"]=3]="Success"}(a||(a={})),function(e){e[e["weixin"]=1]="weixin",e[e["finder"]=2]="finder"}(r||(r={})),function(e){e[e["NORMAL_PACKET"]=1]="NORMAL_PACKET",e[e["WIDGET_PACKET"]=2]="WIDGET_PACKET",e[e["DIRECT_TO_PAG"]=3]="DIRECT_TO_PAG",e[e["ATMOSPHERE_PAG_BUBBLE"]=4]="ATMOSPHERE_PAG_BUBBLE",e[e["ATMOSPHERE_PAG_NORMAL"]=5]="ATMOSPHERE_PAG_NORMAL",e[e["ATMOSPHERE_PAG_DETAIL"]=6]="ATMOSPHERE_PAG_DETAIL"}(o||(o={})),function(e){e[e["FIRST_UPLOAD"]=1]="FIRST_UPLOAD",e[e["REUPLOAD"]=2]="REUPLOAD",e[e["WIDGET_PNG_ZIP"]=3]="WIDGET_PNG_ZIP",e[e["JUST_CHECK_ZIP"]=4]="JUST_CHECK_ZIP",e[e["JUST_CHECK_MP4"]=5]="JUST_CHECK_MP4"}(s||(s={})),function(e){e[e["GEN_PAG_RUNNING"]=1]="GEN_PAG_RUNNING",e[e["GEN_PAG_SUCC"]=2]="GEN_PAG_SUCC",e[e["GEN_PAG_FAIL"]=3]="GEN_PAG_FAIL",e[e["GEN_PAG_TIMEOUT"]=4]="GEN_PAG_TIMEOUT"}(c||(c={}));var S=function(e){(0,m.Z)(i,e);var t=(0,f.Z)(i);function i(){return(0,p.Z)(this,i),t.call(this)}return(0,v.Z)(i,[{key:"getCoverList",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.Fz});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCover",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.iD,data:{order_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFullStat",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.ky,data:{order_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"submitCover",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.iD});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReceiveList",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return k=I.source(),e.next=3,this.request({url:h.jc,cancelToken:k.token,data:{order_id:t,transaction_id:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getMergeDetail",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.DZ,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"genReceiveMaterial",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){var n,a,r,o,s=arguments;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:1,a=s.length>3&&void 0!==s[3]?s[3]:[],r=s.length>4?s[4]:void 0,o=(0,l.Z)({},i),r&&(o.coverSetCommInfo=r),e.next=7,this.request({url:h.Vp,data:(0,y.g)({order_id:t,receive_object:o,request_id:Date.now()+Math.random()+"",batchCount:n,channelAppid:a})});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"combineGenReceiveMaterial",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){var n,a,r,o,s=arguments;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:1,a=s.length>3&&void 0!==s[3]?s[3]:[],r=s.length>4?s[4]:void 0,o=(0,l.Z)({},i),r&&(o.coverSetCommInfo=r),e.next=7,this.request({url:h.kD,data:(0,y.g)({order_id:t,combine_receive_object:o,request_id:Date.now()+Math.random()+"",batchCount:n,channelAppid:a})});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"modifyCover",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.qZ,data:(0,y.g)({order:i,modType:t,request_id:Date.now()+Math.random()+""})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"saveImg",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.qk,params:i,data:t,headers:{"Content-Type":"multipart/form-data"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getPreviewQrcode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i,n){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.yF,data:(0,y.g)({packetMaterial:t,corpName:i,brandLogo:n})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()},{key:"getTempPreviewQrcode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.OU,data:(0,y.g)({orderId:t,requestId:Date.now()+Math.random()+""})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkPreviewQrcode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.yE,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"recall",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i,n){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.Nn,data:{order_id:t,object_id:i,merge_id:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()},{key:"pay",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.Ai,data:(0,l.Z)((0,l.Z)({},(0,y.g)(t)),{},{request_id:Date.now()+Math.random()+""})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pay2",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.PF,data:(0,l.Z)((0,l.Z)({},(0,y.g)(t)),{},{request_id:Date.now()+Math.random()+""})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkPayStatus",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.aU,data:{transaction_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"applyRefund",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.Yq,data:{order_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelPay",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.fM,data:{order_id:t,transaction_id:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"activateOrder",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){var i;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object.assign({},t,{activeRequestId:Date.now()+Math.random()+""}),e.next=3,this.request({url:h.Kk,data:(0,y.g)(i)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getReceiveObjectDetail",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){var i;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object.assign({},t,{activeRequestId:Date.now()+Math.random()+""}),e.next=3,this.request({url:h.sG,data:(0,y.g)(i)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"storyGetBizInfo",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.EA,data:{appname:t,app_type:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"storyGetFinderInfo",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.xS,data:{appname:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"storyGetFinderList",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){var i,n=arguments;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.length>1&&void 0!==n[1]?n[1]:"",e.next=3,this.request({url:h.PB,data:{username:t,last_buffer:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"storyGetMiniAppQrcode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.c,data:{appname:t,path:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"coverGetShareMsgQrCode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.TV,data:{order_id:t,object_id:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"downloadReceiveObject",value:function(e,t){this.download({url:h.tm,responseType:"blob",data:{order_id:e,object_id:t.objectId}},t.genTime?"".concat(t.genTime.replace(" ","_"),"_").concat(g.FP[t.genType],"（").concat(g.n6[t.receiveType],"）"):"qr")}},{key:"downloadMergeReceiveObject",value:function(e){var t=_().unix(e.createTime).format("YYYY_MM_DD_HH_mm"),i="".concat(t,"_").concat(g.FP[e.genType],"（").concat(g.n6[e.receiveType],"）}");this.download({url:h.ZP,responseType:"blob",data:{merge_id:e.mergeId}},i)}},{key:"getReceiveObject",value:function(e,t,i){var n=this;n.download({url:h.tm,responseType:"blob",data:{order_id:e,object_id:t.objectId}},t.genTime?"".concat(t.genTime.replace(" ","_"),"_").concat(t.type):"qr")}},{key:"coverGenOrderId",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.ZN});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"coverGenActionQRCode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.t8,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverCheckActionQRCode",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.jl,data:{qr_code:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverSetTabList",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.xz});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"coverHeatReceiveObject",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.G8,data:(0,y.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverCancelHeatReceiveObject",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.z3,data:(0,y.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverGenPag",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.n0,data:t,params:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"coverBatchGenPag",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.er,data:t,params:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"coverGetGenPagResult",value:function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,i){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:h.uj,data:t,params:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()}]),i}(x.Z),A=new S},85880:function(e,t,i){"use strict";i.d(t,{ZP:function(){return g},bL:function(){return y}});var n=i(80543),a=i(81448),r=i(70280),o=i(66298),s=i(11651),c=i(76559),l=i(8495),u=(i(74916),i(15306),i(38862),i(41539),i(39714),i(26699),i(32023),i(92222),i(21703),i(49199)),d=i(50078),p=i(57582),v=i(64444),m=i(52117),f=i(9938);function h(e){try{return"string"===typeof e?e.replace(/,/g,";"):e&&"object"===(0,l.Z)(e)?(null===(t=JSON.stringify(e))||void 0===t?void 0:t.replace(/,/g,";"))||"":(null===e||void 0===e?void 0:e.toString().replace(/,/g,";"))||"";var t}catch(i){return""}}var g=function(e){(0,s.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this)}return(0,o.Z)(i,[{key:"downloadFile",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i,a){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.includes("csv")||a.includes("csv"),e.next=3,this.download({url:d.a2,method:"POST",data:{url:t,file_name:i,use_gbk:r}},i,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()},{key:"downloadFilePng",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.download({url:d.Dd,method:"POST",responseType:"blob",data:{url:t,file_name:i}},i,"png");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"mediaUploadReport",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var a,r,o,s,c,l,u,d,p,v,m,h,g,y,b;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=(null===i||void 0===i?void 0:i.file)||{},c=s.type,l=void 0===c?"":c,u=s.size,d=void 0===u?0:u,p=(null===i||void 0===i?void 0:i.videoInfo)||{},v=p.width,m=void 0===v?0:v,h=p.height,g=void 0===h?0:h,y=p.duration,b=void 0===y?0:y,this.baseActionReport({actionType:t,uploadInfo:{cropped:0,suffix:(0,f.WY)(l),size:d,width:m,height:g,video_duration_sec:b,pic_cnt:null!==(a=i.picCnt)&&void 0!==a?a:0,fail_reason:null!==(r=i.failReason)&&void 0!==r?r:0,error_code:null!==(o=i.errorCode)&&void 0!==o?o:0}});case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"baseActionReport",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a,r,o,s,c,l,u,v,m,f,g,y,b,w,C,_;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.actionType,s=void 0===o?"":o,c=t.coverId,l=void 0===c?"":c,u=t.processType,v=void 0===u?"":u,m=t.authorId,f=void 0===m?(null===(i=p.ZP.state)||void 0===i||null===(a=i.user)||void 0===a||null===(r=a.user)||void 0===r?void 0:r.authorId)||"":m,g=t.editType,y=void 0===g?"":g,b=t.page,w=void 0===b?"":b,C=h(t.uploadInfo),_="".concat(s,",").concat(l,",").concat(v,",").concat(f,",").concat(y,",").concat(w,",").concat(C),e.next=5,this.request({url:d._l,method:"POST",data:{detail:{item:[{log_id:18968,value:_}]}}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"baseActionReportAdmin",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a,r,o,s,c,l,u,p;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.UserType,a=void 0===i?1:i,r=t.ActionType,o=void 0===r?0:r,s=t.authorId,c=void 0===s?"":s,l=t.SubId,u=void 0===l?"":l,p=" ,".concat(a,",").concat(o,", ,").concat(c,",").concat(u),e.next=4,this.request({url:d._l,method:"POST",data:{detail:{item:[{log_id:23132,value:p}]}}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"baseActionReportExchange",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a,r,o,s,c,l,u,p,v,m;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.UserType,a=void 0===i?1:i,r=t.TransactionId,o=void 0===r?"":r,s=t.ActionType,c=void 0===s?"":s,l=t.AuthorId,u=void 0===l?"":l,p=t.IfClick,v=void 0===p?"":p,m="".concat(u,",").concat(a,",").concat(o," ,").concat(c,",").concat(v),e.next=4,this.request({url:d._l,method:"POST",data:{detail:{item:[{log_id:23395,value:m}]}}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadAjax",value:function(e,t){var i=t.onload,n=void 0===i?function(){}:i,a=t.onprogress,r=void 0===a?function(){}:a,o=/^http(s)?:\/\/(.*?)\//,s="https://finder.video.qq.com/",c=new XMLHttpRequest;e=e.replace(o,s),c.open("GET",e,!0),c.responseType="blob",c.onload=n,c.onprogress=r,c.onerror=onerror,c.send()}},{key:"getUploadAuthkey",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:d.Q6});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"bigFileUpload",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.getUploadAuthkey();case 2:return a=e.sent,a&&v.TQ.setAuthParams(a),e.abrupt("return",new Promise((function(e,n){i.startUpload((function(i,a){i===v.PP.chunkSuccess?null===t||void 0===t||t.onProgress({percent:Math.round(a)}):i===v.PP.success?e(a):i===v.PP.fail&&((0,m.H)("大文件上传失败"),null===t||void 0===t||t.onError(),n(new Error("大文件上传失败")))}))})));case 5:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}()}]),i}(u.Z),y=new g},96736:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=i(80543),a=i(81448),r=i(70280),o=i(66298),s=i(11651),c=i(76559),l=i(49199),u=i(50078),d=i(16581),p=function(e){(0,s.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this)}return(0,o.Z)(i,[{key:"getInvoiceList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.oS});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCanInvoiceOrderList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.s4});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getNewCanInvoiceOrderList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.f3});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"InvoiceWithPayInfoList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.Ul,data:(0,d.g)({transactionId:t,invoiceInfo:i,request_id:Date.now()+Math.random()+""})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getInvoice",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.jH,data:{invoice_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"recallInvoice",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.hX,data:{invoice_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelInvoice",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i,a,r){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.$_,data:{invoice_id:t,reason:i,express_number:a,reason_type:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i,n,a){return e.apply(this,arguments)}return t}()},{key:"makeInvoice",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.ZD,data:(0,d.g)({orderId:t,invoiceInfo:i,request_id:Date.now()+Math.random()+""})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"downloadInvoice",value:function(e){var t=this;t.download({url:u.yx,responseType:"blob",data:{invoice_id:e}},"发票")}},{key:"coverGetInvoiceAddrList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:u.J2,data:(0,d.g)({areaId:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),i}(l.Z)},32012:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(80543),a=i(81448),r=i(70280),o=i(66298),s=i(11651),c=i(76559),l=i(50078),u=i(49199),d=function(e){(0,s.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this)}return(0,o.Z)(i,[{key:"getList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:l.nr});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDetail",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:l.sJ,data:{announcement_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),i}(u.Z)},18159:function(e,t,i){"use strict";i.d(t,{XK:function(){return f},Xd:function(){return n},ZP:function(){return m},tk:function(){return a}});var n,a,r=i(80543),o=i(81448),s=i(70280),c=i(66298),l=i(11651),u=i(76559),d=i(49199),p=i(50078),v=i(16581);(function(e){e[e["ORDER"]=1]="ORDER",e[e["PAY"]=2]="PAY",e[e["OBJECT"]=3]="OBJECT"})(n||(n={})),function(e){e[e["EDIT"]=1]="EDIT",e[e["KNOWN_DELETE"]=2]="KNOWN_DELETE"}(a||(a={}));var m=function(e){(0,l.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,s.Z)(this,i),t.call(this)}return(0,c.Z)(i,[{key:"getPayInfoList",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t?{order_id:t}:{},e.next=3,this.request({url:p.Qc,method:"POST",data:i});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getPayInfo",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t?{transaction_id:t}:{},e.next=3,this.request({url:p.oY,method:"POST",data:i});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coveraddremark",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Ii,method:"POST",data:(0,v.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"covergetsingleremark",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Hc,method:"POST",data:(0,v.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverchangeremark",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Og,method:"POST",data:(0,v.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverdeleteremark",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.k,method:"POST",data:(0,v.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"coverbatchgetremark",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.YS,method:"POST",data:(0,v.g)(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),i}(d.Z),f=new m},52117:function(e,t,i){"use strict";i.d(t,{H:function(){return r},w:function(){return n}});i(47042),i(92222);var n=function(){if(window.localStorage){var e=localStorage.getItem("author_id");if(e)return e;var t="cover_platform_id",i=window.localStorage.getItem(t);if(i)return i;var n=+new Date+""+"".concat(Math.random()).slice(2,5);return window.localStorage.setItem(t,n),n}return+new Date+""+"".concat(Math.random()).slice(2,5)},a=n();function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var i=!1,n=!1;if((n||i)&&(console.log("%ccube report","border: 1px solid #E3E4E5; color: #FFC300; padding: 5px;",e,t),n))return;window.setTimeout((function(){(new Image).src="https://support.weixin.qq.com/cgi-bin/mmsupportmeshnodelogicsvr-bin/cube?biz=3512&label=cover.home&uin=".concat(a,"&action=").concat(e,"&msg=").concat(encodeURIComponent(t))}),10)}catch(r){console.error("report error",r)}}},56980:function(e,t,i){"use strict";i.d(t,{ZP:function(){return m},eZ:function(){return a},tF:function(){return n}});var n,a,r,o=i(80543),s=i(81448),c=i(70280),l=i(66298),u=i(11651),d=i(76559),p=i(50078),v=i(49199);(function(e){e[e["InnerAuthor"]=1]="InnerAuthor",e[e["OpenPaySwitch"]=2]="OpenPaySwitch",e[e["OpenInvoiceSwitch"]=4]="OpenInvoiceSwitch",e[e["OpenRefundSwitch"]=8]="OpenRefundSwitch",e[e["OpenAtmosphereSwitch"]=16]="OpenAtmosphereSwitch"})(n||(n={})),function(e){e[e["organization"]=0]="organization",e[e["person"]=1]="person"}(a||(a={})),function(e){e[e["ACCOUNT_TYPE_WX"]=0]="ACCOUNT_TYPE_WX",e[e["ACCOUNT_TYPE_BIZ"]=1]="ACCOUNT_TYPE_BIZ",e[e["ACCOUNT_TYPE_FINDER"]=2]="ACCOUNT_TYPE_FINDER",e[e["ACCOUNT_TYPE_EMOTION"]=3]="ACCOUNT_TYPE_EMOTION"}(r||(r={}));var m=function(e){(0,u.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,c.Z)(this,i),t.call(this)}return(0,l.Z)(i,[{key:"getUserInfo",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.CD,data:t},!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.xR,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.WK});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getLoginQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.N5});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkLoginQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.PA,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSignUpQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.ZI,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkSignUpQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.y1,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkBizPersonSignUpQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Ag,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkPersonSignUpQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.oi,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkEmotionPersonSignUpQrCode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.el,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getEmotionJumpQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.wN,data:{email:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkEmotionJumpQrcode",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Rb,data:{token:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signUp",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p._5,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bizPersonSignUp",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Cu,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"emotionPersonSignUp",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.A4,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signPersonUp",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.yc,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendEmail",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i){var n,a,r,s,c=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:0,a=c.length>3?c[3]:void 0,r=c.length>4?c[4]:void 0,s=c.length>5&&void 0!==c[5]?c[5]:0,e.next=6,this.request({url:p.q3,data:{token:t,email:i,principal_type:n,name:a,id_number:r,account_type:s}});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"adminList",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Q4});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"adminSearchWechat",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Dl,data:{input_username:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addAdminWechat",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Ik,data:{input_username:t,token:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"recallAdmin",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Fc,data:{sub_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"recallOperate",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.DS,data:{sub_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeAdmin",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.hn,data:{sub_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"heartBeat",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.gq});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"UpdateSecondary",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,n){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request({url:p.Yc,data:{sub_id:t,old_flag:i,new_flag:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()}]),i}(v.Z)},57582:function(e,t,i){"use strict";i.d(t,{Cn:function(){return ee},l1:function(){return Y},AQ:function(){return X},PJ:function(){return $},U6:function(){return K},ZP:function(){return J}});var n=i(20144),a=i(20629),r=i(6329),o=i(63442),s=i(80543),c=i(81448),l=i(93830),u=i(70280),d=i(66298),p=i(75808),v=i(11651),m=i(76559),f=i(78255),h=(i(92222),i(69720),i(41539),i(54747),i(69826),i(70655)),g=i(56980),y=i(34225),b=new g.ZP,w=new y.ZP,C=function(e){(0,v.Z)(i,e);var t=(0,m.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"user",{headImgUrl:"",nickname:"",authorId:"",statusFlag:0,openPurchaseTimeSwitch:0,principalType:0,loginNickname:"",isSecondary:0,managerFlag:0,accountNickname:"",subId:"",emojiRainInfo:{beginTime:0,endTime:0,minPurchaseCount:0,activityOpen:!1},accountType:0,nowAgreementVersion:0,maxAgreementVersion:0,extralInfo:{quotaRedPoint:0},finderInfo:null,adPurchaseSwitch:1}),(0,f.Z)((0,p.Z)(e),"loginData",{image:"",token:""}),e}return(0,d.Z)(i,[{key:"auth",get:function(){var e={},t=this.user.statusFlag,i=Object.entries(g.tF);return i.forEach((function(i){var n=(0,l.Z)(i,2),a=n[0],r=n[1];e[a]=!!(t&r)})),e}},{key:"authorId",get:function(){var e=this.user.authorId;return e}},{key:"principalAccountType",get:function(){var e=this.user,t=e.principalType,i=e.accountType;return"".concat(t,"_").concat(i)}},{key:"principalType",get:function(){var e=this.user.principalType;return e}},{key:"accountType",get:function(){var e=this.user.accountType;return e}},{key:"adPurchaseSwitch",get:function(){return this.user.adPurchaseSwitch}},{key:"headImgUrl",get:function(){var e=this.user.headImgUrl;return e}},{key:"nickname",get:function(){var e=this.user.nickname;return e}},{key:"showQuotaRedPoint",get:function(){if(this.user.extralInfo){var e=this.user.extralInfo.quotaRedPoint;return!!e}return!1}},{key:"isInnerUser",get:function(){return this.auth.InnerAuthor}},{key:"isAtmosphereUser",get:function(){return this.auth.OpenAtmosphereSwitch}},{key:"banDownload",get:function(){return 1==this.user.isSecondary&&!(4&this.user.managerFlag)}},{key:"SET_USER",value:function(e){this.user=e}},{key:"SET_LOGIN_DATA",value:function(e){Object.assign(this.loginData,e)}},{key:"setUserInfo",value:function(e){this.SET_USER(e)}},{key:"getUserInfo",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getUserInfo(t);case 2:return i=e.sent,i&&0===i.baseResponse.ret&&(this.SET_USER({headImgUrl:i.headImgUrl,nickname:i.nickname,authorId:i.authorId,principalName:i.principalName,statusFlag:i.statusFlag||0,openPurchaseTimeSwitch:i.openPurchaseTimeSwitch,principalType:i.principalType,emojiRainInfo:i.emojiRainInfo,isSecondary:i.isSecondary,managerFlag:i.managerFlag,accountNickname:i.accountNickname,subId:i.subId,loginNickname:i.loginNickname,accountType:i.accountType,maxAgreementVersion:i.maxAgreementVersion,nowAgreementVersion:i.nowAgreementVersion,extralInfo:i.extralInfo,finderInfo:i.finderInfo,adPurchaseSwitch:i.adPurchaseSwitch}),null===(n=localStorage)||void 0===n||n.setItem("author_id",i.authorId||"")),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserFinderInfo",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,i,n,a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.user.finderInfo,!t){e.next=7;break}return e.next=4,w.storyGetFinderInfo(t.nickname);case 4:return n=e.sent,a=null===n||void 0===n||null===(i=n.jumpInfoList)||void 0===i?void 0:i.find((function(e){return e.username===t.username})),e.abrupt("return",(0,o.Z)((0,o.Z)({},t),{},{headImgUrl:a.headImgUrl}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.login({author_id:t,token:this.loginData.token});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.logout();case 2:return t=e.sent,t&&0===t.baseResponse.ret&&this.clearUser(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearUser",value:function(){this.SET_USER({headImgUrl:"",loginNickname:"",nickname:"",authorId:"",principalName:"",statusFlag:0,openPurchaseTimeSwitch:0,principalType:0,isSecondary:0,accountNickname:"",managerFlag:0,subId:"",emojiRainInfo:{beginTime:0,endTime:0,minPurchaseCount:0,activityOpen:!1},accountType:0,maxAgreementVersion:0,nowAgreementVersion:0,extralInfo:{quotaRedPoint:0},finderInfo:null,adPurchaseSwitch:1}),window.localStorage&&window.localStorage.removeItem("userAvatar")}},{key:"getLoginQrcode",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.getLoginQrcode();case 2:t=e.sent,t&&this.SET_LOGIN_DATA({image:t.image,token:t.token});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkLoginQrcode",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.checkLoginQrcode(this.loginData.token);case 2:if(t=e.sent,!t){e.next=6;break}return this.SET_LOGIN_DATA({wxInfo:t.wxInfo,bizInfo:t.bizInfo,finderInfo:t.finderInfo}),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),i}(r.g4);(0,h.gn)([r.mm],C.prototype,"SET_USER",null),(0,h.gn)([r.mm],C.prototype,"SET_LOGIN_DATA",null),(0,h.gn)([r.aU],C.prototype,"setUserInfo",null),(0,h.gn)([r.aU],C.prototype,"getUserInfo",null),(0,h.gn)([r.aU],C.prototype,"getUserFinderInfo",null),(0,h.gn)([r.aU],C.prototype,"login",null),(0,h.gn)([r.aU],C.prototype,"logout",null),(0,h.gn)([r.aU],C.prototype,"clearUser",null),(0,h.gn)([r.aU],C.prototype,"getLoginQrcode",null),(0,h.gn)([r.aU],C.prototype,"checkLoginQrcode",null),C=(0,h.gn)([(0,r.Yl)({name:"user",namespaced:!0,store:J})],C);var _=C,x=(i(21249),i(57327),i(2707),i(26699),i(32023),i(57658),i(18159)),I=i(40628),k=i(90520),T=i.n(k),S=i(92592),A=i(57448),D=i(72909),P=i(16581),Z=new y.ZP,U=new x.ZP,E=0,R=function(e){(0,v.Z)(i,e);var t=(0,m.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"coverList",[]),(0,f.Z)((0,p.Z)(e),"cover",{}),(0,f.Z)((0,p.Z)(e),"showReceiveMaterialDialog",!1),(0,f.Z)((0,p.Z)(e),"triggerCheckTransactionIds",!1),(0,f.Z)((0,p.Z)(e),"choosePayInfoDialog",!1),(0,f.Z)((0,p.Z)(e),"serverNowTime",0),(0,f.Z)((0,p.Z)(e),"actionAuthInfo",{action:{},authQrcode:"",status:I.WX.ACTION_QRCODE_AUTOCONFIRMED,qrcodeBase64:""}),(0,f.Z)((0,p.Z)(e),"showEditDialog",!1),(0,f.Z)((0,p.Z)(e),"previewPagReinit",""),e}return(0,d.Z)(i,[{key:"validPayInfoList",get:function(){var e=this.cover;if(!e.payInfoList)return[];var t=e.payInfoList.filter((function(e){return e.status===A.A7.Delivering||e.status===A.A7.Success})).map((function(e,t){var i,n=e.expiredTime?T()("yyyy/MM/dd",new Date(1e3*e.expiredTime)):"-";e.purchaseType===A.mr.time&&e.actived&&(n=e.activeEndTime?T()("yyyy/MM/dd hh:mm",new Date(1e3*e.activeEndTime)):"-",i=(0,D.Jh)(Math.abs(e.activeEndTime-e.serverNowTime),D.m4.hour));var a=e.payStat?e.payStat.remainingGenCoverCount:0,r=Object.assign({},e,{key:t,leftNum:a,expired:"至 ".concat(n),leftDays:(0,D.Jh)(e.expiredTime-e.serverNowTime,D.m4.day),leftTime:i,date:T()("yyyy/MM/dd",new Date(1e3*e.paymentTime))});return r}));return t}},{key:"leftValidOrderNum",get:function(){return this.validPayInfoList.length?this.validPayInfoList.reduce((function(e,t){var i=!!(t.permissionFlag&A.A5.Disable_Combine_Gen);return!t.payStat||i?e+=0:t.purchaseType!==A.mr.time||t.actived?e+=t.payStat.remainingGenCoverCount:e+=t.payStat.totalGenCount,e}),0):0}},{key:"maxExpiredDays",get:function(){if(!this.validPayInfoList.length)return 0;var e=this.validPayInfoList.sort((function(e,t){return t.expiredTime-e.expiredTime}))[0].expiredTime,t=(0,D.Jh)(e-Date.now()/1e3,D.m4.day);return t}},{key:"minExpiredDays",get:function(){if(!this.validPayInfoList.length)return 0;var e=this.validPayInfoList.sort((function(e,t){return e.expiredTime-t.expiredTime}))[0].expiredTime,t=(0,D.Jh)(e-Date.now()/1e3,D.m4.day);return t}},{key:"coverActionType",get:function(){var e,t,i,n,a,r=this.cover;return(null===r||void 0===r||null===(e=r.packetMaterial)||void 0===e||null===(t=e.actionList)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.actionType)||(null===(n=this.actionAuthInfo)||void 0===n||null===(a=n.action)||void 0===a?void 0:a.actionType)}},{key:"actionAuthInfoStatus",get:function(){return this.actionAuthInfo.status}},{key:"authorizeSuccess",get:function(){var e=this.actionAuthInfo.status,t=I.WX.ACTION_QRCODE_COMFIRMED,i=I.WX.ACTION_QRCODE_AUTOCONFIRMED;return[t,i].includes(e)}},{key:"authorizeWaiting",get:function(){var e,t=I.WX.ACTION_QRCODE_VALID,i=I.WX.ACTION_QRCODE_INVAILID,n=I.WX.ACTION_QRCODE_EXPIRED;return[t,i,n].includes(null===(e=this.actionAuthInfo)||void 0===e?void 0:e.status)}},{key:"showAuthQrcode",get:function(){var e=this.actionAuthInfo.status;return e&&e!==I.WX.ACTION_QRCODE_AUTOCONFIRMED}},{key:"SET_COVER_LIST",value:function(e){this.coverList=e}},{key:"SET_COVER",value:function(e){var t;e.orderId===(null===(t=this.cover)||void 0===t?void 0:t.orderId)?this.cover=Object.assign(this.cover,e):this.cover=e}},{key:"SET_COVER_INFO",value:function(e){this.cover=e}},{key:"SET_COVER_ORDER_LIST",value:function(e){var t=this.cover;n.ZP.set(t,"payInfoList",e)}},{key:"SET_COVER_RECEIVE_LIST",value:function(e){var t=this.cover;n.ZP.set(t,"receiveObjectList",e)}},{key:"TOGGLE_RECEIVE_DIALOG",value:function(){this.showReceiveMaterialDialog=!this.showReceiveMaterialDialog}},{key:"TOGGLE_TRIGGER_CHECK_TRANSACTION_IDS",value:function(){this.triggerCheckTransactionIds=!this.triggerCheckTransactionIds}},{key:"TOGGLE_CHOOSE_PAY_INFO_DIALOG",value:function(e){this.choosePayInfoDialog="boolean"===typeof e?e:!this.choosePayInfoDialog}},{key:"SET_ACTION_AUTH_INFO",value:function(e){this.actionAuthInfo=e}},{key:"SET_ACTION_AUTH_INFO_STATUS",value:function(e){this.actionAuthInfo.status=e}},{key:"SET_ACTION_AUTH_INFO_MINIAPP_PATH",value:function(e){var t,i;null!==(t=this.actionAuthInfo)&&void 0!==t&&null!==(i=t.action)&&void 0!==i&&i.miniAppDetail&&(this.actionAuthInfo.action.miniAppDetail.path=e)}},{key:"CLEAR_ACTION_AUTH_INFO",value:function(){clearTimeout(E),this.actionAuthInfo={authQrcode:"",status:I.WX.ACTION_QRCODE_AUTOCONFIRMED,action:{}}}},{key:"SET_COVER_REMARK",value:function(e){var t=e.remarkList,i=e.idType,n=this.cover;if(i===x.Xd.ORDER)this.coverList=this.coverList.map((function(e,i){return Object.assign(e,{remarkInfo:t[i]})}));else if(i===x.Xd.PAY){var a;n.payInfoList=null===n||void 0===n||null===(a=n.payInfoList)||void 0===a?void 0:a.map((function(e,i){return Object.assign(e,{remarkInfo:t[i]})}))}else if(i===x.Xd.OBJECT){var r;n.receiveObjectList=null===n||void 0===n||null===(r=n.receiveObjectList)||void 0===r?void 0:r.map((function(e,i){return Object.assign(e,{remarkInfo:t[i]})}))}}},{key:"SET_SERVER_NOW_TIME",value:function(e){this.serverNowTime=e}},{key:"SET_SHOW_EDIT_DIALOG",value:function(e){this.showEditDialog=e}},{key:"SET_PREVIEW_PAG_REINIT",value:function(e){this.previewPagReinit="".concat(e,"_").concat(+new Date)}},{key:"getCoverRemark",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n,a,r,o,c;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],a=this.cover,t===x.Xd.ORDER?n=this.coverList.map((function(e){var i=e.orderId;return{idType:t,id:i}})):t===x.Xd.PAY?n=(null===(r=a.payInfoList)||void 0===r?void 0:r.map((function(e){var i=e.transactionId;return{idType:t,id:i}})))||[]:t===x.Xd.OBJECT&&(n=(null===(o=a.receiveObjectList)||void 0===o?void 0:o.map((function(e){var i=e.objectId;return{idType:t,id:i}})))||[]),e.next=5,U.coverbatchgetremark({remarkIdList:n});case 5:c=e.sent,0===(null===c||void 0===c||null===(i=c.baseResponse)||void 0===i?void 0:i.ret)&&this.SET_COVER_REMARK({remarkList:c.resultList,idType:t});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCoverList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.getCoverList();case 2:i=e.sent,0!==(null===i||void 0===i?void 0:i.baseResponse.ret)&&t.errorTip("封面获取异常，请重试或联系客服"),i&&i.orderList&&(this.SET_COVER_LIST(i.orderList),this.getCoverRemark(x.Xd.ORDER));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCover",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.getCover(t);case 2:i=e.sent,i&&i.order&&this.SET_COVER((0,o.Z)((0,o.Z)({},i.order),{},{coverSetCommInfo:i.coverSetCommInfo}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCoverInfo",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.getCover(t);case 2:i=e.sent,i&&i.order&&this.SET_COVER_INFO(i.order);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"modifyCover",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,i){var n,a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i||this.cover,e.next=3,Z.modifyCover(t,n);case 3:if(a=e.sent,!a||0!==a.baseResponse.ret){e.next=8;break}if(!n||!n.orderId){e.next=8;break}return e.next=8,this.getCover(n.orderId);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getCoverPayInfoList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.getPayInfoList(t);case 2:i=e.sent,i&&i.payInfoList&&(this.SET_COVER_ORDER_LIST(i.payInfoList),this.getCoverRemark(x.Xd.PAY));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCoverReceiveObjectList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n,a,r,o,c,l;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.orderId,n=t.transactionId,e.next=3,Z.getReceiveList(i,n);case 3:a=e.sent,a&&a.receiveObjectList&&(r=this.cover,o=r.receiveObjectList,c=a.receiveObjectList||[],l=[],c.forEach((function(e){var t=o&&o.length&&o.find((function(t){return t.objectId===e.objectId}));t||l.push(e)})),o&&o.length&&o.forEach((function(e){var t=c.find((function(t){return t.objectId===e.objectId}));l.push(t||e)})),this.SET_COVER_RECEIVE_LIST(l),this.SET_SERVER_NOW_TIME(a.serverNowTime),this.getCoverRemark(x.Xd.OBJECT));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearCoverReceiveObjectList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.SET_COVER_RECEIVE_LIST([]);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"applyRefund",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.applyRefund(t);case 2:return i=e.sent,e.next=5,this.getCover(t);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelPay",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n,a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.orderId,n=t.transactionId,e.next=3,Z.cancelPay(i,n);case 3:return a=e.sent,e.next=6,this.getCoverPayInfoList(i);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"submitCover",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.submitCover();case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFullStat",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.getFullStat(t);case 2:if(i=e.sent,!i||0!==i.baseResponse.ret){e.next=5;break}return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"activateOrder",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.activateOrder(t);case 2:if(i=e.sent,!i||0!==i.baseResponse.ret){e.next=5;break}return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getReceiveObjectDetail",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.getReceiveObjectDetail(t);case 2:if(i=e.sent,!i||0!==i.baseResponse.ret){e.next=5;break}return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"toggleReceiveDialog",value:function(){this.TOGGLE_RECEIVE_DIALOG()}},{key:"toggleTriggerCheckTransactionIds",value:function(){this.TOGGLE_TRIGGER_CHECK_TRANSACTION_IDS()}},{key:"toggleChoosePayInfoDialog",value:function(e){this.TOGGLE_CHOOSE_PAY_INFO_DIALOG(e)}},{key:"genQrcodePic",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,i,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.actionAuthInfo.authQrcode){e.next=2;break}return e.abrupt("return");case 2:return t=window.location.origin,i="".concat(t,"/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=").concat(this.actionAuthInfo.authQrcode),e.next=6,S.toDataURL(i,{width:120,margin:0});case 6:n=e.sent,this.SET_ACTION_AUTH_INFO(Object.assign({},this.actionAuthInfo,{qrcodeBase64:n}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"genActionAuthQrcode",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n,a,r,o,c,l;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.order_id,n=t.action,a=t.vm,e.next=3,Z.coverGenActionQRCode({order_id:i,action:(0,P.g)(n)});case 3:if(r=e.sent,0!==(null===r||void 0===r?void 0:r.baseResponse.ret)){e.next=15;break}return o=window.location.origin,c="".concat(o,"/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=").concat(r.qrCode),e.next=9,S.toDataURL(c,{width:120,margin:0});case 9:l=e.sent,this.SET_ACTION_AUTH_INFO({action:n,authQrcode:r.qrCode,status:r.status,qrcodeBase64:l}),this.genQrcodePic(),this.checkActionAuthQrcodeStatus(),e.next=17;break;case 15:this.SET_ACTION_AUTH_INFO({action:n,authQrcode:"",status:I.WX.ACTION_QRCODE_EXPIRED,qrcodeBase64:""}),a&&a.errorTip("二维码生成失败，请重试");case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkActionAuthQrcodeStatus",value:function(){var e,t=this;if((null===(e=this.actionAuthInfo)||void 0===e?void 0:e.status)===I.WX.ACTION_QRCODE_VALID){var i=function e(){E=window.setTimeout((function(){Z.coverCheckActionQRCode(t.actionAuthInfo.authQrcode).then((function(i){t.SET_ACTION_AUTH_INFO_STATUS((null===i||void 0===i?void 0:i.status)||I.WX.ACTION_QRCODE_INVAILID),(null===i||void 0===i?void 0:i.status)!==I.WX.ACTION_QRCODE_VALID?clearTimeout(E):e()}))}),1e3)};clearTimeout(E),i()}}},{key:"clearActionAuthTimer",value:function(){clearTimeout(E)}},{key:"updateShowEditDialog",value:function(e){this.SET_SHOW_EDIT_DIALOG(e)}},{key:"updatePreviewPagReinit",value:function(e){this.SET_PREVIEW_PAG_REINIT(e)}}]),i}(r.g4);(0,h.gn)([r.mm],R.prototype,"SET_COVER_LIST",null),(0,h.gn)([r.mm],R.prototype,"SET_COVER",null),(0,h.gn)([r.mm],R.prototype,"SET_COVER_INFO",null),(0,h.gn)([r.mm],R.prototype,"SET_COVER_ORDER_LIST",null),(0,h.gn)([r.mm],R.prototype,"SET_COVER_RECEIVE_LIST",null),(0,h.gn)([r.mm],R.prototype,"TOGGLE_RECEIVE_DIALOG",null),(0,h.gn)([r.mm],R.prototype,"TOGGLE_TRIGGER_CHECK_TRANSACTION_IDS",null),(0,h.gn)([r.mm],R.prototype,"TOGGLE_CHOOSE_PAY_INFO_DIALOG",null),(0,h.gn)([r.mm],R.prototype,"SET_ACTION_AUTH_INFO",null),(0,h.gn)([r.mm],R.prototype,"SET_ACTION_AUTH_INFO_STATUS",null),(0,h.gn)([r.mm],R.prototype,"SET_ACTION_AUTH_INFO_MINIAPP_PATH",null),(0,h.gn)([r.mm],R.prototype,"CLEAR_ACTION_AUTH_INFO",null),(0,h.gn)([r.mm],R.prototype,"SET_COVER_REMARK",null),(0,h.gn)([r.mm],R.prototype,"SET_SERVER_NOW_TIME",null),(0,h.gn)([r.mm],R.prototype,"SET_SHOW_EDIT_DIALOG",null),(0,h.gn)([r.mm],R.prototype,"SET_PREVIEW_PAG_REINIT",null),(0,h.gn)([r.aU],R.prototype,"getCoverRemark",null),(0,h.gn)([r.aU],R.prototype,"getCoverList",null),(0,h.gn)([r.aU],R.prototype,"getCover",null),(0,h.gn)([r.aU],R.prototype,"getCoverInfo",null),(0,h.gn)([r.aU],R.prototype,"modifyCover",null),(0,h.gn)([r.aU],R.prototype,"getCoverPayInfoList",null),(0,h.gn)([r.aU],R.prototype,"getCoverReceiveObjectList",null),(0,h.gn)([r.aU],R.prototype,"clearCoverReceiveObjectList",null),(0,h.gn)([r.aU],R.prototype,"applyRefund",null),(0,h.gn)([r.aU],R.prototype,"cancelPay",null),(0,h.gn)([r.aU],R.prototype,"submitCover",null),(0,h.gn)([r.aU],R.prototype,"getFullStat",null),(0,h.gn)([r.aU],R.prototype,"activateOrder",null),(0,h.gn)([r.aU],R.prototype,"getReceiveObjectDetail",null),(0,h.gn)([r.aU],R.prototype,"toggleReceiveDialog",null),(0,h.gn)([r.aU],R.prototype,"toggleTriggerCheckTransactionIds",null),(0,h.gn)([r.aU],R.prototype,"toggleChoosePayInfoDialog",null),(0,h.gn)([r.aU],R.prototype,"genQrcodePic",null),(0,h.gn)([r.aU],R.prototype,"genActionAuthQrcode",null),(0,h.gn)([r.aU],R.prototype,"checkActionAuthQrcodeStatus",null),(0,h.gn)([r.aU],R.prototype,"clearActionAuthTimer",null),(0,h.gn)([r.aU],R.prototype,"updateShowEditDialog",null),(0,h.gn)([r.aU],R.prototype,"updatePreviewPagReinit",null),R=(0,h.gn)([(0,r.Yl)({name:"cover",namespaced:!0,store:J})],R);var M=R,L=i(96736),F=new L.Z,N=function(e){(0,v.Z)(i,e);var t=(0,m.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"invoiceList",[]),(0,f.Z)((0,p.Z)(e),"invoice",null),(0,f.Z)((0,p.Z)(e),"canInvoiceList",[]),e}return(0,d.Z)(i,[{key:"SET_INVOICE_LIST",value:function(e){this.invoiceList=e}},{key:"SET_CAN_INVOICE_LIST",value:function(e){this.canInvoiceList=e}},{key:"SET_INVOICE",value:function(e){this.invoice=e}},{key:"getInvoiceList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.getInvoiceList();case 2:t=e.sent,t&&0===t.baseResponse.ret&&t.invoiceInfoList&&this.SET_INVOICE_LIST(t.invoiceInfoList);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCanInvoiceList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.getCanInvoiceOrderList();case 2:return t=e.sent,t&&0===t.baseResponse.ret&&this.SET_CAN_INVOICE_LIST(t.canInvoiceOrderList||[]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInvoice",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.getInvoice(t);case 2:i=e.sent,i&&i.invoiceInfo&&this.SET_INVOICE(i.invoiceInfo);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"recallInvoice",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n,a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.invoiceId,n=t.vm,e.next=3,F.recallInvoice(i);case 3:a=e.sent,a&&0===a.baseResponse.ret?this.getInvoice(i):(console.log(1111,n),n&&n.errorTip("撤销失败，请重试或联系客服"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),i}(r.g4);(0,h.gn)([r.mm],N.prototype,"SET_INVOICE_LIST",null),(0,h.gn)([r.mm],N.prototype,"SET_CAN_INVOICE_LIST",null),(0,h.gn)([r.mm],N.prototype,"SET_INVOICE",null),(0,h.gn)([r.aU],N.prototype,"getInvoiceList",null),(0,h.gn)([r.aU],N.prototype,"getCanInvoiceList",null),(0,h.gn)([r.aU],N.prototype,"getInvoice",null),(0,h.gn)([r.aU],N.prototype,"recallInvoice",null),N=(0,h.gn)([(0,r.Yl)({name:"invoice",namespaced:!0,store:J})],N);var O=N,B=i(32012),q=new B.Z,Q=function(e){(0,v.Z)(i,e);var t=(0,m.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"noticeList",[]),e}return(0,d.Z)(i,[{key:"hasNewNotice",get:function(){return this.noticeList.filter((function(e){return 1e3*e.time>Date.now()-2592e6})).length>0}},{key:"SET_NOTICE_LIST",value:function(e){this.noticeList=e}},{key:"getNoticeList",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.getList();case 2:t=e.sent,t&&0===t.baseResponse.ret&&(i=t.announcementList.map((function(e){return Object.assign({},e,{date:T()("yyyy/MM/dd",new Date(1e3*e.time)),new:1e3*e.time>Date.now()-2592e6})})),this.SET_NOTICE_LIST(i));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),i}(r.g4);(0,h.gn)([r.mm],Q.prototype,"SET_NOTICE_LIST",null),(0,h.gn)([r.aU],Q.prototype,"getNoticeList",null),Q=(0,h.gn)([(0,r.Yl)({name:"notice",namespaced:!0,store:J})],Q);var j=Q,H=new y.ZP,G=0,W=function(e){(0,v.Z)(i,e);var t=(0,m.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"actionAuthInfo",{action:{},authQrcode:"",status:I.WX.ACTION_QRCODE_AUTOCONFIRMED,qrcodeBase64:""}),e}return(0,d.Z)(i,[{key:"actionAuthInfoStatus",get:function(){return this.actionAuthInfo.status}},{key:"authorizeSuccess",get:function(){var e=this.actionAuthInfo.status,t=I.WX.ACTION_QRCODE_COMFIRMED,i=I.WX.ACTION_QRCODE_AUTOCONFIRMED;return[t,i].includes(e)}},{key:"authorizeWaiting",get:function(){var e,t=I.WX.ACTION_QRCODE_VALID,i=I.WX.ACTION_QRCODE_INVAILID,n=I.WX.ACTION_QRCODE_EXPIRED;return[t,i,n].includes(null===(e=this.actionAuthInfo)||void 0===e?void 0:e.status)}},{key:"showAuthQrcode",get:function(){var e=this.actionAuthInfo.status;return e&&e!==I.WX.ACTION_QRCODE_AUTOCONFIRMED}},{key:"SET_ACTION_AUTH_INFO",value:function(e){console.log({actionAuthInfo:e}),this.actionAuthInfo=e}},{key:"SET_ACTION_AUTH_INFO_STATUS",value:function(e){this.actionAuthInfo.status=e}},{key:"SET_ACTION_AUTH_INFO_MINIAPP_PATH",value:function(e){var t,i;null!==(t=this.actionAuthInfo)&&void 0!==t&&null!==(i=t.action)&&void 0!==i&&i.miniAppDetail&&(this.actionAuthInfo.action.miniAppDetail.path=e)}},{key:"CLEAR_ACTION_AUTH_INFO",value:function(){clearTimeout(G),this.actionAuthInfo={authQrcode:"",status:I.WX.ACTION_QRCODE_AUTOCONFIRMED,action:{}}}},{key:"genQrcodePic",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,i,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.actionAuthInfo.authQrcode){e.next=2;break}return e.abrupt("return");case 2:return t=window.location.origin,i="".concat(t,"/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=").concat(this.actionAuthInfo.authQrcode,"&type=heat"),e.next=6,S.toDataURL(i,{width:120,margin:0});case 6:n=e.sent,this.SET_ACTION_AUTH_INFO(Object.assign({},this.actionAuthInfo,{qrcodeBase64:n}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"genActionAuthQrcode",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var i,n,a,r,o,c,l;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.order_id,n=t.action,a=t.vm,e.next=3,H.coverGenActionQRCode({order_id:i,action:(0,P.g)(n)});case 3:if(r=e.sent,0!==(null===r||void 0===r?void 0:r.baseResponse.ret)){e.next=15;break}return o=window.location.origin,c="".concat(o,"/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=").concat(r.qrCode),e.next=9,S.toDataURL(c,{width:120,margin:0});case 9:l=e.sent,this.SET_ACTION_AUTH_INFO({action:n,authQrcode:r.qrCode,status:r.status,qrcodeBase64:l}),this.genQrcodePic(),this.checkActionAuthQrcodeStatus(),e.next=17;break;case 15:this.SET_ACTION_AUTH_INFO({action:n,authQrcode:"",status:I.WX.ACTION_QRCODE_EXPIRED,qrcodeBase64:""}),a&&a.errorTip("二维码生成失败，请重试");case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkActionAuthQrcodeStatus",value:function(){var e,t=this;if((null===(e=this.actionAuthInfo)||void 0===e?void 0:e.status)===I.WX.ACTION_QRCODE_VALID){var i=function e(){G=window.setTimeout((function(){H.coverCheckActionQRCode(t.actionAuthInfo.authQrcode).then((function(i){t.SET_ACTION_AUTH_INFO_STATUS((null===i||void 0===i?void 0:i.status)||I.WX.ACTION_QRCODE_INVAILID),(null===i||void 0===i?void 0:i.status)!==I.WX.ACTION_QRCODE_VALID?clearTimeout(G):e()}))}),1e3)};clearTimeout(G),i()}}},{key:"clearActionAuthTimer",value:function(){clearTimeout(G)}}]),i}(r.g4);(0,h.gn)([r.mm],W.prototype,"SET_ACTION_AUTH_INFO",null),(0,h.gn)([r.mm],W.prototype,"SET_ACTION_AUTH_INFO_STATUS",null),(0,h.gn)([r.mm],W.prototype,"SET_ACTION_AUTH_INFO_MINIAPP_PATH",null),(0,h.gn)([r.mm],W.prototype,"CLEAR_ACTION_AUTH_INFO",null),(0,h.gn)([r.aU],W.prototype,"genQrcodePic",null),(0,h.gn)([r.aU],W.prototype,"genActionAuthQrcode",null),(0,h.gn)([r.aU],W.prototype,"checkActionAuthQrcodeStatus",null),(0,h.gn)([r.aU],W.prototype,"clearActionAuthTimer",null),W=(0,h.gn)([(0,r.Yl)({name:"auth",namespaced:!0,store:J})],W);var z=W;n.ZP.use(a.ZP);var V=new a.ZP.Store({modules:{user:_,cover:M,invoice:O,notice:j,auth:z},strict:!1}),J=V,K=(0,r.rT)(_,V),Y=(0,r.rT)(M,V),X=(0,r.rT)(O,V),$=(0,r.rT)(j,V),ee=(0,r.rT)(z,V)},40628:function(e,t,i){"use strict";i.d(t,{B6:function(){return p},EF:function(){return _},FP:function(){return h},IJ:function(){return d},IT:function(){return P},Je:function(){return u},L5:function(){return C},Og:function(){return b},QP:function(){return s},Rf:function(){return r},ST:function(){return g},T:function(){return v},Us:function(){return k},Vo:function(){return S},WX:function(){return T},d5:function(){return A},lv:function(){return w},n6:function(){return f},p0:function(){return D},pK:function(){return I},uX:function(){return y}});var n,a,r,o,s,c,l=i(78255);i(29254);(function(e){e[e["None"]=0]="None",e[e["Editing"]=1]="Editing",e[e["Auditing"]=2]="Auditing",e[e["Approved"]=3]="Approved",e[e["Rejected"]=4]="Rejected",e[e["Blocked"]=5]="Blocked",e[e["Expired"]=6]="Expired",e[e["Closed"]=7]="Closed",e[e["Frozen"]=8]="Frozen",e[e["Published"]=9]="Published"})(r||(r={})),function(e){e[e["Refundable"]=1]="Refundable",e[e["Invoicing"]=2]="Invoicing",e[e["NonRefundable"]=3]="NonRefundable",e[e["Refunding"]=4]="Refunding",e[e["Refunded"]=5]="Refunded"}(o||(o={})),function(e){e[e["待提交"]=1]="待提交",e[e["审核中"]=2]="审核中",e[e["审核通过"]=3]="审核通过",e[e["审核驳回"]=4]="审核驳回",e[e["违规下架"]=5]="违规下架",e[e["已过期"]=6]="已过期",e[e["主动下架"]=7]="主动下架",e[e["违规冻结"]=8]="违规冻结",e[e["已上线"]=9]="已上线"}(s||(s={})),function(e){e[e["Heating"]=1]="Heating",e[e["Finsh"]=2]="Finsh",e[e["Stop"]=3]="Stop"}(c||(c={}));var u,d={1:"推广中",2:"推广完成",3:"推广停止"};(function(e){e[e["Unknow"]=0]="Unknow",e[e["Image"]=1]="Image",e[e["Video"]=2]="Video",e[e["File"]=3]="File",e[e["Pag"]=4]="Pag",e[e["Mp4"]=5]="Mp4",e[e["Gif"]=6]="Gif",e[e["Mov"]=7]="Mov",e[e["Zip"]=8]="Zip"})(u||(u={}));var p,v,m,f,h,g,y=1,b=1e5;(function(e){e[e["qrcode"]=1]="qrcode",e[e["link"]=2]="link",e[e["code"]=3]="code"})(p||(p={})),function(e){e[e["oneToAll"]=1]="oneToAll",e[e["oneToOne"]=2]="oneToOne"}(v||(v={})),function(e){e[e["appidList"]=0]="appidList",e[e["whileList"]=1]="whileList"}(m||(m={})),function(e){e[e["多人领取"]=1]="多人领取",e[e["一人领取"]=2]="一人领取"}(f||(f={})),function(e){e[e["二维码"]=1]="二维码",e[e["链接"]=2]="链接",e[e["序列号"]=3]="序列号"}(h||(h={})),function(e){e[e["Pending"]=1]="Pending",e[e["Fail"]=2]="Fail",e[e["Recallable"]=3]="Recallable",e[e["NonRecallable"]=4]="NonRecallable",e[e["Recalling"]=5]="Recalling",e[e["Recalled"]=6]="Recalled"}(g||(g={}));var w,C=(n={},(0,l.Z)(n,g.Pending,"正在生成"),(0,l.Z)(n,g.Fail,"生成失败"),(0,l.Z)(n,g.Recallable,"已生成"),(0,l.Z)(n,g.NonRecallable,"已生成"),(0,l.Z)(n,g.Recalling,"回收中"),(0,l.Z)(n,g.Recalled,"已回收"),n);(function(e){e[e["Pending"]=1]="Pending",e[e["Success"]=2]="Success",e[e["Fail"]=3]="Fail",e[e["Recalling"]=4]="Recalling",e[e["Recalled"]=5]="Recalled"})(w||(w={}));var _,x,I,k,T,S,A,D,P=(a={},(0,l.Z)(a,w.Pending,"正在生成"),(0,l.Z)(a,w.Success,"已生成"),(0,l.Z)(a,w.Fail,"生成失败"),(0,l.Z)(a,w.Recalling,"回收中"),(0,l.Z)(a,w.Recalled,"已回收"),a);(function(e){e[e["Disable_Download_Link"]=1]="Disable_Download_Link",e[e["Disable_Share_Friend"]=2]="Disable_Share_Friend",e[e["Disable_Recall"]=4]="Disable_Recall"})(_||(_={})),function(e){e[e["NORMAL"]=0]="NORMAL",e[e["EMOJIRAIN"]=1]="EMOJIRAIN"}(x||(x={})),function(e){e[e["公众号"]=2]="公众号",e[e["小程序"]=3]="小程序",e[e["视频号"]=4]="视频号",e[e["艺术家主页"]=5]="艺术家主页",e[e["表情专辑页"]=6]="表情专辑页"}(I||(I={})),function(e){e[e["None"]=0]="None",e[e["Url"]=1]="Url",e[e["MPAccount"]=2]="MPAccount",e[e["MiniApp"]=3]="MiniApp",e[e["FinderProfile"]=4]="FinderProfile",e[e["EmotionProfile"]=5]="EmotionProfile",e[e["EmotionProduct"]=6]="EmotionProduct"}(k||(k={})),function(e){e[e["NONE"]=0]="NONE",e[e["ACTION_QRCODE_VALID"]=1]="ACTION_QRCODE_VALID",e[e["ACTION_QRCODE_INVAILID"]=2]="ACTION_QRCODE_INVAILID",e[e["ACTION_QRCODE_EXPIRED"]=3]="ACTION_QRCODE_EXPIRED",e[e["ACTION_QRCODE_COMFIRMED"]=4]="ACTION_QRCODE_COMFIRMED",e[e["ACTION_QRCODE_AUTOCONFIRMED"]=5]="ACTION_QRCODE_AUTOCONFIRMED"}(T||(T={})),function(e){e[e["init"]=0]="init",e[e["biz"]=1]="biz",e[e["miniApp"]=2]="miniApp",e[e["finder"]=3]="finder",e[e["emotion"]=4]="emotion"}(S||(S={})),function(e){e[e["未知"]=0]="未知",e[e["公众号"]=1]="公众号",e[e["小程序"]=2]="小程序",e[e["视频号"]=3]="视频号",e[e["表情页面"]=4]="表情页面"}(A||(A={})),function(e){e[e["UNKNOW"]=0]="UNKNOW",e[e["MOV"]=1]="MOV",e[e["MP4"]=2]="MP4",e[e["GIF"]=3]="GIF",e[e["ZIP"]=4]="ZIP",e[e["PNG"]=5]="PNG",e[e["JPG"]=6]="JPG",e[e["JPEG"]=7]="JPEG",e[e["PAG"]=999]="PAG"}(D||(D={}))},57448:function(e,t,i){"use strict";i.d(t,{A5:function(){return s},A7:function(){return a},j8:function(){return r},js:function(){return c},kS:function(){return n},mr:function(){return o}});var n,a,r,o,s,c={1:"微信支付",2:"网银支付",3:"微信广告预算",4:"线下打款",5:"封面兑换卡",6:"封面兑换卡"};(function(e){e[e["Wechat"]=1]="Wechat",e[e["Bank"]=2]="Bank",e[e["WeChatADsPay"]=3]="WeChatADsPay",e[e["RemitPay"]=4]="RemitPay",e[e["Quota"]=5]="Quota",e[e["Quota_Gift"]=6]="Quota_Gift"})(n||(n={})),function(e){e[e["None"]=0]="None",e[e["Pending"]=1]="Pending",e[e["Fail"]=2]="Fail",e[e["Success"]=3]="Success",e[e["Cancel"]=4]="Cancel",e[e["Delivering"]=5]="Delivering",e[e["Delivered"]=6]="Delivered",e[e["Expired"]=7]="Expired",e[e["Blocked"]=8]="Blocked",e[e["Progressing"]=9]="Progressing",e[e["Frozen"]=10]="Frozen"}(a||(a={})),function(e){e[e["无"]=0]="无",e[e["待支付"]=1]="待支付",e[e["支付失败"]=2]="支付失败",e[e["待发放"]=3]="待发放",e[e["已取消"]=4]="已取消",e[e["发放中"]=5]="发放中",e[e["已领完"]=6]="已领完",e[e["已过期"]=7]="已过期",e[e["已失效"]=8]="已失效",e[e["支付处理中"]=9]="支付处理中",e[e["冻结中"]=10]="冻结中"}(r||(r={})),function(e){e[e["count"]=0]="count",e[e["time"]=1]="time"}(o||(o={})),function(e){e[e["Disable_GenType_QRCode"]=1]="Disable_GenType_QRCode",e[e["Disable_GenType_Url"]=2]="Disable_GenType_Url",e[e["Disable_GenType_CdKey"]=4]="Disable_GenType_CdKey",e[e["Disable_GenType_Fission"]=8]="Disable_GenType_Fission",e[e["Disable_ReceiveType_Individual"]=16]="Disable_ReceiveType_Individual",e[e["Disable_ReceiveType_Share"]=32]="Disable_ReceiveType_Share",e[e["Disable_Custom_GenCount"]=64]="Disable_Custom_GenCount",e[e["Disable_Combine_Gen"]=128]="Disable_Combine_Gen",e[e["Disable_Gen_Quota"]=256]="Disable_Gen_Quota",e[e["Disable_Set_Timer"]=512]="Disable_Set_Timer",e[e["Disable_Specify_Users"]=1024]="Disable_Specify_Users"}(s||(s={}))},64444:function(e,t,i){"use strict";i.d(t,{PP:function(){return a},TQ:function(){return f},ZP:function(){return h},vB:function(){return n}});var n,a,r=i(80543),o=i(81448),s=i(70280),c=i(66298),l=i(78255),u=(i(92222),i(41539),i(68309),i(2707),i(57327),i(21249),i(43290),i(21703),i(54747),i(57658),i(78783),i(33948),i(38862),i(26699),i(32023),i(74916),i(15306),i(47042),i(9669)),d=i.n(u),p=i(8322),v=i(72045);(function(e){e["video"]="videoFileType",e["picture"]="pictureFileType",e["thumb"]="thumbFileType",e["zip"]="zipFileType"})(n||(n={})),function(e){e[e["chunkSuccess"]=0]="chunkSuccess",e[e["chunkFail"]=1]="chunkFail",e[e["fail"]=2]="fail",e[e["success"]=3]="success"}(a||(a={}));var m=function(){function e(){(0,s.Z)(this,e),(0,l.Z)(this,"HOST","https://dcwxsns.video.qq.com"),(0,l.Z)(this,"authParams",void 0)}return(0,c.Z)(e,[{key:"singleUploadUrl",get:function(){return"".concat(this.HOST,"/simpleuploaddfs")}},{key:"getUploadIdUrl",get:function(){return"".concat(this.HOST,"/applyuploaddfs")}},{key:"uploadChunkUrl",value:function(e,t){return"".concat(this.HOST,"/uploadpartdfs?PartNumber=").concat(e,"&UploadID=").concat(t)}},{key:"uploadCompleteUrl",value:function(e){return"".concat(this.HOST,"/completepartuploaddfs?UploadID=").concat(e)}},{key:"setHost",value:function(e){this.HOST="//".concat(e)}},{key:"uploadChunk",value:function(e){var t=e.chunk,i=e.file,n=e.uuid,a=e.uploadEndCallBack,r=this.authParams,o=this.uploadChunkUrl(e.chunkIndex+1,e.uploadId),s=this.getUploadHeader(e);return new Promise((function(e,c){var l="domain: ".concat(o,";authKey: ").concat(r.authKey,";uuid: ").concat(n,";filekey: ").concat(i.name,";uin:").concat(r.uin,";size:").concat(i.size),u=!1,p=d().CancelToken.source();window.setTimeout((function(){p.cancel(),u||c({errMsg:"connect timeout;".concat(l),response:null})}),12e4),d().put(o,t,{timeout:121e3,timeoutErrorMessage:"response timeout",cancelToken:p.token,headers:Object.assign({},s,{"Content-Type":"application/octet-stream"}),onUploadProgress:function(e){var t=Math.round(e.loaded/e.total);1===t&&a&&a()}}).then((function(t){e(t)})).catch((function(e){u=!0,c({errMsg:"".concat(e.message,";").concat(l),response:e.response})}))}))}},{key:"uploadSingleFile",value:function(e,t){var i=new FormData;return i.append("file",e),d().put(this.singleUploadUrl,i,{timeout:3e4,timeoutErrorMessage:"response timeout",headers:t})}},{key:"finishUpload",value:function(e){var t=this.getUploadHeader(e);return d().post(this.uploadCompleteUrl(e.uploadId),{TransFlag:e.transFlag,PartInfo:e.partInfo.sort((function(e,t){return e.PartNumber-t.PartNumber}))},{headers:t})}},{key:"getUploadHeader",value:function(e){var t=e.file,i=e.uuid,n=e.md5,a=e.cdnFileType,r=this.authParams;return{Authorization:r.authKey,"X-Arguments":"apptype=".concat(r.appType,"&filetype=").concat(r[a],"&weixinnum=").concat(r.uin,"&filekey=").concat(encodeURIComponent(t.name),"&filesize=").concat(t.size,"&taskid=").concat(i,"&scene=").concat(r.scene||0),"Content-MD5":n||"null"}}},{key:"getUploadId",value:function(e,t){return d().put(this.getUploadIdUrl,e,{headers:t})}},{key:"setAuthParams",value:function(e){this.authParams=e}}]),e}();(0,l.Z)(m,"ReplaceHost","https://finder.video.qq.com");var f=new m,h=function(){function e(t,i){(0,s.Z)(this,e),(0,l.Z)(this,"file",void 0),(0,l.Z)(this,"reader",void 0),(0,l.Z)(this,"singleFileSize",8388608),(0,l.Z)(this,"cdnFileType",void 0),(0,l.Z)(this,"chunkSize",2097152),(0,l.Z)(this,"strategy",1),(0,l.Z)(this,"ConcurrentLimit",4),(0,l.Z)(this,"chunkCount",void 0),(0,l.Z)(this,"curChunkIndex",0),(0,l.Z)(this,"reloadChunkTime",1),(0,l.Z)(this,"uploadQueue",[]),(0,l.Z)(this,"uploadEventHandlerCb",void 0),(0,l.Z)(this,"uuid",void 0),(0,l.Z)(this,"break",!1),(0,l.Z)(this,"uploadChunkRecord",[]),(0,l.Z)(this,"uploadTaskId",""),(0,l.Z)(this,"transFlag",""),(0,l.Z)(this,"partInfo",[]),(0,l.Z)(this,"startTime",0),this.init(t,i)}return(0,c.Z)(e,[{key:"isBigFile",get:function(){return this.file.size>this.singleFileSize}},{key:"uploadedChunkCount",get:function(){return this.partInfo.filter((function(e){return!!e})).length}},{key:"progress",get:function(){return this.uploadedChunkCount/this.chunkCount*100}},{key:"init",value:function(e,t){this.curChunkIndex=0,this.uploadQueue=[],this.break=!1,this.file=e,t&&(t.chunkSize&&(this.chunkSize=t.chunkSize),t.cdnFileType&&(this.cdnFileType=t.cdnFileType)),this.chunkCount=Math.ceil(this.file.size/this.chunkSize)}},{key:"startUpload",value:function(e){this.uploadEventHandlerCb=e,this.uuid=(0,v.Z)(),this.break=!1,this.chunkUpload()}},{key:"chunkUpload",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,i,n,a=this;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=f.getUploadHeader({file:this.file,cdnFileType:this.cdnFileType,uuid:this.uuid}),e.next=3,f.getUploadId({BlockSum:this.chunkCount,BlockPartLength:new Array(this.chunkCount).fill(1).map((function(e,t){var i=(t+1)*a.chunkSize;return i>a.file.size?a.file.size:i}))},i);case 3:if(n=e.sent,null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.UploadID){e.next=6;break}throw new Error("Error_No_UploadId: ".concat(this.uuid));case 6:this.uploadTaskId=n.data.UploadID,this.startTime=Date.now(),this.file.size>2*this.chunkSize?new Array(this.ConcurrentLimit).fill(1).forEach((function(e,t){0===t?a.loadChunk():a.loadNextChunk()})):this.loadChunk();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"endUpload",value:function(){this.break=!0,this.curChunkIndex=0,this.reloadChunkTime=1,this.uploadQueue=[]}},{key:"loadChunk",value:function(){var e=this,t=this.curChunkIndex,i=this.chunkSize,n=this.curChunkIndex*i,s=n+i>this.file.size?this.file.size:n+i,c=this.blobSlice(n,s),l=this.strategy,u=new FileReader;u.readAsArrayBuffer(c),u.onload=function(i){if(i.target){var n=i.target.result;if("string"!==typeof n&&n){var s=new p.ArrayBuffer;s.append(n);var u=s.end();e.uploadChunkRecord.push({index:t,reqTime:Date.now(),resTime:0,cost:0});var d=e.uploadChunkRecord.length-1,v=function i(){return f.uploadChunk({uploadId:e.uploadTaskId,chunkIndex:t,chunk:c,file:e.file,cdnFileType:e.cdnFileType,uuid:e.uuid,md5:u}).then((function(i){var n,r,o,s,c,l=Date.now()-e.uploadChunkRecord[d].reqTime;if(e.uploadChunkRecord[d].resTime=Date.now(),e.uploadChunkRecord[d].cost=l,null===i||void 0===i||null===(n=i.data)||void 0===n||!n.TransFlag)throw new Error(i);null!==(r=i.data)&&void 0!==r&&r.TransFlag&&(e.transFlag=null===(s=i.data)||void 0===s?void 0:s.TransFlag);null!==(o=i.data)&&void 0!==o&&o.ETag&&(e.partInfo[t]={PartNumber:t+1,ETag:null===(c=i.data)||void 0===c?void 0:c.ETag});return e.uploadEventHandlerCb&&e.uploadEventHandlerCb(a.chunkSuccess,e.progress),t===e.chunkCount-1?Promise.all(e.uploadQueue).then((function(){e.handleComplete()})):e.loadNextChunk(),i})).catch(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=Date.now()-e.uploadChunkRecord[d].reqTime,e.uploadChunkRecord[d].resTime=Date.now(),e.uploadChunkRecord[d].cost=o,l===e.strategy&&!e.break){t.next=5;break}return t.abrupt("return");case 5:e.reloadChunkTime<=4&&(null===(a=JSON.stringify(n))||void 0===a||!a.includes("connect timeout"))?(e.reloadChunkTime+=1,e.uploadQueue.push(i())):1===e.strategy?(e.endUpload(),e.chunkSize=1048576,e.chunkCount=Math.ceil(e.file.size/e.chunkSize),e.strategy=2,e.startUpload(e.uploadEventHandlerCb)):e.endUpload();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};e.uploadQueue.push(v())}}}}},{key:"loadNextChunk",value:function(){this.curChunkIndex=this.curChunkIndex+1,this.curChunkIndex<this.chunkCount&&!this.break&&this.loadChunk()}},{key:"handleComplete",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.endUpload(),e.next=3,f.finishUpload({file:this.file,uuid:this.uuid,uploadId:this.uploadTaskId,cdnFileType:this.cdnFileType,transFlag:this.transFlag,partInfo:this.partInfo});case 3:i=e.sent,null!==i&&void 0!==i&&null!==(t=i.data)&&void 0!==t&&t.DownloadURL?(i.data.httpsUrl=i.data.DownloadURL.replace("http://wxapp.tc.qq.com",m.ReplaceHost),this.uploadEventHandlerCb&&this.uploadEventHandlerCb(a.success,{url:i.data.httpsUrl})):this.uploadEventHandlerCb&&this.uploadEventHandlerCb(a.fail,i);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"blobSlice",value:function(e,t){var i=this.file;return i.slice?i.slice(e,t):i.mozSlice?i.mozSlice(e,t):i.webkitSlice?i.webkitSlice(e,t):null}}]),e}()},16581:function(e,t,i){"use strict";i.d(t,{_:function(){return a},g:function(){return r}});var n=i(8495),a=(i(74916),i(15306),i(41539),i(47941),i(57658),i(21249),function(e){return"string"===typeof e?s(e):o(e)}),r=function(e){return"string"===typeof e?c(e):o(e,!0)};function o(e,t){return e&&"object"===(0,n.Z)(e)?u(e)||d(e)?e:l(e)?m(e,o,t):f(v(e),(function(i,n){var a;return a="boolean"===typeof t&&t?c(n):s(n),i[a]=o(e[n],t),i}),{}):e}function s(e){return e.replace(/[_.-](\w|$)/g,(function(e,t){return t.toUpperCase()}))}function c(e){return e.replace(/[A-Z]/g,(function(e){return"_"+e.toLowerCase()}))}var l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e){return"[object Date]"===Object.prototype.toString.call(e)},d=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=Object.prototype.hasOwnProperty,v=Object.keys||function(e){var t=[];for(var i in e)p.call(e,i)&&t.push(i);return t};function m(e,t,i){if(e.map)return e.map((function(e){return t(e,i)}));for(var n=[],a=0;a<e.length;a++)n.push(t(e[a],a));return n}function f(e,t,i){if(e.reduce)return e.reduce(t,i);for(var n=0;n<e.length;n++)i=t(i,e[n],n);return i}},80579:function(e,t,i){"use strict";i.d(t,{U:function(){return c},v:function(){return l}});var n=i(80543),a=i(81448),r=i(34225),o=i(72909),s=new r.ZP,c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i,a){var r,c,l;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=new FormData,i)for(c in i)r.append(c,i[c]);return r.append("name","image"),"string"===typeof t?r.append("file",(0,o.KG)(t)):r.append("file",t),e.next=6,s.saveImg(r,a);case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}(),l=function(e,t){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var n=i.getContext("2d");n.drawImage(e,0,0,t.width,t.height);var a=i.toDataURL("image/jpeg");return a}},72909:function(e,t,i){"use strict";i.d(t,{FT:function(){return Z},GM:function(){return x},Hc:function(){return S},Jh:function(){return u},KG:function(){return y},Ll:function(){return b},MA:function(){return p},Nu:function(){return d},Q7:function(){return m},UZ:function(){return U},Xi:function(){return A},Z2:function(){return f},Zh:function(){return _},_v:function(){return M},bi:function(){return C},dd:function(){return g},e4:function(){return h},gn:function(){return D},hR:function(){return E},jo:function(){return I},lE:function(){return v},m4:function(){return n},oR:function(){return l},q6:function(){return T},sT:function(){return w},t$:function(){return P}});var n,a=i(80543),r=i(81448),o=(i(92222),i(74916),i(15306),i(4723),i(41539),i(77601),i(75505),i(87714),i(82801),i(1174),i(18264),i(39575),i(82472),i(48675),i(92990),i(18927),i(33105),i(35035),i(74345),i(7174),i(63408),i(14590),i(32846),i(44731),i(77209),i(96319),i(58867),i(37789),i(33739),i(29368),i(14483),i(12056),i(3462),i(30678),i(27462),i(33824),i(55021),i(12974),i(15016),i(38862),i(56977),i(21703),i(52117)),s=i(27484),c=i.n(s),l=function(e){var t=new Date(1e3*e),i=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return"".concat(i,"年").concat(n,"月").concat(a,"日")};(function(e){e[e["minute"]=0]="minute",e[e["day"]=1]="day",e[e["hour"]=2]="hour"})(n||(n={}));var u=function e(t,i){var a=86400;if(i===n.day)return"".concat(Math.ceil(t/a));if(i===n.minute){var r=t/60,o=t%60;return r=r<10?"0".concat(Math.floor(r)):Math.floor(r),o=o<10?"0".concat(Math.floor(o)):Math.floor(o),"".concat(r,":").concat(o)}if(i===n.hour){var s=Math.floor(t/3600),c=t%3600,l=e(c,n.minute);return s?"".concat(s,":").concat(l):l}return""},d=function(e){return e.replace(/[^\x00-\xff]/g,"aa").length},p=function(e,t,i,n){var a=document.querySelector("#crop-img-canvas");a||(a=document.createElement("canvas"),a.id="crop-img-canvas",a.style.display="none",document.body.appendChild(a)),a.width=t,a.height=i;var r=a.getContext("2d");return r&&r.drawImage(e,0,n||e.naturalHeight-i,t,i,0,0,t,i),a.toDataURL("image/jpeg")},v=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg",n=document.querySelector("#concat-img-canvas");n||(n=document.createElement("canvas"),n.id="concat-img-canvas",n.style.display="none",document.body.appendChild(n)),n.width=e.width,n.height=e.height;var a=n.getContext("2d"),r=e.width/t.width*t.height;return a&&a.drawImage(t,0,0,e.width,r),a&&a.drawImage(e,0,0,e.width,e.height),n.toDataURL(i)},m=function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return"string"===typeof e&&!!e.match(t)&&e.length<255},f=function(e,t,i){return new Promise((function(n){var a=document.createElement("canvas");a.id="concat-img-canvas-".concat(+new Date),a.style.display="none",document.body.appendChild(a),a.width=t,a.height=i;var r=a.getContext("2d"),o=new Image;o.onload=function(){r&&r.drawImage(o,0,0,o.width,o.height);var e=a.toDataURL("image/png");n(e)},o.src=e}))},h=function(e){var t=/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}$)/;return"string"===typeof e&&t.test(e)},g=function(e){return new Promise((function(t){fetch(e).then((function(e){return e.blob()})).then((function(e){var i=new FileReader;i.onloadend=function(){"string"===typeof i.result&&t(i.result)},i.readAsDataURL(e)}))}))},y=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),a=new Uint8Array(n),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);var o=new Blob([n],{type:i}),s=new File([o],"file",{type:i});return s},b=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",n=e.split(","),a=(null===(t=n[0].match(/:(.*?);/))||void 0===t?void 0:t[1])||"",r=atob(n[1]),o=r.length,s=new Uint8Array(o);while(o--)s[o]=r.charCodeAt(o);return new File([s],i,{type:a})},w=function(e){return new Promise((function(t,i){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n,a;null!==(n=e.target)&&void 0!==n&&n.result||i("fileToBase64 fail");var r=null===(a=e.target)||void 0===a?void 0:a.result;t(r)}}))},C=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"image/jpeg",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return new Promise((function(r,s){var c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");if(e.width=t||c.width,e.height=i||c.height,a){t&&i?a.drawImage(c,0,0,t,i):a.drawImage(c,0,0);try{var o=e.toDataURL(n);r(o)}catch(l){s(l)}}},c.onerror=function(t){(0,o.H)("imgToDataURLError","type: ".concat(a,", ").concat(e," err: ").concat(JSON.stringify(t)))},c.src=e}))},_=function(e){if(e<10)return"0.0".concat(e.toFixed());if(e<100)return"0.".concat(e.toFixed());var t=e/100,i=e%100;return 0===i?"".concat(t,".00"):t.toFixed(2)},x=function(e){if(!e||!e.packetMaterial)throw new Error("extractImgUrl must pass cover.packetMaterial");var t=e.packetMaterial,i=t.sourceImage,n=t.receiveImage,a=t.detailImage,r=t.bubbleImage,o=t.openImage,s=t.corpImage;return{sourceImageUrl:i?i.mediaUrl:"",receiveImageUrl:n?n.mediaUrl:"",detailImageUrl:a?a.mediaUrl:"",bubbleImageUrl:r?r.mediaUrl:"",openImageUrl:o?o.mediaUrl:"",corpImageUrl:s?s.mediaUrl:""}},I=function(e){var t="";t=e.purchaseUrl.indexOf("ad.weixin.qq.com/cover_pay")>-1||e.purchaseUrl.indexOf("ad.qq.com/wechat-redpacket-payment")>-1?e.purchaseUrl:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/pay.html&tokenid=".concat(encodeURIComponent(e.tokenId),"&tokenurl=").concat(encodeURIComponent(e.purchaseUrl),"&coverid=").concat(e.orderId,"&count=").concat(e.purchaseCount,"&use_sandbox_env=").concat(e.useSandboxEnv,"&tid=").concat(e.tokenId),window.location.href=t},k="undefined"!==typeof window&&null!==window;function T(){if(!k)return!1;var e=!0;try{var t=document.createElement("canvas");t.getContext&&t.getContext("2d")&&(e=0===t.toDataURL("image/webp").indexOf("data:image/webp"))}catch(i){e=!1}return e}function S(e,t){var i=1024*(t.kbLimit||0),n=t.imgSize.width,a=t.imgSize.height,r=new FileReader,o=new Promise((function(o){if(t.kbLimit&&e.size>i)return o({status:"wrong_file_size"});r.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){if(t.width!==n||t.height!==a)return o({status:"wrong_pic_size"});o({status:"ok"})}}}));return r.readAsDataURL(e),o}var A=function(e){return null===e||void 0===e?void 0:e.replace(/^https?:/,"")};function D(e,t){var i=new FileReader,n=new Image;n.crossOrigin="anonymous";var a=document.createElement("canvas"),r=a.getContext("2d"),o=t.x,s=t.y,c=t.width,l=t.height;return new Promise((function(t){n.onload=function(){var e=n.width,i=n.height;a.width=e,a.height=i,r.clearRect(0,0,e,i),r.drawImage(n,0,0);for(var u=r.getImageData(o,s,c,l),d=u.data,p=10,v=3;v<d.length;v+=4*p)if(d[v]>1)return t(!1);return t(!0)},i.onload=function(e){n.src=e.target.result},i.readAsDataURL(e)}))}var P=function(e){var t=new Image;return new Promise((function(i,n){t.onload=function(){var e=t.width,n=t.height;i({width:e,height:n})},t.onerror=function(t){console.info("检查图片出错，请检查图片链接",e),(0,o.H)("检查图片出错",JSON.stringify({url:e})),n(t)},t.src=e}))};function Z(e,t){var i=-1,n=e.length,a=n-1;t=void 0===t?n:t;while(++i<t){var r=i+Math.floor(Math.random()*(a-i+1)),o=e[r];e[r]=e[i],e[i]=o}return e.length=t,e}function U(e,t){return c().unix(e).format(t||"YYYY/MM/DD HH:mm")}function E(e){return R.apply(this,arguments)}function R(){return R=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n,r,s,c;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"HEAD"});case 2:if(i=e.sent,n=i.headers.get("content-length"),!n){e.next=8;break}return e.abrupt("return",parseInt(n));case 8:return(0,o.H)("content-length无法获取文件大小"),e.next=11,fetch(t);case 11:if(r=e.sent,!r.ok){e.next=18;break}return e.next=15,r.arrayBuffer();case 15:return s=e.sent,c=s.byteLength,e.abrupt("return",c);case 18:throw new Error("无法获取文件大小");case 19:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}var M=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))}},9938:function(e,t,i){"use strict";i.d(t,{$p:function(){return d},NL:function(){return l},WY:function(){return u},db:function(){return f},mw:function(){return h},o:function(){return p},xY:function(){return g}});var n=i(80543),a=i(81448),r=(i(74916),i(77601),i(15306),i(41539),i(78783),i(33948),i(60285),i(41637),i(21703),i(57658),i(40561),i(38862),i(68309),i(9653),i(39714),i(1330)),o=i(99453),s=i(52117),c=i(28800),l=(i(81354),function(e){return/png|jpe?g/.test(e)}),u=function(e){return e.replace(/.*\//,"")},d=function(e){var t=document.createElement("video");return t.preload="metadata",new Promise((function(i){t.addEventListener("loadedmetadata",(function(){i({width:t.videoWidth,height:t.videoHeight,duration:t.duration})})),"string"===typeof e?t.src=e:e instanceof File&&(t.src=URL.createObjectURL(e))}))},p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=i.toUpperCase(),"MP4"!==i){e.next=5;break}return e.next=4,d(t);case 4:return e.abrupt("return",e.sent);case 5:if("PAG"!==i){e.next=9;break}return e.next=8,(0,o.Bc)(t);case 8:return e.abrupt("return",e.sent);case 9:throw new Error("file type no match");case 10:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,c,l,u=arguments;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:20,c=[],e.next=4,(0,o.sV)();case 4:return l=e.sent,(0,r.W)({locateFile:l}).then(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(a){var r,o,s,l,u,d,p,v,m;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.arrayBuffer()}));case 2:return r=e.sent,e.next=5,a.PAGFile.load(r);case 5:return o=e.sent,s=document.createElement("canvas"),l=o.width(),u=o.height(),s.width=l,s.height=u,e.next=13,a.PAGView.init(o,s);case 13:d=e.sent,p=0;case 15:if(!(p<=i)){e.next=27;break}return v=p===i?.95:p/i,null===d||void 0===d||d.setProgress(v),e.next=20,null===d||void 0===d?void 0:d.play();case 20:return e.next=22,null===d||void 0===d?void 0:d.pause();case 22:m=s.toDataURL("image/jpeg",.5),c.push(m);case 24:p++,e.next=15;break;case 27:c.splice(Math.floor(c.length/2),1);try{null===d||void 0===d||d.destroy()}catch(n){console.info("--- ~ PAGInit ~ err:",n)}case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw(0,s.H)("getMediaInfo PAGInit Error",JSON.stringify(e)),e})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,r,o,s,c,l=arguments;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:10,r=[],o=document.createElement("video"),s=document.createElement("canvas"),c=s.getContext("2d"),e.abrupt("return",new Promise((function(e){o.addEventListener("loadedmetadata",(0,a.Z)((0,n.Z)().mark((function t(){var a,l,u,d,p,v,m,f;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=o.duration,l=o.videoWidth/o.videoHeight,u=l>=1920/1080,d=300,p=d/l,s.width=d,s.height=p,v=a/i,m=0,f=m*v,0===f&&(f=.11),o.currentTime=f,o.addEventListener("seeked",(function(){if(!(m>=i)){var t="";if(c.drawImage(o,0,0,o.videoWidth,o.videoHeight,0,0,d,p),u){var n=document.createElement("canvas");n.width=300,n.height=300/(o.videoWidth/2/o.videoHeight);var a=n.getContext("2d");a.drawImage(s,.25*s.width,0,s.width/2,s.height,0,0,n.width,n.height),t=n.toDataURL("image/jpeg")}else t=s.toDataURL("image/jpeg",.5);r.push(t),m++;var l=m*v;o.currentTime=l,m>=i&&e(r)}}));case 13:case"end":return t.stop()}}),t)})))),o.crossOrigin="anonymous",o.preload="metadata",o.src=t})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a,r,o,l,u,d=arguments;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=d.length>1&&void 0!==d[1]?d[1]:20,a=t.url,r=c.ho.getBrowser(),o=t.type.toUpperCase(),l=[],u=sessionStorage.getItem(a),!u){e.next=15;break}return e.prev=7,l=JSON.parse(u),e.abrupt("return",l);case 12:e.prev=12,e.t0=e["catch"](7),(0,s.H)("get_frame_from_storage_error",JSON.stringify(e.t0));case 15:if("PAG"!==o){e.next=19;break}return e.next=18,v(a,i);case 18:l=e.sent;case 19:if("MP4"!==o){e.next=24;break}return"Safari"===r.name&&(a+="#t=0.1",console.info("--- ~ getMediaFrameList ~ url:",a)),e.next=23,m(a,i);case 23:l=e.sent;case 24:if(l.length>0)try{sessionStorage.clear(),console.warn("clear all sessionStorage"),sessionStorage.setItem(a,JSON.stringify(l))}catch(n){(0,s.H)("set_frame_list_error",null===n||void 0===n?void 0:n.message)}return e.abrupt("return",l);case 26:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=document.createElement("video"),i=e.cropInfo,r=i.cropLeft,o=i.cropTop,s=i.cropHeight,l=i.cropWidth,u=e.fileUrl,d=e.timeInfo.startTime;return 0===d&&(d=.1),new Promise((function(i){t.addEventListener("loadedmetadata",(0,a.Z)((0,n.Z)().mark((function a(){var u,p,v,m,f,h,g;return(0,n.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,c.BC.convertVideoToCanvas(t,d);case 2:u=n.sent,p=u.canvas,v=p.getContext("2d"),v.drawImage(t,0,0,p.width,p.height),m=v.getImageData(Number(r),Number(o),Number(l),Number(s)),v.clearRect(0,0,p.width,p.height),p.width=Number(l),p.height=Number(s),v.putImageData(m,0,0),f=document.createElement("canvas"),f.width=e.targetSize.width,f.height=e.targetSize.height,h=f.getContext("2d"),h.drawImage(p,0,0,e.targetSize.width,e.targetSize.height),g=f.toDataURL("image/jpeg"),i(g);case 18:case"end":return n.stop()}}),a)})))),t.crossOrigin="anonymous",t.preload="metadata",t.src=u}))},g=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){fetch(t).then(function(){var t=(0,a.Z)((0,n.Z)().mark((function t(a){var r,o;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.blob();case 2:r=t.sent,r&&(o=URL.createObjectURL(r),e(o)),i(new Error("fetch media error"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return new Error("fetch media error")}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},351:function(e,t,i){"use strict";i.d(t,{Tg:function(){return s}});var n=i(63442),a=(i(92222),i(21249),i(2707),i(91038),i(78783),i(41539),i(70189),i(33948),i(69600),i(47042),i(40628)),r=i(72909),o=function(e){var t="-";return void 0!==e.coversetReceiveCount?e.coversetReceiveCount:((e.needFission||1===e.heatStatus)&&(t=e.fissionObject?"".concat(e.fissionObject.totalReceiveCount,"/").concat(e.fissionObject.totalGenCount,"（裂变发放数量）"):e.fissionReceiveCount||0),t)},s=function(e){var t,i=o(e),s=void 0,c="".concat((0,r.UZ)(e.referTransactionExpiretime,"YYYY/MM/DD"));if(null!==(t=e.childObject)&&void 0!==t&&t.length){s=e.childObject.sort((function(e,t){return e.referTransactionExpiretime-t.referTransactionExpiretime})).map((function(t,i){return(0,n.Z)((0,n.Z)({},t),{},{key:t.objectId,refundVisible:!1,statusText:a.IT[e.mergeStatus],genTypeText:"".concat(a.FP[e.genType]),receiveTypeText:e.extraUseDetail?"":a.n6[e.receiveType],receiveBeginTimeText:0!=e.receiveBeginTime?(0,r.UZ)(e.receiveBeginTime):"-",usedPercent:"".concat(t.totalReceiveCount," / ").concat(t.totalGenCount),fissionPercent:o(t),genTime:(0,r.UZ)(e.createTime),referTransactionExpiretimeText:"".concat((0,r.UZ)(t.referTransactionExpiretime,"YYYY/MM/DD")),lastChildren:i===e.childObject.length-1,disabledDownloadLink:!!(a.EF.Disable_Download_Link&t.permissionFlag),disabledRecall:!!(a.EF.Disable_Recall&t.permissionFlag),disabledShareFriend:!!(a.EF.Disable_Share_Friend&t.permissionFlag)})}));var l=Array.from(new Set(s.map((function(e){return e.referTransactionExpiretimeText}))));2===l.length?c=l.map((function(e){return e})).join("、<br>"):l.length>2&&(c="".concat(l.slice(0,2).map((function(e){return e})).join("、<br>"),"等"))}return(0,n.Z)((0,n.Z)({},e),{},{children:s,key:e.mergeId||e.objectId,refundVisible:!1,statusText:e.mergeStatus?a.IT[e.mergeStatus]:a.L5[e.status],genTypeText:e.extraUseDetail?e.extraUseDetail:1===e.distributionType?"微信表情雨":"".concat(a.FP[e.genType]),receiveTypeText:e.extraUseDetail?"":a.n6[e.receiveType],receiveBeginTimeText:0!=e.receiveBeginTime?(0,r.UZ)(e.receiveBeginTime):"-",usedPercent:"".concat(e.totalReceiveCount," / ").concat(e.totalGenCount),fissionPercent:i,genTime:(0,r.UZ)(e.createTime),isHeat:e.isHeat,referTransactionExpiretimeText:c,disabledDownloadLink:!!(a.EF.Disable_Download_Link&e.permissionFlag),disabledRecall:!!(a.EF.Disable_Recall&e.permissionFlag),disabledShareFriend:!!(a.EF.Disable_Share_Friend&e.permissionFlag)})}},99453:function(e,t,i){"use strict";i.d(t,{ed:function(){return pe},TI:function(){return ce},su:function(){return le},Oz:function(){return B},Wr:function(){return re},WB:function(){return te},zj:function(){return V},p2:function(){return G},CJ:function(){return se},Zt:function(){return ie},JV:function(){return j},YO:function(){return X},tF:function(){return H},sV:function(){return N},Bc:function(){return q},at:function(){return de},if:function(){return J}});var n=i(63442),a=i(80543),r=i(81448),o=(i(41539),i(38862),i(21703),i(9653),i(56977),i(78783),i(33948),i(92222),i(23157),i(21249),i(54747),i(72909)),s=i(20144),c=i(34225),l=i(1330),u=i(18205),d=i(80579),p=i(2776),v=i(52117),m=i(9938),f=i(63296),h=i(40628),g=i(28800);i(74916),i(15306);function y(e){return e?e.replace(/^http:/,"https:"):""}var b="",w="",C=null,_=[{quality:60,fps:20},{quality:50,fps:15},{quality:40,fps:10},{quality:30,fps:10},{quality:20,fps:10}],x=[{quality:60,fps:20},{quality:50,fps:15},{quality:40,fps:10},{quality:30,fps:10},{quality:20,fps:10}],I=[{quality:20,fps:10},{quality:10,fps:10},{quality:5,fps:10}],k=[{quality:60,fps:20},{quality:50,fps:15},{quality:40,fps:10}],T=[{quality:50,fps:60},{quality:40,fps:60},{quality:30,fps:60}],S=[{quality:50,fps:60},{quality:40,fps:60},{quality:30,fps:60}],A=[{quality:40,fps:24},{quality:30,fps:24},{quality:20,fps:24},{quality:10,fps:24}],D=512e3,P=512e3,Z=358400,U=358400,E=153600,R=30720,M=30720,L=153600,F=153600,N=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="https://res.wx.qq.com/t/wx_fed/cdn_libs/res/libpag/4.3.43/libpag.wasm",!b){e.next=3;break}return e.abrupt("return",(function(){return b}));case 3:return e.prev=3,e.next=6,(0,m.xY)(t);case 6:return i=e.sent,b=i,e.abrupt("return",(function(){return b}));case 11:return e.prev=11,e.t0=e["catch"](3),e.abrupt("return",(function(){return t}));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="https://res.wx.qq.com/t/wx_fed/cdn_libs/res/libpag/4.3.43libpag.min.js",!w){e.next=3;break}return e.abrupt("return",w);case 3:return e.prev=3,e.next=6,(0,m.xY)(t);case 6:return i=e.sent,w=i,e.abrupt("return",w);case 11:return e.prev=11,e.t0=e["catch"](3),e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!C){e.next=2;break}return e.abrupt("return",C);case 2:return e.next=4,O();case 4:return t=e.sent,e.next=7,N();case 7:return i=e.sent,e.next=10,(0,f.MF)({locateFile:function(e){return"libpag.wasm"===e?i("libpag.wasm"):"libpag.js"===e?t:e}});case 10:return C=e.sent,e.abrupt("return",C);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return i=e.sent,e.abrupt("return",new Promise((function(e,n){(0,l.W)({locateFile:i}).then(function(){var i=(0,r.Z)((0,a.Z)().mark((function i(r){var o,s,c,l,u,d;return(0,a.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o=null,"string"!==typeof t){i.next=10;break}return i.next=4,fetch(t).then((function(e){return e.arrayBuffer()})).catch((function(e){n(e)}));case 4:return s=i.sent,i.next=7,r.PAGFile.load(s);case 7:o=i.sent,i.next=14;break;case 10:if(!(t instanceof File)){i.next=14;break}return i.next=13,r.PAGFile.load(t);case 13:o=i.sent;case 14:if(o){i.next=17;break}throw(0,v.H)("获取pag信息失败",JSON.stringify({msg:t})),new Error("获取动态素材信息失败，请重试");case 17:c=o.width(),l=o.height(),u=o.duration(),d=o.frameRate(),o.destroy(),e({width:c,height:l,duration:Number((u/1e6).toFixed(2)),frameRate:d});case 23:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){throw(0,v.H)("getPagInfo PAGInit Error",JSON.stringify(e)),e}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n,s,c;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fileUrl){e.next=3;break}throw(0,v.H)("换图片时传入的pag链接为空",JSON.stringify(t)),new Error("换图片时传入的pag链接为空");case 3:return i=!1,n=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o._v)(1e4);case 2:return i||(0,v.H)("genStaticPic超时",JSON.stringify(t)),e.abrupt("return","");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,o;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=+new Date,(0,v.H)("提取pag帧",JSON.stringify({options:t})),e.next=4,N();case 4:return o=e.sent,e.abrupt("return",new Promise((function(e,s){var c=t.fileUrl,u=t.width,d=t.height,p=t.imageType,m=void 0===p?"image/jpeg":p;(0,l.W)({locateFile:o}).then(function(){var o=(0,r.Z)((0,a.Z)().mark((function r(o){var l,p,f,h,g;return(0,a.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(c).then((function(e){return e.arrayBuffer()})).catch((function(e){s(e)}));case 2:return l=a.sent,a.next=5,o.PAGFile.load(l);case 5:return p=a.sent,f=document.createElement("canvas"),f.width=u,f.height=d,a.next=11,o.PAGView.init(p,f);case 11:if(h=a.sent,!t.lastFrame||!h){a.next=16;break}return null===h||void 0===h||h.setProgress(1),a.next=16,h.flush();case 16:g=f.toDataURL(m),(0,v.H)("成功提取pag帧",JSON.stringify({time:+new Date-n,options:t})),i=!0;try{null===h||void 0===h||h.destroy()}catch(r){}return a.abrupt("return",e(g));case 21:case"end":return a.stop()}}),r)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){throw(0,v.H)("getStaticPic PAGInit Error",JSON.stringify(e)),e}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=8,Promise.race([n(),s()]);case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,s,l,u,d,p,m,f,y,b,w=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=w.length>1&&void 0!==w[1]?w[1]:0,t.base.file_type&&t.base.file_url){e.next=4;break}throw(0,v.H)("合成动效氛围封面缺少参数",JSON.stringify(t)),new Error("合成动效氛围封面缺少参数");case 4:return r={gen_type:c.rv.ATMOSPHERE_PAG_NORMAL,scene:c.a1.FIRST_UPLOAD,base:(0,n.Z)({file_type:h.p0.PNG,file_url:"",duration:-1,start_time:0,x:-1,y:-1},t.base),pag_arg:(0,n.Z)((0,n.Z)({w:720,h:908},T[i]),t.pagArg),request_id:"atmosphere_cover__".concat(g.Z_.uuid())},e.next=7,pe([r],"atmosphere_cover");case 7:return s=e.sent,l=s.result[0],u=l.url,d=l.md5,e.next=11,(0,o.hR)(u);case 11:if(p=e.sent,console.info("【氛围】封面PAG大小：",p/1024,"kb","是否超过：",p>L,"pag链接:",u),!(p>L)){e.next=19;break}if(!(i>=T.length-1)){e.next=17;break}throw(0,v.H)("【氛围】封面大小超标",JSON.stringify({pagUrl:t.base.file_url})),Error("氛围效果合成失败，可将氛围素材替换为画面更简单的图片后重试。");case 17:return(0,v.H)("【氛围】封面生成降级",JSON.stringify({qfs:T[i+1]})),e.abrupt("return",j(t,i+1));case 19:return r.pag_arg.fps=30,e.next=22,pe([r],"atmosphere_cover_low_quality");case 22:return m=e.sent,f=m.result[0],y=f.url,b=f.md5,e.abrupt("return",{url:u,md5:d,lowUrl:y,lowMd5:b});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,s,l,u,d,p,m,f,y,b,w=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=w.length>1&&void 0!==w[1]?w[1]:0,t.base.file_type&&t.base.file_url){e.next=4;break}throw(0,v.H)("合成动效氛围详情页缺少参数",JSON.stringify(t)),new Error("合成动效氛围详情页缺少参数");case 4:return r={gen_type:c.rv.ATMOSPHERE_PAG_DETAIL,scene:c.a1.FIRST_UPLOAD,base:(0,n.Z)({file_type:h.p0.PNG,file_url:"",duration:-1,start_time:0,x:-1,y:-1},t.base),pag_arg:(0,n.Z)((0,n.Z)({w:720,h:908},S[i]),t.pagArg),request_id:"atmosphere_detail_".concat(g.Z_.uuid())},e.next=7,pe([r],"atmosphere_detail");case 7:return s=e.sent,l=s.result[0],u=l.url,d=l.md5,e.next=11,(0,o.hR)(u);case 11:if(p=e.sent,console.info("【氛围】详情页PAG大小：",p/1024,"kb","是否超过：",p>F,"pag链接:",u),!(p>F)){e.next=19;break}if(!(i>=S.length-1)){e.next=17;break}throw(0,v.H)("【氛围】详情页大小超标",JSON.stringify({pagUrl:t.base.file_url})),Error("氛围效果合成失败，可将氛围素材替换为画面更简单的图片后重试。");case 17:return(0,v.H)("【氛围】详情页生成降级",JSON.stringify({qfs:S[i+1]})),e.abrupt("return",H(t,i+1));case 19:return r.pag_arg.fps=30,e.next=22,pe([r],"atmosphere_detail_low_quality");case 22:return m=e.sent,f=m.result[0],y=f.url,b=f.md5,e.abrupt("return",{url:u,md5:d,lowUrl:y,lowMd5:b});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,s,l,u,d,p,m,f,y,b,w=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=w.length>1&&void 0!==w[1]?w[1]:0,t.base.file_type&&t.base.file_url){e.next=4;break}throw(0,v.H)("合成动效氛围气泡缺少参数",JSON.stringify(t)),new Error("合成动效氛围气泡缺少参数");case 4:return r={gen_type:c.rv.ATMOSPHERE_PAG_BUBBLE,scene:c.a1.FIRST_UPLOAD,base:(0,n.Z)({file_type:h.p0.PNG,file_url:"",duration:-1,start_time:0,x:-1,y:-1},t.base),pag_arg:(0,n.Z)((0,n.Z)({w:528,h:384},A[i]),t.pagArg),request_id:"atmosphere_bubble_".concat(g.Z_.uuid())},e.next=7,pe([r],"atmosphere_bubble");case 7:return s=e.sent,l=s.result[0],u=l.url,d=l.md5,e.next=11,(0,o.hR)(u);case 11:if(p=e.sent,console.info("【氛围】气泡PAG大小：",p/1024,"kb","是否超过：",p>M,"pag链接:",u),!(p>M)){e.next=19;break}if(!(i>=A.length-1)){e.next=17;break}throw(0,v.H)("【氛围】气泡大小超标",JSON.stringify({pagUrl:t.base.file_url})),Error("氛围效果合成失败，可将氛围素材替换为画面更简单的图片后重试。");case 17:return(0,v.H)("【氛围】气泡生成降级",JSON.stringify({qfs:A[i+1]})),e.abrupt("return",G(t,i+1));case 19:return r.pag_arg.fps=20,e.next=22,pe([r],"atmosphere_bubble_low_quality");case 22:return m=e.sent,f=m.result[0],y=f.url,b=f.md5,e.abrupt("return",{url:u,md5:d,lowUrl:y,lowMd5:b});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){if(!e.whole.file_type||!e.whole.file_url)throw(0,v.H)("合成动态原素材缺少参数",JSON.stringify(e)),new Error("合成动态原素材缺少参数");var t={gen_type:c.rv.DIRECT_TO_PAG,scene:e.scene||c.a1.FIRST_UPLOAD,whole:(0,n.Z)({file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0},e.whole),pag_arg:(0,n.Z)((0,n.Z)({w:u.TE.width,h:u.TE.height},x[0]),e.pagArg),request_id:"source_".concat(g.Z_.uuid())};return t},z=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,c,l,u,d,p,m,f,h=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=h.length>1&&void 0!==h[1]?h[1]:0,r=W(t),e.next=4,pe([r],"source");case 4:return c=e.sent,l=c.result[0],u=l.url,d=l.md5,e.next=8,(0,o.hR)(u);case 8:if(p=e.sent,m=s.ZP.prototype.$isAtmosphereUser?U:P,s.ZP.prototype.$isAtmosphereUser&&(0,v.H)("使用氛围限定大小限制",JSON.stringify({MAX_SIZE:m})),console.info("【动态】详情页PAG大小：",p/1024,"kb","是否超过：",p>m),!(p>m)){e.next=20;break}if(!(i>=x.length-1)){e.next=16;break}throw(0,v.H)("【动态】详情页大小超标",JSON.stringify({pagUrl:t.whole.file_url})),Error("详情页动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");case 16:return f=i+1,(0,v.H)("【动态】详情页生成降级",JSON.stringify({qfs:x[f]})),t.pagArg=(0,n.Z)((0,n.Z)({},r.pag_arg),x[f]),e.abrupt("return",z(t,f));case 20:return e.abrupt("return",{url:u,md5:d});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Q({fileUrl:t,width:u.TE.width,height:u.TE.height,type:"source"});case 2:if(i=e.sent,!i){e.next=7;break}return e.abrupt("return",i);case 7:return(0,v.H)("生成静态封面图失败",JSON.stringify({pagUrl:t})),e.abrupt("return","");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:return i=e.sent,e.abrupt("return",{pagUrl:null===i||void 0===i?void 0:i.url,pagMd5:i.md5});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){if(!e.base.file_type||!e.base.file_url)throw(0,v.H)("合成封面缺少参数",JSON.stringify(e)),new Error("合成封面缺少参数");var t={gen_type:c.rv.NORMAL_PACKET,scene:c.a1.REUPLOAD,base:(0,n.Z)({file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0},e.base),cover:{file_url:u.is.hb_bottom_957,w:u.TE.width,h:u.TE.receiveHeight,x:-1,y:-1,duration:-1,start_time:0,file_type:h.p0.PNG},pag_arg:(0,n.Z)((0,n.Z)({w:u.TE.width,h:u.TE.receiveHeight},_[0]),e.pagArg),request_id:"cover_dynamic_".concat(g.Z_.uuid())};return t},Y=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,c,l,u,d,p,m,f,h,g=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:0,c=K(t),e.next=4,pe([c],"coverDynamic");case 4:return l=e.sent,u=s.ZP.prototype.$isAtmosphereUser?Z:D,s.ZP.prototype.$isAtmosphereUser&&(0,v.H)("使用氛围限定大小限制",JSON.stringify({MAX_SIZE:u})),d=l.result[0],p=d.url,m=d.md5,e.next=10,(0,o.hR)(null===(i=l.result[0])||void 0===i?void 0:i.url);case 10:if(f=e.sent,console.info("【动态】拆红包页PAG大小：",f/1024,"kb","是否超过：",f>u),!(f>u)){e.next=20;break}if(!(r>=_.length-1)){e.next=16;break}throw(0,v.H)("【动态】拆红包页大小超标",JSON.stringify({pagUrl:t.base.file_url})),Error("拆红包页动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");case 16:return h=r+1,(0,v.H)("【动态】拆红包页生成降级",JSON.stringify({qfs:_[h]})),t.pagArg=(0,n.Z)((0,n.Z)({},c.pag_arg),_[h]),e.abrupt("return",Y(t,h));case 20:return e.abrupt("return",{url:p,md5:m});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:return i=e.sent,e.abrupt("return",{pagUrl:null===i||void 0===i?void 0:i.url,pagMd5:i.md5});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){if(!e.whole.file_type||!e.whole.file_url)throw(0,v.H)("合成发红包页缺少参数",JSON.stringify(e)),new Error("合成发红包页缺少参数");var t={gen_type:c.rv.DIRECT_TO_PAG,scene:e.scene||c.a1.FIRST_UPLOAD,whole:(0,n.Z)({file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0},e.whole),pag_arg:(0,n.Z)((0,n.Z)({w:u.s9.width,h:u.s9.height},k[0]),e.pagArg),request_id:"corp_".concat(g.Z_.uuid())};return t},ee=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,s,c,l,u,d,p,m,f=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=f.length>1&&void 0!==f[1]?f[1]:0,r=$(t),e.next=4,pe([r],"corp");case 4:return s=e.sent,c="",e.next=8,(0,o.hR)(s.result[0].url);case 8:if(l=e.sent,u=s.result[0],d=u.url,p=u.md5,console.info("【动态】发红包页PAG大小：",l/1024,"kb","是否超过：",l>E),!(l>E)){e.next=22;break}if(!(i>=k.length-1)){e.next=18;break}return e.next=15,te(s.result[0].url);case 15:return c=e.sent,(0,v.H)("【动态】发红包页大小超标，降低为图片",JSON.stringify({pagUrl:t.whole.file_url})),e.abrupt("return",{picBase64:c,type:"static",url:"",md5:""});case 18:return m=i+1,(0,v.H)("【动态】发红包页生成降级",JSON.stringify({qfs:k[m]})),t.pagArg=(0,n.Z)((0,n.Z)({},r.pag_arg),k[m]),e.abrupt("return",ee(t,m));case 22:return e.abrupt("return",{url:d,md5:p});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=setTimeout((function(){(0,v.H)("corp获取首帧超时")}),5e3),e.next=3,Q({fileUrl:t,width:u.s9.width,height:u.s9.height,type:"corp"});case 3:if(n=e.sent,clearTimeout(i),!n){e.next=9;break}return e.abrupt("return",n);case 9:return(0,v.H)("生成发红包页静态图失败",JSON.stringify(t)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:if(i=e.sent,!i.picBase64||"static"!==i.type){e.next=5;break}return e.abrupt("return",{pagUrl:"",pagMd5:"",picBase64:i.picBase64});case 5:return e.abrupt("return",{pagUrl:null===i||void 0===i?void 0:i.url,pagMd5:i.md5});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(e){if(!e.whole.file_type||!e.whole.file_url)throw(0,v.H)("合成气泡缺少参数",JSON.stringify(e)),new Error("合成气泡缺少参数");var t={gen_type:c.rv.DIRECT_TO_PAG,scene:e.scene||c.a1.FIRST_UPLOAD,whole:(0,n.Z)({file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0},e.whole),pag_arg:(0,n.Z)((0,n.Z)({w:u.Mx.width,h:u.Mx.height},I[0]),e.pagArg),request_id:"bubble_".concat(g.Z_.uuid())};return t},ae=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,s,c,l,u,d,p,m,f=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=f.length>1&&void 0!==f[1]?f[1]:0,r=ne(t),e.next=4,pe([r],"bubble");case 4:return s=e.sent,c=s.result[0],l=c.url,u=c.md5,e.next=8,(0,o.hR)(l);case 8:if(d=e.sent,p="",console.info("【动态】气泡生成结果：气泡PAG大小：",d/1024,"kb","是否超过：",d>R,"生成的pag链接：",s.result[0].url),!(d>R)){e.next=22;break}if(!(i>=I.length-1)){e.next=18;break}return e.next=15,re(s.result[0].url);case 15:return p=e.sent,(0,v.H)("【动态】气泡大小超标，降低为图片",JSON.stringify({pagUrl:t.whole.file_url})),e.abrupt("return",{picBase64:p,type:"static",url:"",md5:""});case 18:return m=i+1,(0,v.H)("【动态】气泡生成降级",JSON.stringify({qfs:I[m]})),t.pagArg=(0,n.Z)((0,n.Z)({},r.pag_arg),I[m]),e.abrupt("return",ae(t,m));case 22:return e.abrupt("return",{url:l,md5:u});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=setTimeout((function(){(0,v.H)("气泡获取首帧超时")}),11e3),e.next=3,Q({fileUrl:t,width:u.Mx.width,height:u.Mx.height,type:"bubble"});case 3:if(n=e.sent,clearTimeout(i),!n){e.next=9;break}return e.abrupt("return",n);case 9:return(0,v.H)("生成气泡静态图失败",JSON.stringify({pagUrl:t})),e.abrupt("return","");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,(0,v.H)("开始取尾帧",JSON.stringify({pagUrl:t})),e.next=4,Q({fileUrl:t,width:u.Mx.width,height:u.Mx.height,lastFrame:!0,type:"bubble_last_frame"});case 4:if(i=e.sent,!i){e.next=18;break}return e.next=8,(0,d.U)(i,{image_name:"dynamic_bubble_last_frame"});case 8:if(n=e.sent,!n){e.next=14;break}return(0,v.H)("获取到尾帧并上传成功",JSON.stringify({url:null===n||void 0===n?void 0:n.url})),e.abrupt("return",n);case 14:return(0,v.H)("上传尾帧失败"),e.abrupt("return",{url:"",md5:"",baseResponse:{ret:0,msg:""}});case 16:e.next=20;break;case 18:return(0,v.H)("获取不到尾帧"),e.abrupt("return",{url:"",md5:"",baseResponse:{ret:0,msg:""}});case 20:e.next=27;break;case 22:throw e.prev=22,e.t0=e["catch"](0),console.warn("生成红包气泡尾帧失败",e.t0),(0,v.H)("生成红包气泡尾帧失败",JSON.stringify({pagUrl:t,err:e.t0})),e.t0;case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n,r,o;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:if(o=e.sent,console.info("--- ~ pagRes:",o),"static"!==o.type||!o.picBase64){e.next=8;break}return e.abrupt("return",{pagUrl:"",pagMd5:"",lastFrameMd5:"",lastFrameUrl:"",picBase64:o.picBase64});case 8:return e.next=10,oe(o.url);case 10:r=e.sent,console.info("--- ~ lastFrame:",r),(0,v.H)("拿到的尾帧",JSON.stringify({lastFrame:r}));case 13:return e.abrupt("return",{pagUrl:null===o||void 0===o?void 0:o.url,pagMd5:o.md5,lastFrameUrl:(null===(i=r)||void 0===i?void 0:i.url)||"",lastFrameMd5:(null===(n=r)||void 0===n?void 0:n.md5)||""});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,n,r,o,s,l,d;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("视频链接为空");case 2:return i=null,e.prev=3,e.next=6,pe([{gen_type:c.rv.DIRECT_TO_PAG,scene:c.a1.JUST_CHECK_MP4,whole:{file_type:h.p0.MP4,file_url:t,duration:3,w:-1,h:-1},pag_arg:{w:u.TE.width,h:u.TE.height,fps:24,quality:70},request_id:"checkMp4_".concat(g.Z_.uuid())}],"checkMp4");case 6:if(i=e.sent,0!==i.result[0].checkResult){e.next=11;break}return e.abrupt("return",i.result[0]);case 11:throw d=new Error("".concat(p.mj[Number(null===(n=i.result)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.checkResult)]||"校验素材不通过，请重试")),d.checkResult=null===(o=i)||void 0===o||null===(s=o.result)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.checkResult,d;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e["catch"](3),(0,v.H)("检查mp4失败",JSON.stringify({res:i,err:e.t0})),new Error(e.t0.message||"MP4校验素材失败，请重试");case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,o,s,l,u,d,m;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,pe([{gen_type:c.rv.DIRECT_TO_PAG,scene:c.a1.JUST_CHECK_ZIP,above:{file_type:h.p0.ZIP,file_url:t,w:-1,h:-1,x:-1,y:-1},request_id:"checkZip_".concat(g.Z_.uuid())}],"checkZip");case 4:if(i=e.sent,0!==i.result[0].checkResult){e.next=9;break}return e.abrupt("return",i.result[0]);case 9:throw m=new Error("".concat(p.mj[Number(i.result[0].checkResult)]||"压缩包检查不通过，请重试")),m.checkResult=null===(r=i)||void 0===r||null===(o=r.result)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.checkResult,m.zipPicNum=null===(l=i)||void 0===l||null===(u=l.result)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.zipPicNum,m;case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e["catch"](1),(0,v.H)("检查压缩包不通过",JSON.stringify((0,n.Z)({url:t},i))),new Error(e.t0.message||"压缩包校验素材失败，请重试");case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){if(!e.base.file_type||!e.base.file_url||!e.above.file_type||!e.above.file_url)throw(0,v.H)("合成挂件缺少参数",JSON.stringify(e)),new Error("合成挂件缺少参数，请重新上传挂件");var t={gen_type:c.rv.WIDGET_PACKET,scene:c.a1.WIDGET_PNG_ZIP,base:(0,n.Z)({file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0},e.base),above:(0,n.Z)({file_type:h.p0.MP4,file_url:"",w:u.g$.width,h:u.g$.height,x:0,y:0,duration:-1,start_time:0},e.above),cover:{file_url:u.is.hb_bottom_957,file_type:h.p0.PNG},pag_arg:(0,n.Z)((0,n.Z)({w:u.g$.width,h:u.g$.height},_[0]),e.pagArg),request_id:"widget_".concat(g.Z_.uuid())};return t},de=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var i,r,c,l,u,d,p,m,f,h,g=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:0,c=ue(t),e.next=4,pe([c],"widget");case 4:return l=e.sent,u=s.ZP.prototype.$isAtmosphereUser?Z:D,s.ZP.prototype.$isAtmosphereUser&&(0,v.H)("使用氛围限定大小限制",JSON.stringify({MAX_SIZE:u,type:"widget"})),d=l.result[0],p=d.url,m=d.md5,e.next=10,(0,o.hR)(null===(i=l.result[0])||void 0===i?void 0:i.url);case 10:if(f=e.sent,console.info("【动态】异形拆红包页PAG大小：",f/1024,"kb","是否超过：",f>u),!(f>u)){e.next=20;break}if(!(r>=_.length-1)){e.next=16;break}throw(0,v.H)("【动态】异形拆红包页大小超标",JSON.stringify({pagUrl:t.base.file_url})),Error("拆红包页动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");case 16:return h=r+1,(0,v.H)("【动态】异形拆红包页生成降级",JSON.stringify({qfs:_[h]})),t.pagArg=(0,n.Z)((0,n.Z)({},c.pag_arg),_[h]),e.abrupt("return",de(t,h));case 20:return e.abrupt("return",{pagUrl:p,pagMd5:m});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,i){var n,l,u,d,p,m,f;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=0,l=300,u="".concat(i,"_").concat(g.Z_.uuid()),d=s.ZP.prototype.genVersion,p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var r,m,f,h,g,b;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(h=i.startsWith("atmosphere"),!(h&&d<s.ZP.prototype.genAtmosphereVersion||d<s.ZP.prototype.genVerion)){e.next=4;break}return(0,v.H)("checkSuccess版本废弃",JSON.stringify({version:d,curVersion:s.ZP.prototype.genVersion})),e.abrupt("return",{baseResponse:{ret:0,msg:""},result:[{url:"",md5:"",checkResult:0,zipPicNum:0,zipWidgetUrl:"",request_id:"",status:c.qh.GEN_PAG_SUCC}]});case 4:if(n+=1,g=t.map((function(e){return e.request_id})),g.every((function(e){return e}))){e.next=8;break}throw new Error("".concat(i,"需要传入request_id"));case 8:return e.next=10,c.yQ.coverGetGenPagResult({order_id:u,request_ids:g},{type:i});case 10:if(b=e.sent,!((null===b||void 0===b||null===(r=b.result)||void 0===r?void 0:r.length)>0&&null!==b&&void 0!==b&&null!==(m=b.result)&&void 0!==m&&m.every((function(e){return e.status===c.qh.GEN_PAG_SUCC})))){e.next=14;break}return b.result.forEach((function(e){e.url=y(e.url),e.zipWidgetUrl=y(e.zipWidgetUrl)})),e.abrupt("return",b);case 14:if(n%5===0&&(0,v.H)("".concat(i,"_动态素材生成中"),JSON.stringify({orderId:u,checkTimes:n})),!(n>=l)){e.next=18;break}throw(0,v.H)("".concat(i,"_动态素材生成超时"),JSON.stringify({orderId:u,checkTimes:n,infos:t})),new Error("动态素材生成超时，请重试");case 18:if(0!==(null===b||void 0===b?void 0:b.result.length)&&null!==b&&void 0!==b&&b.result.every((function(e){return e.status===c.qh.GEN_PAG_SUCC}))){e.next=22;break}return e.next=21,(0,o._v)(1e3);case 21:return e.abrupt("return",p());case 22:if(b&&(null===b||void 0===b||null===(f=b.result)||void 0===f||!f.some((function(e){return e.status===c.qh.GEN_PAG_FAIL})))){e.next=25;break}throw(0,v.H)("".concat(i,"_动态素材生成失败"),JSON.stringify({orderId:u,checkTimes:n,infos:t})),new Error("动态素材生成失败，请重试");case 25:throw(0,v.H)("动态素材生成失败未知错误",JSON.stringify({orderId:u,checkTimes:n,type:i,infos:t})),new Error("动态素材生成错误，请重试");case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,c.yQ.coverBatchGenPag({order_id:u,infos:t},{type:i});case 7:if(m=e.sent,e.prev=8,0!==(null===m||void 0===m?void 0:m.baseResponse.ret)){e.next=18;break}return e.next=12,(0,o._v)(3e3);case 12:return e.next=14,p();case 14:return f=e.sent,e.abrupt("return",f);case 18:throw(0,v.H)("发起素材转化失败",JSON.stringify({batchRes:m,orderId:u})),new Error("发起动态素材转化失败，请重试");case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e["catch"](8),new Error(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[8,22]])})));return function(t,i){return e.apply(this,arguments)}}()},41757:function(e,t,i){"use strict";i.d(t,{g:function(){return f}});var n=i(93830),a=i(17519),r=(i(92222),i(94375)),o=i.n(r),s=i(40881),c=i(20144);i(69600),i(21249),i(47941);function l(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}function u(e){setTimeout((function(){(new Image).src="https://support.weixin.qq.com/cgi-bin/mmsupportmeshnodelogicsvr-bin/cube?".concat(l(e))}),10)}var d=i(52117),p={isDevelopment:!1,isProduction:!0},v=3512;function m(e){if(p.isDevelopment)console.info("Merlin is not initialized.");else try{o().init({debug:!0,release:"24030601",collectors:[new r.GeneralWebErrorCollector,new r.VueErrorCollector({vue:c.ZP})],transports:[new s.ConsoleTransport,new r.CubeErrorTransport({bizId:5588,mid:"mmredpacketcoverlogicsvr",groupKey:"cover.home.".concat(e),moduleName:"mmredpacketcoverlogicsvr",uriMapper:function(e){if("string"===typeof e){0;try{var t,i=e.split("?")[1]||"",r=i.split("&"),o=(0,a.Z)(r);try{for(o.s();!(t=o.n()).done;){var s=t.value,c=s.split("="),l=(0,n.Z)(c,2),u=l[0],d=l[1];if("t"===u)return d}}catch(p){o.e(p)}finally{o.f()}}catch(v){return console.error(v),e}}return"".concat(e)}})]})}catch(t){u({biz:v,label:"cover.home.merlin.error",action:"merlinInitError",msg:"".concat(t,", ").concat(null===t||void 0===t?void 0:t.message),uin:(0,d.w)()})}}var f={initMerlinErrorReport:m,errorReporter:o(),reportError:p.isDevelopment?function(e){console.info("error is not report on development: ",e)}:o().reportError}},94736:function(e){"use strict";e.exports="data:image/png;base64,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"},27983:function(e,t,i){"use strict";e.exports=i.p+"img/banner_page_0.eaff6989.png"},12074:function(e,t,i){"use strict";e.exports=i.p+"img/bg-index.7e3c09e7.png"},18337:function(e,t,i){"use strict";e.exports=i.p+"img/biz_qr.631b1093.png"},75950:function(e,t,i){"use strict";e.exports=i.p+"img/bless.2bdb05cc.png"},72190:function(e){"use strict";e.exports="data:image/png;base64,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"},12963:function(e,t,i){"use strict";e.exports=i.p+"img/case-header-bottom.5d6bf1a9.png"},88014:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA8CAYAAAA34qk1AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAOqADAAQAAAABAAAAPAAAAAAPI3xuAAABY0lEQVRoBe1b0Q2CQAz1jGM4B4l7CHs4iXvAICbM4R7YS/x4YnI58Q5K+0hMCvF6fX2vTQENTdO00zT1B0VHCKEbx3EoGdKxpDPNvghUMztLYjvNF0l9DFIf3fx6zXPpE730ibbmHpRuzexu4ZuMbpH1mnu6YfSr62JWc7shTjK5k9ba3d0NowSKErZgJ2t0yYT0vusI2pJD6Wpj5N94yOi/GdS23g2jya7LyUibLjPiSTKasb7WVy6ipmK+Za5+qAQqj1VugjJ+Sh1dEigno1J5XtFPktEV4/jYKtaUXHh+XPzt5CLyP+MSlUAlwPv75gBjzbalkcXXGVdc4GZgcAM0KV1ORij+ndhupOsGaLJGORntpC4xTDfSJVCk3YJNRi2wiBjIKGbDgk1GLbCIGMgoZsOCTUYtsIgYyChmw4JNRi2wiBjIKGbDgu2G0SBP49X976W0guKvT90wSqCl5bO1vxfigmbR4le8BwAAAABJRU5ErkJggg=="},41854:function(e){"use strict";e.exports="data:image/png;base64,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"},20005:function(e,t,i){"use strict";e.exports=i.p+"img/crop2.671b1bc2.png"},40183:function(e){"use strict";e.exports="data:image/png;base64,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"},79337:function(e,t,i){"use strict";e.exports=i.p+"img/emotion-rain.29803349.gif"},31317:function(e,t,i){"use strict";e.exports=i.p+"img/example_11.0d9f44d3.png"},93807:function(e,t,i){"use strict";e.exports=i.p+"img/example_22.6348b005.png"},70964:function(e,t,i){"use strict";e.exports=i.p+"img/example_bubble_0.acb74e8a.png"},4299:function(e,t,i){"use strict";e.exports=i.p+"img/example_bubble_1.80f0c0b7.png"},69716:function(e,t,i){"use strict";e.exports=i.p+"img/example_bubble_2.b884a553.png"},27442:function(e,t,i){"use strict";e.exports=i.p+"img/logo.e7e0e255.png"},94681:function(e,t,i){"use strict";e.exports=i.p+"img/make_story_bg.4f79ddfe.png"},38036:function(e){"use strict";e.exports="data:image/png;base64,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"},50545:function(e){"use strict";e.exports="data:image/png;base64,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"},21637:function(e){"use strict";e.exports="data:image/png;base64,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"},96611:function(e,t,i){"use strict";e.exports=i.p+"img/qrcode.9320307e.png"},64427:function(e){"use strict";e.exports="data:image/png;base64,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"},6012:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAQlBMVEUAAACenp6kpKShoaGysrLBwcHV1dWrq6u5ubm8vLzAwMDFxcXIyMjNzc3Pz8/MzMyampr////19fWqqqrFxcXKysrldLGSAAAAEHRSTlMA/vv+6JkS9M27o4RiMyAFM4zOlgAAAQVJREFUSMeM0d0OgyAMhuG2IP5OPxTv/1Zn4jI66ZTnjOT9DkipEMbOi2N24rsx0IO58QyFfTPf5KF3KLg+kG0ZBCYZFjK8WvzVvqgwCW7IRBcN4xY3lx6PfhYT4xFP6r+CCvL9+dKiSrvQaUCl4XNfQSU5b96jWk+H2UFLG5QtQXNzcYI9rpvq17gXx/BQUozHQvUxJiieKDAOOcmL/Mg40AhYC7sHRupgL+weHXnYC7uHJ4G9sHsIOdgLu4cjhr2we/C70jqgAQCGYRjGn7UxGMCl/+uS9oG+Uj+6v7UH19Ho8G28e4F6RRcCjZkFWaNyYby4X6G8sl6Kr90X+1eHLyddfwCXjHBtfrtDPwAAAABJRU5ErkJggg=="},42480:function(){}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=e,function(){i.amdO={}}(),function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=function(e){e&&!e.d&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},r=function(i){return i.map((function(i){if(null!==i&&"object"===typeof i){if(i[e])return i;if(i.then){var r=[];r.d=0,i.then((function(e){o[t]=e,a(r)}),(function(e){o[n]=e,a(r)}));var o={};return o[e]=function(e){e(r)},o}}var s={};return s[e]=function(){},s[t]=i,s}))};i.a=function(i,o,s){var c;s&&((c=[]).d=1);var l,u,d,p=new Set,v=i.exports,m=new Promise((function(e,t){d=t,u=e}));m[t]=v,m[e]=function(e){c&&e(c),p.forEach(e),m["catch"]((function(){}))},i.exports=m,o((function(i){var a;l=r(i);var o=function(){return l.map((function(e){if(e[n])throw e[n];return e[t]}))},s=new Promise((function(t){a=function(){t(o)},a.r=0;var i=function(e){e!==c&&!p.has(e)&&(p.add(e),e&&!e.d&&(a.r++,e.push(a)))};l.map((function(t){t[e](i)}))}));return a.r?s:o()}),(function(e){e?d(m[n]=e):u(v),a(c)})),c&&(c.d=0)}}(),function(){var e=[];i.O=function(t,n,a,r){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[c])}))?n.splice(c--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};i.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var r=Object.create(null);i.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return n[e]}}));return o["default"]=function(){return n},i.d(r,o),r}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/"+(971===e?"group-doc":e)+"-legacy."+{55:"f3f6aa2a",222:"74b78522",525:"f84f8fa8",971:"d508918d",981:"c3f6d0c4",996:"146c81ed"}[e]+".js"}}(),function(){i.miniCssF=function(e){return"css/"+(971===e?"group-doc":e)+"."+{55:"21d1e014",525:"3f73555f",971:"f397de67",981:"6e17c0db",996:"f8dba212"}[e]+".css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="red-envelope-cover-platform:";i.l=function(n,a,r,o){if(e[n])e[n].push(a);else{var s,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[a];var p=function(t,i){s.onerror=s.onload=null,clearTimeout(v);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(i)})),t)return t(i)},v=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=826}(),function(){i.p="//res.wx.qq.com/t/wx_fed/base/cover/red-envelope-cover-platform/res/"}(),function(){var e=function(e,t,i,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var r=function(r){if(a.onerror=a.onload=null,"load"===r.type)i();else{var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=s,a.parentNode.removeChild(a),n(c)}};return a.onerror=a.onload=r,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var a=i[n],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var o=document.getElementsByTagName("style");for(n=0;n<o.length;n++){a=o[n],r=a.getAttribute("data-href");if(r===e||r===t)return a}},n=function(n){return new Promise((function(a,r){var o=i.miniCssF(n),s=i.p+o;if(t(o,s))return a();e(n,s,a,r)}))},a={826:0};i.f.miniCss=function(e,t){var i={55:1,525:1,971:1,981:1,996:1};a[e]?t.push(a[e]):0!==a[e]&&i[e]&&t.push(a[e]=n(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={826:0};i.f.j=function(t,n){var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise((function(i,n){a=e[t]=[i,n]}));n.push(a[2]=r);var o=i.p+i.u(t),s=new Error,c=function(n){if(i.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,a[1](s)}};i.l(o,c,"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],s=n[1],c=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(c)var u=c(i)}for(t&&t(n);l<o.length;l++)r=o[l],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=self["webpackChunkred_envelope_cover_platform"]=self["webpackChunkred_envelope_cover_platform"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998,64],(function(){return i(60779)}));n=i.O(n)})();
//# sourceMappingURL=index-legacy.56336c29.js.map
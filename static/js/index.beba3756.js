(function(){var e={48497:function(e,t,i){"use strict";i.d(t,{Z:function(){return F}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"sign-up":e.isSignUping,"doc-container":e.isDoc},attrs:{id:"app"}},[e.isSignUping?e._e():t("HeaderBar",{attrs:{avatar:e.avatar,isLogin:e.isLogin}}),e.$router.currentRoute.meta?.showSideBar?t("mp-layout",{class:e.navigationIsNarrow?"layout__navigation-is-narrow":"layout__navigation-is-wide",scopedSlots:e._u([{key:"aside",fn:function(){return[t("mp-navigation",{ref:"nagivation",staticClass:"main-navigation",attrs:{defaultOpenIndex:e.defaultOpenIndex,"critical-flod":1500},on:{resize:e.handleNavigationResize}},[t("mp-navigation-item",{attrs:{icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-redpacket.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-redpacket-filled.png",active:["detail","covers","make","invoiceSuccess","pay","paySuccess","submitSuccess","revokeSuccess","refundSuccess","statistics"].includes(e.$router.currentRoute.name),href:"#/covers"}},[e._v(" 我的红包封面 ")]),t("mp-navigation-sub",{ref:"navSub1",class:["navigation-sub",{"show-red-point":e.showQuotaRedPoint}],attrs:{icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-order.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-order-filled.png",title:"订单/发放记录",index:e.orderMenuIndex}},e._l(e.orderMenu,(function(i){return t("mp-navigation-item",{key:i.routerName,attrs:{active:e.$router.currentRoute.name===i.routerName||i.active&&i.active.includes(e.$router.currentRoute.name),href:`#/${i.routerName}`}},[e._v(e._s(i.name)+" "),"封面兑换卡"===i.name&&e.showQuotaRedPoint?t("span",{staticClass:"sub-red-dot"}):e._e()])})),1),t("mp-navigation-item",{attrs:{icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-member.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-member-filled.png",active:"administrator"===e.$router.currentRoute.name,href:"#/administrator"}},[e._v(" 成员管理 ")]),t(e.OpenInvoiceSwitch?"mp-navigation-sub":"mp-navigation-item",{ref:"navSub2",tag:"component",class:e.OpenInvoiceSwitch?"navigation-sub":"navigation-disabled",attrs:{title:"发票管理",index:"invoiceManage",icon:"https://res.wx.qq.com/t/fed_upload/c2ec1b66-94db-4d5c-93af-af5b63fc2431/icon-invoice.svg","active-icon":"https://res.wx.qq.com/t/fed_upload/4e28d4b7-df07-4432-82c7-5101dc10419d/icon-invoice-filled.png"}},[t("mp-navigation-item",{attrs:{active:1===+e.$route.query.nav,href:"#/invoice_manage?nav=1"}},[e._v("开发票")]),t("mp-navigation-item",{attrs:{active:2===+e.$route.query.nav,href:"#/invoice_manage?nav=2"}},[e._v("开票记录")])],1)],1)]},proxy:!0}],null,!1,140340741)},[t("router-view",{staticClass:"app-body"}),e.noFooter?e._e():t("TheFooter",{staticClass:"layout-footer"})],1):[t("router-view",{staticClass:"app-body"}),e.noFooter?e._e():t("TheFooter")],t("FixWidget")],2)},s=[],r=(i(57658),i(20144)),o=i(57582),n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"header-bar-wrapper"},[t("div",{staticClass:"header-placeholder",style:{height:`${e.headerBarHeight}px`}}),t("div",{ref:"headerBar",staticClass:"header-bar-wrap",class:{"is-index":e.isIndex}},[t("div",{staticClass:"header-bar"},[t("div",{staticClass:"brand",on:{click:function(t){return e.goto("covers")}}},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:e.LogoImg}})]),t("div",{staticClass:"name"},[e._v("微信红包封面开放平台")])]),t("div",{staticClass:"navigator"},[t("div",{staticClass:"menu-list"},[t("div",{staticClass:"menu-item",class:{active:"case"===e.routerName},on:{click:function(t){return e.goto("case","_blank")}}},[e._v("优秀案例")]),t("div",{staticClass:"menu-item",class:{active:"doc"===e.routerName},on:{click:function(t){return e.goto("questionAnswer","_blank")}}},[e._v("帮助中心")]),t("div",{staticClass:"menu-item",class:{active:"notice"===e.routerName},on:{click:function(t){return e.goto("notice","_blank")}}},[e._v(" 公告 "),e.hasNewNotice?t("div",{staticClass:"new-tag"},[t("img",{attrs:{src:i(38036)}})]):e._e()])]),e.isLogin?[t("mp-popover",{staticClass:"user-menu-popover",attrs:{trigger:"hover",width:116},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",{staticClass:"user"},[t("img",{staticClass:"avatar",attrs:{src:e.avatar||e.defaultAvatar}}),t("account-label")],1)]},proxy:!0}],null,!1,249095123)},[t("div",{staticClass:"user-menu-list"},[t("div",{staticClass:"user-menu-item",on:{click:e.logout}},[e._v("退出登录")])])])]:[t("div",{staticClass:"login",class:{active:"login"===e.routerName},on:{click:e.login}},[e._v("登录")]),t("div",{staticClass:"signup",on:{click:e.signup}},[e._v("注册")])]],2)])])])},c=[],l=i(20629),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"AccountLabel-Component"},[t("div",{class:["nickname",{bottom:e.label}]},[e._v(" "+e._s(e.nickname)+" "),t("div",{class:["arrow-down",{"move-left":e.redPointOpacity}]},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]),e.label?t("span",{staticClass:"account-type"},[e._v(e._s(e.label))]):e._e()])},p=[];const{mapGetters:u}=(0,l._p)("user");var h=r.ZP.extend({components:{},data(){return{redPointOpacity:!1}},computed:{...u(["accountType"]),label(){const e=this.accountType,t={0:"",1:"公众号",2:"视频号"};return t[e]||""},nickname(){return o.U6.user.nickname}},methods:{}}),m=h,g=i(1001),v=(0,g.Z)(m,d,p,!1,null,"cfa18488",null),f=v.exports,y=i(85880),_=i(18205);const C=new y.ZP,{mapGetters:b}=(0,l._p)("user");var w=r.ZP.extend({name:"HeaderBar",components:{AccountLabel:f},data(){return{LogoImg:_.is.logo,headerBarHeight:0}},props:{isLogin:Boolean,avatar:String},computed:{...b(["showQuotaRedPoint"]),routerName(){return this.$route.name},isIndex(){return"index"===this.$route.name},hasNewNotice(){return o.PJ.hasNewNotice},OpenInvoiceSwitch(){return o.U6.auth.OpenInvoiceSwitch}},created(){o.PJ.getNoticeList()},mounted(){this.getHeaderBarHeight()},methods:{getHeaderBarHeight(){const e=this.$refs.headerBar;e&&(this.headerBarHeight=e.scrollHeight)},async goto(e,t){if("questionAnswer"!==e){if("covers"===e&&C.baseActionReport({actionType:"9",authorId:o.U6.user.authorId}),this.$route.name!==e){if("_blank"===t){const t=this.$router.resolve({name:e});return void window.open(t.href,"_blank")}this.$router.push({name:e})}}else{const e=this.$router.resolve({name:"doc",query:{page:"introduce"}});window.open(e.href,"_blank")}},gotoIndex(){if("index"!==this.$route.name)return this.$router.push({name:"index"})},login(){"login"!==this.$route.name&&this.$router.push({name:"login"})},signup(){const{origin:e,pathname:t,search:i}=window.location,a=`${e}${t}${i}#/signup/sign_should_know`;window.open(a,"_blank")},async logout(){await o.U6.logout(),"index"!==this.$route.name&&this.$router.push({name:"index"})}}}),I=w,k=(0,g.Z)(I,n,c,!1,null,"adb6e020",null),T=k.exports,S=i(19786),x=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},A=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"FixWidget-Component"},[t("div",{staticClass:"widget-item"},[t("i",{staticClass:"icon-qrcode"}),e._v(" 封面助手 "),t("div",{staticClass:"widget-hover"},[t("div",{staticClass:"info-item gzh-info"},[t("img",{staticClass:"qrcode-img",attrs:{src:i(96611)}}),t("div",{staticClass:"info-item-name"},[e._v("微信红包封面")]),t("div",{staticClass:"info-item-desc"},[e._v("了解平台动态")])]),t("div",{staticClass:"info-item miniapp-info"},[t("img",{staticClass:"miniapp-qrcode-img",attrs:{src:i(21637)}}),t("div",{staticClass:"info-item-name"},[e._v("微信红包封面助手")]),t("div",{staticClass:"info-item-desc"},[t("div",[e._v("随时发放封面")]),t("div",[e._v("了解发放数据")])])])])]),t("div",{staticClass:"widget-item",attrs:{id:"qidian-kf"}},[t("i",{staticClass:"icon-kf"}),e._v("客服")])])}],P=r.ZP.extend({components:{},data(){return{}},computed:{routeName(){return this.$route.name||""}},methods:{}}),D=P,U=(0,g.Z)(D,x,A,!1,null,"2ee50e6b",null),E=U.exports;const{mapGetters:R}=(0,l._p)("user");var M=r.ZP.extend({name:"app",components:{HeaderBar:T,TheFooter:S.Z,FixWidget:E},data(){return{defaultOpenIndex:[],orderMenu:[{routerName:"orders",name:"我的订单",active:["order"]},{routerName:"receiveobjects",name:"发放记录"},{routerName:"exchange",name:"封面兑换卡"}],navigationIsNarrow:!1}},computed:{...R(["showQuotaRedPoint"]),orderMenuIndex(){const e=this.orderMenu.map((e=>e.routerName)).join("_");return e},OpenInvoiceSwitch(){return o.U6.auth.OpenInvoiceSwitch},isLogin(){return!(!o.U6.user||!o.U6.user.authorId)},isSignUping(){return this.$route.path.indexOf("signup")>-1},isDoc(){return this.$route.path.indexOf("/doc")>-1},isIndex(){return"index"===this.$route.name},noFooter(){return"doc"===this.$route.name||"make"===this.$route.name},avatar(){return o.U6.user.headImgUrl}},watch:{$route:{handler(){this.handleRouteChange()},immediate:!0}},mounted(){setTimeout((()=>this.initNav()),50)},methods:{async initNav(){const e=document.querySelector(".weui-desktop-menu__sub__link");e&&!e.classList.contains("weui-desktop-menu__sub-unfold")&&e?.click()},handleNavigationResize(e){this.navigationIsNarrow="narrowNavigation"===e.currentNavigationWidth},async handleDefaultOpenIndex(){const e=this.$refs?.navSub1,t=this.$refs?.navSub2,i=[],a=this.$router.currentRoute.name,s=this.orderMenu.find((e=>e.routerName===a||e?.active?.includes(a))),r="invoiceManage"===a;s&&i.push(this.orderMenuIndex),r&&i.push("invoiceManage"),this.defaultOpenIndex=i,await this.$nextTick(),e?.isInitOpen?.(),t?.isInitOpen?.(),this.$refs.nagivation?.isNarrow||(s&&!e?.isShowSubNav&&e?.switchSubNav(),r&&!t?.isShowSubNav&&t?.switchSubNav())},handleRouteChange(){this.handleDefaultOpenIndex()}}}),L=M,N=(0,g.Z)(L,a,s,!1,null,null,null),F=N.exports},86610:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{attrs:{width:620,trigger:"hover",position:e.position},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{top:"1px",position:"relative"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"leading-normal",staticStyle:{color:"#9a9a9a"}},[t("div",{staticClass:"pop-title mb-2"},[e._v("开启「封面推广」后，封面可同时通过以下方式发放，加速封面传播：")]),e.isQuotaGift?e._e():t("div",{staticClass:"pop-content mb-2"},[t("div",{staticClass:"font-medium"},[e._v("1、借助用户分享行为裂变发放")]),t("div",[t("span",{staticClass:"mr-1 text-xl font-medium"},[e._v("·")]),e._v("领取封面时，用户可将封面领取链接直接分享到微信聊天中。")]),t("img",{staticStyle:{width:"380px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f31553df-fa10-4b32-8fdf-29050881e548/intro1.jpg"}}),t("div",[t("span",{staticClass:"mr-1 text-xl font-medium"},[e._v("·")]),e._v("使用封面发红包时，红包接收方也可领取同款封面。")]),t("img",{staticStyle:{width:"380px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f31553df-fa10-4b32-8fdf-29050881e548/intro2.jpg"}})]),t("div",{staticClass:"pop-content"},[t("div",{staticClass:"font-medium"},[e.isQuotaGift?e._e():t("span",[e._v("2、")]),e._v(" 在「封面专区」中展示并发放（微信手机端的「封面专区」功能灰度中） ")]),t("div",{staticClass:"mt-1"},[e._v("被灰度的微信用户打开任一聊天> 点击「发红包 > 红包封面 >领封面」后，可以看到并领取你的封面。")]),t("img",{staticStyle:{width:"380px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/8ea1c391-1141-4c60-95b7-f2b8dbacfa11/intro3.jpg"}})])])]},proxy:!0}])})},s=[],r=i(20144),o=(0,r.aZ)({props:{isQuotaGift:{type:Boolean,default:!1},position:{type:String,default:"left-center"}}}),n=o,c=i(1001),l=(0,c.Z)(n,a,s,!1,null,null,null),d=l.exports},58534:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-receive-img",class:{"widget-cover-receive-img":e.widgetCoverSrc}},[e.dynamicSrc?[t("pag-display",{attrs:{url:e.dynamicSrc,autoplay:!0,loop:!0,showType:"preview",name:"order",autoInit:!0}}),t("img",{class:1===e.dynamicType?"open-mask":"dynamic-widget-open-mask",attrs:{src:e.openIconActive}})]:e.openSrc?[t("img",{class:e.widgetCoverSrc?"widgetcover-img receive-img":"receive-img",attrs:{src:e.openSrc}})]:e.widgetCoverSrc?[t("img",{staticClass:"receive-img widgetcover-img",attrs:{src:e.widgetCoverSrc}}),t("img",{staticClass:"widget-open-mask",attrs:{src:e.openIconActive}})]:[e.src?t("img",{staticClass:"receive-img",attrs:{src:e.src}}):e._e(),t("img",{staticClass:"open-mask",attrs:{src:e.openIconActive}})]],2)},s=[],r=i(18205),o=i(20144),n=i(28687),c=o.ZP.extend({name:"CoverReceiveImg",components:{PagDisplay:n.Z},props:{src:String,openSrc:String,widgetCoverSrc:String,dynamicSrc:String,dynamicType:Number},data(){return{openIconActive:r.is.open_icon_active}}}),l=c,d=i(1001),p=(0,d.Z)(l,a,s,!1,null,"74aacd25",null),u=p.exports},23990:function(e,t,i){"use strict";i.d(t,{Z:function(){return A}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("mp-form",{ref:"heatForm",attrs:{"label-width":117,rules:e.formRule,model:e.heatedMaterial}},[t("mp-form-item",{attrs:{prop:"tagName"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label mt-2",staticStyle:{display:"flex","align-items":"center"}},[t("span",{},[e._v("封面主题")]),t("mp-popover",{staticClass:"fission-popover",attrs:{width:395,position:"up-left",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"1px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("封面主题是封面专区的分类关键词，便于用户快速筛选。选择主题后，封面将同时展示在全部列表及对应的封面主题中。")]),t("img",{staticStyle:{width:"255px","margin-top":"16px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f724e641-9b6d-463d-9c48-f61868e3814d/1.png"}})])]},proxy:!0}])})],1)]},proxy:!0}])},[t("mp-dropdown",{attrs:{type:"default",options:e.heatedOption,disabled:3===e.heatedMaterial.type,placeholder:"请选择主题"},model:{value:e.heatedMaterial.tagName,callback:function(t){e.$set(e.heatedMaterial,"tagName",t)},expression:"heatedMaterial.tagName"}})],1),t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label",staticStyle:{top:"2px",position:"relative",display:"flex"}},[t("span",{},[e._v("封面来源")]),t("mp-popover",{staticClass:"fission-popover",attrs:{width:400,position:"up-left",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"1px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("封面专区中的封面都将展示封面来源，用户可通过该来源前往了解你的视频号或公众号。")]),t("img",{staticStyle:{width:"363px","margin-top":"16px"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/f724e641-9b6d-463d-9c48-f61868e3814d/2.png"}})])]},proxy:!0}])})],1)]},proxy:!0}])},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.heatedMaterial.jumpType,callback:function(t){e.$set(e.heatedMaterial,"jumpType",t)},expression:"heatedMaterial.jumpType"}},[t("mp-radio",{attrs:{value:2,disabled:2!==e.heatedMaterial?.type}},[t("span",[e._v("公众号")])]),t("mp-radio",{attrs:{value:4,disabled:2!==e.heatedMaterial?.type}},[t("span",[e._v("视频号")])])],1)],1),t("mp-form-item",{attrs:{prop:"heatedSource"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label mt-2"},[t("span",{},[e._v(e._s(2===e.heatedMaterial.jumpType?"公众号":"视频号"))])])]},proxy:!0}])},[2===e.heatedMaterial.type?[t("mp-button",{attrs:{type:"default"},on:{click:function(t){return e.addCoverSource(!0)}}},[e._v(e._s(e.heatedMaterial.username?"修改":"添加"))]),e.heatedMaterial.username?t("div",{staticClass:"action-wrap"},[e.heatedMaterial.username||e.heatedMaterial.nickname?t("div",{staticClass:"action-info"},[t("div",{staticClass:"action-info_content"},[t("img",{staticClass:"avatar avatar2",attrs:{src:e.heatedMaterial.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.heatedMaterial.nickname))])]),e.showAuthQrcode?t("div",{staticClass:"action-info_authstatus"},[e.authorizeSuccess?t("span",[e._v("(已授权)")]):[t("span",[e._v("(未授权)")]),t("a",{staticClass:"btn-auth-dialog",on:{click:function(t){return t.preventDefault(),e.addCoverSource(!1)}}},[e._v("打开授权码")])]],2):e._e(),t("mp-icon",{attrs:{icon:"xmark_regular",width:16,height:16},nativeOn:{click:function(t){return e.deleteEnter.apply(null,arguments)}}})],1):e._e()]):e._e(),e.authorizeWaiting&&e.heatedMaterial.username?t("div",{staticClass:"auth-tips"},[e._v("未授权无法设置封面推广")]):e._e()]:[t("div",{staticClass:"action-wrap action-wrap_fixed"},[e.afterHeat||3!==e.heatedMaterial.type?e._e():t("mp-button",{attrs:{type:"default",disabled:""}},[e._v("修改")]),e.heatedMaterial.nickname?t("div",{staticClass:"action-wrap"},[t("div",{staticClass:"action-info"},[t("div",{staticClass:"action-info_content"},[t("img",{staticClass:"avatar avatar2",attrs:{src:e.heatedMaterial.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.heatedMaterial.nickname))])])])]):e._e()],1),0===e.heatedMaterial.type?t("div",{staticClass:"auth-tips"},[e._v("封面来源默认为封面故事跳转的视频号/公众号")]):e._e(),1===e.heatedMaterial.type?t("div",{staticClass:"auth-tips"},[e._v("用奖励兑换卡发放的封面，封面来源默认为注册视频号")]):e._e()]],2),e.afterHeat&&3===e.heatedMaterial.type?t("div",{staticClass:"auth-tips",staticStyle:{display:"flex","align-items":"center"}},[e._v(" 当前封面已在推广中，暂不支持修改封面主题和来源。 "),t("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticStyle:{position:"relative",top:"2.5px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[e._v("推广期间，同一款封面仅可使用一个主题及来源。")]},proxy:!0}],null,!1,3769717937)})],1):e._e()],1),t("searchJumpDialog",{attrs:{hideAuthQrcode:e.hideAuthQrcode,orderId:e.cover.orderId,jumpInfo:e.heatedMaterial},on:{submit:e.handleJumpSubmit},model:{value:e.showSearchJumpDialog,callback:function(t){e.showSearchJumpDialog=t},expression:"showSearchJumpDialog"}})],1)},s=[],r=(i(57658),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:`添加${e.searchTypeInfo.title}`,value:e.value,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[!e.hadSearchResult||e.showAuthQrcode&&!e.hideAuthQrcode?e._e():t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.hadSearchResult||e.showError||!e.info.username,loading:e.submitLoading},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1)],1)]},proxy:!0}])},[t("div",{staticClass:"dialog-body"},[!e.hideAuthQrcode&&e.showAuthQrcode?t("div",{staticClass:"qrcode-wrap"},[t("div",{staticClass:"topTitle"},[e._v(e._s(e.topTitle))]),t("div",{staticClass:"qrcode",class:{showMask:1!==e.status,border:!e.authQrcode}},[t("img",{staticClass:"qrq",attrs:{src:"https://res.wx.qq.com/t/fed_upload/b7d329b5-c8e2-434c-b0d5-cb3b52809c30/1.png",alt:""}}),e.authQrcode?t("img",{attrs:{src:e.authQrcode}}):e._e(),t("div",{staticClass:"mask",on:{click:e.genAuthQrcode}},[e.isFailed||e.isExpired?t("svg-icon",{staticClass:"reload-icon",class:{"reload-loading":e.fetchLoading},attrs:{name:"reload"}}):e.isSuccess?t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}}):e._e()],1)]),t("div",{staticClass:"second-tips"},[e._v("有效期为12小时")]),e.isFailed||e.isExpired?t("div",{staticClass:"title"},[t("mp-icon",{staticClass:"fail-icon",attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300"}}),t("span",[e._v("二维码过期，请刷新重试")])],1):e._e()]):[t("mp-input",{attrs:{placeholder:`输入${e.searchTypeInfo.description}`,clearable:""},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap",class:{"default-height":!e.hadSearchResult}},[e.hadSearchResult?t("div",{staticClass:"result-list"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList},on:{"radio-change":e.handleRadioChange}})],1):t("div",{staticClass:"tip"},[e.showError?[t("span",{staticClass:"error"},[e._v(" 请输入正确的"+e._s(e.searchTypeInfo.description))])]:e._e()],2)])]],2)])}),o=[],n=i(20144),c=i(34225),l=i(57582),d=i(20629),p=i(40628),u=i(70898);const h=new c.ZP,{mapGetters:m}=(0,d._p)("user"),{mapGetters:g,mapState:v}=(0,d._p)("auth");var f=(0,n.aZ)({name:"SearchJumpDialog",components:{JumpInfoList:u.Z},data:()=>({querying:"",query:"",info:{},jumpInfoList:[],showError:!1,submitLoading:!1,authInfo:{authQrcode:""},genQrcodeLoading:!1,timer:0,fetchLoading:!1,successTimer:0}),props:{value:Boolean,mode:{type:String,default:"add"},jumpInfo:{type:Object,default:()=>({})},orderId:String,hideAuthQrcode:Boolean},computed:{...g({showAuthQrcode:"showAuthQrcode",actionAuthInfoStatus:"actionAuthInfoStatus",authorizeSuccess:"authorizeSuccess"}),...v({actionAuthInfo:e=>e.actionAuthInfo}),...m(["principalAccountType"]),authQrcode(){return this.actionAuthInfo?.qrcodeBase64},status(){return this.actionAuthInfo?.status},isFailed(){return this.status===p.WX.ACTION_QRCODE_INVAILID},isExpired(){return this.status===p.WX.ACTION_QRCODE_EXPIRED},isSuccess(){return this.status===p.WX.ACTION_QRCODE_COMFIRMED},topTitle(){const e=4===this.jumpInfo.actionType?"绑定的微信":"管理员的微信";return`「${this.jumpInfo.nickname||"-"}」${e}扫码授权后可添加`},hadSearchResult(){return!!this.jumpInfoList.length&&!this.showError},titleText(){const e=this;return"add"===e.mode?"添加":"选择"},accountType(){return l.U6.user.accountType},searchTypeInfo(){const e={2:"公众号微信号/帐号原始ID",4:"视频号名称/绑定的微信号"},t=this.jumpInfo?.jumpType;return{title:p.pK[t],description:e[t]}},qrcodeAction(){const e=this.jumpInfo?.jumpType;return e===p.Us.MPAccount?{actionType:this.jumpInfo.jumpType,mpAccountDetail:{appName:this.info.username}}:e===p.Us.FinderProfile?{actionType:this.jumpInfo.jumpType,finderProfileDetail:{queryString:this.query,username:this.info.username}}:{}}},mounted(){document.addEventListener("keydown",this.handleEnterKeyDown)},beforeDestroy(){document.removeEventListener("keydown",this.handleEnterKeyDown)},watch:{value(e){e||this.clear()},authorizeSuccess(e){e&&this.value&&(this.successTimer=window.setTimeout((()=>{this.closeDialog()}),1e3))}},methods:{handleRadioChange(e){this.info=this.$set(this,"info",e)},handleEnterKeyDown(e){const t="undefined"!=typeof event?window.event:e,i=this;if(t&&13==t.keyCode&&i.value)return t.preventDefault(),t.stopPropagation(),i.search(),!1},clear(){this.info={},this.jumpInfoList=[],this.showError=!1,this.query="",this.querying=""},closeDialog(){this.clear(),this.$emit("input",!1)},async search(){if(this.querying)if(this.showError=!1,this.jumpInfo.jumpType===p.Us.FinderProfile){this.info={};const e=await h.storyGetFinderInfo(this.querying);e&&0===e.baseResponse.ret?(this.jumpInfoList=e.jumpInfoList.filter((e=>!(!e.headImgUrl&&e.scene===c.DS.finder))).sort(((e,t)=>e.isSameBody===t.isSameBody?e.nickname===t.nickname?0:e.nickname?.toLocaleLowerCase()===this.querying?.toLocaleLowerCase()?-1:t.nickname?.toLocaleLowerCase()===this.querying?.toLocaleLowerCase()?1:0:e.isSameBody?-1:1)),this.jumpInfoList.length>1&&this.jumpInfoList.every((e=>e.username===this.jumpInfoList[0].username))&&(this.jumpInfoList=this.jumpInfoList.slice(0,1)),this.query=this.querying,this.showError=!e.jumpInfoList.length):this.showError=!0}else{const e=await h.storyGetBizInfo(this.querying,1);e&&0===e.baseResponse.ret?(this.query=this.querying,this.info=e,this.jumpInfoList=[e],this.showError=!1):(this.info={},this.showError=!0)}},async submit(){const e=Object.assign({},this.info,{username:this.info.username,appName:this.query,query:this.query,queryString:this.query});console.log(this.info),this.submitLoading=!0,this.$emit("submit",e);try{await l.Cn.genActionAuthQrcode({action:this.qrcodeAction,order_id:this.orderId||"",vm:this}),this.actionAuthInfoStatus===p.WX.ACTION_QRCODE_AUTOCONFIRMED&&this.closeDialog()}finally{this.submitLoading=!1}},async genAuthQrcode(){if(!this.fetchLoading){this.fetchLoading=!0;try{await l.Cn.genActionAuthQrcode({action:this.qrcodeAction,order_id:this.orderId||"",vm:this})}finally{this.fetchLoading=!1}}}}}),y=f,_=i(1001),C=(0,_.Z)(y,r,o,!1,null,"9ccf48c4",null),b=C.exports;const w=new c.ZP,{mapGetters:I,mapState:k}=(0,d._p)("auth");var T=n.ZP.extend({name:"HeatReceiveObject",components:{searchJumpDialog:b},props:{cover:{type:Object,default:null},isQuotaGift:{type:Boolean,default:!1},afterHeat:{type:Boolean,default:!1}},data(){return{heatedMaterial:{tagName:null,jumpType:2,username:"",headImgUrl:"",nickname:"",type:2},tagName:null,showSearchJumpDialog:!1,hideAuthQrcode:!1,heatedOption:[],formRule:{heatedSource:[{validator:(e,t,i)=>{const a=this;a.heatedMaterial?.username&&2!==a.heatedMaterial.type?i():a.heatedMaterial?.username?a.authorizeSuccess||i(new Error("封面来源未授权")):i(new Error("请设置封面来源")),i()}}]}}},computed:{...I({authorizeSuccess:"authorizeSuccess",authorizeWaiting:"authorizeWaiting",showAuthQrcode:"showAuthQrcode",actionAuthInfoStatus:"actionAuthInfoStatus"}),...k({actionAuthInfo:"actionAuthInfo"})},watch:{cover:{immediate:!0,async handler(e){const{packetMaterial:t,coverSetCommInfo:i}=e;if(i?.jumpType){const{jumpType:e,jumpAppname:t,jumpText:a,tagName:s}=i,r=await this.getCoverSetCommHeadImage(e,t,a);this.heatedMaterial={tagName:s,username:t,headImgUrl:r||"",nickname:a,jumpType:e,type:3}}else{if(t?.actionList?.length){const e=t.actionList[0],{actionType:i,mpAccountDetail:a,finderProfileDetail:s}=e;if(2===i&&a?.appName){const e=await w.storyGetBizInfo(a.appName,1);e&&(this.heatedMaterial={tagName:this.heatedMaterial.tagName,username:a.appName,headImgUrl:e.headImgUrl,nickname:e.nickname,jumpType:2,type:0})}if(4===i&&s?.queryString){const e=await w.storyGetFinderInfo(s.queryString),t=e?.jumpInfoList.find((e=>e.username===s.username));t&&(this.heatedMaterial={tagName:this.heatedMaterial.tagName,username:s.username||"",headImgUrl:t.headImgUrl,nickname:t.nickname,jumpType:4,type:0})}}if(!this.heatedMaterial.username&&this.isQuotaGift){const e=await l.U6.getUserFinderInfo();e&&(this.heatedMaterial={tagName:this.heatedMaterial.tagName,username:e.username,headImgUrl:e.headImgUrl,nickname:e.nickname,jumpType:4,type:1})}}}},"heatedMaterial.jumpType"(){2===this.heatedMaterial.type&&this.clearAction()},authorizeSuccess:{async handler(e){e&&await this.$refs.heatForm.validateField("heatedSource")}}},mounted(){this.getCoverSetTabList()},beforeDestroy(){l.Cn.CLEAR_ACTION_AUTH_INFO()},methods:{async getCoverSetCommHeadImage(e,t,i){if(2===e){const e=await w.storyGetBizInfo(t,1);return e?.headImgUrl||""}if(4===e){const e=await w.storyGetFinderInfo(i),a=e?.jumpInfoList.find((e=>e.username===t));return a?.headImgUrl||""}return""},async validate(){const e=await this.$refs.heatForm.validate();if(!e.valid)return!1;const t=this.heatedMaterial;return{tagName:t.tagName||"",jumpAppname:t.username,jumpText:t.nickname,jumpType:t.jumpType,jumpPath:""}},async getCoverSetTabList(){if(!this.heatedOption.length){const e=await w.coverSetTabList();let t=[];e?.infos&&(t=t.concat(...e.infos.map((e=>({value:e.tagName,label:e.tagName}))))),t.push({label:"其他",value:""}),this.heatedOption=t}},addCoverSource(e){e&&(this.hideAuthQrcode=!0),this.showSearchJumpDialog=!0},async handleJumpSubmit(e){this.hideAuthQrcode=!1,this.heatedMaterial={...this.heatedMaterial,username:e.username,nickname:e.nickname,headImgUrl:e.headImgUrl},await this.$refs.heatForm.validateField("heatedSource")},deleteEnter(){this.clearAction()},clearAction(){this.heatedMaterial={...this.heatedMaterial,username:"",nickname:"",headImgUrl:""},this.$store.commit("auth/CLEAR_ACTION_AUTH_INFO")}}}),S=T,x=(0,_.Z)(S,a,s,!1,null,"441b4b96",null),A=x.exports},80903:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("i",{staticClass:"icon-info"})},s=[],r={name:"icon-info",components:{},data(){return{}},computed:{},methods:{}},o=r,n=i(1001),c=(0,n.Z)(o,a,s,!1,null,"ca003b3a",null),l=c.exports},70898:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"jump-info-list"},[t("mp-radio-group",{on:{change:e.change},model:{value:e.selectedUsername,callback:function(t){e.selectedUsername=t},expression:"selectedUsername"}},e._l(e.jumpInfoList,(function(i){return t("mp-radio",{key:i.username,class:["jump-info-item",{active:i.username===e.selectedUsername}],attrs:{value:i.username}},[t("a-row",{attrs:{type:"flex",align:"middle"}},[t("img",{staticClass:"avatar",attrs:{src:i.headImgUrl||e.defaultAvatar,alt:""}}),t("div",{staticClass:"name"},[e._v(e._s(i.nickname))])])],1)})),1)],1)},s=[],r=i(20144),o=r.ZP.extend({components:{},props:{jumpInfoList:{type:Array,default:()=>[]}},data(){return{selectedUsername:""}},computed:{},watch:{jumpInfoList:{async handler(e){await this.$forceUpdate(),1===e.length&&(this.selectedUsername=e[0].username,this.change(e[0].username))},immediate:!0}},methods:{change(e){const t=this.jumpInfoList.find((t=>t.username===e));this.$emit("radio-change",t)}}}),n=o,c=i(1001),l=(0,c.Z)(n,a,s,!1,null,"32a9215a",null),d=l.exports},9338:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("i",{staticClass:"inline-block",class:`icon-${e.name}`})},s=[],r={name:"MaskIcon",components:{},props:{name:String},data(){return{}},computed:{},methods:{}},o=r,n=i(1001),c=(0,n.Z)(o,a,s,!1,null,"15ae6334",null),l=c.exports},46074:function(e,t,i){"use strict";i.d(t,{R:function(){return a},Z:function(){return p}});var a,s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"qrcode-wrap"},[t("div",{staticClass:"qrcode",class:{showMask:0!==e.status,border:!e.qrcodeUrl}},[e.qrcodeUrl?t("img",{attrs:{src:e.qrcodeUrl}}):e._e(),t("div",{staticClass:"mask",on:{click:e.handleClickMask}},[e.isFailed||e.isExpired?t("svg-icon",{staticClass:"reload-icon",attrs:{name:"reload"}}):t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}})],1)]),t("div",{staticClass:"title"},[e.isFailed?t("mp-icon",{staticClass:"fail-icon",attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300"}}):e._e(),t("span",{domProps:{innerHTML:e._s(e.title)}})],1),e.tip?t("div",{staticClass:"tip",domProps:{innerHTML:e._s(e.tip)}}):e._e()])},r=[],o=i(20144);(function(e){e[e["normal"]=0]="normal",e[e["success"]=1]="success",e[e["fail"]=2]="fail",e[e["expired"]=3]="expired"})(a||(a={}));var n=o.ZP.extend({name:"Qrcode",props:{qrcodeUrl:String,status:Number,normalText:String,failTip:String,failText:String,expiredText:String,expiredTip:String,successText:String},computed:{isFailed(){return this.status===a.fail},isExpired(){return this.status===a.fail||this.status===a.expired},title(){const{status:e}=this;return e===a.normal?this.normalText:e===a.fail?this.failText:e===a.success?this.successText:e===a.expired?this.expiredText||"二维码过期，请刷新重试":""},tip(){const{status:e}=this;return e===a.fail?this.failTip:e===a.expired?this.expiredTip||"二维码每小时更新":""}},methods:{handleClickMask(){const{isFailed:e,isExpired:t}=this;(e||t)&&this.$emit("reload")}}}),c=n,l=i(1001),d=(0,l.Z)(c,s,r,!1,null,"6a3511ce",null),p=d.exports},28687:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"pagDisplay",staticClass:"component_pag-player",attrs:{"data-url":e.url}},[t("canvas",{ref:"canvas",attrs:{id:e.canvasId,width:e.width,height:e.height}})])},s=[],r=i(20144),o=i(72045),n=i(1330),c=i(63296),l=i(99453),d=i(52117),p=r.ZP.extend({components:{},props:{name:{type:String,default:"pag"},width:Number,height:Number,url:String,autoplay:Boolean,loop:Boolean,showType:String,autoInit:Boolean,onlyShow:Boolean,destroyAfterInit:Boolean},data(){return{canvasId:(0,o.Z)(),pagView:null,pagDuration:0,startTime:0,playTime:0,currentTime:0,version:0}},computed:{status(){return this.pagView?.isPlaying?"play":"pause"}},watch:{autoInit:{handler(e){e&&(console.log(`【PagDisplay】${this.name}`),this.initPag())},immediate:!0},url:{handler(e){e&&!this.autoInit&&"preview"!==this.showType&&this.initPag()},immediate:!0}},beforeDestroy(){this.destroy()},methods:{getContainer(){return this.$el},togglePlay(e=0,t){e<this.startTime&&this.pagView?.setProgress(e/this.pagDuration),t&&(this.playTime=t),this.startTime=e,this.pagView?.isPlaying?this.pause():((this.currentTime<this.startTime||this.currentTime>=this.startTime+this.playTime)&&this.pagView?.setProgress(this.startTime/this.pagDuration),this.play())},async play(){console.log("【PagDisplay】开始play"),this.pagView||await this.initPag(),this.pagView?.play()},pause(){this.pagView?.pause()},destroy(){if(!this.pagView)return;console.log(`【PagDisplay】${this.name} destroy`);try{this.pagView?.destroy(),this.pagView=null,this.$emit("destroy")}catch(t){(0,d.H)("pagDestroy error",JSON.stringify({name:this.name,msg:t.message,err:t}))}const e=this.$refs.pagDisplay;e instanceof HTMLElement&&(console.log(`【PagDisplay】${this.name} clear canvas`),e.innerHTML="")},initCanvas(){const e=this.$refs.pagDisplay;if(e instanceof HTMLElement){e.innerHTML="";const t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t.id=this.canvasId,e.appendChild(t),t}},listenAnimationStart(){console.log("【PagDisplay】",this.name,"start"),this.$emit("playing")},listenAnimationUpdate(e){this.currentTime=Number((e.getProgress()*e.duration()/1e6).toFixed(2))||0,this.playTime>0&&!this.autoplay&&this.currentTime>=this.startTime+this.playTime&&this.pause(),this.$emit("timeupdate",{currentTime:this.currentTime})},listenAnimationEnd(){console.log("【PagDisplay】",this.name,"ended"),this.$emit("ended")},listenAnimationPause(){console.log("【PagDisplay】",this.name,"pause"),this.$emit("pause")},async initWorkPag(){const e=this.version;console.log(`【PagDisplay】${this.name} invoke initWorkPag`);const t=await(0,l.Oz)(),i=this.initCanvas(),a=await fetch(this.url).then((e=>e.arrayBuffer()));e<this.version&&(0,d.H)("pag url 更新，废弃",JSON.stringify({name:this.name})),console.log(`【PagDisplay】${this.name} initWorkPag get Buffer`);try{const e=await c.ru.load(t,a);console.log(`【PagDisplay】${this.name} initWorkPag load finish`);const s=await c.kG.init(e,i,{useCanvas2D:!0});return this.$emit("ready"),console.log(`【PagDisplay】${this.name} initWorkPag ready`),s}catch{(0,d.H)("initWorkPag Error",JSON.stringify({name:this.name,url:this.url}))}},async initOriginPag(){const e=this.version;let t;console.log(`【PagDisplay】${this.name} invoke initOriginPag`);const i=await(0,l.sV)();return await(0,n.W)({locateFile:i}).then((async i=>{const a=await fetch(this.url).then((e=>e.arrayBuffer()));e<this.version&&(0,d.H)("pag url 更新，废弃",JSON.stringify({name:this.name}));const s=await i.PAGFile.load(a),r=this.initCanvas();if(console.log("【PagDisplay】",`${this.name} init canvas`),!r)return;const o=s.width(),n=s.height();if(r.width=o,r.height=n,t=await i.PAGView.init(s,r),console.log("【PagDisplay】",`${this.name} init finish`,`version: ${e}`),this.$emit("ready"),t){this.pagView=t;const e=await(t?.duration());if(this.pagDuration=Number((e/1e6).toFixed(2)),console.log("【PagDisplay】",`${this.name} get duration ${this.pagDuration}，原始duration: ${e}`),t?.addListener("onAnimationStart",this.listenAnimationStart),t?.addListener("onAnimationUpdate",this.listenAnimationUpdate),t?.addListener("onAnimationPause",this.listenAnimationPause),t.addListener("onAnimationEnd",this.listenAnimationEnd),this.loop&&this.pagView.setRepeatCount(0),console.log("【PagDisplay】",this.name,"autoplay状态",this.autoplay),this.autoplay&&this.pagView.play(),this.destroyAfterInit){console.log(`【PagDisplay】${this.name} destroyAfterInit`);try{t.destroy(),this.pagView=null}catch(c){console.error("destroyAfterInit destroy error",c)}}}})).catch((e=>{throw(0,d.H)("PagDisplay PAGInit Error",JSON.stringify({errMsg:e?.message})),e})),t},async initPag(){if(!this.url)return void console.log("without pag url");let e;this.destroy(),this.version+=1,e=this.onlyShow?await this.initWorkPag():await this.initOriginPag(),this.pagView=e,this.loop&&this.pagView?.setRepeatCount(0),this.autoplay&&this.pagView?.play()}}}),u=p,h=i(1001),m=(0,h.Z)(u,a,s,!1,null,null,null),g=m.exports},52794:function(e,t,i){"use strict";i.d(t,{Z:function(){return f}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a",{attrs:{href:"javascript:;"},on:{click:e.downloadReceiveObject}},[e._v("下载"+e._s(e.genTypeText))])},s=[],r=i(34225),o=i(85880),n=i(52117),c=i(57582),l=i(40628),d=i(27484),p=i.n(d),u=i(20144),h=u.ZP.extend({components:{},props:{cover:Object,order:Object},data(){return{loadingText:"下载中",isLoading:!1}},computed:{banDownload(){return c.U6.banDownload},genTypeText(){return l.FP[this.order.genType]}},methods:{downloadZipFromObjectUrl(e){const t=this,i=function(){if(200===this.status){t.isLoading=!1;const e=document.createElement("a");e.href=window.URL.createObjectURL(this.response);const i=p()().format("YYYY_MM_DD_HH_mm");e.download=`${i}_二维码（一人领取）.zip`,e.click()}},a=e=>{this.isLoading=!0;const t=Math.floor(e.loaded/e.total*100)+"%";this.loadingText=`下载中(${t})`},s=()=>{(0,n.H)("downloadZipFromObjectUrl download error");const t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href",e),t.click()};o.bL.downloadAjax(e,{onload:i,onprogress:a,onerror:s})},async downloadReceiveObject(){if(this.banDownload)return;const{totalGenCount:e,genType:t,receiveType:i,objectUrl:a,fissionObject:s}=this.order;let o=e;if(s){const{totalGenCount:t}=s;o=e-t}o>1&&t===l.B6.qrcode&&i===l.T.oneToOne?this.downloadZipFromObjectUrl(a):this.order.mergeId?await r.yQ.downloadMergeReceiveObject(this.order):await r.yQ.downloadReceiveObject(this.cover.orderId,this.order)}}}),m=h,g=i(1001),v=(0,g.Z)(m,a,s,!1,null,"bec4e760",null),f=v.exports},5202:function(e,t,i){"use strict";i.d(t,{Z:function(){return v}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"build-dialog",attrs:{title:1==e.generateImage?"生成海报":"预览海报",value:e.value,width:732},on:{"visible-change":e.handleVisibleChange}},[e.posterLoading?t("div",{staticClass:"build-loadding-wrapper content"},[t("div",{staticClass:"weui-desktop-loading"})]):[t("div",{staticClass:"content"},[t("div",{ref:"buildDialog",staticClass:"build-all-wrap"},[t("img",{staticClass:"back",attrs:{src:i(64427)}}),t("div",{staticClass:"build-content",class:[{safari:e.safari,"build-content-widget":e.isWidgetCover}]},[t("div",{staticClass:"build-tips"},[e._v("送你一个微信红包封面，")]),t("div",{staticClass:"build-tips-line"}),1==e.generateImage?[t("div",{staticClass:"build-tips"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.tips1,expression:"tips1"}],staticStyle:{"margin-left":"-2px"},attrs:{placeholder:e.tipsPlaceholder},domProps:{value:e.tips1},on:{input:function(t){t.target.composing||(e.tips1=t.target.value)}}}),t("span",{class:e.tips1.length>12?"red build-input-tips":"build-input-tips"},[e._v(e._s(e.tips1.length)+"/12")])]),t("div",{staticClass:"build-tips-line-bule",staticStyle:{"margin-bottom":"24px"}})]:e._e(),2==e.generateImage?[t("div",{staticClass:"build-tips",staticStyle:{margin:"6px 0 5px"}},[e._v(" "+e._s(e.tips1)+" ")]),t("div",{staticClass:"build-tips-line",staticStyle:{"margin-bottom":"24px"}})]:e._e(),t("div",{staticClass:"flex justify-center"},[t("div",{staticClass:"build-content-img"},[e.GenerateImageUrl?t("img",{class:{"build-content-img-1":!e.isWidgetCover},attrs:{src:e.GenerateImageUrl}}):e._e(),e.isWidgetCover?e._e():t("img",{staticClass:"open-mask",attrs:{src:e.crop0_1}})])]),1==e.generateImage?[t("div",{staticClass:"build-tip2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.tips2,expression:"tips2"}],attrs:{placeholder:e.compuCoverInfo&&e.compuCoverInfo.packetName},domProps:{value:e.tips2},on:{input:function(t){t.target.composing||(e.tips2=t.target.value)}}}),t("span",{class:e.tips2.length>8?"red":""},[e._v(e._s(e.tips2.length)+"/8")])])]:e._e(),2==e.generateImage?[t("div",{staticClass:"build-tip2-build"},[t("span",[e._v(e._s(e.tips2))])])]:e._e()],2),t("img",{staticClass:"build-content-b",attrs:{src:"https://res.wx.qq.com/a/fed_upload/1f5a9780-dfbf-438f-8bb9-c137e03509ab/3X.png"}}),t("div",{staticClass:"qr-wrap"},[e.GenerateImageQrUrl?t("img",{staticClass:"qr",attrs:{src:e.GenerateImageQrUrl.replace("http://","https://")}}):e._e(),t("p",{staticClass:"qr-tips"},[e._v("长按领取")])])])]),t("div",{staticClass:"footer"},[1===e.generateImage?[t("mp-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.preventDefault(),e.generateImageData.apply(null,arguments)}}},[e._v("编辑完成")])]:e._e(),2===e.generateImage?[t("mp-button",{staticClass:"cancel",attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.generateImage=1}}},[e._v("重新编辑")]),t("mp-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.preventDefault(),e.generateImageData.apply(null,arguments)}}},[e._v("下载")])]:e._e()],2)]],2)},s=[],r=i(20144),o=i(46926),n=i.n(o),c=i(34225),l=i(72909),d=i(18205);const p=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);var u=r.ZP.extend({components:{},props:{value:Boolean,cover:Object,order:Object},data(){return{crop0_1:d.is.crop0_1,safari:p,GenerateImageUrl:"",GenerateImageQrUrl:"",generateImage:0,tips1:"",tipsPlaceholder:"祝你新春快乐，万事如意！",tips2:"",posterLoading:!1,coverInfo:null}},computed:{isWidgetCover(){return!!this.compuCoverInfo?.packetMaterial?.syntheticWidgetImage?.mediaUrl},compuCoverInfo(){return this.coverInfo||this.cover}},methods:{handleVisibleChange(e){e?this.generatePoster():(this.coverInfo=null,this.$emit("input",!1))},async getCoverInfo(){const e=await c.yQ.getCover(this.order.orderId);0===e?.baseResponse.ret&&(this.coverInfo=e.order)},async generatePoster(){this.posterLoading=!0,this.cover||await this.getCoverInfo();const{order:e}=this,t=e.objectId?e.objectId:e?.childObject[0]?.objectId;this.tips1="",this.tips2="";const i=this.compuCoverInfo;let a=(this.isWidgetCover?i.packetMaterial?.openImage?.mediaUrl:i.packetMaterial.sourceImage?.mediaUrl)||"";a=a.replace("http://","https://");try{this.GenerateImageUrl=await(0,l.bi)(a,0,0,"image/png","生成海报");const e=await c.yQ.coverGetShareMsgQrCode(i.orderId,t);e&&0===e.baseResponse.ret&&(this.GenerateImageQrUrl=e.image),this.generateImage=1}finally{this.posterLoading=!1}},generateImageData(){const e=("-"!=this.order.receiveBeginTimeText?this.order.receiveBeginTimeText.replace(/\//gi,"_").replace(" ","_").replace(":","_"):this.order.genTime.replace(/\//gi,"_").replace(" ","_").replace(":","_"))+"_"+this.order.genTypeText.replace("二维码","二维码海报")+".png";if(1==this.generateImage)this.tips1.length>12||this.tips2.length>8?this.errorTip("字数超过限制"):(0==this.tips1.trim().length&&(this.tips1=this.tipsPlaceholder),0==this.tips2.trim().length&&(this.tips2=this.compuCoverInfo?.packetName),this.generateImage=2);else{const t=3,i=this.$refs.buildDialog;n().toPng(i,{height:i.offsetHeight*t,style:{transform:`scale(${t})`,"transform-origin":"top left","font-weight":"300","font-size":"8px","border-radius ":"5px",position:"absolute",left:0,top:0,margin:0},width:i.offsetWidth*t}).then((t=>{const i=document.createElement("a");i.download=e,i.innerText=e,i.href=t,i.click(),this.$tipsSuc("请在浏览器文件下载管理中查看"),window.setTimeout((()=>this.$tipsHide()),3e3)}))}}}}),h=u,m=i(1001),g=(0,m.Z)(h,a,s,!1,null,"5ea531a5",null),v=g.exports},37068:function(e,t,i){"use strict";i.d(t,{Z:function(){return m}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return!e.hasRecallPermission||e.isCanRecall||e.disabledRecall||1===e.order.heatStatus||!e.isDetail&&!e.order.childObject.length?t("mp-popover",{staticClass:"popover-auto-width",attrs:{position:"up-right",trigger:"click"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticStyle:{display:"flex"}},[t("mp-icon",{attrs:{icon:"dot_3_regular",width:16,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[e.hasRecallPermission?e.isCanRecall?t("mp-popover",{attrs:{title:"回收剩余未领取的红包封面",value:e.curRefundVisible===e.order.key},on:{hide:function(t){e.curRefundVisible=-1},show:function(t){e.curRefundVisible=e.order.key}},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"recall-btn"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"content"},[t("div",{staticClass:"text"},[e._v("回收后已发放的未领取封面的材料将失效，确定要回收吗？")])])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"recall-footer"},[t("mp-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){e.curRefundVisible=-1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",size:"mini",loading:e.isLoading},on:{click:e.recall}},[e._v("回收")])],1)]},proxy:!0}],null,!1,1399814032)}):e.disabledRecall?t("a",{staticClass:"recall-btn disabled"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])]):e._e():[3!==e.order.status||e.isPayInfoDisabled?e.order.status>3?t("a",{staticClass:"recall-btn disabled"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])]):e._e():t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:"340"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无回收封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticClass:"recall-btn"},[t("span",[e._v("回收")]),t("span",[e._v("("+e._s(e.recallNum)+")")])])]},proxy:!0}],null,!1,3824377339)})],1===e.order.heatStatus?t("mp-popover",{attrs:{position:"up-right",type:"msg",title:"停止推广封面",trigger:"click",width:420},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",[e._v("停止推广")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticStyle:{"text-align":"center","line-height":"1.4",color:"rgba(0, 0, 0, 0.5)"}},[e._v("停止推广后，封面将停止通过「裂变」及「封面专区」发放")])]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{attrs:{size:"mini",type:"default"},on:{click:function(t){e.confirmStopHeat=!1}}},[e._v("取消")]),t("mp-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.confirmStopHeat=!1,e.show=!1,e.$emit("stopHeat",e.order)}}},[e._v(" 停止 ")])]},proxy:!0}],null,!1,2509894153),model:{value:e.confirmStopHeat,callback:function(t){e.confirmStopHeat=t},expression:"confirmStopHeat"}}):e._e(),e.isDetail||e.order.childObject.length?e._e():t("div",{on:{click:function(t){return e.$emit("goDetail",e.order)}}},[t("a",[e._v("所属订单详情")])])]},proxy:!0}],null,!1,542677378),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}):e._e()},s=[],r=(i(57658),i(20144)),o=i(34225),n=i(57582),c=i(40628);const l=new o.ZP;var d=r.ZP.extend({components:{},props:{cover:{type:Object},payInfoStatus:{type:Number},order:{type:Object},mergeDetailList:{type:Array,default:()=>[]},isDetail:{type:Boolean,default:!1}},data(){return{ReceiveObjectMergeStatus:c.lv,curRefundVisible:-1,isLoading:!1,hasRecallPermission:!0,confirmStopHeat:!1,show:!1}},computed:{serverNowTime(){return n.l1.serverNowTime},disabledRecall(){return this.recallNum<=0||this.order.mergeStatus>2||this.order.status>3},isCanRecall(){return!this.disabledRecall&&(3===this.order.status||this.order.mergeStatus===c.lv.Success)&&!this.isPayInfoDisabled},isPayInfoDisabled(){return this.payInfoStatus>6},isMergeObjectRecalled(){return!!this.mergeDetailList.length&&this.mergeDetailList.some((e=>[c.ST.Recalling,c.ST.Recalled].includes(e.status)))},recallNum(){if(this.mergeDetailList.length){let e=0,t=0;return this.mergeDetailList.forEach((i=>{const a=i.referTransactionExpiretime<this.serverNowTime;e+=a?0:i.totalGenCount,t+=i.totalReceiveCount})),e-t}return this.order.totalGenCount-this.order.totalReceiveCount}},mounted(){1!=n.U6.user.isSecondary||2&n.U6.user.managerFlag||(this.hasRecallPermission=!1)},methods:{toadmin(){this.$router.push({name:"administrator"})},recallSuccess(){this.$tipsSuc("回收成功"),setTimeout((()=>{this.$emit("refreshCover")}),1e3),document.documentElement.click(),window.setTimeout((()=>this.$tipsHide()),1500)},async recall(){this.isLoading=!0;try{if(this.order.mergeId){const e=await l.recall(this.cover.orderId,"",this.order.mergeId);0===e?.baseResponse.ret?this.recallSuccess():this.errorTip("回收失败，请重试")}else{const e=await l.recall(this.cover.orderId,this.order.objectId);e&&0===e.baseResponse.ret?this.recallSuccess():this.errorTip("回收失败，请重试")}}finally{this.isLoading=!1}}}}),p=d,u=i(1001),h=(0,u.Z)(p,a,s,!1,null,"3c8ffdd2",null),m=h.exports},75062:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"refund-dialog",attrs:{value:e.value,width:732},on:{"visible-change":e.handleVisibleChange}},[t("div",{staticClass:"qr-title"},[e._v("微信扫码赠送给朋友")]),e.translateQrLoading?t("div",{staticClass:"refund-loadding-wrapper content"},[t("div",{staticClass:"weui-desktop-loading"})]):t("div",{staticClass:"content"},[t("div",{staticClass:"refund-content_wrapper"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,status:e.qrcodeStatus,failText:"扫码登录失败，请重新扫码登录"}}),t("div",{staticClass:"qr-leavel"},[e._v("链接剩余可赠送： "+e._s(e.totalGenCount-e.totalReceiveCount)+" / "+e._s(e.totalGenCount)+" 个")])],1)])])},s=[],r=i(46074),o=i(34225),n=i(57582),c=i(20144),l=c.ZP.extend({components:{Qrcode:r.Z},props:{value:Boolean,cover:Object,order:Object},data(){return{showQrDialog:!1,translateQrLoading:!1,qrcodeUrl:"",totalGenCount:0,totalReceiveCount:0,qrcodeStatus:r.R.normal}},computed:{serverNowTime(){return n.l1.serverNowTime}},methods:{handleVisibleChange(e){e?this.generateQrcode():this.$emit("input",!1)},async generateQrcode(){const{order:e}=this;if(this.translateQrLoading=!0,e.childObject.length){const t=e.childObject.filter((e=>e.referTransactionExpiretime>this.serverNowTime));let i=0,a=0;t.forEach((e=>{i+=e.totalGenCount,a+=e.totalReceiveCount})),this.totalGenCount=i,this.totalReceiveCount=a}else this.totalGenCount=e.totalGenCount,this.totalReceiveCount=e.totalReceiveCount;const t=e.objectId?e.objectId:e?.childObject[0]?.objectId,i=this.cover;try{const e=await o.yQ.coverGetShareMsgQrCode(i.orderId,t);e&&0===e.baseResponse.ret&&(this.qrcodeStatus=r.R.normal,this.qrcodeUrl=e.image)}finally{this.translateQrLoading=!1}}}}),d=l,p=i(1001),u=(0,p.Z)(d,a,s,!1,null,"2bddbdc6",null),h=u.exports},89983:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"brand",on:{click:e.gotoIndex}},[e._m(0),t("div",{staticClass:"name"},[e._v("微信红包封面开放平台")])])])},s=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"red-envelope"},[t("img",{attrs:{src:i(27442)}})])}],r=i(20144),o=r.ZP.extend({methods:{gotoIndex(){this.$router.replace({name:"index"})}}}),n=o,c=i(1001),l=(0,c.Z)(n,a,s,!1,null,"681024e2",null),d=l.exports},88299:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"error-wrap"},[t("div",{staticClass:"icon-error"}),t("div",{staticClass:"icon-tips"},[e._v("暂未达到个人认证条件")]),t("div",{staticClass:"qrscan-result"},e._l(e.errorRet,(function(i,a){return t("div",{key:a,staticClass:"q flex"},[t("div",{staticClass:"flex__item"},[e._v(e._s(i.condition))]),i.pass?t("div",{staticClass:"yes"}):t("div",{staticClass:"no"})])})),0),t("div",{staticClass:"download-link"},[e._t("default")],2)])},s=[],r=i(20144),o=r.ZP.extend({props:{errorRet:Array}}),n=o,c=i(1001),l=(0,c.Z)(n,a,s,!1,null,"005fdf1b",null),d=l.exports},69692:function(e,t,i){"use strict";i.r(t);var a=i(82506),s=i(19512),r=(i(83785),i(1001)),o=(0,r.Z)(s.Z,a.s,a.x,!1,null,"10793402",null);t["default"]=o.exports},50078:function(e,t,i){"use strict";i.d(t,{$_:function(){return pe},A4:function(){return T},Ag:function(){return w},Ai:function(){return V},CD:function(){return o},Cu:function(){return I},DS:function(){return Se},DZ:function(){return ve},Dd:function(){return Ce},Dl:function(){return Ie},Dp:function(){return U},EA:function(){return Q},Fc:function(){return Te},Fz:function(){return c},G8:function(){return d},Gv:function(){return Re},Hc:function(){return Fe},Ii:function(){return qe},Ik:function(){return ke},J2:function(){return Qe},Kk:function(){return ie},N5:function(){return h},Nn:function(){return z},OU:function(){return q},Og:function(){return Oe},PA:function(){return m},PB:function(){return $},PF:function(){return J},Q4:function(){return we},Q6:function(){return Le},Qc:function(){return te},Rb:function(){return W},SF:function(){return Ee},TV:function(){return H},Ul:function(){return ne},Vp:function(){return S},WK:function(){return C},YS:function(){return Ne},Yc:function(){return Pe},Yq:function(){return X},ZD:function(){return ce},ZI:function(){return g},ZN:function(){return E},ZP:function(){return ge},_5:function(){return y},_l:function(){return be},a2:function(){return _e},aU:function(){return Y},c:function(){return Z},el:function(){return k},er:function(){return N},f3:function(){return oe},fM:function(){return K},gm:function(){return D},gq:function(){return Ae},hX:function(){return de},hn:function(){return xe},iD:function(){return n},jH:function(){return ae},jc:function(){return ue},jl:function(){return M},k:function(){return Be},kD:function(){return x},ky:function(){return l},lt:function(){return Me},n0:function(){return L},nr:function(){return fe},oS:function(){return se},oY:function(){return ee},oi:function(){return f},q3:function(){return b},qZ:function(){return A},qk:function(){return P},s4:function(){return re},sG:function(){return he},sJ:function(){return ye},t8:function(){return R},tm:function(){return me},uL:function(){return Ue},uj:function(){return F},wN:function(){return G},xR:function(){return r},xS:function(){return j},xz:function(){return u},y1:function(){return v},yE:function(){return B},yF:function(){return O},yc:function(){return _},yx:function(){return le},z3:function(){return p},zh:function(){return De}});const a=!0;let s=location.origin;a&&(s="/cgi-bin/mmcover-bin");const r=`${s}/coverauth`,o=`${s}/covergetselfinfo`,n=`${s}/coverdetailpage`,c=`${s}/covermainpage`,l=`${s}/covergetstat`,d=`${s}/coverheatreceiveobject`,p=`${s}/covercancelheatreceiveobject`,u=`${s}/covergetcoversettablist`,h=`${s}/covergetloginqrcode`,m=`${s}/covercheckloginqrcode`,g=`${s}/covergetsignupqrcode`,v=`${s}/coverchecksignupqrcode`,f=`${s}/covercheckpersonsignupqrcode`,y=`${s}/coversignup`,_=`${s}/coverpersonsignup`,C=`${s}/coverlogout`,b=`${s}/coversendemail`,w=`${s}/covercheckbizpersonsignupqrcode`,I=`${s}/coverbizpersonsignup`,k=`${s}/covercheckemotionpersonsignupqrcode`,T=`${s}/coveremotionpersonsignup`,S=`${s}/covergenreceiveobject`,x=`${s}/covercombinegenreceiveobject`,A=`${s}/covermodorder`,P=`${s}/coveruploadimage`,D=`${s}/coveruploadfile`,U=`${s}/coveruploadvideo`,E=`${s}/covergenorderid`,R=`${s}/covergenactionqrcode`,M=`${s}/covercheckactionqrcode`,L=`${s}/covergenpag`,N=`${s}/coverbatchgenpag`,F=`${s}/covergetgenpagresult`,O=`${s}/covergetpreviewqrcode`,B=`${s}/covercheckpreviewqrcode`,q=`${s}/covergettempcoverreceiveobjectdetail`,Q=`${s}/covergetbizinfo`,j=`${s}/covergetfinderjumpinfo`,$=`${s}/covergetfinderobjectlist`,Z=`${s}/covergetwxaqrcode`,H=`${s}/covergetsharemsgqrcode`,G=`${s}/covergetemotionjumpinfoqrcode`,W=`${s}/covercheckemotionjumpinfoqrcode`,z=`${s}/coverrecallreceiveobject`,V=`${s}/coverpurchase`,J=`${s}/coverpurchasewithad`,K=`${s}/covercancelpurchase`,Y=`${s}/covergetpurchasestatus`,X=`${s}/coverrefund`,ee=`${s}/covergetpaydetail`,te=`${s}/covergetpayinfolist`,ie=`${s}/coveractivereceiveobject`,ae=`${s}/covergetinvoicedetail`,se=`${s}/covergetinvoiceinfolist`,re=`${s}/covergetcaninvoiceorderlist`,oe=`${s}/covergetcaninvoiceorderpayinfolist`,ne=`${s}/coverinvoicewithpayinfolist`,ce=`${s}/coverinvoice`,le=`${s}/coverdownloadinvoice`,de=`${s}/coverrecallinvoice`,pe=`${s}/covercancelinvoice`,ue=`${s}/covergetreceiveobjectlist`,he=`${s}/covergetreceiveobjectdetail`,me=`${s}/coverdownloadreceiveobject`,ge=`${s}/coverdownloadmergeobject`,ve=`${s}/covergetmergedetail`,fe=`${s}/covergetannouncementindex`,ye=`${s}/covergetannouncementdetail`,_e=`${s}/coverdownloadfile`,Ce=`${s}/coverdownloadnew`,be=`${s}/coverkvreport`,we=`${s}/covergetmanagerpage`,Ie=`${s}/coveraddsecondarymanagersearch`,ke=`${s}/coveraddsecondarymanagerconfirm`,Te=`${s}/coverrecallsecondarymanagerinvite`,Se=`${s}/coverrecallupdatesecondarymanagerflagapply`,xe=`${s}/coverremovesecondarymanager`,Ae=`${s}/coverheartbeat`,Pe=`${s}/coverupdatesecondarymanagerflag`,De=`${s}/covergetquotaobjectlist`,Ue=`${s}/covergetquotaobjectdetail`,Ee=`${s}/covergetcanbuyorderlist`,Re=`${s}/coverpurchasewithquota`,Me=`${s}/covergenquotaobject`,Le=`${s}/covergetuploadauthkey`,Ne=`${s}/coverbatchgetremark`,Fe=`${s}/covergetsingleremark`,Oe=`${s}/coverchangeremark`,Be=`${s}/coverdeleteremark`,qe=`${s}/coveraddremark`,Qe=`${s}/covergetinvoiceaddrlist`},2776:function(e,t,i){"use strict";i.d(t,{Cu:function(){return u},Eu:function(){return c},QV:function(){return l},_B:function(){return o},mj:function(){return n},n3:function(){return s},o0:function(){return r},rZ:function(){return p},yY:function(){return d}});var a=i(40628);const s="https://weixinredpacket.wxqcloud.qq.com",r="https://weixinredpacket.wxqcloud.qq.com/red2022/",o=".png,.jpg,.jpeg,.zip,.mp4",n={"-10008":"MP4格式需满足420yuv","-10009":"MP4格式需满足（H.264/AVC）","-12000":"视频帧率不可超过30fps","-12001":"素材时间太长","-12002":"素材不符合规范，请检查图片命名和图片尺寸","-12003":"素材上传失败，请稍后重试","-12004":"视频码率大于3000kbit/s","-12005":"视频像素宽高比非1:1","-12006":"压缩包中有非PNG格式文件，请检查"},c={[a.Je.Unknow]:a.p0.UNKNOW,[a.Je.Mp4]:a.p0.MP4,[a.Je.Zip]:a.p0.ZIP,[a.Je.Video]:a.p0.MP4,[a.Je.File]:a.p0.ZIP,[a.Je.Gif]:a.p0.GIF,[a.Je.Image]:a.p0.JPEG,[a.Je.Mov]:a.p0.MOV,[a.Je.Pag]:a.p0.PAG},l=(a.Je.Pag,a.Je.Mp4,a.Je.Gif,a.Je.Mov,a.Je.Zip,72),d=24,p=24,u=["spring2024_biz","spring2024_emotion"]},60779:function(e,t,i){"use strict";i.a(e,(async function(e,t){try{i(66337);var a=i(20144),s=i(48497),r=i(2831),o=i(57582),n=i(94657),c=i(50871),l=i(55643),d=i(98704),p=i(87142),u=i(97139),h=i(9338),m=i(79033),g=(i(73976),i(52117)),v=(i(47516),i(41757)),f=i(86731),y=(i(99221),i(25815),i(58045),i(29795),i(98271),i(15734),i(76589),i(80903)),_=i(17751),C=i(2776),b=e([f]);f=(b.then?(await b)():b)[0],v.g.initMerlinErrorReport("platform"),a.ZP.config.productionTip=!1,a.ZP.component(h.Z.name,h.Z),a.ZP.component(m.Z.name,m.Z),a.ZP.component(n.ZP.name,n.ZP),a.ZP.component(c.Z.name,c.Z),a.ZP.component(l.Z.name,l.Z),a.ZP.component(d.Z.name,d.Z),a.ZP.component(y.Z.name,y.Z),a.ZP.component(p.Z.name,p.Z),a.ZP.component(u.ZP.name,u.ZP),a.ZP.use(f.ZP),a.ZP.use(_.ZP,{lazyComponent:!0,filter:{webp(e,t){if(!t.supportWebp)return;const{src:i}=e,a=/weixinredpacket.wxqcloud.qq.com/;a.test(i)&&(i.includes("&")?e.src+="&imageMogr2/format/webp":e.src+="?imageMogr2/format/webp")}}}),a.ZP.prototype.genVersion=0,a.ZP.prototype.genAtmosphereVersion=0,a.ZP.prototype.$isAtmosphereUser=!1,a.ZP.prototype.errorTip=function(e,t=3e3,i){this.$tipsErr(e),window.setTimeout((()=>{this.$tipsHide(),"function"===typeof i&&i()}),t)},a.ZP.prototype.COS_ORIGIN=C.n3,a.ZP.prototype.defaultAvatar="https://res.wx.qq.com/t/fed_upload/e42d8041-7868-4a1b-aee8-ee9a8300af2e/defaultavatar.jpg",a.ZP.prototype.pageHost=window.location.host,a.ZP.prototype.designTemplateUrl="https://weixinredpacket.wxqcloud.qq.com/design_template/20230921/v1/%E7%BA%A2%E5%8C%85%E5%B0%81%E9%9D%A2%E8%AE%BE%E8%AE%A1%E6%A8%A1%E6%9D%BF.zip",new a.ZP({render:e=>e(s.Z),router:r.Z,store:o.ZP,mounted(){(0,g.H)("pageview")}}).$mount("#app"),t()}catch(w){t(w)}}))},2831:function(e,t,i){"use strict";i.d(t,{Z:function(){return km}});var a=i(20144),s=i(78345),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-pay-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"购买成功",confirmText:"去发放",showEmotionRainEntry:e.showEmotionRainEntry},on:{confirm:e.gotoCoverDetail},scopedSlots:e._u([{key:"desc",fn:function(){return["time"===e.type?t("div",[e._v(" "+e._s(`已成功购买${e.count}小时的发放时长，可前往查看红包封面详情。`)+" ")]):t("div",{staticClass:"desc"},[t("p",[e._v("已成功购买"+e._s(e.count)+"个红包封面，可直接前往红包封面详情页生成发放材料，")]),t("p",[e._v("或使用微信小程序"),t("MiniappPopover"),t("span",[e._v("发放封面。")])],1)])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"step-block"},[t("NewStep",{attrs:{steps:e.steps,curStep:2}})],1)]},proxy:!0}])})],1)])},o=[],n=(i(57658),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"success-wrap"},[t("div",{staticClass:"icon"},[t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:60,height:60}})],1),t("div",{staticClass:"title"},[e._v(e._s(e.title))]),e.desc?t("div",{staticClass:"desc",domProps:{innerHTML:e._s(e.desc)}}):e._t("desc",(function(){return[e._v(e._s(e.desc))]})),e._t("body"),e.showEmotionRainEntry?[e.isOrganization?t("p",{staticClass:"join-emotion-text"},[e._v("此款红包封面已符合微信表情雨活动参与条件，可以在发放红包封面时选择表情雨发放方式。")]):e._e(),e.isPersonal?t("p",{staticClass:"join-emotion-text"},[e._v(" 此款红包封面已参与微信表情雨活动，将有机会出现在福袋中，被更多的用户领取。相关数据可以在活动结束后查看。 ")]):e._e()]:e._e(),e.showBizInfo?[t("img",{staticClass:"biz-qr",attrs:{src:i(18337)}}),t("div",{staticClass:"biz-text"},[e._v("关注微信公众号")]),t("div",{staticClass:"biz-text"},[e._v("了解平台最新动态")])]:e._e(),e.confirmText?t("mp-button",{staticClass:"button success-btn",on:{click:e.confirm}},[e._v(e._s(e.confirmText))]):e._e()],2)}),c=[],l=i(56980),d=i(57582),p=a.ZP.extend({name:"SuccessResult",props:{confirmText:String,desc:String,title:String,showBizInfo:{type:Boolean,default:!1},showEmotionRainEntry:{type:Boolean,default:!1}},computed:{user(){return d.U6.user},isOrganization(){const e=this;return e.user.principalType===l.eZ.organization},isPersonal(){const e=this;return e.user.principalType===l.eZ.person}},methods:{confirm(){this.$emit("confirm")}}}),u=p,h=i(1001),m=(0,h.Z)(u,n,c,!1,null,"d375a4c6",null),g=m.exports,v=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{attrs:{width:152,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"qrcode-content"},[t("img",{staticClass:"qrcode-img",attrs:{src:i(21637)}}),t("div",{staticClass:"qrcode-name"},[e._v("微信红包封面助手")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticStyle:{"font-size":"16px"}},[e._v("「微信红包封面助手」")])]},proxy:!0}])})},f=[],y=a.ZP.extend({components:{},data(){return{}},computed:{},methods:{}}),_=y,C=(0,h.Z)(_,v,f,!1,null,"5267e3f4",null),b=C.exports,w=i(69692),I=a.ZP.extend({name:"CoverPaySuccess",data(){return{count:"",type:"",steps:[{label:"定制封面"},{label:"封面审核"},{label:"付款下单"},{label:"发放领取"}]}},computed:{showEmotionRainEntry(){return/joinEmotionRain=1/.test(location.search)||"1"===this.$route.query.joinEmotionRain}},mounted(){this.count=this.$route.query.count,this.type=this.$route.query.type},components:{SuccessResult:g,MiniappPopover:b,NewStep:w["default"]},methods:{gotoCoverDetail(){const e=this.$route.query.tid,t=this.$route.query.cid;this.$router.push({name:"detail",query:{id:t}}),this.$router.push({name:"order",query:{tid:e}})}}}),k=I,T=(0,h.Z)(k,r,o,!1,null,"17f4d0bc",null),S=T.exports,x=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-submit-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"已提交",confirmText:"封面详情"},on:{confirm:e.gotoCoverDetail},scopedSlots:e._u([{key:"desc",fn:function(){return[t("div",{staticClass:"desc-wrapper"},[t("div",{staticClass:"desc"},[e._v(" 审核结果将在3个工作日内通过微信公众号"),t("mp-popover",{attrs:{width:150,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"qrcode-content"},[t("img",{staticClass:"qrcode-img",attrs:{src:i(96611)}}),t("div",{staticClass:"qrcode-name"},[e._v("微信红包封面")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticStyle:{"font-size":"16px"}},[e._v("「微信红包封面」")])]},proxy:!0}])}),e._v(" 和邮件进行通知。 ")],1),t("div",{staticClass:"desc"},[e._v(" 你也可以通过微信小程序 "),t("MiniappPopover"),e._v(" 实时了解封面状态。 ")],1)])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"step-block"},[t("NewStep",{attrs:{steps:e.steps,curStep:1}})],1)]},proxy:!0}])})],1)])},A=[],P=a.ZP.extend({name:"CoverSubmitSuccess",data(){return{steps:[{label:"定制封面"},{label:"封面审核"},{label:"付款下单"},{label:"发放领取"}]}},components:{SuccessResult:g,NewStep:w["default"],MiniappPopover:b},methods:{gotoCoverDetail(){const e=this.$route.query.cid;this.$router.push({name:"detail",query:{id:e}})}}}),D=P,U=(0,h.Z)(D,x,A,!1,null,"4f313a20",null),E=U.exports,R=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-wrap"},[0==e.alreadyExists?["scan-qrcode"===e.curProgress?[t("div",{staticClass:"login-card"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:"使用微信扫码登录",status:e.qrcodeStatus,failText:e.failText,failTip:e.loginScanFailReason},on:{reload:e.loadAndCheckQrcode}})],1)]:"choose-identity"===e.curProgress?t("div",{staticClass:"choose-identity"},[t("div",{staticClass:"title"},[e._v("选择登录账号")]),t("mp-radio-group",{staticClass:"account-list-wrap",model:{value:e.choosenAuthorId,callback:function(t){e.choosenAuthorId=t},expression:"choosenAuthorId"}},[t("div",{staticClass:"account-list"},e._l(e.allInfo,(function(i,a){return t("div",{key:a,staticClass:"account-item",class:e.choosenAuthorId==i.authorId?"choose-active":"",on:{click:function(t){return e.setAuthorId(i.authorId)}}},[t("img",{class:"视频号"!=i.typeChinese?"no-radius":"",attrs:{src:i.headImgUrl}}),t("div",{staticClass:"flex-item"},[t("div",{staticClass:"name"},[e._v(e._s(i.nickname+"（"+i.typeChinese+"）"))]),t("div",{staticClass:"status"},[e._v(e._s(0==i.isSecondary?"管理员":"运营者"))])]),t("mp-radio",{attrs:{value:i.authorId}})],1)})),0)]),t("div",{staticClass:"options"},[t("mp-button",{staticClass:"button",attrs:{type:"primary",disabled:!e.choosenAuthorId,loading:e.loading},on:{click:e.login}},[e._v("登录")]),t("a",{staticClass:"reload",on:{click:e.reload}},[e._v("重新扫码")])],1)],1):e._e(),"agree-to-terms"===e.curProgress?[t("term-display",{attrs:{title:"“微信红包封面”定制功能使用条款","hide-brand":"hide-brand"},scopedSlots:e._u([{key:"content",fn:function(){return[t("use-term")]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{attrs:{loading:e.cancelTermLoading},on:{click:e.cancelTerm}},[e._v("取消")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary",loading:e.confirmTermLoading},on:{click:e.confirmTerm}},[e._v("同意")])]},proxy:!0}],null,!1,187860851)})]:e._e()]:[t("div",{staticClass:"choose-identity tc"},[t("div",{staticClass:"icon-tips"}),t("div",{staticClass:"login-tips"},[e._v("以下微信号已登录，不支持多人同时使用")]),t("img",{staticClass:"login-img",attrs:{src:e.headImgUrl||e.defaultAvatar}}),t("div",{staticClass:"login-name"},[e._v(e._s(e.nickname))]),t("div",{staticClass:"options"},[t("a",{staticClass:"reload",on:{click:e.reload}},[e._v("重新扫码")])])])]],2)},M=[],L=i(46074),N=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"term-display-wrap"},[e.hideBrand?e._e():t("div",{staticClass:"brand",on:{click:e.gotoIndex}},[e._m(0),t("div",{staticClass:"name"},[e._v("微信红包封面开放平台")])]),t("div",{staticClass:"title"},[e._v(e._s(e.title))]),t("div",{staticClass:"rule-list"},[t("div",{staticClass:"rule-item"},[t("div",{staticClass:"rule-third-list"},[e._t("content")],2)])]),t("div",{staticClass:"options"},[e._t("bar")],2)])},F=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"red-envelope"},[t("img",{attrs:{src:i(27442)}})])}],O=a.ZP.extend({props:{title:{type:String},hideBrand:{type:Boolean}},methods:{gotoIndex(){this.$router.replace({name:"index"})}}}),B=O,q=(0,h.Z)(B,N,F,!1,null,"fa32644c",null),Q=q.exports,j=i(68724),$=i(85880);const Z=new $.ZP;var H,G=a.ZP.extend({name:"Login",data(){return{qrcodeStatus:L.R.normal,loginScanFailReason:"",curProgress:"scan-qrcode",choosenAuthorId:"",checkInterval:0,allInfo:[],alreadyExists:!1,headImgUrl:"",nickname:"",failText:"扫码登录失败，请重新扫码登录",loading:!1,maxAgreementVersion:0,cancelTermLoading:!1,confirmTermLoading:!1}},computed:{wxInfo(){return d.U6.loginData.wxInfo||[]},bizInfo(){return d.U6.loginData.bizInfo||[]},finderInfo(){return d.U6.loginData.finderInfo||[]},qrcodeUrl(){return d.U6.loginData.image},isShowDesc(){const{qrcodeStatus:e}=this;return e===L.R.normal||e===L.R.success},isShowSignUpBtn(){const{qrcodeStatus:e}=this;return e!==L.R.expired}},components:{Qrcode:L.Z,TermDisplay:Q,UseTerm:j.Z},mounted(){this.checkRelogin(),this.loadAndCheckQrcode()},methods:{checkRelogin(){const e=this.$route.query.relogin;if(e){const e=this;e.$tipsErr("登录状态已过期，请重新登录"),window.setTimeout((()=>e.$tipsHide()),3e3)}},signUp(){const{origin:e,pathname:t,search:i}=window.location,a=`${e}${t}${i}#/signup/sign_should_know`;window.open(a,"_blank")},async login(){try{this.loading=!0;const e=await d.U6.login(this.choosenAuthorId);if(e&&0===e.baseResponse.ret){const e=await d.U6.getUserInfo();if(-23===e?.baseResponse.ret)return this.curProgress="agree-to-terms",void(this.maxAgreementVersion=e.maxAgreementVersion);Z.baseActionReport({actionType:"15",authorId:d.U6.user.authorId}),this.$router.push({name:"covers",params:{fromLogin:"1"}})}else e&&1===e.baseResponse.ret?(this.alreadyExists=!0,this.headImgUrl=e.headImgUrl,this.nickname=e.nickname):this.errorTip("登录异常，请稍后重试")}finally{this.loading=!1}},setAuthorId(e){this.choosenAuthorId=e},reload(){clearInterval(this.checkInterval),this.curProgress="scan-qrcode",this.alreadyExists=!1,this.loadAndCheckQrcode()},async checkLoginResult(){const e=await d.U6.checkLoginQrcode();e&&1!==e.baseResponse.ret&&(2===e.baseResponse.ret?(this.qrcodeStatus=L.R.fail,this.failText="该微信号无可登录的平台账号，请<a href='https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index#/signup/sign_should_know'>注册</a>",this.loginScanFailReason="1.注册账号的企业公众号，需要企业认证在有效期内。</br>2.若公众号更换管理员，需新管理员先登录红包封面平台后其他运营者才可以登录。"):0===e.baseResponse.ret?(this.qrcodeStatus=L.R.success,window.setTimeout((async()=>{const t=e.bizInfo||[],i=e.finderInfo||[],a=e.wxInfo||[];if(t.length+i.length+a.length===1)1==t.length&&(this.choosenAuthorId=t[0].authorId),1==i.length&&(this.choosenAuthorId=i[0].authorId),1==a.length&&(this.choosenAuthorId=a[0].authorId),await this.login();else{var s=[];a&&a.length>0&&a.forEach((e=>{e.typeChinese="内部号",s.push(e)})),t&&t.length>0&&t.forEach((e=>{e.typeChinese="公众号",s.push(e)})),i&&i.length>0&&i.forEach((e=>{e.typeChinese="视频号",s.push(e)})),this.allInfo=s,this.curProgress="choose-identity"}}),1500)):this.qrcodeStatus=L.R.expired,clearInterval(this.checkInterval))},async loadAndCheckQrcode(){this.qrcodeStatus=L.R.normal,await d.U6.getLoginQrcode(),this.checkInterval=window.setInterval((()=>this.checkLoginResult()),1e3)},async confirmTerm(){this.confirmTermLoading=!0;try{const e=await d.U6.getUserInfo({agreement_version:this.maxAgreementVersion});0===e?.baseResponse.ret?this.$router.push({name:"covers"}):this.errorTip("登录异常，请稍后重试")}finally{this.confirmTermLoading=!1}},async cancelTerm(){this.cancelTermLoading=!0;try{await d.U6.logout()}finally{this.cancelTermLoading=!1}this.allInfo.length>1?this.curProgress="choose-identity":(this.curProgress="scan-qrcode",this.reload())}},beforeDestroy(){clearInterval(this.checkInterval)}}),W=G,z=(0,h.Z)(W,R,M,!1,null,"06530e01",null),V=z.exports,J=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-submit-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"退款申请成功",desc:"平台已受理退款申请，将在7个工作日内进行处理。请及时登录平台关注退款进度。",confirmText:"了解详情"},on:{confirm:e.gotoCoverDetail}})],1)])},K=[],Y=a.ZP.extend({name:"CoverSubmitSuccess",components:{SuccessResult:g},methods:{gotoCoverDetail(){const e=this.$route.query.cid;this.$router.push({name:"detail",query:{id:e}})}}}),X=Y,ee=(0,h.Z)(X,J,K,!1,null,"e679dc38",null),te=ee.exports,ie=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"title"},[e._v("选择购买类型")]),t("div",{staticClass:"pay-type-list"},[t("div",{staticClass:"pay-type-item",class:{active:1===e.type}},[t("div",{staticClass:"item-content",on:{click:function(t){e.type=1}}},[t("svg-icon",{staticClass:"item-icon",attrs:{name:"pay_type_count"}}),t("div",{staticClass:"item-title"},[e._v("按数量购买")]),t("div",{staticClass:"item-desc"},[e._v("适合在六个月有效期内阶段性地发放红包封面。")])],1)]),t("div",{staticClass:"pay-type-item",class:{active:2===e.type}},[t("div",{staticClass:"item-content",on:{click:function(t){e.type=2}}},[t("svg-icon",{staticClass:"item-icon",attrs:{name:"pay_type_time"}}),t("div",{staticClass:"item-title"},[e._v("按发放时长购买")]),t("div",{staticClass:"item-desc"},[e._v("适合在某一时间段内集中且大量地发放红包封面，如新品推广、活动直播、演唱会等场景。")])],1),t("div",{staticClass:"choosen-mask"},[e._v("限时活动")])])]),t("div",{staticClass:"next-step"},[t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.nextStep.apply(null,arguments)}}},[e._v("下一步")])],1),t("mp-dialog",{staticClass:"purchase-dialog",attrs:{title:"购买须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showPurchaseDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handlePurchase.apply(null,arguments)}}},[e._v("下一步")])],1)]},proxy:!0}]),model:{value:e.showPurchaseDialog,callback:function(t){e.showPurchaseDialog=t},expression:"showPurchaseDialog"}},[1===e.type?t("div",{staticClass:"content"},[t("div",{staticClass:"normal-text"},[e._v("1. 红包封面按个数收费，1元/个。若购买N个红包封面，则N个微信用户可领取并使用。")]),t("div",{staticClass:"normal-text"},[e._v("2. 定制方购买后，封面发放有效期为6个月。过期后，剩余封面数量将清零。")]),t("div",{staticClass:"normal-text"},[e._v("3. 微信用户领取后，可在3个月内无限次使用该封面。")])]):e._e(),2===e.type?t("div",{staticClass:"content"},[t("div",{staticClass:"normal-text"},[e._v("1. 红包封面按照发放时长收费，100,000元/小时，对应最多可领取50,000个封面，购买后不支持退款。")]),t("div",{staticClass:"normal-text"},[e._v("2. 定制方购买后，须在6个月内全部发完，过期后无法发放给用户，且未发放的部分不支持退款。")]),t("div",{staticClass:"normal-text"},[e._v("3. 用户领取后，可在3个月内无限次使用该封面，过期后无法使用。")])]):e._e()])],1)},ae=[],se=a.ZP.extend({name:"ChoosePayType",data(){return{type:1,showPurchaseDialog:!1}},computed:{cover(){return d.l1.cover}},methods:{nextStep(){this.showPurchaseDialog=!0},handlePurchase(){const e=this,t=1===e.type?"count":"time";e.$router.push({name:"pay",query:{type:t}})}}}),re=se,oe=(0,h.Z)(re,ie,ae,!1,null,"0b9c36d2",null),ne=oe.exports,ce=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-list"},[t("div",{staticClass:"main-card audit-wrap"},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.title))]),e.isFrozen?t("mp-button",{attrs:{type:"default"},on:{click:e.wantSomeBattle}},[e._v("发起申诉")]):e._e()],1),t("a-table",{staticClass:"audit-table",attrs:{columns:e.columns,dataSource:e.list||[],pagination:!1,locale:{emptyText:"暂无记录"}}})],1)])},le=[],de=i(40628),pe=a.ZP.extend({name:"CoverAuditInfo",data(){return{columns:[{dataIndex:"reason",key:"reason",title:"违规原因"}],list:[],status:0}},mounted(){if(!this.$route.params.status)return;const{status:e}=this.$route.params,t=this.$route.params.auditResult,i=t.itemList.map(((e,t)=>{const i={key:t,...e};return i}));this.status=e,this.list=i},computed:{isFrozen(){const e=this;return e.status===de.Rf.Frozen},title(){return this.status===de.Rf.Rejected?"审核驳回原因":this.status===de.Rf.Frozen?"违规被下架原因":""}},methods:{wantSomeBattle(){const e=this;return e.$router.push({name:"doc",query:{page:"right",index:"3"}})}}}),ue=pe,he=(0,h.Z)(ue,ce,le,!1,null,"21207004",null),me=he.exports,ge=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-detail-wrap"},[e.isPageReady&&e.cover.orderId?[t("CoverDetailHeader",{attrs:{cover:e.cover,hasWaitingPayInfo:!!e.waitingPayInfo,leftValidOrderNum:e.leftValidOrderNum,isPrimaryBtnLoading:e.isPrimaryBtnLoading},on:{btnClick:e.handleHeaderBtnClick,checkAdditionalInfo:e.checkAdditionalInfo},scopedSlots:e._u([{key:"tip",fn:function(){return[e.isPublished?t("div",{staticClass:"tip left-expired-time"},[0===e.validPayInfoList.length?t("span",[e._v("该订单的红包封面已被领完")]):1===e.validPayInfoList.length?t("span",[e._v("有效期剩余"+e._s(e.maxExpiredDays)+"天")]):0===e.maxExpiredDays?t("span",[e._v("该订单已超过发放有效期，相应订单的红包封面个数已被清零，微信用户无法领取")]):t("span",[e._v("有效期最多剩余"+e._s(e.maxExpiredDays)+"天，最少剩余"+e._s(e.minExpiredDays)+"天")]),e.validPayInfoList.length?t("mp-popover",{attrs:{position:"up-right",width:460,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"expired-info-wrap"},[e._l(e.validPayInfoList,(function(i,a){return t("div",{key:a,staticClass:"row"},[t("span",[e._v(e._s(i.date))]),t("span",[e._v("订单：发放有效期")]),t("span",[e._v(e._s(i.expired)+" 24:00，")]),t("span",[e._v("剩余")]),t("span",{staticClass:"primary-color"},[e._v(e._s(i.leftDays)+"天")])])})),t("div",{staticClass:"expired-popover-footer",attrs:{type:"flex",align:"middle"}},[t("mp-icon",{attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300",width:40,height:40}}),t("div",{staticClass:"footer"},[t("span",{staticStyle:{"margin-left":"-4px"}},[e._v("发放有效期过后，相应订单的红包封面个数将被")]),t("span",{staticClass:"strong"},[e._v("清零")]),t("span",[e._v("，微信用户")]),t("span",{staticClass:"strong"},[e._v("无法领取")]),t("span",[e._v("。建议在有效期内发放完毕。")])])],1)],2)]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,2177914113)}):e._e()],1):e._e()]},proxy:!0}],null,!1,1634339879)}),e.isShowStatistics?t("CoverDetailStatistics",{staticClass:"mt-5",attrs:{statistics:e.cover.orderStat,jumpStat:e.cover.jumpStat||{},cid:e.cover.orderId}}):e._e(),e.isShowPayInfoList?t("CoverOrderList",{staticClass:"mt-5",attrs:{cover:e.cover}}):e._e(),t("CoverDetailInfo",{staticClass:"mt-5",attrs:{cover:e.cover},on:{btnClick:e.handleHeaderBtnClick}})]:[e._m(0)],t("mp-dialog",{staticClass:"refund-dialog",attrs:{title:"申请退款",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showRefundDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handleRefund.apply(null,arguments)}}},[e._v("申请退款")])],1)]},proxy:!0}]),model:{value:e.showRefundDialog,callback:function(t){e.showRefundDialog=t},expression:"showRefundDialog"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"main-text"},[t("span",[e._v("该封面当前剩余未领取的数量为")]),t("span",{staticClass:"primary-color"},[e._v(e._s(e.cover.canRefundCount))]),t("span",[e._v("个，可退金额为：")])]),t("div",{staticClass:"amount"},[e._v("￥"+e._s(e.canRefundAmount))])])]),t("mp-dialog",{staticClass:"purchase-dialog",attrs:{title:"购买须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showPurchaseDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handlePurchase.apply(null,arguments)}}},[e._v("下一步")])],1)]},proxy:!0}]),model:{value:e.showPurchaseDialog,callback:function(t){e.showPurchaseDialog=t},expression:"showPurchaseDialog"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"normal-text"},[e._v("1. 红包封面按个数收费，1元/个。若购买N个红包封面，则N个微信用户可领取并使用。")]),t("div",{staticClass:"normal-text"},[e._v("2. 定制方购买后，封面发放有效期为6个月。过期后，剩余封面数量将清零。")]),t("div",{staticClass:"normal-text"},[e._v("3. 微信用户领取后，可在3个月内无限次使用该封面。")])])]),1==e.showTestRedDialogFlag?t("mp-dialog",{staticClass:"refund-dialog",attrs:{title:"试用前须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showTestRedDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.showTestRedDialogFlag=2}}},[e._v("下一步")])],1)]},proxy:!0}],null,!1,3196846716),model:{value:e.showTestRedDialog,callback:function(t){e.showTestRedDialog=t},expression:"showTestRedDialog"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"test-tips"},[t("p",[e._v("1.每款红包封面审核通过后，均可获得10个试用封面。")]),t("p",[e._v("2.用户领取试用封面后，可在2小时内无限次使用该封面。")]),t("p",[e._v("3.超过2小时后，试用封面将失效。")])])])]):e._e(),2==e.showTestRedDialogFlag?t("mp-dialog",{staticClass:"refund-dialog",attrs:{title:"试用封面",width:675},model:{value:e.showTestRedDialog,callback:function(t){e.showTestRedDialog=t},expression:"showTestRedDialog"}},[t("div",{staticClass:"content"},[t("Qrcode",{attrs:{qrcodeUrl:e.tempRedQr.objectQrcodeUrl,normalText:"微信扫码领取试用封面",status:e.qrcodeStatus,failText:"扫码登录失败，请重新扫码登录",failTip:e.loginScanFailReason},on:{reload:e.loadAndCheckRedQrcode}}),t("div",{staticClass:"download-link"},[t("a",{on:{click:function(t){return e.saveTempQr(e.tempRedQr.objectQrcodeUrl)}}},[e._v("下载二维码")])]),t("p",{staticClass:"get-count"},[e._v("试用封面剩余可领取："+e._s(e.tempRedQr.leftCnt)+" / "+e._s(e.tempRedQr.totalCnt)+" 个")])],1)]):e._e()],2)},ve=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],fe=i(20629),ye=i(72909),_e=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"cover-detail-header-wrap"},[t("div",{staticClass:"cover-info"},[t("CoverReceiveImg",{staticClass:"receive-img",attrs:{src:e.cover.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":e.widgetCoverUrl,"open-src":e.cover.packetMaterial.openImage?.mediaUrl,"dynamic-src":e.cover.packetMaterial.coverImageDynamic?.mediaUrl,"cover-type":e.cover.packetMaterial?.coverImageDynamicType}}),t("div",{staticClass:"name-and-status"},[t("div",{staticClass:"name"},[e._v(e._s(e.cover.packetName))]),t("div",{staticClass:"status-list"},[e._l(e.statusInfo.statusList,(function(i,a){return t("div",{key:a,staticClass:"status",style:i.style},[e._v(" "+e._s(i.text)+" ")])})),e.statusInfo.additionalInfo?t("a",{staticClass:"desc",on:{click:e.checkAdditionalInfo}},[e._v(e._s(e.statusInfo.additionalInfo))]):e._e()],2)])],1),e.isBlocked?t("div",{staticClass:"right-area"},[t("div",{staticClass:"operate-buttons"},[1===e.blockedStatus&&e.OpenRefundSwitch?t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:function(t){return e.handleBtnClick(5)}}},[e._v("退款")]):2===e.blockedStatus?[t("div",{staticClass:"non-refundable"},[t("span",[e._v("无法退款")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{attrs:{icon:"info_circle_regular",color:"rgba(0, 0, 0, 0.5)"}})]},proxy:!0}],null,!1,1111573384)},[t("p",[e._v("开发票中无法进行退款，请撤销开票申请，或完成开发票后申请退票，退票完成后，方可申请退款操作。")]),t("p",{staticClass:"to-invoice-list"},[t("a",{on:{click:e.goToInvoiceList}},[e._v("查看开票记录")])])])],1),t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[e._v("退款")])]:4===e.blockedStatus?[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[e._v("退款中")])]:5===e.blockedStatus?[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[e._v("已退款")])]:e._e()],2),5===e.blockedStatus?e._t("tip",(function(){return[t("p",{staticStyle:{width:"400px","margin-top":"8px"}},[e._v("提示：退款实际到账时间以银行为准，请关注银行入账通知。若有相关问题，请联系具体银行。")])]})):e._e()],2):t("div",{staticClass:"right-area"},[t("div",{staticClass:"operate-buttons"},[e.statusInfo.defaultBtn?[e.statusInfo.defaultBtn.disabled?t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"d"},[t("p",[e._v("orderID："+e._s(e.cover.orderId))]),t("br"),e.isAtmosphereCover?t("p",[e._v("氛围封面暂不支持购买，请联系微信广告侧对接")]):t("p",[t("span",[e._v("集团内部业务购买红包封面，请前往内部虚拟资源领用平台")]),t("a",{attrs:{href:"http://ivr.woa.com",target:"_blank"}},[e._v("（ivr.woa.com）")]),t("span",[e._v("下单购买。")])])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"default-btn",attrs:{type:"default",disabled:!0}},[e._v(e._s(e.statusInfo.defaultBtn.text))])]},proxy:!0}],null,!1,2558662612)}):t("mp-button",{staticClass:"default-btn",on:{click:function(t){return e.handleBtnClick(e.statusInfo.defaultBtn.actionType)}}},[e._v(" "+e._s(e.statusInfo.defaultBtn.text)+" ")])]:e._e(),e.statusInfo.primaryBtn?["发放封面"!=e.statusInfo.primaryBtn.text||e.isCanEdit||e.statusInfo.primaryBtn.disabled?e.statusInfo.primaryBtn.disabled?t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[e.isAtmosphereCover&&[2,3].includes(e.statusInfo?.primaryBtn?.actionType)?t("div",{staticClass:"d"},[t("p",[e._v("orderID："+e._s(e.cover.orderId))]),t("br"),t("p",[e._v("氛围封面暂不支持购买，请联系微信广告侧对接")])]):e.statusInfo.primaryBtn.info?t("div",{staticClass:"d"},[t("p",[e._v(e._s(e.statusInfo.primaryBtn.info))])]):t("div",{staticClass:"d"},[t("p",[e._v("orderID："+e._s(e.cover.orderId))]),t("br"),t("p",[t("span",[e._v("集团内部业务购买红包封面，请前往内部虚拟资源领用平台")]),t("a",{attrs:{href:"http://ivr.woa.com",target:"_blank"}},[e._v("（ivr.woa.com）")]),t("span",[e._v("下单购买。")])])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[e._v(e._s(e.statusInfo.primaryBtn.text))])]},proxy:!0}],null,!1,860354890)}):t("mp-button",{staticClass:"primary-btn",attrs:{loading:e.isPrimaryBtnLoading,type:"primary"},on:{click:function(t){return e.handleBtnClick(e.statusInfo.primaryBtn.actionType)}}},[e._v(" "+e._s(e.statusInfo.primaryBtn.text)+" ")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无发放封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"}},[e._v("发放封面")])]},proxy:!0}],null,!1,849863091)})]:e._e()],2),e._t("tip")],2)])])},Ce=[],be=i(58534),we=i(96486),Ie=i.n(we);(function(e){e[e["试用封面"]=0]="试用封面",e[e["撤销审核"]=1]="撤销审核",e[e["购买"]=2]="购买",e[e["再次购买"]=3]="再次购买",e[e["发放封面"]=4]="发放封面",e[e["退款"]=5]="退款",e[e["取消支付"]=6]="取消支付",e[e["支付"]=7]="支付",e[e["申诉"]=8]="申诉",e[e["重新编辑"]=9]="重新编辑"})(H||(H={}));const ke={primaryBtn:{text:H[4],actionType:4},defaultBtn:{text:H[3],actionType:3}},Te={[de.Rf.Editing]:{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"待提交",style:{color:"#9A9A9A",borderColor:"#9A9A9A"}}]},[de.Rf.Auditing]:{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"审核中",style:{color:"#FA9D3B",borderColor:"#FA9D3B"}}],primaryBtn:{text:H[1],actionType:1}},[de.Rf.Approved]:{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"审核通过",style:{color:"#1AAD19",borderColor:"#1AAD19"}}],primaryBtn:{text:H[2],actionType:2},defaultBtn:{text:H[0],actionType:0}},[de.Rf.Rejected]:{color:"#fa5151",statusList:[{text:"审核驳回",style:{color:"#fa5151",borderColor:"#fa5151"}}],additionalInfo:"查看原因"},[de.Rf.Published]:{color:"rgba(0, 0, 0, 0.9)",statusList:[{text:"已上线",style:{color:"#1AAD19",borderColor:"#1AAD19"}}],primaryBtn:{text:H[4],actionType:4},defaultBtn:{text:H[3],actionType:3}},[de.Rf.Frozen]:{color:"#fa5151",statusList:[{text:"违规冻结，暂不可用",style:{color:"#fa5151",borderColor:"#fa5151"}}],additionalInfo:"查看原因",primaryBtn:{text:H[8],actionType:8}},[de.Rf.Blocked]:{color:"#fa5151",statusList:[{text:"违规已下线",style:{color:"#fa5151",borderColor:"#fa5151"}}],primaryBtn:{text:H[5],actionType:5},additionalInfo:"查看原因"}};var Se=Te,xe=a.ZP.extend({name:"CoverDetailHeader",data(){return{isCanEdit:!0}},props:{cover:{type:Object,default:()=>({})},hasWaitingPayInfo:Boolean,isPrimaryBtnLoading:Boolean,leftValidOrderNum:Number},components:{CoverReceiveImg:be.Z},async mounted(){await d.U6.getUserInfo(),1!=d.U6.user.isSecondary||1&d.U6.user.managerFlag||(this.isCanEdit=!1)},computed:{isAtmosphereCover(){return!(!this.cover.packetMaterial?.atmosphereSource?.mediaUrl&&!this.cover.packetMaterial?.bubbleAtmospherePag?.mediaUrl)},OpenRefundSwitch(){return d.U6.auth.OpenRefundSwitch},isDefaultPayBtnDisabled(){const e=this,t=2==e.statusInfo.defaultBtn.actionType||3==e.statusInfo.defaultBtn.actionType;return t&&!e.openPaySwitch},isPrimaryPayBtnDisabled(){const e=this,t=2==e.statusInfo.primaryBtn.actionType||3==e.statusInfo.primaryBtn.actionType;return t&&!e.openPaySwitch},openPaySwitch(){return d.U6.auth.OpenPaySwitch},isInnerUser(){return d.U6.auth.InnerAuthor},isBlocked(){const{orderStatus:e}=this.cover;return e==de.Rf.Blocked},blockedStatus(){const{blockedStatus:e}=this.cover;return e},statusInfo(){const{orderStatus:e}=this.cover,t=Se;let i=t[e];if(this.hasWaitingPayInfo)return i=Object.assign({},i,ke),0===this.leftValidOrderNum&&(i.primaryBtn.disabled=!0,i.primaryBtn.info="无可发放封面"),i;const a=e=>2===e||3===e;if(i?.primaryBtn&&a(i.primaryBtn.actionType)&&this.isInnerUser||this.isAtmosphereCover&&a(i?.primaryBtn?.actionType)?i.primaryBtn.disabled=!0:i&&i.defaultBtn&&(i.primaryBtn.disabled=!1),i?.defaultBtn&&a(i.defaultBtn.actionType)&&this.isInnerUser||this.isAtmosphereCover&&a(i?.defaultBtn?.actionType)?i.defaultBtn.disabled=!0:i&&i.defaultBtn&&(i.defaultBtn.disabled=!1),e===de.Rf.Published){if(i=Ie().cloneDeep(i),0===this.leftValidOrderNum)return i.primaryBtn.disabled=!0,i.primaryBtn.info="剩余 0 个红包封面可发放，若要继续发放，需要前往订单详情-发放记录里，回收未领取的红包封面",i;i.primaryBtn.disabled=!1}return i||{}},widgetCoverUrl(){const e=this.cover;return e?.packetMaterial?.syntheticWidgetImage?.mediaUrl}},methods:{handleBtnClick(e){this.$emit("btnClick",e)},checkAdditionalInfo(){this.$emit("checkAdditionalInfo")},goToInvoiceList(){this.$router.push({name:"invoiceManage"})},toadmin(){this.$router.push({name:"administrator"})}}}),Ae=xe,Pe=(0,h.Z)(Ae,_e,Ce,!1,null,"1dad46fa",null),De=Pe.exports,Ue=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"cover-detail-statitics-wrap"},[t("div",{staticClass:"stat-title"},[t("span",[e._v("发放数据")]),t("a",{staticClass:"more",on:{click:e.routeToMore}},[t("span",[e._v("查看更多数据")])])]),t("div",{staticClass:"stat-desc"},[e._v("实时数据")]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已购买个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalPurchaseCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已发放个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalSendCnt)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalReceiveCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("通过「推广」领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalHeatCnt)))])]),e.statistics.totalPurchaseTime?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("累计购买封面发放时长")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.totalPurchaseTime)))])]):e._e()]),t("div",{staticClass:"divide"}),t("div",{staticClass:"stat-title"},[e._v("使用数据")]),t("div",{staticClass:"stat-tab-list mt-2"},[t("mp-form",[t("mp-form-item",{attrs:{label:"时间范围"}},[t("mp-radio-group",{staticClass:"mt-2",model:{value:e.statisticsTab,callback:function(t){e.statisticsTab=t},expression:"statisticsTab"}},[t("mp-radio",{attrs:{value:"yesterday"}},[e._v("昨日数据")]),t("mp-radio",{attrs:{value:"total"}},[e._v("累计数据")])],1)],1)],1)],1),t("div",{staticClass:"stat-desc",staticStyle:{"margin-top":"-22px"}},[e._v("数据截止至："+e._s(e.lastDate)+"（每日8点更新）")]),"yesterday"===e.statisticsTab?[t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发封面红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdaySendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆封面红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayReceiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayDetailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayStoryExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发封面红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdaySendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆封面红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayReceivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayDetailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.statistics.yesterdayStoryExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.jumpStat.enterEmotionproductPv)))]):e._e()]):e._e()])]:e._e(),"total"===e.statisticsTab?t("div",{class:{loading:e.loading}},[e.loading?t("i",{staticClass:"weui-desktop-loading"},[e._v("加载中")]):e._e(),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductPv)))]):e._e()]):e._e()])]):e._e()],2)])},Ee=[];const Re=i(90520);var Me=a.ZP.extend({name:"CoverStatitics",data(){return{fullStatData:null,statisticsTab:"yesterday",loading:!1}},props:{statistics:{},jumpStat:{},cid:String},computed:{lastDate(){const e=this;return Re("yyyy年MM月dd日",new Date(1e3*e.statistics.statTime))},coverActionTypeText(){return!!d.l1.coverActionType&&de.pK[d.l1.coverActionType]},coverActionType(){return d.l1.coverActionType},yesterdayStat(){const e=this.fullStatData;return e&&e.yesterdayStat?e.yesterdayStat:{}},yesterdayStatItem(){const e=this;return e.yesterdayStat.itemList&&e.yesterdayStat.itemList[0]?e.yesterdayStat.itemList[0]:{}},summaryStat(){const e=this.fullStatData;return e&&e.summaryStat?e.summaryStat:{}},summaryStatItem(){const e=this;return e.summaryStat.itemList&&e.summaryStat.itemList[0]?e.summaryStat.itemList[0]:{}}},watch:{statisticsTab(e){"total"!==e||this.fullStatData||this.fetchData()}},methods:{async fetchData(){if(this.loading=!0,!this.cid)return this.$router.replace({name:"covers"});this.fullStatData=await d.l1.getFullStat(this.cid),this.loading=!1},routeToMore(){this.$router.push({name:"statistics",query:{cid:this.cid}})}},filters:{undefineCheck(e){return e||"-"}}}),Le=Me,Ne=(0,h.Z)(Le,Ue,Ee,!1,null,"38f17cd6",null),Fe=Ne.exports,Oe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"wrapper",staticClass:"main-card"},[t("div",{staticClass:"cover-detail-main-info-wrap"},[t("div",{staticClass:"info-title justify-right"},[t("span",[e._v("红包封面样式")]),9!=e.cover.orderStatus&&8!=e.cover.orderStatus&&5!=e.cover.orderStatus&&2!=e.cover.orderStatus?[e.isCanEdit?t("mp-button",{staticClass:"preview",on:{click:e.resetBtn}},[e._v("重新编辑")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"preview"},[e._v("重新编辑")])]},proxy:!0}],null,!1,1350798240)})]:e._e()],2),t("div",{staticClass:"preview-button",on:{click:e.handleMobilePreview}},[t("a",[e._v("手机预览整体效果")])]),t("MaterialPictures",{attrs:{material:e.materials,showCoverStory:e.showStory,story:e.story,cover:e.cover,isEdit:!1,coverType:e.coverType}}),e.showStory?[t("div",{staticClass:"story-title"},[e._v("封面故事")]),t("StoryMake",{attrs:{value:e.cover.packetMaterial.storyDetailList,cover:e.cover,storyDesc:e.cover.packetMaterial.storyDescription,isDisplayStatus:!0}})]:e._e(),t("div",{staticClass:"divide-line"}),t("div",{staticClass:"info-title"},[e._v("基本信息")]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("封面ID：")]),t("span",[e._v(e._s(e.$route.query.id))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("材料证明：")]),e.cover.proofMaterial&&e.cover.proofMaterial.mediaName?[t("DownloadLink",{attrs:{url:e.cover.proofMaterial.mediaUrl,name:e.cover.proofMaterial.mediaName,"download-type":"ajax"}},[e._v(" "+e._s(e.cover.proofMaterial.mediaName)+" ")]),t("span",[e._v("（"+e._s(e._f("prettySize")(e.cover.proofMaterial.mediaSize))+"）")])]:[t("span",[e._v("-")])]],2)])],2),t("CoverPreviewDialog",{attrs:{cover:e.cover},model:{value:e.showPreviewQrcodeDialog,callback:function(t){e.showPreviewQrcodeDialog=t},expression:"showPreviewQrcodeDialog"}})],1)},Be=[],qe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"material-pictures"},[t("div",{staticClass:"preview-wrap"},[e.material?t("div",{ref:"cardList",staticClass:"card-list"},[t("div",{staticClass:"card-wrap card-0 receive"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("receive",0)}}},[2===e.coverType?t("div",{staticClass:"img-wrap"},[t("widget-cover-img",{staticClass:"example-img",attrs:{"cover-url":e.material.receiveImageUrl,"widget-url":e.recWidgetImageUrl||e.coverToolPics.example_6,"bottom-url":e.coverToolPics.hb_bottom_openactive}})],1):t("div",{staticClass:"img-wrap img-wrap-border"},[e.material.receiveImageUrl?t("img",{staticClass:"example-img",attrs:{src:e.material.receiveImageUrl}}):e._e(),t("img",{staticClass:"crop crop0",attrs:{src:e.coverToolPics.crop0}})])]),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("拆红包页")])]),e.material.bubbleImageUrl?t("div",{staticClass:"card-wrap card-1 bubble"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("bubble",1)}}},[t("div",{staticClass:"img-wrap"},[e.senderC2cWidgetImageUrl?t("widget-bubble-img",{staticClass:"crop crop2 widget-bubble-img",attrs:{"bubble-url":e.coverToolPics.crop2,"widget-url":e.senderC2cWidgetImageUrl,"bubble-image-url":e.material.bubbleImageUrl}}):[t("img",{staticClass:"crop2-bg",attrs:{src:e.material.bubbleImageUrl}}),t("img",{staticClass:"crop crop2",attrs:{src:e.coverToolPics.crop2}})],e.cover.brandLogo&&e.cover.brandLogo.mediaUrl?t("img",{staticClass:"packet-brand-logo",class:{"packet-brand-logo_widget":2===e.coverType},attrs:{src:e.cover.brandLogo.mediaUrl}}):t("div",{staticClass:"packet-name-bubble",class:{"packet-name-bubble_widget":2===e.coverType}},[e._v(e._s(e.cover.packetName||"红包封面简称"))])],2)]),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("红包气泡")])]):e._e(),e.material.corpImageUrl?t("div",{staticClass:"card-wrap card-2 corp"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("corp",2)}}},[t("div",{staticClass:"img-wrap border-px mx-auto w-[80px] border border-solid border-opblack_4"},[t("corp-info-preview",{attrs:{corpImageUrl:e.material.corpImageUrl,packetName:e.cover.packetName}})],1)]),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("发红包页")])]):e._e(),e.material.detailImageUrl||e.storyMediaList.length?t("div",{staticClass:"card-wrap card-3 detail"},[e.storyMediaList.length?[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("detail",3)}}},[t("div",{staticClass:"img-wrap"},[t("CoverDetailImg",{staticStyle:{height:"100%","object-fit":"contain","border-radius":"4px"},attrs:{"media-info":e.firstStoryMedia}})],1)]),e._l(e.storyMediaList,(function(i,a){return t("div",{key:a,staticClass:"card-item",style:{left:4*(e.storyMediaList.length-(a+1))+"px"}})}))]:e.material.detailImageUrl?[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg("detail",3)}}},[t("div",{staticClass:"img-wrap"},[t("CoverDetailImg",{staticStyle:{height:"100%","object-fit":"cover","border-radius":"4px"},attrs:{"pic-url":e.material.detailImageUrl}})],1)])]:e._e(),t("div",{staticClass:"mt-2 text-center text-opblack_1"},[e._v("红包详情页")])],2):e._e(),e._l(e.storyMediaList.slice(1),(function(i,a){return t("div",{key:i.mediaUrl,staticClass:"card-wrap detail",class:`card-${3+a+1}`,staticStyle:{position:"absolute",left:"-9999px"},on:{click:function(t){e.checkBigImg("detail",3+(a+1))}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"img-wrap"},[t("CoverDetailImg",{staticStyle:{width:"100%"},attrs:{mediaInfo:i}})],1)])])}))],2):e._e()]),t("mp-dialog",{attrs:{title:"预览效果",width:600,height:600},model:{value:e.showBigImgDialog,callback:function(t){e.showBigImgDialog=t},expression:"showBigImgDialog"}},[t("div",{ref:"bigImgWrap",staticClass:"big-img-wrap"}),t("div",{staticClass:"control"},[e.showPrev?t("div",{staticClass:"prev-btn",on:{click:e.prevCheckedImg}}):e._e(),e.showNext?t("div",{staticClass:"next-btn",on:{click:e.nextCheckedImg}}):e._e()]),2===e.curCheckedImgIndex?t("div",{staticClass:"crop-tips"},[e._v("微信8.0.28及以上版本支持展示该样式")]):e._e(),e.curCheckedImgIndex>=3?t("div",{staticClass:"detail-img-list"},e._l(e.storyMediaList,(function(i,a){return t("div",{key:i.mediaUrl,staticClass:"detail-thumb-item",class:{active:a+3===e.curCheckedImgIndex},on:{click:function(t){return e.setDetailImgIndex(a)}}},[t("cover-detail-img",{staticClass:"detail-pic",attrs:{"media-info":i}})],1)})),0):e._e()])],1)},Qe=[],je=i(34225),$e=i(17693),Ze=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(e.img?"img":"span",{tag:"component",attrs:{src:e.img}})},He=[],Ge=(i(30541),i(18205)),We=a.ZP.extend({components:{},props:{lazy:{type:Boolean,default:!1},bubbleUrl:String,widgetUrl:String,bubbleImageUrl:String,scale:{type:Number,default:1}},data(){return{img:"",version:0}},computed:{},mounted(){this.generateAlien()},watch:{bubbleUrl(){this.generateAlien()},widgetUrl(){this.generateAlien()},bubbleImageUrl(){this.generateAlien()}},methods:{generateAlien(){this.version+=1;const e=this.version,t=[{url:this.bubbleUrl,width:510*this.scale,height:187*this.scale,y:42*this.scale},{url:this.widgetUrl,width:340*this.scale,height:272*this.scale,x:162*this.scale}];this.bubbleImageUrl&&t.unshift({url:this.bubbleImageUrl,width:510*this.scale,height:187*this.scale,y:42*this.scale,radius:20*this.scale});const i=new Ge.mc(t,{width:510*this.scale,height:272*this.scale});i.outputImg().then((t=>{e===this.version&&(this.img=t)}))}}}),ze=We,Ve=(0,h.Z)(ze,Ze,He,!1,null,"3fb4ad5e",null),Je=Ve.exports,Ke=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"CoverDetailImg",staticClass:"CoverDetailImg relative overflow-hidden bg-no-repeat",style:e.storyPreviewStyle},[e.loading?t("preview-loading"):e._e(),e.isVideoStory?t("video",{ref:"videoStory",staticClass:"absolute w-full",attrs:{autoplay:e.autoplay,loop:"",muted:"",src:e.mediaInfo.mediaUrl},domProps:{muted:!0}}):e._e(),e.detailImageDynamicUrl&&!e.mediaInfo?.mediaUrl?t("div",{staticClass:"absolute w-full",style:{top:100*e.detailImgOffsetTop+"%"}},[t("pag-display",{ref:"pagDisplay",staticClass:"pag-display",attrs:{name:"coverdetailpag",url:e.detailImageDynamicUrl,loop:!0,autoInit:e.autoplay,autoplay:e.autoplay,showType:"preview"}})],1):e._e(),e.detailImgUrl?t(e.img?"img":"span",{tag:"component",staticClass:"z-1 relative h-full w-full object-contain",attrs:{src:e.img,tag:"img"}}):t("img",{staticClass:"w-full",attrs:{src:"https://res.wx.qq.com/t/fed_upload/251341c5-76e5-440f-917b-8172142b296f/example.png"}})],1)},Ye=[],Xe=i(9938),et=i(28687),tt=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},it=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"justify-cente absolute inset-0 z-10 flex items-center",staticStyle:{background:"rgba(246, 248, 249, 0.8)"}},[t("div",{staticClass:"mx-auto text-center"},[t("div",{staticClass:"weui-desktop-loading"}),t("div",{staticClass:"mt-4 text-opblack_1"},[e._v("生成中")])])])}],at=a.ZP.extend({components:{},data(){return{}},computed:{},methods:{}}),st=at,rt=(0,h.Z)(st,tt,it,!1,null,"0c249870",null),ot=rt.exports;const{mapState:nt}=(0,fe._p)("cover"),ct=1080,lt=2337,dt=1062,pt=1799;var ut=a.ZP.extend({components:{PagDisplay:et.Z,PreviewLoading:ot},props:{loading:Boolean,actionList:{type:Array,default:()=>[]},mediaInfo:Object,picUrl:String,scale:{type:Number,default:.5},autoplay:Boolean,detailImageDynamicUrl:String},data(){return{img:"",hasStoryBg:Ge.is.detail_page_has_story,version:0,detailImgOffsetTop:-.1335,detailImgHeightPro:.77}},computed:{...nt(["showEditDialog","previewPagReinit"]),storyPreviewStyle(){return{"background-image":`url(${this.isVideoStory?this.fuzzyImgUrl:""})`}},hasStory(){return!!this.mediaInfo&&Object.keys(this.mediaInfo)?.length>0},fuzzyImgUrl(){return this.mediaInfo?.mediaFuzzyUrl||""},detailImgUrl(){return this.picUrl&&!this.hasStory?this.picUrl:(1===this.mediaInfo?.mediaType?this.mediaInfo.mediaUrl:this.mediaInfo?.mediaThumbnailUrl)||""},isVideoStory(){return 2===this.mediaInfo?.mediaType},isPicStory(){return 1===this.mediaInfo?.mediaType},coverFromText(){const e=this.actionList[0];return e?4===e.actionType?`视频号 · ${e.nickname}`:2===e.actionType?`公众号 · ${e.nickname}`:"":""}},mounted(){this.generateAlien(),this.handleVideoStyle(),this.autoplay&&this.$refs.videoStory instanceof HTMLVideoElement&&(console.log("自动播放"),this.$refs.videoStory.play())},watch:{previewPagReinit(e){const t=this.$refs.pagDisplay;e.startsWith("detail")&&this.autoplay&&this.detailImageDynamicUrl&&(console.log("detail pag reinit",e),t?.initPag())},showEditDialog(e){const t=this.$refs.pagDisplay;e?t?.destroy():this.autoplay&&t?.initPag()},autoplay:{handler(e){const t=this.$refs.pagDisplay;e?console.log("coverdetailpag isactive"):(this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.pause(),t?.destroy())},immediate:!0},mediaInfo(){this.isVideoStory&&this.handleVideoStyle()},detailImgUrl(){this.generateAlien()},detailImageDynamicUrl(){this.generateAlien()},actionList(){this.generateAlien()}},methods:{async handleVideoStyle(){if(this.isPicStory||!this.mediaInfo?.mediaUrl)return;const e=await(0,Xe.$p)(this.mediaInfo?.mediaUrl),{width:t,height:i}=e,a=this.$refs.videoStory,s=this.$refs.CoverDetailImg;if(t>i)a&&(a.style.top=dt/2/lt*100+"%",a.style.width="100%",a.style.transform="translateY(-50%)"),s&&(s.style.backgroundSize=`auto ${100*this.detailImgHeightPro}%`);else{if(a){const e=pt*t/i;a.style.top="-13.5%",a.style.width=e/ct*100+"%",a.style.left=(ct-e)/2/ct*100+"%"}s&&(s.style.backgroundSize="100% auto")}},async generateAlien(){if(!this.detailImgUrl)return;let e=ct,t=ct,i=0,a=0;const s="-apple-system,system-ui,BlinkMacSystemFont,PingFang SC,SF Pro Text,Helvetica Neue,Helvetica,Hiragino Sans GB,Heiti SC,Arial,Microsoft YaHei UI,Microsoft YaHei,sans-serif",r=this.hasStoryBg,o=Ge.is.detail_page_no_story,n=await(0,ye.t$)(this.detailImgUrl),{width:c,height:l}=n,d=ct*l/c;if(this.fuzzyImgUrl){const s=await(0,ye.t$)(this.fuzzyImgUrl);t=lt*this.detailImgHeightPro,e=s.width*t/s.height,i=-(e/2-ct/2),a=-.1335*lt}const p=ct;let u=d*this.detailImgOffsetTop;d<p&&(u=(p-d)/2);let h=[{url:this.hasStory?r:o,width:ct,height:lt}];if(this.hasStory||this.detailImageDynamicUrl||h.unshift({url:this.detailImgUrl,x:0,y:u,width:ct,height:d}),this.isPicStory&&h.unshift({url:this.fuzzyImgUrl,x:i,y:a,width:e,height:t},{url:this.detailImgUrl,x:0,y:u,width:ct,height:d}),this.coverFromText){const e=(0,Ge.mY)(`封面来自${this.coverFromText}`,`38px ${s}`),t=(0,Ge.mY)("封面来自",`38px ${s}`),i=e+8,a=(ct-i)/2,r=a+8+t;h.push({text:"封面来自",x:a,y:1082,style:{color:"rgba(0, 0, 0, 0.3)"},font:`38px ${s}`},{text:this.coverFromText,x:r,y:1082,style:{color:"rgba(87, 107, 149, 1)"},font:`38px ${s}`})}h=h.filter((e=>!!e.url||!!e.text));const m=new Ge.mc(h,{width:ct,height:lt}),g=await m.outputImg();this.img=g}}}),ht=ut,mt=(0,h.Z)(ht,Ke,Ye,!1,null,"662b1caf",null),gt=mt.exports,vt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative h-full w-full"},[e.loading?t("preview-loading",{staticClass:"z-20"}):e._e(),t(e.img?"img":"span",{tag:"component",staticClass:"relative z-10 h-full w-full",attrs:{src:e.img,tag:"img"}}),e.corpLogoDynamicUrl?t("div",{staticClass:"absolute left-[4.1%] top-[30%] h-[9.9%] w-[91.79%]"},[t("pag-display",{ref:"pagDisplay",staticClass:"pag-display",attrs:{active:e.active,name:"corpinfopag",url:e.corpLogoDynamicUrl,autoplay:e.autoplay,loop:!0,autoInit:e.autoplay,showType:"preview"}})],1):e._e()],1)},ft=[],yt=i(20296),_t=i.n(yt);const Ct=e=>/^[a-zA-Z0-9]+$/.test(e),{mapState:bt}=(0,fe._p)("cover"),wt=390,It=844;var kt=a.ZP.extend({components:{PagDisplay:et.Z,PreviewLoading:ot},props:{active:Boolean,loading:Boolean,packetName:{type:String,default:"微信"},corpImageUrl:{type:String},corpLogoDynamicUrl:String,autoplay:Boolean,scale:{type:Number,default:2}},data(){return{img:"",debounceGenerateAlicen:null}},computed:{...bt(["showEditDialog","previewPagReinit"])},mounted(){this.debounceGenerateAlicen=_t()(this.generateAlien,500),this.debounceGenerateAlicen()},watch:{previewPagReinit(e){const t=this.$refs.pagDisplay;e.startsWith("corp")&&this.autoplay&&this.corpLogoDynamicUrl&&(console.log("corp pag reinit",e),t?.initPag())},showEditDialog(e){const t=this.$refs.pagDisplay;e?t?.destroy():this.autoplay&&t?.initPag()},packetName(){this.debounceGenerateAlicen()},corpImageUrl(){this.debounceGenerateAlicen()},corpLogoDynamicUrl(){this.debounceGenerateAlicen()},autoplay(e){const t=this.$refs.pagDisplay;e?console.log("corpinfopag isactive"):t?.destroy()}},methods:{async generateAlien(){const e="https://res.wx.qq.com/t/fed_upload/100a5829-715a-4457-abca-9c88727bae76/default_corp.png",t="-apple-system,system-ui,BlinkMacSystemFont,PingFang SC,SF Pro Text,Helvetica Neue,Helvetica,Hiragino Sans GB,Heiti SC,Arial,Microsoft YaHei UI,Microsoft YaHei,sans-serif",{scale:i}=this,a=17*i,s=14*i,r=this.corpImageUrl?{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:8,color:"#FFE2B1",shadowColor:"rgba(0, 0, 0, 0.05)"}:{color:"#F0CE6F"};let o=[{url:Ge.is.corp_page,width:wt*i,height:It*i},{url:this.corpImageUrl?"https://res.wx.qq.com/t/fed_upload/005a31cf-a4f9-47c2-957d-0c8fbd5b53f5/arrow-gloden.png":"https://res.wx.qq.com/t/fed_upload/fade9f8d-5df3-49aa-bd99-b9ddebf050f3/arrow-gloden.png",width:24*i,height:30*i,x:338*i,y:279*i},{text:"红包封面",x:32*i,y:272*i,style:r,font:`${a}px ${t}`},{text:this.packetName,x:32*i,y:(Ct(this.packetName)?307:300)*i,style:r,font:`${s}px ${t}`}];this.corpLogoDynamicUrl||o.unshift({url:this.corpImageUrl||e,width:358*i,height:84*i,x:16*i,y:254*i});const n=new Ge.mc(o,{width:wt*i,height:It*i}),c=await n.outputImg();this.img=c,this.$emit("update",c)}}}),Tt=kt,St=(0,h.Z)(Tt,vt,ft,!1,null,"d6ea7fb8",null),xt=St.exports;const{mapState:At}=(0,fe._p)("cover");var Pt=a.ZP.extend({name:"MaterialPictures",components:{CoverDetailImg:gt,WidgetCoverImg:$e.Z,WidgetBubbleImg:Je,CorpInfoPreview:xt},data(){return{coverToolPics:Ge.is,showBigImgDialog:!1,curCheckedImgIndex:0,curCheckedImgType:"example",jumpName:""}},props:{imgFile:{type:Object,default(){return{}}},receiveImg:{type:Object,default(){return{}}},corpImg:{type:Object,default(){return{}}},bubbleImg:{type:Object,default(){return{}}},material:{type:Object||null},showCoverStory:{type:Boolean,default(){return!1}},story:{type:Object,default(){return{}}},cover:{type:Object,default(){return{}}},coverType:{type:Number,default:0}},computed:{...At(["actionAuthInfo"]),storyDetailList(){return this.cover.packetMaterial.storyDetailList},storyMediaList(){return this.storyDetailList.map((e=>e.media))},firstStoryMedia(){return this.storyMediaList?.[0]},showPrev(){const e=this;return e.curCheckedImgIndex>0},showNext(){const e=this;let t=3;return t+=this.storyMediaList.length?this.storyMediaList.length-1:0,e.curCheckedImgIndex<t},jumpAction(){const{cover:e}=this;return e?.packetMaterial?.actionList?.[0]||this.actionAuthInfo.action||{}},recWidgetImageUrl(){return this.cover?.packetMaterial?.recWidgetImage?.mediaUrl||""},senderC2cWidgetImageUrl(){return this.cover?.packetMaterial?.senderC2cWidgetImage?.mediaUrl||""}},methods:{checkBigImg(e,t){const i=this,a=i.$refs.bigImgWrap;let s;if(e.search("example")>-1){const e=document.querySelectorAll(".example-list .source-card");s=e[Number(t)],this.curCheckedImgType="example"}else{const e=i.$refs.cardList;s=e.querySelector(`.card-wrap.card-${t}`),this.curCheckedImgType="card"}let r="0";"bubble"===e?r="2":"receive"===e?r="1":"corp"===e&&(r="3"),$.bL.baseActionReport({actionType:"4",coverId:i.cover.orderId||"",processType:"1",authorId:d.U6.user.authorId,editType:r}),a.innerHTML="";const o=s.cloneNode(!0);o.style.position="relative",o.style.left=0;const n=o.querySelector(".card");o.innerHTML="",o.appendChild(n),a.appendChild(o),this.curCheckedImgIndex=t,this.showBigImgDialog=!0},prevCheckedImg(){this.checkBigImg(this.curCheckedImgType,this.curCheckedImgIndex-1)},nextCheckedImg(){this.checkBigImg(this.curCheckedImgType,this.curCheckedImgIndex+1)},setDetailImgIndex(e){this.checkBigImg(this.curCheckedImgType,3+e)},async getFinderInfo(){const e=this.jumpAction.finderProfileDetail.queryString,t=await je.yQ.storyGetFinderInfo(e);if(t&&0===t.baseResponse.ret){const e=t.jumpInfoList.find((e=>e.scene===je.DS.finder));e&&(this.jumpName=e.nickname)}},async getBizInfo(){const e=await je.yQ.storyGetBizInfo(this.jumpAction.mpAccountDetail.appName.replace("@app",""),1);console.log("getBizInfo",e),e&&0===e.baseResponse.ret&&e.nickname&&(this.jumpName=e.nickname)},async getJumpName(){this.jumpAction&&(4===this.jumpAction.actionType?await this.getFinderInfo():2===this.jumpAction.actionType&&await this.getBizInfo())}},mounted(){this.getJumpName()},watch:{jumpAction(){this.getJumpName()}}}),Dt=Pt,Ut=(0,h.Z)(Dt,qe,Qe,!1,null,"cf62d8e0",null),Et=Ut.exports,Rt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"preview-dialog",attrs:{title:"预览效果",value:e.showPreviewQrcodeDialog},on:{input:e.toggleDialog}},[t("div",{staticClass:"content",class:{"show-mask":2===e.status}},[t("div",{staticClass:"qrcode-wrap"},[e.url?t("img",{staticClass:"qrcode",attrs:{src:e.url}}):e._e(),t("div",{staticClass:"mask",on:{click:e.handleClickMask}},[t("svg-icon",{staticClass:"reload-icon",attrs:{name:"reload"}})],1)]),2!==e.status?[t("div",{staticClass:"tip"},[e._v("使用微信扫码进行预览")])]:[t("div",{staticClass:"tip"},[e._v("二维码过期，请刷新重试")])]],2)])},Mt=[],Lt=i(52117);const Nt=new $.ZP;var Ft;(function(e){e[e["init"]=0]="init",e[e["normal"]=1]="normal",e[e["expired"]=2]="expired"})(Ft||(Ft={}));var Ot=a.ZP.extend({name:"CoverPreviewDialog",data(){return{url:"",showPreviewQrcodeDialog:!1,status:Ft.init,timer:NaN}},props:{value:{type:Boolean,default:!1},cover:{type:Object,default(){return{}}}},watch:{value(e){e&&this.handleMobilePreview()}},beforeDestroy(){clearTimeout(this.timer)},methods:{async handleMobilePreview(){Nt.baseActionReport({actionType:"5",coverId:this.cover.orderId||"",processType:"1",authorId:d.U6.user.authorId,editType:""});try{const e=await(new je.ZP).getPreviewQrcode(this.cover.packetMaterial,this.cover.packetName,this.cover.brandLogo);e&&0===e.baseResponse.ret&&(this.url=e.qrCodeImage,this.showPreviewQrcodeDialog=!0,this.status=Ft.normal,this.checkPreviewQrcode(e.token),(0,Lt.H)("get_preview_qrcode"))}catch(e){console.error(e)}},async checkPreviewQrcode(e){try{const t=await(new je.ZP).checkPreviewQrcode(e);0!==t.baseResponse.ret||0===t.remain?this.status=Ft.expired:this.showPreviewQrcodeDialog&&(this.timer=window.setTimeout((()=>this.checkPreviewQrcode(e)),1e3))}catch(t){console.error(t)}},handleClickMask(){this.handleMobilePreview()},toggleDialog(e){this.showPreviewQrcodeDialog=e,this.$emit("input",e)}}}),Bt=Ot,qt=(0,h.Z)(Bt,Rt,Mt,!1,null,"6cc4e1fb",null),Qt=qt.exports,jt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"story-make-wrap js-story-make mt-2.5"},[e.canAddMoreMedia&&!e.isDisplayStatus?t("div",{staticClass:"upload-opr-wrap row-upload-opr-wrap flex"},[t("a-upload",{attrs:{name:"file",accept:".jpg,.jpeg,.png,.mp4",action:e.uploadUrl,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!1},fileList:e.curUploadFileList,beforeUpload:e.beforeUpload},on:{change:e.handleUploadFileChange}},[t("mp-button",{staticClass:"upload-btn weui-btn_mini_108px mr-4",attrs:{size:"mini",type:"default"},on:{click:function(e){e.preventDefault()}}},[e._v("本地上传")])],1),t("AddFinderMaterial",{attrs:{OfinderInfo:e.OfinderInfo},on:{addFinderMaterial:e.handleAddFinderMaterial}})],1):e._e(),e.isDisplayStatus?e._e():[t("div",{staticClass:"tip"},[e._v("上传素材创建封面故事，最多可上传5个素材，素材格式：")]),e._m(0)],e.isDisplayStatus?t("div",{staticClass:"media-list"},e._l(e.storyMediaList,(function(a,s){return t("div",{key:s,staticClass:"media-item"},[t("div",{staticClass:"card",on:{click:function(t){return e.checkBigImg(s)}}},[t("div",{staticClass:"card-inner"},[2===a.mediaType?t("div",{staticClass:"video-bg"},[t("img",{attrs:{src:a.mediaFuzzyUrl}})]):e._e(),t("div",{staticClass:"media"},[1===a.mediaType?t("img",{attrs:{src:a.mediaUrl}}):2===a.mediaType?t("video",{attrs:{src:a.mediaUrl}}):e._e()]),t("div",{staticClass:"preview-mask"},[t("img",{staticClass:"story-bg",attrs:{src:i(94681)}}),t("div",{staticClass:"brand-area"},[e.storyMediaList.length>1?t("div",{staticClass:"indicator-list"},e._l(e.storyMediaList.length,(function(e,i){return t("div",{key:i,staticClass:"indicator-item",class:{active:i===s}})})),0):e._e(),t("div",{staticClass:"story-desc"},[e._v(e._s(e.storyDesc))]),t("div",{staticClass:"brand"},[e.cover.brandLogo&&e.cover.brandLogo.mediaUrl?t("div",{staticClass:"logo"},[t("img",{attrs:{src:e.cover.brandLogo.mediaUrl}})]):e._e(),t("span",{staticClass:"name"},[t("span",[e._v(e._s(e.cover.packetName||"红包封面简称"))]),e.jumpType?[t("span",{staticStyle:{margin:"0 4px"}},[e._v("|")]),3===e.jumpType?t("span",[e._v("进入小程序")]):e._e(),2===e.jumpType?t("span",[e._v("进入公众号")]):e._e(),t("svg-icon",{staticClass:"go-icon",attrs:{name:"arrow"}})]:e._e()],2)])]),2===a.mediaType?t("div",{staticClass:"play-icon-wrap"},[t("svg-icon",{staticClass:"play-icon",attrs:{name:"play"}})],1):e._e()])]),e.isDisplayStatus?e._e():t("div",{staticClass:"order-change",on:{click:function(e){e.stopPropagation()}}},[e.storyMediaList[s-1]?t("div",{staticClass:"left btn",on:{click:function(t){return e.moveBackward(s)}}},[t("svg-icon",{staticClass:"order-icon",attrs:{name:"order"}})],1):e._e(),e.storyMediaList[s+1]?t("div",{staticClass:"right btn",on:{click:function(t){return e.moveForward(s)}}},[t("svg-icon",{staticClass:"order-icon",attrs:{name:"order"}})],1):e._e()]),e.isDisplayStatus?e._e():[t("div",{staticClass:"del",on:{click:function(t){return t.stopPropagation(),e.handleDel(s)}}},[t("img",{attrs:{src:i(6012)}})])]],2),e.isDisplayStatus?e._e():[t("div",{staticClass:"info"},[t("div",{staticClass:"name"},[e._v(e._s(a.mediaName))]),a.mediaSize?t("div",{staticClass:"size"},[e._v("（"+e._s(e._f("prettySize")(a.mediaSize))+"）")]):e._e()])]],2)})),0):e._e(),e.isDisplayStatus?e._e():t("div",{staticClass:"mt-1"},[t("draggable",{staticClass:"mt-4",attrs:{list:e.storyMediaList,handle:".js-draggable"},on:{change:e.checkMove}},[t("transition-group",{staticClass:"flex"},[e._l(e.storyMediaList,(function(i,a){return t("div",{key:i.mediaUrl,staticClass:"mr-3 flex flex-col items-center"},[t("story-item",{attrs:{storyInfo:i},on:{trash:function(t){return e.handleDel(a)}},scopedSlots:e._u([{key:"drag",fn:function(){return[t("div",{staticClass:"js-draggable absolute inset-x-0 bottom-8 top-0 cursor-pointer"})]},proxy:!0},{key:"drag-icon",fn:function(){return[t("div",{staticClass:"js-draggable flex cursor-pointer justify-end pt-2 hover:opacity-50"},[t("mask-icon",{staticClass:"invisible relative h-4 w-[7px] text-opblack_1",attrs:{name:"drag"}})],1)]},proxy:!0}],null,!0)})],1)})),e.isUploading?t("div",{key:"uploading",staticClass:"upload-item flex h-[190px] w-[124px] flex-col items-center justify-center rounded border border-solid border-opblack_4"},[t("i",{staticClass:"weui-desktop-loading"})]):e._e()],2)],1)],1),t("mp-dialog",{attrs:{title:"预览效果",width:600,height:600},model:{value:e.showBigImgDialog,callback:function(t){e.showBigImgDialog=t},expression:"showBigImgDialog"}},[t("div",{ref:"bigImgWrap",staticClass:"big-img-wrap"}),t("div",{staticClass:"control"},[0!==e.curCheckedImgIndex?t("div",{staticClass:"prev-btn",on:{click:e.prevCheckedImg}}):e._e(),e.curCheckedImgIndex!==e.storyMediaList.length-1?t("div",{staticClass:"next-btn",on:{click:e.nextCheckedImg}}):e._e()])]),t("video",{ref:"hiddenVideo",staticStyle:{display:"none"},attrs:{src:e.curUploadingFile.url}})],2)},$t=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"tip"},[e._v(" 图片：PNG/JPG/JPEG；750x1250像素；文件不超过300KB；"),t("br"),e._v(" 视频：MP4（H.264/AVC）；最长15s；yuv格式为420；视频宽度不低于720像素；宽高比在16:9-3:5之间；码率不高于1600kbit/s；文件不超过10MB。 ")])}],Zt=i(50078);const Ht=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Gt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Wt=(e,t)=>{let i=e;return"string"===typeof t?i=e.toLocaleString(t):!0===t&&(i=e.toLocaleString()),i};var zt=(e,t)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t=Object.assign({bits:!1},t);const i=t.bits?Gt:Ht;if(t.signed&&0===e)return" 0 "+i[0];const a=e<0,s=a?"-":t.signed?"+":"";if(a&&(e=-e),e<1){const a=Wt(e,t.locale);return s+a+" "+i[0]}const r=Math.min(Math.floor(Math.log10(e)/3),i.length-1);e=Number((e/Math.pow(1e3,r)).toPrecision(3));const o=Wt(e,t.locale),n=i[r];return s+o+" "+n},Vt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isFetchingList||e.isFetchingMaterial?t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})]):e._e(),t("div",{staticClass:"add-finder-material-wrap"},[t("mp-button",{staticClass:"upload-btn finder-upload-btn weui-btn_mini_108px",attrs:{size:"mini"},on:{click:function(t){return t.preventDefault(),e.openFinderUploadDialg.apply(null,arguments)}}},[e._v("视频号上传")]),t("SearchFinderDialog2",{on:{submit:e.handleSearchFinderSubmit},model:{value:e.showSearchFinderDialog,callback:function(t){e.showSearchFinderDialog=t},expression:"showSearchFinderDialog"}}),t("mp-dialog",{staticClass:"material-dialog",attrs:{value:e.showFinderMaterialDialog,width:845},on:{close:e.closeFinderMaterialDialog},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"finder-header"},[t("div",{staticClass:"finder-info"},[t("img",{staticClass:"avatar",attrs:{src:e.finderInfo.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.finderInfo.nickname))])]),t("div",{staticClass:"title"},[e._v("选择视频号内容")]),t("div",{staticClass:"desc"},[e._v("可选择时长≤61秒的视频素材，图片素材暂不支持")])])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"dialog-footer"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.backSearchFinderDialog.apply(null,arguments)}}},[e._v("上一步")]),t("mp-button",{attrs:{type:"primary",disabled:e.curChoosenIndex<0},on:{click:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e._v("添加")])],1)]},proxy:!0}])},[t("div",{ref:"materialBody",staticClass:"finder-dialog-body"},e._l(e.list,(function(i,a){return t("div",{key:i.objectId,staticClass:"finder-material-item"},[t("mp-checkbox",{staticClass:"check-box",attrs:{value:e.curChoosenIndex===a},on:{input:t=>e.handleChooseMaterial(t,a)}}),t("div",{staticClass:"finder-img",on:{click:function(t){return e.handlePreviewMaterial(a)}}},[t("img",{staticClass:"thumb-img",attrs:{src:i.thumbUrl}}),t("svg-icon",{staticClass:"play-icon",attrs:{name:"play"}})],1),t("div",{staticClass:"info"},[t("div",{staticClass:"desc"},[e._v(e._s(i.desc))]),t("div",{staticClass:"date"},[e._v(e._s(e._f("toDate")(i.timestamp)))])])],1)})),0),t("FinderPreview",{attrs:{desc:e.previewMaterial.desc,url:e.previewMaterial.videoUrl,finder:e.finderInfo},model:{value:e.showFinderMaterialPreview,callback:function(t){e.showFinderMaterialPreview=t},expression:"showFinderMaterialPreview"}})],1)],1)])},Jt=[],Kt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:`${e.titleText}视频号`,value:e.value,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"dialog-footer",class:{visible:e.hadSearchResult}},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.hadSearchResult||e.showError||!e.info.username},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("确认")])],1)],1)]},proxy:!0}])},[t("div",{ref:"dialog",staticClass:"dialog-body"},[t("mp-input",{attrs:{placeholder:"输入视频号名称/绑定的微信号",clearable:"clearable"},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap"},[e.hadSearchResult?t("div",{staticClass:"result-list"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList},on:{"radio-change":e.handleRadioChange}})],1):t("div",{staticClass:"tip"},[e.showError?[t("span",{staticClass:"error"},[e._v(e._s("1_1"===e.principalAccountType?"请输入公众号已绑定的视频号名称/绑定的微信号":"请输入该主体下正确的视频号名称/绑定的微信号"))])]:e._e()],2)])],1)])},Yt=[],Xt=i(70898);const ei=new je.ZP,{mapGetters:ti}=(0,fe._p)("user");var ii=a.ZP.extend({name:"SearchFinderDialog2",components:{JumpInfoList:Xt.Z},data(){return{querying:"",query:"",info:{},jumpInfoList:[],showError:!1}},props:{value:Boolean,mode:{type:String,default:"search"}},computed:{...ti(["principalAccountType","accountType"]),hadSearchResult(){return!!this.jumpInfoList.length&&!this.showError},titleText(){const e=this;return"add"===e.mode?"添加":"选择"},accountType(){return d.U6.user.accountType}},mounted(){document.addEventListener("keydown",this.handleEnterKeyDown)},beforeDestroy(){document.removeEventListener("keydown",this.handleEnterKeyDown)},methods:{handleRadioChange(e){this.info=this.$set(this,"info",e)},handleEnterKeyDown(e){const t="undefined"!=typeof event?window.event:e,i=this;if(t&&13==t.keyCode&&i.value)return t.preventDefault(),t.stopPropagation(),i.search(),!1},closeDialog(){this.showError=!1,this.query="",this.querying="",this.jumpInfoList=[],this.$emit("input",!1)},async search(){if(!this.querying)return;this.info={};const e=await ei.storyGetFinderInfo(this.querying);if(e&&0===e.baseResponse.ret){let t=e.jumpInfoList.filter((e=>!(!e.headImgUrl&&e.scene===je.DS.finder)));0!==this.accountType&&(t=e.jumpInfoList.filter((e=>e.isSameBody))),t=t.sort(((e,t)=>e.isSameBody===t.isSameBody?e.nickname===t.nickname?0:e.nickname?.toLocaleLowerCase()===this.querying?.toLocaleLowerCase()?-1:t.nickname?.toLocaleLowerCase()===this.querying?.toLocaleLowerCase()?1:0:e.isSameBody?-1:1)),this.jumpInfoList=t,this.query=this.querying,this.showError=1===e.jumpInfoList.length&&!e.jumpInfoList[0].headImgUrl,this.jumpInfoList.length||0===this.accountType||(this.showError=!0)}else this.showError=!0},submit(){const e=Object.assign({},this.info,{appName:this.query,query:this.query});this.$emit("submit",e),this.closeDialog()}}}),ai=ii,si=(0,h.Z)(ai,Kt,Yt,!1,null,"7cb5a7d0",null),ri=si.exports,oi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"post-preview-wrap",class:{active:e.value}},[t("div",{staticClass:"mask",on:{click:e.closeDialog}}),e.value?t("div",{staticClass:"post-preview-content"},[t("span",{staticClass:"close-icon weui-icon-filled-close",on:{click:e.closeDialog}}),t("div",{staticClass:"preview-hd"},[t("div",{staticClass:"left-part"},[t("img",{staticClass:"avatar",attrs:{src:e.finder.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.finder.nickname))])])]),t("div",{staticClass:"preview-bd"},[t("FinderMediaWrap",{attrs:{mediaWidth:414,url:e.url}})],1),t("div",{staticClass:"preview-ft"},[e.desc?t("div",{staticClass:"content-wrap",class:{collapse:e.collapse}},[t("div",{ref:"content",staticClass:"content"},[t("span",[e._v(e._s(e.desc))])]),e.needCollapse?t("div",{staticClass:"collapse"},[t("a",{on:{click:e.toggleCollapse}},[e.collapse?t("span",[e._v("展开")]):t("span",[e._v("收起")])])]):e._e()]):e._e()])]):e._e()])},ni=[],ci=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"post-media-wrap"},[t("div",{staticClass:"video-wrap"},[t("video",{ref:"video",staticStyle:{width:"100%",height:"auto"},attrs:{src:e.url,"webkit-playsinline":"true",playsinline:"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x-webkit-airplay":"allow",autoplay:"true",loop:"loop"},domProps:{muted:!1},on:{click:e.handleVideoClick}}),t("div",{staticClass:"progress"},[e.curVideoDuration?t("CommonSlider",{staticClass:"progress-slider",attrs:{max:e.curVideoDuration,step:.01,tooltipVisible:!1,value:e.currentTime},on:{input:e.handleSetVideoTime}}):e._e()],1),e.isVideoPlaying?e._e():t("div",{staticClass:"pause"},[e._v("已暂停")])])])},li=[],di=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"common-slider-wrap"},[t("a-slider",{attrs:{step:e.step,min:e.min,max:e.max,tooltipVisible:e.tooltipVisible,disabled:e.disabled,value:e.value},on:{change:e.handleInput}})],1)},pi=[],ui=a.ZP.extend({props:{step:Number,max:Number,min:Number,tooltipVisible:Boolean,disabled:Boolean,value:Number},methods:{handleInput(e){this.$emit("input",e)}}}),hi=ui,mi=(0,h.Z)(hi,di,pi,!1,null,"35afc364",null),gi=mi.exports,vi=a.ZP.extend({components:{CommonSlider:gi},data(){return{currentTime:0,isVideoPlaying:!0,curVideoDuration:0}},props:{url:String,mediaWidth:Number},mounted(){const e=this.$refs.video;e&&e.addEventListener("timeupdate",this.handleVideoUpdate)},beforeDestroy(){const e=this.$refs.video;e&&(e.removeEventListener("timeupdate",this.handleVideoUpdate),e.pause(),delete this.$refs.video)},methods:{handleVideoUpdate(e){const t=e.target;this.currentTime=t.currentTime,this.curVideoDuration=t.duration},handleSetVideoTime(e){const t=this.$refs.video;t.currentTime=e,this.isVideoPlaying||(t.play(),this.isVideoPlaying=!0)},handleVideoClick(){const e=this.$refs.video;this.isVideoPlaying=!this.isVideoPlaying,this.isVideoPlaying?e.play():e.pause()}}}),fi=vi,yi=(0,h.Z)(fi,ci,li,!1,null,"866c4ce6",null),_i=yi.exports;var Ci=a.ZP.extend({components:{FinderMediaWrap:_i},data(){return{needCollapse:!1,collapse:!0}},props:{finder:{type:Object,required:!0},value:Boolean,desc:String,url:String},watch:{value(e,t){if(!t&&e){const e=this.desc;if(!e)return;this.$nextTick((()=>{const e=this.$refs.content;this.needCollapse=e.scrollHeight>e.offsetHeight}))}}},methods:{closeDialog(){this.$emit("input",!1),this.needCollapse=!1,this.collapse=!0},toggleCollapse(){this.collapse=!this.collapse}}}),bi=Ci,wi=(0,h.Z)(bi,oi,ni,!1,null,"b25a7084",null),Ii=wi.exports;const ki=new je.ZP,Ti=i(90520);var Si=a.ZP.extend({name:"AddFinderMaterial",components:{SearchFinderDialog2:ri,FinderPreview:Ii},data(){return{showSearchFinderDialog:!1,showFinderMaterialDialog:!1,showFinderMaterialPreview:!1,finderInfo:{},curChoosenIndex:-1,previewMaterial:{},lastBuffer:"",isOver:!1,list:[],isFetchingMaterial:!1,isFetchingList:!1,first:!0}},props:{OfinderInfo:{}},watch:{showFinderMaterialDialog(e){const t=this;e&&this.first&&(this.first=!1,t.$nextTick((()=>{const e=t.$refs.materialBody;e.addEventListener("scroll",(()=>{const t=e.scrollHeight-e.scrollTop;t-e.clientHeight<50&&!this.isOver&&this.fetchFinderList()}))})))}},methods:{backSearchFinderDialog(){this.clearFinder(),this.closeFinderMaterialDialog(),this.showSearchFinderDialog=!0},openFinderUploadDialg(){this.showFinderMaterialDialog=!1,this.lastBuffer="",this.list=[],this.curChoosenIndex=-1,this.finderInfo&&this.finderInfo.appName?this.handleSearchFinderSubmit(this.finderInfo):this.showSearchFinderDialog=!0},async handleSearchFinderSubmit(e){this.finderInfo=e,await this.fetchFinderList(),this.showFinderMaterialDialog=!0},async fetchFinderList(){if(!this.isFetchingList){this.isFetchingList=!0,this.isFetchingMaterial=!0;try{const e=await ki.storyGetFinderList(this.finderInfo.username,this.lastBuffer);if(this.isFetchingMaterial=!1,!e||!e.baseResponse||0!==e.baseResponse.ret)return this.errorTip("拉取视频号素材失败");this.lastBuffer=e.lastBuffer||"",this.isOver=e.isOver,this.list=this.list.concat(e.finderObject||[]),0!==e.finderObject?.length||e.isOver||(this.isFetchingList=!1,this.fetchFinderList())}finally{this.isFetchingList=!1}}},handleChooseMaterial(e,t){e?this.curChoosenIndex=t:this.curChoosenIndex===t&&(this.curChoosenIndex=-1)},handleSubmit(){var e=this.list[this.curChoosenIndex];e.OfinderInfo=this.finderInfo,this.$emit("addFinderMaterial",e),this.closeFinderMaterialDialog()},closeFinderMaterialDialog(){this.showFinderMaterialDialog=!1,this.lastBuffer="",this.list=[],this.curChoosenIndex=-1},clearFinder(){this.finderInfo={}},handlePreviewMaterial(e){this.previewMaterial=this.list[e],this.showFinderMaterialPreview=!0}},filters:{toDate(e){return Ti("yyyy年MM月dd日 hh:mm",new Date(1e3*e))}}}),xi=Si,Ai=(0,h.Z)(xi,Vt,Jt,!1,null,"6ce8395f",null),Pi=Ai.exports,Di=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"MaterialItem w-[122px] select-none"},[t("div",{staticClass:"mb-1 rounded border border-solid border-opblack_4 bg-white px-4 pb-2 pt-6"},[t("div",{staticClass:"box-content flex h-[120px] w-[90px] items-center justify-center",class:e.loading?"py-4":"py-2"},[e.loading?t("div",{staticClass:"flex flex-col items-center"},[t("i",{staticClass:"weui-desktop-loading relative -top-2"}),t("div",{staticClass:"text-opblack_2"},[e._v("上传中")])]):t("img",{staticClass:"pointer-events-none h-full w-full object-contain",attrs:{src:e.picUrl}})]),t("div",{staticClass:"flex",class:e.showEdit?"justify-between":"justify-end"},[t("mask-icon",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],staticClass:"icon-editbtn h-4 w-4 cursor-pointer text-black_1",attrs:{name:"editbtn"},nativeOn:{click:function(t){return e.edit.apply(null,arguments)}}}),t("mp-popover",{staticClass:"text-[0px]",attrs:{trigger:"click",width:300,disabled:e.disabledPopover},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"mb-2 text-center text-sm font-medium"},[e._v(e._s(e.popoverTitle))]),t("div",{staticClass:"text-center text-sm text-opblack_1"},[e._v(e._s(e.popoverContent))])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"flex justify-center"},[t("mp-button",{on:{click:e.closePopover}},[e._v("取消")]),t("mp-button",{attrs:{type:"warn"},nativeOn:{click:function(t){return e.trash.apply(null,arguments)}}},[e._v("删除")])],1)]},proxy:!0},{key:"target",fn:function(){return[t("div",[e.loading?e._e():t("mask-icon",{staticClass:"icon-trash2 relative -right-[3px] h-4 w-4 cursor-pointer text-black_1",class:e.popoverVisible?"visible":"invisible",attrs:{name:"trash2"},nativeOn:{click:function(t){return e.handleClickTrash.apply(null,arguments)}}})],1)]},proxy:!0}]),model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}})],1)]),t("div",{staticClass:"flex justify-center text-xs text-opblack_2"},[e.loading?e._e():t("mask-icon",{staticClass:"mr-0.5 inline-block h-4 w-4 shrink-0",attrs:{name:e.icon}}),t("span",{staticClass:"max-w-[90px] truncate text-center",attrs:{title:e.name}},[e._v(e._s(e.name))])],1)])},Ui=[],Ei=a.ZP.extend({components:{},props:{picUrl:String,showEdit:{type:Boolean,default:!1},icon:String,name:{type:String,default:""},popoverTitle:String,popoverContent:String,loading:Boolean},data(){return{popoverVisible:!1}},computed:{disabledPopover(){return!this.popoverContent&&!this.popoverTitle}},methods:{closePopover(){document.documentElement.click()},edit(){this.$emit("edit")},trash(){this.$emit("trash")},handleClickTrash(){this.disabledPopover&&this.trash()}}}),Ri=Ei,Mi=(0,h.Z)(Ri,Di,Ui,!1,null,"17616e18",null),Li=Mi.exports,Ni=i(9980),Fi=i.n(Ni),Oi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"StoryItem"},[t("div",{staticClass:"relative mb-1 rounded border border-solid border-opblack_4 bg-white px-4 pb-2"},[e._t("drag"),e._t("drag-icon"),t("div",{staticClass:"flex items-center justify-center py-2"},[t("img",{staticClass:"h-[120px] w-[90px] object-contain",attrs:{src:e.pic}})]),t("div",{staticClass:"flex justify-end"},[t("mask-icon",{staticClass:"icon-trash2 invisible relative -right-[3px] h-4 w-4 cursor-pointer text-opblack_1",attrs:{name:"trash2"},nativeOn:{click:function(t){return e.trash.apply(null,arguments)}}})],1)],2),t("div",{staticClass:"flex justify-center text-xs text-opblack_2"},[t("mask-icon",{staticClass:"mr-0.5 inline-block h-4 w-4 shrink-0",attrs:{name:e.isPicStory?"pic":"video"}}),t("span",{staticClass:"max-w-[90px] truncate",attrs:{title:e.storyInfo.mediaName}},[e._v(e._s(e.storyInfo.mediaName))])],1)])},Bi=[],qi=a.ZP.extend({components:{},props:{storyInfo:{type:Object,default:()=>({})}},data(){return{}},computed:{pic(){return this.isPicStory?this.storyInfo.mediaUrl:this.storyInfo.mediaThumbnailUrl},isPicStory(){return 1===this.storyInfo.mediaType}},methods:{trash(){this.$emit("trash")}}}),Qi=qi,ji=(0,h.Z)(Qi,Oi,Bi,!1,null,"1aa8adcd",null),$i=ji.exports;const{mapState:Zi}=(0,fe._p)("cover");var Hi=a.ZP.extend({name:"StoryMake",components:{AddFinderMaterial:Pi,MaterialItem:Li,draggable:Fi(),StoryItem:$i},data(){return{maxMediaLength:5,curCheckedImgIndex:0,curCheckImgType:"",curUploadFileList:[],isUploading:!1,curUploadingFile:{},showBigImgDialog:!1,curUploadType:""}},props:{OfinderInfo:{},setOfinderInfo:Function,value:{type:Array,default(){return[]}},cover:{type:Object,default(){return{}}},storyDesc:String,isDisplayStatus:Boolean},watch:{value:function(){0==this.value.length&&this.setOfinderInfo({})}},computed:{...Zi(["actionAuthInfo"]),uploadUrl(){return"img"===this.curUploadType?`${Zt.qk}?type=story`:Zt.Dp},storyMediaList(){return this.value.map((e=>e.media))},jumpType(){const{cover:e}=this;return e?.packetMaterial?.actionList?.[0]?.actionType||this.actionAuthInfo?.action?.actionType},canAddMoreMedia(){const e=this,{storyMediaList:t,maxMediaLength:i}=e;return t.length!==i}},methods:{checkMove(e){const{moved:{oldIndex:t,newIndex:i}}=e;this.$emit("setStorySort",{oldIndex:t,newIndex:i})},beforeUpload(e){const t=e.type.search("video")>-1;this.curUploadType=t?"video":"img";const i=new FileReader;if(t){const t=new Promise(((t,i)=>{if(e.size>10485760)return this.errorTip("素材过大"),i(new Error("video is too big"));this.curUploadingFile={url:URL.createObjectURL(e)};const a=this.$refs.hiddenVideo;a.onloadeddata=()=>{const{videoWidth:e,videoHeight:s,duration:r}=a;if(!e&&!s)return this.errorTip("视频编码格式需为 MP4（H.264/AVC）"),i(new Error("video code is not right"));if(r>16)return this.errorTip("视频时长需不超过或等于15s"),i(new Error("video is wrong length"));const o=e/s;if(o>1.78||o<.5625||e<720)return this.errorTip("视频宽度不可低于720像素，宽高比需在16:9-3:5之间"),i(new Error("video is wrong size"));this.curUploadingFile.width=e,this.curUploadingFile.height=s,t()},a.onerror=()=>{if("img"!==this.curUploadType)return this.errorTip("视频编码格式需为 MP4（H.264/AVC）"),i(new Error("video code is not right"))}}));return t}{const t=new Promise(((t,a)=>{if(e.size>307200)return this.errorTip("图片大小不可超过300KB"),a(new Error("img is too big"));i.onload=e=>{const i=new Image,s=e.target.result;i.src=s,this.curUploadingFile={url:s},i.onload=()=>{if(750!==i.width||1250!==i.height)return this.errorTip("图片尺寸需为 750*1250 像素"),a(new Error("wrong size"));this.curUploadingFile.width=i.width,this.curUploadingFile.height=i.height,t()}}}));return i.readAsDataURL(e),t}},setCurStoryDetail(e){this.$emit("setStoryDetail",{detail:e,index:this.storyMediaList.length})},handleDel(e){this.$emit("delStoryDetail",e)},handleUploadFileChange(e){const{file:t}=e;this.isUploading=!1;const i=t.type.search("video")>-1;if("uploading"===t.status)this.isUploading=!0;else{if("done"===t.status){const{size:e,name:a,response:s}=t,r=-10005,o=-10008;if(s.base_response.ret===r)return this.errorTip("视频码率不能高于1600kbit/s，请重新上传。"),void(this.curUploadFileList=[]);if(s.base_response.ret===o)return this.errorTip("视频yuv格式应为420"),void(this.curUploadFileList=[]);if(-2===s.base_response.ret)return this.errorTip("仅支持PNG/JPG/JPEG格式"),void(this.curUploadFileList=[]);if(-10009===s.base_response.ret)return this.errorTip("视频编码格式需为 MP4（H.264/AVC）"),void(this.curUploadFileList=[]);if(-12005===s.base_response.ret)return this.errorTip("视频像素宽高比非1:1"),(0,Lt.H)("封面视频像素宽高比非1:1"),void(this.curUploadFileList=[]);if(0!==s.base_response.ret)return this.errorTip("封面故事素材上传失败，请重试上传，或联系客服"),void(this.curUploadFileList=[]);const n={mediaSize:e,mediaName:a,mediaType:i?de.Je.Video:de.Je.Image,mediaUrl:s.url||s.video_url,mediaMd5:s.md5||s.video_md5};return i&&(n.mediaThumbnailUrl=s.thumb_url,n.mediaThumbnailMd5=s.thumb_md5,n.mediaFuzzyUrl=s.fuzzy_url,n.mediaFuzzyMd5=s.fuzzy_md5),n.mediaWidth=this.curUploadingFile.width,n.mediaHeight=this.curUploadingFile.height,this.setCurStoryDetail({media:n}),void(this.curUploadFileList=[])}if("error"===t.status)this.errorTip("封面故事素材上传失败，请重试上传，或联系客服。");else if("removed"===t.status)return this.curUploadFileList=[],void this.setCurStoryDetail({media:{}})}this.curUploadFileList=[t]},handleAddFinderMaterial(e){e.OfinderInfo&&this.setOfinderInfo(e.OfinderInfo),this.setCurStoryDetail({media:{mediaSize:0,mediaName:"视频号素材.mp4",mediaType:de.Je.Video,mediaUrl:e.videoUrl,mediaMd5:"",mediaThumbnailUrl:e.thumbUrl,mediaThumbnailMd5:"",mediaFuzzyUrl:e.fuzzyThumbUrl,mediaFuzzyMd5:"",mediaWidth:e.width,mediaHeight:e.height},hasBgm:e.hasBgm,exportId:e.exportId})},moveForward(e){const t=this.value[e+1];this.$emit("setStoryDetail",{detail:this.value[e],index:e+1}),this.$emit("setStoryDetail",{detail:t,index:e})},moveBackward(e){const t=this.value[e-1];this.$emit("setStoryDetail",{detail:this.value[e],index:e-1}),this.$emit("setStoryDetail",{detail:t,index:e})},checkBigImg(e){this.curCheckImgType="story";const t=this.$refs.bigImgWrap,i=document.querySelectorAll(".media-list .card"),a=i[e];t.innerHTML="",t.appendChild(a.cloneNode(!0)),this.curCheckedImgIndex=e,this.showBigImgDialog=!0},checkBigDetailImg(e){this.curCheckImgType="detail";const t=this.$refs.bigImgWrap,i=document.querySelectorAll(".detail-preview-list .card"),a=i[e];t.innerHTML="",t.appendChild(a.cloneNode(!0)),this.curCheckedImgIndex=e,this.showBigImgDialog=!0},prevCheckedImg(){"detail"!==this.curCheckImgType?this.checkBigImg(this.curCheckedImgIndex-1):this.checkBigDetailImg(this.curCheckedImgIndex-1)},nextCheckedImg(){"detail"!==this.curCheckImgType?this.checkBigImg(this.curCheckedImgIndex+1):this.checkBigDetailImg(this.curCheckedImgIndex+1)}},filters:{prettySize(e){if(e)return zt(e).toUpperCase()}}}),Gi=Hi,Wi=(0,h.Z)(Gi,jt,$t,!1,null,"08bc2497",null),zi=Wi.exports,Vi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticStyle:{display:"inline-block"}},[t("a",{on:{click:e.download}},[e._t("default")],2),e.isLoading?[t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"}),t("div",{staticClass:"text"},[e._v(e._s(e.loadingText))])])]:e._e()],2)},Ji=[];const Ki=new $.ZP;var Yi=a.ZP.extend({name:"DownloadLink",props:{url:{type:String,required:!0},name:{type:String,required:!0},downloadType:String},data(){return{isLoading:!1,loadingText:""}},methods:{downloadFile(){const e=this.name.match(/\.(\w+)$/);let t="",i=this.name.replace(/\.(\w+)$/,"");e&&(t=e[1]),Ki.downloadFile(this.url,i,t)},download(){if("ajax"===this.downloadType){const e=this,t=function(){if(200===this.status){e.isLoading=!1;const t=document.createElement("a");t.href=window.URL.createObjectURL(this.response),t.download=`${e.name}`,t.click()}},i=t=>{e.isLoading=!0;const i=Math.floor(t.loaded/t.total*100)+"%";e.loadingText=`材料下载中(${i})`},a=()=>{(0,Lt.H)("downloadLink error");const e=document.createElement("a");e.setAttribute("download",""),e.setAttribute("href",this.url),e.click()};Ki.downloadAjax(this.url,{onload:t,onprogress:i,onerror:a})}else this.downloadFile()}}}),Xi=Yi,ea=(0,h.Z)(Xi,Vi,Ji,!1,null,"5e1918f2",null),ta=ea.exports;const ia=new $.ZP;var aa=a.ZP.extend({name:"CoverDetailMainInfo",data(){return{showPreviewQrcodeDialog:!1,showBigImgDialog:!1,bigImgUrl:"",previewQrcoeUrl:"",curPreviewIndex:-1,isCanEdit:!0}},props:{cover:{type:Object,default(){return{}}}},components:{MaterialPictures:Et,StoryMake:zi,DownloadLink:ta,CoverPreviewDialog:Qt},async mounted(){const e=this;if(this.$route.query.showmaininfo){ia.baseActionReport({actionType:"13",coverId:this.cover.orderId||"",processType:"",authorId:d.U6.user.authorId,editType:""});const e=this.$refs.wrapper;e.scrollIntoView()}await d.U6.getUserInfo(),1!=d.U6.user.isSecondary||8&d.U6.user.managerFlag||(e.isCanEdit=!1)},computed:{showStory(){return!!(this.cover&&this.cover.packetMaterial&&this.cover.packetMaterial.storyDetailList&&this.cover.packetMaterial.storyDetailList.length>0)},story(){return this.cover&&this.cover.packetMaterial?{storyTitle:this.cover.packetMaterial.storyTitle,storyDescription:this.cover.packetMaterial.storyDescription}:{}},materials(){return(0,ye.GM)(this.cover)},coverType(){return this.cover?.packetMaterial?.recWidgetImage?.mediaUrl?2:1}},methods:{toadmin(){this.$router.push({name:"administrator"})},resetBtn(e){this.$emit("btnClick",9)},handleMobilePreview(){const e=this;e.showPreviewQrcodeDialog=!0}},filters:{prettySize(e){return zt(e).toUpperCase()}}}),sa=aa,ra=(0,h.Z)(sa,Oe,Be,!1,null,"10e0cfd8",null),oa=ra.exports,na=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"info-title"},[e._v("订单记录")]),e.cover.orderStat.totalPurchaseCount?t("div",{staticClass:"desc"},[e._v("累计购买红包封面数量："+e._s(e.cover.orderStat.totalPurchaseCount)+"个")]):e._e(),e.cover.orderStat.totalPurchaseTime?t("div",{staticClass:"desc"},[e._v("累计购买红包封面发放时长："+e._s(e.cover.orderStat.totalPurchaseTime)+"小时")]):e._e(),t("a-table",{staticClass:"order-table",attrs:{columns:e.columns,dataSource:e.list,pagination:!1,locale:{emptyText:" "}},scopedSlots:e._u([{key:"count",fn:function(i){return[t("span",[e._v(e._s(i.count))]),i.participateEmojirainActivity?t("mp-popover",{attrs:{trigger:"hover",width:548},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"distribution-popover"},[t("EmotionRainTipEntry"),t("EmotionRainDesc2")],1)]},proxy:!0},{key:"target",fn:function(){return[t("Tag",{staticStyle:{"margin-left":"4px","margin-top":"-3px"}},[e._v("限时活动")])]},proxy:!0}],null,!0)}):e._e()]}},{key:"sendToReceive",fn:function(){return[t("div",{staticClass:"send-to-receive"},[e._v(" 已领取/已发放 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("「已领取」数量包含「通过推广领取」数量")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"expiredTitle",fn:function(){return[t("div",{staticClass:"send-to-receive"},[e._v(" 发放与领取有效期 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("有效期截止日当天的24点前均可发放")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"statusText",fn:function(i){return[t("span",{class:{"waiting-pay":"1"==i.status}},[e._v(e._s(i.statusText))])]}},{key:"action",fn:function(i){return[t("div",{staticClass:"detail"},[t("a",{on:{click:function(t){return e.handleToDetail(i)}}},[e._v("订单与发放详情")]),t("Remark",{attrs:{"remark-info":i.remarkInfo,"order-id":e.cover.orderId,"order-status":e.cover.orderStatus}})],1)]}}])}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.payInfoList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{mode:"normal",current:e.curPage,"per-page":e.pageNum,"total-num":e.payInfoList.length},on:{"page-change":e.pageChange}}):e._e()],1),t("GenerateCoverDialog",{attrs:{cover:e.cover,payInfo:e.checkedPayInfoList},on:{refreshCover:e.handleGenCoverRefresh,updateMergeDetail:e.updateMergeDetail,cancel:e.handleGenerateCoverCancel}}),t("MergeResultDialog",{attrs:{"merge-info":e.mergeInfo},model:{value:e.mergeResultDialogVisible,callback:function(t){e.mergeResultDialogVisible=t},expression:"mergeResultDialogVisible"}}),t("mp-dialog",{ref:"payInfoDialog",staticClass:"payinfo-dialog",attrs:{value:e.isShowDialog,width:622},on:{"visible-change":e.handlePayInfoDialogVisibleChange},scopedSlots:e._u([{key:"header",fn:function(){return[t("h4",[e._v("选择可发放封面的订单")])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closePayInfoDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:0===e.checkTransactionIds.length},on:{click:function(t){return t.preventDefault(),e.goToChoosenPayInfo.apply(null,arguments)}}},[e._v("下一步")])],1)]},proxy:!0}])},[t("div",{staticClass:"payinfo-dialog-header-desc"},[e._v(" 支持多个订单合并发放 "),t("mp-popover",{staticClass:"fission-disable-popover",attrs:{trigger:"hover",width:424},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"payinfo-popover-content"},[t("p",{staticClass:"mb-2"},[e._v("合并发放可将同款封面的多个订单，生成一个「多人领取」的发放材料。")]),t("p",{staticClass:"mb-1 font-medium"},[e._v("1. 合并发放如何扣除库存？")]),t("p",{staticClass:"mb-2"},[e._v("生成发放材料及用户领取时，都将优先从有效期更短的订单中扣除库存。")]),t("p",{staticClass:"mb-1 font-medium"},[e._v("2. 如何查看合并发放记录及数据？")]),t("p",{staticClass:"mb-1"},[e._v("方法1：进入任一被合并的订单详情页，找到对应的发放记录，点击「合并发放详情」;")]),t("p",{staticClass:"mb-2"},[e._v("方法2：进入「订单/发放记录」>「发放记录」，找到合并发放记录。")])])]},proxy:!0},{key:"target",fn:function(){return[t("div",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}])}),e.hasSpecialPayInfo||e.orderWithQuotaGift?t("span",{staticClass:"ml-1 inline-block"},[e._v("，奖励兑换卡暂不支持合并发放。")]):e._e()],1),e.countPayInfoList.length?t("div",{staticClass:"content"},[t("a-table",{key:e.tableKey,ref:"countOrderTableRef",staticClass:"order-table",attrs:{columns:e.chooseColumns,dataSource:e.countPayInfoList,pagination:!1,locale:{emptyText:"暂无记录"},"row-key":"transactionId","row-selection":{selectedRowKeys:e.checkTransactionIds,onChange:e.onTransactionIdSelectChange,getCheckboxProps:e.disableOrders,columnTitle:e.columnTitle}},nativeOn:{scroll:function(t){return e.handleOrderTableScroll.apply(null,arguments)}},scopedSlots:e._u([{key:"leftNum",fn:function(i){return[t("span",{staticClass:"left-num"},[e._v(e._s(i.leftNum))])]}},{key:"expired",fn:function(i){return[t("div",{staticClass:"expired"},[t("span",[e._v(e._s(i.expired))]),t("div",[e._v(" 剩余 "),t("span",{staticClass:"left-days"},[e._v(e._s(i.leftDays))]),t("span",[e._v("天")])])])]}}],null,!1,3585609957)})],1):e._e(),e.timePayInfoList.length?t("div",{staticClass:"content"},[t("div",{staticClass:"table-title"},[e._v("按时长购买的订单：")]),t("a-table",{staticClass:"order-table time-table",attrs:{columns:e.chooseTimeColumns,dataSource:e.timePayInfoList,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"expired",fn:function(i){return[t("div",{staticClass:"expired"},[t("span",[e._v(e._s(i.expired)+" 剩余")]),t("span",{staticClass:"left-days"},[e._v(e._s(i.leftDays))]),t("span",[e._v("天")])])]}},{key:"radio",fn:function(i){return[t("mp-checkbox-group",{staticClass:"payinfo-checkboxgroup",model:{value:e.checkTransactionIds,callback:function(t){e.checkTransactionIds=t},expression:"checkTransactionIds"}},[t("mp-checkbox",{attrs:{value:i.transactionId,label:i.transactionId,disabled:+i.leftDays<=0}})],1)]}}],null,!1,3438099172)})],1):e._e()])],1)},ca=[],la=i(27484),da=i.n(la),pa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ui-tag"},[e._t("default")],2)},ua=[],ha={},ma=(0,h.Z)(ha,pa,ua,!1,null,"3aeeeed8",null),ga=ma.exports,va=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-desc"},[t("h3",[e._v("该红包封面已参与活动。")]),e.isOrganization?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",{staticClass:"second-text"},[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),t("p",{staticClass:"second-text"},[e._v(" 此红包封面已符合微信表情雨活动参与条件，可以在发放红包封面时选择表情雨发放方式，让红包封面有机会出现在福袋中，被用户领取。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动时间：")]),t("p",{staticClass:"second-text"},[e._v(" 福袋里的红包封面将在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e(),e.isPersonal?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",{staticClass:"second-text"},[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),e._m(0),t("p",{staticClass:"second-text"},[e._v(" 活动中平台赠送的数量与你此次购买的数量成正比，相关数据可以在活动结束后查看。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动时间：")]),t("p",{staticClass:"second-text"},[e._v(" 参加活动的红包封面在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e()],2)},fa=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"second-text"},[e._v(" 此款红包封面已参与活动，将有机会出现在福袋中，被更多的用户领取。通过福袋领取的红包封面均由平台"),t("span",{staticClass:"emotion-rain-warn"},[e._v("赠送")]),e._v("，不消耗你所购买的数量。 ")])}],ya=i(90520),_a=i.n(ya),Ca=a.ZP.extend({computed:{user(){return d.U6.user},isOrganization(){const e=this;return e.user.principalType===l.eZ.organization},isPersonal(){const e=this;return e.user.principalType===l.eZ.person}},filters:{formatTime(e){return _a()("yyyy年MM月dd日",new Date(1e3*e))}}}),ba=Ca,wa=(0,h.Z)(ba,va,fa,!1,null,"46f31d66",null),Ia=wa.exports,ka=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-tips"},[t("svg-icon",{staticClass:"emotion-rain-icon",attrs:{name:"emotion-rain"}}),t("span",[e._v("限时活动·微信表情雨")]),e.showDetailEntry?t("a",{on:{click:function(t){return e.$emit("click")}}},[e._v("详情")]):e._e()],1)},Ta=[],Sa=a.ZP.extend({props:{showDetailEntry:{type:Boolean,default(){return!1}}}}),xa=Sa,Aa=(0,h.Z)(xa,ka,Ta,!1,null,"4f56042e",null),Pa=Aa.exports,Da=i(57448),Ua=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.showRemarkComponent?t("div",{ref:"domRemark"},[e.curRemarkInfo&&e.curRemarkInfo.remarks.length?t("mp-popover",{class:["remark-popover"],attrs:{trigger:"click",position:"up-right"},on:{show:e.initListScroll,hide:e.handlePopoverHide},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"btn-add-desc"},[e._v("描述("+e._s(e.curRemarkInfo.remarks.length)+")")])]},proxy:!0},{key:"content",fn:function(){return[t("div",[t("h6",{staticClass:"remark-title"},[e._v(" 描述("+e._s(e.curRemarkInfo.remarks.length)+") "),e.showAddBtn?t("a",{staticClass:"btn-add-remark",on:{click:e.showAddDesc}},[e._v("添加")]):e._e()]),e.addDescVisible?t("div",{staticClass:"remark-bar"},[t("RemarkTextarea",{staticClass:"remark-textarea",attrs:{"remark-id":e.curRemarkInfo.remarkId},on:{"cancel-edit":function(t){e.addDescVisible=!1},"edit-success":e.addSuccess}})],1):e._e(),t("div",{ref:"domRemarkList",staticClass:"remark-list"},e._l(e.curRemarkInfo.remarks,(function(i,a){return t("remark-item",{key:i.updateTime,attrs:{"remark-item-info":i,"remark-id":e.curRemarkInfo.remarkId,"has-own-remark":e.curRemarkInfo.hasOwnRemark,myRemarkIndex:e.curRemarkInfo.myRemarkIndex,"editing-id":e.editingId,"last-index":a===e.curRemarkInfo.remarks.length-1},on:{"edit-success":e.handleEditSuccess,"delete-success":e.handleDeleteSuccess,"know-delete":e.handleKnowdelete,"is-editing":e.changeEditingId}})})),1)])]},proxy:!0}],null,!1,397440615),model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}}):t("mp-popover",{class:["remark-popover",{"remark-newadd-popover":!e.popoverVisible}],attrs:{position:"up-right"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"btn-add-desc"},[t("svg-icon",{staticClass:"plus-icon",attrs:{name:"plus-circle"}}),e._v(" 描述 ")],1)]},proxy:!0},{key:"content",fn:function(){return[t("RemarkTextarea",{staticClass:"add-new-textarea",attrs:{title:"添加描述","remark-id":e.curRemarkInfo.remarkId},on:{"cancel-edit":function(t){e.popoverVisible=!1},"edit-success":e.addSuccess}})]},proxy:!0}],null,!1,4060238571),model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}})],1):e._e()},Ea=[],Ra=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"RemarkTextarea-Component"},[e.title?t("h6",{staticClass:"add-remark-title"},[e._v(e._s(e.title))]):e._e(),t("mp-input",{attrs:{multi:"",filter:"trim",countable:"",placeholder:"输入描述内容","wrap-class":"remark-textarea",maxlength:e.MAX_LENGTH},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),t("div",{staticClass:"add-bar"},[t("mp-button",{staticClass:"btn-cancel",attrs:{type:"default"},on:{click:e.cancelEdit}},[e._v(" 取消 ")]),t("mp-button",{attrs:{type:"primary",loading:e.addLoading,disabled:e.addBtnDisabled},on:{click:e.addRemark}},[e._v(" "+e._s(e.prevContent?"修改":"添加")+" ")])],1)],1)},Ma=[],La=i(18159);const Na=new La.ZP;var Fa=a.ZP.extend({components:{},props:{title:String,remarkId:Object,remarkIndex:Number,prevContent:{type:String,default:""}},data(){return{content:this.prevContent,addLoading:!1,MAX_LENGTH:100}},computed:{addBtnDisabled(){return 0===this.content.length||this.content.length>this.MAX_LENGTH||this.prevContent===this.content}},created(){},methods:{cancelEdit(){this.content=this.prevContent,this.$emit("cancel-edit")},async addRemark(){this.addLoading=!0;try{let e;e=void 0!==this.remarkIndex?await Na.coverchangeremark({remarkId:this.remarkId,newRemark:this.content,remarkIndex:this.remarkIndex,changeType:La.tk.EDIT}):await Na.coveraddremark({remarkId:this.remarkId,remark:this.content}),0===e?.baseResponse?.ret?this.$emit("edit-success"):this.errorTip("添加失败，请重试")}finally{this.addLoading=!1}}}}),Oa=Fa,Ba=(0,h.Z)(Oa,Ra,Ma,!1,null,"0e6d5b91",null),qa=Ba.exports,Qa=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"domRemarkItem",staticClass:"remark-item"},[e.remarkItemInfo.hasDeletedByAdmin?t("div",{staticClass:"mask-delete"},[e._v("该描述已被管理员删除")]):e._e(),e.isEditMode?t("remark-textarea",{attrs:{prevContent:e.remarkItemInfo.remark,remarkId:e.remarkId,remarkIndex:e.remarkItemInfo.remarkIndex},on:{"cancel-edit":function(t){e.isEditMode=!1},"edit-success":function(t){return e.$emit("edit-success")}}}):t("div",{class:["remark-display",{"delete-active":e.remarkItemInfo.hasDeletedByAdmin}]},[t("div",{staticClass:"remark-content"},e._l(e.remarkContentArr,(function(i,a){return t("p",{key:a},[e._v(" "+e._s(i)+" ")])})),0),t("div",{staticClass:"remark-detail"},[t("div",{staticClass:"remark-detail__info"},[t("div",{staticClass:"remark-detail__info__authorNickname"},[e._v(" "+e._s(e.remarkItemInfo.authorNickname)+" ")]),t("div",{staticClass:"remark-detail__info__updateTime"},[e._v(" "+e._s(e.updateTime)+" ")])]),t("div",{staticClass:"remark-detail__action"},[e.remarkItemInfo.canChange?t("a",{staticClass:"btn-remark-edit",on:{click:e.editRemark}},[e._v("修改")]):e._e(),e.remarkItemInfo.canDelete?t("mp-popover",{staticClass:"popover-remark-del",attrs:{position:e.lastIndex?"down-right":"up-right"},on:{show:e.emitIsEditing},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"btn-remark-del"},[e._v("删除")])]},proxy:!0},{key:"content",fn:function(){return[t("p",{staticStyle:{"text-align":"center"}},[e._v("删除后无法撤回，删除该描述？")])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.showDeleteDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",size:"mini",loading:e.isDeleteRemarking},on:{click:function(t){return e.deleteRemark(e.remarkId,e.remarkItemInfo.remarkIndex)}}},[e._v("删除")])],1)]},proxy:!0}],null,!1,2604931972),model:{value:e.showDeleteDialog,callback:function(t){e.showDeleteDialog=t},expression:"showDeleteDialog"}}):e._e()],1)])])],1)},ja=[];const $a=new La.ZP;var Za=a.ZP.extend({components:{RemarkTextarea:qa},props:{remarkId:Object,hasOwnRemark:Boolean,myRemarkIndex:Number,editingId:Number,lastIndex:Boolean,remarkItemInfo:{type:Object,default:()=>({remark:"",authorNickname:"",updateTime:0,deleteTime:0,remarkIndex:0,canDelete:!1,canChange:!1,hasDeletedByAdmin:!1})}},data(){return{showDeleteDialog:!1,isDeleteRemarking:!1,isEditMode:!1,hasSendKnowDelete:!1,myEditingId:0}},computed:{updateTime(){return da()(1e3*this.remarkItemInfo.updateTime).format("YYYY/MM/DD HH:mm")},remarkContentArr(){const e=this.remarkItemInfo.remark.split("\n");return e}},watch:{editingId(e){e!==this.myEditingId&&this.isEditMode&&(this.isEditMode=!1)}},mounted(){this.initDeleteListener()},methods:{emitIsEditing(){this.myEditingId=+new Date,this.$emit("is-editing",this.myEditingId)},async sendKnownDelete(){const e=await $a.coverchangeremark({remarkId:this.remarkId,remarkIndex:this.remarkItemInfo.remarkIndex,changeType:La.tk.KNOWN_DELETE});0===e?.baseResponse?.ret&&(this.hasSendKnowDelete=!0,this.$emit("know-delete"))},initDeleteListener(){if(!this.remarkItemInfo.hasDeletedByAdmin)return;let e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&this.remarkItemInfo.hasDeletedByAdmin&&!this.hasSendKnowDelete&&(console.log("删除备注可见"),this.sendKnownDelete())}))}),{threshold:.8});const t=this.$refs.domRemarkItem;e.observe(t)},editSuccess(){this.isEditMode=!1,this.$emit("edit-success")},editRemark(){this.isEditMode=!0,this.emitIsEditing()},async deleteRemark(e,t){this.isDeleteRemarking=!0;try{const i=await $a.coverdeleteremark({remarkId:e,remarkIndex:t});0===i?.baseResponse?.ret?this.$emit("delete-success"):this.errorTip("删除失败，请重试")}finally{this.isDeleteRemarking=!1}}}}),Ha=Za,Ga=(0,h.Z)(Ha,Qa,ja,!1,null,"112927ae",null),Wa=Ga.exports;const za=new La.ZP,Va=new $.ZP;var Ja=a.ZP.extend({props:{remarkInfo:{type:Object,default:()=>({ret:0,remarkId:{idType:La.Xd.ORDER,id:""},remarks:[],hasOwnRemark:!1,myRemarkIndex:-1})},orderStatus:{type:[String,Number],required:!0},orderId:{type:[String,Number],required:!0}},components:{RemarkItem:Wa,RemarkTextarea:qa},data(){return{MAX_REMARK_LENGTH:10,addDescVisible:!1,curRemarkInfo:null,fetchLoading:!1,popoverVisible:!1,needFetchOnHide:!1,editingId:0,myEditingId:0}},computed:{showRemarkComponent(){return this.curRemarkInfo&&this.curRemarkInfo.remarkId.id},showAddBtn(){if(!this.curRemarkInfo)return!1;const{curRemarkInfo:{hasOwnRemark:e,remarks:t}}=this;return!e&&!this.addDescVisible&&t.length<this.MAX_REMARK_LENGTH}},watch:{remarkInfo:{handler(e){this.curRemarkInfo=e},immediate:!0},isDeleteing(){this.addDescVisible=!1},editingId(e){e!==this.myEditingId&&(this.addDescVisible=!1)}},created(){},methods:{report(e){Va.baseActionReport({actionType:e,coverId:this.orderId,processType:this.orderStatus,authorId:d.U6.user.authorId,page:this.remarkInfo.remarkId.idType})},handleEditSuccess(){this.fetchRemarkInfo(),this.report("102")},handleDeleteSuccess(){this.fetchRemarkInfo(),this.report("103")},changeEditingId(e){this.editingId=e},async addOverflowY(){await this.$nextTick();const e=this.$refs.domRemarkList;if(!e)return;const t=e.scrollHeight,i=e.offsetHeight;i<t&&e.classList.add("overflow-y")},async initListScroll(){await this.$nextTick();const e=this.$refs.domRemarkList;if(!e)return;const t=e.scrollHeight,i=e.offsetHeight;i<t&&(e.classList.add("overflow-y"),e.classList.add("mark-scroll-bottom"),e.addEventListener("scroll",(()=>{e.scrollTop+e.offsetHeight>=e.scrollHeight?e.classList.remove("mark-scroll-bottom"):e.classList.add("mark-scroll-bottom")})))},handleKnowdelete(){this.needFetchOnHide=!0},handlePopoverHide(){this.needFetchOnHide&&this.fetchRemarkInfo(),this.addDescVisible=!1},addSuccess(){this.addDescVisible=!1,this.fetchRemarkInfo(),this.report("101")},showAddDesc(){this.addDescVisible=!0,this.myEditingId=+new Date,this.editingId=this.myEditingId},async fetchRemarkInfo(){this.fetchLoading=!0;try{const e=await za.covergetsingleremark({remarkId:this.remarkInfo.remarkId});0===e?.baseResponse?.ret&&(this.curRemarkInfo=e.result,this.addOverflowY(),0===this.curRemarkInfo.remarks.length&&document.body.click())}finally{this.fetchLoading=!1}}}}),Ka=Ja,Ya=(0,h.Z)(Ka,Ua,Ea,!1,null,"c9eb5e34",null),Xa=Ya.exports,es=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{ref:"dialog",class:[1==e.principalType?"person-dialog generate-dialog":"generate-dialog"],attrs:{title:"发放红包封面",value:e.isShowDialog,width:584},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"warn"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v(e._s(e.isCombineGen?"上一步":"取消"))]),0===e.distributionType?t("mp-button",{attrs:{type:"primary",loading:e.startGenerateIng},on:{click:function(t){return t.preventDefault(),e.startGenerate.apply(null,arguments)}}},[e._v("确定")]):e._e()],1)]},proxy:!0}])},[e.isBizSpringPayInfo||e.isEmotionPayInfo||e.isQuotaGift?t("div",{staticClass:"-mt-10 pb-8 text-opblack_2"},[e.isBizSpringPayInfo?t("div",[e._v(" 公众号创作者奖励兑换卡，仅支持生成「多人领取的链接」、使用 "),t("a",{attrs:{href:"javascript:;"},on:{click:e.goBizGenerateDoc}},[e._v("公众号「红包封面」组件")]),e._v(" 发放。 ")]):e._e(),e.isEmotionPayInfo?t("div",[e._v(" 表情艺术家奖励兑换卡，仅支持生成「多人领取的链接」、在 "),t("a",{attrs:{href:"javascript:;"},on:{click:e.goEmotionGenreateDoc}},[e._v("表情专辑")]),e._v(" 中发放。 ")]):e._e(),e.isQuotaGift?t("div",[e._v("此奖励兑换卡仅支持通过「封面推广」发放。")]):e._e()]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.distributionType,expression:"distributionType === 0"}]},[t("mp-form",{ref:"genForm",staticClass:"gen-form",attrs:{"label-width":117,model:e.form,rules:e.formRule}},[e.isQuotaGift?e._e():t("mp-form-item",{attrs:{prop:"curGenerateType"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{},[e._v("发放材料")])])]},proxy:!0}],null,!1,685755)},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.form.curGenerateType,callback:function(t){e.$set(e.form,"curGenerateType",t)},expression:"form.curGenerateType"}},[t("mp-radio",{attrs:{value:1,disabled:e.disableGenTypeQRCode}},[e._v("二维码")]),t("mp-radio",{attrs:{value:3,disabled:e.disableGenTypeCdKey}},[e._v("领取序列号")]),t("mp-radio",{attrs:{value:2,disabled:e.disableGenTypeUrl}},[e._v("领取链接")])],1)],1),e.form.curGenerateType?t("mp-form-item",{staticClass:"receive-type-item",attrs:{prop:"curMapType"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{},[e._v("领取方式")])])]},proxy:!0}],null,!1,1382522363)},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.form.curMapType,callback:function(t){e.$set(e.form,"curMapType",t)},expression:"form.curMapType"}},[t("div",[t("mp-popover",{staticClass:"maptype-popover",attrs:{trigger:"hover",width:330,disabled:!e.isCombineGen},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v("合并发放暂不支持「每个发放材料仅一人领取」")])]},proxy:!0},{key:"target",fn:function(){return[t("div",{staticClass:"div"},[t("mp-radio",{class:{"radio-disabled":e.form.needFission},staticStyle:{display:"block","margin-bottom":"10px"},attrs:{value:2,disabled:e.disableReceiveTypeIndividual||e.form.needFission||e.isCombineGen||e.form.isHeat}},[1===e.form.curGenerateType?[t("span",[e._v("每个二维码仅一人领取")]),t("span",{staticClass:"tip"},[e._v("（生成多个二维码）")])]:3===e.form.curGenerateType?[t("span",[e._v("每个序列号仅一人领取")]),t("span",{staticClass:"tip"},[e._v("（生成多个序列号）")])]:2===e.form.curGenerateType?[t("span",[e._v("每个链接仅一人领取")]),t("span",{staticClass:"tip"},[e._v("（生成多个链接）")])]:e._e()],2)],1)]},proxy:!0}],null,!1,3610624841)})],1),t("mp-radio",{attrs:{value:1,disabled:e.disableReceiveTypeShare}},[1===e.form.curGenerateType?[t("span",[e._v("一个二维码可多人领取")]),t("span",{staticClass:"tip"},[e._v("（生成 1 个二维码）")])]:3===e.form.curGenerateType?[t("span",[e._v("一个序列号可多人领取")]),t("span",{staticClass:"tip"},[e._v("（生成 1 个序列号）")])]:2===e.form.curGenerateType?[t("span",[e._v("一个链接可多人领取")]),t("span",{staticClass:"tip"},[e._v("（生成 1 个链接）")])]:e._e()],2)],1)],1):e._e(),t("mp-form-item",{staticClass:"form-item-generateNum",attrs:{prop:"generateNum"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{},[e._v("发放数量")])])]},proxy:!0}])},[t("div",{staticClass:"generate-num"},[t("mp-input",{ref:"generateNumInput",attrs:{placeholder:"请输入可领取的封面数量",disabled:e.disableCustomGenCount,required:!0},on:{input:e.validGenNum},model:{value:e.form.generateNum,callback:function(t){e.$set(e.form,"generateNum",t)},expression:"form.generateNum"}})],1),t("div",{staticClass:"left-num"},[t("span",[e._v("当前剩余红包封面数量")]),t("span",{staticClass:"strong"},[e._v(e._s(e.leftNum))]),t("span",[e._v("个")])])]),e.isQuotaGift?e._e():t("mp-form-item",{staticClass:"receive-type-item btm-border",attrs:{prop:"sendTimeSelect"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{staticStyle:{position:"relative",top:"2px"}},[e._v("生效时间")])])]},proxy:!0}],null,!1,2386264651)},[t("mp-radio-group",{staticClass:"radio-group",model:{value:e.form.sendTimeSelect,callback:function(t){e.$set(e.form,"sendTimeSelect",t)},expression:"form.sendTimeSelect"}},[t("mp-radio",{attrs:{value:0}},[t("span",[e._v("立即生效")])]),t("mp-radio",{attrs:{value:1,disabled:e.disabledSetTimer||e.form.isHeat}},[t("span",[e._v("定时生效")])])],1)],1),1==e.form.sendTimeSelect?t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label",staticStyle:{position:"relative",top:"10px"}},[t("span",{},[e._v("设置时间")])])]},proxy:!0}],null,!1,578298835)},[t("div",{staticClass:"time-choice"},[t("div",{staticClass:"time-choice-datepicker"},[t("mp-date-picker",{staticStyle:{"margin-right":"12px"},attrs:{"min-time":e.min},model:{value:e.timeDate,callback:function(t){e.timeDate=t},expression:"timeDate"}}),t("mp-time-picker",{directives:[{name:"show",rawName:"v-show",value:e.showMin,expression:"showMin"}],attrs:{min:e.timeMin,accuracy:"minute",format:"HH:mm"},model:{value:e.timeMinu1,callback:function(t){e.timeMinu1=t},expression:"timeMinu1"}}),t("mp-time-picker",{directives:[{name:"show",rawName:"v-show",value:!e.showMin,expression:"!showMin"}],attrs:{min:e.timeMin2,accuracy:"minute",format:"HH:mm"},model:{value:e.timeMinu2,callback:function(t){e.timeMinu2=t},expression:"timeMinu2"}})],1)])]):e._e(),t("mp-form-item",{attrs:{prop:"heat"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label form-label_optional"},[t("div",{staticStyle:{display:"flex"}},[e._v(" 封面推广 "),t("CoverHeatIntro",{attrs:{"is-quota-gift":e.isQuotaGift}})],1)])]},proxy:!0}])},[t("mp-popover",{staticClass:"maptype-popover",attrs:{trigger:"hover",width:330,disabled:!e.isCombineGen},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",[t("mp-checkbox",{attrs:{disabled:2===e.form.curMapType||1===e.form.sendTimeSelect||e.isQuotaGift||!!e.specifyGroup.length||e.isCombineGen},model:{value:e.form.isHeat,callback:function(t){e.$set(e.form,"isHeat",t)},expression:"form.isHeat"}},[e.isQuotaGift?[e._v("封面通过「封面专区」发放")]:[e._v("封面同时通过「裂变」、「封面专区」发放")]],2),e.cover.coverSetCommInfo?.jumpType&&e.form.isHeat?t("div",{staticStyle:{color:"var(--weuiDesktop_Color_OpBlack_1)",display:"flex","align-items":"center","margin-top":"10px"}},[t("span",{staticClass:"mr-1"},[e._v("当前封面已在推广中，暂不支持修改封面主题和来源。")]),t("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticStyle:{position:"relative",top:"2.5px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[e._v("推广期间，同一款封面仅可使用一个主题及来源。")]},proxy:!0}],null,!1,3769717937)})],1):e._e()],1)]},proxy:!0},{key:"content",fn:function(){return[t("div",[e._v("合并发放暂不支持封面推广")])]},proxy:!0}])})],1)],1),e.form.isHeat?t("heatReceiveObject",{ref:"heatSource",attrs:{cover:e.cover,isQuotaGift:e.isQuotaGift}}):e._e(),e.showCustomQrcode?t("mp-form",{staticClass:"whether-custom-qrcode"},[t("mp-form-item",{class:e.specifyGroup.length?"mb-[50px]":"mb-7",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"specify-group-label"},[e._v("发放限制")])]},proxy:!0}],null,!1,2859591218)},[t("mp-checkbox-group",{on:{change:e.handleSpecifyGroupChange},model:{value:e.specifyGroup,callback:function(t){e.specifyGroup=t},expression:"specifyGroup"}},[t("mp-checkbox",{attrs:{label:"发给指定人",disabled:e.form.isHeat||e.disabledSpecifyUsers}})],1)],1),e.specifyGroup.length?[t("mp-form-item",{staticClass:"mb-[50px]",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"form-label"},[t("span",{staticStyle:{position:"relative",top:"2px"}},[e._v("指定方式")])])]},proxy:!0}],null,!1,1053784469)},[t("mp-radio-group",{staticClass:"radio-group",on:{change:e.handleSpecifyTypeChange},model:{value:e.sendSpecifyType,callback:function(t){e.sendSpecifyType=t},expression:"sendSpecifyType"}},[t("mp-radio",{directives:[{name:"show",rawName:"v-show",value:e.isOnetoallAndLink,expression:"isOnetoallAndLink"}],attrs:{value:0}},[e._v("通过鉴权接口发放")]),t("mp-radio",{directives:[{name:"show",rawName:"v-show",value:e.isBiz,expression:"isBiz"}],attrs:{value:1}},[e._v("上传用户白名单")])],1)],1),1===e.sendSpecifyType?t("mp-form-item",{staticClass:"mb-3",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label-whitemenu"},[t("span",{},[e._v("上传白名单")]),t("mp-popover",{staticClass:"fission-popover",attrs:{width:476,position:"up-left",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("span",[e._v("上传的文件为openid名单，每个openid需通过回车分隔，文件不超过500KB，格式：xxx.txt。")]),t("a",{staticClass:"how",attrs:{href:"https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html",target:"_blank"}},[e._v(" 如何获取openid名单 ")])])]},proxy:!0}],null,!1,3641422933)})],1)]},proxy:!0}],null,!1,2910249912)},[t("mp-form",{ref:"whiteListForm",attrs:{rules:e.formRule}},[t("mp-form-item",{attrs:{prop:"fileList"}},[t("a-upload",{attrs:{name:"file",accept:".txt",action:e.uploadFileUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!0},fileList:e.fileList},on:{change:e.handleSpecifyFileChange}},[t("mp-button",{attrs:{type:"warn"},on:{click:function(e){e.preventDefault()}}},[e.fileList.length?t("span",[e._v("重新上传")]):t("span",[e._v("上传")])])],1)],1),e.showWhiteListUploadError?t("div",{staticClass:"upload-error-tip"},[e._v("上传失败")]):e._e()],1)],1):e._e(),0===e.sendSpecifyType?t("mp-form-item",{staticClass:"mb-3",attrs:{"label-width":117},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label-whitemenu"},[t("span",{},[e._v("添加AppID")]),t("mp-popover",{staticClass:"fission-popover",attrs:{width:476,position:"up-left",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("span",[e._v("输入appid获取发放ctoken（最多10个appid）,小程序开发者通过ctoken和鉴权接口发放给指定用户，")]),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/red-packet-cover/getRedPacketCoverUrl.html",target:"_blank"}},[e._v(" 点击查看具体调用方法 ")]),t("span",[e._v("。")])])]},proxy:!0}],null,!1,2754280835)})],1)]},proxy:!0}],null,!1,1174886651)},[t("div",{staticClass:"appid-action-wrapper"},[t("div",{staticClass:"appid-input-wrapper"},[t("mp-form",{ref:"appListForm",attrs:{rules:e.formRule}},[t("mp-form-item",{staticClass:"mb-3",attrs:{prop:"appidList"}},[t("mp-input",{staticClass:"appid-input",attrs:{placeholder:"输入appid",status:e.appidInputStatus},on:{input:e.handleAppidChange},scopedSlots:e._u([{key:"description",fn:function(){return[e.appidErrMsg?t("p",{staticClass:"appid-error-msg"},[e._v(e._s(e.appidErrMsg))]):e._e()]},proxy:!0}],null,!1,3895731429),model:{value:e.appid,callback:function(t){e.appid=t},expression:"appid"}})],1)],1)],1),t("mp-button",{staticClass:"btn-add-appid",attrs:{disabled:0===e.appid.length,size:"mini"},on:{click:e.addAppid}},[e._v("添加")])],1),t("div",{staticClass:"appid-list-wrapper"},e._l(e.appidList,(function(i){return t("div",{key:i,staticClass:"appid-item",on:{click:function(t){return e.delAppid(i)}}},[t("span",[e._v(e._s(i))]),t("svg-icon",{staticClass:"delete-icon",attrs:{name:"delete2"}})],1)})),0)]):e._e()]:e._e()],2):e._e(),1===e.sendSpecifyType&&e.specifyGroup.length||2===e.form.curMapType?t("div",{class:1==e.principalType?"put-tip person-tip":"put-tip"},[1!=e.principalType?t("span",[e._v("选择「每个发放材料仅一人领取」或「上传用户白名单」将不可在公众号中发放。")]):t("span",[e._v("每个发放材料仅一人领取发放的材料将不可在公众号中发放。")]),t("div",[t("a",{attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=6",target:"_blank"}},[e._v(" 如何在公众号发放封面？ ")])])]):e._e(),1!==e.form.curMapType||e.specifyGroup.length||e.isBizSpringPayInfo||e.isEmotionPayInfo?e._e():t("div",{staticClass:"put-tip"},[e._v(" 在视频号/公众号发放封面，可使用 "),t("a",{attrs:{href:"javascript:;"},on:{click:e.goReceiveComponentTips}},[e._v("「红包封面」组件")]),e._v(" ，保护原始发放材料不外泄。 ")])],1)])},ts=[],is=i(23990),as=i(86610);const ss=new je.ZP,{mapGetters:rs,mapState:os}=(0,fe._p)("auth");var ns=a.ZP.extend({name:"GenerateCoverDialog",components:{heatReceiveObject:is.Z,CoverHeatIntro:as.Z},data(){return{hideFissionTipsRedDot:!1,hideFissionTipsNewIcon:!1,showFissionPopover:!1,specifyGroup:[],isFission:[],sendSpecifyType:NaN,fileList:[],uploadFileUrl:Zt.gm,curWhiteListFile:null,appid:"",appidList:[],appidErrMsg:"",startGenerateIng:!1,timeMin:(new Date).getHours()+":"+(new Date).getMinutes(),timeMin2:"00:00",timeMinu1:(new Date).getHours()+":"+(new Date).getMinutes(),timeMinu2:(new Date).getHours()+":"+(new Date).getMinutes(),timeDate:(new Date).getTime(),showMin:!0,distributionType:0,showBatchCount:!1,min:(new Date).getTime(),appidInputStatus:"normal",form:{generateNum:"",sendTimeSelect:"",needFission:!1,curMapType:"",curGenerateType:"",isHeat:!1},formRule:{curGenerateType:[{required:!0,message:"选择发放方式"}],curMapType:[{required:!0,message:"选择领取方式"}],sendTimeSelect:[{required:!0,message:"选择生效时间"}],generateNum:[{trigger:["change","blur"],validator:(e,t,i)=>{const a=this;if(a.isShowDialog)return!t||+t<=0||"number"!==typeof+t||!Number.isInteger(+t)||+t>a.leftNum?i(new Error("请输入正确格式的发放数量")):a.form.curGenerateType===de.B6.qrcode&&a.form.curMapType===de.T.oneToOne&&+t>2e4?i(new Error("一次发放的上限为20000个")):(a.form.curGenerateType===de.B6.link||a.form.curGenerateType===de.B6.code)&&a.form.curMapType===de.T.oneToOne&&+t>5e5?i(new Error("一次发放的上限为50万个")):a.form.curMapType===de.T.oneToAll&&+t>1e6?i(new Error("一次发放的上限为100万个")):void i()}}],fileList:[{validator:(e,t,i)=>{const a=this;if(a.specifyGroup.length&&1===a.sendSpecifyType&&!a.fileList.length)return i(new Error("请上传用户白名单"));i()}}],appidList:[{trigger:["blur"],validator:(e,t,i)=>{const a=this;if(a.specifyGroup.length&&0===a.sendSpecifyType&&!a.appidList.length)return i(new Error("请添加appid"));i()}}]},timer:void 0,showWhiteListUploadError:!1}},props:{cover:{type:Object,default(){return{}}},payInfo:{type:[Object,Array],default(){return{}}}},computed:{isBizSpringPayInfo(){let e="";return e=Array.isArray(this.payInfo)&&this.payInfo[0]?this.payInfo[0].fromQuotaId:this.payInfo.fromQuotaId,/spring(\d+)_biz/.test(e)},isEmotionPayInfo(){let e="";return e=Array.isArray(this.payInfo)&&this.payInfo[0]?this.payInfo[0].fromQuotaId:this.payInfo.fromQuotaId,/spring(\d+)_emotion/.test(e)},disableGenTypeQRCode(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_GenType_QRCode)},disableGenTypeUrl(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_GenType_Url)},disableGenTypeCdKey(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_GenType_CdKey)},disableGenTypeFission(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_GenType_Fission)},disableReceiveTypeIndividual(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_ReceiveType_Individual)},disableReceiveTypeShare(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_ReceiveType_Share)},disableCustomGenCount(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_Custom_GenCount)},disabledSetTimer(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_Set_Timer)},disabledSpecifyUsers(){return!!(this.payInfo.permissionFlag&Da.A5.Disable_Specify_Users)},isCombineGen(){return Array.isArray(this.payInfo)&&this.payInfo.length>1},isShowDialog(){return d.l1.showReceiveMaterialDialog},showCustomQrcode(){const{curGenerateType:e,curMapType:t}=this.form,i=2===e&&1===t;return this.isBiz||i},isSpecifyDone(){const{specifyGroup:e,sendSpecifyType:t,fileList:i,appidList:a,isOnetoallAndLink:s}=this;return!e.length||(!s&&i.length>0||(1===t&&i.length>0||0===t&&a.length>0))},principalType(){return d.U6.user.principalType},accountType(){return d.U6.user.accountType},isOrganization(){return this.principalType===l.eZ.organization},isBiz(){return 1===this.accountType},leftNum(){const e=this.payInfo;if(Array.isArray(e)){let t=0;return e.forEach((e=>{t+=e?.payStat?.remainingGenCoverCount||0})),t}return e?.payStat?.remainingGenCoverCount||0},isEmotionRainOpen(){return d.U6.user.emojiRainInfo&&d.U6.user.emojiRainInfo.activityOpen},isOnetoallAndLink(){const{curGenerateType:e,curMapType:t}=this.form;return 2===e&&1===t},isQuotaGift(){return Array.isArray(this.payInfo)?this.payInfo[0]?.isQuotaGift:this.payInfo.isQuotaGift}},watch:{isQuotaGift:{immediate:!0,handler(e){this.form.isHeat=!!e}},"form.curGenerateType":{handler(e,t){this.handleFissionCheckBoxShow(t)}},isShowDialog:{async handler(e){e&&(this.setDialogTop(),this.disableCustomGenCount&&(this.form.generateNum=this.leftNum))},immediate:!0},isOnetoallAndLink(e){this.sendSpecifyType=e?0:1},timeDate(){const e=this;(new Date).toDateString()==new Date(e.timeDate).toDateString()?e.showMin=!0:e.showMin=!1}},beforeDestroy(){clearTimeout(this.timer)},methods:{goBizGenerateDoc(){window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=6","_blank")},goEmotionGenreateDoc(){window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=8","_blank")},goReceiveComponentTips(){this.isBiz?this.goBizGenerateDoc():window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=5","_blank")},handleFissionPopoverHide(){this.form.needFission&&(localStorage.setItem("hideFissionTipsNewIcon","1"),this.initFissionTips())},handleFissionCheckBoxShow(e){if(!e){const e=localStorage.getItem("fissionCheckboxShowNum")||0;if(Number(e)<3){const t=Number(e)+1;localStorage.setItem("fissionCheckboxShowNum",`${t}`)}else Number(e)>=3&&!this.hideFissionTipsRedDot&&(localStorage.setItem("hideFissionTipsRedDot","1"),this.initFissionTips())}},initFissionTips(){const e=localStorage.getItem("hideFissionTipsRedDot");this.hideFissionTipsRedDot=!!e;const t=localStorage.getItem("hideFissionTipsNewIcon");this.hideFissionTipsNewIcon=!!t},closeDialog(e){this.$emit("cancel",e),d.l1.toggleReceiveDialog(),this.resetForm(),this.$nextTick((()=>{document.body.style.overflow="visible"}))},async setDialogTop(){await this.$nextTick();const e=this.$refs.dialog;if(e){const t=e.$el.querySelector(".weui-desktop-dialog");await this.$nextTick();const i=40,a=t.getBoundingClientRect().top-i;t.style.top=`${a}px`}},resetForm(){this.setDistributionType(0),this.$refs.genForm.resetFields(),window.setTimeout((()=>{this.$refs.generateNumInput.handleClear()}),500),this.clearSpecifyForm(),this.clearFissionForm()},handleFissionCheckboxChange(e){if(e.length){if(this.form.needFission=!0,!this.hideFissionTipsRedDot){this.showFissionPopover=!0,localStorage.setItem("hideFissionTipsRedDot","1"),this.initFissionTips();const e=t=>{const i=this.$refs.fissionPopoverRef;if(i?.$el&&t.target){const a=i?.$el;a.contains(t.target)||(this.showFissionPopover=!1,window.removeEventListener("click",e))}};window.addEventListener("click",e)}}else this.clearFissionForm()},handleSpecifyGroupChange(e){e.length||this.clearSpecifyForm()},handleSpecifyTypeChange(){this.appid="",this.appidErrMsg=""},clearFissionForm(){this.isFission=[],this.form.needFission=!1,this.form.isHeat=!1,this.isQuotaGift&&this.$nextTick((()=>{this.form.isHeat=!0}))},clearSpecifyForm(){this.specifyGroup=[],this.sendSpecifyType=NaN,this.appid="",this.appidErrMsg="",this.fileList.length=0,this.appidList.length=0,this.curWhiteListFile=null,this.showWhiteListUploadError=!1},handleAppidChange(e){0===e.length&&(this.appidErrMsg="",this.appidInputStatus="normal")},addAppid(){const{appidList:e,appid:t}=this;return 10===e.length?(this.appidErrMsg="最多添加10个appid",void(this.appidInputStatus="warn")):e.includes(t)?(this.appidErrMsg="appid已添加",void(this.appidInputStatus="warn")):(this.appidErrMsg="",this.appidInputStatus="normal",this.appidList.push(this.appid),void(this.appid=""))},delAppid(e){this.appidList=this.appidList.filter((t=>t!==e))},handleSpecifyFileChange(e){const{file:t}=e,i=this.$refs.whiteListForm;"done"===t.status?t.response&&0!==t.response.base_response.ret?(this.showWhiteListUploadError=!0,(0,Lt.H)("upload_whitelist_error",`ret=${t.response.base_response.ret} fileSize=${t.size}`),this.curWhiteListFile=null,this.fileList=[],i.validateField("fileList")):(this.showWhiteListUploadError=!1,this.curWhiteListFile={mediaType:de.Je.File,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},t.fileSize=zt(t.size).toUpperCase(),t.name=`${t.name}（${t.fileSize}）`,i.validateField("fileList")):"removed"===t.status?(this.fileList=[],this.curWhiteListFile=null,this.showWhiteListUploadError=!1):(this.fileList=[t],this.showWhiteListUploadError=!1)},async checkReceiveMaterial(){if(this.isCombineGen)return;const e=this.cover,t=this.payInfo;await d.l1.getCoverReceiveObjectList({orderId:e.orderId,transactionId:t.transactionId});const i=this.cover.receiveObjectList||[];!0===i?.[0]?.status&&(this.timer=window.setTimeout((()=>{this.checkReceiveMaterial()}),1e3))},async startGenerate(){const e=!!this.form.isHeat&&await this.$refs.heatSource.validate(),t=await this.$refs.genForm.validate();if(t?.invalidFields?.length>0)return;const i=this.$refs.whiteListForm;if(i){const e=await i.validate();if(e?.invalidFields?.length>0)return}const a=this.$refs.appListForm;if(a){const e=await a.validate();if(e?.invalidFields?.length>0)return}if(this.form.needFission&&2===this.form.curMapType)return this.errorTip("发放材料仅一人领取无法裂变，请选择其他发放方式");if(this.form.isHeat&&!e)return;const s=this,r=this.cover;var o=0;if(1==this.form.sendTimeSelect){var n;if(1==this.showMin){if(!this.timeMinu1)return this.errorTip("请选择定时生效时间");n=this.timeMinu1}else{if(!this.timeMinu2)return this.errorTip("请选择定时生效时间");n=this.timeMinu2}var c=parseInt(n.split(":")[0]),l=parseInt(n.split(":")[1]);o=new Date(this.timeDate).setHours(c,l,0,0)}this.startGenerateIng=!0;let d={},p={receive_type:this.form.curMapType||1,gen_type:this.form.curGenerateType||2,total_gen_count:+this.form.generateNum,refer_transaction_id:this.payInfo.transactionId,receive_begin_time:Math.floor(o/1e3),distribution_type:this.distributionType,white_list_file:this.curWhiteListFile,need_fission:this.form.isHeat,is_heat:this.form.isHeat};if(this.isCombineGen?(delete p.refer_transaction_id,p.transaction_id_list=this.payInfo.map((e=>e.transactionId)),d=await ss.combineGenReceiveMaterial(r.orderId,p,1,this.appidList,e),(0,Lt.H)("合并发放",JSON.stringify(p)),-2===d.baseResponse.ret&&d.transactionIdDefault&&(p.refer_transaction_id=d.transactionIdDefault,delete p.transaction_id_list,d=await ss.genReceiveMaterial(r.orderId,p,1,this.appidList,e),(0,Lt.H)("只用了一个订单",JSON.stringify(p)))):d=await ss.genReceiveMaterial(r.orderId,p,1,this.appidList,e),d&&0===d.baseResponse.ret){if(this.checkReceiveMaterial(),this.closeDialog({isGenSucc:!0}),this.$emit("refreshCover"),this.$nextTick((()=>{this.$tipsSuc("发放成功"),window.setTimeout((()=>{this.$tipsHide(),this.startGenerateIng=!1}),3e3)})),this.isCombineGen&&p.refer_transaction_id)return this.$router.push({name:"order",query:{tid:p.refer_transaction_id}});if(this.isCombineGen){const e=d.resultList,t=d.mergeId;this.$emit("updateMergeDetail",{mergeDetail:e,mergeId:t,orderId:r.orderId})}}else this.startGenerateIng=!1,s.$tipsErr("生成失败"),(0,Lt.H)("生成订单失败",JSON.stringify(p)),window.setTimeout((()=>s.$tipsHide()),3e3)},async validGenNum(){const e=this.$refs.genForm;e.validateField("generateNum")},setDistributionType(e){this.distributionType=e},handleEmotionRainGuide(){let e="";e=this.isBiz?"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_org":"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_personal",window.open(e,"_blank")}}}),cs=ns,ls=(0,h.Z)(cs,es,ts,!1,null,"45ace5b7",null),ds=ls.exports,ps=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"mp-dialog",attrs:{value:e.value,title:"",width:600},on:{"visible-change":e.handleVisibleChange,close:e.close}},[t("div",{staticClass:"dialog-content"},[t("div",{staticClass:"title-wrapper"},[t("mp-icon",{staticStyle:{"margin-bottom":"16px"},attrs:{icon:e.isMergeSuccess?"checkmark_circle_filled":"clock_filled",color:e.isMergeSuccess?"#07c160":"#10AEFF",width:48,height:48}}),t("div",{staticClass:"title"},[e._v(e._s(e.isMergeSuccess?"已生成":"正在生成"))]),e.isMergeSuccess?t("div",{staticClass:"color-bw-lv2-text"},[t("span",[e._v(e._s(`${e.genTypeText}由以下订单合并生成`)+" ")]),t("a",{on:{click:e.goReceiveObjects}},[e._v("前往合并发放记录")])]):t("div",{staticClass:"color-bw-lv2-text"},[e._v(" "+e._s(`以下订单合并生成${e.genTypeText}中`)+" ")])],1),t("a-table",{key:"transactionId",staticClass:"merge-distributed-table",attrs:{columns:e.columns,dataSource:e.pageRecordList,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"genType",fn:function(i){return[t("div",[t("div",[e._v(" "+e._s(e.GenTypeToText[i.genType])+" ")]),t("div",[e._v("多人领取")])])]}},{key:"action",fn:function(i){return[t("a",{attrs:{href:`#/order?tid=${i.transactionId}`}},[e._v("详情")])]}}])}),t("a-row",{attrs:{type:"flex",justify:"center"}},[e.mergeDetail.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{current:e.curPage,"per-page":e.pageNum,"total-num":e.mergeDetail.length,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1),e.isMergeSuccess?t("div",{staticClass:"download-wrapper"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"btn-download",on:{click:e.download}},[e._v("下载"+e._s(e.genTypeText))])],1),t("a-row",{attrs:{type:"flex",justify:"center"}},[t("div",{staticClass:"color-bw-lv2-text",staticStyle:{"margin-top":"12px"}},[e._v("发放总数量："+e._s(e.totalGenCount))])])],1):e._e()],1)])},us=[];const hs=new je.ZP;var ms=a.ZP.extend({props:{value:Boolean,mergeInfo:{type:Object,default:()=>({mergeDetail:[],mergeId:"",orderId:""})}},data(){return{GenTypeToText:de.FP,curPage:1,pageNum:3,mergeResStatus:de.ST.Pending,checkTimer:0,columns:[{dataIndex:"createTime",key:"createTime",title:"被合并订单",width:120,customRender:e=>`${da().unix(e).format("YYYY/MM/DD")}的订单`},{key:"genType",title:"发放方式",width:120,scopedSlots:{customRender:"genType"}},{dataIndex:"genCount",key:"genCount",title:"发放数量"},{dataIndex:"expiredTime",key:"expiredTime",title:"发放与领取有效期",customRender:e=>`至 ${da().unix(e).format("YYYY/MM/DD")}`},{title:"操作",align:"right",key:"action",scopedSlots:{customRender:"action"}}]}},computed:{mergeDetail(){return this.mergeInfo.mergeDetail||[]},length(){return this.mergeDetail?.length||"-"},pageRecordList(){const e=(this.curPage-1)*this.pageNum,t=e+this.pageNum;return this.mergeDetail?.slice(e,t)},totalGenCount(){return this.mergeDetail.reduce(((e,t)=>e+t.genCount),0)},genTypeText(){return this.mergeDetail[0]?de.FP[this.mergeDetail[0].genType]:""},isMergeSuccess(){return this.mergeResStatus===de.ST.Recallable}},methods:{goReceiveObjects(){this.$router.push({name:"receiveobjects",query:{mergeId:this.mergeInfo.mergeId}})},handleVisibleChange(e){e?(this.mergeResStatus=de.ST.Pending,this.checkMergeResult()):clearTimeout(this.checkTimer)},async checkMergeResult(){const e=await await hs.getMergeDetail({merge_id:this.mergeInfo.mergeId,order_id:this.mergeInfo.orderId});e?.status===de.lv.Success?(this.mergeResStatus=de.ST.Recallable,clearTimeout(this.checkTimer)):this.checkTimer=setTimeout(this.checkMergeResult,3e3)},download(){const e=this.mergeDetail[0];hs.downloadMergeReceiveObject({createTime:e.createTime,genType:e.genType,receiveType:de.T.oneToAll,mergeId:this.mergeInfo.mergeId})},pageChange(e){this.curPage=e.currentPage},close(){this.$emit("input",!1)}}}),gs=ms,vs=(0,h.Z)(gs,ps,us,!1,null,"49d46cf8",null),fs=vs.exports,ys=i(2776);const{mapGetters:_s,mapState:Cs}=(0,fe._p)("cover"),bs=i(90520);var ws=a.ZP.extend({name:"CoverOrderList",data(){return{num:0,curPage:1,pageNum:4,columns:[{dataIndex:"date",key:"date",title:"订单时间"},{key:"count",title:"购买数量",scopedSlots:{customRender:"count"}},{dataIndex:"sendToReceive",key:"sendToReceive",slots:{title:"sendToReceive"}},{dataIndex:"expired",key:"expired",scopedSlots:{title:"expiredTitle"}},{key:"statusText",title:"订单状态",scopedSlots:{customRender:"statusText"}},{key:"action",title:"操作",align:"right",scopedSlots:{customRender:"action"}}],chooseColumns:[{key:"leftNum",title:"剩余可发放封面",scopedSlots:{customRender:"leftNum"}},{dataIndex:"date",key:"date",title:"订单时间"},{dataIndex:"purchaseCount",key:"purchaseCount",title:"购买封面数量"},{key:"expired",title:"发放与领取有效期",align:"right",scopedSlots:{customRender:"expired"}}],chooseTimeColumns:[{key:"radio",title:"",scopedSlots:{customRender:"radio"}},{dataIndex:"date",key:"date",title:"订单时间"},{dataIndex:"purchaseCount",key:"purchaseCount",title:"发放时长"},{key:"expired",title:"发放与领取有效期",scopedSlots:{customRender:"expired"}}],checkTransactionIds:[],keepCheckTransactionIds:!1,curChoosenPayInfo:{},mergeInfo:{},mergeResultDialogVisible:!1,isShowDialog:!1,tableKey:0,orderTableScrollTop:0}},props:{cover:{type:Object,default(){return{}}}},computed:{...Cs(["choosePayInfoDialog","triggerCheckTransactionIds"]),orderWithQuotaGift(){const e=this.countPayInfoList?.filter((e=>e.isQuotaGift));return!!e?.length},validPayInfoList(){return d.l1.validPayInfoList},hasSpecialPayInfo(){const e=this.validPayInfoList.some((e=>ys.Cu.some((t=>e.fromQuotaId?.startsWith(t)))));return e},columnTitle(){return this.hasSpecialPayInfo||this.orderWithQuotaGift?" ":""},timePayInfoList(){return this.validPayInfoList.filter((e=>e.purchaseType===Da.mr.time))},countPayInfoList(){return this.validPayInfoList.filter((e=>{const t=!(!e.permissionFlag||!Da.A5.Disable_Combine_Gen);return e.purchaseType!==Da.mr.time&&e.leftNum>0&&+e.leftDays>0&&!t}))},checkedPayInfoList(){return this.payInfoList.filter((e=>this.checkTransactionIds.includes(e.transactionId)))},payInfoList(){const e=this;return e.cover&&e.cover.payInfoList?e.cover.payInfoList:[]},list(){const e=this.cover;if(!e.payInfoList)return[];const t=this,i=(t.curPage-1)*t.pageNum,a=i+t.pageNum;return e.payInfoList.slice(i,a).map(((e,t)=>{const i=e.payStat||{},{fissionTotalReceiveCount:a,fissionTotalGenCount:s,totalReceiveCount:r,totalGenCount:o}=i;let n=`${r||"-"} / ${o||"-"}`;e.purchaseType==Da.mr.time&&(n=`${r||"-"} / -`);let c=e.expiredTime?bs("yyyy/MM/dd",new Date(1e3*e.expiredTime)):"-",l=`${e.purchaseCount}`;e.purchaseType===Da.mr.time&&(e.actived&&(c=e.activeEndTime?bs("yyyy/MM/dd hh:mm",new Date(1e3*e.activeEndTime)):"-"),l=`发放时长：${e.purchaseCount}小时`);let d="-";s>=0&&(d=s?`${a}/${s}（裂变发放数量）`:a);const p=Object.assign({},e,{key:t,statusText:Da.j8[e.status],count:l,payStat:i,sendToReceive:n,fissionToReceive:d,expired:e.expiredTime&&![Da.A7.Fail,Da.A7.Cancel,Da.A7.Blocked,Da.A7.Pending].includes(e.status)?`至 ${c}`:"-",date:da().unix(e.paymentTime).format("YYYY/MM/DD")});return p}))}},watch:{triggerCheckTransactionIds(){this.keepCheckTransactionIds=!1},choosePayInfoDialog:{async handler(e){const t=d.l1.cover,i=t.payInfoList;i&&(this.isShowDialog=e)}}},created(){const e=this;e.initTableCurPage()},methods:{handleOrderTableScroll(e){e.target instanceof HTMLElement&&(this.orderTableScrollTop=e.target.scrollTop)},async handleGenerateCoverCancel(e){e?.isGenSucc||(await this.$nextTick(),this.keepCheckTransactionIds=!0,d.l1.toggleChoosePayInfoDialog())},async onTransactionIdSelectChange(e){this.checkTransactionIds=e,e.length<=1&&(this.tableKey=this.tableKey+1),await this.$nextTick(),this.$refs?.countOrderTableRef?.$el&&(this.$refs.countOrderTableRef.$el.scrollTop=this.orderTableScrollTop)},disableOrders(e){const t={props:{disabled:!1,name:"1"}},i=this.checkedPayInfoList.some((t=>t.transactionId===e.transactionId));if(i||0===this.checkedPayInfoList.length)return t.props.disabled=!1,t;const a=this.checkedPayInfoList.some((e=>e?.fromQuotaId?.startsWith("spring2024_biz")));if(!e.fromQuotaId?.startsWith("spring2024_biz")&&a)return t.props.disabled=!0,t;const s=this.checkedPayInfoList.some((e=>e?.fromQuotaId?.startsWith("spring2024_emotion")));if(!e?.fromQuotaId?.startsWith("spring2024_emotion")&&s)return t.props.disabled=!0,t;const r=this.checkedPayInfoList.some((e=>e?.fromQuotaId?.startsWith("autumn2023")));return r&&!this.checkedPayInfoList.find((t=>t.transactionId===e?.transactionId))||!r&&e?.fromQuotaId?.startsWith("autumn2023")||ys.Cu.every((e=>!this.checkedPayInfoList[0]?.fromQuotaId?.startsWith(e)))&&ys.Cu.some((t=>e.fromQuotaId?.startsWith(t)))?(t.props.disabled=!0,t):{props:{disabled:!1,name:"1"}}},handlePayInfoDialogVisibleChange(e){e?(d.l1.getCoverPayInfoList(this.cover.orderId),this.keepCheckTransactionIds||(this.clearCheckTransactionIds(),1===this.countPayInfoList.length&&this.checkTransactionIds.push(this.countPayInfoList[0]?.transactionId))):(this.orderTableScrollTop=0,d.l1.toggleChoosePayInfoDialog(!1))},updateMergeDetail(e){this.mergeInfo=e,this.mergeResultDialogVisible=!0},closePayInfoDialog(){this.$refs.payInfoDialog?.close()},clearCheckTransactionIds(){this.checkTransactionIds=[]},handleGenCoverRefresh(){this.clearCheckTransactionIds(),setTimeout((()=>{d.l1.getCoverPayInfoList(this.cover.orderId)}),1e3)},initTableCurPage(){const e=this,t=+this.$route.query.page;t&&t<=Math.ceil(e.payInfoList.length/e.pageNum)&&(e.curPage=+this.$route.query.page)},pageChange(e){const t=this;t.curPage=e.currentPage,this.$router.replace({name:`${this.$route.name}`,query:{...this.$route.query,page:`${e.currentPage}`}})},goToChoosenPayInfo(){this.checkTransactionIds.length<1||(this.keepCheckTransactionIds=!1,1===this.checkTransactionIds.length?(d.l1.toggleReceiveDialog(),this.handleToDetail(this.checkTransactionIds[0])):d.l1.toggleReceiveDialog(),d.l1.toggleChoosePayInfoDialog(!1))},handleToDetail(e){const t="string"===typeof e?e:e.transactionId,i=this;i.$router.push({name:"order",query:{tid:t}})}},components:{Tag:ga,EmotionRainDesc2:Ia,EmotionRainTipEntry:Pa,Remark:Xa,GenerateCoverDialog:ds,MergeResultDialog:fs}}),Is=ws,ks=(0,h.Z)(Is,na,ca,!1,null,"005b7e29",null),Ts=ks.exports;const Ss=new je.ZP,xs=new $.ZP,{mapGetters:As}=(0,fe._p)("cover");var Ps=a.ZP.extend({name:"CoverDetail",data(){return{coverId:"",coverPrice:de.uX,isPageReady:!1,showRefundDialog:!1,showPurchaseDialog:!1,showChoosePayInfoDialog:!1,isPrimaryBtnLoading:!1,curChoosenPayInfo:{},waitingPayInfoLeftTime:0,waitingPayInterval:0,showTestRedDialog:!0,checkInterval:0,qrcodeStatus:0,qrcodeUrl:"",loginScanFailReason:"",showTestRedDialogFlag:0,tempRedQr:{}}},components:{CoverDetailHeader:De,CoverDetailStatistics:Fe,CoverOrderList:Ts,CoverDetailInfo:oa,Qrcode:L.Z},watch:{waitingPayInfo(e,t){const i=this;if(e&&e.orderId!==t.orderId){let e=i.waitingPayInfo.payLeftTime;i.waitingPayInfoLeftTime=(0,ye.Jh)(e,ye.m4.minute),clearInterval(i.waitingPayInterval),i.waitingPayInterval=window.setInterval((()=>{if(e<=0)return i.waitingPayInfoLeftTime=0,i.clearWaitingPayInterval();e-=1,i.waitingPayInfoLeftTime=(0,ye.Jh)(e,ye.m4.minute)}),1e3)}}},computed:{...As(["validPayInfoList","maxExpiredDays","minExpiredDays","leftValidOrderNum"]),cover(){return d.l1.cover},waitingPayInfo(){const e=d.l1.cover;return!!e.payInfoList&&e.payInfoList.find((e=>e.status===Da.A7.Pending))},isPublished(){const{orderStatus:e}=this.cover;return e===de.Rf.Published},leftCoverNum(){const e=this.cover;return e.orderStat&&e.orderStat.remainingGenCoverCount||0},canRefundAmount(){const e=this;return(0,ye.Zh)(e.cover.canRefundAmountInCents)},isShowStatistics(){const e=this;return e.cover.orderStatus&&e.cover.orderStatus>de.Rf.Rejected},isShowReceiveObjectList(){const e=this;return e.cover.orderStatus&&e.cover.orderStatus>de.Rf.Rejected},isShowPayInfoList(){const e=this;return e.cover.orderStatus&&e.cover.orderStatus>de.Rf.Rejected}},async mounted(){document.body.style.overflow="visible",this.coverId=this.$route.query.id,await this.fetchData(),this.isPageReady=!0},beforeDestroy(){clearInterval(this.checkInterval)},methods:{async getTempPreviewQrcode(){const e=this.cover,t=await Ss.getTempPreviewQrcode(e.orderId);t&&0===t.baseResponse.ret?this.tempRedQr={objectFullUrl:t.objectFullUrl,objectCdkey:t.objectCdkey,objectQrcodeUrl:t.objectQrcodeUrl,totalCnt:t.totalCnt,leftCnt:t.leftCnt}:t&&1066===t.baseResponse.ret&&window.setTimeout((()=>{this.getTempPreviewQrcode()}),1e3)},saveTempQr(e){return xs.downloadFilePng(e,"qr"),!1},async downloadReceiveObject(e){},async fetchData(){if(!this.coverId)return this.$router.replace({name:"covers"});await d.l1.getCoverInfo(this.coverId),await d.l1.getCoverPayInfoList(this.coverId)},async handleHeaderBtnClick(e){const t=this,i=this.cover,a=t.waitingPayInfo;if((0,Lt.H)("click_header_btn",JSON.stringify({actionType:e,text:H[e]})),e===H["重新编辑"])this.routerGo("make",{cover:i});else if(e===H["撤销审核"]){this.isPrimaryBtnLoading=!0;const e=await d.l1.modifyCover(je.Z3.Recall,i);this.isPrimaryBtnLoading=!1,e&&0===e.baseResponse.ret&&(t.$tipsSuc("撤销成功"),t.clearWaitingPayInterval(),window.setTimeout((()=>t.$tipsHide()),1500))}else if(e===H["购买"]||e===H["再次购买"])this.showPurchaseDialog=!0;else if(e===H["发放封面"])xs.baseActionReport({actionType:"12",authorId:d.U6.user.authorId}),d.l1.toggleTriggerCheckTransactionIds(),d.l1.toggleChoosePayInfoDialog();else if(e===H["退款"])this.showRefundDialog=!0;else if(e===H["支付"])(0,ye.jo)(a);else if(e===H["取消支付"]){const e=await d.l1.cancelPay({orderId:i.orderId,transactionId:a.transactionId});e&&0===e.baseResponse.ret&&(t.$tipsSuc("取消成功"),window.setTimeout((()=>t.$tipsHide()),1500),this.clearWaitingPayInterval())}else{if(e===H["申诉"])return t.$router.push({name:"doc",query:{page:"right",index:"3"}});e===H["试用封面"]&&(this.showTestRedDialog=!0,this.showTestRedDialogFlag=1,this.getTempPreviewQrcode())}},checkAdditionalInfo(){const{orderStatus:e,auditResult:t}=this.cover;if(e===de.Rf.Rejected||e===de.Rf.Frozen||e===de.Rf.Blocked){const i={status:e,auditResult:t};this.$router.push({name:"audit",params:i})}},async handleRefund(){const e=await d.l1.applyRefund(this.coverId);e&&0===e.baseResponse.ret&&this.$router.push({name:"refundSuccess",query:{cid:this.coverId}})},checkLoginResult(){},async loadAndCheckQrcode(){this.qrcodeStatus=L.R.normal,await d.U6.getLoginQrcode(),this.checkInterval=window.setInterval((()=>this.checkLoginResult()),1e3)},async loadAndCheckRedQrcode(){},handlePurchase(){const e=this;e.$router.push({name:"pay",query:{cover:this.cover,cid:this.coverId,type:"count"}})},clearWaitingPayInterval(){const e=this;return e.waitingPayInfoLeftTime=0,clearInterval(e.waitingPayInterval)},routerGo(e,t,i){this.$router.push({name:e,params:t,query:i})}}}),Ds=Ps,Us=(0,h.Z)(Ds,ge,ve,!1,null,"1dbd094c",null),Es=Us.exports,Rs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-list"},[t("div",{staticClass:"main-card notice-board"},[e.noticeList.length?t("span",[e._v("公告：")]):e._e(),e.noticeList[0]?t("div",{staticClass:"notice",on:{click:function(t){return e.routeToNoticeDetail(e.noticeList[0])}}},[e._v(e._s(e.noticeList[0].title))]):e._e(),e.noticeList[1]?t("div",{staticClass:"notice",on:{click:function(t){return e.routeToNoticeDetail(e.noticeList[1])}}},[e._v(e._s(e.noticeList[1].title))]):e._e(),e.noticeList.length>2?t("div",[t("span",{staticClass:"more",on:{click:e.routeToMoreNotice}},[e._v("查看更多")]),t("div",{staticClass:"arrow"},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]):e._e()]),e.isPageReady?t("div",{staticClass:"main-card covers-board"},[0!==e.coverList.length?[t("div",{staticClass:"title"},[t("span",{staticStyle:{"font-weight":"500"}},[e._v("我的红包封面")]),e.isCanEdit?t("mp-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.goToMakeCover}},[e._v("定制封面")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"button",attrs:{type:"primary"}},[e._v("定制封面")])]},proxy:!0}],null,!1,577724823)})],1),t("CoverTable",{attrs:{coverList:e.coverList},on:{detail:e.handleToDetail}}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.coverListLength>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{mode:"normal",current:e.curPage,"per-page":e.pageNum,"total-num":e.coverListLength},on:{"page-change":e.pageChange}}):e._e()],1)]:t("div",{staticClass:"no-wrap"},[t("div",{staticClass:"title"},[e._v("开始定制红包封面")]),t("div",{staticClass:"desc"},[e._v("定制之前，可以查看设计规范和模板")]),t("div",{staticClass:"doc"},[t("a",{staticClass:"design-rule",attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index#/doc?page=design&index=-1",target:"_blank"}},[e._v(" 查看设计规范 ")]),t("a",{attrs:{href:e.designTemplateUrl}},[e._v("下载设计模板")])]),e.isCanEdit?t("mp-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.goToMakeCoverWhenNoOne}},[e._v("去定制")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"button",attrs:{type:"primary"}},[e._v("去定制")])]},proxy:!0}],null,!1,1242180719)})],1)],2):[e._m(0)]],2)},Ms=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],Ls=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a-table",{staticClass:"cover-table",attrs:{columns:e.columns,dataSource:e.coverList,pagination:!1},scopedSlots:e._u([{key:"nameAndImg",fn:function(i,a){return[t("div",{staticClass:"cover-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:a.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":a.packetMaterial.syntheticWidgetImage?.mediaUrl}}),t("div",{staticClass:"ml-5"},[t("div",{staticClass:"cover-name"},[e._v(e._s(i))]),a.packetMaterial.coverAtmospherePag?.mediaUrl?t("div",{staticClass:"inline-block rounded-sm bg-opblack_5 px-[6px] py-0.5 text-xs"},[e._v("氛围")]):a.packetMaterial.coverImageDynamicType?t("div",{staticClass:"inline-block rounded-sm bg-opblack_5 px-[6px] py-0.5 text-xs"},[e._v("动态")]):e._e()])],1)]}},{key:"statusText",fn:function(i,a){return[t("div",{staticClass:"status-text",style:{color:a.statusColor}},[t("div",[e._v(e._s(a.statusText))]),"待提交"===a.statusText&&a.actionAuthInfo&&a.actionAuthInfo.status<=3?t("div",[e._v("跳转链接待授权")]):e._e(),"待提交"===a.statusText&&a.actionAuthInfo&&4===a.actionAuthInfo.status?t("div",[e._v("跳转链接已授权")]):e._e()])]}},{key:"action",fn:function(i,a){return[t("div",{staticClass:"detail"},[t("a",{on:{click:function(t){return e.gotoDetail(a)}}},[e._v("详情")]),t("Remark",{attrs:{"remark-info":a.remarkInfo,"order-id":a.orderId,"order-status":a.orderStatus}})],1)]}}])})},Ns=[],Fs=a.ZP.extend({name:"CoverTable",data(){Object.entries(de.QP).filter((([e,t])=>"number"===typeof t)).map((([e,t])=>({text:e,value:e})));return{IdType:La.Xd,columns:[{dataIndex:"packetName",key:"nameAndImg",title:"红包封面",width:259,scopedSlots:{customRender:"nameAndImg"}},{dataIndex:"usedPercent",key:"usedPercent",title:"已领取/已发放",width:259},{key:"statusText",title:"当前状态",width:259,scopedSlots:{customRender:"statusText"}},{dataIndex:"updateDate",key:"updateDate",title:"最后操作时间",width:259},{title:"操作",key:"action",dataIndex:"action",align:"right",width:124,scopedSlots:{customRender:"action"}}]}},props:{coverList:{type:Array,default(){return[]}}},components:{CoverReceiveImg:be.Z,Remark:Xa},methods:{gotoDetail(e){this.$emit("detail",e)}}}),Os=Fs,Bs=(0,h.Z)(Os,Ls,Ns,!1,null,"0a64db5a",null),qs=Bs.exports;const Qs=new $.ZP,js=i(90520);var $s=a.ZP.extend({name:"CoverList",data(){return{isPageReady:!1,curPage:1,pageNum:8,steps:[{label:"定制封面"},{label:"封面审核"},{label:"付款下单"},{label:"发放领取"}],showInvoiceDialog:!0,isCanEdit:!0}},computed:{noticeList(){return d.PJ.noticeList},coverListLength(){return d.l1.coverList.length},coverList(){const e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;return d.l1.coverList.slice(t,i).map(((e,t)=>{let i="- / -",a="-";if(e.orderStat){const{totalReceiveCount:t,yesterdaySendCount:s,totalGenCount:r}=e.orderStat;i=`${t||"-"} / ${r||"-"}`,a=`${s||"-"}`}const s=Se,r=s[e.orderStatus]||{},o=Object.assign({},e,{key:t,usedPercent:i,yesterdayNum:a,updateDate:js("yyyy年MM月dd日",new Date(1e3*e.updateTime)),statusText:de.QP[e.orderStatus],statusColor:r.color||""});return o}))}},components:{CoverTable:qs},async mounted(){setTimeout((()=>this.initNav()),50),await this.fetchData(),this.isPageReady=!0,await d.U6.getUserInfo(),1!=d.U6.user.isSecondary||8&d.U6.user.managerFlag||(this.isCanEdit=!1)},methods:{initNav(){this.$root.$children?.[0]?.initNav&&this.$route.params.fromLogin&&this.$root.$children[0]?.initNav()},async fetchData(){await d.l1.getCoverList(this);const e=+this.$route.query.page;e&&e<=Math.ceil(this.coverListLength/this.pageNum)&&(this.curPage=+this.$route.query.page)},handleToDetail(e){this.$router.push({name:"detail",query:{id:e.orderId}})},toadmin(){this.$router.push({name:"administrator"})},pageChange(e){this.curPage=e.currentPage,this.$router.replace({name:`${this.$route.name}`,query:{page:`${e.currentPage}`}})},goToMakeCoverWhenNoOne(){Qs.baseActionReport({actionType:"6",authorId:d.U6.user.authorId}),this.$router.push({name:"make"})},goToMakeCover(){Qs.baseActionReport({actionType:"7",authorId:d.U6.user.authorId}),this.$router.push({name:"make"})},routeToMoreNotice(){const e=this.$router.resolve({name:"notice"});window.open(e.href,"_blank")},routeToNoticeDetail(e){const t=this.$router.resolve({name:"noticeDetail",query:{id:e.announcementId}});window.open(t.href,"_blank")}}}),Zs=$s,Hs=(0,h.Z)(Zs,Rs,Ms,!1,null,"44b2f34c",null),Gs=Hs.exports,Ws=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"coverMake",staticClass:"cover-make mx-auto flex w-[1200px] flex-row"},[t("div",{staticClass:"make-wrapper relative"},[t("mp-breadcrumb",{staticClass:"mb-9 mt-2",attrs:{list:e.breadcrumbList},on:{click:e.clickBreadcrumb}}),t("div",{ref:"baseInfoMainCard",staticClass:"main-card"},[t("div",{staticClass:"main-card-title"},[e._v("基本信息")]),t("mp-form",{ref:"baseForm",attrs:{model:e.cover,rules:e.baseRule,"label-width":90}},[t("mp-form-item",{staticClass:"cover-packet-name",attrs:{prop:"packetName"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label mt-2.5"},[t("span",[e._v("封面简称")]),t("mp-popover",{attrs:{position:"up-left",width:363,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("p",[e._v(" "+e._s(1==e.principalType?"1.红包封面简称将展示在红包消息气泡（未上传个人logo）、发红包页、红包详情页、封面故事、封面领取页中。":"1.红包封面简称将展示在红包消息气泡（未上传品牌logo）、发红包页、封面故事、封面领取页中。")+" ")]),t("p",[t("img",{staticStyle:{width:"200px"},attrs:{src:i(4299)}})]),t("p",[t("img",{staticStyle:{width:"200px","margin-top":"4px"},attrs:{src:i(69716)}})]),t("p",[e._v(" "+e._s(e.wordingsMap.packetNamePopoverTips2[e.principalAccountType])+" ")])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-0.5 ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[t("mp-input",{staticStyle:{width:"312px"},attrs:{type:"text",placeholder:"填写红包封面简称"},on:{input:e.handlePackNameInput},model:{value:e.cover.packetName,callback:function(t){e.$set(e.cover,"packetName",t)},expression:"cover.packetName"}}),t("div",{staticClass:"tip text-bw-lv3 mt-2 text-sm",domProps:{innerHTML:e._s(e.wordingsMap.packetNameTip[e.principalAccountType])}})],1),t("mp-form-item",{staticClass:"cover-logo-item",attrs:{prop:"logo"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label optional-label"},[t("span",{},[e._v(e._s(1==e.principalType?"个人logo":"品牌logo"))]),t("mp-popover",{attrs:{position:"up-left",width:450,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("p",[e._v(" "+e._s(1==e.principalType?"1. 个人logo将展示在红包消息气泡/封面故事中。":"1. 品牌logo将展示在红包消息气泡/封面故事中。")+" ")]),t("p",[t("img",{staticStyle:{width:"200px"},attrs:{src:i(70964)}})]),t("p",[e._v(" "+e._s(1==e.principalType?"2. 若上传了个人logo，则红包消息气泡上将仅展示个人logo。若没有上传，将展示红包封面简称。":"2. 若上传了品牌logo，则红包消息气泡上将仅展示品牌logo。若没有上传，将展示红包封面简称。")+" ")]),t("p",[e._v(" "+e._s(e.wordingsMap.logoPopoverTips3[e.principalAccountType])+" ")])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-0.5 ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[t("div",{staticClass:"relative"},[t("a-upload",{attrs:{name:"file",accept:".png,.jpg,.jpeg",action:`${e.uploadImgUrl}?type=logo`,data:{image_name:"logo",order_id:e.cover.orderId},beforeUpload:e.handelBrandLogoBeforeUpload,showUploadList:!1,fileList:e.logoFileList},on:{change:e.handleCoverLogoFileChange}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e.cover.brandLogo?.mediaUrl?"重新上传":"上传")+" ")])],1),t("div",{staticClass:"upload-logo-wrap relative overflow-hidden",class:{"pb-[120px]":e.showSuggestLogo}},[t("div",{staticClass:"mt-3 text-sm text-opblack_2"},[e._v("支持PNG/JPG/JPEG; 200x200像素以内; 文件不超过100KB；")]),t("div",{staticClass:"mt-2 text-sm text-opblack_2"},[e._v(" "+e._s(e.wordingsMap.logoTips[e.principalAccountType])+" ")]),e.showSuggestLogo?e._e():t("div",{staticClass:"logo-wrap relative mt-5 flex h-24 w-24 items-center justify-center overflow-hidden rounded border border-solid border-opblack_3"},[e.cover.brandLogo.mediaUrl?t("img",{staticClass:"h-[68px] w-[68px]",attrs:{src:e.cover.brandLogo.mediaUrl}}):e._e(),e.logoUploading?t("div",{staticClass:"absolute left-0 top-0 flex h-full w-full items-center justify-center"},[t("div",{staticClass:"weui-desktop-loading"})]):t("div",{staticClass:"upload-mask"},[t("mask-icon",{staticClass:"h-6 w-6 cursor-pointer text-opwhite_1",attrs:{name:"trash"},nativeOn:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deleteCurBrandLogo.apply(null,arguments)}}})],1)]),"error"===e.logoFileList?.[0]?.status?t("div",{staticClass:"mt-2 text-sm text-primary"},[e._v("上传错误")]):e._e()]),e.showSuggestLogo?t("mp-popover",{staticClass:"suggest-cover-popover",attrs:{value:!0,width:96},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"suggest-cover-wrapper"},[t("div",{staticClass:"suggest-cover"},[t("img",{attrs:{src:e.headImgUrl}})]),t("a",{staticClass:"text-xs",on:{click:function(t){return t.preventDefault(),e.autoLogoFillIn.apply(null,arguments)}}},[e._v("填入")])])]},proxy:!0}],null,!1,3000981800)}):e._e()],1)])],1)],1),t("div",{ref:"coverMaterialMainCard",staticClass:"main-card"},[e.showNewCoverTips?t("mp-message",{staticClass:"mb-7 bg-neutral_2",attrs:{icon:"info",size:"mini",mode:"gray"},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"flex justify-between"},[t("div",[e._v(" 如需定制原 "),t("a",{on:{click:e.openWidgetDescDialog}},[e._v("「新版封面」")]),e._v(" ，可直接上传挂件素材。 ")]),t("mask-icon",{staticClass:"h-5 w-5 cursor-pointer",attrs:{name:"close"},nativeOn:{click:function(t){return e.initNewCoverTips.apply(null,arguments)}}})],1)]},proxy:!0}],null,!1,661384574)}):e._e(),t("div",{ref:"coverStyleMainCard",staticClass:"main-card-title-wrapper items-center",style:{"margin-bottom":e.showDynamicIcon?"8px":""}},[t("div",{staticClass:"main-card-title"},[e._v("封面样式")]),t("div",[t("a",{staticClass:"tip-link",attrs:{href:`https://${e.pageHost}/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=design&index=2&subIndex=0`,target:"_blank"}},[e._v(" 了解设计规范 ")]),t("a",{staticClass:"tip-link",staticStyle:{"margin-left":"8px"},attrs:{href:e.designTemplateUrl,tatget:"_blank"},on:{click:e.handleClickDownloadTemplate}},[e._v("下载设计模板")])])]),e.showDynamicIcon?t("div",{staticClass:"mb-6 flex items-center text-opblack_2"},[e._v(" 封面图及封面挂件支持视频素材 "),t("span",{staticClass:"icon-new ml-1 inline-block rounded-lg bg-primary px-2 pb-px text-xs text-white"},[e._v("new")])]):e._e(),t("mp-form",[t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label mt-1.5"},[e._v("封面图")])]},proxy:!0}])},[t("div",{staticClass:"cover-file"},[t("div",{staticClass:"cover-file-uploader"},[t("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:e.ACCEPT_TYPE,action:e.uploadImgUrl,fileList:e.imgFileList,data:{image_name:"sourceImage",order_id:e.cover.orderId},showUploadList:!1,customRequest:e.uploadCoverMaterial,beforeUpload:e.handelCoverImgBeforeUpload},on:{change:e.handleCoverImgChange}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[e.coverImg?.url||e.coverMaterialUploading||e.getFirstFrameLoading?t("span",[e._v("重新上传")]):t("span",[e._v("上传")])])],1)],1)]),t("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:e.coverErrorInfo}}),t("div",{staticClass:"tip mt-2 text-sm"},[e._v(" 图片格式：PNG/JPG/JPEG；尺寸957×1278像素 "),t("InfoPopover",{attrs:{text:"平台支持裁剪图片尺寸，其他尺寸图片可裁剪后应用为封面图。",iconClass:"top-0.5  ml-0.5"}}),e._v(" ；不超过500KB； ")],1),t("div",{staticClass:"tip mt-2 text-sm"},[e._v(" 视频格式：MP4；视频宽高比建议3:4；分辨率低于4k；时长1s至3s "),t("InfoPopover",{attrs:{text:"平台支持裁剪视频时长，60s内的视频均可上传，裁剪为1s至3s后应用为封面图。",iconClass:"top-0.5 ml-0.5"}}),e._v(" ；文件不超过20MB；帧率30fps以内；码率不高于3000kbit/s；视频编码H.264/AVC；yuv格式420。 ")],1),t("InfoPopover",{attrs:{width:400,defaultText:"平台同时支持上传",targetLink:"PNG序列帧",linkClass:"mt-2 ml-0.5"}},[t("div",{staticClass:"text-opblack_2"},[t("div",{staticClass:"font-medium"},[e._v("PNG序列帧上传要求")]),t("div",{},[e._v(" · PNG图片尺寸957×1278像素； "),t("br"),e._v(" · 将视频（1s至3s）以24fps帧率导出序列帧； "),t("br"),e._v(" · 全部图片打包为1个ZIP压缩包上传，压缩包不超过50MB； "),t("br"),e._v(" · 每张PNG图片按播放顺序以5位连续数字命名，例如00001.png、00002.png…； "),t("br"),e._v(" · 图片张数不少于24张，不多于72张； ")])])]),t("div",{staticClass:"mt-4 flex"},[e.coverImgUploading||e.coverMaterialUploading||e.getFirstFrameLoading||e.coverImg?.url?t("MaterialItem",{staticClass:"mr-12",attrs:{loading:e.coverMaterialUploading,picUrl:e.coverImg.dataUrl||e.cover.packetMaterial.sourceImage?.mediaUrl,name:e.sourceDynamicMediaInfo.name||e.cover.packetMaterial.coverImageDynamicSource?.mediaName||e.cover.packetMaterial?.sourceImage?.mediaName,icon:e.CoverMaterialItem,showEdit:!e.dynamicMaterialUploading&&!e.coverMaterialUploading&&!e.getFirstFrameLoading&&(!!e.cropperSourceImgInfo.objectUrl||e.sourceDynamicMediaInfo.type===e.CoverMediaType.Mp4),popoverTitle:"删除封面素材",popoverContent:"删除后「红包气泡」、「红包详情页」、「发红包页」素材也会被删除。"},on:{edit:function(t){e.showSourcePagEditorVisible=!0},trash:e.clearAllCoverMaterial}}):e._e(),t("CoverCrop",{attrs:{imgFile:e.coverImg,cropedImgList:e.cropedImgList,cover:e.cover,showCoverStory:e.showCoverStory,coverType:e.coverType,storyDetailList:e.cover.packetMaterial.storyDetailList,sourceDynamicMediaInfo:e.sourceDynamicMediaInfo,loading:e.dynamicMaterialUploading,detailPagLoading:e.sourcePagLoading,corpPagLoading:e.corpPagLoading,bubblePagLoading:e.bubblePagLoading,useStaticBubblePic:e.useStaticBubblePic,useStaticCorpPic:e.useStaticCorpPic,getBubbleMaterial:e.getBubbleMaterial,getCorpMaterial:e.getCorpMaterial,getPagDetailMaterial:e.getPagDetailMaterial,hasAtmosphere:!!e.cover.packetMaterial?.atmosphereSource?.mediaUrl,showAtmosphereTips:e.showAtmosphereTips},on:{changeImg:e.changeImg,checkPreview:t=>e.triggerToPreview(2,t),changeGenMaterialStatus:e.handleChangeGenMaterialStatus,updateMaterial:e.handleCoverCropUpdateMaterial,updateCropedImgList:e.setCropedImgList}})],1)],1),t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label optional-label mt-1.5"},[e._v(" 封面挂件 "),t("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("p",{staticClass:"font-normal"},[e._v("拆红包页的装饰素材，会和封面图一起展示在拆红包页。")]),t("div",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[t("img",{staticStyle:{width:"100%"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/e9bfc965-0025-4ec3-b56b-5eabfd7a689c/cover-widget.png"}})])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-[2px] h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[t("div",{staticClass:"cover-file"},[t("div",{staticClass:"cover-file-uploader"},[t("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png,.zip",showUploadList:!1,beforeUpload:e.handelRecWidgetImageBeforeUpload,fileList:e.recWidgetImageList,data:{image_name:"recWidgetImage",order_id:e.cover.orderId},customRequest:e.uploadRecWidgetImage},on:{change:e.handleRecWidgetImageChange}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[e.cover.packetMaterial.recWidgetImage?.mediaUrl?t("span",[e._v("重新上传")]):t("span",[e._v("上传")])])],1)],1)]),t("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:e.coverWidgetErrorInfo}}),t("div",{staticClass:"tip mt-2 text-sm"},[e._v("图片格式：PNG；尺寸1053×1746像素；不超过300KB；")]),t("div",{staticClass:"tip mt-2 text-sm"},[e._v(" 视频格式：PNG序列帧；PNG图片尺寸1053×1746像素；将视频（1s至3s）以24fps帧率导出序列帧；全部图片打包为1个ZIP压缩包上传，压缩包不超过20MB； "),t("ZipDescPopover",{staticClass:"-ml-2"})],1),t("div",{staticClass:"tip mt-2 text-sm"},[t("p",[t("span",[e._v("挂件需在")]),t("a",{attrs:{href:`https://${e.pageHost}/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=design&targetId=cover-widget-title`,target:"_blank"}},[e._v(" 可编辑区 ")]),t("span",[e._v("内设计。")])])]),t("div",{staticClass:"mt-4 flex"},[e.recWidgetUploading||e.cover?.packetMaterial?.recWidgetImage?.mediaUrl?t("MaterialItem",{attrs:{picUrl:e.cover.packetMaterial.recWidgetImage?.mediaUrl,name:e.cover.packetMaterial.widgetImageDynamicSource?.mediaName||e.cover.packetMaterial.recWidgetImage?.mediaName,icon:e.cover.packetMaterial.widgetImageDynamicSource?.mediaType===e.CoverMediaType.Zip?"video":"pic",loading:e.recWidgetUploading},on:{trash:e.handleDeleteRecWidget}}):e._e()],1)],1),t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label optional-label mt-1.5"},[e._v(" 气泡挂件 "),t("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("p",{staticClass:"font-normal"},[e._v("红包消息气泡的装饰素材，会和封面图一起展示在聊天中的红包消息气泡上。")]),t("div",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[t("img",{staticStyle:{width:"100%"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/e9bfc965-0025-4ec3-b56b-5eabfd7a689c/bubble-widget.png"}})])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-[2px] h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)]},proxy:!0}])},[t("div",{staticClass:"cover-file"},[t("div",{staticClass:"cover-file-uploader"},[t("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png,.jpg,.jpeg",action:`${e.uploadImgUrl}?type=senderC2cWidgetImage`,fileList:e.senderC2cWidgetImageList,data:{image_name:"senderC2cWidgetImage",order_id:e.cover.orderId},showUploadList:!1,beforeUpload:e.handelSenderC2cWidgetImageBeforeUpload},on:{change:e.handleSenderC2cWidgetImageChange}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[e.cover.packetMaterial.senderC2cWidgetImage&&e.cover.packetMaterial.senderC2cWidgetImage.mediaUrl?t("span",[e._v("重新上传")]):t("span",[e._v("上传")])])],1)],1)]),t("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:e.bubbleWidgetErrorInfo}}),t("div",{staticClass:"tip mt-2 text-sm"},[t("p",[t("span",[e._v("图片格式：PNG；尺寸480×384像素；不超过300KB；挂件需在")]),t("a",{attrs:{href:`https://${e.pageHost}/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=design&targetId=bubble-widget-title`,target:"_blank"}},[e._v(" 可编辑区 ")]),t("span",[e._v("内设计。")])])]),t("div",{staticClass:"mt-4 flex"},[e.bubbleWidgetUploading||e.cover?.packetMaterial?.senderC2cWidgetImage?.mediaUrl?t("MaterialItem",{attrs:{picUrl:e.cover?.packetMaterial?.senderC2cWidgetImage?.mediaUrl,icon:"pic",name:e.cover?.packetMaterial?.senderC2cWidgetImage?.mediaName,loading:e.bubbleWidgetUploading},on:{trash:e.clearC2cWidgetPic}}):e._e()],1)],1),e.isAtmosphereUser||"wx_2999361361"===e.authorId?t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label optional-label mt-1.5"},[e._v(" 氛围素材 "),t("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap text-opblack_2"},[t("p",[e._v("上传一张氛围图片，即可在气泡、拆红包页、红包详情页分别生成氛围效果。")]),e._v(" 平台暂不支持预览氛围效果，可点击「手机预览」，在手机上扫码预览。 ")])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-[2px] h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,4206350705)})],1)]},proxy:!0}],null,!1,3557360122)},[t("div",{staticClass:"cover-file"},[t("div",{staticClass:"cover-file-uploader"},[t("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png",action:`${e.uploadImgUrl}?type=atmosphere`,fileList:e.atmosphereImageList,data:{image_name:"atmospherePag",order_id:e.cover.orderId},showUploadList:!1,beforeUpload:e.handleAtmosphereBeforeUpload},on:{change:e.handleAtmospherePagChange}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[e.cover.packetMaterial.bubbleAtmospherePag?.mediaUrl||e.cover.packetMaterial.coverAtmospherePag?.mediaUrl?t("span",[e._v("重新上传")]):t("span",[e._v("上传")])])],1)],1)]),"wx_1498025600"===e.authorId?t("div",{staticClass:"cover-file-uploader"},[t("div",[t("a-space",[t("div",[e._v(" 气泡fps "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bubbleFps,expression:"bubbleFps"}],attrs:{type:"text"},domProps:{value:e.bubbleFps},on:{input:function(t){t.target.composing||(e.bubbleFps=t.target.value)}}})]),t("div",[e._v(" 气泡quality "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bubbleQuality,expression:"bubbleQuality"}],attrs:{type:"text"},domProps:{value:e.bubbleQuality},on:{input:function(t){t.target.composing||(e.bubbleQuality=t.target.value)}}})])]),t("br"),e._v(" 文件大小: "+e._s(e.bubbleFileSize)+" "),t("br"),e._v(" Pag地址： "),t("a",{attrs:{href:e.bubbleRes,target:"_blank"}},[e._v(e._s(e.bubbleRes))])],1),t("br"),t("a-space",[t("div",[t("div",[e._v(" 详情页fps "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.detailFps,expression:"detailFps"}],attrs:{type:"text"},domProps:{value:e.detailFps},on:{input:function(t){t.target.composing||(e.detailFps=t.target.value)}}})]),t("div",[e._v(" 详情页quality "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.detailQuality,expression:"detailQuality"}],attrs:{type:"text"},domProps:{value:e.detailQuality},on:{input:function(t){t.target.composing||(e.detailQuality=t.target.value)}}})]),e._v(" 文件大小: "+e._s(e.detailFileSize)+" "),t("br"),e._v(" Pag地址： "),t("a",{attrs:{href:e.detailRes,target:"_blank"}},[e._v(e._s(e.detailRes))])])]),t("br"),t("br"),t("a-space",[t("div",[t("div",[e._v(" 封面fps "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.coverFps,expression:"coverFps"}],attrs:{type:"text"},domProps:{value:e.coverFps},on:{input:function(t){t.target.composing||(e.coverFps=t.target.value)}}})]),t("div",[e._v(" 封面quality "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.coverQuality,expression:"coverQuality"}],attrs:{type:"text"},domProps:{value:e.coverQuality},on:{input:function(t){t.target.composing||(e.coverQuality=t.target.value)}}})])]),t("br")]),e._v(" 文件大小: "+e._s(e.coverFileSize)+" "),t("br"),e._v(" Pag地址： "),t("a",{attrs:{href:e.coverRes,target:"_blank"}},[e._v(e._s(e.coverRes))]),t("br"),t("a-upload",{staticClass:"upload-hide-filename",attrs:{name:"file",accept:".png",action:`${e.uploadImgUrl}?type=atmosphere`,fileList:e.atmosphereImageList,data:{image_name:"atmospherePag",order_id:e.cover.orderId},showUploadList:!1,beforeUpload:e.handleAtmosphereBeforeUpload},on:{change:e.handleAtmospherePagChangeTest}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[e.cover.packetMaterial.bubbleAtmospherePag?.mediaUrl||e.cover.packetMaterial.coverAtmospherePag?.mediaUrl?t("span",[e._v("重新上传")]):t("span",[e._v("测试上传")])])],1)],1):e._e(),t("CoverPicUploadError",{staticClass:"mt-2",attrs:{errorInfo:e.atmosphereErrorInfo}}),t("div",{staticClass:"tip mt-2 text-sm"},[t("p",[e._v("图片格式：PNG；尺寸300x300像素；文件不超过100KB；")]),t("p",{staticClass:"mt-2"},[e._v("氛围素材上传后，红包气泡视频素材会替换为图片。")])]),t("div",{staticClass:"mt-4 flex"},[e.cover.packetMaterial.atmosphereSource?.mediaUrl||e.atmosphereUploading||e.atmosphereMaking?t("MaterialItem",{attrs:{picUrl:e.cover.packetMaterial.atmosphereSource?.mediaUrl,icon:"pic",name:e.cover.packetMaterial.atmosphereSource?.mediaName,loading:e.atmosphereUploading},on:{trash:e.handleTrashAtmosphere}}):e._e()],1)],1):e._e()],1)],1),t("div",{ref:"storyMainCard",staticClass:"main-card js-story-main-card"},[t("mp-form",{staticClass:"story-section",class:{"show-story":e.showCoverStory}},[t("mp-form-item",{class:{"mb-0":!e.showCoverStory},attrs:{label:"封面故事"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("div",{staticClass:"main-card-title",staticStyle:{"margin-bottom":"0"}},[e._v(" 封面故事 "),t("mp-popover",{attrs:{position:"up-left",width:376,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("p",{staticClass:"font-normal"},[e._v(" 在这里，你可以讲述封面创作的背后故事，可添加对应的视频、图片、文案、小程序或公众号。用户进入红包详情页即可看到你的封面故事，点击「下拉」按钮或直接下拉可完整浏览封面故事。 ")]),t("div",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[t("img",{staticStyle:{width:"100%"},attrs:{src:"https://res.wx.qq.com/t/fed_upload/ec46853b-674e-4ec8-b196-64ef10f1f0c8/example.png"}})])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)])]},proxy:!0}])},[t("mp-checkbox",{model:{value:e.showCoverStory,callback:function(t){e.showCoverStory=t},expression:"showCoverStory"}},[e._v("添加封面故事")]),t("div",{staticClass:"mt-2 text-opblack_2"},[e._v("素材上传后，「红包详情页」下拉前后都会展示封面故事。")])],1),e.showCoverStory?[t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label mt-2.5"},[t("span",[e._v("添加素材")])])]},proxy:!0}],null,!1,1650488506)},[t("StoryMake",{attrs:{storyDesc:e.cover.packetMaterial.storyDescription,cover:e.cover,setOfinderInfo:e.setOfinderInfo,OfinderInfo:e.OfinderInfo},on:{setStoryDetail:e.setStoryDetail,delStoryDetail:e.delStoryDetail,setStorySort:e.setStorySort},model:{value:e.cover.packetMaterial.storyDetailList,callback:function(t){e.$set(e.cover.packetMaterial,"storyDetailList",t)},expression:"cover.packetMaterial.storyDetailList"}})],1),t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label optional-label"},[t("span",[e._v("故事描述")])])]},proxy:!0}],null,!1,2466779544)},[t("mp-input",{staticClass:"text-input",attrs:{placeholder:"用一句话描述封面故事",maxlength:40,required:"required",countable:"countable",counter:e.storyDescCounter,multi:"multi",value:e.cover.packetMaterial.storyDescription},on:{input:e.setStoryDescription},scopedSlots:e._u([{key:"message",fn:function(){return[t("p",[e._v("请输入正确格式的故事描述")])]},proxy:!0}],null,!1,2560451451)})],1),t("AddMiniApp",{attrs:{saveVideo:e.saveVideo,clearSaveVideo:e.clearSaveVideo,setOpenStroy:e.setOpenStroy,action:(e.cover.packetMaterial.actionList&&e.cover.packetMaterial.actionList[0]&&e.cover.packetMaterial.actionList[0].actionType?e.cover.packetMaterial.actionList[0]:e.actionAuthInfo.action)||{},orderId:e.cover.orderId},on:{setAction:e.handleSetAction,genOrderId:e.generateOrderId}})]:e._e()],2)],1),t("div",{staticClass:"main-card",staticStyle:{"margin-bottom":"80px"}},[t("div",{staticClass:"main-card-title-wrapper flex-col"},[t("div",{staticClass:"mb-2 flex"},[t("div",{staticClass:"main-card-title"},[e._v(" 证明材料 "),t("mp-popover",{attrs:{position:"up-left",width:450,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("p",{staticClass:"font-normal"},[e._v(" 1. 如果你的红包封面中包含美术作品的，请上传《作品登记证书》或《著作权登记证书》的扫描件；如没有该等证书的，请提供能够证明你拥有作品著作权的其他材料，包括但不限于该作品的psd格式文件、人民法院确认该作品权属情况的生效法律文书、能够证明作品权利人情况的发表链接等等。 ")]),t("p",{staticClass:"mt-6 font-normal"},[t("span",[e._v("2. 如果你的红包封面中包含注册商标的，请上传《商标注册证》的扫描件。如涉及授权，需提供商标使用授权书")]),t("a",{attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/doc/Authorizations_3.docx"},on:{click:e.handleClickDownloadTemplate}},[e._v("下载模板")]),t("span",[e._v("。如涉及肖像，需提供图中人物的身份证明、肖像权授权书")]),t("a",{attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/doc/Authorizations_1.docx"},on:{click:e.handleClickDownloadTemplate}},[e._v("下载模板")]),t("span",[e._v("等证明材料。如涉及版权，需提供作品的版权证明、版权授权书")]),t("a",{attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/doc/Authorizations_2.docx"},on:{click:e.handleClickDownloadTemplate}},[e._v("下载模板")]),t("span",[e._v("、版权所有者主体证明等。更多内容请查看")]),t("a",{on:{click:e.goToProofInstruction}},[e._v("证明材料指引")]),t("span",[e._v("。")])])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"ml-1 h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}])})],1),t("div",[t("a",{staticClass:"tip-link",attrs:{href:`https://${e.pageHost}/cgi-bin/mmcover-bin/readtemplate?t=page/index#/doc?page=design&index=4`,target:"_blank"}},[e._v(" 证明材料指引 ")]),t("a",{staticClass:"tip-link",staticStyle:{"margin-left":"8px"},attrs:{href:"https://weixinredpacket.wxqcloud.qq.com/authorized/0121/%E6%8E%88%E6%9D%83%E4%B9%A6%E6%A8%A1%E6%9D%BF.zip",tatget:"_blank"},on:{click:e.handleClickDownloadTemplate}},[e._v(" 下载授权书模板 ")])])])]),t("mp-form",[t("mp-form-item",{attrs:{prop:"evidence",label:"证明材料"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label optional-label mt-1.5"},[t("span",[e._v("证明材料")])])]},proxy:!0}])},[t("div",{staticClass:"cover-file"},[t("div",{staticClass:"cover-file-uploader"},[t("a-upload",{ref:"fileUpload",staticClass:"evidence-upload",attrs:{name:"file",beforeUpload:e.handleEnvidenceBeforeUpload,customRequest:e.uploadFile,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!0},fileList:e.evidenceFileList},on:{change:e.handleCoverEvidenceFileChange}},[t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{type:"default",size:"mini"}},[e.cover.proofMaterial.mediaUrl?t("span",[e._v("重新上传")]):t("span",[e._v("上传文件")])])],1),e.showEvidenceUploadError?t("div",{staticClass:"upload-error-tip mt-1 text-primary"},[e._v("上传失败，请重试")]):e._e(),t("div",{staticClass:"tip mt-2"},[e._v(" 若封面中包含美术作品、注册商标、人物肖像或涉及版权，需在证明文件中上传《作品登记证书》、《商标注册证》、商标/肖像权/版权授权书等证明材料，授权书有效期需截止到封面提审后的六个月及以上。 ")]),t("div",{staticClass:"tip"},[e._v("多个文件请打包压缩上传，文件需不超过100MB。")])],1)])])],1)],1),t("div",{staticClass:"options fixed bottom-0 flex justify-end bg-white p-8"},[e.isFormReady?t("mp-button",{staticClass:"button",on:{click:e.handleMobilePreview}},[e._v("手机预览")]):t("mp-popover",{attrs:{position:"down-center",width:17*e.previewDisabledContent.length,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-button",{staticClass:"button",attrs:{disabled:!0}},[e._v("手机预览")])]},proxy:!0}],null,!1,2398139068)},[t("div",{staticClass:"text-center"},[e._v(e._s(e.previewDisabledContent))])]),t("mp-button",{staticClass:"button save-button",attrs:{disabled:!e.canSave,loading:1===e.saveStatus},on:{click:e.save}},[1===e.saveStatus?t("span",[e._v("保存中")]):e._e(),e.saveStatus<1?t("span",[e._v("保存")]):e._e(),2===e.saveStatus?t("span",[e._v("已保存")]):e._e()]),e.statusCount>2&&!e.isInnerUser?t("mp-popover",{attrs:{position:"down-center",content:"最多可同时在审3款红包封面，待审核完成后可继续提交。",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-button",{staticClass:"button",attrs:{disabled:!0,type:"primary"},on:{click:e.submit}},[e._v("提交")])]},proxy:!0}],null,!1,2955936102)}):e.isCanEdit?t("mp-button",{staticClass:"button submit-button",attrs:{disabled:!e.canSubmit,loading:1===e.submitStatus,type:"primary"},on:{click:e.submit}},[e._v("提交")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无编辑封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"button submit-button",attrs:{disabled:!0,type:"primary"},on:{click:e.submit}},[e._v("提交")])]},proxy:!0}])})],1),t("CoverPreviewDialog",{attrs:{cover:e.cover},model:{value:e.showPreviewQrcodeDialog,callback:function(t){e.showPreviewQrcodeDialog=t},expression:"showPreviewQrcodeDialog"}})],1),t("div",{staticClass:"ml-5 mt-14"},[e.previewCoverReady?t("preview-cover",{ref:"previewCoverRef",staticClass:"sticky top-20",attrs:{showCoverStory:e.showCoverStory,cropedImgList:e.cropedImgList,cover:e.cover,coverImageDynamicType:e.cover.packetMaterial?.coverImageDynamicType,baseInfoLoading:e.bubblePagLoading,corpInfoLoading:e.corpPagLoading,coverDetailLoading:e.sourcePagLoading,coverInfoLoading:e.coverDynamicPagLoading||e.dynamicRecWidgetUploading,isAtmosphereCover:!(!e.cover.packetMaterial.atmosphereSource?.mediaUrl&&!e.cover.packetMaterial.bubbleAtmospherePag?.mediaUrl)}}):e._e()],1),t("WidgetDescDialog",{model:{value:e.widgetDescDialogVisible,callback:function(t){e.widgetDescDialogVisible=t},expression:"widgetDescDialogVisible"}}),t("source-media-editor-dialog",{attrs:{"file-url":e.sourceDynamicMediaInfo.objectUrl||e.sourceDynamicMediaInfo.url,"file-type":e.sourceDynamicMediaInfo.type,cropperSourceImgInfo:e.cropperSourceImgInfo,"file-name":e.sourceDynamicMediaInfo.name},on:{sureDynamic:e.handleSourcePagSure,surePic:e.handleSurePic},model:{value:e.showSourcePagEditorVisible,callback:function(t){e.showSourcePagEditorVisible=t},expression:"showSourcePagEditorVisible"}})],1)},zs=[],Vs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-crop relative"},[e.cropedImgList?.bubbleImageUrl?t("OtherMaterial",{attrs:{cover:e.cover,detailPagLoading:e.detailPagLoading,corpPagLoading:e.corpPagLoading,bubblePagLoading:e.bubblePagLoading,material:e.cropedImgList,useStaticBubblePic:e.useStaticBubblePic,useStaticCorpPic:e.useStaticCorpPic,showAtmosphereBubbleTips:e.showAtmosphereTips},on:{editImg:e.editImg,checkPreview:e.checkPreview}}):e._e(),t("mp-dialog",{staticClass:"covercrop-dialog",attrs:{title:"编辑素材大小与位置",value:e.showEditDialog,width:1120},on:{close:e.handleCropDialogClose,"visible-change":e.handleDialogVisible},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer p-4"},[t("mp-button",{staticClass:"cancel mr-4",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:e.uploadLoading},on:{click:function(t){return t.preventDefault(),e.handleSure.apply(null,arguments)}}},[e._v("确定")])],1)]},proxy:!0}])},["dynamic"===e.mode&&e.showEditDialog?t("div",{staticClass:"content"},["bubble"===e.curEditImgName?t("media-editor",{key:"bubble",ref:"bubbleMediaEditor",attrs:{fileType:e.CoverMediaType.Pag,fileUrl:e.bubbleMediaEditorFileUrl,onlyShow:e.bubbleDynamicFromUpload||!!e.bubbleTemporaryDynamic?.pagUrl,ratios:e.bubbleRatios,workAreaWidth:304,workAreaHeight:304,frameLineWidth:289,frameLineHeight:70,previewType:"bubble"},on:{cropChange:e.handleCropChange,changePoint:e.handleChangePoint},scopedSlots:e._u([{key:"edit-area",fn:function(){return[t("div",{staticClass:"mt-6 w-[336px]"},[t("CoverCropBubbleTips",{attrs:{mode:"dynamic",isDynamicCover:!0}})],1)]},proxy:!0}],null,!1,2745640898)}):e._e(),"detail"===e.curEditImgName?t("media-editor",{key:"detail",ref:"detailMediaEditor",attrs:{fileType:e.CoverMediaType.Pag,fileUrl:e.detailMediaEditorFileUrl,onlyShow:e.detailDynamicFromUpload||!!e.detailTemporaryDynamic?.pagUrl,ratios:e.detailRatios,workAreaWidth:304,workAreaHeight:304,frameLineWidth:289,frameLineHeight:70,previewType:"detail"},on:{cropChange:e.handleCropChange,changePoint:e.handleChangePoint},scopedSlots:e._u([{key:"edit-area",fn:function(){return[t("div",{staticClass:"mt-6 w-[336px]"},[t("CoverCropDetailTips",{attrs:{mode:"dynamic",isDynamicCover:!0}})],1)]},proxy:!0}],null,!1,3113404013)}):e._e(),"corp"===e.curEditImgName?t("media-editor",{key:"corp",ref:"corpMediaEditor",attrs:{fileType:e.CoverMediaType.Pag,fileUrl:e.corpMediaEditorFileUrl,onlyShow:e.corpDynamicFromUpload||!!e.corpTemporaryDynamic?.pagUrl,ratios:e.corpRatios,workAreaWidth:304,workAreaHeight:304,frameLineWidth:289,frameLineHeight:70,previewType:"corp"},on:{cropChange:e.handleCropChange,changePoint:e.handleChangePoint},scopedSlots:e._u([{key:"edit-area",fn:function(){return[t("div",{staticClass:"mt-6 w-[336px]"},[t("CoverCropCorpTips",{attrs:{mode:"dynamic",isDynamicCover:!0}})],1)]},proxy:!0}],null,!1,1845104050)}):e._e()],1):t("div",{staticClass:"edit-wrap relative mx-auto flex w-[830px] justify-between"},[t("div",{staticClass:"edit-area"},[t("div",{staticClass:"mb-4 text-sm text-opblack_2"},[e._v("编辑素材")]),t("div",{staticClass:"content-wrapper"},[e.imgFile&&(e.imgFile.dataUrl||e.imgFile.url)?t("div",{staticClass:"content p-6",style:"height:"+e.height+"px"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.curEditImgName,expression:"curEditImgName === 'detail'"}],staticClass:"edit-content"},[e.detailImg||e.imgFile?t("img",{ref:"detailSource",staticClass:"edit-img",attrs:{src:e.detailImgUrl}}):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:"bubble"===e.curEditImgName,expression:"curEditImgName === 'bubble'"}],staticClass:"edit-content"},[e.bubbleImg||e.imgFile?t("img",{ref:"bubbleSource",staticClass:"edit-img",attrs:{src:e.bubbleImgUrl}}):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:"corp"===e.curEditImgName,expression:"curEditImgName === 'corp'"}],staticClass:"edit-content"},[e.corpImg||e.imgFile?t("img",{ref:"corpSource",staticClass:"edit-img",attrs:{src:e.corpImgUrl}}):e._e()])]):e._e()]),t("div",{staticClass:"mt-6"},["bubble"===e.curEditImgName?t("CoverCropBubbleTips",{attrs:{mode:"static",isDynamicCover:!!e.sourceImageDynamicMediaUrl&&!e.hasAtmosphere}}):e._e(),"detail"===e.curEditImgName?t("CoverCropDetailTips",{attrs:{mode:"static",isDynamicCover:!!e.sourceImageDynamicMediaUrl}}):e._e(),"corp"===e.curEditImgName?t("CoverCropCorpTips",{attrs:{mode:"static",isDynamicCover:!!e.sourceImageDynamicMediaUrl}}):e._e()],1)]),t("div",{staticClass:"preview-area"},[t("div",{staticClass:"mb-4 text-sm text-opblack_2",class:e.previewTitleClass},[e._v("预览素材")]),t("div",{staticClass:"content px-6",class:{"h-[339px]":"bubble"===e.curEditImgName}},[t("div",{staticClass:"relative overflow-hidden",class:e.curEditImgName},["bubble"===e.curEditImgName?t("div",[t("div",{staticClass:"preview-content-bubble"}),e.cover.packetMaterial.senderC2cWidgetImage?.mediaUrl?t("widget-bubble-img",{staticClass:"relative left-auto right-0 h-[144px] w-auto",attrs:{"bubble-url":e.coverToolPics.crop2,"widget-url":e.senderC2cWidgetImageUrl||e.coverToolPics.example_5}}):t("img",{staticClass:"crop2 relative",attrs:{src:i(20005)}})],1):e._e(),"corp"===e.curEditImgName?t("div",{staticClass:"overflow-hidden",style:{"--corp-preivew-width":"252px",width:"var(--corp-preivew-width)"}},[t("div",{staticClass:"preview-content-corp"}),t("img",{staticClass:"relative w-full rounded border border-solid border-white",attrs:{src:e.corpUrl}})]):e._e(),"detail"===e.curEditImgName?t("div",{staticClass:"rounded-lg border-[1px] border-solid border-opblack_4",style:{"--detail-preivew-width":"252px",width:"var(--detail-preivew-width)"}},[t("div",{staticClass:"preview-content-detail"}),t("img",{staticClass:"relative w-full rounded border border-solid border-white",attrs:{src:e.detailUrl}})]):e._e()])])])]),t("div",{staticClass:"mt-4",class:e.uploadBtnClass},[t("a-upload",{directives:[{name:"show",rawName:"v-show",value:"bubble"===e.curEditImgName,expression:"curEditImgName === 'bubble'"}],attrs:{name:"file",accept:e.acceptType,action:e.uploadImgUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},beforeUpload:e.handelBeforeUpload,customRequest:e.handleUpload,fileList:e.bubbleFileList},on:{change:e.handleUploadChange}},[t("mp-button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault()}}},[t("span",[e._v("更换素材")])])],1),t("a-upload",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.curEditImgName,expression:"curEditImgName === 'detail'"}],attrs:{name:"file",accept:e.acceptType,action:e.uploadImgUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},beforeUpload:e.handelBeforeUpload,customRequest:e.handleUpload,fileList:e.detailFileList},on:{change:e.handleUploadChange}},[t("mp-button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault()}}},[t("span",[e._v("更换素材")])])],1),t("a-upload",{directives:[{name:"show",rawName:"v-show",value:"corp"===e.curEditImgName,expression:"curEditImgName === 'corp'"}],attrs:{name:"file",accept:e.acceptType,action:e.uploadImgUrl,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},beforeUpload:e.handelBeforeUpload,customRequest:e.handleUpload,fileList:e.corpFileList},on:{change:e.handleUploadChange}},[t("mp-button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault()}}},[t("span",[e._v("更换素材")])])],1)],1)])],1)},Js=[],Ks=i(33129),Ys=i.n(Ks),Xs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"select-none"},[t("div",{staticClass:"mb-[7px] pl-2 text-xs text-opblack_2"},[e._v("封面图将同时应用至以下页面：")]),t("div",{staticClass:"flex"},[t("div",{staticClass:"receive-part flex w-28 flex-col items-center"},[t("div",{staticClass:"receive-thumb thumb",on:{click:function(t){return e.clickThumb("cover")}}},[t("img",{staticClass:"absolute left-[6px] top-[11px] h-[131px] w-[80px]",attrs:{src:e.cover?.packetMaterial?.openImage?.mediaUrl||e.material.openImageUrl}}),t("img",{staticClass:"absolute left-[17px] top-[32px] z-10 h-[20px] w-[58px]",attrs:{src:i(75950)}})]),t("div",{staticClass:"part-name"},[e._v("拆红包页")])]),t("div",{staticClass:"bubble-part flex w-28 flex-col items-center"},[t("div",{staticClass:"bubble-thumb thumb",on:{click:function(t){return e.clickThumb("bubble")}}},[t("img",{staticClass:"relative z-10 h-full w-full",attrs:{src:i(72190)}}),t("img",{staticClass:"absolute left-[16px] top-[28px] h-[23px] w-[63px]",attrs:{src:e.material.bubbleImageUrl}}),e.bubblePagLoading||e.detailPagLoading?t("div",{staticClass:"weui-desktop-loading absolute bottom-2 left-2 z-20 h-4 w-4"}):t("div",{staticClass:"absolute bottom-1 left-1 z-20 flex h-6 w-6 cursor-pointer items-center justify-center text-opblack_1 hover:rounded hover:bg-opblack_4",on:{click:function(t){return e.editImg("bubble",t)}}},[t("mask-icon",{staticClass:"absolute h-4 w-4",attrs:{name:"editbtn"}})],1)]),t("div",{staticClass:"part-name"},[e._v("红包气泡")]),e.useStaticBubblePic||e.showAtmosphereBubbleTips?t("div",{staticClass:"flex"},[t("div",{staticClass:"text-xs text-opblack_2"},[e._v("已替换为首帧图片")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-px h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,222612927)},[t("div",{staticClass:"text-opblack_2"},[e._v(" "+e._s(e.showAtmosphereBubbleTips?"上传氛围素材后，红包气泡视频素材会替换为视频首帧图片。":"动态素材过大，无法应用在此页面。可单独上传时长更短、画面更简单的素材。")+" ")])])],1):e._e()]),t("div",{staticClass:"detail-part flex w-28 flex-col items-center"},[t("div",{ref:"detailThumb",staticClass:"detail-thumb thumb rounded-[3px]",style:e.storyPreviewStyle,on:{click:function(t){return e.clickThumb("detail")}}},[t("img",{staticClass:"relative z-10 h-full w-full",attrs:{src:i(40183)}}),t("img",{staticClass:"absolute left-1/2 top-0 w-full",style:{transform:"translateX(-50%)",top:"-13.35%"},attrs:{src:e.detailImgUrl}}),e.detailPagLoading?t("div",{staticClass:"weui-desktop-loading absolute bottom-2 left-2 z-20 h-4 w-4"}):t("div",{staticClass:"absolute bottom-1 left-1 z-20 flex h-6 w-6 cursor-pointer items-center justify-center text-opblack_1 hover:rounded hover:bg-opblack_4",on:{click:function(t){return e.editImg("detail",t)}}},[t("mask-icon",{staticClass:"absolute h-4 w-4",attrs:{name:"editbtn"}})],1)]),t("div",{staticClass:"part-name"},[t("span",{staticClass:"mb-1 block"},[e._v(" 红包详情页")]),e.storyDetailList?.length?t("span",{staticClass:"inline-block w-[92px]"},[t("span",{staticClass:"block"},[e._v("已替换为")]),t("a",{on:{click:e.goStoryArea}},[e._v("封面故事素材")])]):e._e()])]),t("div",{staticClass:"corp-part flex w-28 flex-col items-center"},[t("div",{staticClass:"corp-thumb thumb",on:{click:function(t){return e.clickThumb("corp")}}},[t("img",{staticClass:"relative z-10 h-full w-full",attrs:{src:i(41854)}}),t("img",{staticClass:"absolute left-[3px] top-[59px] h-[21px] w-[85px]",attrs:{src:e.material.corpImageUrl}}),e.corpPagLoading||e.detailPagLoading?t("div",{staticClass:"weui-desktop-loading absolute bottom-2 left-2 z-20 h-4 w-4"}):t("div",{staticClass:"absolute bottom-1 left-1 z-30 flex h-6 w-6 cursor-pointer items-center justify-center text-opblack_1 hover:rounded hover:bg-opblack_4",on:{click:function(t){return e.editImg("corp",t)}}},[t("mask-icon",{staticClass:"absolute h-4 w-4",attrs:{name:"editbtn"}})],1)]),t("div",{staticClass:"part-name"},[e._v("发红包页")]),e.useStaticCorpPic?t("div",{staticClass:"flex"},[t("div",{staticClass:"text-xs text-opblack_2"},[e._v("已替换为首帧图片")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("mask-icon",{staticClass:"relative top-px h-3.5 w-3.5 text-opblack_2",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,222612927)},[t("div",{staticClass:"text-opblack_2"},[e._v("动态素材过大，无法应用在此页面。可单独上传时长更短、画面更简单的素材。")])])],1):e._e()])])])},er=[],tr=a.ZP.extend({components:{},props:{showAtmosphereBubbleTips:Boolean,useStaticBubblePic:Boolean,useStaticCorpPic:Boolean,material:{type:Object||null},cover:{type:Object,default(){return{}}},detailPagLoading:Boolean,corpPagLoading:Boolean,bubblePagLoading:Boolean},data(){return{openIconActivePic:Ge.is.open_icon_active}},computed:{storyPreviewStyle(){return{"background-image":`url(${this.isVideoStory?this.fuzzyImgUrl:""})`}},fuzzyImgUrl(){return this.firstStoryMedia?.mediaFuzzyUrl},isVideoStory(){return 2===this?.firstStoryMedia?.mediaType},storyDetailList(){return this.cover.packetMaterial.storyDetailList},storyMediaList(){return this.storyDetailList.map((e=>e.media))},firstStoryMedia(){return this.storyMediaList?.[0]},detailImgUrl(){const{firstStoryMedia:e}=this;return e?1===e.mediaType?e.mediaUrl:e.mediaThumbnailUrl:this.material.detailImageUrl}},methods:{goStoryArea(){const e=document.querySelector(".js-story-main-card"),t=document.querySelector(".js-story-make");e instanceof HTMLElement&&e.scrollIntoView({behavior:"smooth",block:"end"}),t instanceof HTMLElement&&(t.classList.add("table-row-highlight"),setTimeout((()=>{t.classList.remove("table-row-highlight")}),2e3))},clickThumb(e){this.$emit("checkPreview",e)},editImg(e,t){t.stopPropagation(),this.$emit("editImg",e)}}}),ir=tr,ar=(0,h.Z)(ir,Xs,er,!1,null,"74c6230f",null),sr=ar.exports,rr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"media-editor flex items-start justify-center"},[t("div",{staticClass:"mx-[110px]"},[e.previewType?t("div",{staticClass:"editor-title"},[e._v("编辑素材")]):e._e(),t("div",{ref:"workAreaWrapper",staticClass:"mx-auto box-content flex items-center justify-center rounded-2xl px-4 align-middle",class:e.onlyShow?"bg-opblack_4":"bg-opblack_2",style:{width:`${e.workAreaWidth}px`,height:`${e.workAreaHeight}px`}},[t("div",{ref:"workArea",staticClass:"work-area relative",style:{width:`${e.availWidth}px`,height:`${e.availHeight}px`}},[e.fileType===e.CoverMediaType.Mp4?t("video-display",{ref:"videoPlayer",attrs:{videoUrl:e.fileUrl}}):t("pag-display",{ref:"pagPlayer",staticClass:"pag-display",attrs:{autoInit:!0,name:`${e.previewType}mediaEditorPag`,active:!0,url:e.fileUrl,destroyAfterInit:!0},on:{ready:e.handlePagReady}})],1),e.showCurFrame&&e.curFrame?t("img",{staticClass:"absolute",style:{width:`${e.availWidth}px`,height:`${e.availHeight}px`},attrs:{src:e.curFrame}}):e._e()]),e.fileUrl&&!e.onlyShow&&"sourceMaterial"===e.editorType?t("pag-frame-line",{ref:"pagFrameLineRef",staticClass:"mx-auto mt-4",attrs:{target:e.playerRef,previewTarget:e.previewPlayerRef,width:e.frameLineWidth,height:e.frameLineHeight,"file-url":e.fileUrl,"file-type":e.fileType,curPlayTime:e.curPlayTime,previewType:e.previewType},on:{ready:e.pagFrameLineReady,changePoint:e.handleChangePoint}}):e._e(),e.isMediaReady&&e.playerDom&&!e.onlyShow?t("Crop",{ref:"cropRef",attrs:{target:e.playerDom,mode:"full",workArea:e.$refs.workArea,ratios:e.ratios,cropRectMode:"full","original-target-size":{width:e.videoWidth,height:e.videoHeight}},nativeOn:{cropChange:function(t){return e.handleCropRectChange.apply(null,arguments)}}}):e._e(),e._t("edit-area")],2),e.previewType?t("div",{staticClass:"mx-[110px] shrink-0"},[t("div",{staticClass:"editor-title"},[e._v("预览素材")]),t("div",{staticClass:"relative overflow-hidden rounded-lg",style:e.previewWrapperStyle},["bubble"===e.previewType?t("img",{staticClass:"absolute left-0 top-0 z-10 h-full w-full",attrs:{src:i(20005)}}):e._e(),"corp"===e.previewType?t("img",{staticClass:"absolute left-0 top-0 z-10 h-[506px] w-[234px]",style:{width:`${e.corpPreviewWidth}px`,height:`${e.corpPreviewHeight}px`},attrs:{src:e.corpUrl}}):e._e(),"detail"===e.previewType?t("img",{staticClass:"absolute left-0 top-0 z-10 h-[506px] w-[234px]",style:{width:`${e.detailPreviewWidth}px`,height:`${e.detailPreviewHeight}px`},attrs:{src:e.detailUrl}}):e._e(),t("div",{staticClass:"absolute overflow-hidden",style:e.previewPlayerWrapperStyle},[t("pag-display",{ref:"previewPagPlayer",class:e.previewPayPlayerClass,style:e.previewStyle,attrs:{name:`${e.previewType}RightmediaEditorPag`,url:e.fileUrl,active:!0,autoplay:!0,loop:!0,showType:"preview"},on:{ready:e.handlePreviewPagReady}})],1)])]):e._e()])},or=[],nr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex justify-center",style:{height:`${e.height}px`,"--Line-Border-Width":`${e.sideWidth}px`}},[e.loading?t("div",{staticClass:"flex h-full w-full items-center justify-center"},[t("div",{staticClass:"weui-desktop-loading animate-spin"})]):[t("a",{staticClass:"mr-2 flex h-full w-11 cursor-pointer items-center justify-center rounded-md bg-opblack_2 hover:bg-opblack_3",on:{click:e.togglePlay}},["pause"===e.playStatus?t("mask-icon",{staticClass:"h-5 w-5 text-white",attrs:{name:"play"}}):t("mask-icon",{staticClass:"h-5 w-5 text-white",attrs:{name:"pause"}})],1),t("div",{ref:"parentWrapperRef",staticClass:"parent-wrapper relative h-full shrink-0 select-none overflow-x-auto overflow-y-hidden",style:{width:`${e.width}px`,"padding-left":`${e.sideWidth}px`,"padding-right":`${e.sideWidth}px`}},[t("div",{ref:"parent",staticClass:"parent relative flex w-full"},e._l(e.frameList,(function(e,i){return t("img",{key:i,staticClass:"absolute h-full",style:{transform:`translateX(${100*i}%)`},attrs:{src:e}})})),0),t("div",{ref:"selectRangeRef",staticClass:"select-range absolute left-0 top-0 z-10 cursor-grab overflow-hidden",style:{height:`${e.height}px`,width:`${e.selectRangeWidth}px`}},[t("span",{staticClass:"absolute inset-x-0 top-0 z-[1000] inline-block text-center text-white",staticStyle:{transform:"scale(0.9) translateY(-6%)"}},[e._v(e._s(e.cutedDuration)+"秒")]),t("div",{ref:"leftSide",staticClass:"side leftSide active",style:{width:`${e.sideWidth}px`,left:"0px"}},[t("mask-icon",{staticClass:"h-4 w-2 text-opwhite_0",attrs:{name:"leftarrow"}})],1),[t("div",{staticClass:"top-border inset-x-0 top-0 text-center text-xs",style:{height:`${e.sideWidth}px`}}),t("div",{staticClass:"bottom-border inset-x-0 bottom-0",style:{height:`${e.sideWidth}px`}})],t("div",{ref:"rightSide",staticClass:"side rightSide active",style:{width:`${e.sideWidth}px`,right:"0px"}},[t("mask-icon",{staticClass:"h-4 w-2 text-opwhite_0",attrs:{name:"rightarrow"}})],1),e.showProgressLine?t("div",{ref:"progressLine",staticClass:"progressLine",style:{left:`${e.currentTimePoi}%`}}):e._e()],2),t("div",{ref:"leftMaskRef",staticClass:"time-mask left-mask left-0",style:{width:`${e.leftX+4}px`}}),t("div",{ref:"rightMaskRef",staticClass:"time-mask right-mask right-0",style:{left:e.leftX+e.selectRangeWidth-4+"px",width:e.realTotalWidth-e.leftX-e.selectRangeWidth+4+"px"}})])]],2)},cr=[];const lr=1,dr=3;var pr=a.ZP.extend({components:{},props:{target:Object,previewTarget:Object,width:{type:Number,default:325},height:{type:Number,default:64},fileUrl:String,previewType:String,fileType:Number},data(){return{loading:!1,frameList:[],currentTime:0,duration:0,sideWidth:16,showProgressLine:!1,mediaWidth:0,mediaHeight:0,realTotalWidth:0,playStatus:"pause",selectRangeWidth:0,startTime:0,leftX:0}},computed:{currentTimePoi(){return(this.currentTime-this.startTime)/this.cutedDuration*100},cutedDuration(){const e=this.selectRangeWidth/this.realTotalWidth,t=Number((this.duration*e).toFixed(2));return t||0}},watch:{target:{immediate:!0,handler(e){e&&(this.target.$on("timeupdate",(e=>{this.showProgressLine=!0,this.currentTime=e.currentTime})),this.target.$on("playing",(()=>{this.playStatus="play"})),this.target.$on("pause",(()=>{this.playStatus="pause"})),this.target.$on("ended",(()=>{this.playStatus="pause"})))}}},methods:{handleParentWrapperClick(e){if(console.log(e.target.classList),!e.target.classList.contains("time-mask"))return;e.stopImmediatePropagation(),console.log("click"),"play"===this.playStatus&&this.target?.pause();const{parentWrapperRef:t,selectRangeRef:i}=this.$refs;if(t instanceof HTMLElement&&i instanceof HTMLElement){const a=t.getBoundingClientRect(),s=i.getBoundingClientRect();let r;console.log(e.clientX,s.left),e.clientX>s.left+s.width&&(console.log("左侧"),r=e.clientX-a.left+t.scrollLeft-s.width),e.clientX<s.left&&(r=e.clientX-a.left+t.scrollLeft),Number(r)>=0&&(i.style.left=`${r}px`,this.getSelectRangePoiInfo())}},getSelectRangePoiInfo(){const{parentWrapperRef:e,selectRangeRef:t}=this.$refs;e instanceof HTMLElement&&t instanceof HTMLElement&&(this.startTime=Number((t.offsetLeft/this.realTotalWidth*this.duration).toFixed(2)),this.leftX=t.offsetLeft),this.$emit("changePoint",{startTime:this.startTime,duration:this.cutedDuration})},async togglePlay(){Promise.all([this.target?.togglePlay(this.startTime,this.cutedDuration),this.previewTarget?.togglePlay(this.startTime,this.cutedDuration)])},async init(){this.frameList=[],this.playStatus="pause",await this.getMediaInfo(),await this.initFrameList(),await this.$nextTick(),await this.initFrameLine(),this.$emit("ready")},async getMediaInfo(){const e=await(0,Xe.o)(this.fileUrl,de.Je[this.fileType]);if(e){const{duration:t,width:i,height:a}=e;this.mediaWidth=i,this.mediaHeight=a,this.duration=t}},async initFrameList(){this.loading=!0;let e=20;this.duration>10&&(e=this.duration+10);try{if(this.width<500){const t=this.mediaHeight/this.mediaWidth,i=this.$refs.parentWrapperRef,a=(i.offsetHeight-2*this.sideWidth)/t,s=Math.floor((this.width-2*this.sideWidth)/a);e=s}const t=await(0,Xe.db)({url:this.fileUrl,type:de.Je[this.fileType]},e);this.frameList=t}finally{this.loading=!1}},async initSelectRange(){await this.$nextTick();const e=this.$refs.selectRangeRef,t=this.$refs.parentWrapperRef,i=t.scrollWidth;this.duration<=dr+.2?this.selectRangeWidth=this.realTotalWidth:this.selectRangeWidth=this.realTotalWidth*(dr/this.duration),this.getSelectRangePoiInfo(),e.onmousedown=a=>{a.stopImmediatePropagation();const s=a.clientX-(e.getBoundingClientRect().left-t.getBoundingClientRect().left),r="hidden"===t.style.overflow,o=r?t.offsetWidth:i;let n=!1,c=a.clientX,l=a.clientX;const d=setInterval((()=>{const i=l-s+t.scrollLeft,a=t.scrollLeft+t.offsetWidth===o,c=0===e.offsetLeft,d=e.getBoundingClientRect(),p=t.getBoundingClientRect();i<0?e.style.left="0px":i+this.selectRangeWidth>=o?e.style.left=o-this.selectRangeWidth+"px":e.style.left=`${i}px`,d.left-p.left<20&&0!==t.scrollLeft&&!c&&!r&&(t.scrollLeft-=10),t.offsetWidth-(d.left-p.left+this.selectRangeWidth)<20&&!a&&n&&!r&&(t.scrollLeft+=10),this.getSelectRangePoiInfo()}),16);document.onmousemove=e=>{n=c-e.clientX<0,l=e.clientX,c=e.clientX},document.onmouseup=()=>{clearInterval(d);const i=e.getBoundingClientRect(),a=t.getBoundingClientRect();if(i.left+i.width>a.right){const s=i.left+i.width-a.right;t.scrollLeft+t.offsetWidth+s>o?e.style.left=o-this.selectRangeWidth+"px":t.scrollLeft+=s}else if(i.left<a.left){const e=Math.min(a.left-i.left,t.scrollLeft);t.scrollLeft-=e}document.onmousemove=null,document.onmouseup=null}}},async initSlide(){const e=this.$refs.leftSide,t=this.$refs.rightSide,i=this.$refs.selectRangeRef,a=this.realTotalWidth*(lr/this.duration),s=this.realTotalWidth*(dr/this.duration);e.onmousedown=e=>{e.stopImmediatePropagation(),"play"!==this.playStatus&&(this.showProgressLine=!1);let t=e.clientX;const r=i.getBoundingClientRect(),o=i.offsetLeft,n=setInterval((()=>{let e=Math.abs(r.left+r.width-t),n=o+(r.width-e);n<=0&&(n=0,e=this.selectRangeWidth),e<a?(e=a,n=o+(r.width-e)):e>s&&(e=s),this.selectRangeWidth=e,i.style.left=`${n}px`,this.getSelectRangePoiInfo()}),16);document.onmousemove=e=>{t=e.clientX},document.onmouseup=()=>{clearInterval(n),document.onmousemove=null,document.onmouseup=null}},t.onmousedown=e=>{const t=this.$refs.parentWrapperRef;e.stopImmediatePropagation(),"play"!==this.playStatus&&(this.showProgressLine=!1);let r=e.clientX;const o=setInterval((()=>{const e=t.getBoundingClientRect();r>e.left+t.offsetWidth&&(r=e.left+t.offsetWidth);let o=Math.abs(i.getBoundingClientRect().left-r);o<a?o=a:o>s&&(o=s),this.selectRangeWidth=o,this.getSelectRangePoiInfo()}),16);document.onmousemove=e=>{r=e.clientX},document.onmouseup=()=>{clearInterval(o),document.onmousemove=null,document.onmouseup=null}}},async initTimeMask(){const e=this.$refs.leftMaskRef,t=this.$refs.rightMaskRef,i=this.$refs.parentWrapperRef,a=i.scrollWidth;e.onmousedown=e=>{e.stopImmediatePropagation();const t="hidden"===i.style.overflow;let s=0;const r=t?i.offsetWidth:a;let o=!1,n=e.clientX,c=e.clientX;const l=setInterval((()=>{const e=i.scrollLeft+i.offsetWidth===r,t=0===i.scrollLeft;e&&!o||t&&o||(i.scrollLeft+=-s)}));document.onmousemove=e=>{o=n-e.clientX<0,c=e.clientX,s=c-n,n=e.clientX},document.onmouseup=()=>{clearInterval(l),document.onmousemove=null,document.onmouseup=null}},t.onmousedown=e=>{e.stopImmediatePropagation();const t="hidden"===i.style.overflow;let s=0;const r=t?i.offsetWidth:a;let o=!1,n=e.clientX,c=e.clientX;const l=setInterval((()=>{const e=i.scrollLeft+i.offsetWidth===r,t=0===i.scrollLeft;e&&!o||t&&o||(i.scrollLeft+=-s)}));document.onmousemove=e=>{o=n-e.clientX<0,c=e.clientX,s=c-n,n=e.clientX},document.onmouseup=()=>{clearInterval(l),document.onmousemove=null,document.onmouseup=null}}},initFrameLine(){const e=this.$refs.parentWrapperRef;e instanceof HTMLElement&&this.width<500&&(e.style.overflow="hidden"),this.realTotalWidth=e.scrollWidth,this.initSelectRange(),this.initSlide(),this.initTimeMask()}}}),ur=pr,hr=(0,h.Z)(ur,nr,cr,!1,null,"69b3c10e",null),mr=hr.exports,gr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"tool-crop"},[t("CropRect",{ref:"cropRect",attrs:{ratio:e.$data._activeRatioValue,rootContainer:e.workArea,target:e.target,minCropSize:100,showMask:e.showMask,showMiddleControls:!1,showSelection:e.showSelection,originalTargetSize:e.originalTargetSize},on:{cropRectReady:e.handleCropRectReady},nativeOn:{ratioChanged:function(t){return e.handleCropRatioChange.apply(null,arguments)},cropRectChange:function(t){return e.handleCropRectChange.apply(null,arguments)},cropRectChangeExternal:function(t){return e.handleCropRectChangeExternal.apply(null,arguments)}}})],1)},vr=[],fr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"components_croprect",style:e.componentStyles},[e._l(4,(function(e){return t("div",{key:e,staticClass:"mask",attrs:{"data-index":e}})})),t("Selection",{ref:"selection",style:e.selectionStyles,attrs:{ratio:e.computedRatio,"selection-bounds":e.$data._selectionBounds,"show-grid":e.showGrid,"show-area":e.showArea,"limit-width":e.$data._limitBounds.width,"limit-height":e.$data._limitBounds.height,rotation:e.rotation,"show-remove":e.showSelectionRemove,"show-rotate":e.showSelectionRotate,"show-middle-controls":e.showMiddleControls,"min-crop-size":e.minCropSize},on:{updateBounds:e.handleUpdateBounds}})],2)},yr=[],_r=(i(82801),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"components_selection",style:{left:e.leftD,top:e.topD,right:e.rightD,bottom:e.bottomD,transform:e.localTransform},attrs:{"data-show-grid":e.showGrid,"data-show-area":e.showArea}},e._l(8,(function(i){return t("div",{key:i,class:["crop-control",{hidden:!e.showMiddleControls&&i%2===0}],attrs:{"data-index":i}})})),0)}),Cr=[],br=a.ZP.extend({components:{},props:{minCropSize:{type:Number,default:1},ratio:{type:Number,default:1},selectionBounds:{type:Object,default(){return{left:0,top:0,right:0,bottom:0}}},limitWidth:{type:Number,default:Number.MAX_SAFE_INTEGER},limitHeight:{type:Number,default:Number.MAX_SAFE_INTEGER},limitBounds:{type:Object,default(){return{left:0,top:0,right:0,bottom:0}}},showGrid:{type:Boolean,default:!0},showArea:{type:Boolean,default:!1},rotation:{type:Number,default:0},showRotate:{type:Boolean,default:!1},showRemove:{type:Boolean,default:!1},showMiddleControls:{type:Boolean,default:!0}},data(){return{_limitBounds:{left:0,top:0,right:0,bottom:0},_selectionBounds:{left:0,right:0,top:0,bottom:0},_initialBounds:null,_localRotation:0,_ratio:1,_rotation:0,_mouseDownHandler:null}},watch:{limitBounds:{handler(e){Object.assign(this.$data._limitBounds,e)},immediate:!0,deep:!0},selectionBounds:{handler(e){Object.assign(this.$data._selectionBounds,e)},immediate:!0,deep:!0},ratio:{handler(e){this.$data._ratio=e},immediate:!0},rotation:{handler(e){this._rotation=e}}},computed:{top:{set(e){this.$data._selectionBounds.top=parseFloat(e)||0},get(){return parseFloat(this.$data._selectionBounds.top)||0}},left:{set(e){this.$data._selectionBounds.left=parseFloat(e)||0},get(){return parseFloat(this.$data._selectionBounds.left)||0}},bottom:{set(e){this.$data._selectionBounds.bottom=parseFloat(e)||0},get(){return parseFloat(this.$data._selectionBounds.bottom)||0}},right:{set(e){this.$data._selectionBounds.right=parseFloat(e)||0},get(){return parseFloat(this.$data._selectionBounds.right)||0}},localTransform(){return 0===this.$data._localRotation?"initial":`rotate(${this.$data._localRotation}deg)`},limitLeft(){return parseFloat(`${this.$data._limitBounds.left}`)},limitRight(){return parseFloat(`${this.$data._limitBounds.right}`)},limitTop(){return parseFloat(`${this.$data._limitBounds.top}`)},limitBottom(){return parseFloat(`${this.$data._limitBounds.bottom}`)},topD(){return`${this.top}px`},leftD(){return`${this.left}px`},rightD(){return`${this.right}px`},bottomD(){return`${this.bottom}px`}},mounted(){let e,t,i;this.$el.dispatchEvent(new CustomEvent("SelectionReady",{bubbles:!0,cancelable:!0}));let a={x:-1,y:-1},s="initial";const r=()=>{const e=this.$el.getBoundingClientRect();this.$data._ratio=e.width/e.height,this.$el.dispatchEvent(new CustomEvent("ratioChanged",{bubbles:!0,cancelable:!0,detail:{bounds:e.toJSON(),value:this.$data._ratio}}))},o=e=>{e.preventDefault(),a={x:e.pageX,y:e.pageY}},n=()=>{let i=a.x-e.x,o=a.y-e.y;if(0!==i||0!==o){switch(t){case 0:e.left+i<this.limitLeft&&(i=this.limitLeft-e.left),e.top+o<this.limitTop&&(o=this.limitTop-e.top),e.right-i<this.limitRight&&(i=e.right-this.limitRight),e.bottom-o<this.limitBottom&&(o=e.bottom-this.limitBottom),this.top=e.top+o,this.left=e.left+i,this.bottom=e.bottom-o,this.right=e.right-i;break;case 1:e.left+i>this.limitWidth-this.right-this.minCropSize&&(i=this.limitWidth-this.right-this.minCropSize-e.left),e.left+i<this.limitLeft&&(i=this.limitLeft-e.left),e.top+i/this.$data._ratio<this.limitTop&&(i=(this.limitTop-e.top)*this.$data._ratio),this.left=e.left+i,this.top=e.top+i/this.$data._ratio;break;case 2:e.top+o>this.limitHeight-this.bottom-this.minCropSize&&(o=this.limitHeight-this.bottom-this.minCropSize-e.top),this.top=Math.max(this.limitTop,e.top+o),r();break;case 3:e.right-i>this.limitWidth-this.left-this.minCropSize&&(i=e.right-this.limitWidth+this.left+this.minCropSize),e.right-i<this.limitRight&&(i=e.right-this.limitRight),e.top-i/this.$data._ratio<this.limitTop&&(i=(e.top-this.limitTop)*this.$data._ratio),this.top=e.top-i/this.$data._ratio,this.right=e.right-i;break;case 4:e.right-i>this.limitWidth-this.left-this.minCropSize&&(i=e.right-this.limitWidth+this.left+this.minCropSize),this.right=Math.max(e.right-i,this.limitRight),r();break;case 5:e.right-i>this.limitWidth-this.left-this.minCropSize&&(i=e.right-this.limitWidth+this.left+this.minCropSize),e.right-i<this.limitRight&&(i=e.right-this.limitRight),e.bottom-i/this.$data._ratio<this.limitBottom&&(i=(e.bottom-this.limitBottom)*this.$data._ratio),this.bottom=e.bottom-i/this.$data._ratio,this.right=e.right-i;break;case 6:e.bottom-o>this.limitHeight-this.top-this.minCropSize&&(o=e.bottom-this.limitHeight+this.top+this.minCropSize),this.bottom=Math.max(e.bottom-o,this.limitBottom),r();break;case 7:e.left+i>this.limitWidth-this.right-this.minCropSize&&(i=this.limitWidth-this.right-this.minCropSize-e.left),e.left+i<this.limitLeft&&(i=this.limitLeft-e.left),e.bottom+i/this.$data._ratio<this.limitBottom&&(i=(this.limitBottom-e.bottom)*this.$data._ratio),this.bottom=e.bottom+i/this.$data._ratio,this.left=e.left+i;break;case 8:e.left+i>this.limitWidth-this.right-this.minCropSize&&(i=this.limitWidth-this.right-this.minCropSize-e.left),this.left=Math.max(this.limitLeft,e.left+i),r();break;case 9:this.$data._localRotation=180*Math.atan2(o,i)/Math.PI;break}this.$emit("updateBounds",{...this.$data._selectionBounds,initialBounds:this.$data._initialBounds.toJSON(),changed:!0,selectionRotation:this.$data._localRotation,mode:9===t?"rotate":"scale",action:s,controlIndex:t}),"initial"===s&&(s="move")}},c=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c),clearInterval(i),this.$emit("updateBounds",{...this.$data._selectionBounds,initialBounds:this.$data._initialBounds.toJSON(),changed:!0,selectionRotation:this.$data._localRotation,mode:9===t?"rotate":"scale",controlIndex:t,action:"up"});const e=this.$el.getBoundingClientRect();this.$data._ratio=e.width/e.height,s="initial"};this.$data._mouseDownHandler=s=>{s.forced||(s.preventDefault(),s.stopImmediatePropagation()),clearInterval(i);const r=s.forced?this.$el:s.target.closest(".crop-control")||s.target.closest(".components_selection");if(r){if(this.$data._initialBounds=this.$el.getBoundingClientRect(),t=parseInt(r.getAttribute("data-index")||"")||0,10===t)return this.$el.dispatchEvent(new CustomEvent("requestRemove",{bubbles:!0,cancelable:!0}));e={x:s.pageX,y:s.pageY,left:this.left,top:this.top,right:this.right,bottom:this.bottom},a={x:e.x,y:e.y},document.addEventListener("mousemove",o),document.addEventListener("mouseup",c),i=setInterval(n,16)}},this.$el.addEventListener("mousedown",this.$data._mouseDownHandler)},methods:{reset(){this._selectionBounds={...this.$data._limitBounds},this.$emit("updateBounds",{...this.$data._selectionBounds,changed:!1})}}}),wr=br,Ir=(0,h.Z)(wr,_r,Cr,!1,null,"e5b2e898",null),kr=Ir.exports,Tr=i(40881),Sr=a.ZP.extend({components:{Selection:kr},props:{rootContainer:{type:HTMLElement},target:{type:HTMLElement},minCropSize:{type:Number,default:1},ratio:{type:Number,default:1},selectionRatio:{type:Number,default:0},showGrid:{type:Boolean,default:!0},showArea:{type:Boolean,default:!1},showMask:{type:Boolean,default:!0},showSelection:{type:Boolean,default:!0},rotation:{type:Number,default:0},originalTargetSize:{type:Object,default(){return{width:1,height:1}}},showPopup:{type:Boolean,default:!1},onlySelectionClickable:{type:Boolean,default:!1},selectionTarget:{type:HTMLElement},showSelectionRemove:{type:Boolean,default:!1},showSelectionRotate:{type:Boolean,default:!1},showAreaOnly:{type:Boolean,default:!1},selectionOffsetFromTarget:{type:Object,default(){return{left:0,top:0,right:0,bottom:0}}},showMiddleControls:{type:Boolean,default:!0},ignoreSelectionAreaOnSecondClick:{type:Boolean,default:!1}},data(){return{_limitBounds:{left:0,top:0,right:0,bottom:0,width:0,height:0},_selectionBounds:{left:0,top:0,right:0,bottom:0},_rotation:0,_scale:{prev:1,current:1,ratio:1},_selectionChanged:!1,_rotationDirection:"right",_showPopup:!1,_prevTarget:null,_selectionClickCount:0,_uuid:(0,Tr.uuidV4)()}},computed:{top(){return`${parseFloat(String(this.$data._limitBounds.top))}px`},left(){return`${parseFloat(String(this.$data._limitBounds.left))}px`},right(){return`${parseFloat(String(this.$data._limitBounds.right))}px`},bottom(){return`${parseFloat(String(this.$data._limitBounds.bottom))}px`},selectionLeft(){return`${parseFloat(String(this.$data._selectionBounds.left))}px`},selectionRight(){return`${parseFloat(String(this.$data._selectionBounds.right))}px`},selectionTop(){return`${parseFloat(String(this.$data._selectionBounds.top))}px`},selectionBottom(){return`${parseFloat(String(this.$data._selectionBounds.bottom))}px`},rootContainerAndTargetHash(){return this.rootContainer+this.target},rootContainerAndTargetAndSelectionTargetHash(){return window.btoa(unescape(encodeURIComponent(this.rootContainer+this.target+this.selectionTarget?.outerHTML)))},computedRatio(){return this.selectionRatio||this.ratio},componentStyles(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom,"pointer-events":this.showSelection?this.onlySelectionClickable?"none":"all":"none","--maskLeft":this.selectionLeft,"--maskRight":this.selectionRight,"--maskTop":this.selectionTop,"--maskBottom":this.selectionBottom}},selectionStyles(){let e="none";return this.showSelection&&(this.showAreaOnly||(e="all"),this.ignoreSelectionAreaOnSecondClick&&this.$data._selectionClickCount>=1&&(e="none")),{visibility:this.$data._showPopup||!this.showSelection?"hidden":"visible","pointer-events":e}}},mounted(){const e=this.$watch("rootContainer",(t=>{t&&this.rootContainer.appendChild(this.$el),this.$emit("cropRectReady",{uuid:this.$data._uuid,target:this}),this.$nextTick((()=>{e()}))}),{immediate:!0})},watch:{rootContainerAndTargetHash:{handler(){if(this.rootContainer&&this.target){Object.assign(this.$data._limitBounds,{...this.getTargetBoundsRelativeToWorkArea()}),this.$data._prevTarget?.removeEventListener?.("transitionend",this.handleTargetTransform),this.$data._prevTarget=this.target;const e=window.getComputedStyle(this.target);/transform/i.test(e.getPropertyValue("transition"))||(this.target.style.transition="transform 1ms ease"),this.target.addEventListener("transitionend",this.handleTargetTransform),this.handleTargetTransform()}},immediate:!0},rootContainerAndTargetAndSelectionTargetHash:{handler(){this.rootContainer&&this.target&&this.selectionTarget?(this.$data._selectionBounds={...this.getSelectionBoundsRelativeToTarget()},this.$data._selectionClickCount=1):this.$data._selectionClickCount=0}},showPopup:{handler(e){this.$data._showPopup=e},immediate:!0},ratio:{handler(e){this.forceUpdateSelection(e)},immediate:!0}},methods:{async forceUpdateSelection(e){if(await this.$nextTick(),this.$el){const t=this.$el.getBoundingClientRect();let i=t.width,a=i/e;a>t.height&&(a=t.height,i=a*e);const s=(t.width-i)/2,r=(t.height-a)/2;this.handleUpdateBounds({left:s,right:s,top:r,bottom:r})}},handleUpdateBounds(e,t=!1){Object.assign(this.$data._selectionBounds,e),this.$nextTick((()=>{const i=this.$refs.selection.$el.getBoundingClientRect();this.$data._limitBounds;this.$data._selectionChanged=e.changed,this.$el.dispatchEvent(new CustomEvent(t?"cropRectChangeExternal":"cropRectChange",{bubbles:!0,cancelable:!0,detail:{value:{width:i.width/this.$data._limitBounds.width,height:i.height/this.$data._limitBounds.height,left:e.left/this.$data._limitBounds.width,top:e.top/this.$data._limitBounds.height,rotation:this.$data._prevTarget,changed:e.changed,initialBounds:e.initialBounds,nonScaled:{...e,width:i.width,height:i.height,selectionRotation:e.selectionRotation,mode:e.mode,controlIndex:e.controlIndex}},uuid:this.$data._uuid}}))}))},getTargetBoundsRelativeToWorkArea(){const e=this.getRootBounds(),t=this.target.getBoundingClientRect().toJSON(),i={left:t.left-e.left,top:t.top-e.top,width:t.width,height:t.height,right:e.left+e.width-(t.left+t.width),bottom:e.top+e.height-(t.top+t.height)};return i},getSelectionBoundsRelativeToTarget(){const e=this.getTargetBounds(),t=this.getSelectionTargetBounds();return{left:t.left-e.left-this.selectionOffsetFromTarget.left,top:t.top-e.top-this.selectionOffsetFromTarget.top,width:t.width+this.selectionOffsetFromTarget.left+this.selectionOffsetFromTarget.right,height:t.height+this.selectionOffsetFromTarget.top+this.selectionOffsetFromTarget.bottom,right:e.left+e.width-(t.left+t.width)-this.selectionOffsetFromTarget.right,bottom:e.top+e.height-(t.top+t.height)-this.selectionOffsetFromTarget.bottom}},getRootBounds(){return this.rootContainer.getBoundingClientRect().toJSON()},getTargetBounds(){return this.target.getBoundingClientRect().toJSON()},getSelectionTargetBounds(){return this.selectionTarget?.getBoundingClientRect().toJSON()||{width:NaN,height:NaN,top:NaN,left:NaN,bottom:NaN,right:NaN}},handleTargetTransform(){const e=window.getComputedStyle(this.target),t=e.transform?.replace(/[^0-9.e,-]/gi,"").split(",").map((e=>parseFloat(e)));if(Array.isArray(t)&&t.length>0){const e=Math.round(Math.atan2(t[1],t[0])*(180/Math.PI))||0;if(0===this.$data._prevTarget&&90===e||90===this.$data._prevTarget&&180===e||180===this.$data._prevTarget&&-90===e||-90===this.$data._prevTarget&&0===e)this.$data._prevTargetDirection="right";else if(0===this.$data._prevTarget&&-90===e||-90===this.$data._prevTarget&&180===e||180===this.$data._prevTarget&&90===e||90===this.$data._prevTarget&&0===e)this.$data._prevTargetDirection="left";else{if(180!==Math.abs(this.$data._prevTarget)||0!==e)return!1;this.$data._prevTargetDirection="flipHorizontal"}this.$data._prevTarget=e,this.$data._scale={...this.$data._scale,prev:this.$data._scale.current,current:Math.sqrt(t[0]*t[0]+t[1]*t[1])||1},this.$data._scale.ratio=this.$data._scale.current/this.$data._scale.prev,this.rotateSelection()}},rotateSelection(){Object.assign(this.$data._limitBounds,this.getTargetBoundsRelativeToWorkArea());const e={...this.$data._selectionBounds};if("flipHorizontal"===this.$data._prevTargetDirection){const t={top:e.bottom,right:e.left,bottom:e.top,left:e.right};Object.assign(this.$data._selectionBounds,t)}else if("right"===this.$data._prevTargetDirection){const t={top:e.left*this.$data._scale.ratio,right:e.top*this.$data._scale.ratio,bottom:e.right*this.$data._scale.ratio,left:e.bottom*this.$data._scale.ratio};Object.assign(this.$data._selectionBounds,t)}else{const t={top:e.right*this.$data._scale.ratio,right:e.bottom*this.$data._scale.ratio,bottom:e.left*this.$data._scale.ratio,left:e.top*this.$data._scale.ratio};Object.assign(this.$data._selectionBounds,t)}this.$nextTick((()=>{const e=this.$refs.selection.$el.getBoundingClientRect();this.$el.dispatchEvent(new CustomEvent("cropRectChange",{bubbles:!0,cancelable:!0,detail:{value:{width:e.width/this.$data._limitBounds.width,height:e.height/this.$data._limitBounds.height,left:this.$data._selectionBounds.left/this.$data._limitBounds.width,top:this.$data._selectionBounds.top/this.$data._limitBounds.height,rotation:this.$data._prevTarget,changed:this.$data._selectionChanged,nonScaled:e.toJSON()},uuid:this.$data._uuid}}))}))},reset(e){this.$refs.selection?.reset(),this.$data._selectionChanged=!1,e&&(this.$data._showPopup=!0)},forceUpdateSelectionBoundsFromTarget(){this.rootContainer&&this.target&&this.selectionTarget&&(this.$data._selectionBounds={...this.getSelectionBoundsRelativeToTarget()})},removeCropDom(){try{this.rootContainer.removeChild(this.$el)}catch(e){console.error("removeCropDom error",e)}}}}),xr=Sr,Ar=(0,h.Z)(xr,fr,yr,!1,null,"758000c2",null),Pr=Ar.exports;class Dr{static get MODE_NONE(){return"none"}static get MODE_FULL(){return"full"}static get MODE_MASK(){return"mask"}}var Ur=a.ZP.extend({components:{CropRect:Pr},props:{workArea:{type:HTMLElement},target:{type:HTMLElement},originalTargetSize:{type:Object,default(){return{width:1,height:1}}},ratios:{type:Object,default(){return{}}},offsetFromTargetBounds:{type:Number,default:40},langs:{type:Object,default(){return{}}},mode:{type:String,default:Dr.MODE_NONE}},data(){return{_activeRatio:null,_defaultRatios:{"1:1":{name:"1:1",label:"1:1",ratio:1,hint:"instagram",hidden:!1,original:!1,suffix:""}},_customItemActive:!1,_activeRatioValue:1,_tmpRatioValue:1,_cropSize:{width:0,height:0},_cropRatio:{width:0,height:0,ratio:0}}},computed:{computedRatios(){return Object.values(this.$data._defaultRatios).filter((e=>!e.hidden)).sort(((e,t)=>t.original-e.original))},sizeScale(){return 1},showTools(){return this.mode===Dr.MODE_FULL},showSelection(){return this.mode===Dr.MODE_FULL},showMask(){return!!this.mode&&this.mode!==Dr.MODE_NONE},maxCropWidthLength(){return this.originalTargetSize.width.toString().length},maxCropHeightLength(){return this.originalTargetSize.height.toString().length}},watch:{ratios:{handler(e){if(e){this.$data._defaultRatios={...this.$data._defaultRatios,...e};const t=this.computedRatios.find((e=>e.original));t?(this.$data._activeRatio=t.name||null,this.$data._activeRatioValue=this.$data._tmpRatioValue=t.ratio):this.$data._activeRatio=this.$data._tmpRatioValue=null}},immediate:!0},originalTargetSize:{handler(e){e&&(0!==this.$data._cropSize.width&&0!==this.$data._cropSize.height||(this.$data._cropSize={...this.$data._cropSize,...e}),this.$data._cropRatio={...(({width:e,height:t,ratio:i})=>({width:e,height:t,ratio:i}))(this.computedRatios.find((e=>e.original))||this.$getAspectRatio(e.width,e.height))})},immediate:!0},showSelection:{handler(e){}}},mounted(){},methods:{$getAspectRatio(e,t){const i=(e,t)=>t?i(t,e%t):Math.abs(e),a=i(Math.round(e),Math.round(t)),s=Math.round(e/a),r=Math.round(t/a);return{name:`${s}:${r}`,label:`${s}:${r}`,width:s,height:r,original:!1,hint:"",hidden:!1,ratio:s/r}},handleCropRatioChange({detail:{value:e}}){this.$data._activeRatio=null,this.$data._customItemActive=!1;const t=this.$getAspectRatio(this.$data._cropSize.width,this.$data._cropSize.height);this.$data._cropRatio=(({width:e,height:t})=>({width:e,height:t}))(t)},handleCropRectReady(){this.$el.dispatchEvent(new CustomEvent("cropRectReady",{bubbles:!0,cancelable:!0}))},handleCropRectChange({detail:{value:e}}){this.$data._cropSize={width:2*Math.round(e.width*this.originalTargetSize.width/2),height:2*Math.round(e.height*this.originalTargetSize.height/2)},this.$el.dispatchEvent(new CustomEvent("cropChange",{cancelable:!0,bubbles:!0,detail:{...e}}))},handleCropRectChangeExternal({detail:{value:e}}){this.$el.dispatchEvent(new CustomEvent("cropChange",{cancelable:!0,bubbles:!0,detail:{...e}}))},async reset(){this.removeCropDom(),this.$data._activeRatio=this.computedRatios.find((e=>e.original))?.name||null,await this.$nextTick(),this.$refs.cropRect?.reset(),this.$refs.cropRect?.forceUpdateSelection(this.$data._activeRatioValue)},removeCropDom(){this.$refs.cropRect&&this.$refs.cropRect?.removeCropDom()}}}),Er=Ur,Rr=(0,h.Z)(Er,gr,vr,!1,null,"a9a3722e",null),Mr=Rr.exports,Lr=i(99453),Nr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"component_video-player"},[t("video",{ref:"video",attrs:{src:e.videoUrl,muted:"",crossorigin:"anonymous",playsinline:"playsinline",preload:"metadata"},domProps:{muted:!0},on:{timeupdate:e.handleTimeupdate,ended:e.handledEnded,playing:e.handlePlaying,pause:e.handlePause}})])},Fr=[],Or=a.ZP.extend({components:{},props:{videoUrl:String},data(){return{status:"pause",startTime:0,playTime:0}},methods:{handledEnded(){this.status="pause",this.$emit("ended")},handlePause(){console.log("video pause"),this.status="pause",this.$emit("pause")},handlePlaying(){console.log("video playing"),this.status="play",this.$emit("playing")},async handleTimeupdate(e){this.$emit("timeupdate",{currentTime:e?.target?.currentTime}),e.target instanceof HTMLVideoElement&&e.target.currentTime>=this.startTime+this.playTime&&await e.target.pause()},async pause(){const e=this.$refs.video;await(e?.pause())},async play(){const e=this.$refs.video;await(e?.play())},async togglePlay(e=0,t){const i=this.$refs.video;return e<this.startTime&&(i.currentTime=e),t&&(this.playTime=t),this.startTime=e,"play"===this.status?await this.pause():((i.currentTime<this.startTime||i.currentTime>=this.startTime+this.playTime)&&(i.currentTime=this.startTime),await this.play()),this.status},getVideo(){return this.$refs.video},getContainer(){return this.$el}}}),Br=Or,qr=(0,h.Z)(Br,Nr,Fr,!1,null,"cc5e1eaa",null),Qr=qr.exports,jr=a.ZP.extend({components:{Crop:Mr,PagDisplay:et.Z,PagFrameLine:mr,VideoDisplay:Qr},props:{editorType:String,workAreaWidth:Number,workAreaHeight:{type:Number,default:360},frameLineWidth:Number,frameLineHeight:Number,fileUrl:String,fileType:Number,ratios:Object,previewType:String,onlyShow:Boolean},data(){return{corpUrl:"https://res.wx.qq.com/t/fed_upload/51bce9e0-2838-4fe2-8ae8-f8ef8ea79b0e/corp.png",detailUrl:Ge.is.detail_page_no_story,CoverMediaType:de.Je,duration:0,curPlayTime:0,pageView:null,frameImgList:[],start:0,end:1,showCurFrame:!1,whRatio:1,previewHeight:0,videoHeight:0,videoWidth:0,playStatus:"paused",moving:"left",playerDom:null,playerRef:null,previewPlayerRef:null,cropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},bubblePreviewWidth:298,bubblePreviewHeight:98,corpPreviewWidth:234,corpPreviewHeight:506,detailPreviewWidth:234,detailPreviewHeight:506,isMediaReady:!1}},computed:{previewPayPlayerClass(){return{[`${this.previewType}-preview-full`]:!0}},previewWrapperStyle(){const e=this,t={width:e[`${e.previewType}PreviewWidth`]+"px",height:e[`${e.previewType}PreviewHeight`]+"px"};return"detail"===this.previewType&&(t.border="1px solid rgba(0, 0, 0, 0.1)"),"bubble"===this.previewType&&(t.top="150px",t.width=`${this.bubblePreviewWidth}px`),this.previewType?t:{}},previewRatio(){return this.previewType?this[`${this.previewType}PreviewWidth`]/Number(this.cropInfo.cropBoxWidth):1},previewStyle(){const{previewRatio:e,cropInfo:t}=this;return"bubble"===this.previewType&&this.onlyShow?{position:"relative",width:"267px",height:`${this.bubblePreviewHeight}px`,left:"10%"}:{width:this.availWidth*e+"px",height:this.availHeight*e+"px",transform:`translate(${-Number(t.cropBoxLeft)*e}px, ${-Number(t.cropBoxTop)*e}px)`}},previewPlayerWrapperStyle(){return"bubble"===this.previewType?{width:`${this.bubblePreviewWidth}px`,height:`${this.bubblePreviewHeight}px`,top:"0px",left:"10%"}:"corp"===this.previewType?{width:"100%",height:"9.9%",top:"30%",left:"50%",transform:"translateX(-50%)"}:"detail"===this.previewType?{top:"-15.17%"}:{}},availWidth(){return this.onlyShow&&"bubble"===this.previewType?this.bubblePreviewWidth:this.availHeight*this.whRatio},availHeight(){if(this.onlyShow&&"bubble"===this.previewType)return this.bubblePreviewHeight;if(this.previewHeight){let e=Math.min(this.workAreaHeight,this.previewHeight);return e*this.whRatio>this.workAreaWidth&&(e=this.workAreaWidth/this.whRatio),e}return 0},curFrame(){if("left"===this.moving){const e=Math.floor(this.frameImgList.length*this.start);return this.frameImgList[e]}{const e=Math.floor(this.frameImgList.length*this.end);return this.frameImgList[e]}},stopMicroseconds(){return this.duration*this.end}},watch:{onlyShow:{handler(e){e&&this.$refs.cropRef.removeCropDom&&this.$refs.cropRef.removeCropDom()},immediate:!0},fileUrl:{handler(e){e&&(this.$refs.cropRef?.reset(),this.isMediaReady=!1)}}},methods:{pagFrameLineReady(){this.$emit("frameLineReady")},handlePagReady(){this.previewType?this.$refs.previewPagPlayer?.initPag():"sourceMaterial"===this.editorType&&this.$refs.pagFrameLineRef?.init()},handlePreviewPagReady(){"sourceMaterial"===this.editorType&&this.$refs.pagFrameLineRef?.init()},unload(){this.playerRef?.pause(),this.previewPlayerRef?.pause()},resetCrop(){this.$refs.cropRef?.reset()},initPlayerPag(){this.$refs.pagPlayer?.initPag()},handleCropRectChange({detail:{height:e,width:t,top:i,left:a,nonScaled:s}}){const r={cropHeight:Math.floor(this.videoHeight*e),cropWidth:Math.floor(this.videoWidth*t),cropLeft:Math.floor(this.videoWidth*a),cropTop:Math.floor(this.videoHeight*i),cropBoxWidth:s.width,cropBoxHeight:s.height,cropBoxTop:s.top,cropBoxLeft:s.left};this.cropInfo=r,this.$emit("cropChange",{cropInfo:r})},async initMedia(){let e=null;if(this.fileType===de.Je.Mp4&&(e=await(0,Xe.$p)(this.fileUrl),this.playerDom=this.$refs.videoPlayer?.getContainer(),this.playerRef=this.$refs.videoPlayer,this.previewPlayerRef=this.$refs.previewVideoPlayer,"sourceMaterial"===this.editorType&&this.$refs.pagFrameLineRef?.init()),this.fileType!==de.Je.Zip&&this.fileType!==de.Je.Pag||(e=await(0,Lr.Bc)(this.fileUrl),this.playerDom=this.$refs.pagPlayer?.getContainer(),this.playerRef=this.$refs.pagPlayer,this.previewPlayerRef=this.$refs.previewPagPlayer),e){const{width:t,height:i}=e;this.previewHeight=2*Math.floor(i/2),this.videoHeight=i,this.videoWidth=t,this.whRatio=t/i}this.isMediaReady=!0},handleChangePoint(e){this.showCurFrame=!0;const t={startTime:e.startTime,duration:e.duration};if(this.playerRef=this.$refs.videoPlayer,this.playerRef){const e=this.playerRef.getVideo();e instanceof HTMLVideoElement&&(e.currentTime=t.startTime)}this.$emit("changePoint",{timeInfo:t})}}}),$r=jr,Zr=(0,h.Z)($r,rr,or,!1,null,"77520cac",null),Hr=Zr.exports,Gr=i(64444),Wr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"tip mt-4"},[e._v("图片格式：PNG/JPG/JPEG；尺寸720×264像素；不超过500KB；")]),e.isDynamicCover?t("div",[t("div",{staticClass:"tip"},[e._v("视频格式：")]),t("div",{staticClass:"tip"},[e._v("1. MP4（H.264/AVC）：分辨率720×264；时长1s至3s；不超过20MB；")]),t("div",{staticClass:"tip"},[e._v(" 2. PNG序列帧：PNG图片尺寸720×264像素; 将视频（1s至3s）以24fps帧率导出序列帧；全部图片打包为1个ZIP压缩包上传，压缩包不超过20MB； "),t("zip-desc-popover",{staticClass:"-ml-2"})],1)]):e._e(),t("div",{staticClass:"tip"},[e._v("更换的素材图需属于原始封面图的一部分，保持内容、风格、主题一致。")])])},zr=[],Vr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{attrs:{trigger:"hover",width:350},scopedSlots:e._u([{key:"target",fn:function(){return[t("span",{staticClass:"weui-link text-sm"},[e._v("了解压缩包要求")])]},proxy:!0}])},[t("div",{staticClass:"text-opblack_2"},[t("div",[e._v("· 每张PNG图片按播放顺序以5位连续数字命名，例如00001.png、00002.png…；")]),t("div",[e._v("· 图片张数不少于24张，不多于72张；")])])])},Jr=[],Kr=a.ZP.extend({components:{},data(){return{}},computed:{},methods:{}}),Yr=Kr,Xr=(0,h.Z)(Yr,Vr,Jr,!1,null,"167ec653",null),eo=Xr.exports,to=a.ZP.extend({components:{ZipDescPopover:eo},props:{mode:String,isDynamicCover:Boolean},data(){return{}},computed:{},methods:{}}),io=to,ao=(0,h.Z)(io,Wr,zr,!1,null,"f8299c92",null),so=ao.exports,ro=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"tip mt-4 text-sm"},[e._v("图片格式：PNG/JPG/JPEG；尺寸957×1278 像素；不超过500KB；")]),e.isDynamicCover?t("div",{staticClass:"tip text-sm"},[e._v(" 视频格式：PNG序列帧；PNG图片尺寸957×1278像素; 将视频（1s至3s）以24fps帧率导出序列帧；全部图片打包为1个ZIP压缩包上传，压缩包不超过50MB； "),t("zip-desc-popover")],1):e._e(),t("div",{staticClass:"tip text-sm"},[e._v("上半部分下拉才可展示，应将重要信息置于素材中部。")]),t("div",{staticClass:"tip text-sm"},[e._v("更换的素材图需属于原始封面图的一部分，保持内容、风格、主题一致。")])])},oo=[],no=a.ZP.extend({components:{ZipDescPopover:eo},props:{mode:String,isDynamicCover:Boolean},data(){return{}},computed:{},methods:{}}),co=no,lo=(0,h.Z)(co,ro,oo,!1,null,"1445c970",null),po=lo.exports,uo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"tip text-sm"},[e._v("图片格式：PNG/JPG/JPEG；尺寸957×210像素；不超过500KB；")]),e.isDynamicCover?t("div",{staticClass:"tip text-sm"},[e._v(" 视频格式：PNG序列帧；PNG图片尺寸957×210像素;将视频（1s至3s）以24fps帧率导出序列帧；压缩包不超过20MB； "),t("zip-desc-popover",{staticClass:"-ml-2"})],1):e._e(),t("div",{staticClass:"tip text-sm"},[e._v("更换的素材图需属于原始封面图的一部分，保持内容、风格、主题一致。")])])},ho=[],mo=a.ZP.extend({components:{ZipDescPopover:eo},props:{mode:String,isDynamicCover:Boolean},data(){return{}},computed:{},methods:{}}),go=mo,vo=(0,h.Z)(go,uo,ho,!1,null,"13d5fd2f",null),fo=vo.exports;const{mapState:yo}=(0,fe._p)("cover"),_o=new $.ZP,Co=500,bo=20,wo=50,Io=["bubble","corp","detail"],ko={detail:1,bubble:2,corp:3};var To=a.ZP.extend({name:"CoverCrop",data(){return{ACCEPT_TYPE:ys._B,CoverMediaType:de.Je,corpUrl:Ge.is.corp_page,detailUrl:Ge.is.detail_page_no_story,RequireImgSizeLimitKb:Co,CoverGenPag_FileType:de.p0,NORMAL_COVER_SIZE:Ge.TE,CORP_SIZE:Ge.s9,coverToolPics:Ge.is,detailCropper:null,bubbleCropper:null,corpCropper:null,bubbleMoveXY:{},corpMoveXY:{},detailMoveXY:{},bubbleFromUpload:!!this.$route.params.cover,corpFromUpload:!!this.$route.params.cover,detailFromUpload:!!this.$route.params.cover,curEditImgName:"",concatImgUrl:Ge.is.hb_bottom_957,concatOpenImgUrl:Ge.is.crop0_1,concatImg:null,concatOpenImg:null,uploadImgUrl:Zt.qk,bubbleImg:{},detailImg:{},corpImg:{},bubbleFileList:[],detailFileList:[],corpFileList:[],bubbleTempleFileList:[],detailTempleFileList:[],corpTempleFileList:[],height:446,uploadStatus:0,bubbleCropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},bubbleTimeInfo:{startTime:0,duration:-1,action:""},corpCropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},corpTimeInfo:{startTime:0,duration:-1,action:""},detailCropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},detailTimeInfo:{startTime:0,duration:-1,action:""},bubbleGenMaterialLoading:!1,corpGenMaterialLoading:!1,detailGenMaterialLoading:!1,bubbleTemporaryDynamic:{pagUrl:""},bubbleDynamicSource:{mediaUrl:""},corpTemporaryDynamic:{pagUrl:""},corpDynamicSource:{mediaUrl:""},detailTemporaryDynamic:{pagUrl:""},detailDynamicSource:{mediaUrl:""},bubbleStaticIsUpload:!1,corpStaticIsUpload:!1,detailStaticIsUpload:!1,corpRatios:{"957:210":{name:"957:210",label:"957:210",ratio:957/210,hidden:!1,original:!0}},bubbleRatios:{"720:264":{name:"720:264",label:"720:264",ratio:720/264,hidden:!1,original:!0}},detailRatios:{"957:1278":{name:"957:1278",label:"957:1278",ratio:957/1278,hidden:!1,original:!0}},uploader:null,uploadLoading:!1}},props:{useStaticBubblePic:Boolean,useStaticCorpPic:Boolean,hasAtmosphere:Boolean,imgFile:{type:Object,default(){return{}}},cropedImgList:{type:Object,default(){return{sourceImageUrl:"",receiveImageUrl:"",detailImageUrl:"",bubbleImageUrl:"",openImageUrl:"",corpImageUrl:""}}},showCoverStory:{type:Boolean,default:!1},cover:{type:Object,default(){return{}}},coverType:{type:Number,default:0},storyDetailList:{type:Array,default(){return[]}},sourceDynamicMediaInfo:Object,loading:Boolean,getBubbleMaterial:Function,getCorpMaterial:Function,getPagDetailMaterial:Function,detailPagLoading:Boolean,corpPagLoading:Boolean,bubblePagLoading:Boolean,showAtmosphereTips:Boolean},components:{WidgetBubbleImg:Je,OtherMaterial:sr,MediaEditor:Hr,CoverCropDetailTips:po,CoverCropCorpTips:fo,CoverCropBubbleTips:so},mounted(){const e=new Image;e.setAttribute("crossOrigin","anonymous"),e.src=this.concatImgUrl,this.concatImg=e;const t=new Image;t.setAttribute("crossOrigin","anonymous"),t.src=this.concatOpenImgUrl,this.concatOpenImg=t},watch:{imgFile(e,t){!t&&this.$route.params.cover||e.url&&this.$nextTick((()=>{this.watchSourceImg(),Io.forEach((e=>{this[`${e}Cropper`]?.destroy(),this[`${e}Cropper`]=null})),e.dataUrl&&Io.forEach((e=>{this[`${e}FromUpload`]=!1,this[`${e}MoveXY`]={},this[`${e}FileList`]=[],this[`${e}TempleFileList`]=[],this[`${e}TemporaryDynamic`]={}}))}))},detailMediaEditorFileUrl(e){console.info("--- ~ detailMediaEditorFileUrl ~ val:",e),this.checkInitPag(e,"detail")},corpMediaEditorFileUrl(e){console.info("--- ~ corpMediaEditorFileUrl ~ val:",e),this.checkInitPag(e,"corp")},bubbleMediaEditorFileUrl(e){console.info("--- ~ bubbleDynamicFromUpload ~ val:",e),this.checkInitPag(e,"bubble")}},computed:{...yo(["showEditDialog"]),previewTitleClass(){const{curEditImgName:e}=this;if("static"===this.mode)switch(e){case"bubble":return"pl-6";case"detail":return"pl-12";case"corp":return"pl-12"}return""},uploadBtnClass(){const{curEditImgName:e,mode:t}=this;return"static"===t?"mx-[110px]":"bubble"===e&&"dynamic"===t?"mx-[83px]":"bubble"!==e&&"dynamic"===t?"mx-[127px]":"mx-[130px]"},reportErrType(){const{curEditImgName:e}=this,t={bubble:"28",detail:"30",corp:"32"};return t[e]},reportSuccType(){const{curEditImgName:e}=this,t={bubble:"27",detail:"29",corp:"31"};return t[e]},acceptType(){const e=this.sourceDynamicMediaInfo.url&&this.sourceDynamicMediaInfo.type!==de.Je.Image;return e?"corp"===this.curEditImgName||"detail"===this.curEditImgName?".png,.jpg,.jpeg,.zip":this.hasAtmosphere&&"bubble"===this.curEditImgName?".png,.jpg,.jpeg":ys._B:".png,.jpg,.jpeg"},mode(){const{curEditImgName:e}=this;return this.hasAtmosphere&&"bubble"===e||!this[`${e}ImageDynamicUrl`]&&!this[`${e}DynamicSource`]?.mediaUrl||this[`${e}StaticIsUpload`]?"static":"dynamic"},genLoading(){switch(this.curEditImgName){case"bubble":return this.bubbleGenMaterialLoading;case"corp":return this.corpGenMaterialLoading;case"detail":return this.detailGenMaterialLoading;default:return!1}},sourceImageDynamicMediaUrl(){return this.cover.packetMaterial?.sourceImageDynamic?.mediaUrl||""},bubbleMediaEditorFileUrl(){return this.bubbleTemporaryDynamic?.pagUrl?this.bubbleTemporaryDynamic?.pagUrl:this.bubbleDynamicFromUpload?this.cover.packetMaterial?.bubbleImageDynamic?.mediaUrl:this.sourceImageDynamicMediaUrl},detailMediaEditorFileUrl(){return this.detailTemporaryDynamic?.pagUrl?this.detailTemporaryDynamic?.pagUrl:this.detailDynamicFromUpload?this.cover.packetMaterial?.detailImageDynamic?.mediaUrl:this.sourceImageDynamicMediaUrl},corpMediaEditorFileUrl(){return this.corpTemporaryDynamic?.pagUrl?this.corpTemporaryDynamic?.pagUrl:this.corpDynamicFromUpload?this.cover.packetMaterial?.corpLogoDynamic?.mediaUrl:this.sourceImageDynamicMediaUrl},bubbleDynamicFromUpload(){return!!this.cover.packetMaterial?.bubbleImageDynamicSource?.mediaUrl},detailDynamicFromUpload(){return!!this.cover.packetMaterial?.detailImageDynamicSource?.mediaUrl},corpDynamicFromUpload(){return!!this.cover.packetMaterial?.corpLogoDynamicSource?.mediaUrl},coverImageDynamicUrl(){return this.cover.packetMaterial?.coverImageDynamic?.mediaUrl},bubbleImageDynamicUrl(){return this.cover.packetMaterial?.bubbleImageDynamic?.mediaUrl},corpImageDynamicUrl(){return this.cover.packetMaterial?.corpLogoDynamic?.mediaUrl},detailImageDynamicUrl(){return this.detailTemporaryDynamic?.pagUrl||this.cover.packetMaterial?.detailImageDynamic?.mediaUrl},bubbleImageDynamicSourceUrl(){return this.cover.packetMaterial?.bubbleImageDynamicSource?.mediaUrl},corpImageDynamicSourceUrl(){return this.cover.packetMaterial?.corpLogoDynamicSource?.mediaUrl},detailImageDynamicSourceUrl(){return this.cover.packetMaterial?.detailImageDynamicSource?.mediaUrl},senderC2cWidgetImageUrl(){let e=this?.cover.packetMaterial.senderC2cWidgetImage.mediaUrl||"";return e=(0,ye.Xi)(e),e},detailImgUrl(){const{detailImg:e,imgFile:t}=this;let i="";return i=this.detailFromUpload?e?.dataUrl||t?.dataUrl||t?.url:t?.dataUrl||t?.url||"",i=(0,ye.Xi)(i),i},bubbleImgUrl(){const{bubbleImg:e,imgFile:t}=this;let i="";return i=this.bubbleFromUpload?e?.dataUrl||t?.dataUrl||t?.url:t?.dataUrl||t?.url||"",i=(0,ye.Xi)(i),i},corpImgUrl(){const{corpImg:e,imgFile:t}=this;let i="";return i=this.corpFromUpload?e?.dataUrl||t?.dataUrl||t?.url||"":t?.dataUrl||t?.url||"",i=(0,ye.Xi)(i),i}},methods:{checkInitPag(e,t){const{curEditImgName:i}=this;if(e&&this.showEditDialog&&i===t){(0,Lt.H)("checkInitPag更新Pag",JSON.stringify({type:i}));const e=this.$refs[`${i}MediaEditor`];e?.initPlayerPag()}},handleDialogVisible(e){e||(document.body.style.overflow="visible",d.l1.updateShowEditDialog(!1))},clearAction(){const{curEditImgName:e}=this;this.uploader?.endUpload(),this[`${e}FileList`].length&&this[`${e}TempleFileList`]?.length<=0&&(this[`${e}StaticIsUpload`]=!1),this[`${e}TempleFileList`].length&&(this[`${e}FileList`]=this[`${e}TempleFileList`]),this[`${e}TemporaryDynamic`]={pagUrl:""},this[`${e}DynamicSource`]={mediaUrl:""},this.$refs?.[`${e}MediaEditor`]?.unload(),this[`${e}FileList`]?.length||(this[`${this.curEditImgName}FromUpload`]=!1),this[`${e}Cropper`]?.destroy(),this[`${e}Cropper`]=null},handleCropDialogClose(){console.log("close"),this.clearAction()},async genDynamicMaterial(){const{curEditImgName:e}=this;let t;try{const{cropWidth:i,cropHeight:a,cropLeft:s,cropTop:r}=this[`${e}CropInfo`];d.l1.updateShowEditDialog(!1),this[`${e}GenMaterialLoading`]=!0,this.$emit("changeGenMaterialStatus",{type:e,loading:!0});const o={bubble:this.getBubbleMaterial,corp:this.getCorpMaterial,detail:this.getPagDetailMaterial},n=Number(this.sourceDynamicMediaInfo.cropDetailInfo.cropInfo.cropLeft),c=Number(this.sourceDynamicMediaInfo.cropDetailInfo.cropInfo.cropTop),l=this.sourceDynamicMediaInfo.cropDetailInfo.cropInfo.cropWidth/Ge.TE.width;t={start_time:this.sourceDynamicMediaInfo.cropDetailInfo.timeInfo.startTime,duration:this.sourceDynamicMediaInfo.cropDetailInfo.timeInfo?.duration||1,file_type:ys.Eu[this.sourceDynamicMediaInfo.type],file_url:this.sourceDynamicMediaInfo.url,w:Math.floor(Number(i)*l),h:Math.floor(Number(a)*l),x:Math.floor(n+Number(s)*l),y:Math.floor(c+Number(r)*l)},(0,Lt.H)("裁剪范围",JSON.stringify({opt:t,sourceUrl:this.sourceDynamicMediaInfo?.url})),await o[e](t),d.l1.updatePreviewPagReinit(e)}catch(i){this.errorTip(i.message),(0,Lt.H)("二次裁剪原素材报错",JSON.stringify({curEditImgName:e,opt:t}))}finally{this.$emit("changeGenMaterialStatus",{type:e,loading:!1}),this[`${e}GenMaterialLoading`]=!1}},handleSure(){const{curEditImgName:e}=this;"dynamic"===this.mode?this[`${e}TemporaryDynamic`].pagUrl?(this.$emit("updateMaterial",{type:this.curEditImgName,material:this[`${e}TemporaryDynamic`],source:this[`${e}DynamicSource`]}),this.checkPreview(e),d.l1.updateShowEditDialog(!1),this[`${e}TempleFileList`]=this[`${e}FileList`]):!this[`${e}TemporaryDynamic`].pagUrl&&this.cover.packetMaterial[`${e}ImageDynamicSourceUrl`]?console.log("已经有手动上传的素材，不做处理"):this.genDynamicMaterial():"static"===this.mode&&this.clipImg();const t={bubble:"43",detail:"44",corp:"45"};_o.mediaUploadReport(t[e],{})},handleCropChange(e){this[`${this.curEditImgName}CropInfo`]=e.cropInfo},handleChangePoint(e){this[`${this.curEditImgName}TimeInfo`]=e.timeInfo},checkPreview(e){this.$emit("checkPreview",e)},async handleUploadChange(e){const{file:t}=e,{curEditImgName:i}=this;if("done"===t.status){const{response:e}=t;if(-2===e.base_response.ret)return this.errorTip("仅支持PNG/JPG/JPEG"),void(this[`${i}FileList`]=[]);if(0!==e.base_response.ret)return this.errorTip("素材上传失败，请重试上传，或联系客服"),void(this[`${i}FileList`]=[]);if(!(0,Xe.NL)(t.type))return;t.dataUrl=t.response.dataUrl,this[`${i}FileList`]=[t],this[`${i}FromUpload`]=!0,this[`${i}DynamicSource`]={mediaUrl:""},this[`${i}StaticIsUpload`]=!0,this[`${i}MoveXY`]={},this[`${i}Img`]=t,window.setTimeout((()=>{this.initCropBox(this.curEditImgName)}),500)}else"removed"===t.status?this[`${i}FileList`]=[]:this[`${i}FileList`]=[t]},async uploadEditDynamic(e){const{onSuccess:t,onError:i,file:a}=e,{curEditImgName:s}=this;try{this.uploader=new Gr.ZP(e.file,{cdnFileType:e.file?.type?.includes("mp4")?Gr.vB.video:Gr.vB.zip});const i=await _o.bigFileUpload(e,this.uploader);let r=0;if(e.file?.type?.includes("mp4"))await(0,Lr.TI)(i.url),this[`${s}DynamicSource`].mediaType=de.Je.Mp4;else{const e=await(0,Lr.su)(i.url);if(await this.validPic(e.zipWidgetUrl,"checkZip"),e.zipPicNum<ys.yY){const t=`压缩包内图片不能少于${ys.yY}张，请检查`;throw _o.mediaUploadReport(this.reportErrType,{file:a,failReason:t,picCnt:e.zipPicNum}),new Error(t)}if(e.zipPicNum>ys.QV){const t=`压缩包内图片不能超过${ys.QV}张，请检查`;throw _o.mediaUploadReport(this.reportErrType,{file:a,failReason:t,picCnt:e.zipPicNum}),new Error(t)}e.zipPicNum>0?r=Math.floor(Number(e.zipPicNum)/ys.rZ):(0,Lt.H)("获取压缩包内图片数错误",JSON.stringify({msg:e})),this[`${s}DynamicSource`].mediaType=de.Je.Zip,_o.mediaUploadReport(this.reportSuccType,{file:a,picCnt:e.zipPicNum})}this[`${s}DynamicSource`].mediaUrl=i.url,this[`${s}StaticIsUpload`]=!1;const o={bubble:{w:Ge.Mx.width,h:Ge.Mx.height,fn:Lr.CJ},corp:{w:Ge.s9.width,h:Ge.s9.height,fn:Lr.Zt},detail:{w:Ge.TE.width,h:Ge.TE.height,fn:Lr["if"]}},n=this[`${s}DynamicSource`].mediaType;(0,Lt.H)("自定义上传动态素材",JSON.stringify({mediaType:n,file_url:i.url,w:o[s].w,h:o[s].h}));const c=await o[s].fn({scene:je.a1.FIRST_UPLOAD,whole:{file_type:ys.Eu[n],file_url:i.url,x:0,y:0,duration:r||-1,start_time:0,w:o[s].w,h:o[s].h}});if(!c.pagUrl&&c.picBase64)throw(0,Lt.H)("自定义素材文件太大"),new Error("动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");t({base_response:{ret:0},url:c.pagUrl,md5:c.pagMd5}),this.$set(this,`${s}TemporaryDynamic`,c)}catch(r){console.error("--- ~ uploadEditDynamic ~ err:",r),(0,Lt.H)(`定制${s}动态素材失败`,JSON.stringify(r)),this.errorTip(r.message||"素材上传失败，请重试"),i()}},async handleUpload(e){this.uploadLoading=!0;try{const{onSuccess:i,onError:a,file:s}=e;if((0,Xe.NL)(s.type))try{const e=await(0,ye.sT)(s);_o.mediaUploadReport(this.reportSuccType,{file:s}),i({base_response:{ret:0},dataUrl:e})}catch(t){(0,Lt.H)("CoverCrop上传错误",JSON.stringify(t)),this.errorTip("图片上传错误，请重试"),console.error(t),_o.mediaUploadReport(this.reportErrType,{file:s,failReason:"图片上传错误，请重试"}),a()}else await this.uploadEditDynamic(e)}finally{this.uploadLoading=!1}},async validPic(e,t){if(!e)throw new Error("检验图片传入图片地址为空");const{width:i,height:a}=await(0,ye.t$)(e);if("detail"===this.curEditImgName&&(i!=Ge.TE.width||a!=Ge.TE.height))throw new Error(`${"checkPic"===t?"图片":"序列帧"}尺寸需为${Ge.TE.width}*${Ge.TE.height}像素`);if("bubble"===this.curEditImgName&&(i!=Ge.Mx.width||a!=Ge.Mx.height))throw new Error(`${"checkPic"===t?"图片":"序列帧"}尺寸需为${Ge.Mx.width}*${Ge.Mx.height}像素`);if("corp"===this.curEditImgName&&(i!=Ge.s9.width||a!=Ge.s9.height))throw new Error(`${"checkPic"===t?"图片":"序列帧"}尺寸需为${Ge.s9.width}*${Ge.s9.height}像素`)},async handelBeforeUpload(e){const t={bubble:"53",detail:"54",corp:"55"};_o.mediaUploadReport(t[this.curEditImgName],{});const{curEditImgName:i}=this;if(this[`${i}TempleFileList`]=this[`${i}FileList`],!(0,Xe.NL)(e.type)){if("detail"===this.curEditImgName&&e.size>1024*wo*1024){const t=`压缩包大小不可超过${wo}MB`;return this.errorTip(t),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:t}),Promise.reject(new Error(t))}if(["bubble","corp"].includes(this.curEditImgName)&&e.size>1024*bo*1024){const t=/zip/.test(e.type)?"压缩包":"视频",i=`${t}大小不可超过${bo}MB`;return this.errorTip(i),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:i}),Promise.reject(i)}if(e.type?.includes("mp4")){const t=await(0,Xe.o)(e,(0,Xe.WY)(e.type)),{width:i,height:a,duration:s}=t;if(s>3){const i="时长不能超过3秒钟";return this.errorTip(i),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:i,videoInfo:t}),Promise.reject(new Error(i))}if(s<1){const i="时长不能少于1秒钟";return this.errorTip(i),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:i,videoInfo:t}),Promise.reject(new Error(i))}if("detail"===this.curEditImgName&&(i!==Ge.TE.width||a!==Ge.TE.height)){const i=`视频尺寸需为${Ge.TE.width}*${Ge.TE.height}`;return this.errorTip(i),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:i,videoInfo:t}),Promise.reject(new Error(i))}if("bubble"===this.curEditImgName&&(i!==Ge.Mx.width||a!==Ge.Mx.height)){const i=`视频尺寸需为${Ge.Mx.width}*${Ge.Mx.height}`;return this.errorTip(i),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:i,videoInfo:t}),Promise.reject(new Error("wrong size"))}if("corp"===this.curEditImgName&&(i!==Ge.s9.width||a!==Ge.s9.height)){const i=`视频尺寸需为${Ge.s9.width}*${Ge.s9.height}`;return this.errorTip(i),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:i,videoInfo:t}),Promise.reject(new Error("wrong size"))}}return Promise.resolve()}{if(e.size>1024*Co){const t=`图片大小不可超过${Co}KB`;return this.errorTip(t),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:t}),Promise.reject(new Error(t))}const t=await(0,ye.sT)(e);try{await this.validPic(t,"checkPic")}catch(a){const t=a.message;return this.errorTip(t),_o.mediaUploadReport(this.reportErrType,{file:e,failReason:t}),Promise.reject(t)}}},watchSourceImg(){if(!this.imgFile.dataUrl)return;const e=new Image,t=this.concatImg;e.setAttribute("crossOrigin","anonymous"),e.onload=async()=>{const i=(0,ye.lE)(t,e),a=(0,ye.MA)(e,e.naturalWidth,e.naturalHeight),s=(0,ye.MA)(e,e.naturalWidth,.27457*e.naturalHeight,(e.naturalHeight-.27457*e.naturalHeight)/2),r=(0,ye.MA)(e,e.naturalWidth,Ge.s9.height,(e.naturalHeight-Ge.s9.height)/2),o=await(0,Ge.JE)({coverUrl:this.imgFile.dataUrl,scale:.4});this.$emit("updateCropedImgList",{sourceImageUrl:this.imgFile.dataUrl,receiveImageUrl:i,detailImageUrl:a,bubbleImageUrl:s,corpImageUrl:r,openImageUrl:o})},e.src=this.imgFile.dataUrl},initCropBox(e){const t={detail:Ge.TE.width/Ge.TE.height,bubble:240/88,corp:Ge.s9.width/Ge.s9.height};let i=0;Io.forEach((e=>{this[`${e}Cropper`]?.destroy(),this[`${e}Cropper`]=null})),this.height=446,this.bubbleFromUpload&&"bubble"===e?this.height=157:this.corpFromUpload&&"corp"==e&&(this.height=113),this[`${e}Cropper`]=new(Ys())(this.$refs[`${e}Source`],{viewMode:3,guides:!1,aspectRatio:t[this.curEditImgName],scalable:!0,autoCropArea:"detail"===this.curEditImgName?1:.99,minContainerHeight:30,minContainerWidth:50,minCropBoxWidth:100,zoomable:!1,preview:`.preview-content-${e}`,cropmove:t=>{const a=t.detail.action;1===i&&_o.baseActionReport({actionType:"all"===a?"1":"2",coverId:this.cover.orderId||"",processType:"1",authorId:d.U6.user.authorId,editType:`${ko[e]}`}),i+=1},crop:t=>{const{x:i,y:a,width:s,height:r}=t.detail;!this[`${e}MoveXY`]||this[`${e}MoveXY`]?.x||this[`${e}MoveXY`]?.y||(this[`${e}MoveXY`].x=i,this[`${e}MoveXY`].y=a,this[`${e}MoveXY`].width=s,this[`${e}MoveXY`].height=r),this[`${e}MoveXY`]&&(this[`${e}MoveXY`].movingX=i,this[`${e}MoveXY`].movingY=a,this[`${e}MoveXY`].movingWidth=s,this[`${e}MoveXY`].movingHeight=r)},ready:()=>{if(this[`${e}MoveXY`].width>=0){const{x:t,y:i,width:a,height:s}=this[`${e}MoveXY`];this[`${e}Cropper`].setData({x:t,y:i,width:a,height:s})}}})},async editImg(e){this.curEditImgName=e,_o.baseActionReport({actionType:"3",coverId:this.cover.orderId||"",processType:"1",authorId:d.U6.user.authorId,editType:`${ko[e]}`}),d.l1.updateShowEditDialog(!0),await this.$nextTick();const t=this.$refs?.[`${e}MediaEditor`];await(t?.initMedia()),"static"===this.mode&&this.initCropBox(e)},async clipImg(){const{curEditImgName:e}=this,t=this[`${e}Cropper`];if(t){const i=await t.getCroppedCanvas().toDataURL("image/jpeg"),{movingX:a,movingY:s,movingWidth:r,movingHeight:o}=this[`${e}MoveXY`];this[`${e}MoveXY`].x=a,this[`${e}MoveXY`].y=s,this[`${e}MoveXY`].width=r,this[`${e}MoveXY`].height=o;const n={};n[e+"ImageUrl"]=i,this.$emit("updateCropedImgList",Object.assign({},this.cropedImgList,n)),this.$emit("changeImg",{key:`${e}Img`,value:{dataUrl:i}}),d.l1.updateShowEditDialog(!1)}},cancel(){d.l1.updateShowEditDialog(!1),this.uploadLoading=!1,this.clearAction()}}}),So=To,xo=(0,h.Z)(So,Vs,Js,!1,null,"9c2d96ae",null),Ao=xo.exports,Po=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("mp-form-item",{scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("添加跳转")])])]},proxy:!0}])},[t("mp-checkbox",{model:{value:e.whetherJump,callback:function(t){e.whetherJump=t},expression:"whetherJump"}},[t("span",{staticClass:"checkbox-label"},[e._v(e._s(e.wordingsMap.whereJump[e.principalAccountType]))]),t("span",{staticStyle:{color:"#9a9a9a","margin-left":"8px"}})]),t("div",{staticClass:"tip mt-2"},[e._v(" "+e._s(e.wordingsMap.tip[e.principalAccountType])+" ")]),t("div",{staticClass:"tip mt-2"},[t("span",[e._v(e._s(e.wordingsMap.tip2[e.principalAccountType]))]),t("mp-popover",{attrs:{position:"down-right",width:410,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("div",{staticClass:"store-info-image"},[t("img",{attrs:{src:i(31317)}}),"1_2"!==e.principalAccountType?t("img",{attrs:{src:i(93807)}}):e._e()]),t("p",[e._v("该功能在 iOS 微信 8.0.18 和 Android 微信 8.0.19 及以上版本支持")])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}])})],1)],1),e.whetherJump?t("mp-form-item",{staticClass:"choose-jump-type",scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("跳转链接")])])]},proxy:!0}],null,!1,3970313e3)},[t("mp-radio-group",{model:{value:e.radioJumpType,callback:function(t){e.radioJumpType=t},expression:"radioJumpType"}},[0===e.principalType?t("mp-radio",{attrs:{value:2}},[e._v("小程序")]):e._e(),"1_2"!==e.principalAccountType?t("mp-radio",{attrs:{value:1}},[e._v("公众号")]):e._e(),t("mp-radio",{attrs:{value:3}},[e._v("视频号")]),t("mp-radio",{attrs:{value:4}},[e._v("表情页面")])],1)],1):e._e(),e.radioJumpType?t("mp-form-item",{staticClass:"choose-jump-type",scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label mt-1.5"},[t("span",[e._v(e._s(`添加${e.typeText}`))])])]},proxy:!0}],null,!1,2949527331)},[0!=e.radioJumpType?t("mp-button",{staticClass:"weui-btn_mini_108px",attrs:{size:"mini"},on:{click:function(t){return t.preventDefault(),e.add(!!e.curAction.appName)}}},[e._v(" "+e._s(e.curAction.appName?"重新添加":"添加")+" ")]):e._e(),e.curAction.appName?t("div",{staticClass:"action-wrap"},[e.curAction.username||e.curAction.nickname?t("div",{staticClass:"action-info"},[t("div",{staticClass:"action-info_content"},[t("img",{staticClass:"avatar",class:6===e.curAction.actionType?"avatar2":"",attrs:{src:e.curAction.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.curAction.nickname))])]),e.showAuthQrcode?t("div",{staticClass:"action-info_authstatus"},[e.authorizeSuccess?t("span",[e._v("已授权")]):[t("a",{staticClass:"btn-auth-dialog",on:{click:function(t){return t.preventDefault(),e.add(!1)}}},[e._v("打开授权码")]),t("span",[e._v("未授权")])]],2):e._e(),t("div",{staticClass:"delete",on:{click:e.deleteEnter}})]):e._e(),e.radioJumpType===e.JumpTypeName["小程序"]?t("div",{staticClass:"action-path"},[t("div",{staticClass:"tips"},[t("div",{staticClass:"tip"},[e._v("可跳转到小程序路径指定的页面")]),t("div",{staticClass:"tip"},[t("span",[e._v("默认是小程序首页的路径，可更改。如需更多页面路径，请登录")]),t("a",{attrs:{href:"https://mp.weixin.qq.com/",target:"_blank"}},[e._v("微信公众平台")]),t("span",[e._v("获取，")]),t("a",{attrs:{href:"https://kf.qq.com/faq/180725biaAn2180725VnQjYF.html",target:"_blank"}},[e._v("查看操作指引")])])]),t("mp-input",{attrs:{placeholder:"请输入小程序页面路径"},model:{value:e.path,callback:function(t){e.path=t},expression:"path"}}),e.showPathError?t("div",{staticClass:"tip error"},[e._v("该路径无效")]):e._e(),t("div",{staticClass:"preview",staticStyle:{"margin-top":"12px"}},[t("a",{on:{click:function(t){return t.preventDefault(),e.preview.apply(null,arguments)}}},[e._v("预览小程序")])])],1):e._e()]):e._e(),e.authorizeWaiting&&e.curAction.appName?t("div",{staticClass:"auth-tips"},[e._v("未授权无法提交封面")]):e._e()],1):e._e(),e.radioJumpType===e.JumpTypeName["视频号"]?t("SearchFinderDialog",{attrs:{jumpInfo:e.curAction,orderId:e.orderId,hideAuthQrcode:e.hideAuthQrcode},on:{submit:e.handleFinderSearchDialogSubmit},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e.radioJumpType===e.JumpTypeName["表情页面"]?t("SearchEmotionDialog",{on:{submit:e.handleEmotionSearchDialogSubmit},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):t("mp-dialog",{staticClass:"search-dialog",attrs:{title:`添加${e.typeText}`,value:e.showDialog,closable:!0,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[!e.info.username||e.showError||e.showAuthQrcode&&!e.hideAuthQrcode?e._e():t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1)],1)]},proxy:!0}])},[t("div",{ref:"dialog",staticClass:"dialog-body"},[!e.hideAuthQrcode&&e.showAuthQrcode?t("ActionAuthQrcode",{attrs:{jumpInfo:e.curAction,orderId:e.orderId}}):[t("mp-input",{attrs:{placeholder:e.searchPlaceholer,clearable:"clearable"},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap",class:{"default-height":!e.info.username}},[e.info.username?t("div",{staticClass:"result"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList}})],1):t("div",{staticClass:"tip"},[e.radioJumpType===e.JumpTypeName["小程序"]&&e.showError?[t("span",{staticClass:"error"},[e._v("请输入正确的AppID/帐号原始ID，并确保小程序允许被搜索")])]:e._e(),e.radioJumpType===e.JumpTypeName["公众号"]&&e.showError?[t("span",{staticClass:"error"},[e._v("请输入正确的公众号微信号/帐号原始ID")])]:e._e()],2)])]],2)]),t("mp-dialog",{staticClass:"preview-dialog",attrs:{title:"预览小程序",value:e.showPreviewDialog},on:{input:e.togglePreviewDialog}},[t("div",{staticClass:"content"},[t("div",{staticClass:"qrcode-wrap"},[e.preivewQrcodeUrl?t("img",{staticClass:"qrcode",attrs:{src:e.preivewQrcodeUrl}}):e._e()])])])],1)},Do=[],Uo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:`${e.titleText}视频号`,value:e.value,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[!e.hadSearchResult||e.showAuthQrcode&&!e.hideAuthQrcode?e._e():t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.hadSearchResult||e.showError||!e.info.username,loading:e.submitLoading},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1)],1)]},proxy:!0}])},[t("div",{ref:"dialog",staticClass:"dialog-body"},[!e.hideAuthQrcode&&e.showAuthQrcode?t("ActionAuthQrcode",{attrs:{jumpInfo:e.jumpInfo,orderId:e.orderId}}):[t("mp-input",{attrs:{placeholder:"输入视频号名称/绑定的微信号",clearable:"clearable"},on:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("span",[e._v("搜索")])])])]},proxy:!0}]),model:{value:e.querying,callback:function(t){e.querying=t},expression:"querying"}}),t("div",{staticClass:"search-result-wrap",class:{"default-height":!e.hadSearchResult}},[e.hadSearchResult?t("div",{staticClass:"result-list"},[t("jump-info-list",{attrs:{"jump-info-list":e.jumpInfoList},on:{"radio-change":e.handleRadioChange}})],1):t("div",{staticClass:"tip"},[e.showError?[t("span",{staticClass:"error"},[e._v("请输入正确的视频号名称/绑定的微信号")])]:e._e()],2)])]],2)])},Eo=[],Ro=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"qrcode-wrap"},[t("div",{staticClass:"topTitle"},[e._v(e._s(e.topTitle))]),t("div",{staticClass:"qrcode",class:{showMask:1!==e.status,border:!e.authQrcode}},[t("img",{staticClass:"qrq",attrs:{src:"https://res.wx.qq.com/t/fed_upload/b7d329b5-c8e2-434c-b0d5-cb3b52809c30/1.png"}}),e.authQrcode?t("img",{attrs:{src:e.authQrcode}}):e._e(),t("div",{staticClass:"mask",on:{click:e.genAuthQrcode}},[e.isFailed||e.isExpired?t("svg-icon",{staticClass:"reload-icon",class:{"reload-loading":e.fetchLoading},attrs:{name:"reload"}}):e.isSuccess?t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}}):e._e()],1)]),t("div",{staticClass:"second-tips"},[e._v("有效期为12小时")]),e.isFailed||e.isExpired?t("div",{staticClass:"title"},[t("mp-icon",{staticClass:"fail-icon",attrs:{icon:"exclamation_mark_circle_filled",color:"#ffc300"}}),t("span",[e._v("二维码过期，请刷新重试")])],1):e._e()])},Mo=[];const{mapState:Lo}=(0,fe._p)("cover");var No=a.ZP.extend({name:"ActionAuthQrcode",props:{jumpInfo:Object,orderId:String},data:()=>({genQrcodeLoading:!1,timer:0,fetchLoading:!1}),computed:{...Lo(["actionAuthInfo"]),authQrcode(){return this.actionAuthInfo?.qrcodeBase64},status(){return this.actionAuthInfo?.status},isFailed(){return this.status===de.WX.ACTION_QRCODE_INVAILID},isExpired(){return this.status===de.WX.ACTION_QRCODE_EXPIRED},isSuccess(){return this.status===de.WX.ACTION_QRCODE_COMFIRMED},topTitle(){const e=4===this.jumpInfo.actionType?"绑定的微信":"管理员的微信";return`「${this.jumpInfo.nickname||"-"}」${e}扫码授权后可添加`}},methods:{async genAuthQrcode(){if(!this.fetchLoading){this.fetchLoading=!0;try{await d.l1.genActionAuthQrcode({action:this.jumpInfo,order_id:this.orderId,vm:this})}finally{this.fetchLoading=!1}}}}}),Fo=No,Oo=(0,h.Z)(Fo,Ro,Mo,!1,null,"53e2a0a5",null),Bo=Oo.exports;const qo=new je.ZP,{mapGetters:Qo}=(0,fe._p)("user"),{mapGetters:jo}=(0,fe._p)("cover");var $o=a.ZP.extend({name:"SearchFinderDialog",components:{ActionAuthQrcode:Bo,JumpInfoList:Xt.Z},data(){return{querying:"",query:"",info:{},jumpInfoList:[],showError:!1,submitLoading:!1}},props:{value:Boolean,mode:{type:String,default:"add"},jumpInfo:{type:Object,default:()=>({})},orderId:String,hideAuthQrcode:Boolean},computed:{...jo(["authorizeWaiting","showAuthQrcode","actionAuthInfoStatus"]),...Qo(["principalAccountType"]),hadSearchResult(){return!!this.jumpInfoList.length&&!this.showError},titleText(){const e=this;return"add"===e.mode?"添加":"选择"},accountType(){return d.U6.user.accountType}},mounted(){document.addEventListener("keydown",this.handleEnterKeyDown)},beforeDestroy(){document.removeEventListener("keydown",this.handleEnterKeyDown)},watch:{value(e){e||this.clear()}},methods:{handleRadioChange(e){this.info=this.$set(this,"info",e)},handleEnterKeyDown(e){const t="undefined"!=typeof event?window.event:e,i=this;if(t&&13==t.keyCode&&i.value)return t.preventDefault(),t.stopPropagation(),i.search(),!1},clear(){this.info={},this.jumpInfoList=[],this.showError=!1,this.query="",this.querying=""},closeDialog(){this.clear(),this.$emit("input",!1)},async search(){if(!this.querying)return;this.showError=!1,this.info={};const e=await qo.storyGetFinderInfo(this.querying);e&&0===e.baseResponse.ret?(this.jumpInfoList=e.jumpInfoList.filter((e=>!(!e.headImgUrl&&e.scene===je.DS.finder))).sort(((e,t)=>e.isSameBody===t.isSameBody?e.nickname===t.nickname?0:e.nickname?.toLocaleLowerCase()===this.querying?.toLocaleLowerCase()?-1:t.nickname?.toLocaleLowerCase()===this.querying?.toLocaleLowerCase()?1:0:e.isSameBody?-1:1)),this.jumpInfoList.length>1&&this.jumpInfoList.every((e=>e.username===this.jumpInfoList[0].username))&&(this.jumpInfoList=this.jumpInfoList.slice(0,1)),this.query=this.querying,this.showError=!e.jumpInfoList.length):this.showError=!0},async submit(){const e=Object.assign({},this.info,{username:this.info.username,appName:this.query,query:this.query,queryString:this.query});try{this.submitLoading=!0,await d.l1.genActionAuthQrcode({action:{actionType:4,finderProfileDetail:{...e}},order_id:this.orderId,vm:this}),this.$emit("submit",e),this.actionAuthInfoStatus===de.WX.ACTION_QRCODE_AUTOCONFIRMED&&this.closeDialog()}finally{this.submitLoading=!1}}}}),Zo=$o,Ho=(0,h.Z)(Zo,Uo,Eo,!1,null,"23ccf96a",null),Go=Ho.exports,Wo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"添加表情页面",value:e.value,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{staticClass:"dialog-body"},[0===e.emotionStep?[t("div",{staticClass:"title-tips"},[e._v("请输入表情平台注册邮箱")]),t("mp-form",{ref:"form",staticClass:"mail-form2",attrs:{model:e.form,rules:e.rules,"label-width":60},nativeOn:{submit:function(e){e.preventDefault()}}},[t("mp-form-item",{attrs:{prop:"email",label:""}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入邮箱"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emotionNext.apply(null,arguments)}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)]:e._e(),1===e.emotionStep?[t("div",{staticClass:"title-tips2"},[e._v("微信扫码认证")]),t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:e.normalText,status:e.qrcodeStatus,failText:e.failText},on:{reload:e.loadQrcode}})]:e._e(),2===e.emotionStep?[t("div",{staticClass:"title-tips"},[e._v("选择要跳转的表情页面")]),t("mp-radio-group",{staticClass:"list",model:{value:e.enmotionid,callback:function(t){e.enmotionid=t},expression:"enmotionid"}},[e.enmotion.name?[t("div",{staticClass:"list-title"},[e._v("艺术家主页")]),t("div",{staticClass:"flex-c-c list-item"},[t("img",{staticClass:"list-item-avatar",attrs:{src:e.enmotion.headUrl||e.defaultAvatar}}),t("div",{staticClass:"list-item-name"},[e._v(e._s(e.enmotion.name))]),t("div",{staticClass:"a"},[t("mp-radio",{staticClass:"radio",attrs:{value:"designerPerson"}})],1)])]:e._e(),t("div",{staticClass:"list-title"},[e._v("表情专辑")]),e._l(e.enmotion.emotionProductInfo,(function(i){return t("div",{key:i.name,staticClass:"list-item"},[t("img",{staticClass:"list-item-avatar list-item-avatar2",attrs:{src:i.icon}}),t("div",{staticClass:"list-item-wrap"},[t("div",{staticClass:"list-item-name"},[e._v(e._s(i.name))]),t("div",{staticClass:"list-item-desc"},[e._v(e._s(i.desc))])]),t("div",{staticClass:"a"},[t("mp-radio",{staticClass:"radio",attrs:{value:i.productId}})],1)])}))],2)]:e._e()],2),1!==e.emotionStep?t("div",{staticClass:"dialog-footer weui-desktop-dialog__ft"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.form.email||e.showError},on:{click:function(t){return t.preventDefault(),e.emotionNext.apply(null,arguments)}}},[e._v("下一步")])],1):e._e()])},zo=[],Vo=a.ZP.extend({components:{Qrcode:L.Z},props:{value:Boolean},data(){return{rules:{email:[{required:!0,message:"注册邮箱不能为空",trigger:"blur"},{trigger:"blur",validator(e,t,i){return(0,ye.Q7)(t)?i():i(new Error("请填写正确格式的邮箱地址"))}}]},form:{email:""},enmotionid:"",qrcodeUrl:"",enmotion:{},normalText:"",qrcodeStatus:0,emotionStep:0,checkInterval:0,showError:!1,token:"",failText:""}},computed:{},beforeDestroy(){clearInterval(this.checkInterval),document.onkeydown=()=>{}},watch:{form:{deep:!0,handler(){(0,ye.Q7)(this.form.email)?this.showError=!1:this.showError=!0}}},methods:{async checkQrcode(){const e=await(new l.ZP).checkEmotionJumpQrcode(this.token);e&&1!==e.baseResponse.ret&&(clearInterval(this.checkInterval),0===e.baseResponse.ret?(this.enmotion=e,this.emotionStep=this.emotionStep+1):2===e.baseResponse.ret?(this.qrcodeStatus=L.R.fail,this.failText="未成功扫码，请先绑定表情账号"):this.qrcodeStatus=L.R.expired)},async loadQrcode(){const e=this,t=await(new l.ZP).getEmotionJumpQrcode(this.form.email);if(t){if(-2===t.baseResponse.ret)return e.$tipsErr("链接已过期，请重新发起"),window.setTimeout((()=>e.$tipsHide()),3e3),void window.setTimeout((()=>e.closeDialog()),3e3);if(1===t.baseResponse.ret)return e.$tipsErr("没有艺术家账号"),void window.setTimeout((()=>e.$tipsHide()),3e3);this.qrcodeStatus=L.R.normal,this.qrcodeUrl=t.image,this.token=t.token,this.checkInterval=window.setInterval((()=>this.checkQrcode()),1e3)}},emotionNext(){if(0===this.emotionStep)this.loadQrcode(),this.emotionStep=this.emotionStep+1;else if(2===this.emotionStep){let e={};"designerPerson"==this.enmotionid?e={jumpType:4,actionType:5,designerUin:this.enmotion.designerUin,name:this.enmotion.name,appName:this.enmotion.name,nickname:this.enmotion.name,headImgUrl:this.enmotion.headUrl,headUrl:this.enmotion.headUrl,emotionProfileDetail:{designerUin:this.enmotion.designerUin,name:this.enmotion.name,headUrl:this.enmotion.headUrl}}:""!=this.enmotionid&&this.enmotion.emotionProductInfo.forEach((t=>{t.productId==this.enmotionid&&(e={jumpType:4,actionType:6,name:t.name,appName:t.name,nickname:t.name,productId:t.productId,desc:t.desc,headImgUrl:t.icon,emotionProductDetail:{productId:t.productId}})})),this.$emit("submit",e),this.closeDialog()}},closeDialog(){this.showError=!1,this.emotionStep=0,this.$emit("input",!1)}}}),Jo=Vo,Ko=(0,h.Z)(Jo,Wo,zo,!1,null,"37898c52",null),Yo=Ko.exports;const Xo=new je.ZP,{mapGetters:en}=(0,fe._p)("user"),{mapGetters:tn,mapState:an}=(0,fe._p)("cover");var sn;(function(e){e[e["输入公众号微信号或账号原始ID"]=1]="输入公众号微信号或账号原始ID",e[e["输入AppID或账号原始ID"]=2]="输入AppID或账号原始ID",e[e["输入视频号名称/绑定的微信号"]=3]="输入视频号名称/绑定的微信号",e[e["请输入邮箱"]=4]="请输入邮箱"})(sn||(sn={}));const rn={whereJump:{"0_0":"添加跳转的小程序/公众号/视频号/表情页面","0_1":"添加跳转的小程序/公众号/视频号/表情页面","1_2":"添加跳转的视频号/表情页面","1_1":"添加跳转的公众号/视频号/表情页面"},tip:{"0_0":"在封面故事里，可添加跳转小程序、公众号、视频号或表情页面的入口（四选一）；","0_1":"在封面故事里，可添加跳转小程序、公众号、视频号或表情页面的入口（四选一）；","1_2":"在封面故事里，可添加跳转视频号或表情页面的入口（二选一）；","1_1":"在封面故事里，可添加跳转公众号、视频号或表情页面的入口（三选一）；"},tip2:{"0_0":"添加跳转公众号和视频号可在红包详情页显示跳转链接","0_1":"添加跳转公众号和视频号可在红包详情页显示跳转链接","1_2":"添加跳转视频号可在红包详情页显示跳转链接","1_1":"添加跳转公众号和视频号可在红包详情页显示跳转链接"}};var on=a.ZP.extend({name:"AddMiniApp",components:{SearchFinderDialog:Go,SearchEmotionDialog:Yo,ActionAuthQrcode:Bo,JumpInfoList:Xt.Z},data(){return{ActionQrCodeStatus:de.WX,wordingsMap:rn,curAction:{jumpType:de.Vo.init,appName:""},whetherJump:!1,radioJumpType:de.Vo.init,JumpTypeName:de.d5,showDialog:!1,showPreviewDialog:!1,querying:"",query:"",info:{},path:"",showError:!1,showPathError:!1,preivewQrcodeUrl:"",hideAuthQrcode:!1,submitLoading:!1,successTimer:0,jumpInfoList:[]}},props:{action:{},setOpenStroy:Function,clearSaveVideo:Function,saveVideo:{type:Object,default:()=>({})},orderId:String},async mounted(){const e=this;if(e.action&&e.action.actionType){d.l1.checkActionAuthQrcodeStatus();const t=e.action;if(this.whetherJump=!0,3===t.actionType?(e.curAction.jumpType=2,e.curAction.appName=t.miniAppDetail.appName,e.path=t.miniAppDetail.path):2===t.actionType?(e.curAction.jumpType=1,e.curAction.appName=t.mpAccountDetail.appName):4===t.actionType?(e.curAction.jumpType=3,e.curAction.appName=t.finderProfileDetail.username,e.curAction.username=t.finderProfileDetail.username):5===t.actionType?(e.curAction.jumpType=4,e.curAction.appName=t.emotionProfileDetail.designerUin):6===t.actionType&&(e.curAction.jumpType=4,e.curAction.appName=t.emotionProductDetail.productId),e.radioJumpType=e.curAction.jumpType,2===t.actionType||3===t.actionType){const t=await Xo.storyGetBizInfo(e.curAction.appName.replace("@app",""),this.radioJumpType);t&&0===t.baseResponse.ret&&(a.ZP.set(e.curAction,"headImgUrl",t.headImgUrl),a.ZP.set(e.curAction,"nickname",t.nickname),a.ZP.set(e.curAction,"username",t.username.replace("@app","")),this.updateAction())}else if(4===t.actionType){this.query=t.finderProfileDetail.queryString;const i=await Xo.storyGetFinderInfo(t.finderProfileDetail.queryString);if(i&&0===i.baseResponse.ret){const s=i.jumpInfoList.find((e=>e.username===t.finderProfileDetail.username));s&&(this.info=s,a.ZP.set(e.curAction,"headImgUrl",s.headImgUrl),a.ZP.set(e.curAction,"nickname",s.nickname),this.updateAction())}}else 5!==t.actionType&&6!==t.actionType||(this.radioJumpType=4,this.info={nickname:t.showName,headImgUrl:t.showHeadUrl,appName:t.showName},a.ZP.set(e.curAction,"headImgUrl",t.showHeadUrl),a.ZP.set(e.curAction,"nickname",t.showName),this.$emit("setAction",t))}document.onkeydown=e=>{var t="undefined"!=typeof event?window.event:e;if(t&&13==t.keyCode&&this.showDialog)return e.preventDefault(),e.stopPropagation(),this.search(),!1}},beforeDestroy(){document.onkeydown=()=>{}},watch:{async radioJumpType(e,t){const i=this;if(console.log("radioJumpType",i.saveVideo),this.radioJumpType==de.Vo.finder&&i.saveVideo&&i.saveVideo.appName&&this.orderId){const e=await Xo.storyGetFinderInfo(i.saveVideo.query);if(this.curAction.jumpType=3,e&&0===e.baseResponse.ret){const t=e.jumpInfoList.find((e=>e.username===i.saveVideo.username));t&&(this.info=t,a.ZP.set(i.curAction,"headImgUrl",t.headImgUrl),a.ZP.set(i.curAction,"nickname",t.nickname),a.ZP.set(i.curAction,"appName",i.saveVideo.username),this.updateAction(),await d.l1.genActionAuthQrcode({action:this.curAction,order_id:this.orderId,vm:this}))}i.clearSaveVideo()}else{if(t===de.Vo.init)return;this.clearAction(),(0,Lt.H)("切换radio删除跳转")}},async saveVideo(){const e=this;if(console.log(e.saveVideo),this.radioJumpType==de.Vo.finder&&e.saveVideo&&e.saveVideo.appName&&this.orderId){const t=await Xo.storyGetFinderInfo(e.saveVideo.query);if(this.curAction.jumpType=3,t&&0===t.baseResponse.ret){const i=t.jumpInfoList.find((e=>e.username===this.info.username));i&&(this.info=i,a.ZP.set(e.curAction,"headImgUrl",i.headImgUrl),a.ZP.set(e.curAction,"nickname",i.nickname),a.ZP.set(e.curAction,"appName",e.saveVideo.username),this.updateAction(),await d.l1.genActionAuthQrcode({action:this.curAction,order_id:this.orderId,vm:this}))}e.clearSaveVideo()}},path(){this.updateAction()},whetherJump(e){e&&!this.orderId&&this.$emit("genOrderId"),e||(this.radioJumpType=de.Vo.init),this.setOpenStroy(this.whetherJump)},showDialog(){clearTimeout(this.successTimer)},authorizeSuccess(e){e&&this.showDialog&&(this.successTimer=window.setTimeout((()=>{this.closeDialog()}),1e3))}},computed:{...en(["principalAccountType","principalType"]),...tn(["authorizeSuccess","authorizeWaiting","showAuthQrcode","actionAuthInfoStatus"]),...an(["actionAuthInfo"]),searchPlaceholer(){const e=this;return sn[e.radioJumpType]},typeText(){const e=this;return de.d5[e.radioJumpType]}},methods:{clearAction(){this.info={},this.curAction={},this.$emit("setAction",{}),this.$store.commit("cover/CLEAR_ACTION_AUTH_INFO")},deleteEnter(){this.query="",this.clearAction(),this.clearSaveVideo(),(0,Lt.H)("删除跳转")},add(e=!1){this.hideAuthQrcode=e,this.showDialog=!0},togglePreviewDialog(e){this.showPreviewDialog=e},closeDialog(){this.showDialog=!1,this.showError=!1,this.querying="",this.jumpInfoList=[]},async search(){if(this.querying&&(this.showError=!1,this.radioJumpType==de.Vo.biz||this.radioJumpType==de.Vo.miniApp)){const e=await Xo.storyGetBizInfo(this.querying,this.radioJumpType);e&&0===e.baseResponse.ret?(this.query=this.querying,this.info=e,this.jumpInfoList=[e],this.showError=!1):(this.info={},this.showError=!0)}},async submit(){this.curAction=Object.assign({},this.info,{appName:this.query||this.curAction.username,jumpType:this.radioJumpType}),this.updateAction(),this.hideAuthQrcode=!1;try{this.submitLoading=!0,await d.l1.genActionAuthQrcode({action:this.curAction,order_id:this.orderId,vm:this}),this.actionAuthInfoStatus===de.WX.ACTION_QRCODE_AUTOCONFIRMED&&this.closeDialog()}finally{this.submitLoading=!1}},handleFinderSearchDialogSubmit(e){this.info=e;var t=Object.assign({},e,{jumpType:de.Vo.finder,actionType:de.Vo.finder+1,finderProfileDetail:e,isType:!0});this.curAction=t,this.hideAuthQrcode=!1,this.$emit("setAction",t)},handleEmotionSearchDialogSubmit(e){this.curAction=e,this.$emit("setAction",e),this.closeDialog()},updateAction(){const e={actionType:this.curAction.jumpType+1,nickname:this.curAction.nickname};3===e.actionType?(Object.assign(e,{miniAppDetail:{appName:this.curAction.username,path:this.path}}),this.$store.commit("cover/SET_ACTION_AUTH_INFO_MINIAPP_PATH",this.path)):2===e.actionType?Object.assign(e,{mpAccountDetail:{appName:this.curAction.username}}):4===e.actionType&&Object.assign(e,{finderProfileDetail:{username:this.curAction.appName,queryString:this.curAction.finderProfileDetail?.queryString}}),Object.assign(this.curAction,e),this.$emit("setAction",e)},async preview(){const e=await Xo.storyGetMiniAppQrcode(this.curAction.appName.replace("@app",""),this.path);e&&0===e.baseResponse.ret?(this.showPreviewDialog=!0,this.preivewQrcodeUrl=e.qrCodeImage):this.showPathError=!0}}}),nn=on,cn=(0,h.Z)(nn,Po,Do,!1,null,"14e631a6",null),ln=cn.exports,dn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{attrs:{value:e.value,title:"新版封面",width:655,desc:"包含封面图和挂件素材，挂件可突破红包边框、展示更灵动。"},on:{close:e.close}},[t("img",{staticClass:"w-full",attrs:{src:"https://res.wx.qq.com/t/fed_upload/5195a857-c70e-4456-a4ef-6a5866d8a663/example.png"}})])},pn=[],un=a.ZP.extend({components:{},props:{value:Boolean},data(){return{}},computed:{},methods:{close(){this.$emit("input",!1)}}}),hn=un,mn=(0,h.Z)(hn,dn,pn,!1,null,"1e399dfc",null),gn=mn.exports,vn=i(9669),fn=i.n(vn),yn=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.errorInfo.msg||e.errorInfo.type?t("div",{staticClass:"CoverPicUploadError-Component"},[e.errorInfo.type?.startsWith("transparent_area")?t("div",{staticClass:"error-msg icon-err"},[e._v(" 挂件进入不可编辑区， "),this.errorInfo.file?t("span",{staticClass:"btn-detail",attrs:{href:"javascript:;",role:"button"},on:{click:e.openDialog}},[e._v(" 查看详情 "),t("svg-icon",{staticClass:"icon-detail",attrs:{name:"icon-detail"}})],1):e._e()]):t("div",{staticClass:"error-msg icon-err",domProps:{innerHTML:e._s(e.errorInfo.msg)}}),t("mp-dialog",{attrs:{title:"素材错误详情"},on:{"visible-change":e.handleDialogVisibleChange},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticClass:"dialog-content"},[t("div",{staticClass:"detial-item"},[t("div",{staticClass:"label"},[e._v("错误原因：")]),t("div",{staticClass:"value"},[e._v("挂件进入不可编辑区")])]),t("div",{staticClass:"img-detial"},[e.pic?t("div",{class:["img-wrapper","transparent_area_cover_widget"===e.type?"cover-widget-pic":"bubble-widget-pic"]},[t("img",{attrs:{src:e.pic}}),t("p",{staticClass:"ban-edit-text"},[e._v("不可编辑区")])]):e._e(),t("div",{staticClass:"img-tips"},[e._v("素材错误图示")])])])])],1):e._e()},_n=[],Cn=a.ZP.extend({props:{errorInfo:{type:Object,default:()=>({type:"",msg:"",file:null})}},data(){return{pic:"",widgetUrl:"",visible:!1}},computed:{fileSize(){const{file:e}=this.errorInfo;return e?zt(e.size).toUpperCase():0},fileName(){const{file:e}=this.errorInfo;return e?e.name:""},type(){return this.errorInfo.type}},watch:{"errorInfo.file":{handler(){this.pic=""}}},methods:{mergePic(){if(this.pic)return;const e=.5;let t=[],i={};if("transparent_area_cover_widget"===this.type){const{width:a,sourceHeight:s}=Ge.g$;t=[{url:this.widgetUrl,width:a*e,height:s*e},{url:"https://res.wx.qq.com/t/fed_upload/ed4ee2d7-84d0-45e3-886c-a6bdd40a966c/valid_widget_cover.png",width:a*e,height:s*e}],i=new Ge.mc(t,{width:a*e,height:s*e})}else if("transparent_area_bubble_widget"===this.type){const{width:a,height:s}=Ge._N;t=[{url:this.widgetUrl,width:a*e,height:s*e},{url:"https://res.wx.qq.com/t/fed_upload/ed4ee2d7-84d0-45e3-886c-a6bdd40a966c/valid_widget_bubble.png",width:a*e,height:s*e}],i=new Ge.mc(t,{width:a*e,height:s*e})}i.outputImg().then((e=>{this.pic=e}))},async handleWidget(){const{file:e}=this.errorInfo;if(e){const t=await(0,ye.sT)(e);this.widgetUrl=t,this.mergePic()}},handleDialogVisibleChange(e){e&&this.handleWidget()},openDialog(){this.visible=!0}}}),bn=Cn,wn=(0,h.Z)(bn,yn,_n,!1,null,"dfe09240",null),In=wn.exports,kn=i(80579),Tn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"PreviewCover flex flex-col",style:{"padding-left":e.isAtmosphereCover?"":"var(--preview-padding-x)","padding-right":e.isAtmosphereCover?"":"var(--preview-padding-x)"}},[t("mp-dropdown",{staticClass:"preview-cover-dropdown mx-auto my-2",attrs:{type:"default",options:e.options,trigger:"hover"},on:{select:e.onSelect},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.selectedType,expression:"selectedType === 1"}]},[t("div",{staticClass:"preview-area"},[t("base-info-preview",{directives:[{name:"show",rawName:"v-show",value:"bubble"===e.activeType,expression:"activeType === 'bubble'"}],staticClass:"preview-pic",attrs:{loading:e.baseInfoLoading,packetName:e.packetName,logoUrl:e.logoUrl,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,bubbleImageDynamicUrl:e.bubbleImageDynamicUrl,widgetUrl:e.senderC2cWidgetImageUrl,autoplay:1===e.selectedType&&"bubble"===e.activeType}}),t("corp-info-preview",{directives:[{name:"show",rawName:"v-show",value:"corp"===e.activeType,expression:"activeType === 'corp'"}],staticClass:"preview-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName,loading:e.corpInfoLoading,corpLogoDynamicUrl:e.corpLogoDynamicUrl,autoplay:1===e.selectedType&&"corp"===e.activeType}}),e.storyMediaList.length?e._l(e.storyMediaList,(function(i,a){return t("div",{directives:[{name:"show",rawName:"v-show",value:"story"===e.activeType&&e.activeIndex===a,expression:"activeType === 'story' && activeIndex === index"}],key:i.mediaUrl},[t("story-preview",{staticClass:"story-preview",attrs:{cover:e.cover,"story-info":i,autoplay:!0,isActive:"story"===e.activeType&&a===e.activeIndex}})],1)})):e._e()],2),t("div",{staticClass:"thumb-list1 relative mx-auto flex",staticStyle:{width:"var(--thumb-list-width)"}},[t("mask-icon",{directives:[{name:"show",rawName:"v-show",value:"left"===e.showBtn&&e.showDirectionBtn,expression:"showBtn === 'left' && showDirectionBtn"}],staticClass:"btn-prev absolute left-0 top-1/2 mt-[-8px] h-4 w-4 cursor-pointer",attrs:{name:"leftbtn"},nativeOn:{click:function(t){return e.goNavEnd("left")}}}),t("div",{ref:"coverStyleThumbList",staticClass:"thumb-list w-[195px]",class:e.showDirectionBtn?"justify-start":"justify-center"},[t("div",{staticClass:"thumb-item",class:{"thumb-active":"bubble"===e.activeType},on:{click:function(t){return e.triggerPreview("bubble")}}},[t("base-info-preview",{staticClass:"thumb-item-pic",attrs:{logoUrl:e.logoUrl,packetName:e.packetName,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,widgetUrl:e.senderC2cWidgetImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"corp"===e.activeType},on:{click:function(t){return e.triggerPreview("corp")}}},[t("corp-info-preview",{staticClass:"thumb-item-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName}})],1),e.storyMediaList.length?e._l(e.storyMediaList,(function(i,a){return t("div",{key:i.mediaUrl,staticClass:"preview-thumb-item",class:{"thumb-active":"story"===e.activeType&&e.activeIndex===a},on:{click:function(t){return e.triggerPreview("story",a)}}},[t("story-preview",{staticClass:"story-thumb-preview",attrs:{cover:e.cover,width:22,height:47,"story-info":i}})],1)})):e._e()],2),t("mask-icon",{directives:[{name:"show",rawName:"v-show",value:"right"===e.showBtn&&e.showDirectionBtn,expression:"showBtn === 'right' && showDirectionBtn"}],staticClass:"btn-next absolute right-0 top-1/2 mt-[-8px] h-4 w-4 cursor-pointer",attrs:{name:"rightbtn"},nativeOn:{click:function(t){return e.goNavEnd("right")}}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.selectedType,expression:"selectedType === 2"}]},[t("div",{staticClass:"preview-area"},[t("cover-info-preview",{directives:[{name:"show",rawName:"v-show",value:"cover"===e.activeType,expression:"activeType === 'cover'"}],staticClass:"preview-pic",attrs:{coverImageDynamicType:e.coverImageDynamicType,coverImageDynamicUrl:e.coverImageDynamicUrl,loading:e.coverInfoLoading,coverUrl:e.receiveImageUrl,widgetUrl:e.recWidgetImageUrl,autoplay:2===e.selectedType&&"cover"===e.activeType}}),t("base-info-preview",{directives:[{name:"show",rawName:"v-show",value:"bubble"===e.activeType,expression:"activeType === 'bubble'"}],staticClass:"preview-pic",attrs:{packetName:e.packetName,logoUrl:e.logoUrl,loading:e.baseInfoLoading,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,bubbleImageDynamicUrl:e.bubbleImageDynamicUrl,widgetUrl:e.senderC2cWidgetImageUrl,autoplay:2===e.selectedType&&"bubble"===e.activeType}}),t("cover-detail-img",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.activeType,expression:"activeType === 'detail'"}],staticClass:"preview-pic no-border",attrs:{actionList:e.actionList,mediaInfo:e.firstStoryMedia,loading:e.coverDetailLoading,picUrl:e.detailImageUrl,detailImageDynamicUrl:e.detailImageDynamicUrl,autoplay:2===e.selectedType&&"detail"===e.activeType}}),t("corp-info-preview",{directives:[{name:"show",rawName:"v-show",value:"corp"===e.activeType,expression:"activeType === 'corp'"}],staticClass:"preview-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName,loading:e.corpInfoLoading,corpLogoDynamicUrl:e.corpLogoDynamicUrl,autoplay:2===e.selectedType&&"corp"===e.activeType}})],1),t("div",{staticClass:"thumb-list justify-center"},[t("div",{staticClass:"thumb-item",class:{"thumb-active":"cover"===e.activeType},on:{click:function(t){return e.triggerPreview("cover")}}},[t("cover-info-preview",{staticClass:"thumb-item-pic",attrs:{coverUrl:e.receiveImageUrl,widgetUrl:e.recWidgetImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"bubble"===e.activeType},on:{click:function(t){return e.triggerPreview("bubble")}}},[t("base-info-preview",{staticClass:"thumb-item-pic",attrs:{logoUrl:e.logoUrl,packetName:e.packetName,cropedImgList:e.cropedImgList,bubbleImageUrl:e.bubbleImageUrl,widgetUrl:e.senderC2cWidgetImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"detail"===e.activeType},on:{click:function(t){return e.triggerPreview("detail")}}},[t("cover-detail-img",{staticClass:"thumb-item-pic",attrs:{actionList:e.actionList,mediaInfo:e.firstStoryMedia,picUrl:e.detailImageUrl}})],1),t("div",{staticClass:"thumb-item",class:{"thumb-active":"corp"===e.activeType},on:{click:function(t){return e.triggerPreview("corp")}}},[t("corp-info-preview",{staticClass:"thumb-item-pic",attrs:{corpImageUrl:e.corpImageUrl,packetName:e.packetName}})],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:3===e.selectedType,expression:"selectedType === 3"}],staticClass:"flex flex-col items-center"},[e.showCoverStory&&!e.storyMediaList.length?t("story-preview",{staticClass:"story-preview",attrs:{cover:e.cover,showCoverStory:e.showCoverStory}}):e.storyMediaList.length?[t("div",{directives:[{name:"show",rawName:"v-show",value:"prestory"===e.activeType,expression:"activeType === 'prestory'"}],staticClass:"preview-area"},e._l(e.storyMediaList,(function(i,a){return t("cover-detail-img",{directives:[{name:"show",rawName:"v-show",value:a===e.activeIndex,expression:"index === activeIndex"}],key:i.mediaUrl,staticClass:"preview-pic no-border",attrs:{actionList:e.actionList,"media-info":i,autoplay:a===e.activeIndex}})})),1),e._l(e.storyMediaList,(function(i,a){return t("story-preview",{directives:[{name:"show",rawName:"v-show",value:"story"===e.activeType&&a===e.activeIndex,expression:"activeType === 'story' && index === activeIndex"}],key:i.mediaUrl,staticClass:"story-preview",attrs:{"story-info":i,cover:e.cover,autoplay:!0,isActive:"story"===e.activeType&&a===e.activeIndex}})}))]:t("div",{staticClass:"story-empty"},[e._v("未添加封面故事")]),t("div",{directives:[{name:"show",rawName:"v-show",value:"prestory"===e.activeType,expression:"activeType === 'prestory'"}],staticClass:"thumb-list mb-1 mt-2 justify-center"},e._l(e.storyMediaList,(function(i,a){return t("div",{key:i.mediaUrl,staticClass:"thumb-item",class:{"thumb-active":e.activeIndex===a},on:{click:function(t){return e.triggerPreview("prestory",a)}}},[t("cover-detail-img",{staticClass:"w-[22px]",attrs:{actionList:e.actionList,"media-info":i}})],1)})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:"story"===e.activeType,expression:"activeType === 'story'"}],staticClass:"mt-2 flex justify-center"},e._l(e.storyMediaList,(function(i,a){return t("div",{key:i.mediaUrl,staticClass:"preview-thumb-item",class:{"thumb-active":e.activeIndex===a},on:{click:function(t){return e.triggerPreview("story",a)}}},[t("story-preview",{staticClass:"story-thumb-preview",attrs:{"story-info":i,width:22,height:47,cover:e.cover}})],1)})),0),e.storyMediaList.length?t("div",{staticClass:"trigger-story-type mt-4 flex items-center justify-center"},[t("span",{staticClass:"text-opblack_2"},[e._v(e._s("story"===e.activeType?"下拉后预览效果":"下拉前预览效果"))]),t("span",{staticClass:"weui-link ml-2 inline-block select-none",on:{click:e.triggerStoryType}},[e._v("切换")])]):e._e()],2),e.isAtmosphereCover?t("div",{staticClass:"my-2 w-[330px] text-center text-opblack_2"},[t("mask-icon",{staticClass:"h-4 w-4 align-[-3px] text-yellow_0",attrs:{name:"info-filled"}}),e._v(" 平台暂不支持预览氛围素材效果，可在手机预览。 ")],1):e._e()],1)},Sn=[],xn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative h-full w-full"},[e.loading?t("preview-loading",{staticClass:"z-20"}):e._e(),t(e.img?"img":"span",{tag:"component",staticClass:"relative z-10 h-full w-full",attrs:{src:e.img,tag:"img"}}),e.bubbleImageDynamicUrl?t("div",{staticClass:"absolute left-[19.53%] top-[14.97%] h-[10.65%] w-[63.06%]"},[t("pag-display",{ref:"bubblePag1",staticClass:"pag-display",attrs:{name:"baseinfopag1",url:e.bubbleImageDynamicUrl,autoplay:e.autoplay,loop:!0,autoInit:e.autoplay,showType:"preview"}})],1):e._e()],1)},An=[];const{mapState:Pn}=(0,fe._p)("cover");var Dn=a.ZP.extend({components:{PagDisplay:et.Z,PreviewLoading:ot},props:{loading:Boolean,cover:{type:Object,default:()=>({})},packetName:{type:String,default:"微信"},bubbleImageUrl:{type:String,default:""},bubbleImageDynamicUrl:String,widgetUrl:String,logoUrl:String,autoplay:Boolean,scale:{type:Number,default:.5}},data(){return{img:"",version:0,debounceGenerateAlicen:null}},computed:{...Pn(["showEditDialog","previewPagReinit"])},mounted(){this.debounceGenerateAlicen=(0,yt.debounce)(this.generateAlien,500),this.debounceGenerateAlicen()},watch:{previewPagReinit(e){const t=this.$refs.bubblePag1;e.startsWith("bubble")&&this.autoplay&&this.bubbleImageDynamicUrl&&(console.log("bubble pag reinit",e),t?.initPag())},showEditDialog(e){const t=this.$refs.bubblePag1;e?t?.destroy():this.autoplay&&t?.initPag()},packetName(){this.debounceGenerateAlicen()},bubbleImageUrl(){this.debounceGenerateAlicen()},bubbleImageDynamicUrl(){this.debounceGenerateAlicen()},widgetUrl(){this.debounceGenerateAlicen()},logoUrl(){this.debounceGenerateAlicen()},async autoplay(e){const t=this.$refs.bubblePag1;e?console.log("baseinfopag active"):t?.destroy()}},methods:{async generateAlien(){const e="-apple-system,system-ui,BlinkMacSystemFont,PingFang SC,SF Pro Text,Helvetica Neue,Helvetica,Hiragino Sans GB,Heiti SC,Arial,Microsoft YaHei UI,Microsoft YaHei,sans-serif";this.version+=1;const t=this.version,i="https://res.wx.qq.com/t/fed_upload/7aeb6a61-b994-41ba-be8a-6579c9d506a4/default-bubble.png",a="https://res.wx.qq.com/t/fed_upload/84ab72ba-7ab9-4ab6-befe-a5dfdb165bec/single-bubble.png";let s=[{url:a,width:1080,height:2337}];const r=[],o={url:this.bubbleImageUrl||i,width:681,height:249,x:211,y:350},n={text:this.packetName,right:263,y:Ct(this.packetName)?555:548,style:{color:"rgba(255, 255, 255, 0.5)"},textAlign:"right",font:`27px ${e}`};if(this.bubbleImageDynamicUrl||r.push(o),r.push(n),s.unshift(...r),this.widgetUrl){const e={url:this.widgetUrl,width:454,height:364,x:378,y:293};this.widgetUrl;s.push(e)}if(this.logoUrl){s=s.filter((e=>e.text!==this.packetName));const e={url:this.logoUrl,width:50,height:50,x:758,y:537,radius:30};this.logoUrl;s.push(e)}const c=new Ge.mc(s,{width:1080,height:2337}),l=await c.outputImg();t===this.version&&(this.img=l,this.$emit("update",l))}}}),Un=Dn,En=(0,h.Z)(Un,xn,An,!1,null,"0d0f2cc6",null),Rn=En.exports,Mn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative h-full w-full"},[e.loading?t("preview-loading"):e._e(),e.coverImageDynamicUrl?t("div",{staticClass:"dynamic-cover h-full w-full"},[t("div",{staticClass:"relative w-[85%]",style:e.dynamicCoverWrapperStyle},[t("pag-display",{ref:"pagDisplay",staticClass:"pag-display",attrs:{name:"coverinfopag",url:e.coverImageDynamicUrl,autoplay:e.autoplay,autoInit:e.autoplay,loop:!0,showType:"preview"}}),t("div",{staticClass:"pic-bless"}),t("img",{staticClass:"absolute left-1/2 top-[16.52%] w-[66.73%]",staticStyle:{transform:"translateX(-50%)"},attrs:{src:e.blessPicUrl}}),t("img",{staticClass:"absolute left-1/2 w-[32.16%]",staticStyle:{transform:"translateX(-50%)"},style:{top:2===e.coverImageDynamicType?"67.2%":"69.2%"},attrs:{src:e.openIconActiveUrl}})],1)]):t("div",[t(e.img?"img":"span",{tag:"component",staticClass:"h-full w-full",attrs:{src:e.img,tag:"img"}})],1)],1)},Ln=[];const{mapState:Nn}=(0,fe._p)("cover");var Fn=a.ZP.extend({components:{PagDisplay:et.Z,PreviewLoading:ot},props:{loading:Boolean,coverImageDynamicType:Number,coverImageDynamicUrl:String,coverUrl:String,widgetUrl:String,autoplay:Boolean},data(){return{img:"",openIconActiveUrl:Ge.is.open_icon_active,blessPicUrl:"https://res.wx.qq.com/t/fed_upload/ad0fd9c0-91ed-4b8d-94b3-5334ed8e4acc/bless.png",debounceGenerateAlicen:null}},computed:{...Nn(["showEditDialog","previewPagReinit"]),dynamicCoverWrapperStyle(){const e={width:"85%",left:"50%",transform:"translateX(-50%)"};return 1===this.coverImageDynamicType?{top:"15.13%",height:"65.39%",...e}:2===this.coverImageDynamicType?{top:"10.17%",height:"70.48%",...e}:{}}},mounted(){this.debounceGenerateAlicen=_t()(this.generateAlien,500),this.debounceGenerateAlicen()},watch:{previewPagReinit(e){const t=this.$refs.pagDisplay;e.startsWith("cover")&&this.autoplay&&this.coverImageDynamicUrl&&(console.log("cover pag reinit",e),t?.initPag())},showEditDialog(e){const t=this.$refs.pagDisplay;e?t?.destroy():this.autoplay&&t?.initPag()},coverUrl(){this.debounceGenerateAlicen()},widgetUrl(){this.debounceGenerateAlicen()},autoplay(e){const t=this.$refs.pagDisplay;e?console.log("coverinfopag isactive"):t?.destroy()}},methods:{async generateAlien(){const{width:e,height:t,sourceHeight:i,coverOffsetX:a,coverOffsetY:s,coverRadius:r}=Ge.g$,o=i-(Ge.mt+48);let n=[{url:"https://res.wx.qq.com/t/fed_upload/4e47a13b-34d8-4655-b43b-973600fd92c2/bg-opening-cover.png",width:1170,height:2534},{url:this.coverUrl,width:Ge.TE.width,height:Ge.TE.receiveHeight,x:a+58,y:s+251,radius:r},{url:this.blessPicUrl,width:674,height:228,x:247,y:615},{url:Ge.is.hb_bottom_opengray,width:Ge.TE.width,height:Ge.mt,x:a+58,y:o+251}];this.widgetUrl&&n.push({url:this.widgetUrl,width:e,height:t,x:58,y:251});const c=new Ge.mc(n,{width:1170,height:2534}),l=await c.outputImg();this.img=l,this.$emit("update",l)}}}),On=Fn,Bn=(0,h.Z)(On,Mn,Ln,!1,null,"72110366",null),qn=Bn.exports,Qn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{style:{width:`${e.width}px`,height:`${e.height}px`}},[t("div",{ref:"StoryPreview",staticClass:"StoryPreview",style:e.storyPreviewStyle},[e.isPicStory||e.noStory?t(e.img?"img":"span",{ref:"story",tag:"component",staticClass:"story-wrapper-img",attrs:{src:e.img,tag:"img"}}):t("img",{staticClass:"story-wrapper-img",attrs:{src:"https://res.wx.qq.com/t/fed_upload/2e93c8ca-8517-4438-b303-41ba9870f2ec/make_story_bg.png",alt:""}}),e.storyInfo.mediaUrl?t("video",{ref:"videoStory",staticClass:"story-video",attrs:{autoplay:e.autoplay,loop:"",muted:"",src:e.storyInfo.mediaUrl},domProps:{muted:!0},on:{loadeddata:e.handleVideoStyle}}):e._e(),t("div",{staticClass:"story-info-wrapper",class:e.actionType?"bottom-[600px]":"bottom-[667px]"},[t("div",{staticClass:"story-description"},[e._v(e._s(e.storyDescription))]),t("div",{staticClass:"base-info"},[e.logoUrl?t("img",{staticClass:"logo",attrs:{src:e.logoUrl,alt:""}}):e._e(),e.packetName?t("span",{staticClass:"packet-name"},[e._v(e._s(e.packetName))]):e._e()]),e.actionType?t("div",{staticClass:"btn-jump"},[e._v("进入"+e._s(e.CoverActionTypeText[e.actionType]))]):e._e()])],1)])},jn=[];const $n=1080,Zn=2337,Hn=1799;var Gn=a.ZP.extend({components:{},props:{cover:{type:Object,default:()=>({})},storyInfo:{type:Object,default:()=>({})},autoplay:Boolean,width:Number,isActive:Boolean,showCoverStory:Boolean},data(){return{CoverActionTypeText:de.pK,img:"",version:0}},computed:{noStory(){return!this.storyInfo.mediaType},height(){return this.width*(Zn/$n)},scale(){return this.width?this.width/$n:1},storyPreviewStyle(){return this.width?{"background-image":`url(${this.isVideoStory?this.fuzzyImgUrl:""})`,transform:`scale(${this.scale})`}:{"background-image":`url(${this.isVideoStory?this.fuzzyImgUrl:""})`}},storyDescription(){return this.cover.packetMaterial.storyDescription},logoUrl(){return this.cover?.brandLogo.mediaUrl},packetName(){return this.cover.packetName},actionType(){return this.cover.packetMaterial?.actionList?.[0]?.actionType},isVideoStory(){return 2===this.storyInfo.mediaType},isPicStory(){return 1===this.storyInfo.mediaType},storyThumbPic(){return this.noStory?"https://res.wx.qq.com/t/fed_upload/20b733a9-29e5-4eb5-a567-f539960759b1/placeholder.png":this.isPicStory?this.storyInfo.mediaUrl:this.storyInfo.mediaThumbnailUrl},fuzzyImgUrl(){return this.storyInfo.mediaFuzzyUrl}},watch:{isActive(e){e?this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.play():this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.pause()},showCoverStory(){this.generateAlien()}},mounted(){this.generateAlien(),this.handleVideoStyle(),this.isActive&&this.autoplay&&this.$refs.videoStory instanceof HTMLVideoElement&&this.$refs.videoStory.play()},methods:{async handleVideoStyle(){if(this.isPicStory||!this.storyInfo.mediaUrl)return;const e=await(0,Xe.$p)(this.storyInfo.mediaUrl),{width:t,height:i}=e,a=this.$refs.videoStory,s=this.$refs.StoryPreview;if(t>i){const e=$n*i/t;a&&(a.style.top=(Zn-e)/2/Zn*100+"%",a.style.width="100%",a.style.transform="translateY(-50%)"),s&&(s.style.backgroundSize="auto 77%")}else{if(a){const e=Hn*t/i;a.style.width=e/$n*100+"%",a.style.left=($n-e)/2/$n*100+"%"}s&&(s.style.backgroundSize="100% auto")}},async generateAlien(){if(this.isPicStory||this.noStory){const e=await(0,ye.t$)(this.storyThumbPic),{width:t,height:i}=e;let a=0,s=0,r=$n,o=Hn;if(t>i){const e=$n*i/t;a=(Hn-e)/2}else r=t/i*o,s=($n-r)/2;let n=[{url:this.fuzzyImgUrl,x:0,y:0,width:$n,height:Hn},{url:this.storyThumbPic,x:s,y:a,width:r,height:o},{url:"https://res.wx.qq.com/t/fed_upload/2e93c8ca-8517-4438-b303-41ba9870f2ec/make_story_bg.png",width:$n,height:Zn}];n=n.filter((e=>!!e.url));const c=new Ge.mc(n,{width:$n,height:Zn}),l=await c.outputImg();return this.img=l,void this.$emit("update",l)}}}}),Wn=Gn,zn=(0,h.Z)(Wn,Qn,jn,!1,null,"280b70e6",null),Vn=zn.exports;const Jn=[{label:"基本信息预览",value:1},{label:"封面样式预览",value:2},{label:"封面故事预览",value:3}];var Kn=a.ZP.extend({components:{BaseInfoPreview:Rn,CoverInfoPreview:qn,CoverDetailImg:gt,CorpInfoPreview:xt,StoryPreview:Vn},props:{cover:{type:Object,default:()=>({})},cropedImgList:{type:Object,default:()=>({})},showCoverStory:Boolean,coverImageDynamicType:Number,baseInfoLoading:Boolean,corpInfoLoading:Boolean,coverDetailLoading:Boolean,coverInfoLoading:Boolean,isAtmosphereCover:Boolean},data(){return{coverToolPics:Ge.is,options:Jn,activeIndex:0,selectedType:1,activeType:"bubble",coverPreviewBase64:"",bubblePreviewBase64:"",corpPreviewBase64:"",showBtn:"right"}},computed:{showDirectionBtn(){return this.storyDetailList.length>2},storyDetailList(){return this.cover.packetMaterial.storyDetailList},storyMediaList(){return this.storyDetailList.map((e=>e.media))},firstStoryMedia(){return this.storyMediaList?.[0]||{}},coverImageDynamicUrl(){return this.cover.packetMaterial?.coverImageDynamic?.mediaUrl},receiveImageUrl(){return this.cropedImgList.receiveImageUrl||Ge.is.default_normal_cover_opengray},recWidgetImageUrl(){return this.cover?.packetMaterial?.recWidgetImage?.mediaUrl},senderC2cWidgetImageUrl(){return this.cover?.packetMaterial?.senderC2cWidgetImage?.mediaUrl||""},bubbleImageUrl(){return this.cropedImgList.bubbleImageUrl},bubbleImageDynamicUrl(){return this.cover.packetMaterial?.bubbleImageDynamic?.mediaUrl},corpImageUrl(){return this.cropedImgList.corpImageUrl},corpLogoDynamicUrl(){return this.cover.packetMaterial?.corpLogoDynamic?.mediaUrl},detailImageUrl(){return this.cropedImgList.detailImageUrl},detailImageDynamicUrl(){return this.cover.packetMaterial?.detailImageDynamic?.mediaUrl},packetName(){return this.cover.packetName},logoUrl(){return this.cover.brandLogo.mediaUrl},packetMaterial(){return this.cover.packetMaterial},actionList(){return this.packetMaterial.actionList||[]}},methods:{goNavEnd(e){const t=this.$refs.coverStyleThumbList;"left"===e&&(t.scroll({left:0,behavior:"smooth"}),this.showBtn="right"),"right"===e&&(t.scroll({left:9999,behavior:"smooth"}),this.showBtn="left")},triggerStoryType(){this.activeType="story"===this.activeType?"prestory":"story"},onSelect(e){1===e.value&&(this.activeType="bubble"),2===e.value&&(this.activeType="cover"),3===e.value&&(this.activeType="story")},triggerPreview(e,t=0){this.activeType=e,this.activeIndex=t},triggerToPreview(e,t,i){this.selectedType=e,this.activeType=t,"number"===typeof i&&(this.activeIndex=i)}}}),Yn=Kn,Xn=(0,h.Z)(Yn,Tn,Sn,!1,null,"79c86c48",null),ec=Xn.exports,tc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{staticClass:"source-media-editor-dialog",attrs:{value:e.value,width:1120,title:"裁剪封面图素材",desc:"封面图需裁剪为957×1278或等比例尺寸"+(e.isPicCropper?"":"；时长需裁剪为1s至3秒")},on:{"visible-change":e.handleVisibleChange,close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"flex justify-center"},[t("a-space",[t("mp-button",{attrs:{type:"warn"},on:{click:e.cancel}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isPicCropper&&!e.frameListReady},on:{click:e.sureEditor}},[e._v("确定")])],1)],1)]},proxy:!0}])},[e.isPicCropper?t("div",[t("div",{staticClass:"mx-auto box-content flex items-center justify-center rounded-2xl bg-opblack_2 p-9 align-middle",style:{width:`${e.picWorkAreaWidth}px`,height:`${e.picWorkAreaHeight}px`}},[t("div",{style:{width:`${e.picCropperWidth}px`,height:`${e.picCropperHeight}px`}},[t("img",{ref:"sourceCropper",staticClass:"h-full w-full",attrs:{src:e.cropperSourceImgInfo.objectUrl}})])])]):t("media-editor",{ref:"mediaEditor",attrs:{editorType:"sourceMaterial",fileType:e.fileType,fileUrl:e.fileUrl,ratios:e.ratios,workAreaWidth:593,workAreaHeight:503,frameLineWidth:574,frameLineHeight:87},on:{cropChange:e.handleCropChange,changePoint:e.handleChangePoint,frameLineReady:e.handleFrameListReady}})],1)},ic=[],ac=a.ZP.extend({components:{MediaEditor:Hr},props:{value:Boolean,fileUrl:String,fileName:String,fileType:Number,cropperSourceImgInfo:{type:Object,default:()=>({objectUrl:"",name:""})}},data(){return{cropInfo:{cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0},timeInfo:{startTime:0,duration:-1,action:""},sourceCropper:null,sourceMoveXY:{},picWorkAreaWidth:599,picWorkAreaHeight:497,picCropperWidth:0,picCropperHeight:0,ratios:{"957:1278":{name:"957:1278",label:"957:1278",ratio:957/1278,hidden:!1,original:!0}},loading:!1,isInit:!1,frameListReady:!1}},computed:{isPicCropper(){return!!this.cropperSourceImgInfo.objectUrl}},watch:{fileUrl(e){e&&(this.isInit=!1,this.frameListReady=!1)},cropperSourceImgInfo:{handler(){this.isInit=!1,this.sourceMoveXY={}},deep:!0}},methods:{handleFrameListReady(){this.frameListReady=!0},cancel(){this.$emit("input",!1)},async handleVisibleChange(e){e&&!this.isInit?(await this.$nextTick(),this.isPicCropper?this.initCropper():(this.$refs.mediaEditor.initMedia(),this.sourceCropper?.destroy(),this.isInit=!0)):this.$refs.mediaEditor?.unload()},async initCropper(){if(await this.$nextTick(),!(this.$refs.sourceCropper instanceof HTMLImageElement))return;this.sourceCropper&&this.sourceCropper?.destroy();const{width:e,height:t}=await(0,ye.t$)(this.cropperSourceImgInfo.objectUrl),i=e/t;this.picCropperHeight=Math.min(this.picWorkAreaHeight,t),this.picCropperHeight*i>this.picWorkAreaWidth&&(this.picCropperHeight=this.picWorkAreaWidth/i),this.picCropperWidth=this.picCropperHeight*i,await this.$nextTick(),this.sourceCropper=new(Ys())(this.$refs.sourceCropper,{viewMode:3,guides:!1,aspectRatio:957/1278,scalable:!0,autoCropArea:.99,minContainerHeight:30,minContainerWidth:50,minCropBoxWidth:100,zoomable:!1,crop:e=>{const{x:t,y:i,width:a,height:s}=e.detail;!this.sourceMoveXY||this.sourceMoveXY?.x||this.sourceMoveXY?.y||(this.sourceMoveXY.x=t,this.sourceMoveXY.y=i,this.sourceMoveXY.width=a,this.sourceMoveXY.height=s),this.sourceMoveXY&&(this.sourceMoveXY.movingX=t,this.sourceMoveXY.movingY=i,this.sourceMoveXY.movingWidth=a,this.sourceMoveXY.movingHeight=s)},ready:()=>{if(Number(this.sourceMoveXY?.width)>=0){const{x:e,y:t,width:i,height:a}=this.sourceMoveXY;this.sourceCropper.setData({x:e,y:t,width:i,height:a})}}})},handleCropChange(e){this.cropInfo=e.cropInfo},handleChangePoint(e){this.timeInfo=e.timeInfo},async surePicEditor(){if(!this.loading)try{let e="";const t=this.sourceCropper.getCroppedCanvas();e=t.width!==Ge.TE.width||t.height!==Ge.TE.height?(0,kn.v)(t,{width:Ge.TE.width,height:Ge.TE.height}):this.sourceCropper.getCroppedCanvas().toDataURL("image/jpeg");const i=(0,ye.KG)(e),a=await(0,kn.U)(i,{image_name:"croped_source.jpeg"});if(0!==a?.baseResponse.ret)throw new Error("图片上传失败");this.$emit("surePic",{dataUrl:e,name:this.cropperSourceImgInfo.name,uid:+Date.now(),size:i.size,percent:100,status:"done",originFileObj:{file:i},response:a,url:a.url}),this.$emit("input",!1)}catch(e){console.info("--- ~ surePicEditor ~ err:",e),this.errorTip("图片上传失败，请重试")}finally{this.loading=!1}},sureDynamicEditor(){if(Number(this.timeInfo.duration)>3.5)throw this.errorTip("选择时间段不能超过3秒"),new Error("sureDynamicEditor valid error")},sureEditor(){if(this.isPicCropper){const{movingX:e,movingY:t,movingWidth:i,movingHeight:a}=this.sourceMoveXY;this.sourceMoveXY.x=e,this.sourceMoveXY.y=t,this.sourceMoveXY.width=i,this.sourceMoveXY.height=a,this.surePicEditor()}else try{if(!this.frameListReady)return;this.sureDynamicEditor(),this.$emit("sureDynamic",{cropInfo:this.cropInfo,timeInfo:this.timeInfo}),this.$emit("input",!1)}catch(e){}$.bL.mediaUploadReport("41",{})},close(){this.$emit("input",!1)}}}),sc=ac,rc=(0,h.Z)(sc,tc,ic,!1,null,"5d570034",null),oc=rc.exports;async function nc(e,t=3,...i){try{const t=await e(...i);return t}catch(a){if(t)return console.log(`Retrying ${e.name}... ${t} retries left.`),await nc(e,t-1,...i);throw a}}var cc=i(16581),lc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"inline-block"},[t("span",{staticClass:"text-sm text-opblack_2"},[e._v(e._s(e.defaultText))]),t("mp-popover",{attrs:{trigger:"hover",width:e.width},scopedSlots:e._u([{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[e.targetLink?t("span",{staticClass:"weui-link inline-block",class:e.linkClass},[e._v(e._s(e.targetLink))]):t("mask-icon",{staticClass:"relative h-3.5 w-3.5 text-opblack_2",class:e.iconClass,attrs:{name:"info"}})],1)]},proxy:!0}])},[t("div",{staticClass:"text-opblack_2"},[e._t("default",(function(){return[t("div",[e._v(e._s(e.text))])]}))],2)])],1)},dc=[],pc=a.ZP.extend({components:{},props:{text:String,width:Number,iconClass:String,linkClass:String,targetLink:String,defaultText:String},data(){return{}},computed:{},methods:{}}),uc=pc,hc=(0,h.Z)(uc,lc,dc,!1,null,"4e76675a",null),mc=hc.exports,gc=i(28800),vc=i(15868);const fc=new $.ZP,yc=new je.ZP,{mapGetters:_c}=(0,fe._p)("user"),{mapGetters:Cc,mapState:bc}=(0,fe._p)("cover"),wc=102400,Ic=10485760,kc=104857600,Tc=52428800,Sc=20971520,xc=20971520,Ac=window,Pc=300,Dc=300,Uc=100,Ec="挂件进入不可编辑区域",Rc={packetNameTip:{"0_0":"<span style='display: inline-block; margin-bottom: 8px'>最多填写8个字，可使用公众号名称或主体名称中的字号；</span><br>如使用注册商标名称命名，需在下方「证明材料」中上传相关证明材料。","0_1":"<span style='display: inline-block; margin-bottom: 8px'>最多填写8个字，可使用公众号名称或主体名称中的字号；</span><br>如使用注册商标名称命名，需在下方「证明材料」中上传相关证明材料。","1_2":"最多填写8个字，可使用视频号名称。如使用其他名称命名，需在下方「证明材料」中上传相关证明材料。","1_1":"最多填写8个字，可使用公众号名称。如使用其他名称命名，需在下方「证明材料」中上传相关证明材料。"},packetNamePopoverTips2:{"0_0":"2. 你可以使用你的主体名称中的字号（如有）、公众号名称或你的注册商标来标记你的红包封面。若使用注册商标，请在下方「证明材料」中上传《商标注册证》的扫描件及商标使用授权书（在授权情况下）。","0_1":"2. 你可以使用你的主体名称中的字号（如有）、公众号名称或你的注册商标来标记你的红包封面。若使用注册商标，请在下方「证明材料」中上传《商标注册证》的扫描件及商标使用授权书（在授权情况下）。","1_2":"2. 可使用视频号名称。若使用其他名称命名，需在下方「证明材料」中上传相关证明材料。","1_1":"2. 可使用公众号名称。若使用其他名称命名，需在下方「证明材料」中上传相关证明材料。"},logoTips:{"0_0":"可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","0_1":"可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","1_2":"可使用视频号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。","1_1":"可使用公众号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。"},logoPopoverTips3:{"0_0":"3. 可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","0_1":"3. 可使用注册商标，需在下方「证明材料」中上传《商标注册证》的扫描件或商标使用授权书。","1_2":"3. 使用视频号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。","1_1":"3. 使用公众号头像图片。如果使用其他图片，需在下方「证明材料」中上传相关证明材料。"}};var Mc=a.ZP.extend({name:"CoverMake",components:{CoverCrop:Ao,StoryMake:zi,CoverPreviewDialog:Qt,AddMiniApp:ln,CoverPicUploadError:In,PreviewCover:ec,MaterialItem:Li,WidgetDescDialog:gn,ZipDescPopover:eo,InfoPopover:mc,SourceMediaEditorDialog:oc},data(){return{ACCEPT_TYPE:ys._B,wordingsMap:Rc,CoverMediaType:de.Je,CoverGenPag_FileType:de.p0,uploadImgUrl:Zt.qk,uploadFileUrl:Zt.gm,imgFileList:[],recWidgetImageList:[],senderC2cWidgetImageList:[],evidenceFileList:[],logoFileList:[],atmosphereImageList:[],coverImg:{url:"",dataUrl:"",name:""},cropedImgList:{sourceImageUrl:"",receiveImageUrl:"",detailImageUrl:"",bubbleImageUrl:"",openImageUrl:"",corpImageUrl:""},OfinderInfo:{},showCoverStory:!1,openImg:null,saveFile:{},saveRecWidgetImageFile:{},saveSenderC2cWidgetImageFile:{},isOpenStroy:!1,cover:{orderId:"",packetName:"",brandLogo:{},packetMaterial:{bubbleImage:{},openImage:{},receiveImage:{},detailImage:{},sourceImage:{},corpImage:{},actionList:[{actionType:0,mpAccountDetail:{},miniAppDetail:{},finderProfileDetail:{}}],storyDetailList:[],storyDescription:"",recWidgetImage:{},senderC2cWidgetImage:{},syntheticWidgetImage:{},bubbleImageDynamic:{},corpLogoDynamic:{},coverImageDynamic:{},detailImageDynamic:{},bubbleImageDynamicEnd:{},coverImageDynamicSource:{},sourceImageDynamic:{},bubbleImageDynamicSource:{},corpLogoDynamicSource:{},detailImageDynamicSource:{},widgetImageDynamicSource:{}},proofMaterial:{}},saveVideo:{},recommend:!0,formRule:{packetName:[{trigger:["change","blur"],validator(e,t,i){const a=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,s=t.trim();return(0,ye.Nu)(s)>17||a.test(s)?i(new Error("请填写8个字及以内的封面简称")):s?i():i(new Error("请输入红包封面简称"))}}]},baseRule:{packetName:[{trigger:["change","blur"],validator(e,t,i){const a=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,s=t.trim();return(0,ye.Nu)(s)>17||a.test(s)?i(new Error("请填写8个字及以内的封面简称")):s?i():i(new Error("请输入红包封面简称"))}}]},showPreviewQrcodeDialog:!1,saveStatus:0,submitStatus:0,isFileUploading:!1,isCanEdit:!0,showEvidenceUploadError:!1,evidenceBigFileUploader:null,sourceBigFileUploader:null,tryGenOrderIdTimes:0,clearMaterialVisible:!1,coverErrorInfo:{},coverWidgetErrorInfo:{},atmosphereErrorInfo:{},bubbleWidgetErrorInfo:{},isClickDownload:!1,mergeWidgetLoading:!1,logoUploading:!1,coverImgUploading:!1,recWidgetUploading:!1,bubbleWidgetUploading:!1,breadcrumbList:[{text:"我的红包封面"},{text:"定制封面"}],showNewCoverTips:!1,widgetDescDialogVisible:!1,previewCoverReady:!1,showSourcePagEditorVisible:!1,sourceDynamicMediaInfo:{name:"",url:"",mediaUrl:"",objectUrl:"",type:de.Je.Unknow,width:0,height:0,cropDetailInfo:{timeInfo:{},cropInfo:{}}},dynamicRecWidgetUploading:!1,cropDynamicLoading:!1,cropperSourceImgInfo:{name:"",url:"",objectUrl:""},batGenPagHandler:null,coverDynamicPagLoading:!1,sourcePagLoading:!1,corpPagLoading:!1,bubblePagLoading:!1,coverImageDynamicBeforeUploadWidget:{},showDynamicIcon:!1,useStaticBubblePic:!1,useStaticCorpPic:!1,coverMaterialUploading:!1,atmosphereUploading:!1,atmosphereMaking:!1,getFirstFrameLoading:!1,reUploadOpenImageLoading:!1,bubbleFps:0,bubbleQuality:0,detailFps:0,detailQuality:0,coverFps:0,coverQuality:0,bubbleRes:"",bubbleFileSize:"",detailRes:"",detailFileSize:"",coverRes:"",coverFileSize:"",showAtmosphereTips:!1}},watch:{isOpenStroy(){0==this.isOpenStroy&&(this.cover.packetMaterial.actionList=[],this.$store.commit("cover/CLEAR_ACTION_AUTH_INFO"),(0,Lt.H)("checkbox删除跳转",JSON.stringify({orderId:this.cover.orderId})))},showCoverStory(){0==this.showCoverStory?(this.cover.packetMaterial.actionList=[],this.cover.packetMaterial.storyDetailList=[],this.cover.packetMaterial.storyDescription="",this.$store.commit("cover/CLEAR_ACTION_AUTH_INFO")):(this.triggerToPreview(3,"story"),this.cover.orderId||this.generateOrderId())},cover:{deep:!0,handler(){this.saveStatus=0}},"actionAuthInfo.action":{deep:!0,handler(){this.saveStatus=0}}},computed:{..._c(["principalAccountType","isInnerUser","headImgUrl","nickname","principalType","accountType","isAtmosphereUser","authorId"]),...Cc(["authorizeSuccess"]),...bc(["actionAuthInfo"]),CoverMaterialItem(){const{sourceDynamicMediaInfo:e}=this;return e.name&&!(0,Xe.NL)(e.name)?"video":"pic"},dynamicMaterialUploading(){return this.coverDynamicPagLoading||this.sourcePagLoading||this.corpPagLoading||this.bubblePagLoading||this.dynamicRecWidgetUploading},atmosphereLoading(){return this.atmosphereMaking||this.atmosphereUploading},coverType(){return this.recWidgetImageList.length>0?2:1},showSuggestLogo(){return!!this.headImgUrl&&!this.logoFileList.length&&!this.cover.brandLogo?.mediaUrl&&!this.logoUploading},statusCount(){var e=0;return d.l1.coverList.forEach((t=>{2==t.orderStatus&&e++})),e},isStoryReady(){const e=this,{storyDescription:t,storyDetailList:i}=e.cover.packetMaterial,a=e.storyDescCounter(t);return!e.showCoverStory||i.length&&a<41},isFormReady(){let e=!0,t=!0;if(2===this.coverType){const{packetMaterial:{recWidgetImage:t,syntheticWidgetImage:i,openImage:a}}=this.cover;e=!!(t?.mediaUrl&&i?.mediaUrl&&a?.mediaUrl)&&!this.mergeWidgetLoading}return!this.coverImgUploading&&!!this.coverImg?.url&&!!this.cover.packetName&&this.isStoryReady&&!this.isFileUploading&&e&&t&&!this.dynamicMaterialUploading&&!this.atmosphereLoading&&!this.cropDynamicLoading&&!this.dynamicRecWidgetUploading&&!this.reUploadOpenImageLoading},previewDisabledContent(){return this.dynamicMaterialUploading||this.coverImgUploading||this.atmosphereLoading?"封面生成中，请稍后预览":"需填写完封面简称并上传完封面素材后才可预览"},canSave(){return this.isFormReady&&1!==this.submitStatus&&2!==this.saveStatus},canSubmit(){return 1!==this.saveStatus&&this.isFormReady&&this.authorizeSuccess}},async mounted(){this.initShowDynamicIcon(),this.clearCoverPic(),this.initSouceCover(),this.initNewCoverTips(),this.initScroll(),this.setLayoutPageSimpleRightWrpOverflow("mounted"),this.setBeforeUnloadMsg(),d.l1.getCoverList(this),await d.U6.getUserInfo(),1!=d.U6.user.isSecondary||8&d.U6.user.managerFlag||(this.isCanEdit=!1),this.statusCount>2&&!this.isInnerUser&&(0,Lt.H)("同时有3款封面在审"),(0,Lt.H)("进入编辑页",JSON.stringify({orderId:this.cover.orderId}))},methods:{handleTrashAtmosphere(){this.clearAllAtmosphere(),this.genAtmosphereVersion+=1},async initShowDynamicIcon(){const e=localStorage.getItem("DYNAMIC_NEW");e||(this.showDynamicIcon=!0,localStorage.setItem("DYNAMIC_NEW","1"))},async setCropedImgList(e){try{const t=["source","receive","bubble","corp","detail","open"],i=[];t.forEach((t=>{i.push((async()=>{if("source"!==t&&("open"!=t||2!==this.coverType)&&e[`${t}ImageUrl`]&&e[`${t}ImageUrl`]!==this.cropedImgList[`${t}ImageUrl`]){const i=await(0,kn.U)(e[`${t}ImageUrl`],{image_name:`${t}.png`,order_id:this?.cover?.orderId});if(0!==i?.baseResponse?.ret)return(0,Lt.H)("素材上传失败",JSON.stringify({type:t,res:i})),void this.errorTip("封面图片上传失败，请重新上传重试，或联系客服");(0,Lt.H)("save_cropimg_success",JSON.stringify({mediaName:`${t}.png`,mediaUrl:i.url,orderId:this.cover.orderId}));const a=`${t}Image`;this.cover.packetMaterial[a]={mediaName:`${t}.png`,mediaType:de.Je.Image,mediaUrl:i.url,mediaMd5:i.md5}}})())})),await Promise.all(i),this.cropedImgList=e}catch(t){(0,Lt.H)("setCropedImgList_error",JSON.stringify({msg:t?.message})),console.error(t)}},async handleChangeGenMaterialStatus({type:e,loading:t}){this.cropDynamicLoading=t,this.triggerToPreview(2,e)},async handleCoverCropUpdateMaterial(e){const{type:t,material:i,source:a}=e;let s="";"bubble"===t&&(this.setBubbleMaterial(i),this.cover.packetMaterial.bubbleImageDynamicSource=a||{},s=await(0,Lr.Wr)(i.pagUrl),this.useStaticBubblePic=!1),"corp"===t&&(this.setCorpMaterial(i),this.cover.packetMaterial.corpLogoDynamicSource=a||{},s=await(0,Lr.WB)(i.pagUrl),this.useStaticCorpPic=!1),"detail"===t&&(this.setDetailMaterial(i),this.cover.packetMaterial.detailImageDynamicSource=a||{},s=await(0,Lr.zj)(i.pagUrl)),s?this.setCropedImgList(Object.assign({},this.cropedImgList,{[`${t}ImageUrl`]:s})):(0,Lt.H)("重新裁切原素材后，获取首帧失败",JSON.stringify({type:t}))},handleSurePic(e){this.setCoverImg(e),this.cover.packetMaterial.widgetImageDynamicSource?.mediaUrl&&this.cover.packetMaterial.widgetImageDynamicSource.mediaType!==de.Je.Image?((0,Lt.H)("裁剪静态图后-【静态封面+动态挂件】",JSON.stringify({orderId:this.cover.orderId})),this.setPicDynamicMediaInfo(),(0,Lt.H)("开始getRecWidgetMaterial"),this.getRecWidgetMaterial()):this.cleayCoverDynamicMaterial()},async getFirstFrameForSourceCoverImage(e){const{cropInfo:t,timeInfo:i}=e,a=await(0,Xe.mw)({fileUrl:this.sourceDynamicMediaInfo.objectUrl,cropInfo:t,timeInfo:i,targetSize:{width:Ge.TE.width,height:Ge.TE.height}}),s=(0,ye.KG)(a),r=await nc(kn.U,3,s,{image_name:"first_frame_source",order_id:this?.cover?.orderId});0===r?.baseResponse.ret&&this.setCoverImg({dataUrl:a,name:"sourceImageUrl.jpeg",uid:+Date.now(),size:s.size,percent:100,status:"done",originFileObj:{file:s},response:{url:r.url,md5:r.md5},url:r.url})},async handleSourcePagSure(e){this.getFirstFrameLoading=!0,await this.getFirstFrameForSourceCoverImage(e),this.getFirstFrameLoading=!1,this.genPagMaterial(e)},setDetailMaterial(e){this.cover.packetMaterial.detailImageDynamic={mediaUrl:e?.pagUrl,mediaType:de.Je.Pag,mediaSize:0,mediaMd5:e.pagMd5,mediaName:"detailImageDynamic.pag"}},setBubbleMaterial(e){if(this.cover.packetMaterial.bubbleAtmospherePag?.mediaUrl||this.atmosphereMaking||this.atmosphereUploading)return(0,Lt.H)("有氛围动效，跳过气泡动画生成"),void(this.showAtmosphereTips||(vc.Z.info("因上传了氛围素材，红包气泡视频素材已替换为首帧图片"),this.showAtmosphereTips=!0));this.cover.packetMaterial.bubbleImageDynamicEnd={mediaUrl:e.lastFrameUrl,mediaType:de.Je.Image,mediaName:"bubbleImageDynamicEnd.jpg",mediaSize:0,mediaMd5:e.lastFrameMd5},this.cover.packetMaterial.bubbleImageDynamic={mediaUrl:e?.pagUrl,mediaType:de.Je.Pag,mediaMd5:e.pagMd5,mediaName:"pag",mediaSize:0}},setCorpMaterial(e){this.cover.packetMaterial.corpLogoDynamic={mediaUrl:e?.pagUrl,mediaType:de.Je.Pag,mediaMd5:e.pagMd5,mediaName:"corpMaterial.pag",mediaSize:0}},setCoverImageDynamic(e){e?(this.cover.packetMaterial.coverImageDynamic={mediaUrl:e?.pagUrl,mediaType:de.Je.Pag,mediaMd5:e.pagMd5,mediaName:this.sourceDynamicMediaInfo.name,mediaSize:0},this.cover.packetMaterial.coverImageDynamicType=this.cover.packetMaterial.widgetImageDynamicSource?.mediaUrl?2:1):(this.cover.packetMaterial.coverImageDynamic={},this.cover.packetMaterial.coverImageDynamicType=0)},async getDetailAtmosphere(){const e=this.genAtmosphereVersion,{atmosphereSource:t}=this.cover.packetMaterial;console.info("--- ~ getDetailAtmosphere ~ atmosphereSource:",t);const i=await(0,Lr.tF)({base:{duration:3,w:Pc,h:Dc,file_type:de.p0.PNG,file_url:t?.mediaUrl}});e<this.genAtmosphereVersion?(0,Lt.H)("氛围版本废弃"):i&&((0,Lt.H)("【氛围】获取到详情页氛围",JSON.stringify({url:i.url,md5:i.md5,orderId:this.cover.orderId})),this.cover.packetMaterial.detailAtmospherePag={mediaUrl:i.url,mediaMd5:i.md5,mediaType:de.Je.Pag},this.cover.packetMaterial.detailAtmospherePagLowQuality={mediaUrl:i.lowUrl,mediaMd5:i.lowMd5,mediaType:de.Je.Pag})},async getBubbleAtmosphere(){const e=this.genAtmosphereVersion,{atmosphereSource:t}=this.cover.packetMaterial,i={base:{duration:3,w:Pc,h:Dc,file_type:de.p0.PNG,file_url:t?.mediaUrl}},a=await(0,Lr.p2)(i);e<this.genAtmosphereVersion?(0,Lt.H)("氛围版本废弃"):a&&((0,Lt.H)("【氛围】获取到气泡氛围",JSON.stringify({url:a.url,md5:a.md5,orderId:this.cover.orderId})),this.cover.packetMaterial.bubbleAtmospherePag={mediaUrl:a.url,mediaMd5:a.md5,mediaType:de.Je.Pag},this.cover.packetMaterial.bubbleAtmospherePagLowQuality={mediaUrl:a.lowUrl,mediaMd5:a.lowMd5,mediaType:de.Je.Pag})},async getCoverAtmosphere(){const e=this.genAtmosphereVersion,{atmosphereSource:t}=this.cover.packetMaterial,i=await(0,Lr.JV)({base:{duration:3,w:Pc,h:Dc,file_type:de.p0.PNG,file_url:t?.mediaUrl}});e<this.genAtmosphereVersion?(0,Lt.H)("氛围版本废弃"):i&&((0,Lt.H)("【氛围】获取到封面氛围",JSON.stringify({url:i.url,md5:i.md5,orderId:this.cover.orderId})),this.cover.packetMaterial.coverAtmospherePag={mediaUrl:i.url,mediaMd5:i.md5,mediaType:de.Je.Pag},this.cover.packetMaterial.coverAtmospherePagLowQuality={mediaUrl:i.lowUrl,mediaMd5:i.lowMd5,mediaType:de.Je.Pag})},async getDetailAtmosphereTest(){console.log("【氛围】详情页生成中","fps:",this.detailFps,"quality:","quality",this.detailQuality);const{atmosphereSource:e}=this.cover.packetMaterial,t={gen_type:je.rv.ATMOSPHERE_PAG_DETAIL,scene:je.a1.FIRST_UPLOAD,base:{start_time:0,x:-1,y:-1,duration:3,w:Pc,h:Dc,file_type:de.p0.PNG,file_url:e?.mediaUrl},pag_arg:{w:720,h:908,fps:Number(this.detailFps),quality:Number(this.detailQuality)},request_id:`atmosphere_detail_${gc.Z_.uuid()}`},i=await(0,Lr.ed)([t],"atmosphere_detail"),{url:a,md5:s}=i.result[0],r=await(0,ye.hR)(a);this.detailRes=a,this.detailFileSize=r/1024,this.cover.packetMaterial.detailAtmospherePag={mediaUrl:a,mediaMd5:s,mediaType:de.Je.Pag}},async getBubbleAtmosphereTest(){console.log("【氛围】气泡生成中","fps:",this.bubbleFps,"quality:","quality",this.bubbleQuality);const{atmosphereSource:e}=this.cover.packetMaterial,t={gen_type:je.rv.ATMOSPHERE_PAG_BUBBLE,scene:je.a1.FIRST_UPLOAD,base:{start_time:0,x:-1,y:-1,duration:3,w:Pc,h:Dc,file_type:de.p0.PNG,file_url:e?.mediaUrl},pag_arg:{w:528,h:384,fps:Number(this.bubbleFps),quality:Number(this.bubbleQuality)},request_id:`atmosphere_bubble_${gc.Z_.uuid()}`},i=await(0,Lr.ed)([t],"atmosphere_bubble"),{url:a,md5:s}=i.result[0],r=await(0,ye.hR)(a);this.bubbleRes=a,this.bubbleFileSize=r/1024,this.cover.packetMaterial.bubbleAtmospherePag={mediaUrl:a,mediaMd5:s,mediaType:de.Je.Pag}},async getCoverAtmosphereTest(){console.log("【氛围】封面氛围生成中","fps:",this.coverFps,"quality:","quality",this.coverQuality);const{atmosphereSource:e}=this.cover.packetMaterial,t={gen_type:je.rv.ATMOSPHERE_PAG_NORMAL,scene:je.a1.FIRST_UPLOAD,base:{start_time:0,x:-1,y:-1,duration:3,w:Pc,h:Dc,file_type:de.p0.PNG,file_url:e?.mediaUrl},pag_arg:{w:720,h:908,fps:Number(this.coverFps),quality:Number(this.coverQuality)},request_id:`atmosphere_cover__${gc.Z_.uuid()}`},i=await(0,Lr.ed)([t],"atmosphere_cover"),{url:a,md5:s}=i.result[0],r=await(0,ye.hR)(a);this.coverRes=a,this.coverFileSize=r/1024,this.cover.packetMaterial.coverAtmospherePag={mediaUrl:a,mediaMd5:s,mediaType:de.Je.Pag}},async getAtmosphereMaterialTest(){try{this.genAtmosphereVersion+=1,this.atmosphereMaking=!0,this.bubbleFps&&this.bubbleQuality&&(this.bubbleRes="",this.getBubbleAtmosphereTest()),this.detailFps&&this.detailQuality&&(this.detailRes="",this.getDetailAtmosphereTest()),this.coverFps&&this.coverQuality&&(this.coverRes="",this.getCoverAtmosphereTest()),this.cover.packetMaterial.bubbleImageDynamicEnd={},this.cover.packetMaterial.bubbleImageDynamicSource={},this.cover.packetMaterial.bubbleImageDynamic={}}catch(e){this.atmosphereErrorInfo={msg:e.message},this.clearAllAtmosphere()}finally{this.atmosphereMaking=!1}},async getAtmosphereMaterial(){(0,Lt.H)("开始制作氛围动效",JSON.stringify({url:this.cover.packetMaterial.atmosphereSource?.mediaUrl}));try{this.genAtmosphereVersion+=1,this.atmosphereMaking=!0,await Promise.all([this.getDetailAtmosphere(),this.getBubbleAtmosphere(),this.getCoverAtmosphere()]),this.clearBubbleDynamicMaterial()}catch(e){this.atmosphereErrorInfo={msg:e.message},(0,Lt.H)("【氛围】生成失败",JSON.stringify({errMsg:e?.message})),this.clearAllAtmosphere()}finally{this.atmosphereMaking=!1}},async clearAllAtmosphere(){this.atmosphereImageList=[],this.cover.packetMaterial.bubbleAtmospherePag={},this.cover.packetMaterial.coverAtmospherePag={},this.cover.packetMaterial.detailAtmospherePag={},this.cover.packetMaterial.atmosphereSource={},this.cover.packetMaterial.compressedAtmosphereSource={},this.atmosphereMaking=!1,this.atmosphereUploading=!1,this.showAtmosphereTips=!1},async getPagDetailMaterial(e){let t=+new Date;const i=a.ZP.prototype.genVersion;try{this.sourcePagLoading=!0;const s=await(0,Lr["if"])({whole:e});if(i!==a.ZP.prototype.genVersion)return void(0,Lt.H)("有新上传素材，素材丢弃",JSON.stringify({curGenVersion:a.ZP.prototype.genVersion,genVersion:i}));if(s?.pagUrl){this.setDetailMaterial(s),d.l1.updatePreviewPagReinit("detail");const e=await(0,Lr.zj)(s.pagUrl);e?((0,Lt.H)("获取到详情页首帧",JSON.stringify({orderId:this.cover.orderId})),this.setCropedImgList(Object.assign({},this.cropedImgList,{detailImageUrl:e}))):(0,Lt.H)("获取详情页首帧失败")}}finally{this.sourcePagLoading=!1,t=+new Date-t,console.log("getPagDetailMaterial finally",t),(0,Lt.H)("getPagDetailMaterial finally",JSON.stringify({time:t}))}},async getPagSourceMaterial(e){let t=+new Date;const i=a.ZP.prototype.genVersion;try{this.sourcePagLoading=!0;const s=await(0,Lr["if"])({whole:e});if(i!==a.ZP.prototype.genVersion)return void(0,Lt.H)("有新上传素材，素材丢弃",JSON.stringify({curGenVersion:a.ZP.prototype.genVersion,genVersion:i}));if(s){this.sourceDynamicMediaInfo.type===de.Je.Zip&&(this.sourceDynamicMediaInfo.mediaUrl=s.pagUrl),this.cover.packetMaterial.sourceImageDynamic={mediaUrl:s?.pagUrl,mediaType:de.Je.Pag,mediaSize:0,mediaMd5:s.pagMd5,mediaName:"sourceImageDynamic.pag"},this.setDetailMaterial(s),d.l1.updatePreviewPagReinit("detail");const e=await(0,Lr.zj)(s.pagUrl);e?((0,Lt.H)("获取到详情页首帧",JSON.stringify({orderId:this.cover.orderId})),this.setCropedImgList(Object.assign({},this.cropedImgList,{detailImageUrl:e}))):(0,Lt.H)("获取详情页首帧失败")}}finally{this.sourcePagLoading=!1,t=+new Date-t,console.log("getPagSourceMaterial finally",t),(0,Lt.H)("getPagSourceMaterial finally",JSON.stringify({time:t,orderId:this.cover.orderId}))}},async getCoverDynamicMaterial(e){let t=+new Date;const i=a.ZP.prototype.genVersion;try{this.coverDynamicPagLoading=!0;const s=await(0,Lr.YO)({base:e});if(i!==a.ZP.prototype.genVersion)return void(0,Lt.H)("有新上传素材，素材丢弃",JSON.stringify({type:"coverDynamic",curGenVersion:a.ZP.prototype.genVersion,genVersion:i}));s&&(this.setCoverImageDynamic(s),d.l1.updatePreviewPagReinit("cover"))}finally{this.coverDynamicPagLoading=!1,t=+new Date-t,console.log("getCoverDynamicMaterial finally",t),(0,Lt.H)("getCoverDynamicMaterial finally",JSON.stringify({time:t}))}},async getCorpMaterial(e){let t=+new Date;const i=a.ZP.prototype.genVersion;try{this.corpPagLoading=!0;const s=await(0,Lr.Zt)({whole:e});if((0,Lt.H)("得到corp动态素材",JSON.stringify({corpMaterial:s})),i!==a.ZP.prototype.genVersion)return void(0,Lt.H)("有新上传素材，素材丢弃",JSON.stringify({type:"corp",curGenVersion:a.ZP.prototype.genVersion,genVersion:i}));if(s.picBase64)(0,Lt.H)("corp降级到用首帧",JSON.stringify({orderId:this.cover.orderId})),this.setCropedImgList(Object.assign({},this.cropedImgList,{corpImageUrl:s.picBase64})),this.useStaticCorpPic=!0,fc.mediaUploadReport("57",{});else{this.setCorpMaterial(s),d.l1.updatePreviewPagReinit("corp");const e=await(0,Lr.WB)(s.pagUrl);e?((0,Lt.H)("corp获取到首帧",JSON.stringify({orderId:this.cover.orderId})),this.setCropedImgList(Object.assign({},this.cropedImgList,{corpImageUrl:e}))):(0,Lt.H)("获取发红包页首帧失败，不替换首帧",JSON.stringify({orderId:this.cover.orderId}))}}finally{this.corpPagLoading=!1,t=+new Date-t,console.log("getCorpMaterial finally",t),(0,Lt.H)("getCorpMaterial finally",JSON.stringify({time:t}))}},async getBubbleMaterial(e){let t=+new Date;const i=a.ZP.prototype.genVersion;try{this.bubblePagLoading=!0;const s=await(0,Lr.CJ)({whole:e});if(i!==a.ZP.prototype.genVersion)return void(0,Lt.H)("有新上传素材，素材丢弃",JSON.stringify({curGenVersion:a.ZP.prototype.genVersion,genVersion:i}));if(s.picBase64)(0,Lt.H)("气泡降级用首帧"),await this.setCropedImgList(Object.assign({},this.cropedImgList,{bubbleImageUrl:s.picBase64})),this.useStaticBubblePic=!0,fc.mediaUploadReport("56",{});else{this.setBubbleMaterial(s),d.l1.updatePreviewPagReinit("bubble");const e=await(0,Lr.Wr)(s.pagUrl);e&&((0,Lt.H)("获取到气泡首帧"),await this.setCropedImgList(Object.assign({},this.cropedImgList,{bubbleImageUrl:e}))),this.cover.packetMaterial.bubbleImageDynamicEnd||((0,Lt.H)("pag出错获取不到尾帧。用首帧当尾帧",JSON.stringify({orderId:this.cover.orderId})),this.cover.packetMaterial.bubbleImageDynamicEnd=this.cover.packetMaterial.bubbleImage)}}finally{this.bubblePagLoading=!1,t=+new Date-t,console.log("getBubbleMaterial finally",t),(0,Lt.H)("getBubbleMaterial finally",JSON.stringify({time:t}))}},async genPagMaterial(e,t){let i=a.ZP.prototype.genVersion;this.sourceDynamicMediaInfo.cropDetailInfo={cropInfo:e.cropInfo,timeInfo:e.timeInfo};const{cropInfo:{cropWidth:s,cropHeight:r,cropLeft:o,cropTop:n},timeInfo:{duration:c,startTime:l}}=e,d=this.sourceDynamicMediaInfo.type,p=this.sourceDynamicMediaInfo.url,u=Math.floor(Number(s)*(Ge.s9.height/Ge.s9.width)),h=Number(n)+Math.floor(Number(r)/2)-Math.floor(u/2),m=Math.floor(Number(s)*(Ge.Mx.height/Ge.Mx.width)),g=Number(n)+Math.floor(Number(r)/2)-Math.floor(Number(m)/2),v=ys.Eu[d],f={file_type:v,file_url:p,w:s,h:r,x:o,y:n,duration:c,start_time:l};try{if("coverDynamicMaterial"===t?await this.getCoverDynamicMaterial(f):await Promise.all([this.getCoverDynamicMaterial(f),this.getPagSourceMaterial(f),this.getCorpMaterial({file_type:v,file_url:p,w:s,h:u,x:o,y:h,duration:c,start_time:l}),this.getBubbleMaterial({file_type:v,file_url:p,w:s,h:m,x:o,y:g,duration:c,start_time:l})]),this.cover.packetMaterial.recWidgetImage?.mediaUrl)try{await this.getRecWidgetMaterial()}catch(y){(0,Lt.H)("先传挂件再传封面素材，合成错误",JSON.stringify({err:y}))}}catch(y){if(i<a.ZP.prototype.genVersion)return void(0,Lt.H)("旧生成报错，不抛错");this.coverErrorInfo={msg:y?.message||"未知错误"},this.clearCoverPic(),this.clearCropedImgList(),this.cleayCoverDynamicMaterial(),a.ZP.prototype.genVersion+=1}},async checkSourceImageZip(e,t){const i=await(0,Lr.su)(e);if(i.zipPicNum>ys.QV){const e=`压缩包内图片不能超过${ys.QV}张，请检查`;throw fc.mediaUploadReport("22",{file:t,failReason:e,picCnt:i.zipPicNum}),new Error(e)}if(i.zipPicNum<ys.yY){const e=`压缩包内图片不能少于${ys.yY}张，请检查`;throw fc.mediaUploadReport("22",{file:t,failReason:e,picCnt:i.zipPicNum}),new Error(e)}const a=await(0,ye.t$)(i.zipWidgetUrl),{width:s,height:r}=Ge.TE;if(a.width!==s||a.height!==r){const e=`序列帧图片尺寸需为${s}x${r}像素`;throw fc.mediaUploadReport("33",{file:t,failReason:e}),new Error(e)}if(!(Number(i.zipPicNum)>0))throw(0,Lt.H)("获取压缩包内图片数错误",JSON.stringify({msg:i})),new Error("获取压缩包内图片数错误");this.sourceDynamicMediaInfo.cropDetailInfo.timeInfo={duration:Math.floor(Number(i.zipPicNum)/ys.rZ),startTime:0},fc.mediaUploadReport("21",{file:t,picCnt:i.zipPicNum});const o=i?.zipWidgetUrl;if(!o)throw(0,Lt.H)("获取不到压缩包中的图片信息",JSON.stringify({msg:i})),new Error("获取不到压缩包中的图片信息");(0,Lt.H)("checkSourceImageZip通过",JSON.stringify({imgFromZip:i}));const n=await(0,ye.dd)(o),c=await(0,ye.Ll)(n);this.setCoverImg({dataUrl:n,name:"封面原素材图片.jpeg",uid:+Date.now(),size:c.size,percent:100,status:"done",originFileObj:{file:c},response:{url:o,md5:o.slice(-20,-1)},url:o})},async uploadCoverMaterial(e){const{onSuccess:t,onError:i,file:s}=e;if(this.cleayCoverDynamicMaterial(),this.sourceBigFileUploader?.endUpload(),a.ZP.prototype.genVersion+=1,(0,Xe.NL)(s.type))try{this.coverMaterialUploading=!0;const e=await(0,kn.U)(s,{image_name:"source",order_id:this?.cover?.orderId});this.validUploadRes(e,"source");const i=await(0,ye.sT)(s);s.url=e?.url,s.dataUrl=i,s.response=e,this.imgFileList=[s],this.setCoverImg(s),this.coverMaterialUploading=!1,this.getFirstFrameLoading=!1,this.cover.packetMaterial?.widgetImageDynamicSource?.mediaUrl&&this.cover.packetMaterial?.widgetImageDynamicSource.mediaType!==de.Je.Image&&(this.setPicDynamicMediaInfo(),await this.getRecWidgetMaterial()),this.cover.packetMaterial?.widgetImageDynamicSource?.mediaType===de.Je.Image&&((0,Lt.H)("清空动态素材信息"),this.cover.packetMaterial.widgetImageDynamicSource={},this.cleayCoverDynamicMaterial()),fc.mediaUploadReport("21",{file:s}),t()}catch(r){console.error(r),this.imgFileList=[this.saveFile],this.coverErrorInfo={msg:r.message},i()}finally{this.coverMaterialUploading=!1}else if(/mp4/.test(s.type)){this.coverMaterialUploading=!0;const a=await(0,Xe.$p)(s),{width:o,height:n}=a;try{const i=+new Date;this.sourceBigFileUploader=new Gr.ZP(e.file,{cdnFileType:Gr.vB.video});const r=await fc.bigFileUpload(e,this.sourceBigFileUploader);(0,Lt.H)("获取mp4链接",JSON.stringify({uploadDuration:+new Date-i,res:r})),await(0,Lr.TI)(r.url),fc.mediaUploadReport("21",{file:s,videoInfo:a}),this.cover.packetMaterial.coverImageDynamicSource={mediaName:s.name,mediaUrl:r.url,mediaType:de.Je.Mp4},this.sourceDynamicMediaInfo={width:o,height:n,url:r.url,name:s.name,mediaUrl:r.url,type:de.Je.Mp4,objectUrl:URL.createObjectURL(s),cropDetailInfo:{timeInfo:{},cropInfo:{}}},this.showSourcePagEditorVisible=!0,t()}catch(r){return this.coverErrorInfo={msg:r.message},fc.mediaUploadReport("22",{file:s,videoInfo:a,failReason:r.message,errorCode:r.checkResult}),i()}finally{this.coverMaterialUploading=!1}}else if(/zip/.test(s.type)){this.coverMaterialUploading=!0;const a=+new Date;this.sourceBigFileUploader=new Gr.ZP(e.file,{cdnFileType:Gr.vB.zip});const o=await fc.bigFileUpload(e,this.sourceBigFileUploader);(0,Lt.H)("获取zip链接",JSON.stringify({uploadDuration:+new Date-a,res:o})),this.cover.packetMaterial.coverImageDynamicSource={mediaUrl:o.url,mediaName:s.name,mediaType:de.Je.Zip};try{await this.checkSourceImageZip(o.url,s),this.coverMaterialUploading=!1,this.sourceDynamicMediaInfo={url:o.url,type:de.Je.Zip,name:s.name,width:Ge.TE.width,height:Ge.TE.height,mediaUrl:"",objectUrl:"",cropDetailInfo:{cropInfo:{cropWidth:Ge.TE.width,cropHeight:Ge.TE.height,cropLeft:0,cropTop:0,cropBoxWidth:0,cropBoxHeight:0,cropBoxLeft:0,cropBoxTop:0},timeInfo:{duration:-1,startTime:0}}},await this.genPagMaterial(this.sourceDynamicMediaInfo.cropDetailInfo),t()}catch(r){this.coverErrorInfo={msg:r.message},i()}finally{this.coverMaterialUploading=!1}}},openWidgetDescDialog(){this.widgetDescDialogVisible=!0},initScroll(){document.addEventListener("scroll",(()=>{const e=this.$refs.baseInfoMainCard,t=this.$refs.coverStyleMainCard,i=this.$refs.storyMainCard,a=this.$refs.previewCoverRef;if(e instanceof HTMLElement){const{top:t}=e.getBoundingClientRect();t>50&&t<200&&1!==a?.selectedType&&this.triggerToPreview(1,"bubble")}if(t instanceof HTMLElement){const{top:e}=t.getBoundingClientRect();e>50&&e<300&&2!==a?.selectedType&&this.triggerToPreview(2,"cover")}if(i instanceof HTMLElement){const{top:e}=i.getBoundingClientRect();e>50&&e<300&&3!==a?.selectedType&&this.triggerToPreview(3,"story")}}))},initNewCoverTips(){const e="NEW_COVER_TIPS",t=localStorage.getItem(e);this.showNewCoverTips=!t,localStorage.setItem(e,"1")},handlePackNameInput(e){e&&this.triggerToPreview(1,"bubble")},clickBreadcrumb(e,t){0===t&&this.$router.push({name:"covers"})},handleClickDownloadTemplate(){this.isClickDownload=!0},setLayoutPageSimpleRightWrpOverflow(e){const t=document.querySelector(".weui-desktop-layout__page-simple__right-wrp");t instanceof HTMLElement&&(t.style.overflow="mounted"===e?"visible":"auto")},handleBeforeCoverTypeChange(e){const{sourceImage:t,recWidgetImage:i,senderC2cWidgetImage:a}=this.cover.packetMaterial;(t?.mediaUrl||i?.mediaUrl||a?.mediaUrl)&&(e.preventDefault(),this.clearMaterialVisible=!0)},clearCropedImgList(){this.cropedImgList={sourceImageUrl:"",receiveImageUrl:"",detailImageUrl:"",bubbleImageUrl:"",openImageUrl:"",corpImageUrl:""}},resetSourceDynamicMediaInfo(){this.sourceDynamicMediaInfo={name:"",url:"",mediaUrl:"",objectUrl:"",type:de.Je.Unknow,width:0,height:0,cropDetailInfo:{cropInfo:{},timeInfo:{}}}},clearAllDynamicUploadLoading(){this.coverDynamicPagLoading=!1,this.sourcePagLoading=!1,this.corpPagLoading=!1,this.bubblePagLoading=!1},clearBubbleDynamicMaterial(){this.cover.packetMaterial.bubbleImageDynamicEnd={},this.cover.packetMaterial.bubbleImageDynamicSource={},this.cover.packetMaterial.bubbleImageDynamic={},d.l1.updatePreviewPagReinit("bubble")},cleayCoverDynamicMaterial(){this.cover.packetMaterial.sourceImageDynamic={},this.cover.packetMaterial.coverImageDynamicSource={},this.setCoverImageDynamic(),this.clearBubbleDynamicMaterial(),this.cover.packetMaterial.corpLogoDynamic={},this.cover.packetMaterial.detailImageDynamic={},this.cover.packetMaterial.corpLogoDynamicSource={},this.cover.packetMaterial.detailImageDynamicSource={},this.coverImageDynamicBeforeUploadWidget={},this.useStaticBubblePic=!1,this.useStaticCorpPic=!1,this.coverMaterialUploading=!1,this.getFirstFrameLoading=!1,this.resetSourceDynamicMediaInfo(),this.clearAllDynamicUploadLoading()},clearCoverPic(){this.imgFileList=[],this.coverImg={},this.cover.packetMaterial.sourceImage={},this.cover.packetMaterial.openImage={},this.cover.packetMaterial.sourceImage={},this.cover.packetMaterial.syntheticWidgetImage={},this.cleayCoverDynamicMaterial(),this.clearCropedImgList(),this.coverImgUploading=!1},clearRecWidgetPic(){this.recWidgetImageList=[],this.cover.packetMaterial.recWidgetImage={},this.recWidgetUploading=!1,this.cover.packetMaterial.widgetImageDynamicSource?.mediaUrl&&(this.cover.packetMaterial.widgetImageDynamicSource={},this.sourceDynamicMediaInfo.type===de.Je.Image?this.cleayCoverDynamicMaterial():this.coverImageDynamicBeforeUploadWidget?.mediaUrl?this.setCoverImageDynamic({pagUrl:this.coverImageDynamicBeforeUploadWidget?.mediaUrl,pagMd5:this.coverImageDynamicBeforeUploadWidget?.mediaMd5}):this.sourceDynamicMediaInfo.url&&((0,Lt.H)("挂件被删除，没有存上一个coverImageDynamic，重新走生成流程"),this.genPagMaterial(this.sourceDynamicMediaInfo.cropDetailInfo,"coverDynamicMaterial"))),this.triggerToPreview(2,"cover"),d.l1.updatePreviewPagReinit("cover")},async handleDeleteRecWidget(){if(this.clearRecWidgetPic(),this.cover.packetMaterial?.sourceImage?.mediaUrl){this.reUploadOpenImageLoading=!0;try{const e=await(0,Ge.JE)({coverUrl:this.cropedImgList.sourceImageUrl||this.cover.packetMaterial.sourceImage?.mediaUrl,scale:.4});if(e){this.cropedImgList.openImageUrl=e;const t=await(0,kn.U)(e,{image_name:"openImage",order_id:this?.cover?.orderId});if(0!==t?.baseResponse?.ret)return this.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),void(0,Lt.H)("素材上传失败",JSON.stringify({type:"openImage",res:t}));{const i=(0,ye.KG)(e);this.cover.packetMaterial.openImage={mediaUrl:t.url,mediaType:de.Je.Image,mediaMd5:t.md5,mediaName:"openImage",mediaSize:i.size},(0,Lt.H)("删除挂件后重新上传带开图",t.url)}}}finally{this.reUploadOpenImageLoading=!1}}},clearC2cWidgetPic(){this.senderC2cWidgetImageList=[],this.cover.packetMaterial.senderC2cWidgetImage={},this.cover.packetMaterial.receiverC2cWidgetImage={},this.triggerToPreview(2,"bubble")},clearDetail_Corp_Bubble_Open_Receive_Material(){this.cover.packetMaterial.bubbleImage={},this.bubbleImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.detailImage={},this.detailImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.openImage={},this.openImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.corpImage={},this.corpImg={mediaUrl:"",mediaName:""},this.cover.packetMaterial.receiveImage={}},clearUploadedCoverMaterial(){this.clearCoverPic(),this.clearCropedImgList(),this.cover.packetMaterial.syntheticWidgetImage={}},clearAllCoverMaterial(){a.ZP.prototype.genVersion+=1,this.clearUploadedCoverMaterial(),this.clearDetail_Corp_Bubble_Open_Receive_Material(),this.triggerToPreview(2,"cover")},cancelChangeCoverType(){this.clearMaterialVisible=!1},async generateOrderId(){if(this.cover.orderId)return void(0,Lt.H)("已有封面ID",JSON.stringify({orderId:this.cover.orderId}));const e=await yc.coverGenOrderId();0===e?.baseResponse.ret?(this.cover.orderId=e.orderId,(0,Lt.H)("获取封面ID",JSON.stringify({orderId:this.cover.orderId}))):this.tryGenOrderIdTimes<5?(this.tryGenOrderIdTimes++,window.setTimeout((()=>{this.generateOrderId()}),1e3)):this.errorTip("封面保存异常，请稍后重试")},async autoLogoFillIn(){this.logoUploading=!0;try{const e=await(0,ye.bi)(this.headImgUrl,200,200),t=await(0,kn.U)(e,{image_name:"logo",order_id:this?.cover?.orderId}),i=(0,ye.KG)(e);this.logoFileList=[{name:`logo（${zt(i.size||0).toUpperCase()}）`,url:t?.url,status:"uploading",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:i.size,percent:100,originFileObj:{}}],0===t?.baseResponse?.ret?(this.cover.brandLogo={mediaUrl:t?.url,mediaType:de.Je.Image,mediaMd5:t?.md5,mediaName:"logo",mediaSize:i.size},this.logoFileList[0]&&(this.logoFileList[0].status="success"),this.triggerToPreview(1,"bubble")):((0,Lt.H)("素材上传失败",JSON.stringify({type:"logo",res:t})),this.errorTip("Logo图片上传失败，请重新上传重试，或联系客服"),this.logoFileList[0]&&(this.logoFileList[0].status="error"))}catch(e){(0,Lt.H)("素材上传失败",JSON.stringify({type:"logo catch",err:e})),this.errorTip("Logo图片上传失败，请重新上传重试，或联系客服"),this.logoFileList[0]&&(this.logoFileList[0].status="error")}finally{this.logoUploading=!1}},setOfinderInfo(e){console.log("setOfinderInfo"+JSON.stringify(e)),this.OfinderInfo=e},changeImg({key:e,value:t}){switch(e){case"bubbleImg":this.triggerToPreview(2,"bubble"),this.cover.packetMaterial.bubbleImageDynamic={},this.cover.packetMaterial.bubbleImageDynamicSource={},this.useStaticBubblePic=!1;break;case"corpImg":this.triggerToPreview(2,"corp"),this.cover.packetMaterial.corpLogoDynamic={},this.cover.packetMaterial.corpLogoDynamicSource={},this.useStaticBubblePic=!1;break;case"detailImg":this.triggerToPreview(2,"detail"),this.cover.packetMaterial.detailImageDynamic={},this.cover.packetMaterial.detailImageDynamicSource={}}},setBeforeUnloadMsg(){Ac.windowBeforeUnloadMsg="",Ac.addEventListener("beforeunload",(e=>{if(!this.isClickDownload)return Ac.windowBeforeUnloadMsg?(e.preventDefault(),Ac.windowBeforeUnloadMsg?(e.returnValue=Ac.windowBeforeUnloadMsg,Ac.windowBeforeUnloadMsg):void 0):void 0;this.isClickDownload=!1})),Ac.windowBeforeUnloadMsg="尚未保存，确认离开？"},recommendInfo(e){this.recommend&&(this.setOfinderInfo(e),this.saveVideo=e,this.recommend=!1)},clearSaveVideo(){this.saveVideo={}},async initSouceCover(){let e=this.$route.params.cover;if(this.cover.packetName||(this.cover.packetName=this.nickname),e){this.cover=Object.assign(this.cover,e),e?.packetMaterial?.storyDetailList?.length&&(this.showCoverStory=!0,a.ZP.set(this.cover.packetMaterial,"storyDetailList",e.packetMaterial.storyDetailList)),(e?.packetMaterial?.actionList?.length||this.actionAuthInfo.action)&&(a.ZP.set(this.cover.packetMaterial,"actionList",e?.packetMaterial?.actionList||[this.actionAuthInfo?.action]),this.handleSetAction(e?.packetMaterial?.actionList?.[0]||this.actionAuthInfo?.action)),this.cropedImgList=(0,ye.GM)(this.cover);const t=this.cover.packetMaterial.sourceImage;this.coverImg={name:t?.mediaName||"封面图片",url:t?.mediaUrl},this.bubbleImg=e?.packetMaterial?.bubbleImage??null,this.detailImg=e?.packetMaterial?.detailImage??null,this.corpImg=e?.packetMaterial?.corpImage??null,this.openImg=e?.packetMaterial?.openImage??null,this.imgFileList=[{name:`${t?.mediaName}`,url:t?.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:t?.mediaSize,percent:100,originFileObj:{}}],this.saveFile=this.imgFileList[0];const i=this.cover.proofMaterial;i?.mediaUrl&&(this.evidenceFileList=[{name:`${i.mediaName}（${zt(i.mediaSize||0).toUpperCase()}）`,url:i.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:i.mediaSize,percent:100,originFileObj:{}}]),this.cover.actionAuthInfo&&(this.$store.commit("cover/SET_ACTION_AUTH_INFO",this.cover.actionAuthInfo),d.l1.genQrcodePic());const s=e?.packetMaterial?.recWidgetImage,r=e?.packetMaterial?.senderC2cWidgetImage;if(s?.mediaUrl&&(this.recWidgetImageList=[{name:`${s.mediaName}（${zt(s.mediaSize||0).toUpperCase()}）`,url:s.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:s.mediaSize,percent:100,originFileObj:{}}],a.ZP.set(this.cover.packetMaterial,"recWidgetImage",s)),r?.mediaUrl&&(this.senderC2cWidgetImageList=[{name:`${r.mediaName}（${zt(r.mediaSize||0).toUpperCase()}）`,url:r.mediaUrl,status:"done",uid:Date.now(),lastModified:Date.now(),lastModifiedDate:new Date,size:r.mediaSize,percent:100,originFileObj:{}}],a.ZP.set(this.cover.packetMaterial,"senderC2cWidgetImage",r)),e.packetMaterial?.coverImageDynamicType&&a.ZP.set(this.cover.packetMaterial,"coverImageDynamic",e.packetMaterial.coverImageDynamic),e.packetMaterial?.pagEditInfo)try{const t=JSON.parse(e.packetMaterial?.pagEditInfo);if(t.sourceDynamicMediaInfo.type===de.Je.Mp4){const e=await(0,Xe.xY)(t.sourceDynamicMediaInfo.mediaUrl||"");this.sourceDynamicMediaInfo.objectUrl=e}this.sourceDynamicMediaInfo=t.sourceDynamicMediaInfo}catch{(0,Lt.H)("parse_pagEditInfo_error",JSON.stringify(e.packetMaterial?.pagEditInfo))}}setTimeout((()=>{this.triggerToPreview(1,"bubble"),this.previewCoverReady=!0}),500)},goToProofInstruction(){window.open(`https://${this.pageHost}/cgi-bin/mmcover-bin/readtemplate?t=page/index#/doc?page=design&index=4`,"_blank")},storyDescCounter(e){return`${Math.ceil((0,ye.Nu)(e)/2)}`},async handleRecWidgetFile(e){try{const{name:t,uid:i}=e,a=await(0,ye.sT)(e),s=await(0,ye.Z2)(a,Ge.g$.width,Ge.g$.height);return e=(0,ye.Ll)(s,t),e.uid=i,(0,Lt.H)("挂件图片扩图成功",JSON.stringify({orderId:this.cover.orderId})),Promise.resolve(e)}catch(t){this.errorTip("挂件图片合成失败"),(0,Lt.H)("挂件图片合成失败",JSON.stringify({errMsg:t?.message}))}},async handleAtmosphereBeforeUpload(e){this.clearAllAtmosphere(),this.atmosphereErrorInfo={};const t=await(0,ye.Hc)(e,{kbLimit:Uc,imgSize:{width:Pc,height:Dc}});switch(t.status){case"wrong_pic_size":return this.atmosphereErrorInfo={msg:"图片尺寸需要为300x300像素"},Promise.reject();case"wrong_file_size":return this.atmosphereErrorInfo={file:e,type:"wrong_file_size",msg:`图片大小不可超过${Uc}KB`},Promise.reject();default:break}},async handelCoverImgBeforeUpload(e){a.ZP.prototype.$isAtmosphereUser=this.isAtmosphereUser,this.showAtmosphereTips=!1;const{width:t,height:i}=Ge.TE;if(/png|jpe?g/.test(e.type)){const a=500,s=await(0,ye.Hc)(e,{kbLimit:a,imgSize:{width:t,height:i}});switch(s.status){case"wrong_pic_size":return this.cropperSourceImgInfo.name=e.name,this.cropperSourceImgInfo.objectUrl=URL.createObjectURL(e),this.showSourcePagEditorVisible=!0,this.coverErrorInfo={},fc.mediaUploadReport("33",{file:e,failReason:"图片尺寸不对，需要裁剪"}),Promise.reject();case"wrong_file_size":return this.coverErrorInfo={file:e,type:"wrong_file_size",msg:`图片大小不可超过${a}KB`},fc.mediaUploadReport("22",{file:e,failReason:`图片大小不可超过${a}KB`}),Promise.reject();default:break}}else{if((0,Lr.sV)(),/mp4/.test(e.type)){const t=await(0,Xe.$p)(e);if(e.size>Sc){const i=`视频大小不可超过${Math.floor(Sc/1024/1024)}MB`;return this.coverErrorInfo={file:e,type:"wrong_file_size",msg:i},fc.mediaUploadReport("22",{file:e,videoInfo:t,failReason:i}),Promise.reject()}if(t.width>2160||t.height>3840){const i="素材尺寸不可超过2160x3840";return this.coverErrorInfo={file:e,type:"wrong_file_size",msg:i},fc.mediaUploadReport("33",{file:e,videoInfo:t,failReason:i}),Promise.reject()}if(t.duration<1){const i="视频时长不可低于1秒";return this.coverErrorInfo={file:e,type:"wrong_file_size",msg:i},fc.mediaUploadReport("22",{file:e,videoInfo:t,failReason:i}),Promise.reject()}if(t.duration>60){const i="视频时长不可超过60秒";return this.coverErrorInfo={file:e,type:"wrong_file_size",msg:i},fc.mediaUploadReport("22",{file:e,videoInfo:t,failReason:i}),Promise.reject()}}if(/zip/.test(e.type)){const t=`压缩包大小不可超过${Math.floor(Tc/1024/1024)}MB`;if(e.size>Tc)return this.coverErrorInfo={file:e,type:"wrong_file_size",msg:t},fc.mediaUploadReport("22",{file:e,failReason:t}),Promise.reject()}}this.clearCoverPic(),this.coverErrorInfo={},this.cropperSourceImgInfo={objectUrl:"",name:""},this.generateOrderId()},async checkRecWidgetImage(e,t){const i="dynamic"===t?99999:300,{width:a,sourceHeight:s,banEditHeight:r,banEditWidth:o,banEditY:n,banEditX:c}=Ge.g$,l=await(0,ye.Hc)(e,{kbLimit:i,imgSize:{width:a,height:s}}),d="dynamic"===t?`序列帧图片尺寸需为${a}x${s}像素`:`图片尺寸需为${a}x${s}像素`;switch(l.status){case"wrong_pic_size":throw this.coverWidgetErrorInfo={msg:d},new Error(d);case"wrong_file_size":throw this.coverWidgetErrorInfo={file:e,type:"wrong_file_size",msg:`图片大小不可超过${i}KB`},new Error(`图片大小不可超过${i}KB`);default:break}const p=await(0,ye.gn)(e,{x:c,y:n,width:o,height:r});if(!p)throw this.coverWidgetErrorInfo={type:"transparent_area_cover_widget",file:e},new Error(Ec)},async checkRecWidgetZip(e,t){const i=await(0,Lr.su)(e),a=i?.zipWidgetUrl;if(i.zipPicNum>ys.QV){const e=`压缩包内图片不能超过${ys.QV}张，请检查`;throw fc.mediaUploadReport("24",{file:t,failReason:e,picCnt:i.zipPicNum}),new Error(e)}if(i.zipPicNum<ys.yY){const e=`压缩包内图片不能少于${ys.yY}张，请检查`;throw fc.mediaUploadReport("24",{file:t,failReason:e,picCnt:i.zipPicNum}),new Error(e)}if(!a)throw(0,Lt.H)("获取不到zipWidgetUrl",JSON.stringify(i)),new Error("获取不到静态挂件图");const s=await(0,ye.dd)(a),r=await(0,ye.Ll)(s);try{await this.checkRecWidgetImage(r,"dynamic");const e=await(0,ye.Z2)(s,Ge.g$.width,Ge.g$.height),i=(0,ye.Ll)(e),a=await(0,kn.U)(e,{image_name:"recWidgetImage",order_id:this?.cover?.orderId},{type:"recWidgetImage"});if(0!==a?.baseResponse.ret)throw new Error(`静态挂件图上传失败，请重试(${a?.baseResponse?.ret??""})`);this.setRecWidgetImage({dataUrl:e,name:t.name||"封面挂件.png",uid:+Date.now(),size:i.size,percent:100,status:"done",originFileObj:{file:i},response:{url:a.url,md5:a.md5},url:a.url})}catch(o){throw(0,Lt.H)("checkRecWidgetZipError",JSON.stringify(o)),fc.mediaUploadReport("24",{file:t,failReason:o.message,picCnt:i?.zipPicNum}),o}return i},async getRecWidgetMaterial(){if(this.coverMaterialUploading||!this.sourceDynamicMediaInfo.url)return void(0,Lt.H)("动态封面原素材还没传完，hold on",JSON.stringify({coverMaterialUploading:this.coverMaterialUploading,sourceDynamicMediaInfo:this.sourceDynamicMediaInfo}));const{widgetImageDynamicSource:e,recWidgetImage:t}=this.cover.packetMaterial;(0,Lt.H)("invoke getRecWidgetMaterial",JSON.stringify({widgetImageDynamicSource:e,recWidgetImage:t}));let i=a.ZP.prototype.genVersion;this.dynamicRecWidgetUploading=!0;const{cropInfo:{cropWidth:s,cropHeight:r,cropLeft:o,cropTop:n},timeInfo:{duration:c,startTime:l}}=this.sourceDynamicMediaInfo.cropDetailInfo;e?.mediaUrl||((0,Lt.H)("widgetImageDynamicSource空，用recWidgetImage",JSON.stringify({recWidgetImage:t})),this.cover.packetMaterial.widgetImageDynamicSource=t);try{1===this.cover.packetMaterial.coverImageDynamicType&&(this.coverImageDynamicBeforeUploadWidget=this.cover.packetMaterial.coverImageDynamic||{},(0,Lt.H)("保存上一个coverImageDynamic",JSON.stringify({coverImageDynamicBeforeUploadWidget:this.coverImageDynamicBeforeUploadWidget})));const t=await(0,Lr.at)({base:{file_type:ys.Eu[this.sourceDynamicMediaInfo.type],file_url:this.sourceDynamicMediaInfo.url,w:s,h:r,x:o,y:n,duration:c,start_time:l},above:{file_type:this.cover.packetMaterial.widgetImageDynamicSource?.mediaType===de.Je.Zip?de.p0.ZIP:de.p0.PNG,file_url:this.cover.packetMaterial.widgetImageDynamicSource?.mediaUrl}});if(this.sourceDynamicMediaInfo.type===de.Je.Image&&e?.mediaType===de.Je.Image)return void(0,Lt.H)("封面和挂件都是静态的，但是走到了getRecWidgetMaterial",JSON.stringify({sourceDynamicMediaInfo:this.sourceDynamicMediaInfo,widgetImageDynamicSource:e}));if(i<a.ZP.prototype.genVersion)return;if(!t.pagUrl)throw(0,Lt.H)("rec_widget_dynamic_error",JSON.stringify(t)),new Error("异形素材生成失败");(0,Lt.H)("拿到recWidgetCoverMaterial",JSON.stringify({recWidgetCoverMaterial:t})),this.setCoverImageDynamic({pagUrl:t.pagUrl,pagMd5:t.pagMd5}),d.l1.updatePreviewPagReinit("cover")}catch(p){if(i<a.ZP.prototype.genVersion)return;throw this.clearRecWidgetPic(),this.coverWidgetErrorInfo={msg:p.message||"挂件素材生成错误，请重试"},p}finally{this.dynamicRecWidgetUploading=!1}},setPicDynamicMediaInfo(){const{sourceImage:e}=this.cover.packetMaterial;(0,Lt.H)("设置静态封面为动态素材",JSON.stringify({sourceImage:e})),this.sourceDynamicMediaInfo={name:e?.mediaName||"封面素材.jpg",url:e?.mediaUrl||"",mediaUrl:e?.mediaUrl||"",width:0,height:0,type:de.Je.Image,objectUrl:"",cropDetailInfo:{cropInfo:{cropWidth:-1,cropHeight:-1,cropLeft:-1,cropTop:-1},timeInfo:{startTime:0,duration:-1}}},this.cover.packetMaterial.coverImageDynamicSource={mediaType:de.Je.Image,mediaUrl:e?.mediaUrl}},async uploadRecWidgetImage(e){const{onSuccess:t,onError:i,file:a}=e;let s="",r="",o="";const n=async()=>{const e=!(0,Xe.NL)(a.type);if((0,Lt.H)("检查是否要合成动态异形封面",JSON.stringify({isDynamicRecWidget:e,fileType:a?.type,coverImageDynamicType:this.cover.packetMaterial.coverImageDynamicType})),this.cover.packetMaterial.coverImageDynamicType||this.sourceDynamicMediaInfo.url||e||this.dynamicMaterialUploading){(0,Lt.H)("异形素材放入widgetImageDynamicSource"),this.cover.packetMaterial.widgetImageDynamicSource={mediaType:(0,Xe.NL)(a.type)?de.Je.Image:de.Je.Zip,mediaUrl:(0,Xe.NL)(a.type)?s:o,mediaMd5:r,mediaName:a.name},this.cover.packetMaterial.sourceImage?.mediaUrl&&!this.coverMaterialUploading&&!this.cover.packetMaterial.coverImageDynamicType&&e&&((0,Lt.H)("【静态封面+动态挂件】"),this.setPicDynamicMediaInfo());try{(0,Lt.H)("开始getRecWidgetMaterial"),await this.getRecWidgetMaterial(),t()}catch(n){return console.error(n),void i()}}};this.coverDynamicPagLoading=!0;try{if((0,Xe.NL)(a.type))try{const e=await(0,kn.U)(a,{image_name:"recWidgetImage",order_id:this?.cover?.orderId},{type:"recWidgetImage"});this.validUploadRes(e,"recWidgetImage"),s=e?.url||"",r=e?.md5||"";const i=await(0,ye.sT)(a);this.setRecWidgetImage({dataUrl:i,name:a.name||"封面挂件.png",uid:+Date.now(),size:a.size,percent:100,status:"done",originFileObj:{file:a},response:{url:e?.url,md5:e?.md5},url:e?.url||""}),await n(),t()}catch(c){this.recWidgetImageList=[this.saveRecWidgetImageFile],this.coverWidgetErrorInfo={msg:c.message},i()}else{const s=+new Date,r=new Gr.ZP(e.file,{cdnFileType:Gr.vB.zip}),l=await fc.bigFileUpload(e,r);(0,Lt.H)("获取挂件zip",JSON.stringify({uploadDuration:+new Date-s,res:l,orderId:this.cover.orderId})),o=l.url;try{const t=await this.checkRecWidgetZip(o,e.file);fc.mediaUploadReport("23",{file:a,picCnt:t?.zipPicNum})}catch(c){const e=c.message;return e!==Ec&&(this.coverWidgetErrorInfo={msg:e}),(0,Lt.H)("检查挂件压缩包有异常",JSON.stringify({zipUrl:o,errMsg:c?.message})),fc.mediaUploadReport("24",{file:a,failReason:c.message,errorCode:c?.checkResult,picCnt:c?.zipPicNum}),void i()}try{await n(),t()}catch(c){const e=c.message;this.coverWidgetErrorInfo={msg:e},(0,Lt.H)("合成动态挂件异常",JSON.stringify({errMsg:c?.message})),i()}}}finally{this.coverDynamicPagLoading=!1}},async handelRecWidgetImageBeforeUpload(e){if(this.clearRecWidgetPic(),this.coverWidgetErrorInfo={},(0,Xe.NL)(e.type))try{await this.checkRecWidgetImage(e),e=await this.handleRecWidgetFile(e)}catch(t){return Promise.reject()}else if(e.size>xc){const t=`压缩包大小不可超过${xc/1024/1024}MB`;return fc.mediaUploadReport("24",{file:e,failReason:t}),this.coverWidgetErrorInfo={msg:t},Promise.reject()}return Promise.resolve(e)},async handelSenderC2cWidgetImageBeforeUpload(e){this.clearC2cWidgetPic(),this.bubbleWidgetErrorInfo={};const{width:t,height:i,banEditHeight:a,banEditWidth:s,banEditY:r,banEditX:o}=Ge._N,n=300,c=await(0,ye.Hc)(e,{kbLimit:n,imgSize:{width:t,height:i}});switch(c.status){case"wrong_pic_size":return this.bubbleWidgetErrorInfo={file:e,type:"wrong_pic_size",msg:`图片尺寸需为${t}*${i}像素`},fc.mediaUploadReport("26",{failReason:`图片尺寸需为${t}*${i}像素`,file:e}),Promise.reject();case"wrong_file_size":return this.bubbleWidgetErrorInfo={file:e,type:"wrong_file_size",msg:`图片大小不可超过${n}KB`},fc.mediaUploadReport("26",{failReason:`图片大小不可超过${n}KB`,file:e}),Promise.reject();default:break}const l=await(0,ye.gn)(e,{x:o,y:r,width:s,height:a});if(!l)return this.bubbleWidgetErrorInfo={type:"transparent_area_bubble_widget",file:e},fc.mediaUploadReport("26",{failReason:"挂件超过编辑区",file:e}),Promise.reject()},handelBrandLogoBeforeUpload(e,t){const i=new FileReader,a=new Promise(((t,a)=>{if(e.size>wc)return this.errorTip("图片大小不可超过100KB"),a(new Error("img is too big"));i.onload=e=>{const i=new Image;i.src=e.target.result,i.onload=()=>{if(i.width>200||i.height>200||i.width!=i.height)return this.errorTip("图片尺寸需在 200*200像素 以内，且宽高相等"),a(new Error("wrong size"));t()}}}));return i.readAsDataURL(e),a},handleEnvidenceBeforeUpload(e){return e.size>kc?(this.errorTip("文件大小不可超过"+Math.floor(kc/1024/1024)+"MB"),Promise.reject(new Error("img is too big"))):Promise.resolve()},async uploadFile(e){if(this.isFileUploading=!0,e.file.size>Ic){this.evidenceBigFileUploader=new Gr.ZP(e.file,{cdnFileType:Gr.vB.zip});const t=await fc.bigFileUpload(e,this.evidenceBigFileUploader);t.url&&e.onSuccess({base_response:{ret:0},url:t.url})}else this.uploadFileByCgi(e)},uploadFileByCgi(e){const t=new FormData;t.append("file",e.file),fn().post(Zt.gm,t,{onUploadProgress({total:t,loaded:i}){e.onProgress({percent:Math.round(i/t*100)},e)}}).then((t=>{e.onSuccess(t.data,e)})).catch((()=>{e.onError()}))},storyDescValidator(e,t,i){(0===(0,ye.Nu)(e)||(0,ye.Nu)(e)>80)&&i(new Error("请输入正确格式的故事描述"))},storyDescToLength(e){const t=(0,ye.Nu)(e)||0;return Math.ceil(t/2)},async mergeWidgetCover(e){this.mergeWidgetLoading=!0;const t=this.cover?.packetMaterial?.recWidgetImage?.mediaUrl,i=this.cover?.packetMaterial?.sourceImage?.mediaUrl;if(2!==this.coverType||!t||!i)return;const a=await(0,Ge.DC)({coverUrl:this.cropedImgList?.sourceImageUrl||i,widgetUrl:e||t,scale:this.isAtmosphereUser?1:.5,useHbBottom:!0});e&&(0,Lt.H)("使用base64挂件图片合成"),this.cropedImgList?.sourceImageUrl&&!this.cropedImgList?.sourceImageUrl?.startsWith("http")&&(0,Lt.H)("用cropedImgList?.sourceImageUrl合成挂件"),(0,Lt.H)("compositeWidgetPic_syntheticWidgetBase64_success");const s=await(0,kn.U)(a,{image_name:"syntheticWidgetImage",order_id:this?.cover?.orderId});if(0!==s?.baseResponse?.ret)return this.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),void(0,Lt.H)("素材上传失败",JSON.stringify({type:"syntheticWidgetImage",res:s}));{const e=(0,ye.KG)(a);this.cover.packetMaterial.syntheticWidgetImage={mediaUrl:s.url,mediaType:de.Je.Image,mediaMd5:s.md5,mediaName:"syntheticWidgetImage",mediaSize:e.size},(0,Lt.H)("saveCropedImg__synthetic_success",s.url)}const r=await(0,Ge.DC)({coverUrl:this.cropedImgList?.sourceImageUrl||i,widgetUrl:e||t,scale:.5});(0,Lt.H)("compositeWidgetPic_openImageBase64_success");const o=await(0,kn.U)(r,{image_name:"openImage",order_id:this?.cover?.orderId});if(0!==o?.baseResponse?.ret)return this.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),void(0,Lt.H)("素材上传失败",JSON.stringify({type:"openImage",res:o}));{const e=(0,ye.KG)(r);this.cover.packetMaterial.openImage={mediaUrl:o.url,mediaType:de.Je.Image,mediaMd5:o.md5,mediaName:"openImage",mediaSize:e.size},(0,Lt.H)("saveCropedImg__openImage_success",o.url)}this.mergeWidgetLoading=!1},validUploadRes(e,t=""){const i=-2;if(e.baseResponse.ret===i)throw this.errorTip("仅支持PNG/JPG/JPEG"),new Error("仅支持PNG/JPG/JPEG");if(0!==e.baseResponse.ret)throw this.errorTip("封面图片上传失败，请重新上传重试，或联系客服"),(0,Lt.H)("素材上传失败",JSON.stringify({type:t,res:e})),new Error("封面图片上传失败")},setCoverImg(e){this.coverImg={url:e.url,dataUrl:e.dataUrl,name:e.name},this.cover.packetMaterial.sourceImage={mediaType:de.Je.Image,mediaUrl:e.response.url,mediaMd5:e.response.md5,mediaName:e.name,mediaSize:e.size},e.url=e.response.url,this.cover.packetMaterial.isNewDetailImg=1,this.cropedImgList.sourceImageUrl=e.dataUrl||"",this.detailImg=null,this.corpImg=null,this.openImg=null,this.bubbleImg=null,this.saveFile=e,this.mergeWidgetCover(),this.triggerToPreview(2,"cover")},async handleCoverImgChange(e){const{file:t}=e;"done"===t.status||"error"===t.status?this.coverImgUploading=!1:"removed"===t.status?(this.coverImgUploading=!1,this.clearCoverPic()):(this.imgFileList=[t],this.coverImgUploading=!0)},triggerToPreview(e,t,i){this.$refs.previewCoverRef?.triggerToPreview(e,t,i)},setRecWidgetImage(e){this.cover.packetMaterial.recWidgetImage={mediaType:de.Je.Image,mediaUrl:e.response.url,mediaMd5:e.response.md5,mediaName:e.name,mediaSize:e.size},e.url=e.response.url,this.saveRecWidgetImageFile=e,this.mergeWidgetCover(e.dataUrl),this.triggerToPreview(2,"cover"),(0,Lt.H)("handleRecWidgetImageChange",e.response.url)},async handleRecWidgetImageChange(e){const{file:t}=e;"done"===t.status?this.recWidgetUploading=!1:"error"===t.status?(this.recWidgetUploading=!1,this.recWidgetImageList=[]):"removed"===t.status?(this.recWidgetUploading=!1,this.recWidgetImageList=[],this.cover.packetMaterial.recWidgetImage={},this.cover.packetMaterial.syntheticWidgetImage={}):(this.recWidgetImageList=[t],this.recWidgetUploading=!0)},async handleAtmospherePagChange(e){const{file:t}=e;"done"===t.status?(this.cover.packetMaterial.bubbleImageDynamic?.mediaUrl&&(vc.Z.info("因上传了氛围素材，红包气泡视频素材已替换为首帧图片"),this.showAtmosphereTips=!0),this.clearBubbleDynamicMaterial(),this.atmosphereUploading=!1,this.cover.packetMaterial.atmosphereSource={mediaType:de.Je.Image,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name},this.cover.packetMaterial.compressedAtmosphereSource=this.cover.packetMaterial.atmosphereSource,this.getAtmosphereMaterial()):"error"===t.status?(this.atmosphereUploading=!1,this.atmosphereImageList=[]):"removed"===t.status?(this.atmosphereUploading=!1,this.clearAllAtmosphere()):(this.atmosphereImageList=[t],this.atmosphereUploading=!0)},async handleAtmospherePagChangeTest(e){const{file:t}=e;"done"===t.status?(this.atmosphereUploading=!1,this.cover.packetMaterial.atmosphereSource={mediaType:de.Je.Image,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name},this.getAtmosphereMaterialTest()):"error"===t.status?(this.atmosphereUploading=!1,this.atmosphereImageList=[]):"removed"===t.status?(this.atmosphereUploading=!1,this.clearAllAtmosphere()):(this.atmosphereImageList=[t],this.atmosphereUploading=!0)},async handleSenderC2cWidgetImageChange(e){const{file:t}=e;if("done"===t.status){this.bubbleWidgetUploading=!1;const{response:e}=t;try{const t=(0,cc._)(e);this.validUploadRes(t,"senderC2cWidgetImage")}catch{return void(this.senderC2cWidgetImageList=[this.saveSenderC2cWidgetImageFile])}const i=await(0,ye.sT)(t.originFileObj);t.dataUrl=i,this.cover.packetMaterial.senderC2cWidgetImage={mediaType:de.Je.Image,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},this.cover.packetMaterial.receiverC2cWidgetImage=this.cover.packetMaterial.senderC2cWidgetImage,t.fileSize=zt(t.size).toUpperCase(),t.name=`${t.name}`,t.url=t.response.url,this.senderC2cWidgetImageList=[t],this.saveSenderC2cWidgetImageFile=t,fc.mediaUploadReport("25",{file:t}),(0,Lt.H)("handleSenderC2cWidgetImageChange",t.response.url),this.triggerToPreview(2,"bubble")}else"error"===t.status?this.bubbleWidgetUploading=!1:"removed"===t.status?(this.bubbleWidgetUploading=!1,this.senderC2cWidgetImageList=[],this.senderC2cWidgetImage=null,this.cover.packetMaterial.senderC2cWidgetImage={},this.cover.packetMaterial.receiverC2cWidgetImage={}):(this.senderC2cWidgetImageList=[t],this.bubbleWidgetUploading=!0)},toadmin(){this.$router.push({name:"administrator"})},handleCoverEvidenceFileChange(e){const{file:t}=e;"done"===t.status?(this.isFileUploading=!1,t.response&&0!==t.response.base_response.ret?(this.showEvidenceUploadError=!0,(0,Lt.H)("upload_file_error",`ret=${t.response.base_response.ret} fileSize=${t.size}`)):this.showEvidenceUploadError=!1,this.cover.proofMaterial={mediaType:de.Je.File,mediaUrl:t.response.url,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},t.fileSize=zt(t.size).toUpperCase(),t.name=`${t.name}（${t.fileSize}）`):"removed"===t.status?(this.isFileUploading=!1,this.evidenceFileList=[],this.cover.proofMaterial={},this.showEvidenceUploadError=!1,this.evidenceBigFileUploader&&this.evidenceBigFileUploader.endUpload()):"error"===t.status?(this.showEvidenceUploadError=!0,this.isFileUploading=!1):(this.evidenceFileList=[t],this.showEvidenceUploadError=!1)},handleCoverLogoFileChange(e){const{file:t}=e;if(console.info("--- ~ handleCoverLogoFileChange ~ file:",t),"done"===t.status){this.logoUploading=!1;const{response:e}=t;if(-2===e.base_response.ret)return this.errorTip("仅支持PNG/JPG/JPEG"),void(this.logoFileList=[]);if(0!==e.base_response.ret)return(0,Lt.H)("素材上传失败",JSON.stringify({type:"brandLogo",res:e})),this.errorTip("Logo图片上传失败，请重新上传重试，或联系客服"),void(this.logoFileList=[]);this.cover.brandLogo={mediaUrl:t.response.url,mediaType:de.Je.Image,mediaMd5:t.response.md5,mediaName:t.name,mediaSize:t.size},t.fileSize=zt(t.size).toUpperCase(),t.name=`${t.name}（${t.fileSize}）`,this.triggerToPreview(1,"bubble")}else"error"===t.status?(this.errorTip("Logo图片上传失败，请重新上传重试"),this.logoUploading=!1):"removed"===t.status||(this.logoUploading=!0,this.logoFileList=[t])},handleMobilePreview(){this.setSubmitInfo(),this.showPreviewQrcodeDialog=!0},setSubmitInfo(){this.cover.actionAuthInfo=this.actionAuthInfo,this.sourceDynamicMediaInfo.objectUrl="",this.cover.packetMaterial.pagEditInfo=JSON.stringify({sourceDynamicMediaInfo:this.sourceDynamicMediaInfo})},async submit(){try{await this.checkForm()}catch(t){return}fc.baseActionReport({actionType:"8",coverId:this.cover.orderId||"",authorId:d.U6.user.authorId}),this.submitStatus=1,await this.generateOrderId(),this.setSubmitInfo();const e=await yc.modifyCover(je.Z3.Submit,this.cover);if(e&&0===e.baseResponse.ret){this.submitStatus=2,this.saveStatus=2;try{const{packetMaterial:{coverImageDynamic:e,bubbleImageDynamic:t,detailImageDynamic:i,corpLogoDynamic:a,receiveImage:s}}=this.cover,r={coverImageDynamic:e,bubbleImageDynamic:t,detailImageDynamic:i,corpLogoDynamic:a,receiveImage:s};(0,Lt.H)("mkdify_cover_success",JSON.stringify(r))}catch(i){(0,Lt.H)("mkdify_report_error")}this.$router.replace({name:"submitSuccess",query:{cid:this.$route.params.cid||e.orderId}})}else e&&-22===e.baseResponse.ret?(this.submitStatus=0,this.errorTip("最多可同时在审3款红包封面，待审核完成后可继续提交")):-2===e?.baseResponse?.ret?((0,Lt.H)("缺失素材",JSON.stringify({order:this.orderId,packetMaterial:this.cover?.packetMaterial})),this.errorTip("素材缺失，请重新上传素材")):(this.submitStatus=0,this.errorTip("提交失败，请稍后重试"))},async save(){try{await this.checkForm()}catch(t){return}this.saveStatus=1,await this.generateOrderId(),this.setSubmitInfo();const e=await yc.modifyCover(je.Z3.Save,this.cover);e&&0===e.baseResponse.ret?(this.saveStatus=2,this.cover.orderId=e.orderId):(this.saveStatus=0,(0,Lt.H)("保存失败",JSON.stringify({res:e,packetMaterial:this.cover.packetMaterial})),this.errorTip("保存失败，请稍后重试"))},setOpenStroy(e){this.isOpenStroy=e},handleSetAction(e){a.ZP.set(this.cover.packetMaterial,"actionList",[e]),4==e.actionType&&e.isType&&this.recommendInfo(e),this.triggerToPreview(3,"story")},syncCover(e,t){const{packetMaterial:i}=this.cover;"brandLink"===e?(i.actionList?.[0]||(i.actionList=[{}]),i.actionList?.[0]&&(i.actionList[0].actionDetail=t)):"name"===e&&(this.cover.packetName=t)},checkForm(){const e=this;return new Promise(((t,i)=>{e.$refs.baseForm.validate((e=>{if(console.info("--- ~ that.$refs.baseForm.validate ~ valid:",e),!e)return i(new Error("校验不通过"));t()}))}))},deleteCurBrandLogo(){this.cover.brandLogo={},this.logoFileList=[],this.logoUploading=!1,this.triggerToPreview(1,"bubble")},setStoryDescription(e){const t=e.replace(/[\r\n]/g,"").replace(/\s{2}/g,"");this.cover.packetMaterial.storyDescription=t,this.triggerToPreview(3,"story")},setStoryDetail(e){console.log("new story");const{detail:t,index:i}=e,{storyDetailList:s}=this.cover.packetMaterial;s?.[i]?this.cover.packetMaterial.storyDetailList&&a.ZP.set(this.cover.packetMaterial.storyDetailList,i,t):(i==s?.length&&this.recommendInfo(this.OfinderInfo),this.cover.packetMaterial.storyDetailList=s?.concat([t])),this.triggerToPreview(3,"story",i)},setStorySort(e){const{oldIndex:t,newIndex:i}=e,{storyDetailList:a}=this.cover.packetMaterial;a?.splice(i,0,a?.splice(t,1)[0]),this.triggerToPreview(3,"story")},delStoryDetail(e){this.cover.packetMaterial.storyDetailList?.splice(e,1),this.triggerToPreview(3,"story",0)}},beforeDestroy(){(0,Lt.H)("退出编辑",JSON.stringify({orderId:this.cover.orderId})),this.setLayoutPageSimpleRightWrpOverflow("beforeDestroy"),Ac.windowBeforeUnloadMsg="",d.l1.clearActionAuthTimer(),d.l1.CLEAR_ACTION_AUTH_INFO()},beforeRouteLeave(e,t,i){if(2===this.saveStatus)return i();const a=window.confirm("当前内容未保存，是否要离开当前页面");a?i():i(!1)}}),Lc=Mc,Nc=(0,h.Z)(Lc,Ws,zs,!1,null,"4c653601",null),Fc=Nc.exports,Oc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-pay-wrap notranslate"},[t("div",{staticClass:"main-card"},[t("div",{staticClass:"content"},[e.cover&&e.cover.orderId?t("CoverMaterial",{attrs:{cover:e.cover}}):e._e(),"count"===e.type?t("div",{staticClass:"buy-number-set"},[t("div",{staticClass:"title"},[e._v("选择要购买的红包封面数量：")]),t("div",{staticClass:"desc"},[e._v("红包封面按个数收费，1元/个。若购买N个红包封面，则N个微信用户可领取并使用。")]),t("div",{staticClass:"desc"},[e._v("定制方购买后，封面发放有效期为6个月。")]),t("div",{staticClass:"desc"},[e._v("过期后，剩余封面数量将清零。微信用户领取后，可在3个月内无限次使用该封面。")]),t("div",{staticClass:"number-choose-list"},[e._l(e.chooseList,(function(i){return t("RadioCard",{key:i,staticClass:"number-item",attrs:{active:e.curNum===i},on:{click:function(t){return e.setPreNum(i)}}},[t("div",{staticClass:"number"},[e._v(e._s(i)+"个")]),t("div",{staticClass:"divide"}),t("div",{staticClass:"price"},[e._v("￥"+e._s(e._f("ToRMB")(i*e.price)))])])})),t("RadioCard",{staticClass:"number-item",attrs:{active:e.isCustomNum},on:{click:e.chooseCustomNum}},[t("div",{staticClass:"number"},[t("input",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder,expression:"showPlaceholder"}],staticClass:"placeholder",attrs:{type:"number",placeholder:"输入个数"}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!e.showPlaceholder,expression:"!showPlaceholder"},{name:"model",rawName:"v-model",value:e.customNum,expression:"customNum"}],ref:"customInput",staticClass:"real-input",attrs:{type:"number",max:"10000000"},domProps:{value:e.customNum},on:{focus:function(t){e.showPlaceholder=!1},blur:function(t){return e.setPlaceholder()},input:function(t){t.target.composing||(e.customNum=t.target.value)}}}),e.showPlaceholder?e._e():t("span",[e._v("个")])]),t("div",{staticClass:"divide"}),t("div",{staticClass:"price"},[e._v("￥"+e._s(e._f("ToRMB")(e.customNum*e.price)))])])],2),e.isEmotionRainOpen?t("EmotionRainTipEntry",{attrs:{showDetailEntry:!0},on:{click:e.doShowEmotionRainDialog}}):e._e()],1):e._e(),"time"===e.type?t("div",{staticClass:"buy-time-set"},[t("div",{staticClass:"title"},[e._v("填写要购买的发放时长：")]),t("div",{staticClass:"desc"},[e._v("1. 红包封面按照可发放的时长收费，100,000元/小时，单笔订单1小时起订，最长购买时长为24小时。")]),t("div",{staticClass:"desc"},[e._v("2. 每小时内可发放的红包封面上限为50,000个。如购买2小时，则可发放的红包封面上限为100,000个，以此类推。")]),t("div",{staticClass:"desc"},[e._v("3. 定制方购买后，须在6个月内全部发完，过期后无法发放给用户，且未发放的部分不支持退款。")]),t("div",{staticClass:"desc"},[e._v(" 4. 定制方购买后，可在6个月内自主决定发放材料的生效时间，生效后用户才可领取封面，且开始消耗发放时长。如2月1日14点购买了1小时发放时长，则可在5月1日前生效发放材料，并在1个小时内全部发放完。 ")]),t("div",{staticClass:"time-input",on:{click:e.chooseCustomNum}},[t("div",{staticClass:"number"},[t("input",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder,expression:"showPlaceholder"}],staticClass:"placeholder",attrs:{type:"number",placeholder:"输入时间"}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!e.showPlaceholder,expression:"!showPlaceholder"},{name:"model",rawName:"v-model",value:e.customNum,expression:"customNum"}],ref:"customInput",staticClass:"real-input time",attrs:{type:"number",max:"5",min:"1"},domProps:{value:e.customNum},on:{focus:function(t){e.showPlaceholder=!1},blur:function(t){return e.setPlaceholder()},input:function(t){t.target.composing||(e.customNum=t.target.value)}}}),e.showPlaceholder?e._e():t("span",[e._v("小时")])]),t("div",{staticClass:"divide"}),t("div",{staticClass:"price"},[e._v("￥"+e._s(e._f("ToRMB")(e.customNum*e.price)))])])]):e._e()],1),t("div",{staticClass:"options"},[t("mp-button",{on:{click:e.goBack}},[e._v("返回")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:e.pay}},[e._v("购买")])],1)]),t("mp-dialog",{staticClass:"pay-confirm-dialog",attrs:{title:"确认订单",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){e.showDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.ruleConfirm||e.confirmIng},on:{click:e.confirmPay}},[e._v("前往付款")])],1)]},proxy:!0}]),model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t("div",{staticClass:"pay-confirm"},["count"===e.type?t("div",{staticClass:"title"},[t("span",[e._v("购买的红包封面个数为")]),t("span",{staticClass:"num"},[e._v(e._s(e._f("nanCheck")(e.curNum||e.customNum)))]),t("span",[e._v("个，共需要支付：")])]):e._e(),"time"===e.type?t("div",{staticClass:"title"},[t("span",[e._v("购买的红包封面发放时长为")]),t("span",{staticClass:"num"},[e._v(e._s(e._f("nanCheck")(e.customNum)))]),t("span",[e._v("小时，共需要支付：")])]):e._e(),t("div",{staticClass:"price"},[e._v("￥"+e._s(e.needToPay))]),e.isOrganization&&e.isEmotionRainOpen&&e.purchaseCountReachMinPurchaseCount?t("EmotionRainTipEntry2"):e._e(),t("div",{staticClass:"pirce-title"},[e._v("选择支付方式")]),t("div",{staticClass:"pirce-type"},[t("div",{staticClass:"price-item",class:{"price-item_choice":0==e.payType},on:{click:function(t){return e.choosePriceType(0)}}},[t("div",{staticClass:"price-item-title"},[e._v("普通支付")]),t("div",{staticClass:"price-item-tips"},[e._v("支持网银支付、微信支付等")])]),t("div",{staticClass:"price-item",class:{"price-item_choice":1==e.payType},on:{click:function(t){return e.choosePriceType(1)}}},[t("div",{staticClass:"price-item-title"},[e._v("广告预算支付")]),t("div",{staticClass:"price-item-tips"},[t("span",[e._v("可直接使用广告预算")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"4px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0}])},[t("p",[e._v(" 为了提高用户使用体验，微信红包封面开放平台可能不定期内测不同支付方式。支付方式不影响定制方根据《“微信红包封面”定制功能使用条款》所享有的权利和承担的义务。 ")])])],1),e.emotionRainConfirm||!e.adPurchaseSwitch?t("div",{staticClass:"price-item-disable-wrp",on:{click:function(e){e.stopPropagation()}}},[t("p",[e._v("暂不支持广告金支付方式")])]):e._e()])]),e.isEmotionRainOpen&&e.isPersonal&&e.purchaseCountReachMinPurchaseCount?t("div",{staticClass:"rule-confirm"},[t("mp-checkbox",{model:{value:e.emotionRainConfirm,callback:function(t){e.emotionRainConfirm=t},expression:"emotionRainConfirm"}}),t("span",[e._v("同意")]),t("a",{on:{click:e.handleEmotionRainGuide}},[e._v("《活动规则》")]),t("span",[e._v("并参与限时活动·微信表情雨")]),t("a",{on:{click:e.handleEmotionRainShouldKnow}},[e._v("了解详情")])],1):e._e(),t("div",{staticClass:"rule-confirm"},[t("mp-checkbox",{model:{value:e.ruleConfirm,callback:function(t){e.ruleConfirm=t},expression:"ruleConfirm"}}),t("span",[e._v("我同意并遵守")]),t("a",{on:{click:e.handlePayShouldKnow}},[e._v("《付款须知》")])],1)],1)]),t("mp-dialog",{staticClass:"emotion-rain-dialog",attrs:{width:675},model:{value:e.showEmotionRainDialog,callback:function(t){e.showEmotionRainDialog=t},expression:"showEmotionRainDialog"}},[t("div",{staticClass:"emotion-dialog"},[t("EmotionRainTipEntry"),t("EmotionRainDesc")],1)])],1)},Bc=[],qc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"radio-card",class:{active:e.active},on:{click:e.handleClick}},[t("div",{staticClass:"active-flag"},[t("mp-icon",{staticClass:"selected",attrs:{icon:"check_mark_regular",color:"#ffffff",width:20,height:20}})],1),e._t("default")],2)},Qc=[],jc=a.ZP.extend({name:"RadioCard",props:{active:{type:Boolean,default:!1}},methods:{handleClick(){this.$emit("click")}}}),$c=jc,Zc=(0,h.Z)($c,qc,Qc,!1,null,"394c9549",null),Hc=Zc.exports,Gc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"material-wrap"},[t("CoverReceiveImg",{staticClass:"receive-img",attrs:{src:e.cover.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":e.widgetCoverUrl,openSrc:e.cover.packetMaterial.openImage?.mediaUrl}}),t("div",{staticClass:"name"},[e._v(e._s(e.cover.packetName))]),t("div",{staticClass:"check-all"},[t("a",{on:{click:function(t){return t.preventDefault(),e.checkAll.apply(null,arguments)}}},[e._v("查看红包封面样式")])])],1)},Wc=[],zc=a.ZP.extend({name:"CoverMaterial",props:{cover:{type:Object,default(){return{packetName:"",packetMaterial:{}}}}},components:{CoverReceiveImg:be.Z},computed:{widgetCoverUrl(){const e=this.cover;return e?.packetMaterial?.syntheticWidgetImage?.mediaUrl}},methods:{checkAll(){const e=this;e.$router.push({name:"detail",query:{id:this.cover.orderId,showmaininfo:1}})}}}),Vc=zc,Jc=(0,h.Z)(Vc,Gc,Wc,!1,null,"4ffe6ee8",null),Kc=Jc.exports,Yc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-confirm"},[t("p",{staticClass:"second-text"},[e._v(" 购买封面数量达到 "+e._s(e._f("formatPurchaseCount")(e.user.emojiRainInfo.minPurchaseCount))+"个以上，已符合微信表情雨活动参与条件，可以在发放红包封面时选择表情雨发放方式。 ")]),t("EmotionRainTipEntry",{attrs:{showDetailEntry:!0},on:{click:function(t){e.showEmotionRainDialog=!0}}}),t("mp-dialog",{staticClass:"emotion-rain-dialog",attrs:{width:675},model:{value:e.showEmotionRainDialog,callback:function(t){e.showEmotionRainDialog=t},expression:"showEmotionRainDialog"}},[t("div",{staticClass:"emotion-dialog"},[t("EmotionRainTipEntry"),t("EmotionRainDesc")],1)])],1)},Xc=[],el=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-desc-container"},[e._m(0),t("div",{staticClass:"emotion-rain-desc"},[e.isOrganization?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),t("p",[e._v(" 符合参与条件的红包封面，可以在发放时选择表情雨发放方式，让红包封面有机会出现在福袋中，被用户领取。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动参与条件：")]),t("p",[e._v(" 即日起至2021年2月12日24点，企业账号单次购买的红包封面数量不少于"+e._s(e._f("formatPurchaseCount")(e.user.emojiRainInfo.minPurchaseCount))+"个。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("3. 活动时间：")]),t("p",[e._v(" 福袋里的红包封面将在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e(),e.isPersonal?[t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("1. 活动说明")]),t("p",[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。 ")]),e._m(1),t("p",[e._v(" 活动中平台赠送的数量与你此次购买的数量成正比，相关数据可以在活动结束后查看。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("2. 活动参与条件：")]),t("p",[e._v(" 即日起至2021年2月12日24点，个人账号单次购买的红包封面数量不少于"+e._s(e._f("formatPurchaseCount")(e.user.emojiRainInfo.minPurchaseCount))+"个。 ")]),t("h4",{staticClass:"emotion-rain-desc-title"},[e._v("3. 活动时间：")]),t("p",[e._v(" 福袋里的红包封面将在"+e._s(e._f("formatTime")(e.user.emojiRainInfo.beginTime))+"至"+e._s(e._f("formatTime")(e.user.emojiRainInfo.endTime))+"发放，发完即止。 ")])]:e._e()],2)])},tl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"emotion-rain-desc-image"},[t("img",{attrs:{src:i(79337),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v(" 用户在微信聊天中发送特定关键词会触发表情雨，其中有概率出现含有红包封面的福袋。符合参与条件的红包封面，将有机会出现在福袋中，被更多的用户领取。通过福袋领取的红包封面均由平台"),t("span",{staticClass:"emotion-rain-warn"},[e._v("赠送")]),e._v("，不消耗你所购买的数量。 ")])}],il=a.ZP.extend({computed:{user(){return d.U6.user},isOrganization(){const e=this;return e.user.principalType===l.eZ.organization},isPersonal(){const e=this;return e.user.principalType===l.eZ.person}},filters:{formatTime(e){return _a()("yyyy年MM月dd日",new Date(1e3*e))},formatPurchaseCount(e){return e<1e4?e:(e/1e4).toFixed(0)+"万"}}}),al=il,sl=(0,h.Z)(al,el,tl,!1,null,"37ff10fe",null),rl=sl.exports,ol=a.ZP.extend({data(){return{showEmotionRainDialog:!1}},computed:{user(){return d.U6.user},isOrganization(){const e=this;return e.user.principalType===l.eZ.organization},isPersonal(){const e=this;return e.user.principalType===l.eZ.person}},filters:{formatPurchaseCount(e){return e<1e4?e:(e/1e4).toFixed(0)+"万"}},components:{EmotionRainTipEntry:Pa,EmotionRainDesc:rl}}),nl=ol,cl=(0,h.Z)(nl,Yc,Xc,!1,null,"f78d70d0",null),ll=cl.exports,dl=a.ZP.extend({name:"CoverPay",data(){return{type:"count",curNum:100,customNum:null,purChaseNum:0,price:0,chooseList:[100,500,1e3],isCustomNum:!1,showPlaceholder:!0,showDialog:!1,ruleConfirm:!1,payType:0,confirmIng:!1,emotionRainConfirm:!1,showEmotionRainDialog:!1}},computed:{adPurchaseSwitch(){return d.U6.adPurchaseSwitch},cover(){return d.l1.cover},needToPay(){const e=this,{curNum:t,price:i,customNum:a}=e;let s=t*i||a*i;return"time"===e.type&&(s=Number(a)*i),(0,ye.Zh)(100*s)},user(){return d.U6.user},isOrganization(){const e=this;return e.user.principalType===l.eZ.organization},isPersonal(){const e=this;return e.user.principalType===l.eZ.person},isEmotionRainOpen(){const e=this;return e.user.emojiRainInfo&&e.user.emojiRainInfo.activityOpen},purchaseCountReachMinPurchaseCount(){const e=this;return!!e.user.emojiRainInfo&&(e.curNum?e.curNum>=e.user.emojiRainInfo.minPurchaseCount:e.customNum>=e.user.emojiRainInfo.minPurchaseCount)}},components:{RadioCard:Hc,CoverMaterial:Kc,EmotionRainTipEntry:Pa,EmotionRainTipEntry2:ll,EmotionRainDesc:rl},mounted(){this.type=this.$route.query.type,this.init()},methods:{choosePriceType(e){this.payType=e},init(){const e=this;if(!e.cover||!e.cover.orderId)return e.$router.push({name:"covers"});"count"===e.type?e.price=de.uX:"time"===e.type&&(e.price=de.Og)},handlePayShouldKnow(){const e=this;"time"==e.type?window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=time","_blank"):window.open("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=pay","_blank")},handleEmotionRainShouldKnow(){this.showEmotionRainDialog=!0},handleEmotionRainGuide(){this.isOrganization?window.open("/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_org","_blank"):window.open("/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=emotion_rain_personal","_blank")},setPlaceholder(){this.customNum||(this.showPlaceholder=!0)},setPreNum(e){this.isCustomNum=!1,this.curNum=e},chooseCustomNum(){this.showPlaceholder=!1,this.$nextTick((()=>{const e=this.$refs.customInput;e.focus()})),this.isCustomNum=!0,this.curNum=0},goBack(){this.$router.back()},pay(){let e;const t=this;if("count"===t.type)if(this.isCustomNum){if(e=parseInt(t.customNum,10),!e||e>1e7||e<1)return t.$tipsErr("请输入正确格式的购买数量"),void window.setTimeout((()=>{t.$tipsHide()}),3e3)}else e=t.curNum;else if("time"===t.type){e=parseFloat(t.customNum);var i=/(^[1-9]\d*$)/.test(e.toString());if(!i)return t.$tipsErr("只支持正整数"),void window.setTimeout((()=>{t.$tipsHide()}),3e3);if(!e||e>5||e<0)return t.$tipsErr("请输入正确格式的购买数量，最大数量为5小时"),void window.setTimeout((()=>{t.$tipsHide()}),3e3)}this.purChaseNum=e,this.showDialog=!0},async confirmPay(){this.confirmIng=!0;const e=this.cover;if(!e)return;const t=e.orderId,i="time"===this.type?1:0,a={orderId:t,purchaseType:i,participateEmojirainActivity:this.emotionRainConfirm};var s;if(0===i?Object.assign(a,{purchaseCount:this.purChaseNum}):1===i&&Object.assign(a,{purchaseTime:this.purChaseNum}),0==this.payType)if(s=await(new je.ZP).pay(a),this.confirmIng=!1,s&&0===s.baseResponse.ret){const e=s.purchaseUrl;this.checkPurchaseStatus(s.transactionId);const i=`https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/pay.html&tokenid=${encodeURIComponent(s.tokenId)}&tokenurl=${encodeURIComponent(e)}&coverid=${t}&count=${this.purChaseNum}&use_sandbox_env=${s.useSandboxEnv}&type=${this.type}&tid=${s.transactionId}&joinEmotionRain=${this.emotionRainConfirm||this.isOrganization&&this.isEmotionRainOpen?1:0}`;(0,Lt.H)("confirm_pay_success"),window.location.href=i}else this.errorTip("支付失败，请联系客服");else if(s=await(new je.ZP).pay2(a),this.confirmIng=!1,s&&0===s.baseResponse.ret){var r=this.isCustomNum?this.customNum:this.curNum;window.location.href=s.adPurchaseUrl+"&back_url="+encodeURIComponent("https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index#/pay_success?cid="+e.orderId+"&count="+r)}else if(s&&1===s.baseResponse.ret){const e=this;e.$tipsErr("功能内测中，暂无权限"),window.setTimeout((()=>e.$tipsHide()),5e3)}},async checkPurchaseStatus(e){const t=await(new je.ZP).checkPayStatus(e);if(t&&0===t.baseResponse.ret){const i=t.status;if(i===je.P1.Pending)window.setTimeout((()=>this.checkPurchaseStatus(e)),t.nextIntervalMs);else if(i===je.P1.Success){const e=this.cover;this.$router.replace({name:"paySuccess",query:{cid:e.orderId,count:this.isCustomNum?this.customNum:this.curNum}})}else if(i===je.P1.Fail){const e=this;e.$tipsErr("支付失败，请重试"),window.setTimeout((()=>e.$tipsHide()),3e3)}}},doShowEmotionRainDialog(){this.showEmotionRainDialog=!0}},filters:{ToRMB(e){return parseFloat(e).toFixed(2)},nanCheck(e){return e&&Number(e)?Number(e):0},formatPurchaseCount(e){return e<1e4?e:(e/1e4).toFixed(0)+"万"}},watch:{emotionRainConfirm(){this.emotionRainConfirm&&this.choosePriceType(0)}}}),pl=dl,ul=(0,h.Z)(pl,Oc,Bc,!1,null,"57019465",null),hl=ul.exports,ml=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-statistics-wrap"},[t("div",{staticClass:"title"},[e._v("数据统计")]),t("div",{staticClass:"main-card",staticStyle:{"margin-top":"0"}},[t("div",{staticClass:"stat-title"},[e._v("发放数据")]),e._m(0),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已购买个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalPurchaseCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已发放个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalSendCnt)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("已领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalReceiveCount)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("通过「推广」领取个数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalHeatCnt)))])]),e.fullStatData.totalPurchaseTime?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("累计购买封面发放时长")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.fullStatData.totalPurchaseTime)))])]):e._e()])]),t("div",{staticClass:"main-card"},[t("div",{staticClass:"stat-title"},[e._v("使用数据")]),t("div",{staticClass:"stat-tab-list mt-2"},[t("mp-form",[t("mp-form-item",{attrs:{label:"时间范围"}},[t("mp-radio-group",{staticClass:"mt-2",model:{value:e.statisticsTab,callback:function(t){e.statisticsTab=t},expression:"statisticsTab"}},[t("mp-radio",{attrs:{value:"yesterday"}},[e._v("昨日数据")]),t("mp-radio",{attrs:{value:"total"}},[e._v("累计数据")])],1)],1)],1)],1),e.yesterdayStat.latestTime?t("div",{staticClass:"stat-desc",staticStyle:{"margin-top":"-22px"}},[e._v("数据截止至："+e._s(e._f("timeToDate")(e.yesterdayStat.latestTime)))]):e._e(),"yesterday"===e.statisticsTab?[t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.sendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.receiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.detailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.storyExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.sendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.receivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.detailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.storyExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.yesterdayStatItem.enterEmotionproductPv)))]):e._e()]):e._e()])]:e._e(),"total"===e.statisticsTab?[t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receiveUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailUv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事人数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposeUv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"人数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountUv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappUv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderUv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofileUv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductUv)))]):e._e()]):e._e()]),t("div",{staticClass:"stat-list"},[t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("发红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.sendPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("拆红包次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.receivePv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入红包详情页次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.detailPv)))])]),t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("查看封面故事次数")]),t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.storyExposePv)))])]),e.coverActionTypeText?t("div",{staticClass:"stat-item"},[t("div",{staticClass:"name"},[e._v("进入"+e._s(e.coverActionTypeText)+"次数")]),2==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterOfficialaccountPv)))]):3==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterSmallappPv)))]):4==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterFinderPv)))]):5==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.exposureEmotionprofilePv)))]):6==e.coverActionType?t("div",{staticClass:"num"},[e._v(e._s(e._f("undefineCheck")(e.summaryStatItem.enterEmotionproductPv)))]):e._e()]):e._e()])]:e._e()],2),e.isPageReady?t("StatisticsChart",{attrs:{hourlyStatList:e.fullStatData.hourlyStatList,dailyStatList:e.fullStatData.dailyStatList}}):e._e(),e.isPageReady?e._e():[e._m(1)]],2)},gl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"stat-desc"},[t("span",[e._v("数据截止至当前时间")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],vl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"main-card"},[t("div",{staticClass:"header"},[e._m(0),t("div",{staticClass:"right-part"},[t("mp-button",{staticClass:"download",on:{click:e.genCsv}},[e._v("下载表格")])],1)]),t("div",{staticClass:"chart-wrap"},[t("div",{staticClass:"legend-tip",staticStyle:{"align-items":"start"}},[t("label",{staticStyle:{"flex-shrink":"0"}},[e._v("数据类型")]),t("div",e._l(e.statisticalIndicators,(function(i){return t("mp-checkbox",{key:i.key,staticStyle:{"margin-bottom":"8px"},on:{change:e.renderChart},model:{value:e.selected[i.text],callback:function(t){e.$set(e.selected,i.text,t)},expression:"selected[item.text]"}},[e._v(" "+e._s(i.text)+" ")])})),1)]),t("div",{staticClass:"legend-tip"},[t("label",{staticStyle:{"flex-shrink":"0"}},[e._v("日期范围")]),t("mp-radio-group",{model:{value:e.curDataSetKey,callback:function(t){e.curDataSetKey=t},expression:"curDataSetKey"}},[t("mp-radio",{attrs:{value:"hour"}},[e._v("最近24小时")]),t("mp-radio",{attrs:{value:"day"}},[e._v("过去三个月")])],1)],1),t("div",{ref:"chart",staticClass:"chart-bd",staticStyle:{width:"100%",height:"400px"}})])])},fl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"left-part"},[t("div",{staticClass:"stat-title"},[e._v("数据趋势")])])}],yl=i(47114),_l=i.n(yl);function Cl(e){const t=navigator.userAgent;if("ie"===e){const e=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1;if(e){const e=new RegExp("MSIE (\\d+\\.\\d+);");return e.test(t),parseFloat(RegExp["$1"])}return!1}return t.indexOf(e)>-1}const bl={_isIE11(){let e=0;const t=/MSIE (\d+\.\d+);/.test(navigator.userAgent),i=!!navigator.userAgent.match(/Trident\/7.0/),a=navigator.userAgent.indexOf("rv:11.0");return t&&(e=Number(RegExp.$1)),-1!==navigator.appVersion.indexOf("MSIE 10")&&(e=10),i&&-1!==a&&(e=11),11===e},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(e){const t="\ufeff";if(window.Blob&&window.URL){const i=new Blob([t+e],{type:"text/csv"});return URL.createObjectURL(i)}return"data:attachment/csv;charset=utf-8,"+t+encodeURIComponent(e)},download(e,t){if(Cl("ie")&&Cl("ie")<10){const i=window.top.open("about:blank","_blank");i.document.charset="utf-8",i.document.write(t),i.document.close(),i.document.execCommand("SaveAs",e),i.close()}else if(10===Cl("ie")||this._isIE11()||this._isEdge()){const i="\ufeff",a=new Blob([i+t],{type:"text/csv"});navigator.msSaveBlob(a,e)}else{const i=document.createElement("a");i.download=e,i.href=this._getDownloadUrl(t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},genCsvData(e,t){return new(_l())(e,{header:t}).encode()}};var wl=bl,Il=i(70492),kl=i.n(Il);i(46295),i(83062),i(78511);new $.ZP;var Tl=a.ZP.extend({name:"StatisticsChart",data(){return{curDataSetKey:"hour",chart:null,statisticalIndicators:[{key:"getUv",text:"领取封面人数"},{key:"sendUv",text:"发封面红包人数"},{key:"sendPv",text:"发封面红包次数"},{key:"receiveUv",text:"拆封面红包人数"},{key:"receivePv",text:"拆封面红包次数"},{key:"detailUv",text:"进入红包详情页人数"},{key:"detailPv",text:"进入红包详情页次数"},{key:"storyExposeUv",text:"查看封面故事人数"},{key:"storyExposePv",text:"查看封面故事次数"},{key:"heatCnt",text:"通过「推广」领取个数"}],selected:{"领取封面人数":!1,"发封面红包人数":!0,"发封面红包次数":!0,"拆封面红包人数":!1,"拆封面红包次数":!1,"进入红包详情页人数":!1,"进入红包详情页次数":!1,"查看封面故事人数":!1,"查看封面故事次数":!1,"进入小程序次数":!1,"进入小程序人数":!1,"进入公众号人数":!1,"进入公众号次数":!1,"进入视频号人数":!1,"进入视频号次数":!1,"进入表情专辑页人数":!1,"进入表情专辑页次数":!1,"进入艺术家主页人数":!1,"进入艺术家主页次数":!1},option:{color:["#FA9D3B","#91D300","#10AEFF","#006AC2","#E35AFF","#9400B2","#25D8B7","#008226","#FA5151","#07c160","#48a6e2"],xAxis:[{type:"category",data:[""],nameTextStyle:{color:"#9A9A9A",fontSize:10},nameGap:8,axisLine:{lineStyle:{color:"#E4E8EB"}},axisLabel:{color:"#9A9A9A"},axisTick:{alignWithLabel:!0,inside:!0}}],yAxis:{type:"value",splitLine:{lineStyle:{color:"#E4E8EB"}},axisLabel:{margin:24,color:"#9A9A9A"},axisLine:{lineStyle:{color:"#E4E8EB"}},axisTick:{show:!1}},legend:{itemGap:20,itemWidth:8,icon:"circle",align:"left",bottom:"0px",textStyle:{color:"#353535",fontSize:14},data:[""],selected:{}},grid:{left:"0%",right:"0%",bottom:"80px",top:"50px",containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"#ffffff",borderColor:"rgb(240,240,240)",borderWidth:2,textStyle:{color:"#353535"},padding:10,axisPointer:{z:0,type:"shadow",shadowStyle:{color:"#F6F8F9"}}},series:[{data:[""],type:"line"}]}}},props:{fullStat:{type:Object,default(){return{}}},hourlyStatList:{type:Object,default(){return{}}},dailyStatList:{type:Object,default(){return{}}}},computed:{actionType(){return d.l1.coverActionType},curDataSet(){const e=this,t=e.hourList.reverse();return"hour"===this.curDataSetKey?t:"day"===this.curDataSetKey?e.dayList.reverse():[]},hourList(){const e=this,t=e.hourlyStatList,i=(new Date).setHours(0,0,0,0);return t&&t.itemList?t.itemList.map(((e,t)=>{const a=1e3*e.statTime<i?"昨日":"今日",s=Object.assign({},e,{key:t,hour:`${a} ${_a()("hh:mm",new Date(1e3*e.statTime))}`});return s})):[]},dayList(){const e=this,t=e.dailyStatList;return t&&t.itemList?t.itemList.map(((e,t)=>{const i=Object.assign({},e,{key:t,day:_a()("yyyy/MM/dd",new Date(1e3*e.statTime))});return i})):[]}},watch:{curDataSetKey(){this.renderChart()}},mounted(){2===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterOfficialaccountUv",text:"进入公众号人数"},{key:"enterOfficialaccountPv",text:"进入公众号次数"}]):3===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterSmallappUv",text:"进入小程序人数"},{key:"enterSmallappPv",text:"进入小程序次数"}]):4===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterFinderUv",text:"进入视频号人数"},{key:"enterFinderPv",text:"进入视频号次数"}]):6===this.actionType?this.statisticalIndicators=this.statisticalIndicators.concat([{key:"enterEmotionproductUv",text:"进入表情专辑页人数"},{key:"enterEmotionproductPv",text:"进入表情专辑页次数"}]):5===this.actionType&&(this.statisticalIndicators=this.statisticalIndicators.concat([{key:"exposureEmotionprofileUv",text:"进入艺术家主页人数"},{key:"exposureEmotionprofilePv",text:"进入艺术家主页次数"}])),this.option.legend.data=this.statisticalIndicators.map((e=>e.text)),this.renderChart()},methods:{renderChart(){this.$nextTick((()=>{const e=this;let t=JSON.parse(JSON.stringify(this.option));e.chart=kl().init(this.$refs.chart),Object.entries(this.selected).forEach((([e,i])=>{i&&(t.legend.selected[e]=i)})),t.series=e.statisticalIndicators.filter((e=>this.selected[e.text])).map((e=>({type:"line",name:e.text,symbol:"circle",symbolSize:6,data:this.curDataSet.map((t=>t[e.key]))}))),t.xAxis[0].data=this.curDataSet.map((e=>e[this.curDataSetKey])),e.chart.setOption(t,{notMerge:!0})}))},genCsv(){let e="",t=[];t=t.concat(this.statisticalIndicators),"hour"===this.curDataSetKey?(e="红包封面24小时数据.csv",t.unshift({key:"hour",text:"小时"})):"day"===this.curDataSetKey&&(e="红包封面过去三个月数据.csv",t.unshift({key:"day",text:"日期"}));const i=t.map((e=>e.text)),a=this.curDataSet.map((e=>t.map((t=>e[t.key])))),s=wl.genCsvData(a,i);wl.download(e,s)}}}),Sl=Tl,xl=(0,h.Z)(Sl,vl,fl,!1,null,"f373f0b2",null),Al=xl.exports,Pl=a.ZP.extend({name:"CoverStatistics",data(){const e=[{dataIndex:"getUv",key:"getUv",title:"领取封面人数"},{dataIndex:"sendUv",key:"sendUv",title:"发封面红包人数"},{dataIndex:"sendPv",key:"sendPv",title:"发封面红包次数"},{dataIndex:"receiveUv",key:"receiveUv",title:"拆封面红包人数"},{dataIndex:"receivePv",key:"receivePv",title:"拆封面红包次数"},{dataIndex:"detailUv",key:"detailUv",title:"进入红包详情页人数"},{dataIndex:"detailPv",key:"detailPv",title:"进入红包详情页次数"},{dataIndex:"storyExposeUv",key:"storyExposeUv",title:"查看封面故事人数"},{dataIndex:"storyExposePv",key:"storyExposePv",title:"查看封面故事次数"}];return{isPageReady:!1,coverId:"",pageNum:5,curHourListPage:1,curDayListPage:1,fullStatData:{},statisticsTab:"yesterday",hourColumns:[{dataIndex:"hour",key:"hour",title:"时间"}].concat(e),dayColumns:[{dataIndex:"day",key:"day",title:"日期"}].concat(e)}},computed:{coverActionTypeText(){return!!d.l1.coverActionType&&de.pK[d.l1.coverActionType]},coverActionType(){return d.l1.coverActionType},statistics(){const e=d.l1.cover;return e.orderStat||{}},yesterdayStat(){const e=this.fullStatData;return e&&e.yesterdayStat?e.yesterdayStat:{}},yesterdayStatItem(){const e=this;return e.yesterdayStat.itemList&&e.yesterdayStat.itemList[0]?e.yesterdayStat.itemList[0]:{}},summaryStat(){const e=this.fullStatData;return e&&e.summaryStat?e.summaryStat:{}},summaryStatItem(){const e=this;return e.summaryStat.itemList&&e.summaryStat.itemList[0]?e.summaryStat.itemList[0]:{}}},components:{StatisticsChart:Al},async mounted(){const{cid:e}=this.$route.query;this.coverId=e,await this.fetchData(),this.isPageReady=!0},methods:{async fetchData(){if(!this.coverId)return this.$router.replace({name:"covers"});this.fullStatData=await d.l1.getFullStat(this.coverId)}},filters:{undefineCheck(e){return e||"-"},timeToDate(e){return _a()("yyyy年MM月dd日",new Date(1e3*e))}}}),Dl=Pl,Ul=(0,h.Z)(Dl,ml,gl,!1,null,"376ce75e",null),El=Ul.exports,Rl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"platformIndexWrap",staticClass:"platform-index-wrap",class:{scroll:e.bannerPageStatus>=2}},[t("div",{staticClass:"page-slider"},[t("div",{ref:"bannerPage",staticClass:"banner-page page-0",class:e.bannerPageClassName},[e._m(0),t("div",{staticClass:"content"},[t("div",{staticClass:"title banner-title"},[e._v("微信红包封面")]),t("div",{staticClass:"banner-desc"},[e._v("用一个创意封面，与十亿人的节日祝福相融")]),t("div",{staticClass:"button-custom",on:{click:e.goToMake}},[e._v("去定制")])]),t("div",{staticClass:"banner-img-wrap"},[e._l(e.coverDataList,(function(i,a){return t("div",{key:a,ref:"animationGroup",refInFor:!0,staticClass:"animation-group",class:{"active-group":e.activeCoverIndex===a,"widget-animation-group":!!i.widgetUrl},on:{click:function(t){return e.togglePage(a,t)}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.bannerPageStatus>=1.15,expression:"bannerPageStatus >= 1.15"}],staticClass:"animation-slider-group"},[t("div",{staticClass:"story-layers"},[t("div",{staticClass:"poster"},[t("img",{attrs:{src:i.receiveUrl}})]),t("div",{staticClass:"story-list",style:e.storySliderStyle},e._l(i.storyList,(function(e,i){return t("div",{key:i,staticClass:"story-item"},["mp4"===e.slice(-3)?t("video",{staticClass:"storyMedia",attrs:{src:e,muted:"muted"},domProps:{muted:!0}}):t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}],staticClass:"storyMedia"})])})),0),e.totalStoryCount>1?t("div",{staticClass:"indicator-list"},e._l(i.storyList,(function(i,a){return t("div",{key:a,staticClass:"indicator-item",class:{active:e.curStoryIndex===a}})})),0):e._e()]),e._m(1,!0)]),t("spin-coin",{staticClass:"spin-coin",attrs:{start:a===e.activeCoverIndex&&e.bannerPageStatus>=1.1}}),a!==e.activeCoverIndex||e.bannerPageStatus<=1.1?t("div",{staticClass:"open-layer"},[i.widgetUrl?t("widget-cover-img",{attrs:{"cover-url":i.receiveUrl,"widget-url":i.widgetUrl,bottomUrl:e.coverToolPics.hb_bottom,bottomHeight:432,bottomY:1266}}):t("img",{attrs:{src:i.receiveUrl}})],1):e._e()],1)})),e.totalStoryCount>1?t("div",{staticClass:"control-bar"},[t("div",{staticClass:"prev",class:{disabled:0===e.curStoryIndex},on:{click:function(t){return e.toggleStory("prev")}}},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"toggle"}})],1),t("div",{staticClass:"next",class:{disabled:e.curStoryIndex===e.totalStoryCount-1},on:{click:function(t){return e.toggleStory("next")}}},[t("svg-icon",{staticClass:"arrow-icon",attrs:{name:"toggle"}})],1)]):e._e(),t("router-link",{staticClass:"see-more",style:{top:e.seeMoreTop+"px"},attrs:{to:{name:"case"}}},[e._v("浏览更多封面")])],2)])]),t("div",{staticClass:"progress-page",class:e.progressPageClassName,style:{"margin-top":e.progressPageMarginTop+"px"}},[t("div",{staticClass:"main"},[e._m(2),t("div",{staticClass:"progress-page-body"},[t("div",{staticClass:"left-part"},[e._l(e.progressList,(function(i,a){return t("div",{key:a,staticClass:"progress-item"},[t("div",{staticClass:"indicator"},[e._v(e._s(a+1))]),t("div",{staticClass:"progress-body"},[t("div",{staticClass:"progress-title"},[e._v(e._s(i.title))]),t("div",{staticClass:"progress-guide-tip"},[t("div",{staticClass:"label-desc"},[e._v(e._s(i.labelDesc))]),t("div",{staticClass:"progress-content",on:{click:function(t){return e.gotoGuide(a)}}},[e._v(e._s(i.content))])])])])})),t("div",{staticClass:"button",on:{click:e.goToSignup}},[e._v("去申请")])],2)])])])])},Ml=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"banner-bg"},[t("img",{staticClass:"active",attrs:{src:i(12074)}}),t("div",{staticClass:"mask-shadow"})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"bg"},[t("img",{attrs:{src:i(27983)}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"progress-page-header"},[t("div",{staticClass:"title-progress"},[e._v("如何申请")])])}],Ll=(()=>{const e=window;var t=function(e){var t=e.type;return"DOMMouseScroll"!=t&&"mousewheel"!=t||(e.delta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3),e.srcElement&&!e.target&&(e.target=e.srcElement),e.preventDefault||void 0===e.returnValue||(e.preventDefault=function(){e.returnValue=!1}),e};return e.addEventListener?function(e,i,a,s){const r=document;"mousewheel"===i&&void 0!==r.mozFullScreen&&(i="DOMMouseScroll"),e.addEventListener(i,(function(e){a.call(this,t(e))}),s||!1)}:e["attachEvent"]?function(i,a,s){i.attachEvent("on"+a,(function(a){a=a||e.event,s.call(i,t(a))}))}:function(){}})(),Nl=i(87843),Fl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:["gka-base",e.start?"gka-animation":"init"],attrs:{id:"spin-coin"}})},Ol=[],Bl=a.ZP.extend({components:{},props:{start:Boolean}}),ql=Bl,Ql=(0,h.Z)(ql,Fl,Ol,!1,null,"803e3604",null),jl=Ql.exports;const $l=new $.ZP;var Zl=a.ZP.extend({name:"PlatformIndex",data(){return{coverToolPics:Ge.is,bannerPageStatus:-1,isTogglingPage:!1,isBacking:!1,isVhUnit:!1,curStoryIndex:0,storyInterval:0,storyFlag:1,activeCoverIndex:-1,curProgressIndex:0,seeMoreTop:0,progressPageMarginTop:0,progressList:[{title:"注册",content:"了解“平台注册”指引",labelDesc:"注册前需已完成微信公众号企业认证，或个人视频号/公众号粉丝达100个。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_0.png"},{title:"定制封面",content:"了解“封面设计”指引",labelDesc:"上传红包封面定制信息，包括素材图、封面简称、品牌logo、封面故事素材以及相关证明材料。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_1.png"},{title:"提交审核",content:"了解“封面审核”指引",labelDesc:"完成红包封面的定制后，提交给微信团队审核。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_2.png"},{title:"付款下单",content:"了解“封面购买”指引",labelDesc:"审核通过后，选择红包封面的使用人数，并支付款项生成订单。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_3.png"},{title:"发放封面",content:"了解“封面发放”指引",labelDesc:"下单成功后即可生成红包封面二维码、领取序列号兑换码、领取链接，用户领取后可在发红包时使用。",img:"//res.wx.qq.com/a/fed_upload/7bed68b7-c30d-43a5-8286-68cc83c928c5/progress_4.png"}],coverDataList:[],caseData:{},baseUrl:ys.o0,curVideoDom:null}},components:{WidgetCoverImg:$e.Z,SpinCoin:jl},computed:{activeCover(){return this.coverDataList[this.activeCoverIndex]},totalStoryCount(){return this.activeCover?.storyList?.length||0},storySliderStyle(){const e=this,{totalStoryCount:t,curStoryIndex:i}=e,a=(100*i).toFixed(2);return{transform:`translateX(-${a}%)`}},bannerPageClassName(){const e=this,{bannerPageStatus:t,isVhUnit:i}=e;return{"vh-unit":i,"init-status":t>=0,"receive-status":t>=1,"icon-status":t>=1.1,"ready-status":t>=1.15,"open-status":t>=1.2,"story-status":t>=2}},progressPageClassName(){const e=this,{bannerPageStatus:t,isVhUnit:i}=e;return{"vh-unit":i,"story-status":t>=2}}},beforeMount(){this.handleWindowResize()},mounted(){this.reportPv(),this.initData(),this.$nextTick((()=>{window.setTimeout((()=>{this.bannerPageStatus=0}),1e3),window.setTimeout((()=>{this.$refs.bannerPage&&Ll(this.$refs.bannerPage,"mousewheel",this.togglePage.bind(this,2))}),2200);const e=this.$refs.platformIndexWrap;e.addEventListener("scroll",this.platformIndexWrapScroll)})),window.onresize=(0,we.throttle)(this.handleWindowResize.bind(this),1e3)},methods:{reportPv(){const e=!!d.U6.user.authorId;e&&$l.baseActionReport({actionType:"14",authorId:d.U6.user.authorId})},getProgressPageTop(){if(2!==this.bannerPageStatus)return void(this.progressPageMarginTop=0);const e=document.querySelector(".banner-img-wrap"),t=document.querySelector(".see-more"),i=e.getBoundingClientRect().bottom,a=t.getBoundingClientRect().bottom,s=i-a-120;this.progressPageMarginTop=-1*s},getSeeMoreTop(){const e=document.querySelector(".banner-img-wrap"),t=.113,i=e.offsetHeight*t,a=document.querySelector(".active-group"),s=a?.offsetHeight||0,r=50;this.seeMoreTop=i+s+r},platformIndexWrapScroll(){const e=this.$refs.platformIndexWrap;0===e.scrollTop&&2===this.bannerPageStatus&&(clearInterval(this.storyInterval),this.curVideoDom&&this.curVideoDom.pause(),this.bannerPageStatus=0,this.isBacking=!0,this.progressPageMarginTop=0,setTimeout((()=>{this.activeCoverIndex=-1,this.isBacking=!1}),1500))},getRandomCoverList(){const e=this.caseData.body[0].filter((e=>e.indexGroup>=0)),t=[];e.forEach((e=>{t[e.indexGroup]?t[e.indexGroup].push(e):t[e.indexGroup]=[e]}));const i=Math.floor(Math.random()*t.length),a=(0,ye.FT)(t[i]);return a},initData(){const e=[];this.caseData=JSON.parse(JSON.stringify(Nl)),this.caseData.body&&(this.caseData.body.forEach(((t,i)=>{t.forEach(((t,a)=>{"number"===typeof t.indexGroup&&(this.caseData.init||(t.media.forEach(((e,s)=>{t.media[s]=this.baseUrl+(i+1)+"/"+(a+1)+"/"+e})),t["source"]=t.media[0],t.widget&&(t.widgetUrl=this.baseUrl+(i+1)+"/"+(a+1)+"/"+t.widget)),e.push(t))}))})),this.caseData.body.unshift(e));const t=this.getRandomCoverList();this.coverDataList=t.map((e=>({storyList:e.media.slice(1),receiveUrl:e.media[0],widgetUrl:e.widgetUrl,matchVideo:e.matchVideo})))},initMatchVideo(){const e=document.querySelector(".active-group"),t=e.clientHeight,i=document.querySelectorAll(".active-group .storyMedia");i.forEach((e=>{if("VIDEO"===e.tagName){const i=e.clientWidth/e.clientHeight>=1;i&&(e.parentElement.className+=" match-video",e.parentElement.style.height=.81*t+"px")}}))},togglePage(e,t){if("mousewheel"===t.type&&t?.deltaY<0)this.platformIndexWrapScroll();else if(!("mousewheel"===t.type&&this.activeCoverIndex>-1)){if(this.isTogglingPage)return t.preventDefault(),t.stopPropagation(),!1;if(clearInterval(this.storyInterval),this.activeCoverIndex=e,this.curStoryIndex=0,this.storyFlag=1,this.isTogglingPage||this.isBacking)return t.preventDefault(),t.stopPropagation(),!1;if(0===this.bannerPageStatus){this.isTogglingPage=!0,this.bannerPageStatus=1,window.setTimeout((()=>{this.bannerPageStatus=1.1}),1e3),window.setTimeout((()=>{this.bannerPageStatus=1.15}),1600),window.setTimeout((()=>{this.initMatchVideo(),this.bannerPageStatus=1.2}),1700);let e=1700;return"mp4"!==this.activeCover?.storyList[0]?.slice(-3)&&(e+=3e3),setTimeout((()=>{this.storyInterval=window.setInterval((()=>this.toggleStory()),3e3)}),e),window.setTimeout((()=>{this.bannerPageStatus=2,this.getSeeMoreTop(),this.$nextTick((()=>{this.getProgressPageTop()})),this.isTogglingPage=!1}),3500),t.preventDefault(),t.stopPropagation(),!1}return!0}},handleWindowResize(){const e=document.documentElement,t=e.clientWidth,i=e.clientHeight,a=1920/1080;this.isVhUnit=t/i<a||t/i>2,this.$nextTick((()=>{this.getSeeMoreTop(),this.$nextTick((()=>{this.getProgressPageTop()}))}))},playVideo(){clearInterval(this.storyInterval);const e=this.$refs.animationGroup,t=e[this.activeCoverIndex],i=t.querySelectorAll(".storyMedia")[this.curStoryIndex];this.curVideoDom=i,i.muted=!0,i.play(),i.removeEventListener("ended",this.handleVideoEnded),i.addEventListener("ended",this.handleVideoEnded)},handleVideoEnded(){let e="";0===this.curStoryIndex?(e="next",this.storyFlag=1):this.curStoryIndex===this.activeCover?.storyList?.length-1?(e="prev",this.storyFlag=-1):e=-1===this.storyFlag?"prev":"next",this.toggleStory(e)},toggleStory(e){this.curVideoDom&&this.curVideoDom.pause();let t="mp4"===this.activeCover?.storyList[this.curStoryIndex]?.slice(-3);if(e&&this.totalStoryCount>1){if(clearInterval(this.storyInterval),"prev"===e){if(0===this.curStoryIndex)return;this.curStoryIndex-=1}else{if(this.curStoryIndex===this.totalStoryCount-1)return;this.curStoryIndex+=1}t="mp4"===this.activeCover?.storyList[this.curStoryIndex]?.slice(-3),t?this.playVideo():this.storyInterval=window.setInterval((()=>this.toggleStory()),3e3)}else if(this.totalStoryCount>1){if(t)return this.playVideo();this.curStoryIndex===this.totalStoryCount-1&&(this.storyFlag=-1),this.curStoryIndex+=this.storyFlag,0===this.curStoryIndex&&(this.storyFlag=1)}else if(1===this.totalStoryCount&&t)return this.playVideo()},gotoGuide(e){let t="";switch(e){case 0:t="register";break;case 1:t="design";break;case 2:t="standard";break;case 3:t="pay";break;case 4:t="delivery";break;default:break}window.open(`https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=${t}&index=-1`,"_blank")},goToMake(){const{origin:e,pathname:t,search:i}=window.location,a=`${e}${t}${i}#/make`;window.location.replace(a)},goToSignup(){const{origin:e,pathname:t,search:i}=window.location,a=`${e}${t}${i}#/signup/sign_should_know`;window.open(a,"_blank")}},beforeDestroy(){window.onresize=()=>{},clearInterval(this.storyInterval)}}),Hl=Zl,Gl=(0,h.Z)(Hl,Rl,Ml,!1,null,"16a90e7a",null),Wl=Gl.exports,zl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-up-progress-wrapper"},[t("router-view")],1)},Vl=[],Jl=a.ZP.extend({name:"SignUpWrapper"}),Kl=Jl,Yl=(0,h.Z)(Kl,zl,Vl,!1,null,null,null),Xl=Yl.exports,ed=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"notice-detail"},[e.isPageReady?t("div",{staticClass:"main-card"},[t("div",{staticClass:"notice-title"},[e._v(e._s(e.notice.title))]),t("div",{staticClass:"notice-content md-wrap",domProps:{innerHTML:e._s(e.content)}}),t("div",{staticClass:"sign"},[e._v(e._s(e.notice.signature))]),t("div",{staticClass:"date"},[e._v(e._s(e.notice.date))])]):[e._m(0)]],2)},td=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],id=i(32012),ad=i(48154),sd=i.n(ad);const rd=new(sd()),od=new id.Z,nd=i(90520);var cd,ld,dd,pd,ud=a.ZP.extend({name:"NoticeDetail",data(){return{id:"",notice:{},content:"",isPageReady:!1}},async mounted(){const e=this,t=this.$route.query.id;if(!t)return this.$router.push({name:"notice"});e.id=t,await e.fetchData(),e.isPageReady=!0},methods:{async fetchData(){const e=this,t=await od.getDetail(e.id);t&&0===t.baseResponse.ret&&(e.notice=t,e.notice.date=nd("yyyy年MM月dd日",new Date(1e3*t.time)),e.content=rd.render(t.content))}}}),hd=ud,md=(0,h.Z)(hd,ed,td,!1,null,"56fdf26c",null),gd=md.exports,vd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"notice-list"},[t("div",{staticClass:"main-card"},[t("div",{staticClass:"title"},[e._v("公告")]),t("ul",{staticClass:"notice-list"},e._l(e.list,(function(a,s){return t("li",{key:s,staticClass:"notice-item",on:{click:function(t){return e.handleDetail(a)}}},[t("div",{staticClass:"notice-body"},[t("span",[e._v(e._s(a.title))]),a.new?t("div",{staticClass:"new-tag"},[t("img",{attrs:{src:i(38036)}})]):e._e()]),t("span",{staticClass:"time"},[e._v(e._s(a.date))])])})),0)])])},fd=[],yd=a.ZP.extend({name:"NoticeList",computed:{list(){return d.PJ.noticeList}},methods:{handleDetail(e){this.$router.push({name:"noticeDetail",query:{id:e.announcementId}})}}}),_d=yd,Cd=(0,h.Z)(_d,vd,fd,!1,null,"4f85d8d8",null),bd=Cd.exports,wd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"revoke-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"已提交退票申请",desc:"退回的发票预计15个工作日内进行处理并通知，届时原发票金额退回可开票状态，并可以再次申请开发票或退款操作（违规下线状态下）。",confirmText:"查看开票状态"},on:{confirm:e.gotoInvoiceDetail}})],1)])},Id=[],kd=a.ZP.extend({name:"CoverSubmitSuccess",components:{SuccessResult:g},methods:{gotoInvoiceDetail(){const e=this.$route.query.iid;this.$router.push({name:"invoice",query:{iid:e}})}}}),Td=kd,Sd=(0,h.Z)(Td,wd,Id,!1,null,"c045f712",null),xd=Sd.exports,Ad=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"cover-submit-success"},[t("div",{staticClass:"main-card"},[t("SuccessResult",{attrs:{title:"已提交",desc:`<p>${e.invoiceTypeDesc}，次日上午10点前，</p><p>可进入 <a href='/#/invoice?iid=${e.iid}'>开票记录</a> 页面撤消开票申请</p>`}})],1)])},Pd=[];(function(e){e[e["Canceled"]=1]="Canceled",e[e["Applied"]=2]="Applied",e[e["Pending"]=3]="Pending",e[e["Success"]=4]="Success",e[e["Revoking"]=5]="Revoking",e[e["Revoked"]=6]="Revoked"})(cd||(cd={})),function(e){e[e["已撤销"]=1]="已撤销",e[e["已申请"]=2]="已申请",e[e["开票中"]=3]="开票中",e[e["已完成"]=4]="已完成",e[e["退票中"]=5]="退票中",e[e["已退票"]=6]="已退票"}(ld||(ld={})),function(e){e[e["EnterpriseGeneral"]=1]="EnterpriseGeneral",e[e["EnterpriseSpecial"]=2]="EnterpriseSpecial",e[e["Personal"]=3]="Personal"}(dd||(dd={})),function(e){e[e["增值税普通发票"]=1]="增值税普通发票",e[e["增值税专用发票"]=2]="增值税专用发票",e[e["个人增值税普通发票"]=3]="个人增值税普通发票"}(pd||(pd={}));var Dd=a.ZP.extend({name:"CoverSubmitSuccess",components:{SuccessResult:g},computed:{iid(){return this.$route.query.iid},invoiceType(){return Number(this.$route.query.invoiceType)},invoiceTypeDesc(){return this.invoiceType===dd.EnterpriseSpecial?"发票预计15个工作日寄出":"电子发票预计7个工作日可下载"}},methods:{gotoInvoiceDetail(){this.$router.push({name:"invoice",query:{iid:this.iid}})}}}),Ud=Dd,Ed=(0,h.Z)(Ud,Ad,Pd,!1,null,"7f63bd88",null),Rd=Ed.exports,Md=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-detail"},[e.isPageReady?t("div",{staticClass:"main-card invoice-detail-wrap"},[t("div",{staticClass:"title"},[t("span",{staticClass:"left"},[e._v("开票记录详情")]),4===e.invoice.invoiceStatus&&e.invoice.invoiceType!==e.InvoiceType.EnterpriseSpecial?t("mp-button",{attrs:{type:"primary"},on:{click:e.download}},[e._v(" 下载发票 ")]):e._e()],1),t("div",{staticClass:"divide"}),t("div",{staticClass:"progress-section"},[t("div",{staticClass:"info-title"},[e._v("开票详情：")]),t("Step",{staticClass:"step-wrap",attrs:{steps:e.steps,curStep:e.curStep},scopedSlots:e._u([2===e.invoice.invoiceStatus?{key:"label_0",fn:function(){return[t("cancel-apply-popover",{staticClass:"action",attrs:{"invoice-id":e.invoiceId},on:{success:e.fetchData}})]},proxy:!0}:{key:"label_2",fn:function(){return[e.invoice.invoiceDetail.expressNumber?t("div",{staticClass:"info"},[t("mp-popover",{attrs:{position:"up-left",width:"284"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"info-wrap"},[t("span",[e._v("EMS快递单号："+e._s(e.invoice.invoiceDetail.expressNumber))])])]},proxy:!0},{key:"target",fn:function(){return[t("span",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}],null,!1,2827226754)})],1):e._e()]},proxy:!0}],null,!0)})],1),t("div",{staticClass:"divide"}),t("div",{staticClass:"main-info-section"},[t("div",{staticClass:"info-title"},[e._v("开票信息：")]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票金额")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.amount)+"元")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票抬头")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.title))]),t("a",{staticStyle:{"margin-left":"16px"},on:{click:function(t){e.showTitleDetailDialog=!0}}},[e._v("抬头详情")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票类型")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.type))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("邮寄信息")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.mail))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票号码")]),t("div",{staticClass:"content"},[t("span",[e._v(e._s(e.invoiceForShow.number))]),4==e.invoice.invoiceStatus?t("a",{on:{click:function(t){return t.preventDefault(),e.handleRevokeClick.apply(null,arguments)}}},[e._v("申请退票")]):e._e()])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("申请时间")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.time))])])])])]):t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})]),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"抬头详情",width:675},model:{value:e.showTitleDetailDialog,callback:function(t){e.showTitleDetailDialog=t},expression:"showTitleDetailDialog"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开票类型")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceTypeText))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票抬头")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.title))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("纳税人识别号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.socialCreditCode))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户银行")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.bankName))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户账号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.bankAccount))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("注册地址")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.registerAddress))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("公司注册电话")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceDetail.registerTelNumber))])])])]),t("mp-dialog",{staticClass:"revoke-dialog",attrs:{title:"申请退票",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showRevokeFormDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSubmitRevoke,loading:e.revokeLoading},on:{click:function(t){return t.preventDefault(),e.revoke.apply(null,arguments)}}},[e._v("确认申请")])],1)]},proxy:!0}]),model:{value:e.showRevokeFormDialog,callback:function(t){e.showRevokeFormDialog=t},expression:"showRevokeFormDialog"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票金额")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.amount)+"元")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票原因")]),t("div",{staticClass:"content"},[t("mp-dropdown",{attrs:{options:e.reasonList},model:{value:e.reasonChoice,callback:function(t){e.reasonChoice=t},expression:"reasonChoice"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("材料要求")]),t("div",{staticClass:"content"},[t("div",{staticClass:"line tip"},[e._v("请将发票原件邮寄给：")]),t("div",{staticClass:"line"},[e._v("收件人：郑燕锺")]),t("div",{staticClass:"line"},[t("span",[e._v("电话：0755-86013388")]),t("span",{staticClass:"tip"},[e._v("（该联系方式仅供寄件使用）")])]),t("div",{staticClass:"line"},[e._v("地址：深圳市南山区深南大道9998号万利达科技大厦")])])])]),t("mp-form",{ref:"revokeForm",staticClass:"revoke-form",attrs:{model:e.revokeForm,rules:e.revokeFormRule,"label-width":100}},[t("div",{staticClass:"revoke-form-content"},[t("mp-form-item",{attrs:{prop:"description"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("退票说明")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",multi:"multi",placeholder:"详细的退票原因说明，100字以内"},model:{value:e.revokeForm.description,callback:function(t){e.$set(e.revokeForm,"description",t)},expression:"revokeForm.description"}})],1),t("mp-form-item",{attrs:{prop:"mailNumber"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("寄出快递单号")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"请填写寄出的快递单号"},model:{value:e.revokeForm.mailNumber,callback:function(t){e.$set(e.revokeForm,"mailNumber",t)},expression:"revokeForm.mailNumber"}})],1)],1)])],1),t("mp-dialog",{staticClass:"revoke-dialog",attrs:{title:"申请退票",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showRevokeFormDialog2=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSubmitRevoke,loading:e.revokeLoading},on:{click:function(t){return t.preventDefault(),e.revoke.apply(null,arguments)}}},[e._v("确认申请")])],1)]},proxy:!0}]),model:{value:e.showRevokeFormDialog2,callback:function(t){e.showRevokeFormDialog2=t},expression:"showRevokeFormDialog2"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票金额")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceForShow.amount)+"元")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("退票原因")]),t("div",{staticClass:"content"},[t("mp-dropdown",{attrs:{options:e.reasonList},model:{value:e.reasonChoice,callback:function(t){e.reasonChoice=t},expression:"reasonChoice"}})],1)])]),t("mp-form",{ref:"revokeForm",staticClass:"revoke-form",attrs:{model:e.revokeForm,rules:e.revokeFormRule,"label-width":100}},[t("div",{staticClass:"revoke-form-content"},[t("mp-form-item",{attrs:{prop:"description"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("退票说明")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",multi:"multi",placeholder:"详细的退票原因说明，100字以内"},model:{value:e.revokeForm.description,callback:function(t){e.$set(e.revokeForm,"description",t)},expression:"revokeForm.description"}})],1)],1)])],1)],1)},Ld=[],Nd=i(96736),Fd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-popover",{staticClass:"cancel-popover",attrs:{width:236},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"open-invoice"},[e._v("撤销申请")])]},proxy:!0},{key:"content",fn:function(){return[t("p",{staticClass:"content",staticStyle:{"text-align":"center"}},[e._v("撤销该发票申请？")])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.showCancelDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",size:"mini",loading:e.loading},on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v("撤销")])],1)]},proxy:!0}]),model:{value:e.showCancelDialog,callback:function(t){e.showCancelDialog=t},expression:"showCancelDialog"}})},Od=[],Bd=a.ZP.extend({components:{},props:{invoiceId:String},data(){return{showCancelDialog:!1,loading:!1}},computed:{},methods:{async cancel(){this.loading=!0;try{await d.AQ.recallInvoice({invoiceId:this.invoiceId,vm:this})}finally{this.loading=!1}this.showCancelDialog=!1,this.$emit("success")}}}),qd=Bd,Qd=(0,h.Z)(qd,Fd,Od,!1,null,"0f113e2c",null),jd=Qd.exports;const $d=i(90520),Zd=new Nd.Z;var Hd=a.ZP.extend({name:"InvoiceDetail",components:{CancelApplyPopover:jd},data(){return{invoiceType2:0,InvoiceType:dd,isPageReady:!1,invoiceId:"",showTitleDetailDialog:!1,showConfirmRevokeDialog:!1,showRevokeFormDialog:!1,showRevokeFormDialog2:!1,revokeForm:{description:"",mailNumber:""},revokeLoading:!1,revokeFormRule:{description:[{trigger:"change",validator(e,t,i){return t.length>100?i(new Error("退票说明需在100字以内")):t?i():i(new Error("请输入退票说明"))}}],mailNumber:[{trigger:"change",validator(e,t,i){return t?i():i(new Error("请输入快递单号"))}}]},reasonChoice:"0",reasonList:[{label:"不需要发票",value:"0"},{label:"发票类型有误",value:"1"},{label:"发票资料有误",value:"5"},{label:"发票金额有误",value:"6"},{label:"发票盖章问题",value:"7"},{label:"需要退款",value:"8"}]}},computed:{canSubmitRevoke(){if(this.revokeForm.description.length>100)return!1;const e=d.AQ.invoice;return!(e?.invoiceType===dd.EnterpriseSpecial&&!this.revokeForm.mailNumber)},steps(){const e=d.AQ.invoice,t=e.invoiceStatus;if(t>=cd.Applied&&t<=cd.Success){var i="";return i=e.invoiceType===dd.EnterpriseSpecial?e.invoiceDetail.expressNumber?"已完成（已寄出）":"已完成（未寄出）":"已完成",[{label:"已申请"},{label:"开票中"},{label:i}]}return t===cd.Canceled?[{label:"已申请"},{label:"已撤销"}]:t===cd.Revoking||t===cd.Revoked?[{label:"退票中"},{label:"已退票"}]:[]},curStep(){const e=d.AQ.invoice,t=e.invoiceStatus;return t===cd.Canceled?1:t===cd.Applied?0:t===cd.Pending?1:t===cd.Success?2:t===cd.Revoking?0:t===cd.Revoked?2:0},invoice(){return d.AQ.invoice},invoiceTypeText(){return d.AQ.invoice?pd[d.AQ.invoice.invoiceType]:""},invoiceDetail(){return d.AQ.invoice&&d.AQ.invoice.invoiceDetail?d.AQ.invoice.invoiceDetail:{}},invoiceForShow(){const e=d.AQ.invoice;if(!e)return{};const{title:t,mailAddressProvince:i,mailAddressCity:a,mailAddressDistrict:s="",mailAddressDetail:r,mailAddressee:o,mailAddresseeTelNumber:n,invoiceNumber:c}=e.invoiceDetail;let l=`${i}${a}${s}${r};${o};${n}`;return e.invoiceType!==dd.EnterpriseSpecial&&(l="-"),{amount:(0,ye.Zh)(e.invoiceDetail.invoiceAmountInCents),title:e.invoiceDetail.title,type:pd[e.invoiceType],mail:l,number:c||"-",time:$d("yyyy/MM/dd hh:mm",new Date(1e3*e.createTime))}}},async mounted(){d.AQ.invoice;const e=this,t=this.$route.query.iid;if(!t)return this.$router.replace({name:"invoices"});e.invoiceId=t,await e.fetchData(),e.isPageReady=!0},methods:{async fetchData(){const e=this;await d.AQ.getInvoice(e.invoiceId)},async download(){const e=this;await Zd.downloadInvoice(e.invoiceId)},handleRevokeClick(){if(!this.invoice)return;const e=d.AQ.invoice;e.invoiceType==dd.EnterpriseSpecial?this.showRevokeFormDialog=!0:this.showRevokeFormDialog2=!0},async revoke(){const e=this;this.revokeLoading=!0;try{var t=await Zd.cancelInvoice(this.invoiceId,this.revokeForm.description,this.revokeForm.mailNumber,parseInt(this.reasonChoice))}finally{this.revokeLoading=!1}t&&0===t.baseResponse.ret?e.$router.push({name:"revokeSuccess",query:{iid:e.invoiceId}}):this.errorTip("申请异常，请稍后再试或联系客服")},errorTip(e){const t=this;t.$tipsErr(e),window.setTimeout((()=>t.$tipsHide()),3e3)}}}),Gd=Hd,Wd=(0,h.Z)(Gd,Md,Ld,!1,null,"32904aad",null),zd=Wd.exports,Vd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-make-wrap"},[t("div",{staticClass:"title"},[e._v("确认开票信息")]),t("div",{staticClass:"desc"},[e._v("企业增值税专用发票为纸质发票，需要选择指定地址邮寄。其余类型的发票为电子发票，开票后可自行下载电子版。")]),t("div",{staticClass:"divide"}),t("div",{staticClass:"invoice-make-body"},[t("div",{staticClass:"input-tip"},[e._v("填写发票抬头")]),t("a-table",{staticClass:"invoice-make-table",attrs:{columns:e.invoicColumns,dataSource:e.invoiceList,pagination:!1},scopedSlots:e._u([{key:"action",fn:function(){return[e.invoice.invoiceType?t("div",{staticClass:"detail"},[t("a",{staticStyle:{"margin-right":"20px"},on:{click:e.checkTitleDetail}},[e._v("抬头详情")]),t("a",{on:{click:function(t){return e.editInvoice(2)}}},[e._v("修改")])]):t("div",{staticClass:"detail"},[t("span",[e._v("暂无发票抬头信息，")]),t("a",{on:{click:function(t){return e.editInvoice(1)}}},[e._v("编辑")])])]},proxy:!0}])}),2===e.invoiceEditTemp.invoiceType?[t("div",{staticClass:"input-tip"},[e._v("填写邮寄地址")]),t("a-table",{staticClass:"address-table",attrs:{columns:e.addressColumns,dataSource:e.addressList,pagination:!1},scopedSlots:e._u([{key:"action",fn:function(){return[t("div",{staticClass:"detail"},[t("a",{on:{click:e.editAddress}},[e.invoice.mailAddressee?[e._v("编辑")]:[e._v("修改")]],2)])]},proxy:!0}],null,!1,236326789)})]:e._e()],2),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"开票须知",width:675},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:e.knowBack}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:e.knowConfirm}},[e._v("同意")])],1)]},proxy:!0}]),model:{value:e.stepKnow,callback:function(t){e.stepKnow=t},expression:"stepKnow"}},[1==e.stepKnow?t("div",{staticClass:"tips-content"},[t("h2",[e._v("特别提示")]),t("p",[e._v(" 1.在经济交往中，任何主体均应严格遵守《中华人民共和国发票管理办法》等法律法规的规定，依法取得、使用发票，不得转让、代开发票或以其他非法形式使用发票，否则将构成违反犯罪行为，须承担相应的法律责任。 ")]),t("p",[e._v(" 2.在微信红包封面开放平台，当且仅当开通本功能并付款的定制方，并非实际的服务使用方的情况下，定制方才可通过“开具其他主体发票”入口，申请腾讯就本服务向实际的服务使用方开具发票。 ")]),t("p",[e._v(" 3.定制方在此同意，一旦通过“开具其他主体发票”入口申请腾讯向实际的服务使用方开具发票，定制方即无权要求腾讯就相关服务再向其开具发票。在向实际的服务使用方开具发票后，腾讯就本服务所承担的发票开具义务即履行完毕。 ")]),t("p",[e._v("4.就任一定制方名下的服务，定制方仅能要求腾讯向单一主体开具发票，不得分拆服务金额或订单，要求腾讯向一个以上的主体开具发票。")]),t("p",[e._v(" 5.定制方申请“开具其他主体发票”，需要提供实际的服务使用方加盖公章的《承诺书》。定制方应确保该等《承诺书》为实际的服务使用方的真实意思表示，并在本平台上传《承诺书》盖章版的清晰彩色扫描件。否则腾讯有权拒绝本开票申请，而仅同意向定制方开具发票。 ")]),t("p",[e._v(" 6.申请“开具其他主体发票”的操作为不可撤销的操作，请在仔细阅读、充分理解并同意本《特别提示》的全部内容，同时确认你符合本《特别提示》第2条所述的条件后，才能进行本操作。当腾讯根据定制方的申请向实际的服务使用方开具发票后，定制方也不得以任何形式否认本申请，或要求腾讯撤回向实际的服务使用方开具的发票。 ")]),t("p",[e._v("7.如定制方在使用“开具其他主体发票”功能的过程中，有任何违法行为，导致腾讯或任何第三方受到任何损失的，定制方应赔偿腾讯及第三方的全部损失。")])]):e._e(),2==e.stepKnow?t("div",{staticClass:"step-wrap"},[t("div",{staticClass:"step"},[t("div",{staticClass:"step-item"},[t("div",{staticClass:"num"},[e._v("1")]),t("div",{staticClass:"label"},[e._v("下载模版")]),t("a",{staticClass:"link",attrs:{href:"http://res.wx.qq.com/a/wx_fed/red-envelope-cover-platform/res/doc/invoice_1.docx"}},[e._v("下载")])]),t("div",{staticClass:"step-item"},[t("div",{staticClass:"num"},[e._v("2")]),t("div",{staticClass:"label"},[e._v("填写模版")]),t("a",{staticClass:"link",attrs:{href:"http://res.wx.qq.com/a/wx_fed/red-envelope-cover-platform/res/doc/invoice_2.docx"}},[e._v("查看填写规则")])]),t("div",{staticClass:"step-item"},[t("div",{staticClass:"num"},[e._v("3")]),t("div",{staticClass:"label"},[e._v("发送至客服邮箱")]),t("div",{staticClass:"link",on:{click:function(t){return e.copy("input-mail")}}},[e._v("复制客服邮箱链接")]),t("input",{ref:"input-mail",attrs:{value:"wxcover_support@tencent.com"}})])])]):e._e()]),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"填写抬头信息",width:675},on:{close:e.resetInvoiceEditTemp},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.cancelInvoiceForm.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSetInvoice},on:{click:function(t){return t.preventDefault(),e.setInvoice.apply(null,arguments)}}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.showInvoiceEditDialog,callback:function(t){e.showInvoiceEditDialog=t},expression:"showInvoiceEditDialog"}},[t("mp-form",{ref:"invoiceForm",staticClass:"invoice-form",attrs:{model:e.invoiceEditTemp,rules:e.invoiceFormRule,"label-width":120}},[t("mp-form-item",{attrs:{rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("选择开票类型")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-dropdown",{staticClass:"invoice-dialog-dropdown",attrs:{options:e.invoiceTypeOptions},model:{value:e.invoiceEditTemp.invoiceType,callback:function(t){e.$set(e.invoiceEditTemp,"invoiceType",t)},expression:"invoiceEditTemp.invoiceType"}})],1),t("mp-form-item",{attrs:{rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("抬头类型")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-dropdown",{staticClass:"invoice-dialog-dropdown",attrs:{options:e.titleTypeOptions},model:{value:e.invoiceEditTemp.titleType,callback:function(t){e.$set(e.invoiceEditTemp,"titleType",t)},expression:"invoiceEditTemp.titleType"}})],1),t("mp-form-item",{attrs:{prop:"title",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("发票抬头")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",disabled:2!==e.invoiceEditTemp.titleType&&1!=e.principalType,placeholder:2!==e.invoiceEditTemp.titleType?"填写单位全称":"填写个人名称"},scopedSlots:e._u([{key:"description",fn:function(){return[2!==e.invoiceEditTemp.titleType&&1!=e.principalType?t("p",[t("span",[e._v("发票抬头需与认证主体名称一致")])]):e._e()]},proxy:!0}]),model:{value:e.invoiceEditTemp.title,callback:function(t){e.$set(e.invoiceEditTemp,"title","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.title"}})],1),2!==e.invoiceEditTemp.titleType?[t("mp-form-item",{attrs:{prop:"socialCreditCode",rules:e.validCreditCode},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("纳税人识别号")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}],null,!1,3669169323)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text"},model:{value:e.invoiceEditTemp.socialCreditCode,callback:function(t){e.$set(e.invoiceEditTemp,"socialCreditCode","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.socialCreditCode"}})],1),t("mp-form-item",{attrs:{prop:"bankName",rules:2===e.invoiceEditTemp.invoiceType?e.validBankName:e.validChineseRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("开户银行")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,1644171725)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"企业基本开户行"},model:{value:e.invoiceEditTemp.bankName,callback:function(t){e.$set(e.invoiceEditTemp,"bankName","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.bankName"}})],1),t("mp-form-item",{attrs:{prop:"bankAccount",rules:2===e.invoiceEditTemp.invoiceType?e.validBankAccount:e.validBankNumRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("开户账号")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,832539206)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"开户许可证登记的银行账号"},model:{value:e.invoiceEditTemp.bankAccount,callback:function(t){e.$set(e.invoiceEditTemp,"bankAccount","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.bankAccount"}})],1),t("mp-form-item",{attrs:{prop:"registerAddress",rules:2===e.invoiceEditTemp.invoiceType?e.requiredRule:{}},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("注册地址")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,1499057716)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"税务登记证（纳税人识别号证）上的地址"},model:{value:e.invoiceEditTemp.registerAddress,callback:function(t){e.$set(e.invoiceEditTemp,"registerAddress","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.registerAddress"}})],1),t("mp-form-item",{attrs:{prop:"registerTelNumber",rules:2===e.invoiceEditTemp.invoiceType?e.requiredRule:{}},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("公司注册电话")]),2===e.invoiceEditTemp.invoiceType?t("span",{staticClass:"required"},[e._v("*")]):e._e()])]},proxy:!0}],null,!1,374910552)},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"在税务机关登记的电话"},model:{value:e.invoiceEditTemp.registerTelNumber,callback:function(t){e.$set(e.invoiceEditTemp,"registerTelNumber","string"===typeof t?t.trim():t)},expression:"invoiceEditTemp.registerTelNumber"}})],1)]:e._e()],2)],1),t("mp-dialog",{staticClass:"address-dialog",attrs:{title:"填写邮寄地址",width:675},on:{close:e.resetAddressEditTemp},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.cancelAddressForm.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.canSetAddress},on:{click:function(t){return t.preventDefault(),e.setAddress.apply(null,arguments)}}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.showAddressEditDialog,callback:function(t){e.showAddressEditDialog=t},expression:"showAddressEditDialog"}},[t("mp-form",{ref:"addressForm",staticClass:"address-form",attrs:{model:e.addressEditTemp,rules:e.invoiceFormRule,"label-width":120}},[t("mp-form-item",{attrs:{prop:"mailAddressee",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("收件人姓名")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"填写收件人姓名"},model:{value:e.addressEditTemp.mailAddressee,callback:function(t){e.$set(e.addressEditTemp,"mailAddressee","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailAddressee"}})],1),t("mp-form-item",{attrs:{rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("邮寄地址")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("div",{staticClass:"address-input"},[t("mp-dropdown",{attrs:{placeholder:"选择省份",trigger:"click",options:e.provinceList},on:{change:e.handleProvinceAddrChange},model:{value:e.addressEditTemp.mailAddressProvince,callback:function(t){e.$set(e.addressEditTemp,"mailAddressProvince",t)},expression:"addressEditTemp.mailAddressProvince"}})],1),t("div",{staticClass:"address-input"},[t("mp-dropdown",{attrs:{placeholder:"选择城市",trigger:"click",options:e.cityList,loading:e.cityAddrLoading},on:{change:e.handleCityAddrChange},model:{value:e.addressEditTemp.mailAddressCity,callback:function(t){e.$set(e.addressEditTemp,"mailAddressCity",t)},expression:"addressEditTemp.mailAddressCity"}})],1),t("div",{staticClass:"address-input"},[t("mp-dropdown",{attrs:{placeholder:"选择区/县",trigger:"click",options:e.districtList,loading:e.districtAddrLoading},model:{value:e.addressEditTemp.mailAddressDistrict,callback:function(t){e.$set(e.addressEditTemp,"mailAddressDistrict",t)},expression:"addressEditTemp.mailAddressDistrict"}})],1)]),t("mp-form-item",{attrs:{prop:"mailAddressDetail",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("详细地址")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"填写具体地址信息，不必重复省市区信息"},model:{value:e.addressEditTemp.mailAddressDetail,callback:function(t){e.$set(e.addressEditTemp,"mailAddressDetail","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailAddressDetail"}})],1),t("mp-form-item",{attrs:{prop:"mailAddresseeTelNumber",rules:e.requiredRule},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("联系方式")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"座机或移动电话"},model:{value:e.addressEditTemp.mailAddresseeTelNumber,callback:function(t){e.$set(e.addressEditTemp,"mailAddresseeTelNumber","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailAddresseeTelNumber"}})],1),t("mp-form-item",{attrs:{prop:"mailPostCode",rules:e.validMailPostCode},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"label"},[t("span",[e._v("邮政编码")]),t("span",{staticClass:"required"},[e._v("*")])])]},proxy:!0}])},[t("mp-input",{staticClass:"text-input",attrs:{type:"text",placeholder:"输入地区的邮政编码"},model:{value:e.addressEditTemp.mailPostCode,callback:function(t){e.$set(e.addressEditTemp,"mailPostCode","string"===typeof t?t.trim():t)},expression:"addressEditTemp.mailPostCode"}})],1)],1)],1),t("mp-dialog",{staticClass:"invoice-dialog",attrs:{title:"抬头详情",width:675},model:{value:e.showTitleDetailDialog,callback:function(t){e.showTitleDetailDialog=t},expression:"showTitleDetailDialog"}},[t("div",{staticClass:"title-detail-wrap"},[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开票类型")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoiceList[0].type))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("发票抬头")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.title))])]),2!==e.invoice.titleType?[t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("纳税人识别号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.socialCreditCode))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户银行")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.bankName||"-"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("开户账号")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.bankAccount||"-"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("注册地址")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.registerAddress||"-"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"label"},[e._v("公司注册电话")]),t("div",{staticClass:"content"},[e._v(e._s(e.invoice.registerTelNumber||"-"))])])]:e._e()],2)]),t("mp-dialog",{staticClass:"confirm-dialog",attrs:{value:e.showConfirmDialog,closeble:"false",width:675},on:{close:e.handleConfirmDialogClose},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){return e.updateShowConfirmDialog(!1)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:e.confirmDisabled,loading:e.confirmLoading},on:{click:e.submit}},[e._v("提交")])],1)],1)]},proxy:!0}])},[t("div",{staticClass:"confirm-section"},[t("span",[e._v("提交后不可修改开票信息。若信息填写错误，可在次日上午10点前撤销开票。")])])])],1)},Jd=[];const Kd=new Nd.Z,Yd=e=>/^[A-Z0-9]{15,20}$/.test(e),Xd=e=>!e||/^[\u4e00-\u9fa5\p{P}]+$/u.test(e),ep=e=>!e||/^[0-9]+$/.test(e),tp=e=>!e||/^[0-9\-]+$/.test(e),ip={validator:(e,t,i)=>Xd(t)?i():i(new Error("仅支持输入中文"))},ap={validator:(e,t,i)=>tp(t)?i():i(new Error("仅支持输入数字"))};var sp=a.ZP.extend({name:"InvoiceMake",data(){return{amount:0,orderId:"",showInvoiceEditDialog:!0,showEditAddressDialog:!1,showTitleDetailDialog:!1,cityAddrLoading:!1,districtAddrLoading:!1,confirmDisabled:!1,stepKnow:0,knowConfirmText:"同意",invoiceTypeOptions:[{label:pd[dd.EnterpriseSpecial],value:dd.EnterpriseSpecial},{label:pd[dd.EnterpriseGeneral],value:dd.EnterpriseGeneral}],titleTypeOptions:[{label:"企业",value:1}],invoiceEditTemp:{title:"",socialCreditCode:"",bankName:"",bankAccount:"",registerAddress:"",registerTelNumber:"",invoiceType:1,titleType:1},invoiceEditTempCache:{title:"",socialCreditCode:"",bankName:"",bankAccount:"",registerAddress:"",registerTelNumber:"",invoiceType:1,titleType:1},addressEditTemp:{mailAddressProvince:"",mailAddressCity:"",mailAddressDistrict:"",mailAddressDetail:"",mailPostCode:"",mailAddressee:"",mailAddresseeTelNumber:""},addressEditTempCache:{mailAddressProvince:"",mailAddressCity:"",mailAddressDistrict:"",mailAddressDetail:"",mailPostCode:"",mailAddressee:"",mailAddresseeTelNumber:""},invoicColumns:[{dataIndex:"title",index:"title",title:"发票抬头"},{dataIndex:"type",index:"type",title:"发票类型"},{title:"操作",key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}],addressColumns:[{dataIndex:"mailAddressee",index:"mailAddressee",title:"收件人"},{dataIndex:"mailAddresseeTelNumber",index:"mailAddresseeTelNumber",title:"联系方式"},{dataIndex:"mailAddress",index:"mailAddress",title:"收件地址"},{title:"操作",key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}],showAddressEditDialog:!1,requiredRule:{required:!0,message:"请填写此项内容"},validChineseRule:ip,validBankNumRule:ap,validCreditCode:[{required:!0,message:"请填写此项内容"},{trigger:["change","blur"],validator:(e,t,i)=>Yd(t)?i():i(new Error("仅支持输入大写字母和数字，长度为15-20位"))}],validBankName:[{required:!0,message:"请填写此项内容"},ip],validBankAccount:[{required:!0,message:"请填写此项内容"},ap],validMailPostCode:[{required:!0,message:"请填写此项内容"},{trigger:["change","blur"],validator:(e,t,i)=>ep(t)?i():i(new Error("仅支持输入数字"))}],provinceList:[],cityList:[],districtList:[],invoiceFormRule:{}}},props:{transactionIdList:Array,submit:Function,showConfirmDialog:Boolean,invoice:Object,confirmLoading:Boolean},watch:{"invoiceEditTemp.invoiceType":{handler:function(){this.$nextTick((()=>{const e=this;e.$refs.invoiceForm;e.invoiceEditTemp.invoiceType!==dd.Personal?e.invoiceEditTemp.title=d.U6.user.principalName:e.invoiceEditTemp.title="",e.invoiceEditTemp.invoiceType==dd.EnterpriseGeneral&&1===this.principalType?e.titleTypeOptions=[{label:"企业",value:1},{label:"个人",value:2}]:e.invoiceEditTemp.invoiceType==dd.EnterpriseSpecial&&(e.titleTypeOptions=[{label:"企业",value:1}],e.invoiceEditTemp.titleType=1)}))},immediate:!0},"invoiceEditTemp.titleType":{handler:function(e){const t=this;2==t.invoiceEditTemp.titleType&&(this.invoiceEditTemp.invoiceType=dd.EnterpriseGeneral),this.handleInvoiceTypeOptions()},immediate:!0}},computed:{principalType(){return d.U6.user.principalType},canSetInvoice(){const e=this,t=e.invoiceEditTemp,{socialCreditCode:i}=t;return t.invoiceType===dd.Personal||2===t.titleType?!!t.title:t.invoiceType===dd.EnterpriseGeneral?Yd(i)&&tp(t.bankAccount)&&Xd(t.bankName):Yd(i)&&tp(t.bankAccount)&&Xd(t.bankName)&&Object.values(t).every((e=>e))},canSetAddress(){const e=this,t=e.addressEditTemp;return ep(t.mailPostCode)&&Object.values(t).every((e=>e))},invoiceList(){return[{key:"0",title:this?.invoice?.title||"-",type:pd[this.invoice.invoiceType]||"-"}]},addressList(){const e=this,{mailAddressProvince:t,mailAddressCity:i,mailAddressDistrict:a,mailAddressDetail:s}=e.invoice,r=`${t}${i}${a}${s}`;return[{key:"0",mailAddressee:e.invoice.mailAddressee||"-",mailAddresseeTelNumber:e.invoice.mailAddresseeTelNumber||"-",mailAddress:s?r:"-"}]},canSubmit(){const e=this,t=e.invoice;if(t.invoiceType===dd.Personal||2==e.invoiceEditTemp.titleType){if(t.title)return!0}else if(t.invoiceType===dd.EnterpriseGeneral){if(t.title)return!0}else if(t.invoiceType===dd.EnterpriseSpecial&&t.title&&t.mailAddressee)return!0;return!1}},mounted(){this.handleInvoiceTypeOptions(),this.$nextTick((()=>{this.invoiceEditTempCache=JSON.parse(JSON.stringify(this.invoiceEditTemp))})),this.coverGetInvoiceAddrList()},methods:{handleConfirmDialogClose(){this.updateShowConfirmDialog(!1)},async handleProvinceAddrChange(e){this.cityAddrLoading=!0;const t=this.provinceList.find((t=>t.value===e)),i=t?.areaId;this.cityList=[],this.districtList=[],this.addressEditTemp.mailAddressCity="",this.addressEditTemp.mailAddressDistrict="";try{await this.coverGetInvoiceAddrList(i)}finally{this.cityAddrLoading=!1}},async handleCityAddrChange(e){this.districtAddrLoading=!0;const t=this.cityList.find((t=>t.value===e)),i=t?.areaId;this.districtList=[],this.addressEditTemp.mailAddressDistrict="";try{await this.coverGetInvoiceAddrList(i)}finally{this.districtAddrLoading=!1}},async coverGetInvoiceAddrList(e){const t=await Kd.coverGetInvoiceAddrList(e);if(!t?.addrList)return;const{addrList:i}=t;let a=i.map((e=>({label:e.areaName,value:e.areaName,areaId:e.areaId})));e?i[0]&&"2"===i[0].level?this.cityList.push(...a):i[0]&&"3"===i[0].level&&this.districtList.push(...a):this.provinceList.push(...a)},handleInvoiceTypeOptions(){1==this.principalType?this.invoiceTypeOptions=[{label:pd[dd.EnterpriseGeneral],value:dd.EnterpriseGeneral}]:this.invoiceTypeOptions=[{label:pd[dd.EnterpriseSpecial],value:dd.EnterpriseSpecial},{label:pd[dd.EnterpriseGeneral],value:dd.EnterpriseGeneral}]},resetInvoiceEditTemp(){this.invoiceEditTemp=JSON.parse(JSON.stringify(this.invoiceEditTempCache))},resetAddressEditTemp(){this.addressEditTemp=JSON.parse(JSON.stringify(this.addressEditTempCache))},updateShowConfirmDialog(e){this.$emit("update:showConfirmDialog",e)},copy(e){const t=this;this.select(e),document.execCommand("copy")?(document.execCommand("copy"),t.$tipsSuc("复制成功"),window.setTimeout((()=>t.$tipsHide()),1500)):(t.$tipsErr("复制失败，请手动复制"),window.setTimeout((()=>t.$tipsHide()),1500))},select(e){const t=this.$refs[e];t.select()},knowConfirm(){1==this.stepKnow?this.stepKnow=2:2==this.stepKnow&&(this.stepKnow=0,this.showInvoiceEditDialog=!0)},toDoc(){this.stepKnow=1,this.showInvoiceEditDialog=!1},knowBack(){1==this.stepKnow?(this.stepKnow=0,this.showInvoiceEditDialog=!0):2==this.stepKnow&&(this.stepKnow=1)},editInvoice(e){const t=this;t.showInvoiceEditDialog=!0,1==d.U6.user.principalType?1==e&&(t.invoiceEditTemp.titleType=2):t.invoiceEditTemp.title=d.U6.user.principalName,this.invoiceEditTempCache=JSON.parse(JSON.stringify(this.invoiceEditTemp))},setInvoice(){this.$emit("update-invoice",this.invoiceEditTemp),this.invoiceEditTempCache=JSON.parse(JSON.stringify(this.invoiceEditTemp)),this.showInvoiceEditDialog=!1},editAddress(){this.showAddressEditDialog=!0},setAddress(){this.$emit("update-invoice",this.addressEditTemp),this.addressEditTempCache=JSON.parse(JSON.stringify(this.addressEditTemp)),this.showAddressEditDialog=!1},checkTitleDetail(){this.showTitleDetailDialog=!0},cancel(){this.$router.back()},cancelInvoiceForm(){this.showInvoiceEditDialog=!1,this.resetInvoiceEditTemp()},cancelAddressForm(){this.showAddressEditDialog=!1,this.resetAddressEditTemp()},errorTip(e){const t=this;t.$tipsErr(e),window.setTimeout((()=>t.$tipsHide()),3e3)}}}),rp=sp,op=(0,h.Z)(rp,Vd,Jd,!1,null,"2c5f23ac",null),np=op.exports,cp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-manage",class:e.showActiveIcon?"active-filter-icon":""},[1===e.nav?t("div",{staticClass:"main-card-title"},[e._v("开发票")]):e._e(),t("div",{staticClass:"main-card",style:1==e.nav?"display:block":"display:none"},[1==e.step?[t("div",{staticClass:"title"},[e._v("开票说明：")]),e._m(0),t("a-table",{staticClass:"invoice-table",attrs:{loading:!e.isPageReady,columns:e.columnsInvoice,dataSource:e.newCanInvoiceList,pagination:!1,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,columnWidth:90},scroll:{y:455},locale:{emptyText:"暂无可开发票"},"row-key":"transactionId"},scopedSlots:e._u([{key:"filterDropdown",fn:function({selectedKeys:i,confirm:a,clearFilters:s,column:r}){return[t("div",{staticClass:"filter-dropdown"},[t("div",{staticClass:"filter-dropdown-title"},[e._v("筛选")]),t("a-table",{staticClass:"choose-table",attrs:{columns:e.choosenColumns,dataSource:e.choosenDataList,pagination:!1,"row-selection":{selectedRowKeys:e.tableSelectedRowKeys,onChange:e.onChoiceSelectChange},locale:{emptyText:"暂无可选项"},showHeader:!0,scroll:{y:246},"row-key":"orderId"},scopedSlots:e._u([{key:"nameAndImg1",fn:function(i,a){return[t("div",{staticClass:"order-header",attrs:{s:""}},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:a.packetImageUrl,"widget-cover-src":a.isWidgetPacket?a.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(a.packetName))])],1)]}}],null,!0)}),t("div",{staticClass:"button-wrap"},[t("div",[t("mp-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){return e.ChoiceCencel(s)}}},[e._v("取消")]),t("mp-button",{staticClass:"primary-btn",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.choiceConfirm(i,a,r.dataIndex)}}},[e._v("确定")])],1)])],1)]}},{key:"filterIcon",fn:function(e){return[t("div",{staticClass:"icon-choice",class:e?"icon-choice-active":""})]}},{key:"paymentTime",fn:function(i,a){return[t("div",{staticClass:"time"},[t("span",[e._v(e._s(e.timeToDate(a.paymentTime)))])])]}},{key:"nameAndImg",fn:function(i,a){return[t("div",{staticClass:"order-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:a.packetImageUrl,"widget-cover-src":a.isWidgetPacket?a.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(a.packetName))])],1)]}},{key:"action",fn:function(i,a){return[t("div",{staticClass:"detail"},[t("a",{on:{click:function(t){return e.handleToDetail(a)}}},[e._v("详情")])])]}}],null,!1,4202735966)})]:[t("InvoiceMake",{attrs:{transactionIdList:e.transactionIdList,submit:e.submit,invoice:e.invoice,showConfirmDialog:e.showConfirmDialog,confirmLoading:e.confirmLoading},on:{"update:invoice":function(t){e.invoice=t},"update:showConfirmDialog":function(t){e.showConfirmDialog=t},"update:show-confirm-dialog":function(t){e.showConfirmDialog=t},"update-invoice":e.updateInvoice}})],t("div",{staticClass:"choice-wrap"},[1==e.step?t("div",{staticClass:"choice-num-wrap"},[t("a-popover",{attrs:{overlayClassName:"choice-num-popover",trigger:"click",placement:"bottomLeft",mouseLeaveDelay:0,align:{offset:[85,-30]}},on:{visibleChange:t=>e.choiceNumWrapVisble=t},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"choice-num-popover-content"},[t("div",{staticClass:"choice-pop-title"},[e._v("选中的订单")]),t("a-table",{staticClass:"invoice-choice-table",attrs:{columns:e.choiceColumnsInvoice,dataSource:e.choiceCanInvoiceList,pagination:!1,scroll:{y:250},locale:{emptyText:"暂无选中发票"},"row-key":"transactionId"},scopedSlots:e._u([{key:"action",fn:function(i,a,s,r){return[t("div",{staticClass:"detail"},[t("a",{staticClass:"icon-delete",on:{click:function(t){return e.deleteChoice(i,a,s,r)}}})])]}},{key:"paymentTime",fn:function(i,a){return[t("div",{staticClass:"time"},[t("span",[e._v(e._s(e.timeToDate(a.paymentTime)))])])]}},{key:"nameAndImg1",fn:function(i,a){return[t("div",{staticClass:"order-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:a.packetImageUrl,"widget-cover-src":a.isWidgetPacket?a.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(a.packetName))])],1)]}}],null,!1,2209557096)})],1)]},proxy:!0}],null,!1,897382316)},[t("div",{staticClass:"choice-popt-wrap"},[t("div",{staticClass:"choice-num",domProps:{innerHTML:e._s(`选中 <span>${e.selectedRowKeys.length}</span> 笔订单`)}}),t("div",{staticClass:"choice-icon",class:e.choiceNumWrapVisble?"active":""})])])],1):e._e(),2==e.step?t("div",{staticClass:"choice-num-wrap"}):e._e(),t("div",{staticClass:"choice-title"},[e._v("合计（单张发票金额）：")]),t("div",{staticClass:"choice-price"},[e._v(e._s(e.price))]),t("div",[1==e.step?t("mp-button",{attrs:{type:"primary",disabled:0==e.selectedRowKeys.length||e.selectedRowKeys.length>e.MAX_SELECTED_ROW_KEYS},on:{click:function(t){e.step=2}}},[e._v(" 开发票 ")]):e._e(),2==e.step?t("mp-button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.step=1}}},[e._v("上一步")]):e._e(),2==e.step?t("mp-button",{attrs:{type:"primary",disabled:!e.canSubmit},on:{click:function(t){e.showConfirmDialog=!0}}},[e._v("提交")]):e._e()],1)])],2),t("div",{staticClass:"content",style:2==e.nav?"display:block":"display:none"},[t("InvoiceList")],1)])},lp=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"desc"},[t("div",{staticClass:"p"},[e._v("1.从发票申请次日起为你开具发票，其中电子发票预计7个工作日可下载，纸质发票预计15个工作日寄出。")]),t("div",{staticClass:"p"},[t("span",[e._v("2.订单状态为违规冻结，违规下线，退款中，开票中，已开票时，不可开发票。")]),t("a",{attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=pay&index=3",target:"_blank"}},[e._v("查看发票指引")])]),t("div",{staticClass:"p"},[t("span",[e._v("3.使用封面兑换卡兑换的订单不可开发票，广告金支付的订单需到微信广告平台申请发票。")]),t("a",{attrs:{href:"https://ad.weixin.qq.com/docs/97",target:"_blank"}},[e._v("查看指引")])])])}],dp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"invoice-list"},[t("div",{staticClass:"main-card-title"},[e._v("开票记录")]),e.isPageReady?t("div",{staticClass:"main-card"},[t("a-table",{staticClass:"invoice-table2",attrs:{columns:e.columns,dataSource:e.invoiceList,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"statusText",fn:function(){return[t("div",{staticClass:"status-text",style:{color:e.invoice.statusColor}},[e._v(e._s(e.invoice.statusText))])]},proxy:!0},{key:"action",fn:function(i,a){return[t("div",{staticClass:"detail"},[4===a.invoiceStatus&&a.invoiceType!==e.InvoiceType.EnterpriseSpecial?t("a",{staticClass:"operate",on:{click:function(t){return t.preventDefault(),e.download(a)}}},[e._v(" 下载发票 ")]):e._e(),2===a.invoiceStatus?t("cancel-apply-popover",{staticClass:"operate",attrs:{"invoice-id":a.invoiceId},on:{success:e.fetchData}}):e._e(),t("a",{on:{click:function(t){return e.handleToDetail(a)}}},[e._v("详情")])],1)]}}],null,!1,3398383881)}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.invoiceListLength>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.invoiceListLength,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1)],1):e._e()])},pp=[];const up=new Nd.Z,hp=i(90520);var mp=a.ZP.extend({name:"invoiceList",components:{CancelApplyPopover:jd},data(){return{InvoiceType:dd,isPageReady:!1,curPage:1,pageNum:8,invoiceId:"",list:[],showCancelDialog:!1,columns:[{dataIndex:"applyTime",key:"applyTime",title:"申请开票时间"},{dataIndex:"invoiceTitle",key:"invoiceTitle",title:"发票抬头"},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"开票金额"},{dataIndex:"statusText",key:"statusText",title:"状态"},{title:"操作",key:"action",align:"right",dataIndex:"action",scopedSlots:{customRender:"action"}}]}},computed:{invoiceListLength(){return d.AQ.invoiceList.length},successInvoiceData(){const e=d.AQ.invoiceList.reduce(((e,t,i)=>(t.invoiceStatus===cd.Success&&(e.count+=1,e.amount+=t.invoiceDetail.invoiceAmountInCents),e)),{count:0,amount:0});return e.amount=(0,ye.Zh)(e.amount),e},invoiceList(){const e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;return d.AQ.invoiceList.slice(t,i).map(((e,t)=>{const i=Object.assign({},e,{key:t,invoiceTitle:e.invoiceDetail.title,invoiceAmount:(0,ye.Zh)(e.invoiceDetail.invoiceAmountInCents),statusText:ld[e.invoiceStatus],applyTime:hp("yyyy/MM/dd hh:mm",new Date(1e3*e.createTime))});return i}))}},async mounted(){await this.fetchData(),this.isPageReady=!0},methods:{async fetchData(){await d.AQ.getInvoiceList()},handleToDetail(e){this.$router.push({name:"invoice",query:{iid:e.invoiceId}})},pageChange(e){this.curPage=e.currentPage},async download(e){await up.downloadInvoice(e.invoiceId)}}}),gp=mp,vp=(0,h.Z)(gp,dp,pp,!1,null,"69069306",null),fp=vp.exports,yp=a.ZP.extend({name:"InvoiceManage",data(){return{isPageReady:!1,MAX_SELECTED_ROW_KEYS:1e3,nav:1,newCanInvoiceList:[],choosenColumns:[{key:"",title:"",scopedSlots:{customRender:"nameAndImg1"}}],choosenDataList:[],tableSelectedRowKeys:[],saveTableSelectedRowKeys:[],choiceNumWrapVisble:!1,columns:[{dataIndex:"paymentTime",key:"paymentTime",title:"订单时间",scopedSlots:{customRender:"paymentTime"}},{key:"",title:"红包封面",scopedSlots:{customRender:"nameAndImg"}},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"可开票金额（元）"},{title:"操作",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}}],columnsInvoice:[{dataIndex:"paymentTime",key:"paymentTime",scopedSlots:{customRender:"paymentTime"},title:"订单时间"},{key:"",title:"红包封面",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"nameAndImg"},onFilter:(e,t)=>t.name.toString().toLowerCase().includes(e.toLowerCase()),onFilterDropdownVisibleChange:e=>{}},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"可开票金额（元）"},{title:"操作",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}}],curChoice:[],curPage:1,pageNum:5,step:1,selectedRowKeys:[],confirmLoading:!1,invoice:{},showConfirmDialog:!1,transactionIdList:[],price:"0",choiceColumnsInvoice:[{title:"",key:"action",dataIndex:"action",scopedSlots:{customRender:"action"}},{dataIndex:"paymentTime",key:"paymentTime",title:"订单时间",scopedSlots:{customRender:"paymentTime"}},{key:"",title:"红包封面",scopedSlots:{customRender:"nameAndImg1"}},{dataIndex:"invoiceAmount",key:"invoiceAmount",title:"可开票金额（元）"}],saveInvoiceList:[],filters:[],showActiveIcon:!1,choiceCanInvoiceList:[]}},computed:{canSubmit(){const{invoice:e,principalType:t}=this;if(e.invoiceType===dd.Personal){if(e.title)return!0}else{if(e.invoiceType===dd.EnterpriseGeneral&&1===t)return!!e.title;if(e.invoiceType===dd.EnterpriseGeneral){if(e.title&&e.socialCreditCode)return!0}else if(e.invoiceType===dd.EnterpriseSpecial)return e.mailAddressDetail&&Object.values(e).every((e=>e))}return!1},principalType(){return d.U6.user.principalType},canInvoiceListLength(){return d.AQ.canInvoiceList.length},canInvoiceList(){const{curPage:e,pageNum:t}=this,i=(e-1)*t,a=i+t,s=d.AQ.canInvoiceList;return s.slice(i,a).map(((e,t)=>{const i=Object.assign({},e,{key:t,invoiceAmount:(0,ye.Zh)(e.invoiceAmountInCents)+"元"});return i}))}},components:{InvoiceList:fp,CoverReceiveImg:be.Z,InvoiceMake:np},watch:{$route:{handler(){this.$route.query.nav&&this.changeTab(+this.$route.query.nav)},immediate:!0}},async mounted(){await this.fetchData(),this.isPageReady=!0},methods:{updateInvoice(e){Object.entries(e).forEach((([e,t])=>{a.ZP.set(this.invoice,e,t)}))},ChoiceCencel(e,t){this.tableSelectedRowKeys=JSON.parse(JSON.stringify(this.saveTableSelectedRowKeys)),e()},choiceConfirm(e,t,i){if(this.tableSelectedRowKeys.length>0){this.showActiveIcon=!0,this.saveTableSelectedRowKeys=JSON.parse(JSON.stringify(this.tableSelectedRowKeys));let e=[];this.saveInvoiceList.forEach((t=>{this.tableSelectedRowKeys.includes(t.orderId)&&e.push(t)})),e=e.sort(((e,t)=>t.paymentTime-e.paymentTime)),this.newCanInvoiceList=e}else this.showActiveIcon=!1,this.newCanInvoiceList=JSON.parse(JSON.stringify(this.saveInvoiceList));t()},deleteChoice(e,t,i){const{transactionId:a}=t;this.selectedRowKeys=this.selectedRowKeys.filter((e=>e!==a)),this.choiceCanInvoiceList=this.choiceCanInvoiceList.filter((e=>e.transactionId!==a)),this.onSelectChange(this.selectedRowKeys)},async submit(){this.confirmLoading=!0;const e=this.invoice;var t=e.invoiceType;const i=this,a=await(new Nd.Z).InvoiceWithPayInfoList(this.transactionIdList,{invoiceType:t,invoiceDetail:e});this.confirmLoading=!1;const s={"-20000":"提交失败，请填写发票抬头","-20001":"抬头过长，请联系客服","-20002":"提交失败，请补全抬头信息和邮寄地址信息","-20003":"纳税人识别号有误，仅支持大写字母和数字，长度为15-20位","-20004":"个人主体不支持开增值税专用发票","-20010":`单张发票不可选择超过${this.MAX_SELECTED_ROW_KEYS}笔订单`},r=a?.baseResponse?.ret;0===a?.baseResponse?.ret?((0,Lt.H)("coverinvoicewithpayinfolist_success"),i.$router.push({name:"invoiceSuccess",query:{iid:a.invoiceId,invoiceType:e.invoiceType}})):r&&s[r]?this.errorTip(s[r]):((0,Lt.H)("coverinvoicewithpayinfolist_error",JSON.stringify(a)),this.errorTip("提交失败，请稍后重试或联系客服"))},onChoiceSelectChange(e){this.tableSelectedRowKeys=e},onSelectChange(e){e?.length>this.MAX_SELECTED_ROW_KEYS&&e.length>this.selectedRowKeys.length&&this.errorTip(`单张发票不可选择超过${this.MAX_SELECTED_ROW_KEYS}笔订单`),this.selectedRowKeys=e;let t=0;const i=this.saveInvoiceList.filter((t=>e.includes(t.transactionId)));i.forEach((e=>{const{invoiceAmountInCents:i}=e;t+=i})),this.choiceCanInvoiceList=i,this.transactionIdList=e,this.price=(0,ye.Zh)(t)||""},changeTab(e){this.nav=e,this.$router.push({name:"invoiceManage",query:{nav:`${e}`}})},async fetchData(){const e=await(new Nd.Z).getNewCanInvoiceOrderList();if(e&&0===e.baseResponse.ret){this.newCanInvoiceList=e.payInfoList||[];const t=this.$route.query.transactionId;this.newCanInvoiceList.forEach(((e,i)=>{this.newCanInvoiceList[i].invoiceAmount=(0,ye.Zh)(e.invoiceAmountInCents),e.transactionId==t&&this.selectedRowKeys.push(t)})),this.saveInvoiceList=JSON.parse(JSON.stringify(this.newCanInvoiceList)),this.onSelectChange(this.selectedRowKeys);const i={},a=this.newCanInvoiceList.reduce(((e,t)=>(i[t.orderId]||(i[t.orderId]=!0,e.push(t)),e)),[]);this.choosenDataList=a}},handleToDetail(e){this.$router.push({name:"order",query:{tid:e.transactionId}})},pageChange(e){this.curPage=e.currentPage},handleMakeInvoie(e){const t={orderId:e.orderId,amount:e.invoiceAmountInCents};this.$router.push({name:"invoiceMake",params:t})},timeToDate(e){return _a()("yyyy年MM月dd日",new Date(1e3*e))}}}),_p=yp,Cp=(0,h.Z)(_p,cp,lp,!1,null,"3637fefa",null),bp=Cp.exports,wp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"order-detail"},[e.isPageReady?t("div",{staticClass:"main-card order-detail-wrap"},[t("div",{staticClass:"order-detail-content"},[t("div",{staticClass:"detail-section"},[t("div",{staticClass:"second-title"},[e._v("订单详情")]),t("div",{staticClass:"item"},[t("span",[e._v("状态：")]),t("span",{class:{strong:e.payInfoForShow.status===e.OrderPayStatus["Pending"]}},[e._v(e._s(e.payInfoForShow.statusText))]),e.payInfoForShow.status===e.OrderPayStatus["Pending"]?[t("a",{on:{click:e.pay}},[e._v("支付")])]:e._e()],2),t("div",{staticClass:"item"},[e._v("订单编号："+e._s(e.payInfoForShow.displayId||"-"))]),e.isTimePurchaseType?[t("div",{staticClass:"item"},[e._v("购买的发放时长："+e._s(`${e.payInfoForShow.purchaseCount}小时`||"-"))])]:[t("div",{staticClass:"item"},[e._v("购买数量："+e._s(e.payInfoForShow.purchaseCount||"-"))])],e.payStat.usedQuotaCount?[t("div",{staticClass:"item"},[e._v("已转为封面兑换卡数量："+e._s(e.payStat.usedQuotaCount))])]:e._e(),e.isPayInfoSuccess?[t("div",{staticClass:"item"},[e._v("支付时间："+e._s(e.payInfoForShow.payTime||"-"))])]:[t("div",{staticClass:"item"},[e._v("创建时间："+e._s(e.payInfoForShow.payTime||"-"))])],t("div",{staticClass:"item"},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[e._v(" 支付方式："+e._s(e.payInfoForShow.payType||"-")+" "),e.payInfoForShow.fromQuotaWording&&"默认"!==e.payInfoForShow.fromQuotaWording?t("span",{staticClass:"inline-block rounded-sm bg-opblack_5 px-[6px] py-0.5 text-xs"},[e._v(" "+e._s(e.payInfoForShow.fromQuotaWording)+" ")]):e._e()])]),e.isPayInfoSuccess?[e.payInfo&&e.isQuota?t("div",{staticClass:"item"},[e._v("实付金额：-")]):t("div",{staticClass:"item"},[e._v("实付金额："+e._s(`￥${e.payInfoForShow.payAmount}`||"-"))])]:[e.payInfo&&e.isQuota?t("div",{staticClass:"item"},[e._v("待付金额：-")]):t("div",{staticClass:"item"},[e._v("待付金额："+e._s(`￥${e.payInfoForShow.payAmount}`||"-"))])],e.isPayInfoSuccess?[t("div",{staticClass:"item"},[t("span",[e._v("开票状态："+e._s(e.payInfoForShow.invoiceText))]),e.payInfo&&e.payInfo.canInvoice?t("a",{staticClass:"open-invoice",on:{click:e.toInvoiceManage}},[e._v("去开发票")]):e._e(),"已完成"===e.payInfoForShow.invoiceText&&e.payInfoForShow.invoiceInfo.invoiceType!==e.InvoiceType.EnterpriseSpecial?t("a",{staticClass:"open-invoice",on:{click:e.downloadInvoice}},[e._v(" 下载发票 ")]):e._e(),"已申请"===e.payInfoForShow.invoiceText?t("mp-popover",{staticClass:"cancel-dialog",attrs:{width:240},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticClass:"open-invoice"},[e._v("撤销申请")])]},proxy:!0},{key:"content",fn:function(){return[t("p",{staticStyle:{"text-align":"center"}},[e._v("撤销该发票申请？")])]},proxy:!0},{key:"bar",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default",size:"mini"},on:{click:function(t){t.preventDefault(),e.showCancelDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",loading:e.cancelInvoiceLoading,size:"mini"},on:{click:function(t){return t.preventDefault(),e.cancelInvoice.apply(null,arguments)}}},[e._v("撤销")])],1)]},proxy:!0}],null,!1,2297650637),model:{value:e.showCancelDialog,callback:function(t){e.showCancelDialog=t},expression:"showCancelDialog"}}):e._e(),["开票中","已申请","已完成","退票中"].includes(e.payInfoForShow.invoiceText)?t("a",{staticClass:"open-invoice",on:{click:e.toInvoice}},[e._v("详情")]):e._e()],1)]:e._e(),[t("div",{staticClass:"item"},[e._v("发放与领取有效期："+e._s(e.payInfoForShow.expiredTimeText))])]],2)]),t("CoverMaterial",{staticClass:"order-material",attrs:{cover:e.cover}})],1):[e._m(0)],!e.isTimePurchaseType||e.receiveObjectList.length>0&&1!=e.receiveObjectList[0].status?t("div",{staticClass:"wrap"},[e.isPageReady&&e.isPayInfoSuccess?t("div",{staticClass:"main-card receive-list-wrap"},[t("div",{staticClass:"header"},[t("div",{staticClass:"left-area"},[e.isTimePurchaseType?e._e():t("div",{staticClass:"second-title"},[e._v("发放详情")]),e.isTimePurchaseType?t("div",{staticClass:"second-title"},[e._v("发放红包封面")]):e._e(),e.isTimePurchaseType?t("div",{staticClass:"second-tip"},[e._v("可选择以下发放方式")]):e._e(),e.payInfo&&e.isQuota?t("div",{staticClass:"desc"},[t("span",[e._v("剩余可发放封面数量")]),t("span",{staticClass:"bold"},[e._v(e._s(e.payStat.remainingGenCoverCount||0))]),t("span",{staticStyle:{"padding-left":"30px"}},[e._v("使用封面兑换卡生成的订单不能再次转为封面兑换卡")])]):!e.isTimePurchaseType&&e.payInfo?t("div",{staticClass:"desc"},[t("span",[e._v("剩余可发放封面数量")]),t("span",[e._v(e._s(e.payStat.remainingGenCoverCount||0))]),e.payStat.remainingGenCoverCount&&!e.disabledGenQuota?[e.isCanEdit?t("span",{staticClass:"link-button",on:{click:e.openChangeExchange}},[e._v("转为封面兑换卡")]):t("mp-popover",{attrs:{position:"down-center",trigger:"hover",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无生成和使用封面兑换卡权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{attrs:{type:"primary"}},[e._v("转为封面兑换卡")])]},proxy:!0}],null,!1,591762159)})]:e.disabledGenQuota?t("span"):t("span",{staticClass:"link-button gray"},[e._v("转为封面兑换卡")]),e.disabledGenQuota?e._e():t("mp-popover",{attrs:{width:620,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",{staticClass:"pop-title"},[e._v("封面兑换卡说明")]),t("div",{staticClass:"pop-content"},[e._v("1. 未发完的封面可通过封面兑换卡，兑换成其他样式的封面继续发放。兑换后的封面不可再次转为封面兑换卡。")]),t("div",{staticClass:"pop-content"},[e._v("2. 如果发放材料尚未被领取完，可在回收后转为封面兑换卡。")]),t("div",{staticClass:"pop-content"},[e._v("3. 可在个人中心 - 封面兑换卡，查看并使用已有封面兑换卡。")]),t("div",{staticClass:"pop-title"},[e._v("注意事项")]),t("div",{staticClass:"pop-content"},[e._v("1. 转为封面兑换卡后，当前封面剩余可发放数量将相应减少。")]),t("div",{staticClass:"pop-content"},[e._v(" 2. 封面兑换卡的兑换条件： "),t("p",[e._v("1）仅能兑换账号下已通过审核的封面。")]),t("p",[e._v("2）每次兑换都会生成一笔订单，兑换的封面不会追加在已有订单中。")])]),t("div",{staticClass:"pop-content"},[e._v("3. 兑换的封面，发放有效期与原封面一致，需在原封面购买后的6个月内发放。用户领取封面后，使用有效期为3个月。")]),t("div",{staticClass:"pop-content"},[e._v("4. 封面兑换卡不能交易，也不能向平台申请退款。")])])]},proxy:!0}],null,!1,1963226310)})],2):e._e()]),e.isTimePurchaseType||e.payInfoForShow.status!=e.OrderPayStatus["Success"]&&e.payInfoForShow.status!=e.OrderPayStatus["Delivering"]?e._e():t("div",{staticClass:"right-area"},[t("div",{staticClass:"operate-buttons"},[e.payStat.remainingGenCoverCount?e.isCanEdit2?t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:e.handleGenReceiveObj}},[e._v("发放封面")]):t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无发放封面权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"}},[e._v("发放封面")])]},proxy:!0}],null,!1,849863091)}):t("mp-popover",{attrs:{content:"剩余 0 个红包封面可发放，若要继续发放，需要回收未领取的红包封面，或再次购买新的订单",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary",disabled:!0}},[e._v("发放封面")])]},proxy:!0}],null,!1,1263085856)})],1),t("div",{staticClass:"tip"},[e._v(" 有效期剩余"+e._s(e.payInfoForShow.leftDays)+"天 "),t("mp-popover",{attrs:{trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"4px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[e._v("发放有效期截止至"+e._s(e.payInfoForShow.expiredTimeText))])]},proxy:!0}],null,!1,3047963842)})],1)])]),e.isTimePurchaseType?t("TimeOrderReceiveDetail",{attrs:{orderId:e.orderId,objectId:e.receiveObjectList.length>0?e.receiveObjectList[0].objectId:"",receiveDetail:e.receiveDetail}}):t("ReceiveMaterial",{attrs:{cover:e.cover,payInfo:e.payInfo},on:{refreshCover:e.refreshCover}}),e.isTimePurchaseType?t("div",{staticClass:"right-area"},[e.payInfoForShow.actived?[t("div",{staticClass:"center-button-wrap"},[e.leftTimeTip>0?t("div",{staticClass:"tip"},[e._v("剩余发放封面时间")]):e._e(),"string"===typeof e.leftTimeTip?t("div",{staticClass:"left-time bold"},[e._v(e._s(e.leftTimeTip))]):t("div",{staticClass:"left-time bold"},[t("Timeout",{attrs:{second:e.leftTimeTip,type:2},on:{timeout:e.handleTimeout}})],1),e.isTimePurchaseType?t("div",{staticClass:"get-tip"},[t("span",[e._v("已被领取封面数量")]),t("span",{staticClass:"bold black"},[e._v(e._s(e.payStat.totalReceiveCount||0))]),t("span",[e._v("个")])]):e._e()])]:e._e(),e.payInfo&&3==e.payInfo.status?[t("div",{staticClass:"center-button-wrap"},[t("div",{staticClass:"tip"},[t("span",[e._v("以上发放方式暂未生效。在")]),t("div",{staticClass:"strong"},[e._v(e._s(e.payInfoForShow.whatTime))]),t("span",[e._v("前点击“生效”，订单即可开放领取。")])]),t("div",{staticClass:"tip"},[t("span",[e._v("开放领取的有效期为")]),t("div",{staticClass:"strong"},[e._v(e._s(e.payInfoForShow.purchaseCount)+"小时")]),t("span",[e._v("，自订单生效起开始计时。")])]),t("div",{staticClass:"operate-buttons"},[t("mp-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.showActivateDialog=!0}}},[e._v("生效")])],1)])]:e._e()],2):e._e()],1):e._e()]):t("div",{staticClass:"wrap"},[e.isPageReady&&e.isPayInfoSuccess?t("div",{staticClass:"loading-wrap"},[t("div",{staticClass:"loading-logo"}),t("div",{staticClass:"tip"},[e._v("用于发放红包封面的材料正在生成")]),t("div",{staticClass:"tip"},[t("span",[e._v("预计需要")]),t("div",{staticClass:"strong"},[e._v(e._s(5*e.payInfoForShow.purchaseCount))]),t("span",[e._v("分钟，请耐心等待")])])]):e._e()]),t("mp-dialog",{staticClass:"activate-dialog",attrs:{title:"发放方式生效"},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showActivateDialog=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.activateOrder.apply(null,arguments)}}},[e._v("生效")])],1)]},proxy:!0}]),model:{value:e.showActivateDialog,callback:function(t){e.showActivateDialog=t},expression:"showActivateDialog"}},[t("div",{staticClass:"content"},[t("span",[e._v("生效后，订单将开放领取，有效期为")]),t("div",{staticClass:"strong"},[e._v(e._s(e.payInfoForShow.purchaseCount))]),t("span",[e._v("小时。逾期后，订单将失效。确认现在生效？")])])]),t("mp-dialog",{staticClass:"exchange-dialog",attrs:{title:e.stepTitle,value:e.useDialog,closable:!0,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[1==e.exchangeUseStep?t("div",{staticClass:"dialog-footer"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.exchangeInput||0!=e.disabled},on:{click:function(t){return t.preventDefault(),e.confirmExchange.apply(null,arguments)}}},[e._v("确认")])],1):e._e()]},proxy:!0}])},[1==e.exchangeUseStep?t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"dialog-tips"},[e._v(" 1. 如果发放材料尚未被领取完，回收后可在订单详情页转为封面兑换卡。 "),t("br"),e._v(" 2. 封面兑换卡可用于兑换账号下已通过审核的封面。 "),t("br"),e._v(" 3. 需在原封面购买后的6个月内兑换并发放。 "),t("br"),e._v(" 4. 使用封面兑换卡生成的订单不能再次转为封面兑换卡。 ")]),t("div",{staticClass:"dialog-exchange-wrap"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.exchangeInput,expression:"exchangeInput"}],staticClass:"exchange-input",attrs:{placeholder:"输入封面个数"},domProps:{value:e.exchangeInput},on:{focus:e.inputBlur,input:function(t){t.target.composing||(e.exchangeInput=t.target.value)}}}),t("div",{staticClass:"dialog-input-gz"},[t("span",{staticClass:"dialog-exchange-number"},[e._v("可转换封面 "+e._s(e.payStat.remainingGenCoverCount||0)+" 个")])]),e.numberErrorTips?t("div",{staticClass:"number-error-tips"},[e._v(e._s(e.numberErrorTips))]):e._e()])]):e._e(),2==e.exchangeUseStep?t("div",{staticClass:"dialog-body tc finsh"},[t("div",{staticClass:"yes-icon"}),t("div",{staticClass:"weui-msg__title"},[e._v("已完成")]),t("div",{staticClass:"dialog-result"},[t("div",{staticClass:"dialog-result-number"},[e._v("已转换封面数量："+e._s(e.exchangeInput))]),t("div",{staticClass:"dialog-result-date"},[e._v("有效期至"+e._s(e.toDate(e.expiredTime)))])]),t("div",{staticClass:"dialog-button-all",on:{click:e.toDetail}},[e._v("查看记录")])]):e._e()])],2)},Ip=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],kp=i(49199);class Tp extends kp.Z{constructor(){super()}async getList(){return await this.request({url:Zt.zh})}async getDetailList(e){return await this.request({url:Zt.uL,data:{quota_id:e}})}async getCanUseOrderList(){return await this.request({url:Zt.SF})}async useQuota(e,t,i){return await this.request({url:Zt.Gv,data:{quota_id:e,order_id:t,purchase_count:i}})}async getQuota(e,t,i){return await this.request({url:Zt.lt,data:{order_id:e,transaction_id:t,count:i}})}}var Sp=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content"},[t("a-table",{key:e.tableKey,staticClass:"receive-table",class:{flash:e.flashFirstMaterial},attrs:{columns:e.columns,dataSource:e.list,pagination:!1,locale:{emptyText:"暂无记录"},rowKey:e.list.objectId},scopedSlots:e._u([{key:"usedTitle",fn:function(){return[t("div",{staticClass:"user-percent-title"},[e._v(" 已领取 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("「已领取」数量包含「通过推广领取」数量")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"fissionHd",fn:function(){return[t("div",{staticClass:"user-percent-title"},[e._v(" 通过「推广」领取 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("包含通过「裂变」及「封面专区」领取数量")])])]},proxy:!0}])})],1)]},proxy:!0},{key:"genInfo",fn:function(i){return[t("div",{staticClass:"gen-time"},[t("div",[e._v(e._s(i.genTime))]),t("div",[i.genTypeText?t("div",{staticClass:"icon-merge"},[e._v(e._s(i.genTypeText))]):e._e(),i.receiveTypeText?t("div",{staticClass:"icon-merge"},[e._v(e._s(i.receiveTypeText))]):e._e(),i.receiveBeginTime?t("div",{staticClass:"icon-merge"},[t("mp-popover",{attrs:{trigger:"hover",width:255},scopedSlots:e._u([{key:"target",fn:function(){return[t("a-row",{attrs:{type:"flex"}},[t("div",[e._v("定时发放")]),t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"2px"},attrs:{icon:"info_circle_regular",width:12,height:12,color:"#999"}})],1)]},proxy:!0},{key:"content",fn:function(){return[t("div",[e._v("发放开始时间："+e._s(i.receiveBeginTimeText))])]},proxy:!0}],null,!0)})],1):e._e(),1===i.distributionType?t("div",[t("mp-popover",{attrs:{trigger:"click",width:548,position:"left-center"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"distribution-popover"},[t("EmotionRainTipEntry"),t("EmotionRainDesc2")],1)]},proxy:!0},{key:"target",fn:function(){return[t("Tag",[e._v("限时活动")])]},proxy:!0}],null,!0)})],1):e._e()]),i.mergeId?t("div",{staticClass:"icon-merge",staticStyle:{"font-size":"12px","margin-top":"8px"}},[e._v("来自合并发放")]):e._e()])]}},{key:"action1",fn:function(i){return[t("div",{staticClass:"detail detail-row"},[i.mergeId?t("div",{on:{click:function(t){return e.openMergeDetail(i)}}},[t("a",[e._v("合并发放详情")])]):e._e(),e.isCanDownload?!i.mergeId&&e.receiveStatusSuccess.includes(i.status)?[i.isQuotaGift||i.disabledDownloadLink?t("div",{staticStyle:{display:"flex",color:"#9a9a9a","align-items":"center"}},[t("span",{staticClass:"mr-1"},[e._v("下载材料")]),i.isQuotaGift||i.disabledDownloadLink&&i.fromQuotaId?.startsWith("spring2024_biz")?t("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:i.isQuotaGift?280:430},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticStyle:{position:"relative"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[i.isQuotaGift?t("div",[e._v("此兑换卡仅支持通过「封面专区」发放")]):i.fromQuotaId?.startsWith("spring2024_biz")?t("div",[t("p",[e._v(" 公众号创作者奖励兑换卡需使用 "),t("a",{staticStyle:{"line-height":"1",display:"inline-block"},attrs:{href:"https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/doc?page=delivery&index=6",target:"_blank"}},[e._v(" 公众号「红包封面」组件 ")]),t("span",[e._v("发放")])])]):e._e()]},proxy:!0}],null,!0)}):e._e()],1):i.disabledDownloadLink||1!=i.genType&&2!=i.genType||1!=i.receiveType?!i.disabledDownloadLink&&i.genType<=3?t("download-receive-object",{attrs:{order:i,cover:e.cover}}):e._e():t("mp-popover",{staticClass:"popover-auto-width",attrs:{position:"up-right",trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",{staticStyle:{display:"inline-flex","align-items":"center"}},[e._v(" 下载材料 "),t("mp-icon",{staticStyle:{transform:"rotate(90deg)","margin-left":"4px"},attrs:{icon:"right_arrow_regular",width:8,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[!i.disabledDownloadLink&&i.genType<=3?t("download-receive-object",{attrs:{order:i,cover:e.cover}}):e._e(),i.disabledDownloadLin||1!=i.genType||1!=i.receiveType?e._e():t("a",{staticStyle:{display:"block"},on:{click:function(t){return e.generatePoster(i)}}},[e._v(" 生成海报 ")]),i.disabledShareFriend||2!=i.genType||1!=i.receiveType?e._e():t("a",{staticStyle:{display:"block"},on:{click:function(t){return e.translateQr(i)}}},[e._v(" 赠送给朋友 ")])]},proxy:!0}],null,!0)})]:e._e():[t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无下载发放材料权限，请前往")]),t("a",{staticStyle:{display:"inline-block"},on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("span",[!i.disabledDownloadLink&&!i.mergeId&&i.genType<=3&&6!=i.status?t("download-receive-object",{attrs:{order:i,cover:e.cover}}):e._e(),i.disabledDownloadLink||1!=i.genType||1!=i.receiveType||6==i.status?e._e():t("a",{staticStyle:{display:"block"}},[e._v("生成海报")]),i.disabledShareFriend||2!=i.genType||1!=i.receiveType||6==i.status?e._e():t("a",{staticStyle:{display:"block"}},[e._v(" 赠送给朋友 ")])],1)]},proxy:!0}],null,!0)})],i.canHeat?t("div",[t("a",{on:{click:function(t){e.heatItem=i,e.heatSetting=!0}}},[e._v(" 开始推广 ")])]):e._e(),t("RecallBtn",{attrs:{order:i,cover:e.cover,payInfoStatus:e.payInfo.status,isDetail:!0},on:{refreshCover:function(t){return e.$emit("refreshCover")},stopHeat:e.coverCancelHeatReceiveObject}})],2),t("Remark",{attrs:{"remark-info":i.remarkInfo,"order-id":e.cover.orderId,"order-status":e.cover.orderStatus}})]}},{key:"genTime",fn:function(i){return[t("div",{staticClass:"gen-time"},[t("div",[e._v(e._s(i.genTime))]),i.mergeId?t("div",{staticClass:"icon-type"},[e._v("来自合并发放")]):e._e()])]}},{key:"action",fn:function(i){return[t("div",[t("div",[e._v(e._s(i.statusText))]),i.heatStatus?t("div",{staticStyle:{"margin-top":"8px"}},[e._v(" "+e._s(e.HeatStatusTextMap[i.heatStatus])+" "),i.coverSetCommInfo&&1===i.heatStatus?t("mp-popover",{staticClass:"cover-set-popover",attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"4px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0}],null,!0)},[t("div",{staticStyle:{color:"rgba(0, 0, 0, 0.5)"}},[t("div",[t("label",[e._v("封面主题：")]),t("span",[e._v(e._s(i.coverSetCommInfo.tagName||"默认"))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("label",[e._v("封面来源：")]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"4px"}},[e._v(e._s(i.coverSetCommInfo.jumpText))]),4===i.coverSetCommInfo.jumpType?t("mp-tag",{attrs:{type:"key",tags:[{label:"视频号"}]}}):e._e(),2===i.coverSetCommInfo.jumpType?t("mp-tag",{attrs:{type:"key",tags:[{label:"公众号"}]}}):e._e()],1)])])]):e._e()],1):e._e()])]}}])}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.receiveObjectList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.receiveObjectList.length,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1),e.isLoading?[t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"}),t("div",{staticClass:"text"},[e._v(e._s(e.loadingText))])])]:e._e(),t("generate-cover-dialog",{attrs:{cover:e.cover,payInfo:e.payInfo},on:{refreshCover:e.handleGenCoverRefresh}}),t("merge-distributed-dialog",{attrs:{cover:e.cover,payInfo:e.payInfo,order:e.checkMergeOrder},on:{refreshCover:function(t){return e.$emit("refreshCover")},generatePoster:t=>e.generatePoster(t),translateQr:t=>e.translateQr(t),heat:t=>{e.heatItem=t,e.heatSetting=!0,e.mergeDutributeDialog=!1},stopHeat:t=>{e.coverCancelHeatReceiveObject(t),e.mergeDutributeDialog=!1}},model:{value:e.mergeDutributeDialog,callback:function(t){e.mergeDutributeDialog=t},expression:"mergeDutributeDialog"}}),t("poster-dialog",{attrs:{order:e.curGenPosterOrder,cover:e.cover},model:{value:e.showGenerateImageDialog,callback:function(t){e.showGenerateImageDialog=t},expression:"showGenerateImageDialog"}}),t("translate-qr-dialog",{attrs:{order:e.curTranslateQrOrder,cover:e.cover},model:{value:e.showQrDialog,callback:function(t){e.showQrDialog=t},expression:"showQrDialog"}}),t("mp-dialog",{attrs:{title:"封面推广设置",width:584},scopedSlots:e._u([{key:"desc",fn:function(){return[t("div",{staticStyle:{display:"flex","align-items":"center","padding-bottom":"8px"}},[e.heatItem?.isQuotaGift?[e._v("封面通过「封面专区」发放")]:[e._v("封面同时通过「裂变」、「封面专区」发放")],t("CoverHeatIntro",{attrs:{"is-quota-gift":e.heatItem?.isQuotaGift,position:"left-top"}})],2)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("mp-button",{staticClass:"cancel",attrs:{type:"warn"},on:{click:function(t){t.preventDefault(),e.heatSetting=!1}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.startHeat.apply(null,arguments)}}},[e._v("确定")])],1)]},proxy:!0}]),model:{value:e.heatSetting,callback:function(t){e.heatSetting=t},expression:"heatSetting"}},[e.heatSetting&&e.heatItem?t("HeatReceiveObject",{key:e.heatItem?.orderId,ref:"heatSource",attrs:{cover:e.cover,"is-quota-gift":e.heatItem.isQuotaGift,afterHeat:!0}}):e._e()],1)],2)},xp=[],Ap=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("mp-dialog",{attrs:{value:e.value,title:"合并发放详情",width:732},on:{"visible-change":e.handleVisibleChange,close:e.close}},[t("div",{staticClass:"dialog-content"},[t("div",{staticClass:"title-distribute"},[e._v("基本信息")]),t("div",{staticClass:"distribute-info"},[t("a-row",{attrs:{type:"flex"}},[t("div",{staticClass:"distribute-item",staticStyle:{width:"35%"}},[t("div",{staticClass:"distribute-label"},[e._v("生成时间")]),t("div",{staticClass:"distribute-value"},[e._v(e._s(e.mergeGenTime))])]),t("div",{staticClass:"distribute-item"},[t("div",{staticClass:"distribute-label"},[e._v("发放开始时间")]),t("div",{staticClass:"distribute-value"},[e._v(e._s(e.order.receiveBeginTimeText))])])]),t("a-row",{attrs:{type:"flex"}},[t("div",{staticClass:"distribute-item",staticStyle:{width:"35%"}},[t("div",{staticClass:"distribute-label"},[e._v("生成状态")]),t("div",{staticClass:"distribute-value"},[e._v(" "+e._s(e.recallStatus?e.recallStatus:e.mergeStatus)+" ")]),e.heatStatus?t("div",{staticClass:"ml-1",staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"mr-1",staticStyle:{color:"rgba(0, 0, 0, 0.1)"}},[e._v("|")]),t("span",{staticClass:"mr-1"},[e._v(e._s(e.HeatStatusTextMap[e.heatStatus]))]),e.coverSetCommInfo&&1===e.heatStatus?t("mp-popover",{staticClass:"cover-set-popover",attrs:{trigger:"hover",position:"up-left"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{attrs:{icon:"info_circle_regular",width:18,height:18,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticStyle:{color:"#9a9a9a"},attrs:{s:""}},[t("div",[t("label",[e._v("封面主题：")]),t("span",[e._v(e._s(e.coverSetCommInfo.tagName||"其他"))])]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("label",[e._v("封面来源：")]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"4px"}},[e._v(e._s(e.coverSetCommInfo.jumpText))]),4===e.coverSetCommInfo.jumpType?t("mp-tag",{attrs:{type:"key",tags:[{label:"视频号"}]}}):e._e(),2===e.coverSetCommInfo.jumpType?t("mp-tag",{attrs:{type:"key",tags:[{label:"公众号"}]}}):e._e()],1)])])]},proxy:!0}],null,!1,4135452626)}):e._e()],1):e._e()]),t("div",{staticClass:"distribute-item",staticStyle:{width:"55%"}},[t("div",{staticClass:"distribute-label"},[e._v("发放方式")]),e.recordList[0]?[t("div",{staticClass:"distribute-value"},[e._v(" "+e._s(`${e.genType}(${e.receiveType})`)+" ")]),e.mergeInfo.status!==e.ReceiveObjectMergeStatus.Success||e.recallStatus?e._e():t("a-space",{staticClass:"distribute-actions",attrs:{size:"middle"}},[!e.order.disabledDownloadLink&&e.order.isQuotaGift?t("div",{staticStyle:{"align-items":"center",color:"rgba(51, 51, 51, 0.5)",display:"flex"}},[t("span",{staticClass:"mr-1"},[e._v("下载材料")]),t("mp-popover",{attrs:{position:"up-right",trigger:"hover",width:280},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:18,height:18,color:"#9a9a9a"}})]},proxy:!0},{key:"content",fn:function(){return[e._v("此兑换卡仅支持通过「封面专区」发放")]},proxy:!0}],null,!1,1290719357)})],1):e.order.disabledDownloadLink||e.mergeInfo.genType!==e.GenerateType.qrcode&&e.mergeInfo.genType!==e.GenerateType.link?e.order.disabledDownloadLink?e._e():t("DownloadReceiveObject",{attrs:{order:e.order,cover:e.cover}}):t("mp-popover",{staticClass:"popover-auto-width",attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("a",[e._v("下载材料")]),t("mp-icon",{staticStyle:{transform:"rotate(90deg)","margin-left":"4px"},attrs:{icon:"right_arrow_regular",width:8,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[e.order.disabledDownloadLink?e._e():t("DownloadReceiveObject",{attrs:{order:e.order,cover:e.cover}}),e.order.disabledDownloadLink||e.mergeInfo.genType!==e.GenerateType.qrcode?e._e():t("a",{attrs:{href:"javascript:;"},on:{click:e.emitGenPoster}},[e._v("生成海报")]),e.order.disabledShareFriend||e.mergeInfo.genType!==e.GenerateType.link?e._e():t("a",{attrs:{href:"javascript:;"},on:{click:e.emitTranslateQr}},[e._v("赠送给朋友")])]},proxy:!0}],null,!1,2095390481)}),t("mp-popover",{staticClass:"popover-auto-width",attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("a",[e._v("更多")]),t("mp-icon",{staticStyle:{transform:"rotate(90deg)","margin-left":"4px"},attrs:{icon:"right_arrow_regular",width:8,height:16}})],1)]},proxy:!0},{key:"content",fn:function(){return[1===e.heatStatus?t("mp-popover",{attrs:{position:"up-center",trigger:"click",width:230,title:"停止推广封面"},scopedSlots:e._u([{key:"target",fn:function(){return[t("a",[e._v("停止推广")])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticStyle:{"text-align":"center",color:"rgba(0, 0, 0, 0.5)"}},[e._v("停止推广后，封面将停止通过「裂变」及「封面专区」发放")])]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{attrs:{size:"mini",type:"default"},on:{click:function(t){e.confirmStopHeat=!1}}},[e._v("取消")]),t("mp-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.$emit("stopHeat",e.order),e.confirmStopHeat=!1}}},[e._v(" 确定 ")])]},proxy:!0}],null,!1,3028226640),model:{value:e.confirmStopHeat,callback:function(t){e.confirmStopHeat=t},expression:"confirmStopHeat"}}):e._e(),e.order.disabledRecall||e.mergeInfo.status!==e.ReceiveObjectMergeStatus.Success||e.recallStatus?e._e():t("recall-btn",{attrs:{cover:e.cover,payInfoStatus:e.hackPayInfoStatus,order:e.order,mergeDetailList:e.recordList},on:{refreshCover:e.handleRecallSuccess}})]},proxy:!0}],null,!1,2028692635)})],1)]:t("div",{staticClass:"distribute-value"},[e._v("-")])],2)])],1),t("div",{staticClass:"title-distribute"},[e._v("发放数据")]),t("a-row",{attrs:{type:"flex"}},[t("div",{staticClass:"distribute-item",staticStyle:{width:"40%"}},[t("div",[t("div",{staticClass:"distribute-label"},[e._v(" 已领取/已发放 "),t("mp-popover",{staticClass:"fission-disable-popover",attrs:{trigger:"hover",width:270},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v("「已领取」数量包含「通过推广领取」数量")])]},proxy:!0},{key:"target",fn:function(){return[t("div",{staticClass:"info-icon-wrap"},[t("icon-info",{staticClass:"info-icon",attrs:{name:"info"}})],1)]},proxy:!0}])})],1),t("div",{staticClass:"distribute-data-item"},[t("a-space",[t("div",{staticClass:"distribute-data"},[e._v(" "+e._s(e.receiveGenText)+" ")])])],1)])]),t("div",{staticClass:"distribute-item"},[t("div",[t("div",{staticClass:"distribute-label"},[e._v("已裂变")]),t("div",{staticClass:"distribute-data-item"},[t("div",{staticClass:"distribute-data"},[e._v(" "+e._s(e.needFission?e.totalFissionReceiveCount:"-")+" ")])])])])]),t("a-table",{key:"objectId",staticClass:"merge-distributed-table",attrs:{columns:e.columns,dataSource:e.pageRecordList,pagination:!1,loading:e.loading,locale:{emptyText:" "}},scopedSlots:e._u([{key:"referTransactionCreatetime",fn:function(i){return[t("span",[e._v(e._s(`${e.unix(i.referTransactionCreatetime).format("YYYY/MM/DD")}的订单`))]),i.objectId===e.order.objectId?t("span",{staticClass:"fs-12",staticStyle:{color:"rgba(0, 0, 0, 0.5)"}},[e._v("当前订单")]):e._e()]}},{key:"action",fn:function(i){return[t("a",{class:{"color-bw-lv3":i.objectId===e.order.objectId},on:{click:function(t){return e.goDetail(i)}}},[e._v("详情")])]}}])}),t("a-row",{attrs:{type:"flex",justify:"center"}},[e.recordList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.recordList.length,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1)],1)])},Pp=[],Dp=i(37068),Up=i(52794);const Ep=new je.ZP;var Rp=a.ZP.extend({components:{RecallBtn:Dp.Z,DownloadReceiveObject:Up.Z},props:{value:Boolean,cover:{type:Object},payInfo:{type:Object},order:{type:Object}},data(){return{GenerateType:de.B6,ReceiveObjectMergeStatus:de.lv,loading:!1,pageNum:3,curPage:1,canHeat:!1,HeatStatusTextMap:de.IJ,heatStatus:void 0,coverSetCommInfo:void 0,confirmStopHeat:!1,mergeInfo:{},columns:[{key:"referTransactionCreatetime",title:"被合并订单",width:150,scopedSlots:{customRender:"referTransactionCreatetime"}},{title:"已领取/已发放",key:"usedPercent",width:130,customRender:(e,t)=>`${t.totalReceiveCount}/${t.totalGenCount}`},{title:"已裂变",key:"fissionPercent",dataIndex:"fissionPercent",width:120,customRender:(e,t)=>t.fissionReceiveCount||"-"},{title:"发放与领取有效期",width:150,dataIndex:"referTransactionExpiretime",key:"referTransactionExpiretime",customRender:e=>`至 ${da().unix(e).format("YYYY/MM/DD")}`},{title:"操作",align:"right",key:"action",scopedSlots:{customRender:"action"}}]}},computed:{hackPayInfoStatus(){const e=this?.mergeInfo?.receiveObjectList?.every((e=>e.referTransactionExpiretime<this.serverNowTime));return e?this.payInfo.status:Da.A7.Delivering},serverNowTime(){return d.l1.serverNowTime},needFission(){return!!this.mergeInfo.receiveObjectList&&this.mergeInfo.receiveObjectList[0].needFission},receiveStatusSuccess(){return[3,4,5]},mergeGenTime(){return this.mergeInfo.createTime?da().unix(+this.mergeInfo.createTime).format("YYYY/MM/DD HH:mm"):"-"},mergeStatus(){return this.mergeInfo.status?de.IT[this.mergeInfo.status]:"-"},genType(){return this.mergeInfo.genType?de.FP[this.mergeInfo.genType]:"-"},receiveType(){if(this.recordList.length){const e=this.recordList[0].receiveType;return de.n6[e]}return"-"},recordList(){return this.mergeInfo.receiveObjectList||[]},pageRecordList(){const e=(this.curPage-1)*this.pageNum,t=e+this.pageNum;return this.recordList.slice(e,t)},totalReceiveCount(){return this.recordList.reduce(((e,t)=>e+t.totalReceiveCount),0)},validTotalReceiveCount(){return this.recordList.reduce(((e,t)=>t.referTransactionExpiretime<this.serverNowTime?e+0:e+t.totalReceiveCount),0)},totalGenCount(){return this.recordList.reduce(((e,t)=>e+t.totalGenCount),0)},validTotalGenCount(){return this.recordList.reduce(((e,t)=>t.referTransactionExpiretime<this.serverNowTime?e+0:e+t.totalGenCount),0)},receiveGenText(){const{totalReceiveCount:e,totalGenCount:t}=this;return e+t===0?"-":`${e}/${t}`},totalFissionReceiveCount(){return this.recordList.reduce(((e,t)=>e+(t.fissionReceiveCount||0)),0)},recallStatus(){if(!this.recordList.length)return"";const e=this.recordList.every((e=>e.status===de.ST.Recalled));if(e)return"已回收";const t=this.recordList.some((e=>e.status===de.ST.Recalling));return t?"回收中":""}},methods:{unix(e){return da().unix(e)},handleRecallSuccess(){this.fetchData(),this.$emit("refreshCover")},emitGenPoster(){this.$emit("generatePoster",this.order)},emitTranslateQr(){const{order:e,validTotalReceiveCount:t,validTotalGenCount:i}=this;this.$emit("translateQr",{...e,totalReceiveCount:t,totalGenCount:i})},goDetail(e){e.objectId!==this.order.objectId&&(window.location.href=`#/order?tid=${e.referTransactionId}`,window.location.reload())},recallCb(){this.fetchData(),this.$emit("refreshCover")},pageChange(e){this.curPage=e.currentPage},async download(){await Ep.downloadMergeReceiveObject(this.order)},async fetchData(){this.loading=!0;try{const e=await Ep.getMergeDetail({merge_id:this.order.mergeId,order_id:this.payInfo.orderId});0===e?.baseResponse.ret?(this.mergeInfo=e,this.mergeInfo.receiveObjectList&&(this.mergeInfo.receiveObjectList=this.mergeInfo.receiveObjectList.sort(((e,t)=>e.referTransactionExpiretime-t.referTransactionExpiretime)),this.canHeat=!!e.canHeat,this.heatStatus=e.heatStatus,this.coverSetCommInfo=e.coverSetCommInfo)):this.errorTip("获取合并发放信息出错")}finally{this.loading=!1}},handleVisibleChange(e){e&&this.fetchData()},close(){this.mergeInfo?.status===de.lv.Recalling&&this.$emit("refreshCover"),this.mergeInfo={baseResponse:{ret:0,msg:""}},this.$emit("input",!1)}}}),Mp=Rp,Lp=(0,h.Z)(Mp,Ap,Pp,!1,null,"27ddd518",null),Np=Lp.exports,Fp=i(75062),Op=i(5202),Bp=i(351),qp=a.ZP.extend({name:"ReceiveMaterial",components:{Tag:ga,EmotionRainDesc2:Ia,EmotionRainTipEntry:Pa,GenerateCoverDialog:ds,MergeDistributedDialog:Np,TranslateQrDialog:Fp.Z,Remark:Xa,RecallBtn:Dp.Z,PosterDialog:Op.Z,DownloadReceiveObject:Up.Z,HeatReceiveObject:is.Z,CoverHeatIntro:as.Z},data(){return{tableKey:1,heatSetting:!1,heatItem:null,isCanDownload:!0,isLoading:!1,loadingText:"回收中",pageNum:10,curPage:1,showQrDialog:!1,flashFirstMaterial:!1,showGenerateImageDialog:!1,mergeDutributeDialog:!1,generateData:{},HeatStatusTextMap:de.IJ,checkMergeOrder:{},posterLoading:!1,curTranslateQrOrder:null,curGenPosterOrder:null,columns:[{key:"genInfo",title:"发放信息",width:250,scopedSlots:{customRender:"genInfo"}},{key:"action",title:"生成状态",scopedSlots:{customRender:"action"},width:180},{key:"send",title:"已发放",dataIndex:"totalGenCount",width:100},{key:"used",dataIndex:"totalReceiveCount",slots:{title:"usedTitle"},width:100},{key:"fissionPercent",dataIndex:"fissionPercent",slots:{title:"fissionHd"},width:180},{title:"操作",key:"action1",align:"right",width:180,scopedSlots:{customRender:"action1"}}]}},props:{cover:{type:Object,default(){return{}}},payInfo:{type:Object,default(){return{}}}},async mounted(){await d.U6.getUserInfo(),1!=d.U6.user.isSecondary||4&d.U6.user.managerFlag||(this.isCanDownload=!1)},beforeDestroy(){d.l1.showReceiveMaterialDialog&&d.l1.toggleReceiveDialog()},computed:{receiveStatusSuccess(){return[3,4,5]},principalType(){return d.U6.user.principalType},isPayInfoDisabled(){return this.payInfo.status>6},receiveObjectList(){const e=this.cover;return e.receiveObjectList||[]},list(){const e=this,t=e.receiveObjectList,i=JSON.parse(JSON.stringify(t)),a=(e.curPage-1)*e.pageNum,s=a+e.pageNum;var r=i.slice(a,s).map((e=>{const t=Object.assign({},e,(0,Bp.Tg)(e));return t}));return r},isOrganization(){return this.principalType===l.eZ.organization},purchaseTimeReachActivityTime(){return this.payInfo},isEmotionRainActivityEnd(){return this.payInfo.serverNowTime>d.U6.user.emojiRainInfo.endTime}},watch:{heatSetting(e){e||this.$nextTick((()=>{document.body.style.overflow=""}))}},methods:{async startHeat(){if(!this.heatItem)return;const e=await this.$refs.heatSource.validate();e&&(await je.yQ.coverHeatReceiveObject({objectId:this.heatItem.objectId,isHeat:!0,coverSetCommInfo:e,mergeId:this.heatItem.mergeId,needFission:!0}),this.heatSetting=!1,this.$tipsSuc("已开始推广"),this.$emit("refreshCover"))},async coverCancelHeatReceiveObject(e){await je.yQ.coverCancelHeatReceiveObject({objectId:e.objectId,mergeId:e.mergeId}),this.$tipsSuc("已停止推广"),this.$emit("refreshCover")},openMergeDetail(e){this.checkMergeOrder=e,this.mergeDutributeDialog=!0},handleGenCoverRefresh(){const e=this;e.flashFirstMaterial=!0,this.$emit("refreshCover"),window.setTimeout((()=>{e.flashFirstMaterial=!1}),3e3)},async translateQr(e){this.curTranslateQrOrder=e,this.showQrDialog=!0},toadmin(){this.$router.push({name:"administrator"})},async generatePoster(e){this.curGenPosterOrder=e,this.showGenerateImageDialog=!0},pageChange(e){this.curPage=e.currentPage}}}),Qp=qp,jp=(0,h.Z)(Qp,Sp,xp,!1,null,"632c4024",null),$p=jp.exports,Zp=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.receiveDetail.objectQrcodeUrl?t("div",{staticClass:"time-order-receive-wrap"},[t("div",{staticClass:"receive-item"},[t("div",{staticClass:"title"},[e._v("二维码")]),t("div",{staticClass:"tip"},[e._v("支持通过线下扫码或线上长按图片识别领取封面。")]),t("div",{staticClass:"content"},[t("img",{attrs:{src:e.receiveDetail.objectQrcodeUrl}})]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return e.downloadReceiveObject()}}},[e._v("保存")])])]),t("div",{staticClass:"receive-item"},[t("div",{staticClass:"title"},[e._v("领取链接")]),t("div",{staticClass:"tip"},[e._v("支持在微信内（小程序、公众号文章、H5链接等）打开链接领取封面。")]),t("div",{staticClass:"content2"},[t("input",{ref:"input",domProps:{value:e.receiveDetail.objectFullUrl},on:{focus:function(t){return e.select("input")}}})]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return t.preventDefault(),e.copy("input")}}},[e._v("复制")])])]),t("div",{staticClass:"receive-item"},[t("div",{staticClass:"title"},[e._v("领取序列号")]),t("div",{staticClass:"tip"},[e._v("支持在红包列表页（“红包封面”->“添加红包封面”）中输入序列号领取封面。")]),t("div",{staticClass:"content2"},[t("input",{ref:"code",staticClass:"exchange-code",domProps:{value:e.receiveDetail.objectCdkey},on:{focus:function(t){return e.select("code")}}})]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return t.preventDefault(),e.copy("code")}}},[e._v("复制")])])])]):e._e()},Hp=[];const Gp=new je.ZP;var Wp=a.ZP.extend({name:"TimeOrderReceiveDetail",props:{orderId:String,objectId:String,receiveDetail:{}},components:{},methods:{async downloadReceiveObject(e){await Gp.downloadReceiveObject(this.orderId,{objectId:this.objectId})},copy(e){const t=this;this.select(e),document.execCommand("copy")?(document.execCommand("copy"),t.$tipsSuc("复制成功"),window.setTimeout((()=>t.$tipsHide()),1500)):(t.$tipsErr("复制失败，请手动复制"),window.setTimeout((()=>t.$tipsHide()),1500))},select(e){const t=this.$refs[e];t.select()}}}),zp=Wp,Vp=(0,h.Z)(zp,Zp,Hp,!1,null,"2b6878d0",null),Jp=Vp.exports,Kp=function(){var e=this,t=e._self._c;return t("span",[e._v(e._s(e.time))])},Yp=[],Xp={name:"timeout",data(){return{time:"",leftSeconds:0}},props:{second:Number,type:Number},mounted(){this.leftSeconds=this.second,this.time=(0,ye.Jh)(this.leftSeconds,this.type),this.interval=window.setInterval((()=>{this.leftSeconds=this.leftSeconds-1,this.time=(0,ye.Jh)(this.leftSeconds,this.type),this.leftSeconds||(clearInterval(this.interval),this.$emit("timeout"))}),1e3)},destroy(){clearInterval(this.interval)}},eu=Xp,tu=(0,h.Z)(eu,Kp,Yp,!1,null,null,null),iu=tu.exports;const au=new Nd.Z,su=i(90520),ru=new La.ZP;var ou=a.ZP.extend({name:"OrderDetail",data(){return{InvoiceType:dd,OrderChannelType:Da.kS,OrderPayStatus:Da.A7,transactionId:"",isPageReady:!1,payInfo:null,receiveDetail:{},showActivateDialog:!1,showCancelDialog:!1,cancelInvoiceLoading:!1,orderId:"",generateImage:0,isCanEdit:!0,isCanEdit2:!0,disabled:!1,exchangeInput:"",useDialog:!1,exchangeUseStep:1,stepTitle:"转为封面兑换卡",expiredTime:"",numberErrorTips:""}},watch:{exchangeUseStep(){1==this.exchangeUseStep?this.stepTitle="转为封面兑换卡":2==this.exchangeUseStep&&(this.stepTitle="")},exchangeInput(){}},components:{CoverMaterial:Kc,ReceiveMaterial:$p,TimeOrderReceiveDetail:Jp,Timeout:iu},computed:{disabledGenQuota(){return!!(this.payInfo?.permissionFlag&Da.A5.Disable_Gen_Quota)},hideExpiredTimeText(){return!!this.payInfo&&[Da.A7.Fail,Da.A7.Cancel,Da.A7.Blocked,Da.A7.Pending].includes(this.payInfo.status)},isQuota(){const{channelType:e}=this.payInfo;return e===Da.kS.Quota||e===Da.kS.Quota_Gift},cover(){return d.l1.cover},isTimePurchaseType(){return 1===this?.payInfo?.purchaseType},isPayInfoSuccess(){const e=this.payInfo;return e?.status>=3&&4!==e?.status},payStat(){const e=this.payInfo;return e&&e.payStat?e.payStat:{}},payInfoForShow(){const e=this.payInfo;if(!e)return"";let t=Da.j8[e.status];return Object.assign({},e,{statusText:t,payTime:su("yyyy/MM/dd hh:mm",new Date(1e3*e.paymentTime)),leftDays:(0,ye.Jh)(e?.expiredTime-Date.now()/1e3,ye.m4.day),invoiceText:e.invoiceInfo?ld[e.invoiceInfo.invoiceStatus]:"未开票",whatTime:(0,ye.oR)(e?.expiredTime),payType:Da.js[e.channelType],payAmount:(0,ye.Zh)(e.paymentAmountInCents),expiredTimeText:e.expiredTime&&!this.hideExpiredTimeText?`${da().unix(e.expiredTime).format("YYYY/MM/DD")} 24:00`:"-"})},receiveObjectList(){const e=this.cover;return e.receiveObjectList||[]},leftTimeTip(){const e=this,t=e.payInfo?.activeEndTime-e.payInfo?.serverNowTime;return t<=0?"订单已过期":e.payStat.totalReceiveCount===e.payStat.totalGenCount?"封面领取已达上限":Math.floor(t)}},async mounted(){d.l1.showReceiveMaterialDialog||(document.body.style.overflow="visible");const e=this,t=e.$route.query.tid;if(!t)return e.$router.replace({name:"orders"});e.transactionId=t,d.l1.clearCoverReceiveObjectList(),await this.fetchData(),await d.U6.getUserInfo(),e.isPageReady=!0,!this.isQuota&&e.payStat.remainingGenCoverCount?(new $.ZP).baseActionReportExchange({AuthorId:d.U6.user.authorId,UserType:(d.U6.user.isSecondary+1).toString(),TransactionId:this.transactionId,ActionType:"1",IfClick:"1"}):this.isQuota||e.payStat.remainingGenCoverCount||(new $.ZP).baseActionReportExchange({AuthorId:d.U6.user.authorId,UserType:(d.U6.user.isSecondary+1).toString(),TransactionId:this.transactionId,ActionType:"1",IfClick:"2"}),1!=d.U6.user.isSecondary||1&d.U6.user.managerFlag||(this.isCanEdit2=!1),1!=d.U6.user.isSecondary||16&d.U6.user.managerFlag||(this.isCanEdit=!1)},beforeDestroy(){(0,je.mo)()},methods:{refreshCover(){setTimeout(this.fetchData,1e3)},async downloadInvoice(){await au.downloadInvoice(`${this.payInfo?.invoiceInfo?.invoiceId}`)},toInvoice(){this.$router.push({name:"invoice",query:{iid:this.payInfo?.invoiceInfo?.invoiceId}})},toInvoiceManage(){this.$router.push({name:"invoiceManage",query:{transactionId:this.transactionId,nav:"1"}})},inputBlur(){this.numberErrorTips=""},toDetail(){this.$router.push({name:"exchange"})},closeDialog(){this.useDialog=!1,this.exchangeInput="",this.numberErrorTips=""},openChangeExchange(){this.useDialog=!0,(new $.ZP).baseActionReportExchange({AuthorId:d.U6.user.authorId,UserType:(d.U6.user.isSecondary+1).toString(),TransactionId:this.transactionId,ActionType:"2",IfClick:""}),this.exchangeUseStep=1},async confirmExchange(){const e=this;var t=parseFloat(this.exchangeInput),i=/(^[1-9]\d*$)/.test(t.toString());if(this.disabled=!0,!i)return this.numberErrorTips="请输入正确的转换数量",void(this.disabled=!1);if(t>(e.payStat.remainingGenCoverCount||0))return this.numberErrorTips="超出最大转换数量",void(this.disabled=!1);this.numberErrorTips="";var a=await(new Tp).getQuota(this.orderId,this.transactionId,parseInt(this.exchangeInput));a&&0===a.baseResponse.ret&&(this.disabled=!1,this.exchangeUseStep=2,this.expiredTime=a.expiredTime,await this.fetchData())},async fetchData(){const e=this,t=await ru.getPayInfo(e.transactionId);if(t&&0===t.baseResponse.ret){this.payInfo=t.payInfo;const{orderId:i,transactionId:a}=t.payInfo;if(e.orderId=i,await d.l1.getCover(i),await d.l1.getCoverReceiveObjectList({orderId:i,transactionId:a}),1===t.payInfo.purchaseType){const t=await d.l1.getReceiveObjectDetail({orderId:i,transactionId:a,objectId:e.receiveObjectList[0].objectId});e.receiveDetail=t}}},ask(){(new $.ZP).baseActionReportExchange({AuthorId:d.U6.user.authorId,UserType:(d.U6.user.isSecondary+1).toString(),TransactionId:this.transactionId,ActionType:"3",IfClick:"1"})},toadmin(){this.$router.push({name:"administrator"})},toDate(e){return su("yyyy年MM月dd日",new Date(1e3*e))},handleGenReceiveObj(){d.l1.toggleReceiveDialog()},pay(){const e=this,t=e.payInfo;(0,ye.jo)(t)},async cancelInvoice(){this.cancelInvoiceLoading=!0;try{await d.AQ.recallInvoice({invoiceId:`${this.payInfo?.invoiceInfo?.invoiceId}`,vm:this})}finally{this.cancelInvoiceLoading=!1}this.showCancelDialog=!1,this.fetchData()},async activateOrder(){const e=this,t=e.receiveObjectList,i=e.cover,s=e.payInfo,r=await d.l1.activateOrder({orderId:i.orderId,transactionId:s?.transactionId,objectId:t[0].objectId});if(r){e.$tipsSuc("已生效"),window.setTimeout((()=>e.$tipsHide()),1500),e.showActivateDialog=!1;const t=await ru.getPayInfo(e.transactionId);t&&0===t.baseResponse.ret&&a.ZP.set(this,"payInfo",t.payInfo)}},handleTimeout(){this.fetchData()}}}),nu=ou,cu=(0,h.Z)(nu,wp,Ip,!1,null,"ff931fc0",null),lu=cu.exports,du=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"order-list"},[t("div",{staticClass:"main-card-title"},[e._v("我的订单")]),e.isPageReady?t("div",{staticClass:"main-card"},[t("a-table",{staticClass:"order-table",attrs:{columns:e.columns,dataSource:e.list,pagination:!1,locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"nameAndImg",fn:function(i,a){return[t("div",{staticClass:"order-header"},[t("CoverReceiveImg",{staticClass:"cover-img",attrs:{src:a.packetImageUrl,"widget-cover-src":a.isWidgetPacket?a.packetImageUrl:""}}),t("div",{staticClass:"cover-name"},[e._v(e._s(a.packetName))])],1)]}},{key:"expiredTitle",fn:function(){return[t("div",{staticClass:"send-to-receive"},[e._v(" 发放与领取有效期 "),t("mp-popover",{attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px",left:"-2px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"r"},[t("div",[e._v("有效期截止日当天的24点前均可发放")])])]},proxy:!0}],null,!1,2926016264)})],1)]},proxy:!0},{key:"statusText",fn:function(i,a){return[t("span",{class:{"waiting-pay":"1"==a.status}},[e._v(e._s(a.statusText))])]}},{key:"action",fn:function(i,a){return[t("div",{staticClass:"detail",on:{click:function(t){return e.handleToDetail(a)}}},[t("a",[e._v("订单与发放详情")])])]}}],null,!1,1917372846)}),t("a-row",{attrs:{type:"flex",justify:"end"}},[e.payInfoList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{mode:"normal",current:e.curPage,"per-page":e.pageNum,"total-num":e.payInfoList.length},on:{"page-change":e.pageChange}}):e._e()],1)],1):[e._m(0)]],2)},pu=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}];const uu=i(90520);var hu,mu=a.ZP.extend({name:"OrderList",data(){return{isPageReady:!1,curPage:1,pageNum:8,totalNum:200,payInfoList:[],columns:[{dataIndex:"payTime",key:"payTime",title:"订单时间",width:200},{key:"nameAndImg",title:"红包封面",scopedSlots:{customRender:"nameAndImg"}},{dataIndex:"purchaseCount",key:"purchaseCount",title:"购买数量",width:200},{dataIndex:"expired",key:"expired",scopedSlots:{title:"expiredTitle"},width:220},{key:"statusText",title:"订单状态",width:190,scopedSlots:{customRender:"statusText"}},{title:"操作",key:"action",dataIndex:"action",align:"right",width:140,scopedSlots:{customRender:"action"}}]}},computed:{list(){const e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;return e.payInfoList.slice(t,i).map(((e,t)=>{const i=e.expiredTime?uu("yyyy/MM/dd",new Date(1e3*e.expiredTime)):"-",a=Object.assign({},e,{key:t,payTime:(0,ye.UZ)(e.paymentTime),expired:e.expiredTime&&![Da.A7.Fail,Da.A7.Cancel,Da.A7.Blocked,Da.A7.Pending].includes(e.status)?`至 ${i}`:"-",statusText:Da.j8[e.status]});return a}))}},components:{CoverReceiveImg:be.Z},async mounted(){await this.fetchData(),this.isPageReady=!0},methods:{async fetchData(){const e=this,t=await La.XK.getPayInfoList();if(t&&0===t.baseResponse.ret){e.payInfoList=t.payInfoList||[];const i=+this.$route.query.page;i&&i<=Math.ceil(this.payInfoList.length/this.pageNum)&&(this.curPage=+this.$route.query.page)}},handleToDetail(e){const t=this;t.$router.push({name:"order",query:{tid:e.transactionId}})},pageChange(e){this.curPage=e.currentPage,this.$router.replace({name:`${this.$route.name}`,query:{page:`${e.currentPage}`}})},goToCoverList(){this.$router.push({name:"covers"})}}}),gu=mu,vu=(0,h.Z)(gu,du,pu,!1,null,"28a327e3",null),fu=vu.exports,yu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),t("div",{staticClass:"title"},[e._v("选择认证类型")]),t("div",{staticClass:"title-desc"},[e._v("账号类型的选择，会影响账号归属、发票开具、认证方式、封面审核标准等环节。")]),t("div",{staticClass:"choose-wrap"},[t("div",{staticClass:"choose-desc-tips"},[e._v("请根据实际情况，选择账号类型：")]),t("div",{staticClass:"type-list"},[t("div",{staticClass:"type-item",class:{active:1===e.type},on:{click:function(t){e.type=1}}},[t("img",{staticClass:"personal-icon",attrs:{src:i(50545)}}),t("div",{staticClass:"type-name"},[e._v("个人认证")]),e._m(0)]),t("div",{staticClass:"type-item",class:{active:0===e.type},on:{click:function(t){e.type=0}}},[t("img",{staticClass:"personal-icon",attrs:{src:i(88014)}}),t("div",{staticClass:"type-name"},[e._v("企业认证")]),e._m(1)])])]),t("div",{staticClass:"options"},[t("mp-button",{staticClass:"next",attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1)},_u=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"type-desc"},[t("p",[e._v("适合个人用户，账号归属于个人")]),t("p",[e._v("无法开具增值税专用发票")]),t("p",[e._v("需已开通个人主体的视频号/公众号")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"type-desc"},[t("p",[e._v("适合企业，事业单位等，账号归属于企业")]),t("p",[e._v("可以申请增值税专用发票")]),t("p",[e._v("需已开通公众号，且完成公众号企业认证")])])}],Cu=i(89983);(function(e){e[e["company"]=0]="company",e[e["personal"]=1]="personal"})(hu||(hu={}));var bu=a.ZP.extend({name:"ChooseType",data(){return{type:hu.personal,qrcodeUrl:"",qrcodeStatus:0,signScanFailReason:"",failText:"",token:"",wxInfo:{},bizInfo:[],checkInterval:0}},components:{Brand:Cu.Z},computed:{normalText(){return this.type===hu.personal?"请用微信扫码":this.type===hu.company?"公众号管理员扫码认证（公众号需已微信认证）":""}},created(){},methods:{nextStep(){this.type;0==this.type?this.$router.push({name:"EnterpriseMail"}):this.$router.push({name:"ChoosePersonType"})},gotoIndex(){this.$router.push({name:"index"})}},beforeDestroy(){clearInterval(this.checkInterval)}}),wu=bu,Iu=(0,h.Z)(wu,yu,_u,!1,null,"94424f18",null),ku=Iu.exports,Tu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),e.showVerifyMailInfo?[t("div",{staticClass:"title"},[e._v("激活邮箱")]),t("div",{staticClass:"info-wrap"},[t("div",{staticClass:"text verify"},[t("span",[e._v("验证邮件已发送到你的注册邮箱："+e._s(e.form.mail))]),t("mp-button",{staticClass:"resend",attrs:{type:"primary",disabled:e.resendSeconds>0},on:{click:e.resend}},[e.resendSeconds>0?t("span",[e._v("已发送（"+e._s(e.resendSeconds)+"s）")]):t("span",[e._v("重发验证")])])],1),t("div",{staticClass:"text"},[e._v("请进入邮箱查看邮件，并激活微信红包封面开放平台账号。")])]),t("div",{staticClass:"tip-wrap"},[t("div",{staticClass:"text"},[e._v("没有收到邮件？")]),t("div",{staticClass:"text"},[t("span",[e._v("1.请检查邮箱地址是否正确，可以返回")]),t("a",{on:{click:e.back}},[e._v("重新填写")])]),t("div",{staticClass:"text"},[e._v("2.邮件可能被拦截，请检查你的邮件垃圾箱")]),t("div",{staticClass:"text"},[e._v("3.若仍未收到验证邮件，请尝试重发")])])]:[t("div",{staticClass:"title"},[e._v("完善注册信息")]),t("div",{staticClass:"title-desc"},[e._v("请填写邮箱，邮箱需未注册过红包封面平台。")]),t("mp-form",{ref:"form",staticClass:"mail-form",attrs:{model:e.form,rules:e.rules,"label-width":60},nativeOn:{submit:function(e){e.preventDefault()}}},[t("mp-form-item",{attrs:{prop:"mail",label:"邮箱地址"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的邮箱"},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),t("mp-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.sendMail}},[e._v("发送验证邮件")])],1)]],2)},Su=[],xu=a.ZP.extend({name:"EnterpriseMail",components:{Brand:Cu.Z},data(){return{showVerifyMailInfo:!1,form:{mail:""},resendSeconds:0,rules:{mail:[{required:!0,message:"注册邮箱不能为空",trigger:"blur"},{trigger:"blur",validator(e,t,i){return(0,ye.Q7)(t)?i():i(new Error("请填写正确格式的邮箱地址"))}}]}}},created(){},methods:{sendMail(){const e=this,t=e.$refs.form;t.validate((async t=>{if(t){const t=await(new l.ZP).sendEmail(d.U6.loginData.token,this.form.mail,+this.$route.query.principal_type,"","",+this.$route.query.account_type);t&&-4===t.baseResponse.ret?(e.$tipsErr("该邮箱已被注册，请使用另一个邮箱重新注册"),window.setTimeout((()=>e.$tipsHide()),3e3)):t&&0===t.baseResponse.ret?(e.showVerifyMailInfo=!0,this.countdown()):(e.$tipsErr("发送失败，请稍后重试"),window.setTimeout((()=>e.$tipsHide()),3e3))}}))},countdown(){this.resendSeconds=60;const e=window.setInterval((()=>{this.resendSeconds-=1,0===this.resendSeconds&&clearInterval(e)}),1e3)},async resend(){const e=await(new l.ZP).sendEmail(d.U6.loginData.token,this.form.mail,+this.$route.query.principal_type,"","",+this.$route.query.account_type);e&&0===e.baseResponse.ret&&this.countdown()},back(){this.showVerifyMailInfo=!1},gotoIndex(){this.$router.replace({name:"index"})}}}),Au=xu,Pu=(0,h.Z)(Au,Tu,Su,!1,null,"4c7ccc46",null),Du=Pu.exports,Uu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),1===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("扫码认证")]),t("div",{staticClass:"qr-wrap"},[t("div",{staticClass:"qr-tips-title"},[e._v(" 请使用符合以下条件的微信扫码认证： "),t("div",{staticClass:"qr-tips-desc text-left"},e._l(e.qrTipsDesc,(function(i,a){return t("span",{key:i},[e._v(e._s(`${a+1}. ${i}`))])})),0)]),t("div",{staticClass:"scan-qrcode"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:e.normalText,status:e.qrcodeStatus,failText:e.failText,failTip:e.signScanFailReason},on:{reload:e.loadQrcode}})],1)])]:e._e(),2===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("选择公众号")]),t("div",{staticClass:"desc"},[e._v("请根据实际情况选择公众号，完成封面平台注册。选择完成后，无法再次更改。")]),t("AdditionalCompanyInfo",{attrs:{bizInfo:e.bizInfo},on:{submit:e.submit}})]:e._e()],2)},Eu=[],Ru=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"addtional-company-info-wrapper"},[t("div",{staticClass:"choose-wx-account"},[t("div",{staticClass:"choose-account-text"},[e._v("选择企业主体管理的公众号：")]),t("mp-radio-group",{model:{value:e.choosedIndex,callback:function(t){e.choosedIndex=t},expression:"choosedIndex"}},[t("div",{staticClass:"account-list"},e._l(e.bizInfo,(function(i,a){return t("div",{key:a,staticClass:"account-item",class:{disabled:1!==i.status},on:{click:function(t){return e.setIndex(a)}}},[t("mp-radio",{attrs:{value:a}}),t("img",{attrs:{src:i.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(i.nickname))]),1!==i.status?[t("div",{staticClass:"disable-tip"},[0===i.status||2===i.status?t("span",[e._v("（已注册）")]):3===i.status?t("span",[e._v("（未绑定银行卡）")]):4===i.status?t("span",[e._v("（海外主体，无法注册）")]):e._e()]),t("div",{staticClass:"disable-mask",on:{click:function(e){e.stopPropagation()}}}),5===i.status?t("div",{staticClass:"not-complete-biz-tip",on:{click:function(e){e.stopPropagation()}}},[t("span",{staticClass:"warn"},[e._v("（该公众号的认证材料不完整，需补全认证材料后注册）")]),t("a",{ref:"https://mp.weixin.qq.com/cgi-bin/readtemplate?t=wxverify/faq_tmpl&lang=zh_CN&token=$base_resp.token.DATA",refInFor:!0,attrs:{target:"_blank"}},[e._v(" 公众号申请微信认证指引 ")])]):e._e()]:[t("span",[e._v("（"+e._s(i.principalName)+"）")])]],2)})),0)])],1),e.choosedIndex>-1?t("div",{staticClass:"options"},[t("mp-button",{attrs:{type:"primary",disabled:e.bizInfo[e.choosedIndex]&&1!==e.bizInfo[e.choosedIndex].status},on:{click:e.submit}},[e._v("完成认证")])],1):e._e()])},Mu=[];var Lu,Nu=a.ZP.extend({name:"AdditionalCompanyInfo",data(){return{choosedIndex:0}},computed:{principalName(){const{choosedIndex:e,bizInfo:t}=this;return t[e]?t[e].principalName:"-"}},props:{bizInfo:{type:Array,default(){return[]}},value:{type:Object,default(){return{}}}},mounted(){this.choosedIndex=this.bizInfo.findIndex((e=>1===e.status))},methods:{setIndex(e){this.choosedIndex=e},submit(){const{choosedIndex:e}=this,t=this.bizInfo;this.$emit("submit",{author_id:t[e].authorId})}}}),Fu=Nu,Ou=(0,h.Z)(Fu,Ru,Mu,!1,null,"93d22b14",null),Bu=Ou.exports;(function(e){e[e["chooseType"]=0]="chooseType",e[e["scanQrcode"]=1]="scanQrcode",e[e["additionalInfo"]=2]="additionalInfo"})(Lu||(Lu={}));var qu=a.ZP.extend({name:"EnterpriseQR",data(){return{curProgressStatus:Lu.additionalInfo,qrcodeUrl:"",qrcodeStatus:0,signScanFailReason:"",failText:"",token:"",wxInfo:{},bizInfo:[],checkInterval:0}},components:{AdditionalCompanyInfo:Bu,Qrcode:L.Z,Brand:Cu.Z},computed:{qrTipsDesc(){return["微信公众号已完成企业认证","该微信公众号管理员"]},normalText(){return""}},created(){this.next()},destroyed(){clearInterval(this.checkInterval)},methods:{toMail(){},async next(){const{token:e}=this.$route.query;e?(this.token=e,this.loadQrcode()):this.errorTip("无有效认证信息，请重新开始注册",1500,(()=>{this.$router.push({name:"signUp"})}))},async submit(e){console.log(e);const{token:t}=this,i={token:t,author_id:e.author_id},a=await(new l.ZP).signUp(i);if(!a)return;const{baseResponse:s}=a;0===s.ret?this.$router.replace({name:"signSuccess"}):-3===s.ret?this.errorTip("身份证与姓名不匹配，请重试"):-4===s.ret?this.errorTip("该邮箱已被注册，请使用另一个邮箱重新注册"):-10010===s.ret?this.errorTip("暂不支持海外主体注册"):-10011===s.ret?this.errorTip("注册信息不全"):this.errorTip("注册失败，请重试")},async loadQrcode(){const e=this,t=await(new l.ZP).getSignUpQrcode(this.token);if(t){if(-2===t.baseResponse.ret)return e.$tipsErr("注册链接已过期，请重新发起注册"),window.setTimeout((()=>{this.$router.push({name:"signMail"})}),1500),void window.setTimeout((()=>e.$tipsHide()),3e3);this.qrcodeStatus=L.R.normal,this.qrcodeUrl=t.image,this.curProgressStatus=Lu.scanQrcode,this.checkInterval=window.setInterval((()=>this.checkQrcode()),1e3)}},async checkQrcode(){const e=this;let t;t=await(new l.ZP).checkSignUpQrcode(this.token),t&&1!==t.baseResponse.ret&&(clearInterval(this.checkInterval),0===t.baseResponse.ret?t.bizInfo&&t.bizInfo.length?(this.qrcodeStatus=L.R.success,window.setTimeout((async()=>{e.bizInfo=t?.bizInfo,e.wxInfo=t?.wxInfo,this.curProgressStatus=Lu.additionalInfo}),1500)):(this.qrcodeStatus=L.R.fail,window.setTimeout((async()=>{this.failText="扫码认证失败，请重新扫码认证",this.signScanFailReason="该微信号无认证资格，仅已微信认证的公众号的管理员才可扫码认证。"}),1500)):this.qrcodeStatus=L.R.expired)}},beforeDestroy(){clearInterval(this.checkInterval)}}),Qu=qu,ju=(0,h.Z)(Qu,Uu,Eu,!1,null,"2ebf081e",null),$u=ju.exports,Zu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),e.showVerifyMailInfo?[t("div",{staticClass:"title"},[e._v("激活邮箱")]),t("div",{staticClass:"info-wrap"},[t("div",{staticClass:"text verify"},[t("span",[e._v("验证邮件已发送到你的注册邮箱："+e._s(e.form.mail))]),t("mp-button",{staticClass:"resend",attrs:{type:"primary",disabled:e.resendSeconds>0},on:{click:e.resend}},[e.resendSeconds>0?t("span",[e._v("已发送（"+e._s(e.resendSeconds)+"s）")]):t("span",[e._v("重发验证")])])],1),t("div",{staticClass:"text"},[e._v("请进入邮箱查看邮件，并激活微信红包封面开放平台账号。")])]),t("div",{staticClass:"tip-wrap"},[t("div",{staticClass:"text"},[e._v("没有收到邮件？")]),t("div",{staticClass:"text"},[t("span",[e._v("1.请检查邮箱地址是否正确，可以返回")]),t("a",{on:{click:e.back}},[e._v("重新填写")])]),t("div",{staticClass:"text"},[e._v("2.邮件可能被拦截，请检查你的邮件垃圾箱")]),t("div",{staticClass:"text"},[e._v("3.若仍未收到验证邮件，请尝试重发")])])]:[t("div",{staticClass:"title"},[e._v("完善注册信息")]),t("div",{staticClass:"personal-title"},[e._v("请填写个人实名信息及注册邮箱，用于信息校验。")]),t("mp-form",{ref:"form",staticClass:"mail-form",attrs:{model:e.form,rules:e.rules,"label-width":75},nativeOn:{submit:function(e){e.preventDefault()}}},[t("mp-form-item",{attrs:{prop:"name",label:"身份证姓名"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的身份证姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("mp-form-item",{attrs:{prop:"id_number",label:"身份证号码"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的身份证号码"},model:{value:e.form.id_number,callback:function(t){e.$set(e.form,"id_number",t)},expression:"form.id_number"}})],1),t("mp-form-item",{attrs:{prop:"mail",label:"邮箱地址"}},[t("mp-input",{attrs:{type:"text",placeholder:"请输入你的邮箱"},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),t("mp-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.sendMail}},[e._v("发送验证邮件")])],1)]],2)},Hu=[],Gu=a.ZP.extend({name:"PersonMail",components:{Brand:Cu.Z},data(){return{showVerifyMailInfo:!1,form:{mail:"",name:"",id_number:""},canSubmit:!1,resendSeconds:0,rules:{mail:[{required:!0,message:"注册邮箱不能为空",trigger:"blur"},{trigger:"blur",validator(e,t,i){return(0,ye.Q7)(t)?i():i(new Error("请填写正确格式的邮箱地址"))}}],id_number:[{required:!0,message:"身份证号码不能为空",trigger:"blur"},{trigger:"blur",validator(e,t,i){return(0,ye.e4)(t)?i():i(new Error("请填写正确格式的身份证号码"))}}]}}},created(){},methods:{sendMail(){const e=this,t=e.$refs.form;t.validate((async t=>{if(t){const t=await(new l.ZP).sendEmail(d.U6.loginData.token,this.form.mail,1,this.form.name,this.form.id_number);t&&-4===t.baseResponse.ret?(e.$tipsErr("该邮箱已被注册，请使用另一个邮箱重新注册"),window.setTimeout((()=>e.$tipsHide()),3e3)):t&&0===t.baseResponse.ret?(e.showVerifyMailInfo=!0,this.countdown()):(e.$tipsErr("发送失败，请稍后重试"),window.setTimeout((()=>e.$tipsHide()),3e3))}}))},countdown(){this.resendSeconds=60;const e=window.setInterval((()=>{this.resendSeconds-=1,0===this.resendSeconds&&clearInterval(e)}),1e3)},async resend(){const e=await(new l.ZP).sendEmail(d.U6.loginData.token,this.form.mail,1,this.form.name,this.form.id_number);e&&0===e.baseResponse.ret&&this.countdown()},back(){this.showVerifyMailInfo=!1},gotoIndex(){this.$router.replace({name:"index"})}}}),Wu=Gu,zu=(0,h.Z)(Wu,Zu,Hu,!1,null,"165f2b93",null),Vu=zu.exports,Ju=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-mail-wrap"},[t("Brand"),0===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("认证信息")]),t("div",{staticClass:"qr-wrap"},[e.can_signup?[t("div",{staticClass:"qr-tips-title"},[e._v("请使用符合以下条件的微信扫码认证：")]),e._m(0),t("div",{staticClass:"scan-qrcode"},[t("Qrcode",{attrs:{qrcodeUrl:e.qrcodeUrl,normalText:e.normalText,status:e.qrcodeStatus,failText:e.failText,failTip:e.signScanFailReason},on:{reload:e.loadQrcode}},[t("div",{staticClass:"second-tip"},[e._v("二维码每小时更新")])])],1)]:[t("ErrorWrap",{attrs:{errorRet:e.errorRet}},[[t("a",{on:{click:e.reload}},[e._v("重新扫码验证")]),e.errorRet.length>1&&!e.errorRet[1].pass?t("a",{on:{click:e.reloadMessage}},[e._v("重新完善注册信息")]):e._e()]],2)]],2)]:e._e(),1===e.curProgressStatus?[t("div",{staticClass:"title"},[e._v("选择视频号")]),t("AdditionalPersonInfo",{attrs:{finderInfo:e.finderInfo},on:{submit:e.submit}})]:e._e()],2)},Ku=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"qr-tips-desc"},[t("span",[e._v("1. 微信已完成实名认证；")]),t("span",[e._v("2. 微信实名信息与填写信息一致；")]),t("span",[e._v("3. 已开通个人注册的视频号；")]),t("span",[e._v("4. 视频号关注用户数达100个 或 视频号绑定的表情平台账号专辑下载量达500次。")])])}],Yu=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"addtional-company-info-wrapper"},[t("div",{staticClass:"choose-wx-account"},[t("div",{staticClass:"choose-account-text"},[e._v("选择个人管理的视频号：")]),t("mp-radio-group",{model:{value:e.choosedIndex,callback:function(t){e.choosedIndex=t},expression:"choosedIndex"}},[t("div",{staticClass:"account-list"},e._l(e.finderInfo,(function(i,a){return t("div",{key:a,staticClass:"account-item",class:{disabled:1!==i.status},on:{click:function(t){return e.setIndex(a)}}},[t("mp-radio",{attrs:{value:a}}),t("img",{attrs:{src:i.headImgUrl}}),t("div",{staticClass:"name"},[e._v(e._s(i.nickname))]),1!==i.status?[t("div",{staticClass:"disable-tip"},[0===i.status||2===i.status?t("span",[e._v("（已注册）")]):3===i.status?t("span",[e._v("（未绑定银行卡）")]):4===i.status?t("span",[e._v("（海外主体，无法注册）")]):e._e()]),t("div",{staticClass:"disable-mask",on:{click:function(e){e.stopPropagation()}}}),5===i.status?t("div",{staticClass:"not-complete-biz-tip",on:{click:function(e){e.stopPropagation()}}},[t("span",{staticClass:"warn"},[e._v("（该公众号的认证材料不完整，需补全认证材料后注册）")]),t("a",{attrs:{href:"https://mp.weixin.qq.com/cgi-bin/readtemplate?t=wxverify/faq_tmpl&lang=zh_CN&token=$base_resp.token.DATA",target:"_blank"}},[e._v(" 公众号申请微信认证指引 ")])]):e._e()]:e._e()],2)})),0)])],1),e.choosedIndex>-1?t("div",{staticClass:"options"},[t("mp-button",{attrs:{type:"primary",disabled:e.finderInfo[e.choosedIndex]&&1!==e.finderInfo[e.choosedIndex].status},on:{click:e.submit}},[e._v("下一步")])],1):e._e()])},Xu=[];var eh,th,ih=a.ZP.extend({name:"AdditionalPersonInfo",data(){return{choosedIndex:0}},computed:{principalName(){const{choosedIndex:e,finderInfo:t}=this;return t[e]?t[e].principalName:"-"}},props:{finderInfo:{type:Array,default(){return[]}},value:{type:Object,default(){return{}}}},mounted(){this.choosedIndex=this.finderInfo.findIndex((e=>1===e.status))},methods:{setIndex(e){this.choosedIndex=e},submit(){const{choosedIndex:e}=this,t=this.finderInfo;this.$emit("submit",{author_id:t[e].authorId})}}}),ah=ih,sh=(0,h.Z)(ah,Yu,Xu,!1,null,"0d8edc7e",null),rh=sh.exports,oh=i(88299);(function(e){e[e["scanQrcode"]=0]="scanQrcode",e[e["additionalInfo"]=1]="additionalInfo"})(eh||(eh={})),function(e){e[e["personal"]=0]="personal",e[e["company"]=1]="company"}(th||(th={}));var nh=a.ZP.extend({name:"PersonQR",data(){return{type:th.personal,curProgressStatus:eh.scanQrcode,qrcodeUrl:"",qrcodeStatus:0,signScanFailReason:"",failText:"",token:"",wxInfo:{},finderInfo:[],checkInterval:0,can_signup:!0,errorRet:[]}},components:{AdditionalPersonInfo:rh,Qrcode:L.Z,Brand:Cu.Z,ErrorWrap:oh.Z},computed:{normalText(){return this.type===th.personal?"":this.type===th.company?"公众号管理员扫码认证（公众号需已微信认证）":""}},created(){this.next()},methods:{reload(){this.can_signup=!0,this.loadQrcode()},reloadMessage(){this.$router.replace({name:"PersonMail"})},async next(){const{token:e}=this.$route.query;e?(this.token=e,this.loadQrcode()):this.errorTip("无有效认证信息，请重新开始注册",1500,(()=>{this.$router.push({name:"signUp"})}))},async submit(e){const{token:t}=this,i=this.wxInfo,a={token:t,author_id:i.authorId,...e},s=await(new l.ZP).signPersonUp(a);if(!s)return;const{baseResponse:r}=s;0===r.ret?this.$router.replace({name:"signSuccess"}):-3===r.ret?this.errorTip("身份证与姓名不匹配，请重试"):-4===r.ret?this.errorTip("该邮箱已被注册，请使用另一个邮箱重新注册"):-9===r.ret?this.errorTip("个人认证失败"):this.errorTip("注册失败，请重试")},async loadQrcode(){const e=this,t=await(new l.ZP).getSignUpQrcode(this.token);if(t){if(-2===t.baseResponse.ret)return e.$tipsErr("注册链接已过期，请重新发起注册"),window.setTimeout((()=>{this.$router.push({name:"signMail"})}),1500),void window.setTimeout((()=>e.$tipsHide()),3e3);this.qrcodeStatus=L.R.normal,this.qrcodeUrl=t.image,this.curProgressStatus=eh.scanQrcode,this.checkInterval=window.setInterval((()=>this.checkQrcode()),1e3)}},async checkQrcode(){const e=await(new l.ZP).checkPersonSignUpQrcode(this.token);e&&1!==e.baseResponse.ret&&(clearInterval(this.checkInterval),0===e.baseResponse.ret?(this.errorRet=e.reasons,this.can_signup=e.canSignup,this.finderInfo=e.finderInfo,console.log(e.finderInfo),console.log(this.can_signup),1==this.can_signup&&(this.curProgressStatus=eh.additionalInfo,console.log(this.curProgressStatus))):this.qrcodeStatus=L.R.expired)},gotoIndex(){this.$router.replace({name:"index"})}},beforeDestroy(){clearInterval(this.checkInterval)}}),ch=nh,lh=(0,h.Z)(ch,Ju,Ku,!1,null,"da8b032c",null),dh=lh.exports,ph=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-law-wrap"},[t("term-display",{attrs:{title:"“微信红包封面”定制功能使用条款"},scopedSlots:e._u([{key:"content",fn:function(){return[t("use-term")]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{on:{click:e.back}},[e._v("上一步")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("同意")])]},proxy:!0}])})],1)},uh=[],hh=a.ZP.extend({name:"SignLaw",components:{TermDisplay:Q,UseTerm:j.Z},methods:{back(){this.$router.back()},confirm(){this.$router.replace({name:"ChooseType"})},gotoIndex(){this.$router.replace({name:"index"})}}}),mh=hh,gh=(0,h.Z)(mh,ph,uh,!1,null,"21789810",null),vh=gh.exports,fh=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-should-know-wrap"},[t("term-display",{attrs:{title:"请阅读注册须知"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"section"},[t("p",[e._v("一、现阶段本功能仅向中国大陆境内的，且满足下列任一条件的用户开放：")]),t("p",[e._v("1. 成功开通并完成企业认证的公众号用户；")]),t("p",[e._v("2. 成功开通且关注人数达100人的公众号个人用户；")]),t("p",[e._v("3. 成功开通且满足下列任一条件的视频号个人用户：")]),t("p",[e._v("1）视频号关注人数达100人；2）视频号绑定的微信表情平台账号专辑下载量达500次。")]),t("br"),t("p",[e._v("当你使用微信公众账号、微信视频号账号使用本功能时，腾讯将使用你在微信公众平台、微信视频号的相关信息，并以此作为你在本功能平台的身份信息。")]),t("p",[e._v("如果你尚未通过微信公众平台、微信视频号达到前述条件的，需在相应条件完成后方可使用本功能。")])]),t("div",{staticClass:"section"},[e._v("二、现阶段本功能暂不对宗教、烟草、医疗、特殊医学用途配方食品、医疗器械、农药、兽药、保健食品及药品相关的主体开放。")]),t("div",{staticClass:"section"},[t("p",[e._v(" 三、本功能是一项付费、附条件、附有效期限的功能。你仅有在支付费用后，方可在指定期限（支付成功之日起六个月内）向微信最终用户发放你的微信红包封面，微信最终用户可在指定期限（领取成功之日起三个月内）使用你发放的微信红包封面。但微信最终用户使用其获得的红包封面是免费的，你不得向微信最终用户收取任何费用。 ")]),t("p",[e._v(" 本功能按你选择的微信红包封面的可发放个数收费（一个微信个人账号成功领取一次特定微信红包封面的，即计为发放1个，依此类推），计费标准为人民币1元/个，最少购买个数为1个（仅能购买整数个），最多购买个数为1000万个。 ")])]),t("div",{staticClass:"section"},[e._v(" 四、定制微信红包封面的，应遵守《“微信红包封面”定制功能使用条款》《“微信红包封面”设计规范》《“微信红包封面”素材规范》等。腾讯将对此进行一定的形式审核，但腾讯的该等审核不得视为对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。 ")]),t("div",{staticClass:"section"},[e._v(" 五、当你的微信红包封面因为违法或侵权等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此已支付的费用将无法退款。 ")])]},proxy:!0},{key:"bar",fn:function(){return[t("mp-button",{on:{click:e.cancel}},[e._v("取消")]),t("mp-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")])]},proxy:!0}])})],1)},yh=[],_h=a.ZP.extend({name:"SignShouldKnow",components:{TermDisplay:Q},methods:{cancel(){this.gotoIndex()},gotoIndex(){this.$router.replace({name:"index"})},next(){this.$router.push({name:"signLaw"})}}}),Ch=_h,bh=(0,h.Z)(Ch,fh,yh,!1,null,"522129a8",null),wh=bh.exports,Ih=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sign-success"},[t("SuccessResult",{attrs:{title:"已注册",desc:"",confirmText:"去创建封面",showBizInfo:!1},on:{confirm:e.goToCoverList}})],1)},kh=[],Th=a.ZP.extend({name:"SignSuccess",components:{SuccessResult:g},methods:{goToCoverList(){this.$router.replace({name:"login"})},gotoIndex(){this.$router.replace({name:"index"})}}}),Sh=Th,xh=(0,h.Z)(Sh,Ih,kh,!1,null,"76eeee6c",null),Ah=xh.exports,Ph=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"admin-wrap"},[t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"",value:e.qrcodeDialog,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"qr-wrap",class:{showMask:1==e.qrcodeIsOk}},[t("div",{staticClass:"qr-title"},[e._v(e._s(e.isSecondary?`管理员 ${e.nickname} 微信扫码确认后可修改`:`${e.qrcodeNickname} 微信扫码确认后可绑定`))]),t("div",{staticClass:"qr-code-wrap"},[t("img",{staticClass:"qrq",attrs:{src:"https://res.wx.qq.com/t/fed_upload/b7d329b5-c8e2-434c-b0d5-cb3b52809c30/1.png"}}),e.qrcode?t("img",{staticClass:"qr-code-img",attrs:{src:e.qrcode}}):e._e(),t("div",{staticClass:"mask"},[t("mp-icon",{attrs:{icon:"checkmark_circle_filled",color:"#07c160",width:48,height:48}})],1)]),t("p",{staticClass:"qr-tips"},[e._v("二维码有效期为12小时")]),e.ie?e._e():t("a",{staticClass:"qr-download",on:{click:e.canvasDownload}},[e._v("下载二维码")])])])]),t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"绑定运营者",value:e.showDialog,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{ref:"dialog",staticClass:"dialog-body"},[t("div",{staticClass:"dialog-title"},[e._v("请输入需要绑定的微信号")]),t("mp-input",{attrs:{placeholder:"请输入微信号"},scopedSlots:e._u([{key:"append",fn:function(){return[t("div",{staticClass:"search-icon-wrap",on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[t("div",{staticClass:"search-icon-wrap-w"},[t("svg-icon",{staticClass:"search-icon",attrs:{name:"search"}}),t("span",[e._v("搜索")])],1)])]},proxy:!0}]),model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),t("div",{staticClass:"search-result-wrap-w"},[e.operation?t("div",{staticClass:"search-result-wrap"},[-2==e.showError?t("div",{staticClass:"error-tip tc"},[t("p",{staticClass:"error"},[e._v("无法绑定该微信号，请确认是否属于以下情况：")]),t("p",{staticClass:"error"},[e._v("该微信号不存在")])]):e._e(),1==e.showError?t("div",{staticClass:"error-tip"},[t("span",{staticClass:"error"},[e._v("不可重复邀请运营者")])]):e._e(),2==e.showError?t("div",{staticClass:"error-tip"},[t("span",{staticClass:"error"},[e._v("该用户未关注「微信红包封面」公众号")])]):e._e(),0==e.showError?t("div",{staticClass:"result"},[t("img",{staticClass:"avatar",attrs:{src:e.info.headImgUrl?e.info.headImgUrl:e.avatar}}),t("div",{staticClass:"name"},[e._v(e._s(e.info.nickname))])]):e._e()]):t("div",{staticClass:"dialog-search-tips"},[e._v("输入微信号后，回车可以搜索")])]),e.info.nickname||e.token?t("div",{staticClass:"dialog-footer"},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:""==e.token||e.submitDisabled},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("添加")])],1):e._e()],1)]),e.isPageReady?[t("div",{staticClass:"main-card-title"},[e._v("成员管理")]),t("div",{staticClass:"main-card admin-title-wrap"},[t("div",{staticClass:"title font-medium"},[e._v("管理员信息")]),t("div",{staticClass:"admin-nick"},[e._v("微信昵称 "+e._s(e.nickname))])]),t("div",{staticClass:"main-card",staticStyle:{"margin-top":"20px"}},[t("div",{staticClass:"title"},[t("span",{staticClass:"font-medium"},[e._v("运营者管理")]),1!=e.isSecondary?t("mp-button",{staticClass:"button",attrs:{type:"primary",disabled:e.administratorList.length>4},on:{click:e.goToMakeAdmin}},[e._v(" 绑定运营者 ")]):e._e()],1),t("p",{staticClass:"bindStatus-desc2"},[e._v("运营者可购买封面、申诉、退款，如需其他操作可进行申请。")]),t("a-table",{staticClass:"admin-table",attrs:{columns:e.columns,dataSource:e.administratorList,pagination:!1,locale:{emptyText:"暂无运营者"}},scopedSlots:e._u([{key:"flag",fn:function(i,a){return[t("div",{staticClass:"detail-flag"},[0==a.pendingPermission?[0==a.flag?t("div",{staticClass:"f"},[e._v("无")]):e._e(),1&a.flag?t("div",{staticClass:"flag-c"},[e._v("发放封面")]):e._e(),2&a.flag?t("div",{staticClass:"flag-c"},[e._v("回收封面")]):e._e(),4&a.flag?t("div",{staticClass:"flag-c"},[e._v("下载发放材料")]):e._e(),8&a.flag?t("div",{staticClass:"flag-c"},[e._v("编辑封面")]):e._e(),16&a.flag?t("div",{staticClass:"flag-c"},[e._v("生成和使用封面兑换卡")]):e._e()]:[t("div",{staticClass:"f"},[t("span",[e._v("权限待确认")]),t("mp-popover",{attrs:{trigger:"hover"},scopedSlots:e._u([{key:"target",fn:function(){return[t("mp-icon",{staticClass:"ml-1",staticStyle:{position:"relative",top:"3px"},attrs:{icon:"info_circle_regular",width:16,height:16,color:"#bbb"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"flag-pop"},[t("div",{staticClass:"wait-title"},[e._v("当前权限")]),t("div",{staticClass:"flag-wrap"},[1&a.flag?t("div",{staticClass:"flag-c"},[e._v("发放封面")]):e._e(),2&a.flag?t("div",{staticClass:"flag-c"},[e._v("回收封面")]):e._e(),4&a.flag?t("div",{staticClass:"flag-c"},[e._v("下载发放材料")]):e._e(),8&a.flag?t("div",{staticClass:"flag-c"},[e._v("编辑封面")]):e._e(),16&a.flag?t("div",{staticClass:"flag-c"},[e._v("生成和使用封面兑换卡")]):e._e()]),t("div",{staticClass:"wait-title"},[e._v("待确认权限")]),t("div",{staticClass:"flag-wrap2"},[(1&a.flag)!=(1&a.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("发放封面")]),t("span",{class:1&a.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(2&a.flag)!=(2&a.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("回收封面")]),t("span",{class:2&a.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(4&a.flag)!=(4&a.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("下载发放材料")]),t("span",{class:4&a.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(8&a.flag)!=(8&a.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("编辑封面")]),t("span",{class:8&a.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e(),(16&a.flag)!=(16&a.pendingPermissionFlag)?t("div",{staticClass:"flex-c-c"},[t("span",{staticClass:"flex__item"},[e._v("生成和使用封面兑换卡")]),t("span",{class:8&a.pendingPermissionFlag?"wait-open":"wait-close"})]):e._e()])])]},proxy:!0}],null,!0)})],1)]],2)]}},{key:"bindStatus",fn:function(i,a){return[t("div",{staticClass:"detail-bindStatus"},[t("div",{staticClass:"c"},[e._v(e._s(0==a.bindStatus?"待确认":"已绑定"))])])]}},{key:"createTime",fn:function(i,a){return[t("div",{staticClass:"detail-bindStatus"},[t("div",{staticClass:"c"},[e._v(e._s(e.timeToDate(a.createTime)))])])]}},{key:"action",fn:function(i,a){return[t("div",{staticClass:"detail"},[a.bindQrcode&&0==e.isSecondary?t("a",{staticStyle:{"padding-right":"16px"},on:{click:function(t){return e.openQrcode(a)}}},[e._v("查看邀请码")]):e._e(),a.subId!=e.subId&&1==e.isSecondary?[0==a.bindStatus?t("a",{staticClass:"gray"},[e._v("撤销邀请")]):e._e()]:[0==a.bindStatus?t("a",{on:{click:function(t){return e.editAction(a)}}},[e._v("撤销邀请")]):e._e(),0==a.bindStatus&&e.actionEdit==a.subId?t("mp-popover",{attrs:{trigger:"manual",width:280},model:{value:e.actionVisible,callback:function(t){e.actionVisible=t},expression:"actionVisible"}},[t("div",{staticClass:"tc"},[e._v("撤销 "+e._s(a.nickname)+" 的运营者邀请？")]),t("div",{staticClass:"detail-button-wrap"},[t("mp-button",{staticClass:"detail-button",attrs:{type:"default"},on:{click:e.closeAction}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button",attrs:{type:"primary"},on:{click:function(t){return e.cancelAdmin(a)}}},[e._v("撤销")])],1)]):e._e()],1==e.isSecondary?[t("mp-popover",{attrs:{trigger:"hover",width:"190"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"content"},[e._v("运营者无解除绑定权限")])]},proxy:!0},{key:"target",fn:function(){return[1==a.bindStatus?t("a",{staticClass:"gray"},[e._v("解除绑定")]):e._e()]},proxy:!0}],null,!0)})]:[1==a.bindStatus?t("a",{on:{click:function(t){return e.editAction(a)}}},[e._v("解除绑定")]):e._e(),1==a.bindStatus&&e.actionEdit==a.subId?t("mp-popover",{attrs:{trigger:"manual",width:280},model:{value:e.actionVisible,callback:function(t){e.actionVisible=t},expression:"actionVisible"}},[t("div",{staticClass:"tc"},[e._v("解除 "+e._s(a.nickname)+" 的运营者身份？")]),t("div",{staticClass:"detail-button-wrap"},[t("mp-button",{staticClass:"detail-button",attrs:{type:"default"},on:{click:e.closeAction}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button",attrs:{type:"primary"},on:{click:function(t){return e.cancelAdmin(a)}}},[e._v("解除")])],1)]):e._e()],t("div",[a.subId==e.subId&&1==e.isSecondary&&1==a.pendingPermission?[t("a",{staticStyle:{"margin-right":"16px"},on:{click:function(t){return e.openQrcode(a)}}},[e._v("查看申请码")]),t("a",{on:{click:function(t){return e.cancelInt(a)}}},[e._v("撤销申请")])]:a.subId!=e.subId&&1==e.isSecondary||0==a.bindStatus?[t("a",{staticClass:"gray"},[e._v("编辑")])]:[t("a",{on:{click:function(t){return e.editAdmin(a)}}},[e._v("编辑")])]],2)],2)]}}],null,!1,2116592223)})],1)]:[e._m(0)],t("mp-dialog",{staticClass:"edit-dialog",attrs:{title:"运营者权限",value:e.bindStatusVisible,closable:!0,width:645},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[e.choiceEdit.subId==e.subId&&1==e.isSecondary?t("div",{staticClass:"dialog-footer2"},[t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"default"},on:{click:e.closeDialogReport}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"primary",disabled:((e.editValue1?1:0)|(e.editValue2?2:0)|(e.editValue3?4:0)|(e.editValue4?8:0)|(e.editValue5?16:0))==e.oldFlag||e.submitDisabled},on:{click:function(t){return e.editOpConfirm()}}},[e._v(" 申请修改 ")])],1):t("div",{staticClass:"dialog-footer2"},[t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"default"},on:{click:e.closeDialog}},[e._v("取消")]),t("mp-button",{staticClass:"detail-button cancel-btn",attrs:{type:"primary",disabled:((e.editValue1?1:0)|(e.editValue2?2:0)|(e.editValue3?4:0)|(e.editValue4?8:0)|(e.editValue5?16:0))==e.oldFlag||e.submitDisabled},on:{click:function(t){return e.editAdminConfirm()}}},[e._v(" 修改 ")])],1)]},proxy:!0}])},[1==e.bindStatusStep?t("div",{staticClass:"dialog-body2"},[t("p",{staticClass:"bindStatus-desc"},[e._v("运营者可购买封面、申诉、退款。如需其他权限，可在下方选择")]),t("div",{staticClass:"choiceTips"},[t("span",[e._v("编辑")]),t("span",[e._v(e._s(e.choiceEdit.nickname))]),t("span",[e._v("的权限：")]),t("div",{staticClass:"checkbox-box"},[t("mp-checkbox",{on:{input:t=>e.editValueClick(t)},model:{value:e.editValue1,callback:function(t){e.editValue1=t},expression:"editValue1"}},[e._v("发放封面")]),t("mp-checkbox",{on:{input:t=>e.editValueClick(t)},model:{value:e.editValue2,callback:function(t){e.editValue2=t},expression:"editValue2"}},[e._v("回收封面")]),t("mp-checkbox",{on:{input:t=>e.editValueClick(t)},model:{value:e.editValue3,callback:function(t){e.editValue3=t},expression:"editValue3"}},[e._v("下载发放材料")]),t("mp-checkbox",{on:{input:t=>e.editValueClick(t)},model:{value:e.editValue4,callback:function(t){e.editValue4=t},expression:"editValue4"}},[e._v("编辑封面")]),t("mp-checkbox",{on:{input:t=>e.editValueClick(t)},model:{value:e.editValue5,callback:function(t){e.editValue5=t},expression:"editValue5"}},[e._v("生成和使用封面兑换卡")]),t("mp-checkbox",{staticClass:"detail-button-all",on:{input:t=>e.editAllValueClick(t)},model:{value:e.editValue,callback:function(t){e.editValue=t},expression:"editValue"}},[e._v("全选")])],1)])]):e._e()]),t("mp-dialog",{staticClass:"search-dialog",attrs:{title:"申请权限",value:e.showResultDialog,closable:!0,width:675},on:{close:e.closeDialog}},[t("div",{staticClass:"dialog-message-body"},[t("div",{staticClass:"error-icon"}),t("div",{staticClass:"weui-msg__title"},[e._v("无法发送权限申请")]),t("div",{staticClass:"weui-msg__desc"},[t("p",[e._v("管理员 "+e._s(e.nickname)+" 未关注「微信红包封面」公众号，请联系管理员关注后再次尝试")])])])]),t("canvas",{attrs:{id:"canvas"}})],2)},Dh=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],Uh=i(65502),Eh=i.n(Uh);const Rh=i(90520);var Mh=a.ZP.extend({name:"Administrator",data(){return{showDialog:!1,isPageReady:!1,token:"",editValue:!1,editValue1:!1,editValue2:!1,editValue3:!1,editValue4:!1,editValue5:!1,bindStatusStep:1,qrcodeIsOk:!1,bindStatusVisible:!1,actionVisible:!1,bindStatusText:"",avatar:i(94736),nickname:"",qrcode:"",qrcodeNickname:"",columns:[{dataIndex:"nickname",key:"nickname",title:"微信昵称"},{dataIndex:"flag",key:"flag",title:"当前权限",scopedSlots:{customRender:"flag"}},{dataIndex:"createTime",key:"createTime",title:"授权时间",scopedSlots:{customRender:"createTime"}},{dataIndex:"bindStatus",key:"bindStatus",title:"绑定状态",scopedSlots:{customRender:"bindStatus"}},{title:"操作",key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}],qrcodeDialog:!1,dialogWait:!1,administratorList:[],administrator:"",query:"",showError:0,info:{},operation:!1,actionEdit:"",isSecondary:0,subId:"",choiceEdit:{},showResultDialog:!1,showDialogInfo:!0,oldFlag:0,accountNickname:"",cSubId:"",cFlag:"",checkInterval:0,ie:!1,submitDisabled:!1}},components:{},destroyed(){clearInterval(this.checkInterval),document.onkeydown=()=>{}},async mounted(){const e=this;await e.fetchData(),this.checkInterval=window.setInterval((()=>{e.fetchData()}),3e3);var t=navigator.userAgent;(t.indexOf("MSIE")>-1||t.indexOf("Edge")>-1)&&(this.ie=!0),e.isPageReady=!0,this.isSecondary=d.U6.user.isSecondary,this.accountNickname=d.U6.user.accountNickname,this.subId=d.U6.user.subId,document.onkeydown=t=>{var i="undefined"!=typeof event?window.event:t;if(i&&13==i.keyCode&&e.showDialog)return t.preventDefault(),t.stopPropagation(),e.search(),!1}},filters:{},methods:{timeToDate(e){return Rh("yyyy年MM月dd日",new Date(1e3*e))},async fetchData(){const e=this,t=await(new l.ZP).adminList();t&&0===t.baseResponse.ret&&(e.administratorList=t.secondaryManagerList||[],this.nickname=t.primaryManagerNickname,e.isPageReady=!0,""!=e.cSubId&&e.administratorList.forEach((t=>{t.subId==e.cSubId&&(0==e.isSecondary&&1==t.bindStatus||1==e.isSecondary&&0==t.pendingPermission&&e.cFlag!=t.cFlag)?(e.cSubId="",e.qrcodeIsOk=!0,window.setTimeout((()=>{e.closeDialog()}),4e3)):t.subId==e.cSubId&&1==e.isSecondary&&0==t.pendingPermission&&e.cFlag==t.cFlag&&(e.cSubId="")})))},handleToDetail(){},editValueClick(e){1==this.editValue1&&1==this.editValue2&&1==this.editValue3&&1==this.editValue4&&1==this.editValue5?this.editValue=!0:this.editValue=!1},editAllValueClick(e){1==e?(this.editValue1=!0,this.editValue2=!0,this.editValue3=!0,this.editValue4=!0,this.editValue5=!0):(this.editValue1=!1,this.editValue2=!1,this.editValue3=!1,this.editValue4=!1,this.editValue5=!1)},async submit(){const e=this;this.submitDisabled=!0;const t=await(new l.ZP).addAdminWechat(e.query,e.token);t&&0===t.baseResponse.ret&&(e.fetchData(),e.qrcode=t.qrcode,e.cSubId=t.subId,e.qrcodeNickname=e.info.nickname,e.showDialog=!1,e.qrcodeDialog=!0,e.submitDisabled=!1)},async search(){const e=this,t=await(new l.ZP).adminSearchWechat(e.query);e.operation=!0,t&&0===t.baseResponse.ret?(e.info.nickname=t.nickname,e.info.headImgUrl=t.headImgUrl,e.token=t.token,e.showError=0):t&&-2===t.baseResponse.ret?e.errorTip("该微信号未关注公众号"):e.showError=t.baseResponse.ret},async editAdminConfirm(){var e=this.choiceEdit;const t=this;this.submitDisabled=!0;var i=0|(this.editValue1?1:0)|(this.editValue2?2:0)|(this.editValue3?4:0)|(this.editValue4?8:0)|(this.editValue5?16:0);await(new l.ZP).UpdateSecondary(e.subId,e.flag,i);t.$tipsSuc("权限已修改"),window.setTimeout((()=>t.$tipsHide()),3e3),window.setTimeout((()=>{this.submitDisabled=!1}),300),this.fetchData(),this.closeBindStatus()},async editOpConfirm(){const e=this;var t=this.choiceEdit;this.submitDisabled=!0;var i=0|(this.editValue1?1:0)|(this.editValue2?2:0)|(this.editValue3?4:0)|(this.editValue4?8:0)|(this.editValue5?16:0);const a=await(new l.ZP).UpdateSecondary(t.subId,t.flag,i);this.submitDisabled=!0,a&&0===a.baseResponse.ret?(e.qrcode=a.qrcode,e.qrcodeDialog=!0,e.qrcodeNickname=t.nickname,e.cSubId=t.subId,e.cFlag=a.flag):a&&2===a.baseResponse.ret&&(e.showResultDialog=!0),window.setTimeout((()=>{this.submitDisabled=!1}),300),window.setTimeout((()=>e.$tipsHide()),3e3),this.fetchData(),this.closeBindStatus()},async cancelAdmin(e){const t=this;if(0==e.bindStatus){const i=await(new l.ZP).recallAdmin(e.subId);i&&0===i.baseResponse.ret&&(t.fetchData(),t.$tipsSuc("已撤销运营者邀请"),t.closeAction(),window.setTimeout((()=>t.$tipsHide()),3e3))}else{const i=await(new l.ZP).removeAdmin(e.subId);i&&0===i.baseResponse.ret&&(t.fetchData(),t.$tipsSuc("已撤销运营者"),t.closeAction(),window.setTimeout((()=>t.$tipsHide()),3e3))}},editAction(e){this.actionVisible=!0,this.actionEdit=e.subId,(new $.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:9,authorId:d.U6.user.authorId,SubId:e.subId})},editAdmin(e){1==this.isSecondary&&(new $.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:11,authorId:d.U6.user.authorId,SubId:e.subId}),this.choiceEdit=e,this.actionEdit=e.subId,this.oldFlag=e.flag,1&e.flag?this.editValue1=!0:this.editValue1=!1,2&e.flag?this.editValue2=!0:this.editValue2=!1,4&e.flag?this.editValue3=!0:this.editValue3=!1,8&e.flag?this.editValue4=!0:this.editValue4=!1,16&e.flag?this.editValue5=!0:this.editValue5=!1,1==this.editValue1&&1==this.editValue2&&1==this.editValue3&&1==this.editValue4&&1==this.editValue5?this.editValue=!0:this.editValue=!1,this.bindStatusVisible=!0},closeDialog(){const e=this;e.token="",e.qrcodeDialog=!1,e.query="",e.dialogWait=!1,e.operation=!1,e.showDialog=!1,e.showResultDialog=!1,e.bindStatusVisible=!1,e.bindStatusStep=1,e.qrcodeIsOk=!1,e.editValue=!1,e.submitDisabled=!1,e.info={}},closeDialogReport(){this.bindStatusVisible=!1;var e=this.choiceEdit;(new $.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:12,authorId:d.U6.user.authorId,SubId:e.subId})},goToMakeAdmin(){const e=this;e.showDialog=!0,(new $.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:1,authorId:d.U6.user.authorId,SubId:""})},closeBindStatus(){this.bindStatusVisible=!1,this.bindStatusStep=1},closeAction(){this.actionVisible=!1},openQrcode(e){this.showDialog=!1,this.qrcodeDialog=!0,this.qrcodeNickname=e.nickname,this.qrcode=e.bindQrcode||e.pendingPermissionQrcode,(new $.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:6,authorId:d.U6.user.authorId,SubId:e.subId})},async cancelInt(e){const t=this,i=await(new l.ZP).recallOperate(e.subId);i&&0===i.baseResponse.ret?(t.fetchData(),t.$tipsSuc("已撤销申请"),window.setTimeout((()=>t.$tipsHide()),3e3)):this.errorTip("撤销出错，请联系客服")},canvasDownload(){function e(e){var t=document.getElementById("canvas"),i=t.getContext("2d");i.font="21px";var a=i.measureText(e).width;return 2*a}(new $.ZP).baseActionReportAdmin({UserType:this.isSecondary+1,ActionType:5,authorId:d.U6.user.authorId,SubId:this.cSubId});var t={src:"https://res.wx.qq.com/t/fed_upload/7edbb40a-b1e1-4e9f-a826-f5359ed2c86e/icon.png",x:220,y:277,width:60,height:60},i={src:this.qrcode,x:150,y:207,width:200,height:200},a=new(Eh())("canvas",{width:500,height:540});a.addDrawImageTask([i,t]);var s=this.accountNickname.length>7?this.accountNickname.substring(0,7)+"...":this.accountNickname,r=d.U6.user.loginNickname.length>4?d.U6.user.loginNickname.substring(0,4)+"...":d.U6.user.loginNickname;this.isSecondary?a.addDrawTextTask([{text:r+"申请修改在红包封面平台",fontSize:20,width:e(r+"申请修改在红包封面平台"),y:68,x:(500-e(r+"申请修改在红包封面平台"))/2},{text:`账号「${s}」的权限`,fontSize:20,width:e(`账号「${s}」的权限`),y:98,x:(500-e(`账号「${s}」的权限`))/2},{text:"扫一扫二维码通过申请，有效期为12小时",fontSize:17,color:"rgba(0,0,0,0.5)",width:312,y:426,x:94}]):a.addDrawTextTask([{text:"邀请你成为红包封面平台",fontSize:20,width:e("邀请你成为红包封面平台"),y:68,x:(500-e("邀请你成为红包封面平台"))/2},{text:`账号「${s}」的运营者`,fontSize:20,width:e(`账号「${s}」的运营者`),y:98,x:(500-e(`账号「${s}」的运营者`))/2},{text:"扫一扫二维码接受邀请，有效期为12小时",fontSize:17,color:"rgba(0,0,0,0.5)",width:312,y:426,x:94}]),a.draw((()=>{a.saveToPng("qrcode")}))}}}),Lh=Mh,Nh=(0,h.Z)(Lh,Ph,Dh,!1,null,"83498482",null),Fh=Nh.exports,Oh=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"exchange-wrap"},[t("mp-dialog",{staticClass:"exchange-dialog",attrs:{title:e.stepTitle,value:e.useDialog,closable:!0,width:675},on:{close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[1==e.exchangeUseStep?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("取消")]),t("mp-button",{attrs:{type:"primary",disabled:!e.choiceExchange.orderId},on:{click:function(t){return t.preventDefault(),e.step(2)}}},[e._v("下一步")])],1)],1):e._e(),2==e.exchangeUseStep?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{staticClass:"cancel-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.step(1)}}},[e._v("上一步")]),t("mp-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.step(3)}}},[e._v("兑换")])],1)],1):e._e(),e.showSuccess?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{on:{click:function(t){return t.preventDefault(),e.toUse.apply(null,arguments)}}},[e._v("去发放")])],1)],1):e._e(),e.showError?t("div",{staticClass:"dialog-footer"},[t("a-row",{attrs:{type:"flex",justify:"center"}},[t("mp-button",{on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}},[e._v("我知道了")])],1)],1):e._e()]},proxy:!0}])},[1==e.exchangeUseStep?t("div",{staticClass:"dialog-body"},[e.isQuotaGift?t("div",{staticClass:"dialog-tips"},[e._v(" 可兑换成下面样式的封面继续发放，其中未审核通过、封面名称非视频号名称、封面故事跳转非同主体账号的封面不展示 ")]):t("div",{staticClass:"dialog-tips"},[e._v("可兑换成下面样式的封面继续发放，其中未审核通过的封面不展示")]),e.exchangeList.length?t("div",{staticClass:"exchange-list"},[t("mp-radio-group",{model:{value:e.selectingExchangeList,callback:function(t){e.selectingExchangeList=t},expression:"selectingExchangeList"}},e._l(e.exchangeList,(function(i){return t("label",{key:i,staticClass:"exchange-item",class:{active:!i.disableUsage&&e.choiceExchange.orderId==i.orderId,disable:i.disableUsage},on:{click:function(t){return e.choiceExchangeClick(i)}}},[t("mp-radio",{attrs:{value:i.orderId,disabled:i.disableUsage}}),t("CoverReceiveImg",{staticClass:"exchange-item-img",attrs:{src:i.packetMaterial.receiveImage.mediaUrl,"widget-cover-src":i.packetMaterial.syntheticWidgetImage&&i.packetMaterial.syntheticWidgetImage.mediaUrl}}),t("div",{staticClass:"exchange-item-right"},[t("div",{staticClass:"exchange-item-title"},[e._v(e._s(i.packetName))]),t("div",{staticClass:"exchange-item-time"},[e._v("最后操作时间："+e._s(e.toDate(i.updateTime)))])])],1)})),0)],1):e.dataLoading?t("div",{staticClass:"dialog-loading"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})]):t("div",{staticClass:"empty-list"},[e._v("无可兑换封面")])]):e._e(),2==e.exchangeUseStep?t("div",{staticClass:"dialog-body"},[e.isOnlyUseAll?t("div",{staticClass:"dialog-tips"},[e._v("平台奖励的封面兑换卡仅支持一次性兑换，兑换后的封面不可再次转为封面兑换卡")]):t("div",{staticClass:"dialog-tips"},[e._v("发放有效期至"+e._s(e.toDate(e.useQuotaObject.expiredTime))+"，兑换后的封面不可再次转为封面兑换卡")]),t("div",{staticClass:"dialog-exchange-wrap"},[e.isOnlyUseAll?e._e():[t("input",{directives:[{name:"model",rawName:"v-model",value:e.exchangeInput,expression:"exchangeInput"}],staticClass:"exchange-input",attrs:{placeholder:"输入兑换个数",max:e.useQuotaObject.totalCount-e.useQuotaObject.usedCount,disabled:e.isOnlyUseAll},domProps:{value:e.exchangeInput},on:{focus:e.inputBlur,input:function(t){t.target.composing||(e.exchangeInput=t.target.value)}}}),t("div",{staticClass:"dialog-input-gz"},[t("span",{staticClass:"dialog-exchange-number"},[e._v("可兑换封面 "+e._s(e.useQuotaObject.totalCount-e.useQuotaObject.usedCount)+" 个")]),t("span",{staticClass:"dialog-button-all",on:{click:e.allExchange}},[e._v("全部兑换")])]),e.numberErrorTips?t("div",{staticClass:"number-error-tips"},[e._v(e._s(e.numberErrorTips))]):e._e()],e.isOnlyUseAll?[t("div",{staticClass:"exchange-num-desc"},[e._v("兑换数量："+e._s(e.useQuotaObject.totalCount))]),t("div",{staticClass:"dialog-input-gz-tips"},[e._v("发放有效期至"+e._s(e.toDate(e.useQuotaObject.expiredTime)))])]:e._e()],2)]):e._e(),e.showSuccess?t("div",{staticClass:"dialog-body tc"},[t("svg-icon",{staticClass:"success-icon",attrs:{name:"success"}}),t("div",{staticClass:"weui-msg__title"},[e._v("已兑换")]),t("div",{staticClass:"weui-msg-preview"},[t("div",{staticClass:"weui-msg-preview__item"},[t("div",{staticClass:"weui-msg-preview__label"},[e._v("兑换数量")]),t("div",{staticClass:"weui-msg-preview__value"},[e._v(e._s(e.exchangeInput))])]),t("div",{staticClass:"weui-msg-preview__item"},[t("div",{staticClass:"weui-msg-preview__label"},[e._v("发放有效期")]),t("div",{staticClass:"weui-msg-preview__value"},[e._v("至"+e._s(e.toDate(e.useQuotaObject.expiredTime)))])]),t("div",{staticClass:"weui-msg-preview__item"},[t("div",{staticClass:"weui-msg-preview__label"},[e._v("操作")]),t("a",{staticClass:"weui-msg-preview__value preicew-link",attrs:{href:"javascript:;"},on:{click:e.remainExchange}},[e._v("查看记录")])])])],1):e._e(),e.showError?t("div",{staticClass:"dialog-body exchange-error-wrapper"},[t("svg-icon",{staticClass:"warn-icon",attrs:{name:"warn"}}),t("div",{staticClass:"error-title"},[e._v("兑换卡已失效")]),t("div",{staticClass:"error-desc"},[e._v("封面奖励已在手机端「制作我的红包封面」活动中使用")])],1):e._e()]),t("div",{staticClass:"main-card-title",on:{click:function(t){return e.toRouter()}}},[e._v(" 封面兑换卡 "),t("div",{staticClass:"main-card-title-tips"},[e._v("未发完的封面可通过封面兑换卡，兑换成其他样式的封面继续发放。兑换后的封面不可再次转为封面兑换卡。")])]),e.isPageReady?[1!=e.isDetail?t("div",{staticClass:"main-card"},[t("a-table",{staticClass:"exchange-table",attrs:{columns:e.columns,dataSource:e.dataRealList,"row-key":"quotaId",pagination:!1,locale:{emptyText:"暂无封面兑换卡"}},scopedSlots:e._u([{key:"type",fn:function(i,a){return[t("div",[t("span",[e._v(e._s(0===i?"封面回收":a.wording))]),a.quotaId.startsWith("spring2024")?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[a.quotaId.includes("biz")?t("span",[e._v("兑换的封面仅支持使用公众号图文消息「红包封面」组件发放")]):e._e(),a.quotaId.includes("emotion")?t("span",[e._v("兑换的封面仅支持在表情专辑中发放")]):e._e()])]},proxy:!0},{key:"target",fn:function(){return[t("icon-info",{staticClass:"exchange-type-infoicon"})]},proxy:!0}],null,!0)}):e._e(),a.quotaId.startsWith("autumn2023")?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{width:220,trigger:"hover"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("兑换的封面仅支持通过「封面专区」发放")])])]},proxy:!0},{key:"target",fn:function(){return[t("icon-info",{staticClass:"exchange-type-infoicon"})]},proxy:!0}],null,!0)}):e._e()],1)]}},{key:"totalCount",fn:function(i,a){return[t("span",[e._v(e._s(a.totalCount))])]}},{key:"expiredTime",fn:function(i,a){return[t("span",[e._v("至 "+e._s(e.toDate(a.expiredTime)))])]}},{key:"usedCount",fn:function(i,a){return[t("span",[e._v(e._s(a.totalCount-a.usedCount))])]}},{key:"action",fn:function(i,a){return[t("div",{staticClass:"detail"},[[!e.isCanEdit&&a.expiredTime>e.serverNowTime?t("mp-popover",{attrs:{position:"down-center",trigger:"click",width:340},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("span",[e._v("暂无生成和使用封面兑换卡权限，请前往")]),t("a",{on:{click:e.toadmin}},[e._v("成员管理")]),t("span",[e._v("申请权限")])])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticStyle:{"margin-right":"4px"},attrs:{type:"primary"}},[e._v("兑换封面")])]},proxy:!0}],null,!0)}):a.expiredTime-e.serverNowTime<=0?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{position:"down-center",trigger:"hover",width:145},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"color-bw-lv3 text-center"},[e._v("兑换卡已过期")])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticClass:"color-bw-lv3",staticStyle:{"margin-right":"8px"},attrs:{type:"primary"}},[e._v("兑换封面")])]},proxy:!0}],null,!0)}):1===a.type&&a.hasUsedInMiniapp?t("mp-popover",{staticClass:"exchange-type-popover",attrs:{position:"down-center",trigger:"hover",width:325},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"color-bw-lv3 text-center"},[e._v("奖励已在手机端「制作我的红包封面」活动中使用")])]},proxy:!0},{key:"target",fn:function(){return[t("a",{staticClass:"color-bw-lv3",staticStyle:{"margin-right":"4px"},attrs:{type:"primary"}},[e._v("兑换封面")])]},proxy:!0}],null,!0)}):a.expiredTime>e.serverNowTime&&e.isCanEdit&&a.usedCount<a.totalCount?t("a",{staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.useExchagne(a)}}},[e._v(" 兑换封面 ")]):e._e()],t("a",{on:{click:function(t){return e.toRouter(a.quotaId)}}},[e._v("详情")])],2)]}}],null,!1,4274535370)}),t("a-row",{attrs:{type:"flex",justify:"center"}},[e.dataList.length>e.pageNum?t("mp-pagination",{staticClass:"pagination",attrs:{"per-page":e.pageNum,"total-num":e.dataList.length,current:e.curPage,mode:"normal"},on:{"page-change":e.pageChange}}):e._e()],1)],1):e._e()]:[e._m(0)],e.isDetail?t("div",{staticClass:"main-card"},[t("div",{staticClass:"detail-title"},[e._v("封面兑换卡详情")]),t("ul",{staticClass:"detail-message"},[t("li",[t("span",[e._v("生成时间：")]),t("span",{staticClass:"detail-num"},[e._v(e._s(e.toDate(e.detail.createTime)))])]),t("li",[t("span",[e._v("发放有效期：")]),t("span",{staticClass:"detail-num"},[e._v(e._s(e.toDate(e.detail.expiredTime)))])]),t("li",[t("span",[e._v("已兑换数量：")]),t("span",{staticClass:"detail-num"},[e._v(e._s(e.detail.usedCount))])])]),t("a-table",{staticClass:"exchange-detail-table",attrs:{columns:e.detailColumns,dataSource:e.detailDataRealList,pagination:!1,"row-key":"orderId",locale:{emptyText:"暂无记录"}},scopedSlots:e._u([{key:"timestamp",fn:function(i,a){return[t("span",[e._v(e._s(e.toDate2(a.timestamp)))])]}},{key:"usedCount",fn:function(i,a){return[t("span",[e._v(e._s(a.usedCount))])]}},{key:"detail",fn:function(i,a){return[t("div",{staticClass:"detail2",on:{click:function(t){return e.toDetail(a)}}},[t("CoverReceiveImg",{staticClass:"detail-list-img",attrs:{src:a.coverReceiveImg,"widget-cover-src":a.isWidgetPacket?a.coverReceiveImg:""}}),t("span",{staticClass:"detail-list-span"},[e._v(e._s(a.coverName))])],1)]}},{key:"toUse",fn:function(i,a){return[t("div",[t("a",{on:{click:function(t){return e.toUse(a)}}},[e._v("去发放")])])]}}],null,!1,748084339)})],1):e._e()],2)},Bh=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading-mask"},[t("span",{staticClass:"weui-loading weui-desktop-loading"})])}],qh=i(80903);const Qh=i(90520),{mapGetters:jh}=(0,fe._p)("user");var $h=a.ZP.extend({name:"Exchange",data(){return{detail:{},isDetail:!1,disabled:!1,stepTitle:"选择兑换的封面",dataList:[],dataRealList:[],detailDataRealList:[],exchangeList:[],useQuotaObject:{},choiceExchange:{},exchangeUseStep:1,curPage:1,pageNum:8,useDialog:!1,isPageReady:!1,transactionId:"",remain:0,numberErrorTips:"",exchangeInput:"",serverNowTime:"",isCanEdit:!0,showSuccess:!1,showError:!1,dataLoading:!1,selectingExchangeList:"",steps:[{label:"选择封面"},{label:"兑换封面"},{label:"发放封面"}],detailColumns:[{dataIndex:"timestamp",key:"timestamp",title:"兑换时间",scopedSlots:{customRender:"timestamp"}},{dataIndex:"usedCount",key:"usedCount",title:"已兑换数量",scopedSlots:{customRender:"usedCount"}},{dataIndex:"detail",key:"detail",title:"红包封面",scopedSlots:{customRender:"detail"}},{dataIndex:"toUse",key:"toUse",title:"操作",align:"right",scopedSlots:{customRender:"toUse"}}],columns:[{dataIndex:"totalCount",key:"totalCount",title:"兑换卡封面数量",width:228,scopedSlots:{customRender:"totalCount"}},{dataIndex:"expiredTime",key:"expiredTime",title:"发放有效期",width:228,scopedSlots:{customRender:"expiredTime"}},{dataIndex:"usedCount",key:"usedCount",title:"剩余可兑换封面数量",width:228,scopedSlots:{customRender:"usedCount"}},{dataIndex:"type",key:"type",title:"来源",width:228,scopedSlots:{customRender:"type"}},{title:"操作",width:228,key:"action",dataIndex:"action",align:"right",scopedSlots:{customRender:"action"}}]}},computed:{...jh(["showQuotaRedPoint"]),isQuotaGift(){return!!this.useQuotaObject?.quotaId?.startsWith("autumn2023")},isOnlyUseAll(){return 1===this.useQuotaObject?.type&&!this.useQuotaObject?.quotaId?.startsWith("autumn2023")}},components:{CoverReceiveImg:be.Z,IconInfo:qh.Z},destroyed(){},watch:{curPage(){const e=this,t=(e.curPage-1)*e.pageNum,i=t+e.pageNum;this.dataRealList=this.dataList.slice(t,i)},$route:{handler(e,t){const i=this;void 0==e.query.id?i.isDetail=!1:i.getDetail(e.query.id)},immediate:!0},exchangeUseStep(){1==this.exchangeUseStep?this.stepTitle="选择兑换的封面":2==this.exchangeUseStep?this.stepTitle="选择兑换数量":3==this.exchangeUseStep&&(this.stepTitle="")}},async mounted(){1!=d.U6.user.isSecondary||16&d.U6.user.managerFlag||(this.isCanEdit=!1),await this.getList(),this.showQuotaRedPoint&&await d.U6.getUserInfo()},filters:{},methods:{cancelPopover(){document.documentElement.click()},inputBlur(){this.numberErrorTips=""},toRouter(e){this.$router.push({name:"exchange",query:{id:e}})},toDetail(e){this.$router.push({name:"detail",query:{id:e.orderId}})},async step(e){if(2==e&&this.getList(),3==e){const e=this;e.disabled=!0;var t=parseFloat(this.exchangeInput),i=/(^[1-9]\d*$)/.test(t.toString());if(!i)return this.numberErrorTips="请输入正确的转换数量",void(e.disabled=!1);if(t>this.useQuotaObject.totalCount-this.useQuotaObject.usedCount)return this.numberErrorTips="超出最大转换数量",void(e.disabled=!1);this.numberErrorTips="";var a=await(new Tp).useQuota(this.useQuotaObject.quotaId,this.choiceExchange.orderId,parseInt(this.exchangeInput));if(e.disabled=!1,0===a?.baseResponse?.ret)this.transactionId=a.transactionId,this.getList(),this.showSuccess=!0;else{if(-20!==a?.baseResponse?.ret)return void this.errorTip("兑换错误，请稍后重试");this.showError=!0,this.getList()}}this.exchangeUseStep=e},toDate(e){return Qh("yyyy年MM月dd日",new Date(1e3*e))},toDate2(e){return Qh("yyyy年MM月dd日 hh:mm",new Date(1e3*e))},pageChange(e){this.curPage=e.currentPage},async getList(){var e=await(new Tp).getList();if(e&&0===e.baseResponse.ret){this.dataList=e.objectList||[],this.serverNowTime=e.serverNowTime,this.isPageReady=!0;const t=this,i=(t.curPage-1)*t.pageNum,a=i+t.pageNum;this.dataRealList=this.dataList.slice(i,a)}else this.errorTip("网络错误，请刷新重试")},async getDetail(e){var t=await(new Tp).getDetailList(e);t&&0===t.baseResponse.ret&&(this.detail=t.object,this.detailDataRealList=t.recordList,this.isDetail=!0)},async useExchagne(e){this.exchangeUseStep=1,this.useQuotaObject=e,this.exchangeInput=this.isOnlyUseAll?e.totalCount:"",this.dataLoading=!0,this.useDialog=!0,this.showSuccess=!1,this.showError=!1,this.exchangeList=[];const t=e.quotaId.startsWith("autumn2023");try{var i=await(new Tp).getCanUseOrderList();if(i&&0===i.baseResponse.ret){const e=await d.U6.getUserFinderInfo();return void(this.exchangeList=i.orderList.filter((i=>{if(!t)return!0;let a=i.packetName===e?.nickname;if(!a)return!1;const{actionAuthInfo:s}=i;if(s){const{action:e,status:t}=s;if((4===e?.actionType||2===e?.actionType)&&5!==t)return!1}return!0})))}}finally{this.dataLoading=!1}},choiceExchangeClick(e){this.choiceExchange=e},closeDialog(){this.choiceExchange={},this.useDialog=!1,this.numberErrorTips="",this.selectingExchangeList="",this.exchangeList=[]},allExchange(){this.exchangeInput=(this.useQuotaObject.totalCount-this.useQuotaObject.usedCount).toString()},remainExchange(){this.closeDialog(),this.$router.push({name:"exchange",query:{id:this.useQuotaObject.quotaId}})},toUse(e){this.$router.push({name:"order",query:{tid:e.transactionId||this.transactionId}})},toadmin(){this.$router.push({name:"administrator"})}}}),Zh=$h,Hh=(0,h.Z)(Zh,Oh,Bh,!1,null,"25ac471c",null),Gh=Hh.exports,Wh=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"case-wrap notranslate"},[t("div",{staticClass:"case-header-wrap"},[e._l(e.caseData.header,(function(i,a){return t("div",{key:a,ref:"background",refInFor:!0,staticClass:"case-header-background",style:e.headerIndex-1==a?"opacity:1;background-image:url("+i.background+")":"background-image:url("+i.background+")"})})),t("div",{ref:"move",staticClass:"case-header"},[t("div",{staticClass:"case-introduction-left",on:{click:function(t){return e.prev()}}}),e._l(e.caseData.header,(function(i,a){return t("div",{key:a,ref:"caseHeaderWrap",refInFor:!0,staticClass:"case-header-ani-wrap"},[t("div",{ref:"caseIntroduction",refInFor:!0,staticClass:"case-introduction",style:e.headerIndex-1==a?"display:block;opacity:1;":""},[t("div",{staticClass:"case-introduction-title"},[e._v(e._s(i.title))]),t("div",{staticClass:"case-introduction-desc"},[e._v(e._s(i.desc))]),t("div",{staticClass:"case-introduction-link",on:{click:function(t){return e.descOpen(a,"headerActive")}}},[e._v("了解创意")])]),t("div",{ref:"headerImage",refInFor:!0,class:[i.widgetCover?"case-introduction-title-img-widget":"case-introduction-title-img",{hb:!i.widget}],style:`${e.headerIndex-1==a?"opacity:1;":"display:none;"} background-image:url(${i.widgetCover?i.widgetCover:i.source})`,on:{click:function(t){return e.onTap(a)}}})])})),t("div",{staticClass:"case-introduction-right",on:{click:function(t){return e.next()}}})],2),t("div",{staticClass:"mask-shadow"}),t("img",{staticClass:"mask-img",attrs:{src:i(12963)}})],2),t("div",{staticClass:"case-nav-wrap-b"},[t("div",{staticClass:"case-nav-wrap"},[1===e.showNavBtn?t("svg-icon",{staticClass:"case-nav-btn left",attrs:{name:"case_arrow_left"},nativeOn:{click:function(t){return e.goNavEnd("left")}}}):2===e.showNavBtn?t("svg-icon",{staticClass:"case-nav-btn right",attrs:{name:"case_arrow_right"},nativeOn:{click:function(t){return e.goNavEnd("right")}}}):e._e(),t("div",{ref:"caseNav",staticClass:"case-nav"},[t("div",{staticClass:"case-item",class:e.activeNav-1==-1?"case-item_active":"",on:{click:function(t){return e.changeType("0")}}},[e._v("全部")]),e._l(e.caseData.nav,(function(i,a){return t("div",{key:a,staticClass:"case-item",class:e.activeNav-1==a?"case-item_active":"",on:{click:function(t){return e.changeType(a+1)}}},[e._v(" "+e._s(i)+" ")])}))],2),1===e.showNavBtn?t("div",{staticClass:"case-mask left"}):e._e(),t("div",{staticClass:"case-mask right"})],1),t("div",{staticClass:"type"})]),t("div",{staticClass:"case-demo-wrap"},e._l(e.bodyActive,(function(i,a){return t("div",{key:a,staticClass:"case-demo-item",on:{click:function(t){return e.descOpen(a,"bodyActive",t)}}},[i.widget?t("widget-cover-img",{staticClass:"case-demo-pic-widget hb",attrs:{"cover-url":i.source,"widget-url":i.widgetUrl,"default-cover":e.coverToolPics.default_widget_cover_openactive,lazy:""}}):t("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:i.source,expression:"content.source",arg:"background-image"}],staticClass:"case-demo-pic hb"}),t("div",{staticClass:"case-demo-name"},[e._v(e._s(i.title))])],1)})),0),t("div",{class:["case-dialog-wrap",e.dialogOepn?"dialog-show":"animation-wrap"]},[t("div",{staticClass:"case-dialog-bg-mask",on:{click:e.closeDailog}}),t("div",{staticClass:"case-dialog"},[t("div",{staticClass:"case-dialog-content-left"},[t("div",{ref:"dialogPreview",class:[{hb2:0===e.dialogPrviewIndex&&!e.dialogMessage.widget&&e.dialogOepn},e.dialogMessage.widget?"case-dialog-content-pic-widget":"case-dialog-content-pic"]},[e.dialogMessage.activeImg?[e.dialogMessage.widgetCover&&0===e.dialogPrviewIndex?t("img",{staticStyle:{height:"auto"},attrs:{src:e.dialogMessage.widgetCover}}):e.dialogMessage.widget&&0===e.dialogPrviewIndex?t("widget-cover-img",{attrs:{"cover-url":e.dialogMessage.activeImg,"widget-url":e.dialogMessage.widgetUrl}}):t("img",{staticStyle:{height:"auto"},attrs:{src:e.dialogMessage.activeImg}})]:e._e(),e.dialogMessage.activeVideo?t("video",{ref:"storyVideo",attrs:{src:e.dialogMessage.activeVideo,autoplay:"autoplay",muted:""},domProps:{muted:!0}}):e._e()],2),t("div",{staticClass:"case-dialog-content-pic-list"},e._l(e.dialogMessage.media,(function(i,a){return t("div",{key:a,class:a==e.dialogPrviewIndex?"case-dialog-content-pic-item case-dialog-content-pic-item_active":"case-dialog-content-pic-item",on:{click:function(t){return t.stopPropagation(),e.changeDialogPreviewIndex(a)}}},[e.dialogMessage.widget&&0===a?t("widget-cover-img",{attrs:{"cover-url":i,"widget-url":e.dialogMessage.widgetUrl}}):t("img",{attrs:{src:i.replace(".mp4"," preview.png")}})],1)})),0)]),t("div",{staticClass:"case-dialog-content-right"},[t("div",{staticClass:"case-dialog-title-wrap"},[e.dialogMessage.logo?t("div",{staticClass:"case-dialog-logo"},[t("img",{attrs:{src:e.dialogMessage.logo}})]):e._e(),t("div",{staticClass:"case-dialog-title"},[e._v(e._s(e.dialogMessage.title))])]),t("div",{staticClass:"case-dialog-tips"},e._l(e.dialogMessage.type,(function(i){return t("div",{key:i,staticClass:"case-dialog-tip"},[e._v(e._s(i))])})),0),t("div",{staticClass:"case-dialog-desc"},[e._v(e._s(e.dialogMessage.desc))]),t("div",{staticClass:"case-dialog-qr-wrap"},[t("div",{staticClass:"case-dialog-qr-tips"},[e._v("扫码欣赏")]),e.dialogMessage.qr?t("img",{staticClass:"case-dialog-qr",attrs:{src:e.dialogMessage.qr}}):e._e()])]),t("div",{staticClass:"case-dialog-left",on:{click:function(t){return t.stopPropagation(),e.changeDialogPreviewIndex(e.dialogPrviewIndex-1)}}}),t("div",{staticClass:"case-dialog-right",on:{click:function(t){return t.stopPropagation(),e.changeDialogPreviewIndex(e.dialogPrviewIndex+1)}}})]),t("div",{staticClass:"case-dialog-close",on:{click:e.closeDailog}})])])},zh=[],Vh=i(30523),Jh=i.n(Vh);Jh().polyfill();var Kh=a.ZP.extend({name:"Case",components:{WidgetCoverImg:$e.Z},data(){return{coverToolPics:Ge.is,positionX:0,positionY:0,dialogOepn:!1,caseData:{},initCaseData:Nl,baseUrl:ys.o0,headerBaseUrl:"https://weixinredpacket.wxqcloud.qq.com/redheader2022/",dialogMessage:{},activeNav:0,bodyActive:[],headerActive:[],dialogPrviewIndex:0,headerIndex:0,lock:!1,panIndex:0,headerLength:0,showNavBtn:2}},created(){window.document.oncontextmenu=()=>!1,this.caseData=JSON.parse(JSON.stringify(this.initCaseData)),this.caseData.header=this.caseData.header.reverse(),this.activeNav=0,this.bodyActive=[],this.headerActive=[],this.initData(),(0,Lt.H)("case_pageview")},computed:{},methods:{goNavEnd(e){const t=this.$refs["caseNav"];"left"===e&&(t.scroll({left:0,behavior:"smooth"}),this.showNavBtn=2),"right"===e&&(t.scroll({left:9999,behavior:"smooth"}),this.showNavBtn=1)},onTap(e){this.descOpen(e,"headerActive",void 0)},changeDialogPreviewIndex(e){var t=this,i=t.dialogMessage.media.length;e<0?e=i-1:e==i&&(e=0),t.dialogPrviewIndex=e,t.dialogMessage.media[e].indexOf(".jpg")>0||t.dialogMessage.media[e].indexOf(".png")>0?(t.dialogMessage.activeImg=t.dialogMessage.media[e],t.dialogMessage.activeVideo=""):(t.dialogMessage.activeImg="",t.dialogMessage.activeVideo=t.dialogMessage.media[e])},next(){if(!this.lock){this.lock=!0;var e=this.headerIndex-1,t=this.headerIndex-2;-1==t&&(e=0,t=this.headerLength-1);var i=this.$refs["headerImage"];i=i[e];var a=this.$refs["caseIntroduction"];a=a[e];var s=this.$refs["background"];s=s[e];var r=this.$refs["caseHeaderWrap"];r=r[e];var o=this.$refs["headerImage"];o=o[t];var n=this.$refs["caseIntroduction"];n=n[t];var c=this.$refs["background"];c=c[t];var l=this.$refs["caseHeaderWrap"];l=l[t],s.style=s.style.cssText+"display:block;opacity: 0;",c.style=c.style.cssText+"opacity: 1;",a.style=a.style.cssText+"opacity: 0;transform:translate3d(100px,0,0)",i.style=i.style.cssText+"opacity: 0;transform:translate3d(100px,0,0)",n.style=n.style.cssText+";transform:translate3d(-100px,0,0);",o.style=o.style.cssText+";transform:translate3d(-100px,0,0);",window.setTimeout((()=>{this.headerIndex=0==e?this.headerLength:this.headerIndex-1}),400),window.setTimeout((()=>{n.style=n.style.cssText+"display:block;",o.style=o.style.cssText+"display:block;",n.style=n.style.cssText+";transform:translate3d(0,0,0);opacity: 1;",o.style=o.style.cssText+";transform:translate3d(0,0,0);opacity: 1;",a.style=a.style.cssText+"display: none;",i.style=i.style.cssText+"display: none;"}),450),window.setTimeout((()=>{this.lock=!1}),500)}},prev(){if(!this.lock){this.lock=!0;var e=this.headerIndex-1,t=this.headerIndex;-1==e&&(e=this.headerLength-1,t=0),t==this.headerLength&&(t=0);var i=this.$refs["headerImage"];i=i[e];var a=this.$refs["caseIntroduction"];a=a[e];var s=this.$refs["background"];s=s[e];var r=this.$refs["caseHeaderWrap"];r=r[e];var o=this.$refs["headerImage"];o=o[t];var n=this.$refs["caseIntroduction"];n=n[t];var c=this.$refs["background"];c=c[t];var l=this.$refs["caseHeaderWrap"];l=l[t],a.style=a.style.cssText+"opacity: 0;transform:translate3d(-100px,0,0)",s.style=s.style.cssText+"display:block;opacity: 0;",c.style=c.style.cssText+"opacity: 1;",i.style=i.style.cssText+"opacity: 0;transform:translate3d(-100px,0,0)",n.style=n.style.cssText+";transform:translate3d(100px,0,0);",o.style=o.style.cssText+";transform:translate3d(100px,0,0);",window.setTimeout((()=>{this.headerIndex==this.headerLength?this.headerIndex=1:this.headerIndex=this.headerIndex+1}),400),window.setTimeout((()=>{a.style=a.style.cssText+"display: none;",i.style=i.style.cssText+"display: none;",n.style=n.style.cssText+"display:block;",o.style=o.style.cssText+"display:block;",n.style=n.style.cssText+";transform:translate3d(0,0,0);opacity: 1;",o.style=o.style.cssText+";transform:translate3d(0,0,0);opacity: 1;"}),450),window.setTimeout((()=>{this.lock=!1}),500)}},changeType(e){var t=this;t.activeNav=e,t.bodyActive=this.caseData.body[e]?.filter((e=>e.title&&!e.hidden))},initData(){var e=this;const t=(0,ye.q6)()?"?imageMogr2/format/webp":"";this.caseData.init||(e.headerLength=this.caseData.header.length,this.caseData.header.forEach(((i,a)=>{if(i["qr"]=this.baseUrl+"/"+i.media[0].substr(0,i.media[0].lastIndexOf("/"))+"/qr.png",i.logo&&(i["logo"]=this.baseUrl+"/"+i.logo),i["background"]=this.headerBaseUrl+(e.headerLength-a)+".jpg"+t,i.media.forEach(((e,a)=>{i.media[a]=this.baseUrl+e+t})),i["source"]=i.media[0]+t,i.widget){i.widgetUrl=`${this.baseUrl}/${i.widget}`;const e=i.widget.replace(/\d*\//g,"").replace(/\./,"_whole.");i.widgetCover=`${this.headerBaseUrl}/whole/20230327/v1/${e}`+t}}))),e.headerIndex=this.caseData.header.length,e.headerActive=this.caseData.header;var i=[];this.caseData.body&&(this.caseData.body.forEach(((e,t)=>{e.forEach(((e,a)=>{this.caseData.init||(e["qr"]=this.baseUrl+(t+1)+"/"+(a+1)+"/qr.png",e.logo&&(e["logo"]=this.baseUrl+(t+1)+"/"+(a+1)+"/"+e.logo),e.media.forEach(((i,s)=>{e.media[s]=this.baseUrl+(t+1)+"/"+(a+1)+"/"+i})),e["source"]=e.media[0],e.widget&&(e.widgetUrl=this.baseUrl+(t+1)+"/"+(a+1)+"/"+e.widget)),i.push(e)}))})),this.caseData.body.unshift(i),this.bodyActive=i?.filter((e=>e.title&&!e.hidden))),this.caseData.init=!0},descOpen(e,t,i){console.log(i);const a=this;a.dialogPrviewIndex=0,a.dialogMessage=a[t][e],a.dialogMessage.media[0].indexOf(".jpg")>0||a.dialogMessage.media[0].indexOf(".png")>0?(a.dialogMessage.activeImg=a.dialogMessage.media[0],a.dialogMessage.activeVideo=""):(a.dialogMessage.activeImg="",a.dialogMessage.activeVideo=a.dialogMessage.media[0]);var s=this.$refs["dialogPreview"],r=s.getBoundingClientRect(),o={},n=0,c=0;if("headerActive"==t){var l=this.$refs["headerImage"];l=l[this.headerIndex-1],i=l.getBoundingClientRect(),o=l.cloneNode(),o.className=""+(a.dialogMessage.widget?"case-demo-pic2-widget":"case-demo-pic2 hb2")}else o=i.target.cloneNode(),o.className="case-demo-pic2 hb2",n=i.offsetX,c=i.offsetY;var d=o.style.backgroundImage;document.body.appendChild(o),o.style=o.style+";left:"+(i.x-n)+"px; top:"+(i.y-c)+"px;position:fixed;z-index:999;background-image:"+d,o.className="animation-wrap "+(a.dialogMessage.widget?"case-demo-pic2-widget":"case-demo-pic2 hb2"),window.setTimeout((()=>{a.dialogMessage.widget?o.style="left:"+r.x+"px; top:"+r.y+"px;width:299px;height:514.518px;z-index:999;position:fixed;background-image:"+d:o.style="border-radius: 12px;left:"+r.x+"px; top:"+r.y+"px;width:300px;height:496.55px;z-index:999;position:fixed;background-image:"+d}),1),window.setTimeout((()=>{s.style=s.style.cssText+"opacity:0",a.dialogOepn=!0}),10),window.setTimeout((()=>{s.style=s.style.cssText+"opacity:1"}),500),window.setTimeout((()=>{document.body.removeChild(o)}),900)},closeDailog(){this.dialogMessage={},this.dialogOepn=!1}}}),Yh=Kh,Xh=(0,h.Z)(Yh,Wh,zh,!1,null,"07730139",null),em=Xh.exports,tm=function(){var e=this;e._self._c,e._self._setupProxy;return e._m(0)},im=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"contact-us"},[t("div",{staticClass:"main-card"},[t("div",{staticClass:"content"},[t("div",{staticClass:"left-part"},[t("div",{staticClass:"contact-title"},[e._v("联系我们")]),t("div",{staticClass:"contact-p"},[e._v("如果你有任何问题和商务合作，欢迎随时与我们联系！邮件可发送至：wxcover_partner@tencent.com")]),t("div",{staticClass:"contact-p"},[e._v("关注官方公众号，了解平台最新资讯，获知红包封面的审核和使用进度。")])]),t("div",{staticClass:"right-part"},[t("img",{staticClass:"qrcode",attrs:{src:i(23860)}})])])])])}],am=a.ZP.extend({name:"ContactUs"}),sm=am,rm=(0,h.Z)(sm,tm,im,!1,null,"428e839e",null),om=rm.exports,nm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"rule-doc-wrap"},[t("div",{staticClass:"main-card"},["complain"===e.type?[t("div",{staticClass:"doc-title"},[e._v("投诉指引")]),t("p",{staticClass:"first-p"},[e._v("1. 你的何种权益受到侵犯时，可以使用本流程？")]),t("p",[e._v("如果微信红包封面的内容侵犯你的人身权或知识产权等合法权益，你可通过本流程进行投诉。")]),t("p",{staticClass:"first-p"},[e._v("2. 你被侵权了，应该如何进行侵权投诉？")]),t("p",[e._v("如果你发现微信红包封面存在侵犯你合法权益的内容，你可以通过电子邮箱（wxcover_support@tencent.com）向我们递交你的通知，发起侵权投诉。")]),t("p",[e._v(" 请注意，为保证你及时收到通知和了解进度，我们原则上只接受本系统进行投诉。如你确实因特殊客观原因无法在本系统完成投诉，可例外通过快递信件的方式通知我们，但你可能会因为邮寄送递收转等各环节而增加整体的处理时长，影响你的侵权投诉进程。具体邮寄地址可联系电子邮箱（wxcover_support@tencent.com）索取。 ")]),t("p",{staticClass:"first-p"},[e._v("3. 提交侵权投诉之前应做什么准备？")]),t("p",[e._v(" 侵权投诉是一项极其严肃的、具有法律意义的行为，提交前，你必须确保不得作出虚假声明、提交伪造虚假材料发起侵权投诉，侵害他人权益。任何虚假、恶意的投诉，可能导致我们对你做出处理或要求你承担法律责任。你保证提供的信息和材料是真实、有效和合法的，并保证承担和赔偿腾讯因根据你的通知对相关微信红包封面的处理而给腾讯公司造成的任何损失。 ")]),t("p",[e._v("请注意，只有权益受侵害方及其合法授权代表才能够提交侵权投诉。非权益受侵害方或其合法授权代表提交的投诉，平台无法进行处理。")]),t("p",{staticClass:"first-p"},[e._v("4. 侵权投诉需要提供哪些信息？")]),t("p",[e._v("（1）权利人的联系信息和主体材料（自然人的身份证复印件/企业的营业执照复印件等）；如是授权代表投诉，还需要提供有效的授权委托书；")]),t("p",[e._v("（2）投诉对象、投诉内容和投诉理由；")]),t("p",[e._v("（3）权利人对相关内容的权属证明材料，或权益受侵害的证明材料；")]),t("p",[e._v("（4）如已对被投诉方侵权提起诉讼的，请将相关受理证明一同提交给平台，便于投诉的处理。")]),t("p",[e._v("请注意，为保护各方合法权益，在法律允许的范围内，平台可能会把你提交的信息和材料向被投诉方披露，但会依法进行且不会披露任何个人信息或商业机密。")]),t("p",{staticClass:"first-p"},[e._v("5. 如果你是中国大陆以外的主体，应该如何提交侵权投诉？")]),t("p",[e._v(" 本系统支持权利方为大陆以外主体的侵权投诉，只是为确保涉外主体和材料的真实性，你应当以授权委托方式，委托中国大陆主体代为投诉。具体委托相关材料如下： ")]),t("p",[e._v("（1）港澳台主体")]),t("p",[e._v("① 你委托中国大陆主体代为投诉的委托授权书；")]),t("p",[e._v(" ② 中国大陆境内执业律师对前述授权委托过程进行律师见证的材料，或者当地法律认可的公证机关或公证人出具的公证材料。港澳台地区的公证材料有所区别，具体如下： ")]),t("p",[e._v("i香港特别行政区：证明前述授权委托合法性、真实性的，经中国法律服务(香港)有限公司加章转递的中国委托公证人出具的委托公证材料；")]),t("p",[e._v(" ii澳门特别行政区：证明前述授权委托合法性、真实性的，经澳门政府公证部门或中国司法部委托的公证人公证，并经中国法律服务（澳门）公司加盖核验章的委托公证材料； ")]),t("p",[e._v("iii台湾地区：证明上述授权委托合法性、真实性的，经海峡交流基金会复查确认的台湾公证机关出具的公证材料；")]),t("p",[e._v("③ 任何涉外的材料，均需提交中文翻译文本以及与原件确认无误的声明。")]),t("p",[e._v("（2）其他主体")]),t("p",[e._v("① 你委托中国大陆主体代为投诉的委托授权书；")]),t("p",[e._v("② 中国大陆境内执业律师对前述授权委托过程进行律师见证的材料，或者权利人所在国公证机关证明前述授权委托合法性、真实性的公证材料；")]),t("p",[e._v("③ 该公证材料经中华人民共和国驻该国使领馆认证的材料；")]),t("p",[e._v("④ 任何涉外的材料，均需提交中文翻译文本以及与原件确认无误的声明。")]),t("p",{staticClass:"first-p"},[e._v("6. 提交侵权投诉后，你还能做什么？")]),t("p",[e._v("提交侵权投诉后，平台会在7个工作日内处理完毕。你可以留意回复邮件。")]),t("p",{staticClass:"first-p"},[e._v("7. 提交侵权投诉后，平台可能会作出什么处理？")]),t("p",[e._v("通知被投诉方，被投诉方有机会承认侵权，由系统清除侵权内容；")]),t("p",[e._v("经平台核实存在侵权的，清除侵权内容；")]),t("p",[e._v("经平台核实存在严重侵权的，可能会封禁账号相关功能、或注销账号处罚。")]),t("p",{staticClass:"first-p"},[e._v("8. 你投诉后，平台冻结了侵权内容，后续又恢复了，是什么原因？")]),t("p",[e._v("若被投诉方不认可你的投诉和平台的处理结果，其有权提交申诉。平台根据申诉通知和材料，核实判断是否解除冻结状态、恢复内容。")]),t("p",[e._v("如你对内容恢复有异议，建议你另行通过和对方协商、行政投诉、诉讼等方式解决问题。")])]:e._e(),"register"===e.type?[t("div",{staticClass:"doc-title"},[e._v("注册须知")]),t("p",{staticClass:"first-p"},[e._v(" 一、现阶段本功能仅向中国大陆境内的、通过微信公众平台成功开通并完成认证的公众号用户，或成功开通且粉丝数达100个的视频号/公众号个人用户开放。 ")]),t("p",[e._v("当你使用微信公众账号、微信视频号账号使用本功能时，腾讯将使用你在微信公众平台、微信视频号的相关信息，并以此作为你在本功能平台的身份信息。")]),t("p",[e._v("如果你尚未通过微信公众平台、微信视频号达到前述条件的，需在相应条件完成后方可使用本功能。")]),t("p",{staticClass:"first-p"},[e._v("二、现阶段本功能暂不对宗教、烟草、医疗及药品相关的主体开放。")]),t("p",{staticClass:"first-p"},[e._v(" 三、本功能是一项付费、附条件、附有效期限的功能。你仅有在支付费用后，方可在指定期限（一年）内向微信最终用户发放你的微信红包封面，微信最终用户可在指定期限（六个月）内使用你发放的微信红包封面。但微信最终用户使用其获得的红包封面是免费的，你不得向微信最终用户收取任何费用。 ")]),t("p",[e._v(" 本功能按你选择的微信红包封面的可发放个数收费（一个微信个人账号成功领取一次特定微信红包封面的，即计为发放1个，依此类推），计费标准为人民币1元/个，可选择的最低可发放个数为100个。 ")]),e._m(0),t("p",{staticClass:"first-p"},[e._v(" 五、当你的微信红包封面因为违法或侵权等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此已支付的费用将无法退款。 ")])]:e._e(),"pay"===e.type?[t("div",{staticClass:"doc-title"},[e._v("付款须知")]),t("p",{staticClass:"first-p"},[e._v("在进行支付前，请仔细阅读并详细了解以下信息。一旦支付，即视为你已同意如下内容：")]),t("p",{staticClass:"first-p"},[e._v("1. 费用计算")]),t("p",[e._v(" 本功能按照你选择的微信红包封面的可发放个数收费（“发放个数”等于“可领取使用的微信账号数“，一款红包封面同一个微信个人账号只可领取一次），计费标准为人民币1元/个。 ")]),t("p",{staticClass:"first-p"},[e._v("2. 免责声明")]),t("p",{staticClass:"strong"},[e._v(" 腾讯在你的微信红包封面上线前所进行的审核，不得视为腾讯对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。一旦腾讯主动发现或经投诉发现你的微信红包封面存在违反法律规定或《“微信红包封面”定制功能使用条款》《“微信红包封面”设计规范》《“微信红包封面”定制功能素材规范》的情形，你将被处以相应处罚。 ")]),t("p",{staticClass:"first-p"},[e._v("3. 分发期限与使用期限")]),t("p",{staticClass:"strong"},[e._v(" 你所定制的微信红包封面应在腾讯指定的分发期限内（支付成功之日起六个月内）向最终用户进行分发，超出该期限的，无论是否达到分发个数上限，均无法再向任何最终用户进行分发。 ")]),t("p",{staticClass:"strong"},[e._v(" 每一位最终用户领取你分发的微信红包封面后，仅能在腾讯指定的使用期限内（领取成功之日起三个月内）进行使用。使用期限届满后，最终用户不得继续使用该微信红包封面。 ")]),t("p",{staticClass:"first-p"},[e._v("4. 退款")]),t("p",{staticClass:"strong"},[e._v(" 当你的微信红包封面因为违法、侵权或其他违反《“微信红包封面”定制功能使用条款》等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此支付的费用将无法退款。 ")]),t("p",{staticClass:"strong"},[e._v(" 仅当你的微信红包封面因侵权被下架时，存在尚处于分发期限内、且未被任何微信个人账号成功领取的红包封面时，方可根据剩余个数，按1元/个的标准申请退款。 ")])]:e._e(),"time"===e.type?[t("div",{staticClass:"doc-title"},[e._v("付款须知")]),t("p",{staticClass:"first-p"},[e._v(" 特别说明：你正在参加微信红包封面开放平台向特定受邀主体开放的“按包时购买”限时活动。参加活动的过程中你应该遵守《“微信红包封面”定制功能使用条款》及相关交互页面上你选择/同意的条款之约定，如该等约定与本《付款须知》不一致的，则以本《付款须知》之约定为准。 ")]),t("p",{staticClass:"first-p"},[e._v("在进行支付前，请仔细阅读并详细了解以下信息。一旦支付，即视为你已同意如下内容：")]),t("p",{staticClass:"first-p"},[e._v("1. 费用计算")]),t("p",[e._v(" 本功能按照你选择的微信红包封面的可发放时长收费，计费标准为人民币100,000元/小时。单笔订单可选择的最少购买时长为1小时，最长购买时长为24小时（每小时的可发放红包数量上限为50,000个；如连续购买了若干小时的，则该订单下的可发放红包数量上限合并计算，例如连续购买了N个小时的，则该订单下的可发送红包数量上限为50,000*N）。 ")]),t("p",{staticClass:"first-p"},[e._v("2. 免责声明")]),t("p",[e._v(" 腾讯在你的微信红包封面上线前所进行的审核，不得视为腾讯对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。一旦腾讯主动发现或经投诉发现你的微信红包封面存在违反法律规定或《“微信红包封面”定制功能使用条款》《“微信红包封面”设计规范》《“微信红包封面”定制功能素材规范》的情形，你将被处以相应处罚。 ")]),t("p",{staticClass:"first-p"},[e._v("3. 分发期限与使用期限")]),t("p",{staticClass:"strong"},[e._v(" 你所定制的微信红包封面应在腾讯指定的分发期限内（支付成功之日起六个月内）操作生效并向最终用户进行分发，超出该期限的，无论是否已经分发、是否达到分发个数上限，均无法再向任何最终用户进行分发。 ")]),t("p",{staticClass:"strong"},[e._v(" 每一位最终用户领取你分发的微信红包封面后，仅能在腾讯指定的使用期限内（领取成功之日起三个月内）进行使用。使用期限届满后，最终用户不得继续使用该微信红包封面。 ")]),t("p",{staticClass:"first-p"},[e._v("4. 退款")]),t("p",{staticClass:"strong"},[e._v("在此你应知悉，本活动为针对特定受邀主体开放的限时活动，你应在充分了解本功能后选择是否购买，一旦购买成功即不支持退款。")]),t("p",{staticClass:"strong"},[e._v(" 特别提醒：当你的微信红包封面因为违法、侵权或其他违反《“微信红包封面”定制功能使用条款》等问题被下架的，已经领取该封面的最终用户将无法查阅、使用该封面，且你就此支付的费用同样无法退款。 ")])]:"special"===e.type?[t("div",{staticClass:"doc-title"},[e._v("“微信红包封面”定制功能使用条款")]),t("use-term")]:e._e(),"appeal"===e.type?[t("div",{staticClass:"doc-title"},[e._v("申诉指引")]),t("p",{staticStyle:{"margin-top":"20px"}},[e._v(" 若你的微信红包封面被权利人因侵犯知识产权（版权/著作权、商标权或专利权等）或人身权（姓名权、肖像权等）或其他理由投诉，你有权在五个工作日内通过邮件方式向腾讯进行申诉。 ")]),t("p",{staticClass:"first-p"},[e._v("1. 申诉邮件应包括但不限于以下内容：")]),t("p",[e._v("1.1邮件主题：【微信红包封面侵权申诉】")]),t("p",[e._v("1.2 邮件内容：")]),t("p",[e._v("（1）被投诉对象：微信红包封面的简称、图案等")]),t("p",[e._v("（2）被投诉内容：被投诉侵犯何种权利")]),t("p",[e._v("（3）申诉方主体材料：")]),t("p",[e._v("I. 申诉方的名称、联系电话、邮箱、地址、营业执照（单位）等材料；")]),t("p",[e._v(" II. 申诉方如委托他人代理申诉的，还需提供授权委托书，以及代理人姓名（名称）、联系方式、地址、营业执照（单位）/身份证（个人）、授权委托书等能证明代理人主体资格的材料。 ")]),t("p",[e._v("（4）不构成侵权的初步证明材料")]),t("p",[e._v(" I. 申诉方拥有权利的权属证明材料：包括但不限于相关有权机构颁发的版权证书、商标权证书、专利权证书、作品首次公开发表或发行日期证明材料、创作手稿、经权威机构签发的作品创作时间戳、作品备案证书等能证明申诉方拥有相关权利的有效权属证明； ")]),t("p",[e._v(" II. 申诉方提供的服务不构成侵权的证明材料与申诉理由：包括但不限于相关发布内容或使用行为不构成对权利人版权、商标权、专利权、姓名权、隐私权、名誉权、商誉权或者公平竞争权等权利侵权的有效证明材料或理由等。 ")]),t("p",[e._v("注意事项：身份证（须提供正反面）、营业执照、授权委托书及侵权证明材料等只需提供电子版（高清数码照片或扫描件），请将其添加至附件。")]),t("p",{staticClass:"first-p"},[e._v("2. 联系邮箱：wxcover_support @tencent.com")]),t("p",{staticClass:"first-p"},[e._v("3. 腾讯反馈：收到你按照本指引发起的申诉后，腾讯会尽快按照相关法律法规的规定进行处理。")]),t("p",{staticClass:"first-p"},[e._v(" 4. 请注意，如你放弃申诉，或腾讯对你的申诉进行复核后认为申诉理由不成立或证据不充分的，你的微信红包封面将被下架，届时已经领取该封面的最终用户将无法查阅、使用该封面，且你就此支付的费用将无法退款。 ")])]:e._e(),"proof_instruction"===e.type?[t("div",{staticClass:"doc-title"},[e._v("证明材料指引")]),t("p",{staticStyle:{"margin-top":"20px"}},[e._v(" 为维护微信红包封面开放平台的内容生态，红包封面所使用的品牌logo、封面简称、封面样式、封面故事需提供相关材料证明权利归属。如需合法使用他人享有权利的内容，应取得权利人的合法、有效授权，并提供有效的授权证明材料。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("如使用注册商标的，需上传《商标注册证》的扫描件及商标使用授权书（在授权情况下）。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("如提交的作品涉及肖像，请按照以下要求提供材料：")]),e._m(1),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("如提交的作品涉及版权，请按照以下要求提供材料：")]),e._m(2),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 封面样式和封面故事中，如包含美术作品的，请上传《作品登记证书》或《著作权登记证书》的扫描件；如没有该等证书的，请提供能够证明拥有作品著作权的其他材料，包括但不限于该作品的psd格式文件、人民法院确认该作品权属情况的生效法律文书、能够证明作品权利人情况的发表链接等。 ")])]:e._e(),"material_standard"===e.type?[t("div",{staticClass:"doc-title"},[e._v("“微信红包封面”素材规范")]),t("p",{staticStyle:{"margin-top":"20px"}},[e._v(" 1. 你应尊重他人的商誉/姓名/名誉/肖像/隐私等合法权益。如需合法使用他人享有权利的内容，你应取得权利人的合法、有效授权，并向腾讯提供有效的授权证明材料。在你定制的微信红包封面中不得存在如下内容： ")]),t("p",[e._v("（1）擅自使用他人已经登记注册的企业名称，侵犯他人企业名称专用权或企业商誉的内容；")]),t("p",[e._v(" （2）和第三方企业、品牌或其产品、服务进行对比，或有意诋毁第三方企业、品牌的形象及声誉，或贬低第三方提供的商品或服务的内容，包括直接或间接的业绩对比图表、放大自身品牌形象贬损他人的内容等； ")]),t("p",[e._v("（3）擅自使用他人姓名、肖像，侵犯他人姓名权、名誉权、肖像权等合法权利的内容；")]),t("p",[e._v("（4）未经授权，使用包含他人个人隐私的资料，侵犯他人隐私权等合法权益的内容。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 2. 你应尊重他人的知识产权等合法权益。如需使用他人享有知识产权的内容，你应取得权利人的合法、有效授权，并向腾讯提供有效的授权证明材料。在你定制的微信红包封面中不得存在如下内容： ")]),t("p",[e._v("（1）未经授权，擅自使用他人享有著作权的内容（包括但不限于美术作品、文字作品、摄影作品等）；")]),t("p",[e._v("（2）未经授权，擅自使用他人享有商标权的内容；")]),t("p",[e._v("（3）未经授权，擅自使用他人享有专利权的内容；")]),t("p",[e._v("（4）未经授权，擅自使用他人享有商业秘密的内容；")]),t("p",[e._v(" （5）无论是否存在侵权问题，为维护微信红包封面开放平台的内容生态，你的微信红包封面中不得存在与已发布的微信红包封面雷同的内容，或权利归属情况不明的内容（如未获得著作人合法授权的二次创作、同人作品等）。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 3. 你应确保定制的微信红包封面含义清晰、指向准确，其中不得出现除你的名称、价值观（其中不得包含直接或间接表明产品或服务或其特性的文字）、你的自有商品及服务商标、必要的祝福语以外的文字。特别是在你定制的微信红包封面中不得对用户产生以下不适宜的混淆、误认、联想或影响。如： ")]),t("p",[e._v("（1）恶意混淆腾讯官方的角色与定位；")]),t("p",[e._v("（2）恶意混淆你与相关政府机构、事业单位、社会团体等组织机构之关系的（无论该等组织是否真实存在）。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 4. 你应确保定制的微信红包封面格调健康，不得通过定制红包封面传播淫秽、色情或低俗信息，包括但不限于暴露图片、挑逗内容，或包含非法色情交易的信息，或描绘对人或动物施加暴力或虐待行为的信息等；不得通过微信红包封面传播赌博或宣扬赌博的信息，包括但不限于赌博场所、赌博工具信息和介绍；不得通过微信红包封面传播有害青少年身心健康发展的信息，包括但不限于鼓励青少年消费烟酒等。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 5. 你理解并同意，腾讯提供的微信红包封面不是广告位，你定制的微信红包封面中不得存在过度营销、展示或传播骚扰信息或垃圾信息等行为，不得放置二维码、联系方式、小程序码、条形码、口令等功能性内容，对用户造成骚扰，或对用户的网络安全、个人信息、人身与财产安全等构成威胁。也不得用于营销或广告用途或出现虚假夸大或其他违反《广告法》等相关法律法规的内容。也不得含有虚假或引人误解的内容，包括但不限于传播、推广假冒伪劣产品等。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 6. 微信红包封面的内容不得攻击或伤害各地的淳朴风俗、各民族传统习俗、各地区的生活习惯等，你的微信红包封面不得存在违反社会善良风俗或伤害各地淳朴风俗、伤害各民族感情的内容。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" 7. 如果你定制的微信红包封面中存在外文、少数民族语言文字内容的，你应提供完整、准确的中文翻译供腾讯公司审核；如果你定制的微信红包封面中存在任何宗教、民族、政治性质的图腾、人物、神兽、符号、法器等元素的，你应提供该等元素的详细说明供腾讯公司审核。此外，对属于该等情形的微信红包封面，审核期限将延长到一个月。 ")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("8. 未经国家主管部门批准，微信红包封面中不得使用中国地图，或含有中国地图的一部或全部的其他地图或素材。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("9. 定制微信红包封面要符合国家法律法规的规定，你定制的微信红包封面中不得存在含有如下信息的内容：")]),t("p",[e._v("（1）反对宪法确定的基本原则的；")]),t("p",[e._v("（2）危害国家统一、主权和领土完整的；")]),t("p",[e._v("（3）泄露国家秘密、危害国家安全或者损害国家荣誉和利益的；")]),t("p",[e._v("（4）煽动民族仇恨、民族歧视，破坏民族团结，或者侵害民族风俗、习惯的；")]),t("p",[e._v("（5）宣扬邪教、迷信的，或破坏国家宗教政策的；")]),t("p",[e._v("（6）散布谣言，扰乱社会秩序，破坏社会稳定的；")]),t("p",[e._v("（7）宣扬淫秽、色情、赌博、暴力或者教唆犯罪的；")]),t("p",[e._v("（8）侮辱或者诽谤他人，侵害他人合法权益的；")]),t("p",[e._v("（9）危害社会公德或者民族优秀文化传统的；")]),t("p",[e._v("（10）存在其他不利于社会良性发展的内容的，包括但不限于低俗粗鄙、宣扬酒驾、过度饮酒、滥用药物、吸食毒品、自杀自残等；")]),t("p",[e._v("（11）有法律、行政法规和国家规定禁止的其他内容。")]),t("p",[e._v(" 10. 保护未成年人的身心健康，保障未成年人的合法权益，促进未成年人在品德、智力、体质等方面全面发展，培养有理想、有道德、有文化、有纪律的社会主义建设者和接班人： ")]),t("p",[e._v("（1）不适应为未成年人的行为（例：吸烟、喝酒、开车、同居、结婚等）或出入不适宜未成年人活动的场所（例：夜场、酒吧等）或涉及低俗的画面不能出现；")]),t("p",[e._v("（2）未成年人浓妆艳抹（成人化）的画面不能出现；")]),t("p",[e._v("（3）面容装扮疑似未成年人模特、主播等低俗类的画面不能出现；")]),t("p",[e._v("（4）“少男、少女攀比怀孕年龄低的画面不能出现；")]),t("p",[e._v("（5）以未成年人为“道具”，做出严重危险行为的画面不能出现。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("11. 除党政账号和事业机关账号外，其余均不能使用国事/党政活动、军事活动/政策、反腐倡廉、主旋律宣传推广等图片作为红包封面。")]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v("12. 不得使用遭全网封杀的人物肖像做红包封面。")])]:e._e(),"emotion_rain_org"===e.type?[t("EmotionRainAgreement",{attrs:{principalType:0}})]:e._e(),"emotion_rain_personal"===e.type?[t("EmotionRainAgreement",{attrs:{principalType:1}})]:e._e()],2)])},cm=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[t("span",[e._v("四、定制微信红包封面的，应遵守")]),t("a",[e._v("《“微信红包封面”定制功能使用条款》")]),t("a",[e._v("《“微信红包封面”设计规范》")]),t("a",[e._v("《“微信红包封面”素材规范》")]),t("span",[e._v(" 等。腾讯将对此进行一定的形式审核，但腾讯的该等审核不得视为对你的微信红包封面内容的任何担保、确认或保证；你所定制的微信红包封面，也不因为已通过审核而豁免任何责任。 ")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{staticStyle:{"margin-top":"10px"}},[t("li",{staticStyle:{"margin-top":"10px"}},[e._v("图中人物的身份证明，如身份证正反面或护照等扫描件或照片。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v("肖像权授权书。其中授权人为图中涉及肖像的人，被授权人为微信红包封面开放平台注册者。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{staticStyle:{"margin-top":"10px"}},[t("li",{staticStyle:{"margin-top":"10px"}},[e._v("作品的版权证明，如著作权登记证、作品登记证。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v("版权授权书。其中授权人为版权所有者，被授权人是微信红包封面开放平台注册者。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v("版权所有者主体证明，企业请提交合法营业执照电子版扫描件或照片，个人请提交身份证正反面或护照等身份证明扫描件或照片。")]),t("li",{staticStyle:{"margin-top":"10px"}},[e._v(" 如没有该等证书的，请提供能够证明拥有作品著作权的其他材料，包括但不限于该作品的psd格式文件、人民法院确认该作品权属情况的生效法律文书、能够证明作品权利人情况的发表链接等。 ")])])}],lm=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[1===e.principalType?[t("p",{staticClass:"doc-title"},[e._v("微信红包封面开放平台微信表情雨活动规则")]),e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5)]:[t("p",{staticClass:"doc-title"},[e._v("微信红包封面开放平台微信表情雨活动规则")]),e._m(6),e._m(7),e._m(8),e._m(9),e._m(10),e._m(11)]],2)},dm=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[t("strong",[e._v("1. 本活动为限时开放活动，仅向部分定制方开放。腾讯有权根据活动实际情况调整活动开放时间、结束时间，以及可参与本活动的定制方范围。活动期间，获得参与资格的定制方将在微信红包封面开放平台的相关页面看到活动入口，并有权在仔细阅读本活动规则后，自行决定是否参加本活动。如你不同意本活动规则或"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("中的约定内容的，请不要参加本活动。你参加本活动的行为，将被视为已同意本规则全部内容。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 2. 个人定制方参与本活动的，腾讯将在你付费购买的红包封面（下亦简称“普通封面”）之外，额外免费生成一定数量的同款红包封面（下亦简称“活动封面”）。"),t("strong",[e._v("活动封面由腾讯通过微信客户端的表情彩蛋雨活动向微信用户投放，被投放到的微信用户有权选择领取或不领取该活动封面。")]),e._v("微信用户成功领取的普通封面与对应的同款活动封面之内容、使用规则完全一致。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 3. 你应保证对你的普通封面之素材拥有完整的知识产权、肖像权等全部必要的权利，或已获得权利方完整有效的合法授权，从而可以参与本活动。同时"),t("strong",[e._v("你授权腾讯为你生成本活动规则第2款所述之活动封面，并由腾讯在本活动中向微信用户投放。如腾讯为你生成的活动封面在活动期间未被用户全部领取的，剩余数量将在活动结束后清零，你同意腾讯无须因此对你进行任何补偿。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 4. "),t("strong",[e._v("如你的普通封面因违反法律法规之规定、"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("等协议之约定而被冻结、下架的，相应的活动封面也会同时被冻结、下架。")]),e._v("你应自行解决并承担由此引起的所有法律责任，因此给腾讯、其他用户或第三方造成损害的，你还应当依法予以赔偿。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 5. "),t("strong",[e._v("在此你明确同意，微信客户端的表情彩蛋雨活动，以及作为其组成部分之一的本活动（“微信红包封面开放平台表情彩蛋雨活动”）均由腾讯独立制定活动规则并执行（包括但不限于开始时间、结束时间，活动的展示效果，以及活动触发词的选择、修改与停用等），腾讯无须因本活动向你支付任何费用，腾讯也无法向你承诺本活动的执行效果；")]),e._v("但本活动结束后，腾讯将在微信红包封面开放平台相关页面，向你披露本活动中，与你的普通封面对应的活动封面被微信用户成功领取的总数量。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 6. 本活动规则未明确约定的内容，以"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("之约定为准。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[t("strong",[e._v("1. 本活动为限时开放活动，仅向部分定制方开放。腾讯有权根据活动实际情况调整活动开放时间、结束时间，以及可参与本活动的定制方范围。活动期间，获得参与资格的定制方将在微信红包封面开放平台的相关页面看到活动入口，并有权在仔细阅读本活动规则后，自行决定是否参加本活动。如你不同意本活动规则或"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("中的约定内容的，请不要参加本活动。你参加本活动的行为，将被视为已同意本规则全部内容。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 2. 企业定制方参与本活动的，有权在自行发放的红包封面（下亦简称“普通封面”）之外，以数量不超过活动允许之上限的封面参与本活动（该部分封面下亦简称“活动封面”）。"),t("strong",[e._v("活动封面由腾讯通过微信客户端的表情彩蛋雨活动向微信用户投放，被投放到的微信用户有权选择领取或不领取该活动封面。")]),e._v("微信用户成功领取的普通封面与对应的活动封面之内容、使用规则完全一致。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 3. 你应保证对你的微信红包封面之素材拥有完整的知识产权、肖像权等全部必要的权利，或已获得权利方完整有效的合法授权，从而可以参与本活动。同时"),t("strong",[e._v("你授权腾讯在本活动中向微信用户投放本活动规则第2条所述之活动封面。如你的活动封面在活动期间未被用户全部领取的（含已向微信用户投放但未被成功领取的情况），剩余数量将在活动结束后退回给你，你可以再次向微信用户进行发送（本活动的时间，计入相应的微信红包封面的“发放时间”而不予以扣除）。")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 4. "),t("strong",[e._v("如你的微信红包封面因违反法律法规之规定、"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("等协议之约定而被冻结、下架的，相应的活动封面也会同时被冻结、下架。")]),e._v("你应自行解决并承担由此引起的所有法律责任，因此给腾讯、其他用户或第三方造成损害的，你还应当依法予以赔偿。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 5. "),t("strong",[e._v("在此你明确同意，微信客户端的表情彩蛋雨活动，以及作为其组成部分之一的本活动（“微信红包封面开放平台表情彩蛋雨活动”）均由腾讯独立制定活动规则并执行（包括但不限于开始时间、结束时间，活动的展示效果，以及活动触发词的选择、修改与停用等），腾讯无须因本活动向你支付任何费用，腾讯也无法向你承诺本活动的执行效果；")]),e._v("但本活动结束后，腾讯将在微信红包封面开放平台相关页面，向你披露本活动中，你的活动封面被微信用户成功领取的总数量。 ")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",{staticClass:"first-p"},[e._v(" 6. 本活动规则未明确约定的内容，以"),t("a",{attrs:{href:"/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/rule_doc?type=special",target:"_blank"}},[e._v("《“微信红包封面”定制功能使用条款》")]),e._v("之约定为准。 ")])}],pm=a.ZP.extend({props:{principalType:{type:Number}}}),um=pm,hm=(0,h.Z)(um,lm,dm,!1,null,"295c4196",null),mm=hm.exports,gm=a.ZP.extend({name:"RuleDoc",data(){return{type:""}},created(){const e=this;e.type=this.$route.query.type},components:{EmotionRainAgreement:mm,UseTerm:j.Z}}),vm=gm,fm=(0,h.Z)(vm,nm,cm,!1,null,"8294248a",null),ym=fm.exports;const _m=()=>i.e(971).then(i.bind(i,48779));a.ZP.use(s.ZP);const Cm=[{path:"",component:Wl,name:"index"},{path:"/login",component:V,name:"login"},{path:"/signup",component:Xl,name:"signUp",children:[{path:"sign_should_know",component:wh,name:"signShouldKnow"},{path:"sign_law",component:vh,name:"signLaw"},{path:"choose_type",component:ku,name:"ChooseType"},{path:"enterprise_qr",component:$u,name:"EnterpriseQR"},{path:"person_qr",component:dh,name:"PersonQR"},{path:"biz_person_qr",component:()=>i.e(525).then(i.bind(i,59525)),name:"BizPersonQR"},{path:"biz_person_complete_info",component:()=>i.e(230).then(i.bind(i,98230)),name:"BizPersonCompleteInfo"},{path:"enterprise_mail",component:Du,name:"EnterpriseMail"},{path:"person_mail",component:Vu,name:"PersonMail"},{path:"choose_type",component:ku,name:"ChooseType"},{path:"choose_person_type",component:()=>i.e(55).then(i.bind(i,64055)),name:"ChoosePersonType"},{path:"*",component:wh,name:"signDefault"}]},{path:"/signsuccess",component:Ah,name:"signSuccess"},{path:"/covers",component:Gs,name:"covers",meta:{showSideBar:!0}},{path:"/exchange",component:Gh,name:"exchange",meta:{showSideBar:!0}},{path:"/administrator",component:Fh,name:"administrator",meta:{showSideBar:!0}},{path:"/make",component:Fc,name:"make",meta:{showSideBar:!0}},{path:"/detail",component:Es,name:"detail",meta:{showSideBar:!0}},{path:"/statistics",component:El,name:"statistics",meta:{showSideBar:!0}},{path:"/pay",component:hl,name:"pay",meta:{showSideBar:!0}},{path:"/pay_type",component:ne,name:"payType"},{path:"/audit",component:me,name:"audit"},{path:"/notice",component:bd,name:"notice"},{path:"/notice_detail",component:gd,name:"noticeDetail"},{path:"/orders",component:fu,name:"orders",meta:{showSideBar:!0}},{path:"/order",component:lu,name:"order",meta:{showSideBar:!0}},{path:"/receiveobjects",component:()=>i.e(987).then(i.bind(i,77987)),name:"receiveobjects",meta:{showSideBar:!0}},{path:"/invoice_manage",component:bp,name:"invoiceManage",meta:{showSideBar:!0}},{path:"/invoice",component:zd,name:"invoice"},{path:"/invoice_make",component:np,name:"invoiceMake"},{path:"/rule_doc",component:ym,name:"ruleDoc"},{path:"/contact_us",component:om,name:"contactUs"},{path:"/case",component:em,name:"case"},{path:"/invoice_success",component:Rd,name:"invoiceSuccess",meta:{showSideBar:!0}},{path:"/submit_success",component:E,name:"submitSuccess",meta:{showSideBar:!0}},{path:"/pay_success",component:S,name:"paySuccess",meta:{showSideBar:!0}},{path:"/revoke_success",component:xd,name:"revokeSuccess",meta:{showSideBar:!0}},{path:"/refund_success",component:te,name:"refundSuccess",meta:{showSideBar:!0}},{path:"/doc",component:_m,name:"doc"},{path:"*",component:Gs,name:"default"}],bm=new s.ZP({routes:Cm,scrollBehavior(e){if("detail"!==e.name)return{x:0,y:0}}});var wm=0,Im=!1;bm.beforeEach((async(e,t,i)=>{let a=!(!d.U6.user||!d.U6.user.authorId);a||(clearInterval(wm),Im=!1,await d.U6.getUserInfo()),a=!(!d.U6.user||!d.U6.user.authorId);const s=e.path.indexOf("signup")>-1;if(a)return 0==Im&&(Im=!0,wm=window.setInterval((()=>{(new l.ZP).heartBeat()}),5e3)),"login"===e.name||s||"index"===e.name?i({name:"covers"}):i();{clearInterval(wm),Im=!1;const t=["index","login","questionAnswer","ruleDoc","notice","noticeDetail","contactUs","doc","case","adminConfirm","signSuccess"];return t.find((t=>t===e.name))||s?i():i({name:"login"})}}));var km=bm},49199:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var a=i(20144),s=i(9669),r=i.n(s),o=i(16581);const n=console;var c=n,l=i(57582),d=i(52117);const p=(e,t)=>{a.ZP.prototype.$tipsErr(e),window.setTimeout((()=>{a.ZP.prototype.$tipsHide()}),3e3),t?c.error(t):c.error(e)};var u;(function(e){e[e["sessionTimeOut"]=-13]="sessionTimeOut"})(u||(u={}));class h{async request(e,t){e.method||(e.method="POST");const i=["/cgi-bin/mmcover-bin/coverheartbeat","/cgi-bin/mmcover-bin/covercheckloginqrcode","/cgi-bin/mmcover-bin/coverchecksignupqrcode","/cgi-bin/mmcover-bin/covercheckpersonsignupqrcode","/cgi-bin/mmcover-bin/covercheckemotionjumpinfoqrcode","/cgi-bin/mmcover-bin/covercheckbizpersonsignupqrcode","/cgi-bin/mmcover-bin/covercheckemotionpersonsignupqrcode"];try{const a=await r().request(e),s=(0,o._)(a.data);return s.baseResponse.ret!==u.sessionTimeOut||t?(0!==s.baseResponse.ret&&s.baseResponse.ret!==u.sessionTimeOut&&e.url&&!i.includes(e.url)&&(0,d.H)(`request_error_${e.url}`,`ret: ${s.baseResponse.ret}`),s):(l.U6.clearUser(),void(window.location.href="https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/index.html#/login?relogin=1"))}catch(a){if(r().isCancel(a))return;return p("网络错误",a),void(a?.config?.url&&!i.includes(a.config.url)&&(0,d.H)("request_error_trycatch",JSON.stringify(a)))}}async download(e,t,i){e.method||(e.method="POST");try{const a=await r().request(e),s=i||a.headers["content-disposition"].match(/\.(\w+)"$/)[1],o=`${t}.${s}`,n="csv"===s?new Blob(["\ufeff",a.data],{type:"text/plain;charset=GBK"}):new Blob([a.data]);if(console.log(o,t,i),"download"in document.createElement("a")){const e=document.createElement("a");e.download=o,e.style.display="none",e.href=URL.createObjectURL(n),"csv"===s&&(e.charset="GBK"),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}else navigator.msSaveBlob(n,o);return a.data}catch(a){return void p("网络错误",a)}}}},34225:function(e,t,i){"use strict";i.d(t,{DS:function(){return v},P1:function(){return g},Z3:function(){return m},ZP:function(){return C},a1:function(){return y},mo:function(){return h},qh:function(){return _},rv:function(){return f},yQ:function(){return b}});var a=i(50078),s=i(40628),r=i(16581),o=i(9669),n=i.n(o),c=i(27484),l=i.n(c),d=i(49199);const{CancelToken:p}=n();let u=p.source();const h=()=>{u.cancel()};var m,g,v,f,y,_;(function(e){e[e["None"]=0]="None",e[e["Save"]=1]="Save",e[e["Submit"]=2]="Submit",e[e["Recall"]=3]="Recall"})(m||(m={})),function(e){e[e["None"]=0]="None",e[e["Pending"]=1]="Pending",e[e["Fail"]=2]="Fail",e[e["Success"]=3]="Success"}(g||(g={})),function(e){e[e["weixin"]=1]="weixin",e[e["finder"]=2]="finder"}(v||(v={})),function(e){e[e["NORMAL_PACKET"]=1]="NORMAL_PACKET",e[e["WIDGET_PACKET"]=2]="WIDGET_PACKET",e[e["DIRECT_TO_PAG"]=3]="DIRECT_TO_PAG",e[e["ATMOSPHERE_PAG_BUBBLE"]=4]="ATMOSPHERE_PAG_BUBBLE",e[e["ATMOSPHERE_PAG_NORMAL"]=5]="ATMOSPHERE_PAG_NORMAL",e[e["ATMOSPHERE_PAG_DETAIL"]=6]="ATMOSPHERE_PAG_DETAIL"}(f||(f={})),function(e){e[e["FIRST_UPLOAD"]=1]="FIRST_UPLOAD",e[e["REUPLOAD"]=2]="REUPLOAD",e[e["WIDGET_PNG_ZIP"]=3]="WIDGET_PNG_ZIP",e[e["JUST_CHECK_ZIP"]=4]="JUST_CHECK_ZIP",e[e["JUST_CHECK_MP4"]=5]="JUST_CHECK_MP4"}(y||(y={})),function(e){e[e["GEN_PAG_RUNNING"]=1]="GEN_PAG_RUNNING",e[e["GEN_PAG_SUCC"]=2]="GEN_PAG_SUCC",e[e["GEN_PAG_FAIL"]=3]="GEN_PAG_FAIL",e[e["GEN_PAG_TIMEOUT"]=4]="GEN_PAG_TIMEOUT"}(_||(_={}));class C extends d.Z{constructor(){super()}async getCoverList(){return await this.request({url:a.Fz})}async getCover(e){return await this.request({url:a.iD,data:{order_id:e}})}async getFullStat(e){return await this.request({url:a.ky,data:{order_id:e}})}async submitCover(){return await this.request({url:a.iD})}async getReceiveList(e,t){return u=p.source(),await this.request({url:a.jc,cancelToken:u.token,data:{order_id:e,transaction_id:t}})}async getMergeDetail(e){return await this.request({url:a.DZ,data:e})}async genReceiveMaterial(e,t,i=1,s=[],o){const n={...t};return o&&(n.coverSetCommInfo=o),await this.request({url:a.Vp,data:(0,r.g)({order_id:e,receive_object:n,request_id:Date.now()+Math.random()+"",batchCount:i,channelAppid:s})})}async combineGenReceiveMaterial(e,t,i=1,s=[],o){const n={...t};return o&&(n.coverSetCommInfo=o),await this.request({url:a.kD,data:(0,r.g)({order_id:e,combine_receive_object:n,request_id:Date.now()+Math.random()+"",batchCount:i,channelAppid:s})})}async modifyCover(e,t){return await this.request({url:a.qZ,data:(0,r.g)({order:t,modType:e,request_id:Date.now()+Math.random()+""})})}async saveImg(e,t){return await this.request({url:a.qk,params:t,data:e,headers:{"Content-Type":"multipart/form-data"}})}async getPreviewQrcode(e,t,i){return await this.request({url:a.yF,data:(0,r.g)({packetMaterial:e,corpName:t,brandLogo:i})})}async getTempPreviewQrcode(e){return await this.request({url:a.OU,data:(0,r.g)({orderId:e,requestId:Date.now()+Math.random()+""})})}async checkPreviewQrcode(e){return await this.request({url:a.yE,data:{token:e}})}async recall(e,t,i){return await this.request({url:a.Nn,data:{order_id:e,object_id:t,merge_id:i}})}async pay(e){return await this.request({url:a.Ai,data:{...(0,r.g)(e),request_id:Date.now()+Math.random()+""}})}async pay2(e){return await this.request({url:a.PF,data:{...(0,r.g)(e),request_id:Date.now()+Math.random()+""}})}async checkPayStatus(e){return await this.request({url:a.aU,data:{transaction_id:e}})}async applyRefund(e){return await this.request({url:a.Yq,data:{order_id:e}})}async cancelPay(e,t){return await this.request({url:a.fM,data:{order_id:e,transaction_id:t}})}async activateOrder(e){const t=Object.assign({},e,{activeRequestId:Date.now()+Math.random()+""});return await this.request({url:a.Kk,data:(0,r.g)(t)})}async getReceiveObjectDetail(e){const t=Object.assign({},e,{activeRequestId:Date.now()+Math.random()+""});return await this.request({url:a.sG,data:(0,r.g)(t)})}async storyGetBizInfo(e,t){return await this.request({url:a.EA,data:{appname:e,app_type:t}})}async storyGetFinderInfo(e){return await this.request({url:a.xS,data:{appname:e}})}async storyGetFinderList(e,t=""){return await this.request({url:a.PB,data:{username:e,last_buffer:t}})}async storyGetMiniAppQrcode(e,t){return await this.request({url:a.c,data:{appname:e,path:t}})}async coverGetShareMsgQrCode(e,t){return await this.request({url:a.TV,data:{order_id:e,object_id:t}})}downloadReceiveObject(e,t){this.download({url:a.tm,responseType:"blob",data:{order_id:e,object_id:t.objectId}},t.genTime?`${t.genTime.replace(" ","_")}_${s.FP[t.genType]}（${s.n6[t.receiveType]}）`:"qr")}downloadMergeReceiveObject(e){const t=l().unix(e.createTime).format("YYYY_MM_DD_HH_mm"),i=`${t}_${s.FP[e.genType]}（${s.n6[e.receiveType]}）}`;this.download({url:a.ZP,responseType:"blob",data:{merge_id:e.mergeId}},i)}getReceiveObject(e,t,i){const s=this;s.download({url:a.tm,responseType:"blob",data:{order_id:e,object_id:t.objectId}},t.genTime?`${t.genTime.replace(" ","_")}_${t.type}`:"qr")}async coverGenOrderId(){return await this.request({url:a.ZN})}async coverGenActionQRCode(e){return await this.request({url:a.t8,data:e})}async coverCheckActionQRCode(e){return await this.request({url:a.jl,data:{qr_code:e}})}async coverSetTabList(){return await this.request({url:a.xz})}async coverHeatReceiveObject(e){return await this.request({url:a.G8,data:(0,r.g)(e)})}async coverCancelHeatReceiveObject(e){return await this.request({url:a.z3,data:(0,r.g)(e)})}async coverGenPag(e,t){return await this.request({url:a.n0,data:e,params:t})}async coverBatchGenPag(e,t){return await this.request({url:a.er,data:e,params:t})}async coverGetGenPagResult(e,t){return await this.request({url:a.uj,data:e,params:t})}}const b=new C},85880:function(e,t,i){"use strict";i.d(t,{ZP:function(){return d},bL:function(){return p}});var a=i(49199),s=i(50078),r=i(57582),o=i(64444),n=i(52117),c=i(9938);function l(e){try{return"string"===typeof e?e.replace(/,/g,";"):e&&"object"===typeof e?JSON.stringify(e)?.replace(/,/g,";")||"":e?.toString().replace(/,/g,";")||""}catch{return""}}class d extends a.Z{constructor(){super()}async downloadFile(e,t,i){const a=t.includes("csv")||i.includes("csv");return await this.download({url:s.a2,method:"POST",data:{url:e,file_name:t,use_gbk:a}},t,i)}async downloadFilePng(e,t){return await this.download({url:s.Dd,method:"POST",responseType:"blob",data:{url:e,file_name:t}},t,"png")}async mediaUploadReport(e,t){const{type:i="",size:a=0}=t?.file||{},{width:s=0,height:r=0,duration:o=0}=t?.videoInfo||{};this.baseActionReport({actionType:e,uploadInfo:{cropped:0,suffix:(0,c.WY)(i),size:a,width:s,height:r,video_duration_sec:o,pic_cnt:t.picCnt??0,fail_reason:t.failReason??0,error_code:t.errorCode??0}})}async baseActionReport(e){const{actionType:t="",coverId:i="",processType:a="",authorId:o=r.ZP.state?.user?.user?.authorId||"",editType:n="",page:c=""}=e,d=l(e.uploadInfo),p=`${t},${i},${a},${o},${n},${c},${d}`;return await this.request({url:s._l,method:"POST",data:{detail:{item:[{log_id:18968,value:p}]}}})}async baseActionReportAdmin(e){const{UserType:t=1,ActionType:i=0,authorId:a="",SubId:r=""}=e,o=` ,${t},${i}, ,${a},${r}`;return await this.request({url:s._l,method:"POST",data:{detail:{item:[{log_id:23132,value:o}]}}})}async baseActionReportExchange(e){const{UserType:t=1,TransactionId:i="",ActionType:a="",AuthorId:r="",IfClick:o=""}=e,n=`${r},${t},${i} ,${a},${o}`;return await this.request({url:s._l,method:"POST",data:{detail:{item:[{log_id:23395,value:n}]}}})}downloadAjax(e,t){const{onload:i=(()=>{}),onprogress:a=(()=>{})}=t,s=/^http(s)?:\/\/(.*?)\//,r="https://finder.video.qq.com/",o=new XMLHttpRequest;e=e.replace(s,r),o.open("GET",e,!0),o.responseType="blob",o.onload=i,o.onprogress=a,o.onerror=onerror,o.send()}async getUploadAuthkey(){return await this.request({url:s.Q6})}async bigFileUpload(e,t){const i=await p.getUploadAuthkey();return i&&o.TQ.setAuthParams(i),new Promise(((i,a)=>{t.startUpload(((t,s)=>{t===o.PP.chunkSuccess?e?.onProgress({percent:Math.round(s)}):t===o.PP.success?i(s):t===o.PP.fail&&((0,n.H)("大文件上传失败"),e?.onError(),a(new Error("大文件上传失败")))}))}))}}const p=new d},96736:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var a=i(49199),s=i(50078),r=i(16581);class o extends a.Z{constructor(){super()}async getInvoiceList(){return await this.request({url:s.oS})}async getCanInvoiceOrderList(){return await this.request({url:s.s4})}async getNewCanInvoiceOrderList(){return await this.request({url:s.f3})}async InvoiceWithPayInfoList(e,t){return await this.request({url:s.Ul,data:(0,r.g)({transactionId:e,invoiceInfo:t,request_id:Date.now()+Math.random()+""})})}async getInvoice(e){return await this.request({url:s.jH,data:{invoice_id:e}})}async recallInvoice(e){return await this.request({url:s.hX,data:{invoice_id:e}})}async cancelInvoice(e,t,i,a){return await this.request({url:s.$_,data:{invoice_id:e,reason:t,express_number:i,reason_type:a}})}async makeInvoice(e,t){return await this.request({url:s.ZD,data:(0,r.g)({orderId:e,invoiceInfo:t,request_id:Date.now()+Math.random()+""})})}downloadInvoice(e){const t=this;t.download({url:s.yx,responseType:"blob",data:{invoice_id:e}},"发票")}async coverGetInvoiceAddrList(e){return await this.request({url:s.J2,data:(0,r.g)({areaId:e})})}}},32012:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var a=i(50078),s=i(49199);class r extends s.Z{constructor(){super()}async getList(){return await this.request({url:a.nr})}async getDetail(e){return await this.request({url:a.sJ,data:{announcement_id:e}})}}},18159:function(e,t,i){"use strict";i.d(t,{XK:function(){return l},Xd:function(){return a},ZP:function(){return c},tk:function(){return s}});var a,s,r=i(49199),o=i(50078),n=i(16581);(function(e){e[e["ORDER"]=1]="ORDER",e[e["PAY"]=2]="PAY",e[e["OBJECT"]=3]="OBJECT"})(a||(a={})),function(e){e[e["EDIT"]=1]="EDIT",e[e["KNOWN_DELETE"]=2]="KNOWN_DELETE"}(s||(s={}));class c extends r.Z{constructor(){super()}async getPayInfoList(e){const t=e?{order_id:e}:{};return await this.request({url:o.Qc,method:"POST",data:t})}async getPayInfo(e){const t=e?{transaction_id:e}:{};return await this.request({url:o.oY,method:"POST",data:t})}async coveraddremark(e){return await this.request({url:o.Ii,method:"POST",data:(0,n.g)(e)})}async covergetsingleremark(e){return await this.request({url:o.Hc,method:"POST",data:(0,n.g)(e)})}async coverchangeremark(e){return await this.request({url:o.Og,method:"POST",data:(0,n.g)(e)})}async coverdeleteremark(e){return await this.request({url:o.k,method:"POST",data:(0,n.g)(e)})}async coverbatchgetremark(e){return await this.request({url:o.YS,method:"POST",data:(0,n.g)(e)})}}const l=new c},52117:function(e,t,i){"use strict";i.d(t,{H:function(){return r},w:function(){return a}});const a=()=>{if(window.localStorage){const e=localStorage.getItem("author_id");if(e)return e;const t="cover_platform_id",i=window.localStorage.getItem(t);if(i)return i;{const e=+new Date+""+`${Math.random()}`.slice(2,5);return window.localStorage.setItem(t,e),e}}return+new Date+""+`${Math.random()}`.slice(2,5)},s=a();function r(e,t=""){try{const i=!1,a=!1;if((a||i)&&(console.log("%ccube report","border: 1px solid #E3E4E5; color: #FFC300; padding: 5px;",e,t),a))return;window.setTimeout((()=>{(new Image).src=`https://support.weixin.qq.com/cgi-bin/mmsupportmeshnodelogicsvr-bin/cube?biz=3512&label=cover.home&uin=${s}&action=${e}&msg=${encodeURIComponent(t)}`}),10)}catch(i){console.error("report error",i)}}},56980:function(e,t,i){"use strict";i.d(t,{ZP:function(){return c},eZ:function(){return s},tF:function(){return a}});var a,s,r,o=i(50078),n=i(49199);(function(e){e[e["InnerAuthor"]=1]="InnerAuthor",e[e["OpenPaySwitch"]=2]="OpenPaySwitch",e[e["OpenInvoiceSwitch"]=4]="OpenInvoiceSwitch",e[e["OpenRefundSwitch"]=8]="OpenRefundSwitch",e[e["OpenAtmosphereSwitch"]=16]="OpenAtmosphereSwitch"})(a||(a={})),function(e){e[e["organization"]=0]="organization",e[e["person"]=1]="person"}(s||(s={})),function(e){e[e["ACCOUNT_TYPE_WX"]=0]="ACCOUNT_TYPE_WX",e[e["ACCOUNT_TYPE_BIZ"]=1]="ACCOUNT_TYPE_BIZ",e[e["ACCOUNT_TYPE_FINDER"]=2]="ACCOUNT_TYPE_FINDER",e[e["ACCOUNT_TYPE_EMOTION"]=3]="ACCOUNT_TYPE_EMOTION"}(r||(r={}));class c extends n.Z{constructor(){super()}async getUserInfo(e){return await this.request({url:o.CD,data:e},!0)}async login(e){return await this.request({url:o.xR,data:e})}async logout(){return await this.request({url:o.WK})}async getLoginQrcode(){return await this.request({url:o.N5})}async checkLoginQrcode(e){return await this.request({url:o.PA,data:{token:e}})}async getSignUpQrcode(e){return await this.request({url:o.ZI,data:{token:e}})}async checkSignUpQrcode(e){return await this.request({url:o.y1,data:{token:e}})}async checkBizPersonSignUpQrcode(e){return await this.request({url:o.Ag,data:{token:e}})}async checkPersonSignUpQrcode(e){return await this.request({url:o.oi,data:{token:e}})}async checkEmotionPersonSignUpQrCode(e){return await this.request({url:o.el,data:{token:e}})}async getEmotionJumpQrcode(e){return await this.request({url:o.wN,data:{email:e}})}async checkEmotionJumpQrcode(e){return await this.request({url:o.Rb,data:{token:e}})}async signUp(e){return await this.request({url:o._5,data:e})}async bizPersonSignUp(e){return await this.request({url:o.Cu,data:e})}async emotionPersonSignUp(e){return await this.request({url:o.A4,data:e})}async signPersonUp(e){return await this.request({url:o.yc,data:e})}async sendEmail(e,t,i=0,a,s,r=0){return await this.request({url:o.q3,data:{token:e,email:t,principal_type:i,name:a,id_number:s,account_type:r}})}async adminList(){return await this.request({url:o.Q4})}async adminSearchWechat(e){return await this.request({url:o.Dl,data:{input_username:e}})}async addAdminWechat(e,t){return await this.request({url:o.Ik,data:{input_username:e,token:t}})}async recallAdmin(e){return await this.request({url:o.Fc,data:{sub_id:e}})}async recallOperate(e){return await this.request({url:o.DS,data:{sub_id:e}})}async removeAdmin(e){return await this.request({url:o.hn,data:{sub_id:e}})}async heartBeat(){return await this.request({url:o.gq})}async UpdateSecondary(e,t,i){return await this.request({url:o.Yc,data:{sub_id:e,old_flag:t,new_flag:i}})}}},57582:function(e,t,i){"use strict";i.d(t,{Cn:function(){return H},l1:function(){return j},AQ:function(){return $},PJ:function(){return Z},U6:function(){return Q},ZP:function(){return q}});var a=i(20144),s=i(20629),r=i(6329),o=i(78255),n=i(70655),c=i(56980),l=i(34225);const d=new c.ZP,p=new l.ZP;let u=class extends r.g4{constructor(...e){super(...e),(0,o.Z)(this,"user",{headImgUrl:"",nickname:"",authorId:"",statusFlag:0,openPurchaseTimeSwitch:0,principalType:0,loginNickname:"",isSecondary:0,managerFlag:0,accountNickname:"",subId:"",emojiRainInfo:{beginTime:0,endTime:0,minPurchaseCount:0,activityOpen:!1},accountType:0,nowAgreementVersion:0,maxAgreementVersion:0,extralInfo:{quotaRedPoint:0},finderInfo:null,adPurchaseSwitch:1}),(0,o.Z)(this,"loginData",{image:"",token:""})}get auth(){const e={},t=this.user.statusFlag,i=Object.entries(c.tF);return i.forEach((([i,a])=>{e[i]=!!(t&a)})),e}get authorId(){const{authorId:e}=this.user;return e}get principalAccountType(){const{principalType:e,accountType:t}=this.user;return`${e}_${t}`}get principalType(){const{principalType:e}=this.user;return e}get accountType(){const{accountType:e}=this.user;return e}get adPurchaseSwitch(){return this.user.adPurchaseSwitch}get headImgUrl(){const{headImgUrl:e}=this.user;return e}get nickname(){const{nickname:e}=this.user;return e}get showQuotaRedPoint(){if(this.user.extralInfo){const{extralInfo:{quotaRedPoint:e}}=this.user;return!!e}return!1}get isInnerUser(){return this.auth.InnerAuthor}get isAtmosphereUser(){return this.auth.OpenAtmosphereSwitch}get banDownload(){return 1==this.user.isSecondary&&!(4&this.user.managerFlag)}SET_USER(e){this.user=e}SET_LOGIN_DATA(e){Object.assign(this.loginData,e)}setUserInfo(e){this.SET_USER(e)}async getUserInfo(e){const t=await d.getUserInfo(e);return t&&0===t.baseResponse.ret&&(this.SET_USER({headImgUrl:t.headImgUrl,nickname:t.nickname,authorId:t.authorId,principalName:t.principalName,statusFlag:t.statusFlag||0,openPurchaseTimeSwitch:t.openPurchaseTimeSwitch,principalType:t.principalType,emojiRainInfo:t.emojiRainInfo,isSecondary:t.isSecondary,managerFlag:t.managerFlag,accountNickname:t.accountNickname,subId:t.subId,loginNickname:t.loginNickname,accountType:t.accountType,maxAgreementVersion:t.maxAgreementVersion,nowAgreementVersion:t.nowAgreementVersion,extralInfo:t.extralInfo,finderInfo:t.finderInfo,adPurchaseSwitch:t.adPurchaseSwitch}),localStorage?.setItem("author_id",t.authorId||"")),t}async getUserFinderInfo(){const e=this.user.finderInfo;if(e){const t=await p.storyGetFinderInfo(e.nickname),i=t?.jumpInfoList?.find((t=>t.username===e.username));return{...e,headImgUrl:i.headImgUrl}}}async login(e){const t=await d.login({author_id:e,token:this.loginData.token});return t}async logout(){const e=await d.logout();return e&&0===e.baseResponse.ret&&this.clearUser(),e}clearUser(){this.SET_USER({headImgUrl:"",loginNickname:"",nickname:"",authorId:"",principalName:"",statusFlag:0,openPurchaseTimeSwitch:0,principalType:0,isSecondary:0,accountNickname:"",managerFlag:0,subId:"",emojiRainInfo:{beginTime:0,endTime:0,minPurchaseCount:0,activityOpen:!1},accountType:0,maxAgreementVersion:0,nowAgreementVersion:0,extralInfo:{quotaRedPoint:0},finderInfo:null,adPurchaseSwitch:1}),window.localStorage&&window.localStorage.removeItem("userAvatar")}async getLoginQrcode(){const e=await d.getLoginQrcode();e&&this.SET_LOGIN_DATA({image:e.image,token:e.token})}async checkLoginQrcode(){const e=await d.checkLoginQrcode(this.loginData.token);if(e)return this.SET_LOGIN_DATA({wxInfo:e.wxInfo,bizInfo:e.bizInfo,finderInfo:e.finderInfo}),e}};(0,n.gn)([r.mm],u.prototype,"SET_USER",null),(0,n.gn)([r.mm],u.prototype,"SET_LOGIN_DATA",null),(0,n.gn)([r.aU],u.prototype,"setUserInfo",null),(0,n.gn)([r.aU],u.prototype,"getUserInfo",null),(0,n.gn)([r.aU],u.prototype,"getUserFinderInfo",null),(0,n.gn)([r.aU],u.prototype,"login",null),(0,n.gn)([r.aU],u.prototype,"logout",null),(0,n.gn)([r.aU],u.prototype,"clearUser",null),(0,n.gn)([r.aU],u.prototype,"getLoginQrcode",null),(0,n.gn)([r.aU],u.prototype,"checkLoginQrcode",null),u=(0,n.gn)([(0,r.Yl)({name:"user",namespaced:!0,store:q})],u);var h=u,m=(i(57658),i(18159)),g=i(40628),v=i(90520),f=i.n(v),y=i(92592),_=i(57448),C=i(72909),b=i(16581);const w=new l.ZP,I=new m.ZP;let k=0,T=class extends r.g4{constructor(...e){super(...e),(0,o.Z)(this,"coverList",[]),(0,o.Z)(this,"cover",{}),(0,o.Z)(this,"showReceiveMaterialDialog",!1),(0,o.Z)(this,"triggerCheckTransactionIds",!1),(0,o.Z)(this,"choosePayInfoDialog",!1),(0,o.Z)(this,"serverNowTime",0),(0,o.Z)(this,"actionAuthInfo",{action:{},authQrcode:"",status:g.WX.ACTION_QRCODE_AUTOCONFIRMED,qrcodeBase64:""}),(0,o.Z)(this,"showEditDialog",!1),(0,o.Z)(this,"previewPagReinit","")}get validPayInfoList(){const e=this.cover;if(!e.payInfoList)return[];const t=e.payInfoList.filter((e=>e.status===_.A7.Delivering||e.status===_.A7.Success)).map(((e,t)=>{let i,a=e.expiredTime?f()("yyyy/MM/dd",new Date(1e3*e.expiredTime)):"-";e.purchaseType===_.mr.time&&e.actived&&(a=e.activeEndTime?f()("yyyy/MM/dd hh:mm",new Date(1e3*e.activeEndTime)):"-",i=(0,C.Jh)(Math.abs(e.activeEndTime-e.serverNowTime),C.m4.hour));const s=e.payStat?e.payStat.remainingGenCoverCount:0,r=Object.assign({},e,{key:t,leftNum:s,expired:`至 ${a}`,leftDays:(0,C.Jh)(e.expiredTime-e.serverNowTime,C.m4.day),leftTime:i,date:f()("yyyy/MM/dd",new Date(1e3*e.paymentTime))});return r}));return t}get leftValidOrderNum(){return this.validPayInfoList.length?this.validPayInfoList.reduce(((e,t)=>{const i=!!(t.permissionFlag&_.A5.Disable_Combine_Gen);return!t.payStat||i?e+=0:t.purchaseType!==_.mr.time||t.actived?e+=t.payStat.remainingGenCoverCount:e+=t.payStat.totalGenCount,e}),0):0}get maxExpiredDays(){if(!this.validPayInfoList.length)return 0;const{expiredTime:e}=this.validPayInfoList.sort(((e,t)=>t.expiredTime-e.expiredTime))[0],t=(0,C.Jh)(e-Date.now()/1e3,C.m4.day);return t}get minExpiredDays(){if(!this.validPayInfoList.length)return 0;const{expiredTime:e}=this.validPayInfoList.sort(((e,t)=>e.expiredTime-t.expiredTime))[0],t=(0,C.Jh)(e-Date.now()/1e3,C.m4.day);return t}get coverActionType(){const e=this.cover;return e?.packetMaterial?.actionList?.[0]?.actionType||this.actionAuthInfo?.action?.actionType}get actionAuthInfoStatus(){return this.actionAuthInfo.status}get authorizeSuccess(){const{status:e}=this.actionAuthInfo,{ACTION_QRCODE_COMFIRMED:t,ACTION_QRCODE_AUTOCONFIRMED:i}=g.WX;return[t,i].includes(e)}get authorizeWaiting(){const{ACTION_QRCODE_VALID:e,ACTION_QRCODE_INVAILID:t,ACTION_QRCODE_EXPIRED:i}=g.WX;return[e,t,i].includes(this.actionAuthInfo?.status)}get showAuthQrcode(){const{status:e}=this.actionAuthInfo;return e&&e!==g.WX.ACTION_QRCODE_AUTOCONFIRMED}SET_COVER_LIST(e){this.coverList=e}SET_COVER(e){e.orderId===this.cover?.orderId?this.cover=Object.assign(this.cover,e):this.cover=e}SET_COVER_INFO(e){this.cover=e}SET_COVER_ORDER_LIST(e){const t=this.cover;a.ZP.set(t,"payInfoList",e)}SET_COVER_RECEIVE_LIST(e){const t=this.cover;a.ZP.set(t,"receiveObjectList",e)}TOGGLE_RECEIVE_DIALOG(){this.showReceiveMaterialDialog=!this.showReceiveMaterialDialog}TOGGLE_TRIGGER_CHECK_TRANSACTION_IDS(){this.triggerCheckTransactionIds=!this.triggerCheckTransactionIds}TOGGLE_CHOOSE_PAY_INFO_DIALOG(e){this.choosePayInfoDialog="boolean"===typeof e?e:!this.choosePayInfoDialog}SET_ACTION_AUTH_INFO(e){this.actionAuthInfo=e}SET_ACTION_AUTH_INFO_STATUS(e){this.actionAuthInfo.status=e}SET_ACTION_AUTH_INFO_MINIAPP_PATH(e){this.actionAuthInfo?.action?.miniAppDetail&&(this.actionAuthInfo.action.miniAppDetail.path=e)}CLEAR_ACTION_AUTH_INFO(){clearTimeout(k),this.actionAuthInfo={authQrcode:"",status:g.WX.ACTION_QRCODE_AUTOCONFIRMED,action:{}}}SET_COVER_REMARK({remarkList:e,idType:t}){const i=this.cover;t===m.Xd.ORDER?this.coverList=this.coverList.map(((t,i)=>Object.assign(t,{remarkInfo:e[i]}))):t===m.Xd.PAY?i.payInfoList=i?.payInfoList?.map(((t,i)=>Object.assign(t,{remarkInfo:e[i]}))):t===m.Xd.OBJECT&&(i.receiveObjectList=i?.receiveObjectList?.map(((t,i)=>Object.assign(t,{remarkInfo:e[i]}))))}SET_SERVER_NOW_TIME(e){this.serverNowTime=e}SET_SHOW_EDIT_DIALOG(e){this.showEditDialog=e}SET_PREVIEW_PAG_REINIT(e){this.previewPagReinit=`${e}_${+new Date}`}async getCoverRemark(e){let t=[];const i=this.cover;e===m.Xd.ORDER?t=this.coverList.map((({orderId:t})=>({idType:e,id:t}))):e===m.Xd.PAY?t=i.payInfoList?.map((({transactionId:t})=>({idType:e,id:t})))||[]:e===m.Xd.OBJECT&&(t=i.receiveObjectList?.map((({objectId:t})=>({idType:e,id:t})))||[]);const a=await I.coverbatchgetremark({remarkIdList:t});0===a?.baseResponse?.ret&&this.SET_COVER_REMARK({remarkList:a.resultList,idType:e})}async getCoverList(e){const t=await w.getCoverList();0!==t?.baseResponse.ret&&e.errorTip("封面获取异常，请重试或联系客服"),t&&t.orderList&&(this.SET_COVER_LIST(t.orderList),this.getCoverRemark(m.Xd.ORDER))}async getCover(e){const t=await w.getCover(e);t&&t.order&&this.SET_COVER({...t.order,coverSetCommInfo:t.coverSetCommInfo})}async getCoverInfo(e){const t=await w.getCover(e);t&&t.order&&this.SET_COVER_INFO(t.order)}async modifyCover(e,t){const i=t||this.cover,a=await w.modifyCover(e,i);return a&&0===a.baseResponse.ret&&i&&i.orderId&&await this.getCover(i.orderId),a}async getCoverPayInfoList(e){const t=await I.getPayInfoList(e);t&&t.payInfoList&&(this.SET_COVER_ORDER_LIST(t.payInfoList),this.getCoverRemark(m.Xd.PAY))}async getCoverReceiveObjectList(e){const{orderId:t,transactionId:i}=e,a=await w.getReceiveList(t,i);if(a&&a.receiveObjectList){const e=this.cover,t=e.receiveObjectList,i=a.receiveObjectList||[],s=[];i.forEach((e=>{const i=t&&t.length&&t.find((t=>t.objectId===e.objectId));i||s.push(e)})),t&&t.length&&t.forEach((e=>{const t=i.find((t=>t.objectId===e.objectId));s.push(t||e)})),this.SET_COVER_RECEIVE_LIST(s),this.SET_SERVER_NOW_TIME(a.serverNowTime),this.getCoverRemark(m.Xd.OBJECT)}}async clearCoverReceiveObjectList(){this.SET_COVER_RECEIVE_LIST([])}async applyRefund(e){const t=await w.applyRefund(e);return await this.getCover(e),t}async cancelPay(e){const{orderId:t,transactionId:i}=e,a=await w.cancelPay(t,i);return await this.getCoverPayInfoList(t),a}async submitCover(){await w.submitCover()}async getFullStat(e){const t=await w.getFullStat(e);if(t&&0===t.baseResponse.ret)return t}async activateOrder(e){const t=await w.activateOrder(e);if(t&&0===t.baseResponse.ret)return t}async getReceiveObjectDetail(e){const t=await w.getReceiveObjectDetail(e);if(t&&0===t.baseResponse.ret)return t}toggleReceiveDialog(){this.TOGGLE_RECEIVE_DIALOG()}toggleTriggerCheckTransactionIds(){this.TOGGLE_TRIGGER_CHECK_TRANSACTION_IDS()}toggleChoosePayInfoDialog(e){this.TOGGLE_CHOOSE_PAY_INFO_DIALOG(e)}async genQrcodePic(){if(!this.actionAuthInfo.authQrcode)return;const{origin:e}=window.location,t=`${e}/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=${this.actionAuthInfo.authQrcode}`,i=await y.toDataURL(t,{width:120,margin:0});this.SET_ACTION_AUTH_INFO(Object.assign({},this.actionAuthInfo,{qrcodeBase64:i}))}async genActionAuthQrcode(e){const{order_id:t,action:i,vm:a}=e,s=await w.coverGenActionQRCode({order_id:t,action:(0,b.g)(i)});if(0===s?.baseResponse.ret){const{origin:e}=window.location,t=`${e}/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=${s.qrCode}`,a=await y.toDataURL(t,{width:120,margin:0});this.SET_ACTION_AUTH_INFO({action:i,authQrcode:s.qrCode,status:s.status,qrcodeBase64:a}),this.genQrcodePic(),this.checkActionAuthQrcodeStatus()}else this.SET_ACTION_AUTH_INFO({action:i,authQrcode:"",status:g.WX.ACTION_QRCODE_EXPIRED,qrcodeBase64:""}),a&&a.errorTip("二维码生成失败，请重试")}checkActionAuthQrcodeStatus(){if(this.actionAuthInfo?.status!==g.WX.ACTION_QRCODE_VALID)return;const e=()=>{k=window.setTimeout((()=>{w.coverCheckActionQRCode(this.actionAuthInfo.authQrcode).then((t=>{this.SET_ACTION_AUTH_INFO_STATUS(t?.status||g.WX.ACTION_QRCODE_INVAILID),t?.status!==g.WX.ACTION_QRCODE_VALID?clearTimeout(k):e()}))}),1e3)};clearTimeout(k),e()}clearActionAuthTimer(){clearTimeout(k)}updateShowEditDialog(e){this.SET_SHOW_EDIT_DIALOG(e)}updatePreviewPagReinit(e){this.SET_PREVIEW_PAG_REINIT(e)}};(0,n.gn)([r.mm],T.prototype,"SET_COVER_LIST",null),(0,n.gn)([r.mm],T.prototype,"SET_COVER",null),(0,n.gn)([r.mm],T.prototype,"SET_COVER_INFO",null),(0,n.gn)([r.mm],T.prototype,"SET_COVER_ORDER_LIST",null),(0,n.gn)([r.mm],T.prototype,"SET_COVER_RECEIVE_LIST",null),(0,n.gn)([r.mm],T.prototype,"TOGGLE_RECEIVE_DIALOG",null),(0,n.gn)([r.mm],T.prototype,"TOGGLE_TRIGGER_CHECK_TRANSACTION_IDS",null),(0,n.gn)([r.mm],T.prototype,"TOGGLE_CHOOSE_PAY_INFO_DIALOG",null),(0,n.gn)([r.mm],T.prototype,"SET_ACTION_AUTH_INFO",null),(0,n.gn)([r.mm],T.prototype,"SET_ACTION_AUTH_INFO_STATUS",null),(0,n.gn)([r.mm],T.prototype,"SET_ACTION_AUTH_INFO_MINIAPP_PATH",null),(0,n.gn)([r.mm],T.prototype,"CLEAR_ACTION_AUTH_INFO",null),(0,n.gn)([r.mm],T.prototype,"SET_COVER_REMARK",null),(0,n.gn)([r.mm],T.prototype,"SET_SERVER_NOW_TIME",null),(0,n.gn)([r.mm],T.prototype,"SET_SHOW_EDIT_DIALOG",null),(0,n.gn)([r.mm],T.prototype,"SET_PREVIEW_PAG_REINIT",null),(0,n.gn)([r.aU],T.prototype,"getCoverRemark",null),(0,n.gn)([r.aU],T.prototype,"getCoverList",null),(0,n.gn)([r.aU],T.prototype,"getCover",null),(0,n.gn)([r.aU],T.prototype,"getCoverInfo",null),(0,n.gn)([r.aU],T.prototype,"modifyCover",null),(0,n.gn)([r.aU],T.prototype,"getCoverPayInfoList",null),(0,n.gn)([r.aU],T.prototype,"getCoverReceiveObjectList",null),(0,n.gn)([r.aU],T.prototype,"clearCoverReceiveObjectList",null),(0,n.gn)([r.aU],T.prototype,"applyRefund",null),(0,n.gn)([r.aU],T.prototype,"cancelPay",null),(0,n.gn)([r.aU],T.prototype,"submitCover",null),(0,n.gn)([r.aU],T.prototype,"getFullStat",null),(0,n.gn)([r.aU],T.prototype,"activateOrder",null),(0,n.gn)([r.aU],T.prototype,"getReceiveObjectDetail",null),(0,n.gn)([r.aU],T.prototype,"toggleReceiveDialog",null),(0,n.gn)([r.aU],T.prototype,"toggleTriggerCheckTransactionIds",null),(0,n.gn)([r.aU],T.prototype,"toggleChoosePayInfoDialog",null),(0,n.gn)([r.aU],T.prototype,"genQrcodePic",null),(0,n.gn)([r.aU],T.prototype,"genActionAuthQrcode",null),(0,n.gn)([r.aU],T.prototype,"checkActionAuthQrcodeStatus",null),(0,n.gn)([r.aU],T.prototype,"clearActionAuthTimer",null),(0,n.gn)([r.aU],T.prototype,"updateShowEditDialog",null),(0,n.gn)([r.aU],T.prototype,"updatePreviewPagReinit",null),T=(0,n.gn)([(0,r.Yl)({name:"cover",namespaced:!0,store:q})],T);var S=T,x=i(96736);const A=new x.Z;let P=class extends r.g4{constructor(...e){super(...e),(0,o.Z)(this,"invoiceList",[]),(0,o.Z)(this,"invoice",null),(0,o.Z)(this,"canInvoiceList",[])}SET_INVOICE_LIST(e){this.invoiceList=e}SET_CAN_INVOICE_LIST(e){this.canInvoiceList=e}SET_INVOICE(e){this.invoice=e}async getInvoiceList(){const e=await A.getInvoiceList();e&&0===e.baseResponse.ret&&e.invoiceInfoList&&this.SET_INVOICE_LIST(e.invoiceInfoList)}async getCanInvoiceList(){const e=await A.getCanInvoiceOrderList();return e&&0===e.baseResponse.ret&&this.SET_CAN_INVOICE_LIST(e.canInvoiceOrderList||[]),e}async getInvoice(e){const t=await A.getInvoice(e);t&&t.invoiceInfo&&this.SET_INVOICE(t.invoiceInfo)}async recallInvoice({invoiceId:e,vm:t}){const i=await A.recallInvoice(e);i&&0===i.baseResponse.ret?this.getInvoice(e):(console.log(1111,t),t&&t.errorTip("撤销失败，请重试或联系客服"))}};(0,n.gn)([r.mm],P.prototype,"SET_INVOICE_LIST",null),(0,n.gn)([r.mm],P.prototype,"SET_CAN_INVOICE_LIST",null),(0,n.gn)([r.mm],P.prototype,"SET_INVOICE",null),(0,n.gn)([r.aU],P.prototype,"getInvoiceList",null),(0,n.gn)([r.aU],P.prototype,"getCanInvoiceList",null),(0,n.gn)([r.aU],P.prototype,"getInvoice",null),(0,n.gn)([r.aU],P.prototype,"recallInvoice",null),P=(0,n.gn)([(0,r.Yl)({name:"invoice",namespaced:!0,store:q})],P);var D=P,U=i(32012);const E=new U.Z;let R=class extends r.g4{constructor(...e){super(...e),(0,o.Z)(this,"noticeList",[])}get hasNewNotice(){return this.noticeList.filter((e=>1e3*e.time>Date.now()-2592e6)).length>0}SET_NOTICE_LIST(e){this.noticeList=e}async getNoticeList(){const e=await E.getList();if(e&&0===e.baseResponse.ret){const t=e.announcementList.map((e=>Object.assign({},e,{date:f()("yyyy/MM/dd",new Date(1e3*e.time)),new:1e3*e.time>Date.now()-2592e6})));this.SET_NOTICE_LIST(t)}}};(0,n.gn)([r.mm],R.prototype,"SET_NOTICE_LIST",null),(0,n.gn)([r.aU],R.prototype,"getNoticeList",null),R=(0,n.gn)([(0,r.Yl)({name:"notice",namespaced:!0,store:q})],R);var M=R;const L=new l.ZP;let N=0,F=class extends r.g4{constructor(...e){super(...e),(0,o.Z)(this,"actionAuthInfo",{action:{},authQrcode:"",status:g.WX.ACTION_QRCODE_AUTOCONFIRMED,qrcodeBase64:""})}get actionAuthInfoStatus(){return this.actionAuthInfo.status}get authorizeSuccess(){const{status:e}=this.actionAuthInfo,{ACTION_QRCODE_COMFIRMED:t,ACTION_QRCODE_AUTOCONFIRMED:i}=g.WX;return[t,i].includes(e)}get authorizeWaiting(){const{ACTION_QRCODE_VALID:e,ACTION_QRCODE_INVAILID:t,ACTION_QRCODE_EXPIRED:i}=g.WX;return[e,t,i].includes(this.actionAuthInfo?.status)}get showAuthQrcode(){const{status:e}=this.actionAuthInfo;return e&&e!==g.WX.ACTION_QRCODE_AUTOCONFIRMED}SET_ACTION_AUTH_INFO(e){console.log({actionAuthInfo:e}),this.actionAuthInfo=e}SET_ACTION_AUTH_INFO_STATUS(e){this.actionAuthInfo.status=e}SET_ACTION_AUTH_INFO_MINIAPP_PATH(e){this.actionAuthInfo?.action?.miniAppDetail&&(this.actionAuthInfo.action.miniAppDetail.path=e)}CLEAR_ACTION_AUTH_INFO(){clearTimeout(N),this.actionAuthInfo={authQrcode:"",status:g.WX.ACTION_QRCODE_AUTOCONFIRMED,action:{}}}async genQrcodePic(){if(!this.actionAuthInfo.authQrcode)return;const{origin:e}=window.location,t=`${e}/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=${this.actionAuthInfo.authQrcode}&type=heat`,i=await y.toDataURL(t,{width:120,margin:0});this.SET_ACTION_AUTH_INFO(Object.assign({},this.actionAuthInfo,{qrcodeBase64:i}))}async genActionAuthQrcode(e){const{order_id:t,action:i,vm:a}=e,s=await L.coverGenActionQRCode({order_id:t,action:(0,b.g)(i)});if(0===s?.baseResponse.ret){const{origin:e}=window.location,t=`${e}/cgi-bin/mmcover-bin/readtemplate?t=page/mobile/authorized_jump.html&qrcode=${s.qrCode}`,a=await y.toDataURL(t,{width:120,margin:0});this.SET_ACTION_AUTH_INFO({action:i,authQrcode:s.qrCode,status:s.status,qrcodeBase64:a}),this.genQrcodePic(),this.checkActionAuthQrcodeStatus()}else this.SET_ACTION_AUTH_INFO({action:i,authQrcode:"",status:g.WX.ACTION_QRCODE_EXPIRED,qrcodeBase64:""}),a&&a.errorTip("二维码生成失败，请重试")}checkActionAuthQrcodeStatus(){if(this.actionAuthInfo?.status!==g.WX.ACTION_QRCODE_VALID)return;const e=()=>{N=window.setTimeout((()=>{L.coverCheckActionQRCode(this.actionAuthInfo.authQrcode).then((t=>{this.SET_ACTION_AUTH_INFO_STATUS(t?.status||g.WX.ACTION_QRCODE_INVAILID),t?.status!==g.WX.ACTION_QRCODE_VALID?clearTimeout(N):e()}))}),1e3)};clearTimeout(N),e()}clearActionAuthTimer(){clearTimeout(N)}};(0,n.gn)([r.mm],F.prototype,"SET_ACTION_AUTH_INFO",null),(0,n.gn)([r.mm],F.prototype,"SET_ACTION_AUTH_INFO_STATUS",null),(0,n.gn)([r.mm],F.prototype,"SET_ACTION_AUTH_INFO_MINIAPP_PATH",null),(0,n.gn)([r.mm],F.prototype,"CLEAR_ACTION_AUTH_INFO",null),(0,n.gn)([r.aU],F.prototype,"genQrcodePic",null),(0,n.gn)([r.aU],F.prototype,"genActionAuthQrcode",null),(0,n.gn)([r.aU],F.prototype,"checkActionAuthQrcodeStatus",null),(0,n.gn)([r.aU],F.prototype,"clearActionAuthTimer",null),F=(0,n.gn)([(0,r.Yl)({name:"auth",namespaced:!0,store:q})],F);var O=F;a.ZP.use(s.ZP);const B=new s.ZP.Store({modules:{user:h,cover:S,invoice:D,notice:M,auth:O},strict:!1});var q=B;const Q=(0,r.rT)(h,B),j=(0,r.rT)(S,B),$=(0,r.rT)(D,B),Z=(0,r.rT)(M,B),H=(0,r.rT)(O,B)},40628:function(e,t,i){"use strict";var a,s,r,o;i.d(t,{B6:function(){return p},EF:function(){return C},FP:function(){return g},IJ:function(){return n},IT:function(){return _},Je:function(){return c},L5:function(){return f},Og:function(){return d},QP:function(){return r},Rf:function(){return a},ST:function(){return v},T:function(){return u},Us:function(){return I},Vo:function(){return T},WX:function(){return k},d5:function(){return S},lv:function(){return y},n6:function(){return m},p0:function(){return x},pK:function(){return w},uX:function(){return l}}),function(e){e[e["None"]=0]="None",e[e["Editing"]=1]="Editing",e[e["Auditing"]=2]="Auditing",e[e["Approved"]=3]="Approved",e[e["Rejected"]=4]="Rejected",e[e["Blocked"]=5]="Blocked",e[e["Expired"]=6]="Expired",e[e["Closed"]=7]="Closed",e[e["Frozen"]=8]="Frozen",e[e["Published"]=9]="Published"}(a||(a={})),function(e){e[e["Refundable"]=1]="Refundable",e[e["Invoicing"]=2]="Invoicing",e[e["NonRefundable"]=3]="NonRefundable",e[e["Refunding"]=4]="Refunding",e[e["Refunded"]=5]="Refunded"}(s||(s={})),function(e){e[e["待提交"]=1]="待提交",e[e["审核中"]=2]="审核中",e[e["审核通过"]=3]="审核通过",e[e["审核驳回"]=4]="审核驳回",e[e["违规下架"]=5]="违规下架",e[e["已过期"]=6]="已过期",e[e["主动下架"]=7]="主动下架",e[e["违规冻结"]=8]="违规冻结",e[e["已上线"]=9]="已上线"}(r||(r={})),function(e){e[e["Heating"]=1]="Heating",e[e["Finsh"]=2]="Finsh",e[e["Stop"]=3]="Stop"}(o||(o={}));const n={1:"推广中",2:"推广完成",3:"推广停止"};var c;(function(e){e[e["Unknow"]=0]="Unknow",e[e["Image"]=1]="Image",e[e["Video"]=2]="Video",e[e["File"]=3]="File",e[e["Pag"]=4]="Pag",e[e["Mp4"]=5]="Mp4",e[e["Gif"]=6]="Gif",e[e["Mov"]=7]="Mov",e[e["Zip"]=8]="Zip"})(c||(c={}));const l=1,d=1e5;var p,u,h,m,g,v;(function(e){e[e["qrcode"]=1]="qrcode",e[e["link"]=2]="link",e[e["code"]=3]="code"})(p||(p={})),function(e){e[e["oneToAll"]=1]="oneToAll",e[e["oneToOne"]=2]="oneToOne"}(u||(u={})),function(e){e[e["appidList"]=0]="appidList",e[e["whileList"]=1]="whileList"}(h||(h={})),function(e){e[e["多人领取"]=1]="多人领取",e[e["一人领取"]=2]="一人领取"}(m||(m={})),function(e){e[e["二维码"]=1]="二维码",e[e["链接"]=2]="链接",e[e["序列号"]=3]="序列号"}(g||(g={})),function(e){e[e["Pending"]=1]="Pending",e[e["Fail"]=2]="Fail",e[e["Recallable"]=3]="Recallable",e[e["NonRecallable"]=4]="NonRecallable",e[e["Recalling"]=5]="Recalling",e[e["Recalled"]=6]="Recalled"}(v||(v={}));const f={[v.Pending]:"正在生成",[v.Fail]:"生成失败",[v.Recallable]:"已生成",[v.NonRecallable]:"已生成",[v.Recalling]:"回收中",[v.Recalled]:"已回收"};var y;(function(e){e[e["Pending"]=1]="Pending",e[e["Success"]=2]="Success",e[e["Fail"]=3]="Fail",e[e["Recalling"]=4]="Recalling",e[e["Recalled"]=5]="Recalled"})(y||(y={}));const _={[y.Pending]:"正在生成",[y.Success]:"已生成",[y.Fail]:"生成失败",[y.Recalling]:"回收中",[y.Recalled]:"已回收"};var C,b,w,I,k,T,S,x;(function(e){e[e["Disable_Download_Link"]=1]="Disable_Download_Link",e[e["Disable_Share_Friend"]=2]="Disable_Share_Friend",e[e["Disable_Recall"]=4]="Disable_Recall"})(C||(C={})),function(e){e[e["NORMAL"]=0]="NORMAL",e[e["EMOJIRAIN"]=1]="EMOJIRAIN"}(b||(b={})),function(e){e[e["公众号"]=2]="公众号",e[e["小程序"]=3]="小程序",e[e["视频号"]=4]="视频号",e[e["艺术家主页"]=5]="艺术家主页",e[e["表情专辑页"]=6]="表情专辑页"}(w||(w={})),function(e){e[e["None"]=0]="None",e[e["Url"]=1]="Url",e[e["MPAccount"]=2]="MPAccount",e[e["MiniApp"]=3]="MiniApp",e[e["FinderProfile"]=4]="FinderProfile",e[e["EmotionProfile"]=5]="EmotionProfile",e[e["EmotionProduct"]=6]="EmotionProduct"}(I||(I={})),function(e){e[e["NONE"]=0]="NONE",e[e["ACTION_QRCODE_VALID"]=1]="ACTION_QRCODE_VALID",e[e["ACTION_QRCODE_INVAILID"]=2]="ACTION_QRCODE_INVAILID",e[e["ACTION_QRCODE_EXPIRED"]=3]="ACTION_QRCODE_EXPIRED",e[e["ACTION_QRCODE_COMFIRMED"]=4]="ACTION_QRCODE_COMFIRMED",e[e["ACTION_QRCODE_AUTOCONFIRMED"]=5]="ACTION_QRCODE_AUTOCONFIRMED"}(k||(k={})),function(e){e[e["init"]=0]="init",e[e["biz"]=1]="biz",e[e["miniApp"]=2]="miniApp",e[e["finder"]=3]="finder",e[e["emotion"]=4]="emotion"}(T||(T={})),function(e){e[e["未知"]=0]="未知",e[e["公众号"]=1]="公众号",e[e["小程序"]=2]="小程序",e[e["视频号"]=3]="视频号",e[e["表情页面"]=4]="表情页面"}(S||(S={})),function(e){e[e["UNKNOW"]=0]="UNKNOW",e[e["MOV"]=1]="MOV",e[e["MP4"]=2]="MP4",e[e["GIF"]=3]="GIF",e[e["ZIP"]=4]="ZIP",e[e["PNG"]=5]="PNG",e[e["JPG"]=6]="JPG",e[e["JPEG"]=7]="JPEG",e[e["PAG"]=999]="PAG"}(x||(x={}))},57448:function(e,t,i){"use strict";i.d(t,{A5:function(){return c},A7:function(){return r},j8:function(){return o},js:function(){return a},kS:function(){return s},mr:function(){return n}});const a={1:"微信支付",2:"网银支付",3:"微信广告预算",4:"线下打款",5:"封面兑换卡",6:"封面兑换卡"};var s,r,o,n,c;(function(e){e[e["Wechat"]=1]="Wechat",e[e["Bank"]=2]="Bank",e[e["WeChatADsPay"]=3]="WeChatADsPay",e[e["RemitPay"]=4]="RemitPay",e[e["Quota"]=5]="Quota",e[e["Quota_Gift"]=6]="Quota_Gift"})(s||(s={})),function(e){e[e["None"]=0]="None",e[e["Pending"]=1]="Pending",e[e["Fail"]=2]="Fail",e[e["Success"]=3]="Success",e[e["Cancel"]=4]="Cancel",e[e["Delivering"]=5]="Delivering",e[e["Delivered"]=6]="Delivered",e[e["Expired"]=7]="Expired",e[e["Blocked"]=8]="Blocked",e[e["Progressing"]=9]="Progressing",e[e["Frozen"]=10]="Frozen"}(r||(r={})),function(e){e[e["无"]=0]="无",e[e["待支付"]=1]="待支付",e[e["支付失败"]=2]="支付失败",e[e["待发放"]=3]="待发放",e[e["已取消"]=4]="已取消",e[e["发放中"]=5]="发放中",e[e["已领完"]=6]="已领完",e[e["已过期"]=7]="已过期",e[e["已失效"]=8]="已失效",e[e["支付处理中"]=9]="支付处理中",e[e["冻结中"]=10]="冻结中"}(o||(o={})),function(e){e[e["count"]=0]="count",e[e["time"]=1]="time"}(n||(n={})),function(e){e[e["Disable_GenType_QRCode"]=1]="Disable_GenType_QRCode",e[e["Disable_GenType_Url"]=2]="Disable_GenType_Url",e[e["Disable_GenType_CdKey"]=4]="Disable_GenType_CdKey",e[e["Disable_GenType_Fission"]=8]="Disable_GenType_Fission",e[e["Disable_ReceiveType_Individual"]=16]="Disable_ReceiveType_Individual",e[e["Disable_ReceiveType_Share"]=32]="Disable_ReceiveType_Share",e[e["Disable_Custom_GenCount"]=64]="Disable_Custom_GenCount",e[e["Disable_Combine_Gen"]=128]="Disable_Combine_Gen",e[e["Disable_Gen_Quota"]=256]="Disable_Gen_Quota",e[e["Disable_Set_Timer"]=512]="Disable_Set_Timer",e[e["Disable_Specify_Users"]=1024]="Disable_Specify_Users"}(c||(c={}))},64444:function(e,t,i){"use strict";i.d(t,{PP:function(){return s},TQ:function(){return p},ZP:function(){return u},vB:function(){return a}});var a,s,r=i(78255),o=(i(57658),i(9669)),n=i.n(o),c=i(8322),l=i(72045);(function(e){e["video"]="videoFileType",e["picture"]="pictureFileType",e["thumb"]="thumbFileType",e["zip"]="zipFileType"})(a||(a={})),function(e){e[e["chunkSuccess"]=0]="chunkSuccess",e[e["chunkFail"]=1]="chunkFail",e[e["fail"]=2]="fail",e[e["success"]=3]="success"}(s||(s={}));class d{constructor(){(0,r.Z)(this,"HOST","https://dcwxsns.video.qq.com"),(0,r.Z)(this,"authParams",void 0)}get singleUploadUrl(){return`${this.HOST}/simpleuploaddfs`}get getUploadIdUrl(){return`${this.HOST}/applyuploaddfs`}uploadChunkUrl(e,t){return`${this.HOST}/uploadpartdfs?PartNumber=${e}&UploadID=${t}`}uploadCompleteUrl(e){return`${this.HOST}/completepartuploaddfs?UploadID=${e}`}setHost(e){this.HOST=`//${e}`}uploadChunk(e){const{chunk:t,file:i,uuid:a,uploadEndCallBack:s}=e,r=this.authParams,o=this.uploadChunkUrl(e.chunkIndex+1,e.uploadId),c=this.getUploadHeader(e);return new Promise(((e,l)=>{const d=`domain: ${o};authKey: ${r.authKey};uuid: ${a};filekey: ${i.name};uin:${r.uin};size:${i.size}`;let p=!1;const u=n().CancelToken.source();window.setTimeout((()=>{u.cancel(),p||l({errMsg:`connect timeout;${d}`,response:null})}),12e4),n().put(o,t,{timeout:121e3,timeoutErrorMessage:"response timeout",cancelToken:u.token,headers:Object.assign({},c,{"Content-Type":"application/octet-stream"}),onUploadProgress(e){const t=Math.round(e.loaded/e.total);1===t&&s&&s()}}).then((t=>{e(t)})).catch((e=>{p=!0,l({errMsg:`${e.message};${d}`,response:e.response})}))}))}uploadSingleFile(e,t){const i=new FormData;return i.append("file",e),n().put(this.singleUploadUrl,i,{timeout:3e4,timeoutErrorMessage:"response timeout",headers:t})}finishUpload(e){const t=this.getUploadHeader(e);return n().post(this.uploadCompleteUrl(e.uploadId),{TransFlag:e.transFlag,PartInfo:e.partInfo.sort(((e,t)=>e.PartNumber-t.PartNumber))},{headers:t})}getUploadHeader(e){const{file:t,uuid:i,md5:a,cdnFileType:s}=e,r=this.authParams;return{Authorization:r.authKey,"X-Arguments":`apptype=${r.appType}&filetype=${r[s]}&weixinnum=${r.uin}&filekey=${encodeURIComponent(t.name)}&filesize=${t.size}&taskid=${i}&scene=${r.scene||0}`,"Content-MD5":a||"null"}}getUploadId(e,t){return n().put(this.getUploadIdUrl,e,{headers:t})}setAuthParams(e){this.authParams=e}}(0,r.Z)(d,"ReplaceHost","https://finder.video.qq.com");const p=new d;class u{get isBigFile(){return this.file.size>this.singleFileSize}get uploadedChunkCount(){return this.partInfo.filter((e=>!!e)).length}get progress(){return this.uploadedChunkCount/this.chunkCount*100}constructor(e,t){(0,r.Z)(this,"file",void 0),(0,r.Z)(this,"reader",void 0),(0,r.Z)(this,"singleFileSize",8388608),(0,r.Z)(this,"cdnFileType",void 0),(0,r.Z)(this,"chunkSize",2097152),(0,r.Z)(this,"strategy",1),(0,r.Z)(this,"ConcurrentLimit",4),(0,r.Z)(this,"chunkCount",void 0),(0,r.Z)(this,"curChunkIndex",0),(0,r.Z)(this,"reloadChunkTime",1),(0,r.Z)(this,"uploadQueue",[]),(0,r.Z)(this,"uploadEventHandlerCb",void 0),(0,r.Z)(this,"uuid",void 0),(0,r.Z)(this,"break",!1),(0,r.Z)(this,"uploadChunkRecord",[]),(0,r.Z)(this,"uploadTaskId",""),(0,r.Z)(this,"transFlag",""),(0,r.Z)(this,"partInfo",[]),(0,r.Z)(this,"startTime",0),this.init(e,t)}init(e,t){this.curChunkIndex=0,this.uploadQueue=[],this.break=!1,this.file=e,t&&(t.chunkSize&&(this.chunkSize=t.chunkSize),t.cdnFileType&&(this.cdnFileType=t.cdnFileType)),this.chunkCount=Math.ceil(this.file.size/this.chunkSize)}startUpload(e){this.uploadEventHandlerCb=e,this.uuid=(0,l.Z)(),this.break=!1,this.chunkUpload()}async chunkUpload(){const e=p.getUploadHeader({file:this.file,cdnFileType:this.cdnFileType,uuid:this.uuid}),t=await p.getUploadId({BlockSum:this.chunkCount,BlockPartLength:new Array(this.chunkCount).fill(1).map(((e,t)=>{const i=(t+1)*this.chunkSize;return i>this.file.size?this.file.size:i}))},e);if(!t?.data?.UploadID)throw new Error(`Error_No_UploadId: ${this.uuid}`);this.uploadTaskId=t.data.UploadID,this.startTime=Date.now(),this.file.size>2*this.chunkSize?new Array(this.ConcurrentLimit).fill(1).forEach(((e,t)=>{0===t?this.loadChunk():this.loadNextChunk()})):this.loadChunk()}endUpload(){this.break=!0,this.curChunkIndex=0,this.reloadChunkTime=1,this.uploadQueue=[]}loadChunk(){const e=this.curChunkIndex,t=this.chunkSize,i=this.curChunkIndex*t,a=i+t>this.file.size?this.file.size:i+t,r=this.blobSlice(i,a),o=this.strategy,n=new FileReader;n.readAsArrayBuffer(r),n.onload=t=>{if(!t.target)return;const i=t.target.result;if("string"===typeof i||!i)return;const a=new c.ArrayBuffer;a.append(i);const n=a.end();this.uploadChunkRecord.push({index:e,reqTime:Date.now(),resTime:0,cost:0});const l=this.uploadChunkRecord.length-1,d=()=>p.uploadChunk({uploadId:this.uploadTaskId,chunkIndex:e,chunk:r,file:this.file,cdnFileType:this.cdnFileType,uuid:this.uuid,md5:n}).then((t=>{const i=Date.now()-this.uploadChunkRecord[l].reqTime;if(this.uploadChunkRecord[l].resTime=Date.now(),this.uploadChunkRecord[l].cost=i,!t?.data?.TransFlag)throw new Error(t);return t.data?.TransFlag&&(this.transFlag=t.data?.TransFlag),t.data?.ETag&&(this.partInfo[e]={PartNumber:e+1,ETag:t.data?.ETag}),this.uploadEventHandlerCb&&this.uploadEventHandlerCb(s.chunkSuccess,this.progress),e===this.chunkCount-1?Promise.all(this.uploadQueue).then((()=>{this.handleComplete()})):this.loadNextChunk(),t})).catch((async e=>{const t=Date.now()-this.uploadChunkRecord[l].reqTime;this.uploadChunkRecord[l].resTime=Date.now(),this.uploadChunkRecord[l].cost=t,o!==this.strategy||this.break||(this.reloadChunkTime<=4&&!JSON.stringify(e)?.includes("connect timeout")?(this.reloadChunkTime+=1,this.uploadQueue.push(d())):1===this.strategy?(this.endUpload(),this.chunkSize=1048576,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.strategy=2,this.startUpload(this.uploadEventHandlerCb)):this.endUpload())}));this.uploadQueue.push(d())}}loadNextChunk(){this.curChunkIndex=this.curChunkIndex+1,this.curChunkIndex<this.chunkCount&&!this.break&&this.loadChunk()}async handleComplete(){this.endUpload();const e=await p.finishUpload({file:this.file,uuid:this.uuid,uploadId:this.uploadTaskId,cdnFileType:this.cdnFileType,transFlag:this.transFlag,partInfo:this.partInfo});e?.data?.DownloadURL?(e.data.httpsUrl=e.data.DownloadURL.replace("http://wxapp.tc.qq.com",d.ReplaceHost),this.uploadEventHandlerCb&&this.uploadEventHandlerCb(s.success,{url:e.data.httpsUrl})):this.uploadEventHandlerCb&&this.uploadEventHandlerCb(s.fail,e)}blobSlice(e,t){const i=this.file;return i.slice?i.slice(e,t):i.mozSlice?i.mozSlice(e,t):i.webkitSlice?i.webkitSlice(e,t):null}}},16581:function(e,t,i){"use strict";i.d(t,{_:function(){return a},g:function(){return s}});i(57658);const a=function(e){return"string"===typeof e?o(e):r(e)},s=function(e){return"string"===typeof e?n(e):r(e,!0)};function r(e,t){return e&&"object"===typeof e?l(e)||d(e)?e:c(e)?h(e,r,t):m(u(e),(function(i,a){let s;return s="boolean"===typeof t&&t?n(a):o(a),i[s]=r(e[a],t),i}),{}):e}function o(e){return e.replace(/[_.-](\w|$)/g,(function(e,t){return t.toUpperCase()}))}function n(e){return e.replace(/[A-Z]/g,(function(e){return"_"+e.toLowerCase()}))}const c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e){return"[object Date]"===Object.prototype.toString.call(e)},d=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=Object.prototype.hasOwnProperty,u=Object.keys||function(e){const t=[];for(var i in e)p.call(e,i)&&t.push(i);return t};function h(e,t,i){if(e.map)return e.map((e=>t(e,i)));const a=[];for(let s=0;s<e.length;s++)a.push(t(e[s],s));return a}function m(e,t,i){if(e.reduce)return e.reduce(t,i);for(let a=0;a<e.length;a++)i=t(i,e[a],a);return i}},80579:function(e,t,i){"use strict";i.d(t,{U:function(){return o},v:function(){return n}});var a=i(34225),s=i(72909);const r=new a.ZP,o=async(e,t,i)=>{const a=new FormData;if(t)for(const s in t)a.append(s,t[s]);a.append("name","image"),"string"===typeof e?a.append("file",(0,s.KG)(e)):a.append("file",e);const o=await r.saveImg(a,i);return o},n=(e,t)=>{const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const a=i.getContext("2d");a.drawImage(e,0,0,t.width,t.height);const s=i.toDataURL("image/jpeg");return s}},72909:function(e,t,i){"use strict";i.d(t,{FT:function(){return P},GM:function(){return b},Hc:function(){return T},Jh:function(){return c},KG:function(){return v},Ll:function(){return f},MA:function(){return d},Nu:function(){return l},Q7:function(){return u},UZ:function(){return D},Xi:function(){return S},Z2:function(){return h},Zh:function(){return C},_v:function(){return E},bi:function(){return _},dd:function(){return g},e4:function(){return m},gn:function(){return x},hR:function(){return U},jo:function(){return w},lE:function(){return p},m4:function(){return n},oR:function(){return o},q6:function(){return k},sT:function(){return y},t$:function(){return A}});i(82801),i(63408),i(14590);var a=i(52117),s=i(27484),r=i.n(s);const o=e=>{const t=new Date(1e3*e),i=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return`${i}年${a}月${s}日`};var n;(function(e){e[e["minute"]=0]="minute",e[e["day"]=1]="day",e[e["hour"]=2]="hour"})(n||(n={}));const c=(e,t)=>{const i=86400;if(t===n.day)return`${Math.ceil(e/i)}`;if(t===n.minute){let t=e/60,i=e%60;return t=t<10?`0${Math.floor(t)}`:Math.floor(t),i=i<10?`0${Math.floor(i)}`:Math.floor(i),`${t}:${i}`}if(t===n.hour){const t=Math.floor(e/3600),i=e%3600,a=c(i,n.minute);return t?`${t}:${a}`:a}return""},l=e=>e.replace(/[^\x00-\xff]/g,"aa").length,d=(e,t,i,a)=>{let s=document.querySelector("#crop-img-canvas");s||(s=document.createElement("canvas"),s.id="crop-img-canvas",s.style.display="none",document.body.appendChild(s)),s.width=t,s.height=i;const r=s.getContext("2d");return r&&r.drawImage(e,0,a||e.naturalHeight-i,t,i,0,0,t,i),s.toDataURL("image/jpeg")},p=(e,t,i="image/jpeg")=>{let a=document.querySelector("#concat-img-canvas");a||(a=document.createElement("canvas"),a.id="concat-img-canvas",a.style.display="none",document.body.appendChild(a)),a.width=e.width,a.height=e.height;const s=a.getContext("2d"),r=e.width/t.width*t.height;return s&&s.drawImage(t,0,0,e.width,r),s&&s.drawImage(e,0,0,e.width,e.height),a.toDataURL(i)},u=e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return"string"===typeof e&&!!e.match(t)&&e.length<255},h=(e,t,i)=>new Promise((a=>{const s=document.createElement("canvas");s.id="concat-img-canvas-"+ +new Date,s.style.display="none",document.body.appendChild(s),s.width=t,s.height=i;const r=s.getContext("2d"),o=new Image;o.onload=function(){r&&r.drawImage(o,0,0,o.width,o.height);const e=s.toDataURL("image/png");a(e)},o.src=e})),m=e=>{const t=/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}$)/;return"string"===typeof e&&t.test(e)},g=e=>new Promise((t=>{fetch(e).then((e=>e.blob())).then((e=>{const i=new FileReader;i.onloadend=()=>{"string"===typeof i.result&&t(i.result)},i.readAsDataURL(e)}))})),v=e=>{const t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),s=new Uint8Array(a);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);const r=new Blob([a],{type:i}),o=new File([r],"file",{type:i});return o},f=(e,t="file")=>{const i=e.split(","),a=i[0].match(/:(.*?);/)?.[1]||"",s=atob(i[1]);let r=s.length;const o=new Uint8Array(r);while(r--)o[r]=s.charCodeAt(r);return new File([o],t,{type:a})},y=e=>new Promise(((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=function(e){e.target?.result||i("fileToBase64 fail");const a=e.target?.result;t(a)}})),_=(e,t,i,s="image/jpeg",r="")=>new Promise(((o,n)=>{const c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=function(){const e=document.createElement("canvas"),a=e.getContext("2d");if(e.width=t||c.width,e.height=i||c.height,a){t&&i?a.drawImage(c,0,0,t,i):a.drawImage(c,0,0);try{const t=e.toDataURL(s);o(t)}catch(r){n(r)}}},c.onerror=t=>{(0,a.H)("imgToDataURLError",`type: ${r}, ${e} err: ${JSON.stringify(t)}`)},c.src=e})),C=e=>{if(e<10)return`0.0${e.toFixed()}`;if(e<100)return`0.${e.toFixed()}`;{const t=e/100,i=e%100;return 0===i?`${t}.00`:t.toFixed(2)}},b=e=>{if(!e||!e.packetMaterial)throw new Error("extractImgUrl must pass cover.packetMaterial");const{sourceImage:t,receiveImage:i,detailImage:a,bubbleImage:s,openImage:r,corpImage:o}=e.packetMaterial;return{sourceImageUrl:t?t.mediaUrl:"",receiveImageUrl:i?i.mediaUrl:"",detailImageUrl:a?a.mediaUrl:"",bubbleImageUrl:s?s.mediaUrl:"",openImageUrl:r?r.mediaUrl:"",corpImageUrl:o?o.mediaUrl:""}},w=e=>{let t="";t=e.purchaseUrl.indexOf("ad.weixin.qq.com/cover_pay")>-1||e.purchaseUrl.indexOf("ad.qq.com/wechat-redpacket-payment")>-1?e.purchaseUrl:`https://cover.weixin.qq.com/cgi-bin/mmcover-bin/readtemplate?t=page/pay.html&tokenid=${encodeURIComponent(e.tokenId)}&tokenurl=${encodeURIComponent(e.purchaseUrl)}&coverid=${e.orderId}&count=${e.purchaseCount}&use_sandbox_env=${e.useSandboxEnv}&tid=${e.tokenId}`,window.location.href=t},I="undefined"!==typeof window&&null!==window;function k(){if(!I)return!1;let e=!0;try{const t=document.createElement("canvas");t.getContext&&t.getContext("2d")&&(e=0===t.toDataURL("image/webp").indexOf("data:image/webp"))}catch(t){e=!1}return e}function T(e,t){const i=1024*(t.kbLimit||0),a=t.imgSize.width,s=t.imgSize.height,r=new FileReader,o=new Promise((o=>{if(t.kbLimit&&e.size>i)return o({status:"wrong_file_size"});r.onload=e=>{const t=new Image;t.src=e.target.result,t.onload=()=>{if(t.width!==a||t.height!==s)return o({status:"wrong_pic_size"});o({status:"ok"})}}}));return r.readAsDataURL(e),o}const S=e=>e?.replace(/^https?:/,"");function x(e,t){const i=new FileReader,a=new Image;a.crossOrigin="anonymous";const s=document.createElement("canvas"),r=s.getContext("2d"),{x:o,y:n,width:c,height:l}=t;return new Promise((t=>{a.onload=()=>{const e=a.width,i=a.height;s.width=e,s.height=i,r.clearRect(0,0,e,i),r.drawImage(a,0,0);const d=r.getImageData(o,n,c,l),p=d.data,u=10;for(let a=3;a<p.length;a+=4*u)if(p[a]>1)return t(!1);return t(!0)},i.onload=function(e){a.src=e.target.result},i.readAsDataURL(e)}))}const A=e=>{const t=new Image;return new Promise(((i,s)=>{t.onload=()=>{const{width:e,height:a}=t;i({width:e,height:a})},t.onerror=t=>{console.info("检查图片出错，请检查图片链接",e),(0,a.H)("检查图片出错",JSON.stringify({url:e})),s(t)},t.src=e}))};function P(e,t){var i=-1,a=e.length,s=a-1;t=void 0===t?a:t;while(++i<t){var r=i+Math.floor(Math.random()*(s-i+1));const t=e[r];e[r]=e[i],e[i]=t}return e.length=t,e}function D(e,t){return r().unix(e).format(t||"YYYY/MM/DD HH:mm")}async function U(e){const t=await fetch(e,{method:"HEAD"}),i=t.headers.get("content-length");if(i)return parseInt(i);{(0,a.H)("content-length无法获取文件大小");const t=await fetch(e);if(t.ok){const e=await t.arrayBuffer(),i=e.byteLength;return i}throw new Error("无法获取文件大小")}}const E=e=>new Promise((t=>{setTimeout((()=>t()),e)}))},9938:function(e,t,i){"use strict";i.d(t,{$p:function(){return l},NL:function(){return n},WY:function(){return c},db:function(){return h},mw:function(){return m},o:function(){return d},xY:function(){return g}});i(57658);var a=i(1330),s=i(99453),r=i(52117),o=i(28800);i(81354);const n=e=>/png|jpe?g/.test(e),c=e=>e.replace(/.*\//,""),l=e=>{const t=document.createElement("video");return t.preload="metadata",new Promise((i=>{t.addEventListener("loadedmetadata",(()=>{i({width:t.videoWidth,height:t.videoHeight,duration:t.duration})})),"string"===typeof e?t.src=e:e instanceof File&&(t.src=URL.createObjectURL(e))}))},d=async(e,t)=>{if(t=t.toUpperCase(),"MP4"===t)return await l(e);if("PAG"===t)return await(0,s.Bc)(e);throw new Error("file type no match")},p=async(e,t=20)=>{const i=[],o=await(0,s.sV)();return(0,a.W)({locateFile:o}).then((async a=>{const s=await fetch(e).then((e=>e.arrayBuffer())),r=await a.PAGFile.load(s),o=document.createElement("canvas"),n=r.width(),c=r.height();o.width=n,o.height=c;const l=await a.PAGView.init(r,o);for(let e=0;e<=t;e++){const a=e===t?.95:e/t;l?.setProgress(a),await(l?.play()),await(l?.pause());const s=o.toDataURL("image/jpeg",.5);i.push(s)}i.splice(Math.floor(i.length/2),1);try{l?.destroy()}catch(d){console.info("--- ~ PAGInit ~ err:",d)}})).catch((e=>{throw(0,r.H)("getMediaInfo PAGInit Error",JSON.stringify(e)),e})),i},u=async(e,t=10)=>{const i=[],a=document.createElement("video"),s=document.createElement("canvas"),r=s.getContext("2d");return new Promise((o=>{a.addEventListener("loadedmetadata",(async()=>{const e=a.duration,n=a.videoWidth/a.videoHeight,c=n>=1920/1080,l=300,d=l/n;s.width=l,s.height=d;const p=e/t;let u=0,h=u*p;0===h&&(h=.11),a.currentTime=h,a.addEventListener("seeked",(()=>{if(u>=t)return;let e="";if(r.drawImage(a,0,0,a.videoWidth,a.videoHeight,0,0,l,d),c){const t=document.createElement("canvas");t.width=300,t.height=300/(a.videoWidth/2/a.videoHeight);const i=t.getContext("2d");i.drawImage(s,.25*s.width,0,s.width/2,s.height,0,0,t.width,t.height),e=t.toDataURL("image/jpeg")}else e=s.toDataURL("image/jpeg",.5);i.push(e),u++;const n=u*p;a.currentTime=n,u>=t&&o(i)}))})),a.crossOrigin="anonymous",a.preload="metadata",a.src=e}))},h=async(e,t=20)=>{let{url:i}=e;const a=o.ho.getBrowser(),s=e.type.toUpperCase();let n=[];const c=sessionStorage.getItem(i);if(c)try{return n=JSON.parse(c),n}catch(l){(0,r.H)("get_frame_from_storage_error",JSON.stringify(l))}if("PAG"===s&&(n=await p(i,t)),"MP4"===s&&("Safari"===a.name&&(i+="#t=0.1",console.info("--- ~ getMediaFrameList ~ url:",i)),n=await u(i,t)),n.length>0)try{sessionStorage.clear(),console.warn("clear all sessionStorage"),sessionStorage.setItem(i,JSON.stringify(n))}catch(l){(0,r.H)("set_frame_list_error",l?.message)}return n},m=e=>{const t=document.createElement("video"),{cropLeft:i,cropTop:a,cropHeight:s,cropWidth:r}=e.cropInfo,{fileUrl:n}=e;let{startTime:c}=e.timeInfo;return 0===c&&(c=.1),new Promise((l=>{t.addEventListener("loadedmetadata",(async()=>{const n=await o.BC.convertVideoToCanvas(t,c),{canvas:d}=n,p=d.getContext("2d");p.drawImage(t,0,0,d.width,d.height);const u=p.getImageData(Number(i),Number(a),Number(r),Number(s));p.clearRect(0,0,d.width,d.height),d.width=Number(r),d.height=Number(s),p.putImageData(u,0,0);const h=document.createElement("canvas");h.width=e.targetSize.width,h.height=e.targetSize.height;const m=h.getContext("2d");m.drawImage(d,0,0,e.targetSize.width,e.targetSize.height);const g=h.toDataURL("image/jpeg");l(g)})),t.crossOrigin="anonymous",t.preload="metadata",t.src=n}))},g=async e=>new Promise(((t,i)=>{fetch(e).then((async e=>{const a=await e.blob();if(a){const e=URL.createObjectURL(a);t(e)}i(new Error("fetch media error"))})).catch((()=>new Error("fetch media error")))}))},351:function(e,t,i){"use strict";i.d(t,{Tg:function(){return o}});var a=i(40628),s=i(72909);const r=e=>{let t="-";return void 0!==e.coversetReceiveCount?e.coversetReceiveCount:((e.needFission||1===e.heatStatus)&&(t=e.fissionObject?`${e.fissionObject.totalReceiveCount}/${e.fissionObject.totalGenCount}（裂变发放数量）`:e.fissionReceiveCount||0),t)},o=e=>{const t=r(e);let i,o=`${(0,s.UZ)(e.referTransactionExpiretime,"YYYY/MM/DD")}`;if(e.childObject?.length){i=e.childObject.sort(((e,t)=>e.referTransactionExpiretime-t.referTransactionExpiretime)).map(((t,i)=>({...t,key:t.objectId,refundVisible:!1,statusText:a.IT[e.mergeStatus],genTypeText:`${a.FP[e.genType]}`,receiveTypeText:e.extraUseDetail?"":a.n6[e.receiveType],receiveBeginTimeText:0!=e.receiveBeginTime?(0,s.UZ)(e.receiveBeginTime):"-",usedPercent:`${t.totalReceiveCount} / ${t.totalGenCount}`,fissionPercent:r(t),genTime:(0,s.UZ)(e.createTime),referTransactionExpiretimeText:`${(0,s.UZ)(t.referTransactionExpiretime,"YYYY/MM/DD")}`,lastChildren:i===e.childObject.length-1,disabledDownloadLink:!!(a.EF.Disable_Download_Link&t.permissionFlag),disabledRecall:!!(a.EF.Disable_Recall&t.permissionFlag),disabledShareFriend:!!(a.EF.Disable_Share_Friend&t.permissionFlag)})));const t=Array.from(new Set(i.map((e=>e.referTransactionExpiretimeText))));2===t.length?o=t.map((e=>e)).join("、<br>"):t.length>2&&(o=`${t.slice(0,2).map((e=>e)).join("、<br>")}等`)}return{...e,children:i,key:e.mergeId||e.objectId,refundVisible:!1,statusText:e.mergeStatus?a.IT[e.mergeStatus]:a.L5[e.status],genTypeText:e.extraUseDetail?e.extraUseDetail:1===e.distributionType?"微信表情雨":`${a.FP[e.genType]}`,receiveTypeText:e.extraUseDetail?"":a.n6[e.receiveType],receiveBeginTimeText:0!=e.receiveBeginTime?(0,s.UZ)(e.receiveBeginTime):"-",usedPercent:`${e.totalReceiveCount} / ${e.totalGenCount}`,fissionPercent:t,genTime:(0,s.UZ)(e.createTime),isHeat:e.isHeat,referTransactionExpiretimeText:o,disabledDownloadLink:!!(a.EF.Disable_Download_Link&e.permissionFlag),disabledRecall:!!(a.EF.Disable_Recall&e.permissionFlag),disabledShareFriend:!!(a.EF.Disable_Share_Friend&e.permissionFlag)}}},99453:function(e,t,i){"use strict";i.d(t,{ed:function(){return le},TI:function(){return re},su:function(){return oe},Oz:function(){return F},Wr:function(){return ie},WB:function(){return Y},zj:function(){return H},p2:function(){return j},CJ:function(){return se},Zt:function(){return X},JV:function(){return q},YO:function(){return V},tF:function(){return Q},sV:function(){return L},Bc:function(){return O},at:function(){return ce},if:function(){return G}});var a=i(72909),s=i(20144),r=i(34225),o=i(1330),n=i(18205),c=i(80579),l=i(2776),d=i(52117),p=i(9938),u=i(63296),h=i(40628),m=i(28800);function g(e){return e?e.replace(/^http:/,"https:"):""}let v="",f="",y=null;const _=[{quality:60,fps:20},{quality:50,fps:15},{quality:40,fps:10},{quality:30,fps:10},{quality:20,fps:10}],C=[{quality:60,fps:20},{quality:50,fps:15},{quality:40,fps:10},{quality:30,fps:10},{quality:20,fps:10}],b=[{quality:20,fps:10},{quality:10,fps:10},{quality:5,fps:10}],w=[{quality:60,fps:20},{quality:50,fps:15},{quality:40,fps:10}],I=[{quality:50,fps:60},{quality:40,fps:60},{quality:30,fps:60}],k=[{quality:50,fps:60},{quality:40,fps:60},{quality:30,fps:60}],T=[{quality:40,fps:24},{quality:30,fps:24},{quality:20,fps:24},{quality:10,fps:24}],S=512e3,x=512e3,A=358400,P=358400,D=153600,U=30720,E=30720,R=153600,M=153600,L=async()=>{const e="https://res.wx.qq.com/t/wx_fed/cdn_libs/res/libpag/4.3.43/libpag.wasm";if(v)return()=>v;try{const t=await(0,p.xY)(e);return v=t,()=>v}catch{return()=>e}},N=async()=>{const e="https://res.wx.qq.com/t/wx_fed/cdn_libs/res/libpag/4.3.43libpag.min.js";if(f)return f;try{const t=await(0,p.xY)(e);return f=t,f}catch{return e}},F=async()=>{if(y)return y;const e=await N(),t=await L();return y=await(0,u.MF)({locateFile:i=>"libpag.wasm"===i?t("libpag.wasm"):"libpag.js"===i?e:i}),y},O=async e=>{const t=await L();return new Promise(((i,a)=>{(0,o.W)({locateFile:t}).then((async t=>{let s=null;if("string"===typeof e){const i=await fetch(e).then((e=>e.arrayBuffer())).catch((e=>{a(e)}));s=await t.PAGFile.load(i)}else e instanceof File&&(s=await t.PAGFile.load(e));if(!s)throw(0,d.H)("获取pag信息失败",JSON.stringify({msg:e})),new Error("获取动态素材信息失败，请重试");const r=s.width(),o=s.height(),n=s.duration(),c=s.frameRate();s.destroy(),i({width:r,height:o,duration:Number((n/1e6).toFixed(2)),frameRate:c})})).catch((e=>{throw(0,d.H)("getPagInfo PAGInit Error",JSON.stringify(e)),e}))}))},B=async e=>{if(!e.fileUrl)throw(0,d.H)("换图片时传入的pag链接为空",JSON.stringify(e)),new Error("换图片时传入的pag链接为空");let t=!1;const i=async()=>(await(0,a._v)(1e4),t||(0,d.H)("genStaticPic超时",JSON.stringify(e)),""),s=async()=>{const i=+new Date;(0,d.H)("提取pag帧",JSON.stringify({options:e}));const a=await L();return new Promise(((s,r)=>{const{fileUrl:n,width:c,height:l,imageType:p="image/jpeg"}=e;(0,o.W)({locateFile:a}).then((async a=>{const o=await fetch(n).then((e=>e.arrayBuffer())).catch((e=>{r(e)})),u=await a.PAGFile.load(o),h=document.createElement("canvas");h.width=c,h.height=l;const m=await a.PAGView.init(u,h);e.lastFrame&&m&&(m?.setProgress(1),await m.flush());const g=h.toDataURL(p);(0,d.H)("成功提取pag帧",JSON.stringify({time:+new Date-i,options:e})),t=!0;try{m?.destroy()}catch{}return s(g)})).catch((e=>{throw(0,d.H)("getStaticPic PAGInit Error",JSON.stringify(e)),e}))}))},r=await Promise.race([i(),s()]);return r},q=async(e,t=0)=>{if(!e.base.file_type||!e.base.file_url)throw(0,d.H)("合成动效氛围封面缺少参数",JSON.stringify(e)),new Error("合成动效氛围封面缺少参数");const i={gen_type:r.rv.ATMOSPHERE_PAG_NORMAL,scene:r.a1.FIRST_UPLOAD,base:{file_type:h.p0.PNG,file_url:"",duration:-1,start_time:0,x:-1,y:-1,...e.base},pag_arg:{w:720,h:908,...I[t],...e.pagArg},request_id:`atmosphere_cover__${m.Z_.uuid()}`},s=await le([i],"atmosphere_cover"),{url:o,md5:n}=s.result[0],c=await(0,a.hR)(o);if(console.info("【氛围】封面PAG大小：",c/1024,"kb","是否超过：",c>R,"pag链接:",o),c>R){if(t>=I.length-1)throw(0,d.H)("【氛围】封面大小超标",JSON.stringify({pagUrl:e.base.file_url})),Error("氛围效果合成失败，可将氛围素材替换为画面更简单的图片后重试。");return(0,d.H)("【氛围】封面生成降级",JSON.stringify({qfs:I[t+1]})),q(e,t+1)}i.pag_arg.fps=30;const l=await le([i],"atmosphere_cover_low_quality"),{url:p,md5:u}=l.result[0];return{url:o,md5:n,lowUrl:p,lowMd5:u}},Q=async(e,t=0)=>{if(!e.base.file_type||!e.base.file_url)throw(0,d.H)("合成动效氛围详情页缺少参数",JSON.stringify(e)),new Error("合成动效氛围详情页缺少参数");const i={gen_type:r.rv.ATMOSPHERE_PAG_DETAIL,scene:r.a1.FIRST_UPLOAD,base:{file_type:h.p0.PNG,file_url:"",duration:-1,start_time:0,x:-1,y:-1,...e.base},pag_arg:{w:720,h:908,...k[t],...e.pagArg},request_id:`atmosphere_detail_${m.Z_.uuid()}`},s=await le([i],"atmosphere_detail"),{url:o,md5:n}=s.result[0],c=await(0,a.hR)(o);if(console.info("【氛围】详情页PAG大小：",c/1024,"kb","是否超过：",c>M,"pag链接:",o),c>M){if(t>=k.length-1)throw(0,d.H)("【氛围】详情页大小超标",JSON.stringify({pagUrl:e.base.file_url})),Error("氛围效果合成失败，可将氛围素材替换为画面更简单的图片后重试。");return(0,d.H)("【氛围】详情页生成降级",JSON.stringify({qfs:k[t+1]})),Q(e,t+1)}i.pag_arg.fps=30;const l=await le([i],"atmosphere_detail_low_quality"),{url:p,md5:u}=l.result[0];return{url:o,md5:n,lowUrl:p,lowMd5:u}},j=async(e,t=0)=>{if(!e.base.file_type||!e.base.file_url)throw(0,d.H)("合成动效氛围气泡缺少参数",JSON.stringify(e)),new Error("合成动效氛围气泡缺少参数");const i={gen_type:r.rv.ATMOSPHERE_PAG_BUBBLE,scene:r.a1.FIRST_UPLOAD,base:{file_type:h.p0.PNG,file_url:"",duration:-1,start_time:0,x:-1,y:-1,...e.base},pag_arg:{w:528,h:384,...T[t],...e.pagArg},request_id:`atmosphere_bubble_${m.Z_.uuid()}`},s=await le([i],"atmosphere_bubble"),{url:o,md5:n}=s.result[0],c=await(0,a.hR)(o);if(console.info("【氛围】气泡PAG大小：",c/1024,"kb","是否超过：",c>E,"pag链接:",o),c>E){if(t>=T.length-1)throw(0,d.H)("【氛围】气泡大小超标",JSON.stringify({pagUrl:e.base.file_url})),Error("氛围效果合成失败，可将氛围素材替换为画面更简单的图片后重试。");return(0,d.H)("【氛围】气泡生成降级",JSON.stringify({qfs:T[t+1]})),j(e,t+1)}i.pag_arg.fps=20;const l=await le([i],"atmosphere_bubble_low_quality"),{url:p,md5:u}=l.result[0];return{url:o,md5:n,lowUrl:p,lowMd5:u}},$=e=>{if(!e.whole.file_type||!e.whole.file_url)throw(0,d.H)("合成动态原素材缺少参数",JSON.stringify(e)),new Error("合成动态原素材缺少参数");const t={gen_type:r.rv.DIRECT_TO_PAG,scene:e.scene||r.a1.FIRST_UPLOAD,whole:{file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0,...e.whole},pag_arg:{w:n.TE.width,h:n.TE.height,...C[0],...e.pagArg},request_id:`source_${m.Z_.uuid()}`};return t},Z=async(e,t=0)=>{const i=$(e),r=await le([i],"source"),{url:o,md5:n}=r.result[0],c=await(0,a.hR)(o),l=s.ZP.prototype.$isAtmosphereUser?P:x;if(s.ZP.prototype.$isAtmosphereUser&&(0,d.H)("使用氛围限定大小限制",JSON.stringify({MAX_SIZE:l})),console.info("【动态】详情页PAG大小：",c/1024,"kb","是否超过：",c>l),c>l){if(t>=C.length-1)throw(0,d.H)("【动态】详情页大小超标",JSON.stringify({pagUrl:e.whole.file_url})),Error("详情页动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");const a=t+1;return(0,d.H)("【动态】详情页生成降级",JSON.stringify({qfs:C[a]})),e.pagArg={...i.pag_arg,...C[a]},Z(e,a)}return{url:o,md5:n}},H=async e=>{const t=await B({fileUrl:e,width:n.TE.width,height:n.TE.height,type:"source"});return t||((0,d.H)("生成静态封面图失败",JSON.stringify({pagUrl:e})),"")},G=async e=>{const t=await Z(e);return{pagUrl:t?.url,pagMd5:t.md5}},W=e=>{if(!e.base.file_type||!e.base.file_url)throw(0,d.H)("合成封面缺少参数",JSON.stringify(e)),new Error("合成封面缺少参数");const t={gen_type:r.rv.NORMAL_PACKET,scene:r.a1.REUPLOAD,base:{file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0,...e.base},cover:{file_url:n.is.hb_bottom_957,w:n.TE.width,h:n.TE.receiveHeight,x:-1,y:-1,duration:-1,start_time:0,file_type:h.p0.PNG},pag_arg:{w:n.TE.width,h:n.TE.receiveHeight,..._[0],...e.pagArg},request_id:`cover_dynamic_${m.Z_.uuid()}`};return t},z=async(e,t=0)=>{const i=W(e),r=await le([i],"coverDynamic"),o=s.ZP.prototype.$isAtmosphereUser?A:S;s.ZP.prototype.$isAtmosphereUser&&(0,d.H)("使用氛围限定大小限制",JSON.stringify({MAX_SIZE:o}));const{url:n,md5:c}=r.result[0],l=await(0,a.hR)(r.result[0]?.url);if(console.info("【动态】拆红包页PAG大小：",l/1024,"kb","是否超过：",l>o),l>o){if(t>=_.length-1)throw(0,d.H)("【动态】拆红包页大小超标",JSON.stringify({pagUrl:e.base.file_url})),Error("拆红包页动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");const a=t+1;return(0,d.H)("【动态】拆红包页生成降级",JSON.stringify({qfs:_[a]})),e.pagArg={...i.pag_arg,..._[a]},z(e,a)}return{url:n,md5:c}},V=async e=>{const t=await z(e);return{pagUrl:t?.url,pagMd5:t.md5}},J=e=>{if(!e.whole.file_type||!e.whole.file_url)throw(0,d.H)("合成发红包页缺少参数",JSON.stringify(e)),new Error("合成发红包页缺少参数");const t={gen_type:r.rv.DIRECT_TO_PAG,scene:e.scene||r.a1.FIRST_UPLOAD,whole:{file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0,...e.whole},pag_arg:{w:n.s9.width,h:n.s9.height,...w[0],...e.pagArg},request_id:`corp_${m.Z_.uuid()}`};return t},K=async(e,t=0)=>{const i=J(e),s=await le([i],"corp");let r="";const o=await(0,a.hR)(s.result[0].url),{url:n,md5:c}=s.result[0];if(console.info("【动态】发红包页PAG大小：",o/1024,"kb","是否超过：",o>D),o>D){if(t>=w.length-1)return r=await Y(s.result[0].url),(0,d.H)("【动态】发红包页大小超标，降低为图片",JSON.stringify({pagUrl:e.whole.file_url})),{picBase64:r,type:"static",url:"",md5:""};const a=t+1;return(0,d.H)("【动态】发红包页生成降级",JSON.stringify({qfs:w[a]})),e.pagArg={...i.pag_arg,...w[a]},K(e,a)}return{url:n,md5:c}},Y=async e=>{const t=setTimeout((()=>{(0,d.H)("corp获取首帧超时")}),5e3),i=await B({fileUrl:e,width:n.s9.width,height:n.s9.height,type:"corp"});return clearTimeout(t),i||((0,d.H)("生成发红包页静态图失败",JSON.stringify(e)),"")},X=async e=>{const t=await K(e);return t.picBase64&&"static"===t.type?{pagUrl:"",pagMd5:"",picBase64:t.picBase64}:{pagUrl:t?.url,pagMd5:t.md5}},ee=e=>{if(!e.whole.file_type||!e.whole.file_url)throw(0,d.H)("合成气泡缺少参数",JSON.stringify(e)),new Error("合成气泡缺少参数");const t={gen_type:r.rv.DIRECT_TO_PAG,scene:e.scene||r.a1.FIRST_UPLOAD,whole:{file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0,...e.whole},pag_arg:{w:n.Mx.width,h:n.Mx.height,...b[0],...e.pagArg},request_id:`bubble_${m.Z_.uuid()}`};return t},te=async(e,t=0)=>{const i=ee(e),s=await le([i],"bubble"),{url:r,md5:o}=s.result[0],n=await(0,a.hR)(r);let c="";if(console.info("【动态】气泡生成结果：气泡PAG大小：",n/1024,"kb","是否超过：",n>U,"生成的pag链接：",s.result[0].url),n>U){if(t>=b.length-1)return c=await ie(s.result[0].url),(0,d.H)("【动态】气泡大小超标，降低为图片",JSON.stringify({pagUrl:e.whole.file_url})),{picBase64:c,type:"static",url:"",md5:""};const a=t+1;return(0,d.H)("【动态】气泡生成降级",JSON.stringify({qfs:b[a]})),e.pagArg={...i.pag_arg,...b[a]},te(e,a)}return{url:r,md5:o}},ie=async e=>{const t=setTimeout((()=>{(0,d.H)("气泡获取首帧超时")}),11e3),i=await B({fileUrl:e,width:n.Mx.width,height:n.Mx.height,type:"bubble"});return clearTimeout(t),i||((0,d.H)("生成气泡静态图失败",JSON.stringify({pagUrl:e})),"")},ae=async e=>{try{(0,d.H)("开始取尾帧",JSON.stringify({pagUrl:e}));const t=await B({fileUrl:e,width:n.Mx.width,height:n.Mx.height,lastFrame:!0,type:"bubble_last_frame"});if(t){const e=await(0,c.U)(t,{image_name:"dynamic_bubble_last_frame"});return e?((0,d.H)("获取到尾帧并上传成功",JSON.stringify({url:e?.url})),e):((0,d.H)("上传尾帧失败"),{url:"",md5:"",baseResponse:{ret:0,msg:""}})}return(0,d.H)("获取不到尾帧"),{url:"",md5:"",baseResponse:{ret:0,msg:""}}}catch(t){throw console.warn("生成红包气泡尾帧失败",t),(0,d.H)("生成红包气泡尾帧失败",JSON.stringify({pagUrl:e,err:t})),t}},se=async e=>{let t;const i=await te(e);return console.info("--- ~ pagRes:",i),"static"===i.type&&i.picBase64?{pagUrl:"",pagMd5:"",lastFrameMd5:"",lastFrameUrl:"",picBase64:i.picBase64}:(t=await ae(i.url),console.info("--- ~ lastFrame:",t),(0,d.H)("拿到的尾帧",JSON.stringify({lastFrame:t})),{pagUrl:i?.url,pagMd5:i.md5,lastFrameUrl:t?.url||"",lastFrameMd5:t?.md5||""})},re=async e=>{if(!e)throw new Error("视频链接为空");let t=null;try{if(t=await le([{gen_type:r.rv.DIRECT_TO_PAG,scene:r.a1.JUST_CHECK_MP4,whole:{file_type:h.p0.MP4,file_url:e,duration:3,w:-1,h:-1},pag_arg:{w:n.TE.width,h:n.TE.height,fps:24,quality:70},request_id:`checkMp4_${m.Z_.uuid()}`}],"checkMp4"),0===t.result[0].checkResult)return t.result[0];{const e=new Error(`${l.mj[Number(t.result?.[0]?.checkResult)]||"校验素材不通过，请重试"}`);throw e.checkResult=t?.result?.[0]?.checkResult,e}}catch(i){throw(0,d.H)("检查mp4失败",JSON.stringify({res:t,err:i})),new Error(i.message||"MP4校验素材失败，请重试")}},oe=async e=>{let t=null;try{if(t=await le([{gen_type:r.rv.DIRECT_TO_PAG,scene:r.a1.JUST_CHECK_ZIP,above:{file_type:h.p0.ZIP,file_url:e,w:-1,h:-1,x:-1,y:-1},request_id:`checkZip_${m.Z_.uuid()}`}],"checkZip"),0===t.result[0].checkResult)return t.result[0];{const e=new Error(`${l.mj[Number(t.result[0].checkResult)]||"压缩包检查不通过，请重试"}`);throw e.checkResult=t?.result?.[0]?.checkResult,e.zipPicNum=t?.result?.[0]?.zipPicNum,e}}catch(i){throw(0,d.H)("检查压缩包不通过",JSON.stringify({url:e,...t})),new Error(i.message||"压缩包校验素材失败，请重试")}},ne=e=>{if(!e.base.file_type||!e.base.file_url||!e.above.file_type||!e.above.file_url)throw(0,d.H)("合成挂件缺少参数",JSON.stringify(e)),new Error("合成挂件缺少参数，请重新上传挂件");const t={gen_type:r.rv.WIDGET_PACKET,scene:r.a1.WIDGET_PNG_ZIP,base:{file_type:h.p0.MP4,file_url:"",duration:-1,start_time:0,...e.base},above:{file_type:h.p0.MP4,file_url:"",w:n.g$.width,h:n.g$.height,x:0,y:0,duration:-1,start_time:0,...e.above},cover:{file_url:n.is.hb_bottom_957,file_type:h.p0.PNG},pag_arg:{w:n.g$.width,h:n.g$.height,..._[0],...e.pagArg},request_id:`widget_${m.Z_.uuid()}`};return t},ce=async(e,t=0)=>{const i=ne(e),r=await le([i],"widget"),o=s.ZP.prototype.$isAtmosphereUser?A:S;s.ZP.prototype.$isAtmosphereUser&&(0,d.H)("使用氛围限定大小限制",JSON.stringify({MAX_SIZE:o,type:"widget"}));const{url:n,md5:c}=r.result[0],l=await(0,a.hR)(r.result[0]?.url);if(console.info("【动态】异形拆红包页PAG大小：",l/1024,"kb","是否超过：",l>o),l>o){if(t>=_.length-1)throw(0,d.H)("【动态】异形拆红包页大小超标",JSON.stringify({pagUrl:e.base.file_url})),Error("拆红包页动态素材压缩失败，建议缩短时长，降低画面复杂度后重试");const a=t+1;return(0,d.H)("【动态】异形拆红包页生成降级",JSON.stringify({qfs:_[a]})),e.pagArg={...i.pag_arg,..._[a]},ce(e,a)}return{pagUrl:n,pagMd5:c}},le=async(e,t)=>{let i=0;const o=300,n=`${t}_${m.Z_.uuid()}`,c=s.ZP.prototype.genVersion,l=async()=>{const p=t.startsWith("atmosphere");if(p&&c<s.ZP.prototype.genAtmosphereVersion||c<s.ZP.prototype.genVerion)return(0,d.H)("checkSuccess版本废弃",JSON.stringify({version:c,curVersion:s.ZP.prototype.genVersion})),{baseResponse:{ret:0,msg:""},result:[{url:"",md5:"",checkResult:0,zipPicNum:0,zipWidgetUrl:"",request_id:"",status:r.qh.GEN_PAG_SUCC}]};i+=1;const u=e.map((e=>e.request_id));if(!u.every((e=>e)))throw new Error(`${t}需要传入request_id`);const h=await r.yQ.coverGetGenPagResult({order_id:n,request_ids:u},{type:t});if(h?.result?.length>0&&h?.result?.every((e=>e.status===r.qh.GEN_PAG_SUCC)))return h.result.forEach((e=>{e.url=g(e.url),e.zipWidgetUrl=g(e.zipWidgetUrl)})),h;if(i%5===0&&(0,d.H)(`${t}_动态素材生成中`,JSON.stringify({orderId:n,checkTimes:i})),i>=o)throw(0,d.H)(`${t}_动态素材生成超时`,JSON.stringify({orderId:n,checkTimes:i,infos:e})),new Error("动态素材生成超时，请重试");if(0===h?.result.length||!h?.result.every((e=>e.status===r.qh.GEN_PAG_SUCC)))return await(0,a._v)(1e3),l();if(!h||h?.result?.some((e=>e.status===r.qh.GEN_PAG_FAIL)))throw(0,d.H)(`${t}_动态素材生成失败`,JSON.stringify({orderId:n,checkTimes:i,infos:e})),new Error("动态素材生成失败，请重试");throw(0,d.H)("动态素材生成失败未知错误",JSON.stringify({orderId:n,checkTimes:i,type:t,infos:e})),new Error("动态素材生成错误，请重试")},p=await r.yQ.coverBatchGenPag({order_id:n,infos:e},{type:t});try{if(0===p?.baseResponse.ret){await(0,a._v)(3e3);const e=await l();return e}throw(0,d.H)("发起素材转化失败",JSON.stringify({batchRes:p,orderId:n})),new Error("发起动态素材转化失败，请重试")}catch(u){throw new Error(u.message)}}},41757:function(e,t,i){"use strict";i.d(t,{g:function(){return h}});var a=i(94375),s=i.n(a),r=i(40881),o=i(20144);function n(e){return Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}function c(e){setTimeout((()=>{(new Image).src=`https://support.weixin.qq.com/cgi-bin/mmsupportmeshnodelogicsvr-bin/cube?${n(e)}`}),10)}var l=i(52117);const d={isDevelopment:!1,isProduction:!0},p=3512;function u(e){if(d.isDevelopment)console.info("Merlin is not initialized.");else try{s().init({debug:!0,release:"24030601",collectors:[new a.GeneralWebErrorCollector,new a.VueErrorCollector({vue:o.ZP})],transports:[new r.ConsoleTransport,new a.CubeErrorTransport({bizId:5588,mid:"mmredpacketcoverlogicsvr",groupKey:`cover.home.${e}`,moduleName:"mmredpacketcoverlogicsvr",uriMapper:e=>{if("string"===typeof e){0;try{const t=e.split("?")[1]||"",i=t.split("&");for(const e of i){const[t,i]=e.split("=");if("t"===t)return i}}catch(t){return console.error(t),e}}return`${e}`}})]})}catch(t){c({biz:p,label:"cover.home.merlin.error",action:"merlinInitError",msg:`${t}, ${t?.message}`,uin:(0,l.w)()})}}const h={initMerlinErrorReport:u,errorReporter:s(),reportError:d.isDevelopment?e=>{console.info("error is not report on development: ",e)}:s().reportError}},94736:function(e){"use strict";e.exports="data:image/png;base64,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"},27983:function(e,t,i){"use strict";e.exports=i.p+"img/banner_page_0.eaff6989.png"},12074:function(e,t,i){"use strict";e.exports=i.p+"img/bg-index.7e3c09e7.png"},18337:function(e,t,i){"use strict";e.exports=i.p+"img/biz_qr.631b1093.png"},75950:function(e,t,i){"use strict";e.exports=i.p+"img/bless.2bdb05cc.png"},72190:function(e){"use strict";e.exports="data:image/png;base64,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"},12963:function(e,t,i){"use strict";e.exports=i.p+"img/case-header-bottom.5d6bf1a9.png"},88014:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA8CAYAAAA34qk1AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAOqADAAQAAAABAAAAPAAAAAAPI3xuAAABY0lEQVRoBe1b0Q2CQAz1jGM4B4l7CHs4iXvAICbM4R7YS/x4YnI58Q5K+0hMCvF6fX2vTQENTdO00zT1B0VHCKEbx3EoGdKxpDPNvghUMztLYjvNF0l9DFIf3fx6zXPpE730ibbmHpRuzexu4ZuMbpH1mnu6YfSr62JWc7shTjK5k9ba3d0NowSKErZgJ2t0yYT0vusI2pJD6Wpj5N94yOi/GdS23g2jya7LyUibLjPiSTKasb7WVy6ipmK+Za5+qAQqj1VugjJ+Sh1dEigno1J5XtFPktEV4/jYKtaUXHh+XPzt5CLyP+MSlUAlwPv75gBjzbalkcXXGVdc4GZgcAM0KV1ORij+ndhupOsGaLJGORntpC4xTDfSJVCk3YJNRi2wiBjIKGbDgk1GLbCIGMgoZsOCTUYtsIgYyChmw4JNRi2wiBjIKGbDgu2G0SBP49X976W0guKvT90wSqCl5bO1vxfigmbR4le8BwAAAABJRU5ErkJggg=="},41854:function(e){"use strict";e.exports="data:image/png;base64,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"},20005:function(e,t,i){"use strict";e.exports=i.p+"img/crop2.671b1bc2.png"},40183:function(e){"use strict";e.exports="data:image/png;base64,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"},79337:function(e,t,i){"use strict";e.exports=i.p+"img/emotion-rain.29803349.gif"},31317:function(e,t,i){"use strict";e.exports=i.p+"img/example_11.0d9f44d3.png"},93807:function(e,t,i){"use strict";e.exports=i.p+"img/example_22.6348b005.png"},70964:function(e,t,i){"use strict";e.exports=i.p+"img/example_bubble_0.acb74e8a.png"},4299:function(e,t,i){"use strict";e.exports=i.p+"img/example_bubble_1.80f0c0b7.png"},69716:function(e,t,i){"use strict";e.exports=i.p+"img/example_bubble_2.b884a553.png"},27442:function(e,t,i){"use strict";e.exports=i.p+"img/logo.e7e0e255.png"},94681:function(e,t,i){"use strict";e.exports=i.p+"img/make_story_bg.4f79ddfe.png"},38036:function(e){"use strict";e.exports="data:image/png;base64,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"},50545:function(e){"use strict";e.exports="data:image/png;base64,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"},21637:function(e){"use strict";e.exports="data:image/png;base64,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"},96611:function(e,t,i){"use strict";e.exports=i.p+"img/qrcode.9320307e.png"},64427:function(e){"use strict";e.exports="data:image/png;base64,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"},6012:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAQlBMVEUAAACenp6kpKShoaGysrLBwcHV1dWrq6u5ubm8vLzAwMDFxcXIyMjNzc3Pz8/MzMyampr////19fWqqqrFxcXKysrldLGSAAAAEHRSTlMA/vv+6JkS9M27o4RiMyAFM4zOlgAAAQVJREFUSMeM0d0OgyAMhuG2IP5OPxTv/1Zn4jI66ZTnjOT9DkipEMbOi2N24rsx0IO58QyFfTPf5KF3KLg+kG0ZBCYZFjK8WvzVvqgwCW7IRBcN4xY3lx6PfhYT4xFP6r+CCvL9+dKiSrvQaUCl4XNfQSU5b96jWk+H2UFLG5QtQXNzcYI9rpvq17gXx/BQUozHQvUxJiieKDAOOcmL/Mg40AhYC7sHRupgL+weHXnYC7uHJ4G9sHsIOdgLu4cjhr2we/C70jqgAQCGYRjGn7UxGMCl/+uS9oG+Uj+6v7UH19Ho8G28e4F6RRcCjZkFWaNyYby4X6G8sl6Kr90X+1eHLyddfwCXjHBtfrtDPwAAAABJRU5ErkJggg=="},42480:function(){}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=e,function(){i.amdO={}}(),function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=function(e){e&&!e.d&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},r=function(i){return i.map((function(i){if(null!==i&&"object"===typeof i){if(i[e])return i;if(i.then){var r=[];r.d=0,i.then((function(e){o[t]=e,s(r)}),(function(e){o[a]=e,s(r)}));var o={};return o[e]=function(e){e(r)},o}}var n={};return n[e]=function(){},n[t]=i,n}))};i.a=function(i,o,n){var c;n&&((c=[]).d=1);var l,d,p,u=new Set,h=i.exports,m=new Promise((function(e,t){p=t,d=e}));m[t]=h,m[e]=function(e){c&&e(c),u.forEach(e),m["catch"]((function(){}))},i.exports=m,o((function(i){var s;l=r(i);var o=function(){return l.map((function(e){if(e[a])throw e[a];return e[t]}))},n=new Promise((function(t){s=function(){t(o)},s.r=0;var i=function(e){e!==c&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)))};l.map((function(t){t[e](i)}))}));return s.r?n:o()}),(function(e){e?p(m[a]=e):d(h),s(c)})),c&&(c.d=0)}}(),function(){var e=[];i.O=function(t,a,s,r){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],r=e[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](a[c])}))?a.splice(c--,1):(n=!1,r<o&&(o=r));if(n){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,s,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};i.t=function(a,s){if(1&s&&(a=this(a)),8&s)return a;if("object"===typeof a&&a){if(4&s&&a.__esModule)return a;if(16&s&&"function"===typeof a.then)return a}var r=Object.create(null);i.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var n=2&s&&a;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){o[e]=function(){return a[e]}}));return o["default"]=function(){return a},i.d(r,o),r}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,a){return i.f[a](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/"+(971===e?"group-doc":e)+"."+{55:"ae64900e",222:"74b78522",230:"1cc818af",525:"2a9e5317",971:"145abd53",987:"61152818"}[e]+".js"}}(),function(){i.miniCssF=function(e){return"css/"+(971===e?"group-doc":e)+"."+{55:"21d1e014",230:"f8dba212",525:"3f73555f",971:"f397de67",987:"6e17c0db"}[e]+".css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="red-envelope-cover-platform:";i.l=function(a,s,r,o){if(e[a])e[a].push(s);else{var n,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var p=l[d];if(p.getAttribute("src")==a||p.getAttribute("data-webpack")==t+r){n=p;break}}n||(c=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,i.nc&&n.setAttribute("nonce",i.nc),n.setAttribute("data-webpack",t+r),n.src=a),e[a]=[s];var u=function(t,i){n.onerror=n.onload=null,clearTimeout(h);var s=e[a];if(delete e[a],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((function(e){return e(i)})),t)return t(i)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),c&&document.head.appendChild(n)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=826}(),function(){i.p="//res.wx.qq.com/t/wx_fed/base/cover/red-envelope-cover-platform/res/"}(),function(){var e=function(e,t,i,a){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var r=function(r){if(s.onerror=s.onload=null,"load"===r.type)i();else{var o=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=n,s.parentNode.removeChild(s),a(c)}};return s.onerror=s.onload=r,s.href=t,document.head.appendChild(s),s},t=function(e,t){for(var i=document.getElementsByTagName("link"),a=0;a<i.length;a++){var s=i[a],r=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){s=o[a],r=s.getAttribute("data-href");if(r===e||r===t)return s}},a=function(a){return new Promise((function(s,r){var o=i.miniCssF(a),n=i.p+o;if(t(o,n))return s();e(a,n,s,r)}))},s={826:0};i.f.miniCss=function(e,t){var i={55:1,230:1,525:1,971:1,987:1};s[e]?t.push(s[e]):0!==s[e]&&i[e]&&t.push(s[e]=a(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}(),function(){var e={826:0};i.f.j=function(t,a){var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var r=new Promise((function(i,a){s=e[t]=[i,a]}));a.push(s[2]=r);var o=i.p+i.u(t),n=new Error,c=function(a){if(i.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",n.name="ChunkLoadError",n.type=r,n.request=o,s[1](n)}};i.l(o,c,"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,r,o=a[0],n=a[1],c=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(c)var d=c(i)}for(t&&t(a);l<o.length;l++)r=o[l],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},a=self["webpackChunkred_envelope_cover_platform"]=self["webpackChunkred_envelope_cover_platform"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998,64],(function(){return i(60779)}));a=i.O(a)})();
//# sourceMappingURL=index.beba3756.js.map